<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"dcda5cc1a282349382f0f9c99ba24e64ad8eeb8a1da34f7a15e78db15bb8a8d01961ebc4930b0bd2643dfb362312ccc848273202dddf8dca35eb3c1ccc94ba0f2f56fc8a177da217af9ce280d085ddf226da4c5b493285c9e1224c2e7662c8f137b041547e1fb69ae4973d8da2edeeb118590418b7257b3958a6dc8bf08fcfae734a02835a01b92c41190ef3ecaa04e257654dd1186fba9f117efef5f3a8c1f83561a385e4bc87a426c5f43bb46c8636409ba68f89af0c2a4bfaca968f0942de2709e60da3667ebca858f5701270cec9d2146bf826d8edeaa576444d757a70022630bdd69b8569d335df3c083d608a45f9f0312c9e506e61f303911d692cfdc16b48b3be3d92f234e88f111b7c8dc3fba3cfe70cd9a2fd010a272ca000249ec4264d724faed4f8fe1d528e319756b57739934a638c0b619b6487db8395dd65a448da2b6ef69083839ba35b17bc0ae7b2ecfbdce086af0d662de65001d8a7649db0d28916e18d8785f6c0e82491ed5c9259cedff069fe903b7ac69f0245ee8c9e7110afadaf2192a0ead5c9e9a07d093cae26b0bf313b045c1e84205172c78db8814cfa55503af53105c0d63876f8e41c262cab909251991ee87e09d06c22c2ff858e4341f4c4e27689cf3807cbb74fe6d0832d9fb1c40e5d68e4ce30fd28d7d46530c25fe579457ff9c2dd6b5d62dad48cbfdb90ec02eb86b645479dee5a4055f50052e1385cbb92ea6ee02f644831e01eb124423b8d9e8165951e84f4f41c4df4c1c00f6c6d58c575b480341370916f7711cd2f0dff9a87b92daee776fb46669b3459272ff75991f9fd1a6968e8a4f7d803e47f8451d8d39c3d5f40df6c3f0c25470cdd38eafff8e5fe394a9ab54e09bec78a9c22d6b38ff70fdb09b914525694646373d44aba6066aa1f428c0a41682a49832bf1c0ec446baa4dd97c9e496d9212e70311e41d389d4ccb24a7b5a154db3398147fb4eed8b62c9ce657dee74d777415fee389eaab4098fd1b8d9c693937320ac3f76ee0525ed5f51aa46222e1542819c0e56b597e1e704c9a8111729f0c496ecf45adfbcc73523c8b677c5ae85303dd9409602b569368d2762f17884f133d376cdabefe26a310779cba643a90f2d47c2fabfe2a55ec6a828cc449e9bf085d973fab05b1e2891adb03e097e1f7e1b078d1de6749f7cae45713bab932c51c122e02136530cf0e3aa2992dc7e3821f6b7a107f6e17d0c8e12c067be07a5f5f5602263c3d7f006ecb9a0a3343a16030f813cc417bf0bcef8fbfe828b8e3a7e1f845244fda72325603822fdad0a08cd2b69a04280d1078d0b4881d6629cb4d08b9f76231858d98e320524c427ed3ae734be24a131356ec2eb9cafc849f86139d3cf4afcb0f4a2d932a9ab2d4cf376e1d864ea18f435d0cd647389913665d40dce8979e125e85f5fedeadc2da927b6890349a8bea2e646448161e85a96282588487eaae63a1782b5836c4f069e690516f7f0543fb99f14b2cece6e146fe1ecf880d7e77b37c5e47fe19cdceb5206dd3aba9289f56ba566fed47530b4d968cf9c265b59862cb47a0144dd8e3757f5aad90be9626a3d7960817fed51a9a81d396e430b578dcc9e849226d77a928a2a5788d42bd35f9989f98025f64cf57068e4d29e6f5a4e42cf75a19b015cdf836acda7c044ed7dbbd05aa0b92804ee2fd646377d5e817b679134be2f91033e0af8ee3b7917d1f0f6c465689a67575724bfecfbf2979774c28bec18d6903d553d4ee49534b4420b0cad1ada20cb9417fbcc2164797256525634ae3134ea46dca54c775d2def44a5eefea1274415898077bcb92050f5b85859525902f592343485d7ac513a862a663b75ddb67b3abda343b7a9ee8b1d1ef80bf82f70d862f9b5662615396e82df059961c5c694e8350384de16ef713254e220f0e8687180844934113c24ab99531e050bca65b676e5addba8d90433db6aeb17f56be6ebe412e436106645b6fe3d21435a82c61a4a424d69bcae332cc7b92aacf9d9392c47bd57c857a8645bee0fabf256fc19c29aab4bd8f7bab605b22dd987134af59881a6ad282cbc09103e4ad6b7c6894559a763a5f3b262f134c6d17a987c17ecf4587aa2d107322c34cf55939a862f1c296a0e4578026a1048f1266e0cf096eeba94f028b7f698a58d6703aae209317853cdb245e9a0076bd66b5afcef235f01fb65fa91c50c9bc7b228c6c2d595d837bd06227b210208a544d3bc8450aefa0555e65d2c2227e4b8cc7cc485659df12dbb882ea231dc5a05a3e87649d2d33459e28dff38a85616228d99a3cae9bbe6b9492fe6a38ca4a19f0b1d6feaeec6d8d03bacd1157f48f6a45bcdbcd5cc1a3c3b2c3a51307baa2f6536185d7b85d8813e9bbcf797e47d6a8f1f0ff48bb5c71f4260416c659b773487d2a6e949123d3fd6a47338e17e8a6aa3c8b3f8ae0c7442cb740607019d43cd307ef3e107de479216522668b6eb6d4444820599349588f108ddc613d1d4dbd23f6710f949b3f12660bdf61bf9a34a034776e4daf3da53b7967d34e9dcb5662e726462770c46d45d8a5f4f96b295b53f7239c3a1baf9ed56031289814546c3b620a1481703a43731bf70ce8db8000a727dff473efb6c33c8c03536a87003d54585884080d91b58ecd1abb828991530f62266badc8bcf842b7c5b875b529e453f725eec04b02895d75f460aa07684f921674d4c1d5dce6c9652c97da0275d47b77049096b8d772dc8e12a72d2ebf117e9166a3838a352fe0da92c7b842f672e1fa823b3e925a5cbbbc28b9826ef9dd1a116bf7b85e35cc1d7e8afd409217e8b65af70ba5a92c338b7b12cef0c5f1c897d11dd097253d9a27d857a525c27cf1be846a95eea2fed4cf6d59b393de4798ffc5f4ac09e8c609047d3630a1f2428f8e381363e6c2e29c1c34fd286e3d822876997633ceb890eca41cbc8bb68764ff6ab118331fbb4948b29adb4237dc9903f247350e6d9d01b1bca0039823f0d30b4a481e15463b3ce76a567df171b913044df4670b877b601c32bd732a3b3bc02b49e1cc3eb6371cf61529a639f5735606ee8f4b9048d877f4668322636cfa04a8bfbd4e7338fa770f9fc5f868b6e3dbe57aa540443800c3ededf3f639872848a3c3b62fa1c2e88406a1fd796bd721d50f23544009992765b1ea99f31ee2e8b6b778c87eb7e7ec7dffe23aa0841dd39f0565c628341d92c867874d5fe291ffd46e79c8ee64818db9d560fc3f25c1b770f116c1ebda1fae301e43d9ac40d31bdb1a0140eb156c29f9bc72393ed847626a1eec01fa2cfb33df156a288c86c58cb4897539760967a120171035d17467198decb084ab984496953f173ac9557b20ca7de3bbecf371d3b22e3ddafa8e8aa0ab716a40e3ec1a5c4ec525b54e2a4b9226eb2e43f0c09ae82b8ae259dbc1f3391e793cc73af41dba9737af45787bc0543134ff418e9618d4bb1ea116598d9707bbc09dc98d157989842273caad3493541a6f531c36db82888ef3a83fa2ea6e9faae2b76f23cb322833a4e26b919d26da8f4b85e47c87c992a038d44d0315f86b5646f1b3529236951f33cd8ff7a9a9c4a5c0f687940cb89920986dc834b685a49fed4f007a7fdd4bfe36cbabe9ac15315b321611e744f5ef515e2b655b5c603b566fa9daf6eab26b44908408407b3153e03cc9a6b5125dc2587c35333012747e317f6be6ed21c4e2ab23a7158b1c1c6c5381ed4d27c687985e72674ef38a0bc9880bbd1a70c219efe4d2293e2dca5c1781d744a81b49b7ec35d520dcf9b3bebe3376295c082ac33e4aa74b790e2dee42290bcdf3c66050691c2088e35d20c24944d3f9f078ff3b325997ca845b294bb081553572f535d64c8c49d8288bb9e74ff20df2ade92cd170672103dcb98f38172e61900ebec36f63fab1854c474d99732abadbbad0f2faa32de9f8d9b526ef037b38dbe1811feb75d4a98fc7a7c3b543484ff68271ac4eedd7f0820b0f65561a1eaf9f185a63bc8ff00cba3a65dc37e897a401013c48eebc7750fdea219644d6f57aaa0bf6b63ed75f57ab5520d2abe0dd92f7d3f3ab76ff9fd331c1502443404c841ed412f44b1eebe455f5277c0906079a36f868e8d9df0dd900b911dddc40499ad0ea964e39959a39fb78b738cb3cc666cc7814526a65ae93ed93de4ecb5330ed50d245e4a04b7164ba6b74cb1c887e47704f0e159949fed694f7654a965f4651e2d76f604c9c31b084a4eabae95d2a6e3ee02a5f3f0d3e3a67fdb67da83693ca71abbabc955a2005287661cbcbab4b71cea20c2ea6ba94a958d03acb700f62cc2024ca6dd288b2413450676e0d4f84252f5b3b66464c7161dc29e793814cb20a3b6cffa0ccade940cfa9e64dd31e92fbff404715d473ab8fa99ad2f968f29e22d0ba1027f19e4aaa07df264c8298eda0a45a159ac88d89c5489c70c6f622871a5bb8321b9510874c80d2b566938a4758dc972630c6ed00e22efea84004b32fd5594acd9c6ecb0371a424c6b6f1f10cf0c061690700d8d45db656345df996fce4a740da6d716c4e899d57409e4188bff261df5c86aa76ff259da53ea59b5f2d21e125cf40756f3ebded5345189edbff5ae23a71fbaa824db4edc497e5f1685fd46e42f2f0fc8b86011669ade9f9f71586972e331794e0863d063456d9a5a845ab19fa611cc5984b452c8e70de0deea2b17accad82c279c85caf0d2ca56841bdecd6e394d731edffc313d56046c3ac5eccdfb8203c2826ff2f95afb3e5f6415fdb124e3b9c76be4c4fcc6360b551f8be77abce73b4a4daff0309b6c2ba6a794a2954701d9787dcb16c4bc2f09ee2c957a9e1be04f15e1cd7b70ee9726df43800371edaa529ce8cff11f0f8f9d07f32807076c0d678a1bbd6c639b8469bdae74989bc122942891a37bb871ca9f158eae7ef85903fe7cae58de7778ac2dce02679aa1399e2f7343344dee52c4d27f067cf9386313014a3d03e179873239a6566e8b801c5cdbe9eb67b5fc05372993c7f4f483e0eae2381e85eccc0bd40db6b2020bf950817ac70de71ee5d1517969fb9b9e35a096d0825b00d6951026f9a1924e4a35ad1c0be0125c950a12f42dcc72cac06a9b260c395bcb0f47bf8def438dc94594b4bc63c48094dea9f0937f1c5de641cb05d90cc6e6238ceee10b3b51c7aa977949f9eb1ae6cf58e28c4dd77f8c38ce6479e12d96937219d094898d403298e206f7c90e98892e6e2917aeb4af4031042d472c1c5a687f1bf208badcf60e4ec0baef71a4fc8c135088f8ca324e9c57b8cbffb9a598f6c4df706f896db4bdb0f81a0d4fdb4e017a8be7181767ff56c0acdd2ab2a9f6eff67d09e262906683936afa6a57c69c3b1e758ddcb69c594342d6a84776b08a3f6f05b947b445a254df0ed27aab64472f7b9f61a99f4736acbb076e9cb6c5f9c175e98ee18fb75f15c298750db7fbecf806693d2c2e1c383d13affdbc3d29f00dff9b52ce0c029c11c743852820484aeb6ff1d599aabafdf085b3563bf8c75aeb79918a12139da3c140a38505d371b50cec29095d88ca72d612dd50650d94e22f10dc2ced7cca6e6a87866418066b991c070f5552465083fc719fd0d1c06a7d16d929566229b2b69268bb0ad317393d8fd8e13c1108a7b8a3feb7cb82105b7758628fb60823b6f1f77d4a8988b6c558e0f8da45c542dd7d93c1b8bdb2c5ca712b0cde8ffb7cae31f92cc76bcbfdae833328ec2754fded305e472b9b7c122c010366b299cbf68d06090de6d26a77ae12a2b339b5b989e9afeb086e0cb61382ba09441689c2093396dd16b709385e9907fb8a93865d8c3bee00ae54d3b3fa4d0ce722e3d50bf56210eab8a2b90795ef06b77b6d7776f7b80d390fd21a6233b448f981882e7ab95de9d6ae9b4f21156a88a3ec5dde1a4612736343c734351cdbd2ea85977636d6a94971249acaf0b7358fc138a73d3ba9806217974bcbb0de640c41a7370e9282859f07f2ad7d3d516d2eb95949f38b27fc856acb2d29ec04096764db18729fd418cf35ffa57ae0414cf777666aa7c99ace9e606befe3a4bfc6f8b95fe9cc2296a7262d2ee2c8b82680581f074a7eb9951f4834ae0ed338319f05cf304d427604c47cfbce82e7935517a02bc511975bb441e6ad67db3b46f0560dc293de8bd0a05583676ab3cef8eee17c363da5e7bbde8d392d4577ff974356629142fbcf2b4de64714515ab9f7bcefdb6ea5b19c373d0f01bfbf3a7906189186f4cb54a91f3209f4a6b77f33f012dc9900836fd7f72389c630c694afe2136914b1432320f2ddb24e7ab23de8ed22407cc1456f22500a06207fc71a2a8a3f98773c267e1e5102ce11e0b68dbebf9e1854b89c83b808c35830cd1792a825e4b7131b93a251df38704601a57224dfe37d397c91a24275011ac64ad81ca43ce2262297709b8f6f3078b71228f38c93bcb52de6a227ba926e0d103f411e0baf9e54958b59398727345451868d408d14a19776862a3244785eb0afec6b10420efab90d9c97140b2259c3f09ace4893e6f2730c59dc5550acca8b186724ac08a3fb8ce6f4714fee83c84a82e27f11bb1c182b4133fd533dc286d35aee3d0322e88692a018daf764e689bacb1c66986d9d242d84c2ccbba56692fee267edf78bf0d77ce628c68f077261c1343d6625f1d36562cefd43de09d7e3ca93426bec5e96a08827f1911f0f6d473c4b97ff818a5a8e427b05dce280644afa18944ed117254d748c485fea4332d1e298cd6ea9f8ebe805dde1c56ceb7128ab0035c1650af51a9ba1cb1b4d751d3a421e0f9674312b0d0ff02105ebf3112b1be21d212d06d92e00cf7a4b3fc88e4495e06bb326b81df99d233c12257648d5412de8836d9bcbd079d993b6765ce103619f86c39ceaad48d019e52d4288a6c39b99b66eae77e1d56e8eaeaf11c94facbea158d1de5700467ab482312add3235353bd01a79d2ab277e95ba7dbbda83b3642ad85b9de459db432fd1a4729b93e34eeda45d3bfb7dabd4f69b847e48c6670ff362c603b7f3d19ec21a21a3460bec37afa876cf8dd23ca6379f1aba5ede43defde683753a9f557618b24af9f9b3ef43e18d8e61f34ba84df0ec3de0e5f519284e0906837ad096354b7b528e029327315cc222eb10569ed229aef5868aaf62beb3aa7d0f7d28caa835d5ef5f518b8875b99a8d88862f2e70fc00a6fd736a983a100e58ce69edbe36ac85f6e9e4d8f7c7d8f67054d9d03302f5dab1a708ffceeeef1f45d9c6bb12f154135c714eb0afc22ef0330714feb5ea76fee0c642a79c6742d39c542416beec4e6fa89ef4e48d6766393fccbabde98678861b6947228c4b885970f74063677bb9b0573c09c1bd51b527f446f557f4ecf7cff4e8b9dbfdeedfbec56fb2ebea5be05b8fd2db1147fa69043afdb6ce36f0b8b4128448dddd734e0bfbc98cd42a31ba72f0e5612a9ef1db4d4d6de22efb61d19611f957bf4173f582794281d494116eb1a53d308176f841950f3eaffdaf2294b62b2abca16f7feb0db2ee00fc4a8889e9ddba78237bb0f96dfe6f1a10130a7fceb75cb119aaf0f2eb641d4cbe31d0dddc2aa4e16aadf898f62ee35e6c4f32195b314be1e12a26961280291be1a00aec89fbde1d39e871bfb3e2fd9536c2eafb900f916bca0fc42ece4d100598d6416a8ce1f9397b07ffe477c6773eb49f77b895a6616007f3236f3e3b512b46180babb8c772d09acb2959fb20cc80e4d0418c54f701615e8ad3c51f2afa5248932258ebd90be42de9df15fb6e8b69291925e68acf9489934aac14cdba8023d7421ad774a4cc0e453ccd35ce45cb5fc8e16deeddc17cc4550145ed120c8a59604f4945b2a510f0949fbf0604951beb7d4033b46dac7430c4f35427abd45d9b5b89830fe3ed2ef5ae94fc3684dd41f8f1abf8620093e79453b73443e4f81406b5422d5e215f97d6967e220a4347b0576a028e554cfc3d693c1ea744ec9abc9860ba9be96422d2bc5755b8f9fa4955d56f7b5a38374ffe4310d73662a3be74a9e4f819c211d191512e994881dbc1cc412bb490d3d9744bb11fbb3b3ea4f55d87f1a1825af45483c1e1e8e411647c39d43da3ce6cc19b889380a1e64002823d3e3038749efcec1ee3b6acb88a078ee236a812c449605c348bf39b18dd36f2863f971d4601fe502697adca383e05d39c077c958f439ad464fd5aefbd5ad96536785c009cd5419f7d5333b6b1794aad53b183e3b1d568fc35d76d3c0f5a97048227335d38d4e2435636ad7f6f35377d7b736bad6bd5eb422a7a2b9622dceba6b32997e58967486859907d821a96b5684b8e1d60cf16e8b64eb2c44a766f2c49170f6b1af643d9e43a823e8f502804176cda8109affad7c7407088a9faad433fdb13404bb0c60b8991b6b3f5c79c4fb39f8bc44174d1bf75cb52632e88de2a5df19c679cc31ce35d31fec2dc5ab3da574240918ba5ad7b15cc4421a2c29805f43ffa17d1da7162cf66491ea4318b30b20aa389b37336332e640fd4290404f0b08a74667d74d23fa2df9cae867419f986f0977c034c5395a09012aed8edcf5dd2d2f3806ed7b651c9bf421f5d24263d390b5ea505c9d7d70b7eacf9592a6970201d5beae9a38edcb6dd4014814840109f53f57acaa09a5cc5d1abf35d922d491830d9b2a14eb465def5d2405d32c91100e8dc9c6a9154accdc02f935fc2dc9763a6e83fb948e7c015ba36bc1613f2e6ce9f6dacc6ff8068e77cea65ff1356b04e4a2e64c688656df58dbf0d1a18fa58cd70b89bf93a85cd2516f0b2e95ea40bd756a8fb83aa5fdf711026f0e1e200ed81cc3545e3f19252361df43504fda0196d13e4b7c8ee3d0fe4bedeb1c7adaa60c2114080c1e0b1013f3c60a264e8dcf390c40b7722b716ce6af7dbade6f1445c3bbedc29ecf592d901f502df3852b3399999ec8ca3bb412dfdbe183ef4ce8a70d123cf71bea73be5b75454871f465fc554a2fa1e37d9c1d4cacbf855abe9db51bf680cddf765f441455eaae1ae9b5e8ffc3d9d34dbf06f7c6ef97e0ee9ff63d1a18fca4edf4683fe09f2a85f4b7a2b3fd3c5dc5f2248ee5a35c29657bfed7aca0f218a0b4d5ed16a65b4502a791134fcd76732b355086060d6f1be2018a1cbf89d4e9f2eb0c87e9cdee07217de58235c9fbd77e4e9b8ac1cf31ae4827a37a20bfae729035d0a4f80c09cf3f4d5c7b6294128e6655ad9b01251b37df576a9482043ac71862831b4fdad7f52d5c854d3c48e592d971b611a21eadd98ffa5fdc7498d47d73a0f79cf50f6dd43adc66af90b4f2b4b6f434ab587dacf8d16c7841ee4a71593608940332b813a509577e098217cb70081ff6dfedda5953fe9fb3d439aa2d67fed1b56f7f8d3e1c4f6be95fc1b811cc6d58b626f340333d28da221c450e92dda42199429016840fa7430a49e1d68417a77bfb04245d127b59bda4117308813b48f3fc768b300f6a181a3d3ac97d769af4adeea099e26050d45c0834ece770275efe0f51dc1eee9cfb06912960a6a8f2bf69b7b5e66746eec6c3ffa3f7a02e202f11753b837f6ef0acd3269aa910b938260fd662b8d8e70e8a9e42da6e01658be3cdf55e3fae7dd6e4abf2434dad337e6f30355ea01856ba03ea2019460fc43256dbbe66b7279f5c7a391a888cceba45e220908252ad041ef353d5b6ab0d4ed6d19d850ce3bc3efe6b62655e0c62dcaed9504880f40a0250483a7d1b14bc8e6f3cba99c6aba30fa409f2335f209ed8f811b148e0d80a68cabf7a505295defc5a661ab1ae80c75041d3b78af8b4d485bca64abfd2a6bbf41e2dc74fab5e70986a5394e8ba0272cb807f7aa2dbe1dd5438ea41b62e7f8aa888383ad5e3cfc1ef5279eba93a2027141260786aefec16985431faa269fecc72401e7112f47bdc41e2c141cd647547253df13d65c47aebbbf7d244791cec880ec513f6c07d0fe73e1a2ce975b13af121ced95e13f50fd876b94b80ef89853de5e572ea3d697906de6bb9f4fe63b994a89e62a0ead8fa3480a5c1de08b9a7196ab56264bdf7d5c93fcaa35a67fa1f259464174a6280888bc0d657b0e6e73879884e956a58a4189fc7ef49e4d4fe5b5419fa355c9cda8b45e64b9287e6db0c23f32fbf67ad634f2be5d68c3c942096948548f47f1ec2e8fbf53e6edde84a8bb2037a0fb8fa13e7c23ac6604efd556ca211412c9974c64dc03d9322f2a8d49b8af22d73233e2c096364f5bc658ab534bb5b9a2ce849617cebfae659223b9ee22367e4d44b61ec6598c5f21fca552254bc02994f20825ebb0bf9627b5c32430956bd53b2fac0bfc99de44c1d4ad1866937b967feeeff1ba29263463200586f74abe6faba010d7cefef67b690f2ac070807fd6889d32eefb5f61bd09b1656b2658f29a68a80cbfedc12a53925e2b2b5e810bd66f5499ac4934340d925701663cd5a0614d996c0d82cb816bbe7bdcd2382e5cff42f7e120fd52dbf2fa2441c175ce8b528516284357dbb57e6b031b1b43fc22f8a2e652120e2d4f75d8bf4b7fe6bc9cec3a31aeec608dfac42159c764cd3970fd75157bc4cb5c35aa7befec58f9cf33b6f884cb19a06545a50d09e08b6cbb23e06307bc6b62851caaa4668008af3f89f185acb5f4ec7778278b01df49c60a949db7de049cd6a0609d2acdae7871ae1f52cd5f0d21de2dd4437bd0680269869d36cf9ac2ed031b769c4148078c6c349eaa3bf34847c3e8cede0d8a33481f8b92cec0edbbeaffe9af528b7a459ccd8aeb6233e6296c038255bb2b60ffd7ecc8d25e1129b0c7b21c3ab77360a04a080a39fa8210c3e9503a3536aafbd11017eb1a95c6c2169eb01fadd097ef32ad6b978227fe9a650f0e85577ff488bcc70d4fb44b25551b1ecbc847efb1db05d1d9961cb28fa61a6b04847da719172268888df79f4dd777988bd62881e5049e20e5076d7d326ff42b35db2430ddfdbc3d4ed594f842b4c1ebc5819c7442a2b13bbc5093ae0076d5341e4da18a1b80c5ff2f127c90f922ab418eeda1caba82460112364a58287ae5c25ec8c529f0d5bcfe4f7b2c859b802a251798f0832829aff2b697d15a28a9159b93d5b5e12f33c582230607cbdeb11c068c71ef2ca37a83b9fd5bbe2d5d304d2587b73e5aa30e8ac6dc6cc0d842ab1be33849bae7aa3627ab14502a3482758f6c05fc3789b995b27fb41d67d5a644cd23c9b80396f0c51a48cad23be565059ed07496d35d9516b59a07d44494ae1efd711f78d9320be52881f60abcf82419d402a01c16657b0bec813aa864898b740bb47922f8df41fbb296baa6835a9732c3d8f6d40540c4dce9fdf73e94bfd39b24eddb250e55eba9ff8e015f3c651934cdce41476c8342ad4d5a7395a25d6b42c4a1f650df5134cb6c67d1424f4ba29b6a8a96ff857f8f9aaa8d8941314c0f50c96e18cb7670ab1faa97cea2bc3118dc5c506f38dc775b9af864b3640ce1c5e8689646cb65d91b95b4a3e8abb4bff00fbb171ce16b5289f01f09749d87d6ccf6a62de6e2814a22dec9318489e4e6ed83913208559b78db5fe1305b2941fe53a4378372a8e66903dc129418ebd449e1557ef944ebbe6417cada76e6ba734e8da45504864745e0c65df7d524b0382c7ba68e230813ad0893dc2c31a8ac8b790a30814258cf55646e582ff45014866b0b308d994de8a946186a47f0c1327295244322c3cf88a19df3095f6db410a4683b7da9fd65ad74f98b77d2357e168e78e1ee58300258ae8bfbb6c7b7f3692ac13046235d31aed8edcd00b58ce503fbca779d0c7652760d7855b62e6c298b988604864f662d5bc363f7100a8ded3d25bc191d4af5cc249d83c6c1c1ee2c02e6a589015b3898cf9ad135b2b566a4ca696bc3bc5e7e14dd35cb0a9ec1d4c0c971b38b118612c9d53869d657f44d588c42faef1435b14824e1dc554e3f9829d77fa10c080d9f606e8381aee74d19403d6c0a9169d4dc2f3562ff55b90bf98d5709cdef10214997cb17c522370ab95e23503f8f1cffd90c82bca09c7722050cbb6b4a3461f56c52408e7ef6718e6baaf1b77bc84a1b2fc48f8e0264af40acb762e00ce4e4e77bbf6cb2d79a41e4db5c70eb70c9352602bf9502e818a8649a80bf1e3f77a37b065703190fc7165d137c9b97544b85a04d8b73c4e018a6f1e2dc9bf66b49063acd4a8b6ce2be0b4e8b49d57eeaf566b39c7c1a663651ceacbcee54dccde114909f3055a04d02a4efa8687aef654fa02e508e3e9c84d544b0634617a4305f02e92d83918a718f99dde22a7cf4311ffb346ec34feff277f76f24551b7a5c5ce807f4bf292e803a5e722dc0e19cfbd0dd95a456e69a90422e608e20a870cffe63520fcb4ca48c69ee6a6f3a0391f23694dbeb8a8f0d0e7174a02d1060a87bac348b291ddce50cc8356ebd9e1e118bd02c11f3a702d2cdfa8aa9434f4b9361906943ef7ee43ea3de5ced7c99611be8c45d0219e40074a88ece6d43b4523fe641a4ea4ccbf940c3462d15935f56757632ecea743632aae262a4eb46ea53863f7b7fed5a2fd5198542e86e38da56177892eb64343c92b272a72c003e642639b9d85100427f15e43d4f08c479fe29d1d732826eba102772c83713b5a38715028f2c8844d52de79cafe65cc0654e361fe1ad187d09c45be30acbf85bd961f83e796e6fe9552a5ccdd1f6c3c8fa7db2d8845bf1dc2be8b1cc3c454eb41a51c078318cd40dc264dd4166adcbe9cc9a5b9bd24c7f023f79ee5d274864dd516486fe0d6e2009bfd2618c58c6f709f91a0bf4b263aa7ab6574f66035eb56367f8d2d197ad5f5f7db8df704474a58a2a655b21bd72f643f0ea3dce8249dbf6b2155a1132dffc08aca462ca6ea8a820b096a143d2998ce0ebdb457d1f8af022bb37c9d88c37d3afb946a03bd7c1d4354de69fed3e03ea2471fc6f5ea42885c2cc71a6f6df19b3e269bc7c1cf12390ffaccbf2fcd6d965a236a55cd03830dd28d5eae4237ec1d7d8c5afe3f5b7ff4ba8b1d06ef6b1161b3e863b5b15e49a3697c7b39a0f6e9f80e92affec22f01f617c87c9beab68a1203f30e0b3888844e217356797ffe2929c1be5420f1f1b1bf532c455695c269b58c02ef38385bd19ffff45bf521f302ab4ed060b091eb2ed3d3213e0d2f2010ac01105f30aa122f6fbf74bbb5366388da3ccbb66a0b5efbcaf8db830006f2e57b367659c7735e945c831ccb1abff571d22cc38b34f418a1e0618171ea0aef3ffe6a0223fa552c36637a58a7f373039588784806936928450e8ffd7b0d1ec92d86bcfc3b8e68ea6936f7245902ad9e7891fc94dec6deecd1bbeca0884eca660fad4945038b584424c7472986cb542ab152617dc91e21d27499c8e653e7afee8ec9a7a7e453ce465f127f1aa390d4ff5ba9d40607152bd7bffb169aa230fd74e4edfda910db1700860cf248a7a153991a23d7ea6c014caa69429b003cfdb323e22b85655a7c6cabb605ba5cee1e7d244d7108b2bd492dfbc2a1ee310ed53bf9f5d9c2fa388bc6c87751d32ce3578c4383703eb110e81a54021c0cd1d41c263e28f9f952b2ae681d11a4496b9f83353e6bf1c8078007d38ae4ce5ee5dc36245887d7b4c4a27f0862db9e9bc92407a112f8c40093e6fde4762000996ed218a6b4797c381d025348a8fb98885e4ef6c82ce588f7420f0d4bc026a7fa395e3f40174f3a43aff250c47dda30df7642c3d90afdcbca03946e66073abb384702a5f264704ec12bd8c438ee8e6227b9f3c8f26f5146331c41de2f02d78b7d1990e8ad2bbf6900b4bac40cc612e2e162a7977c70ed8f0adc1b74c3769d4a337d13bfedf72d8aac3fce8480d8968244c7ddceb9ff1d1bb1fd13a48337ce2f52ccfe49e39a7572ace039be09423676a160599e1802045e47e1743e430ecbac67fb3f09a1a9d2fb9832dd50ce8a91ae9a11c48ddb02f412c1f33bd297a9f1422f488c04874da05dda9296c675b756353eaa23115ae8d0464d4796517dd2faeeb29d877cd016ecf33b6e3714252e9d21d4bdbfec3e40db47af1e8597299b3e9a8eeac3ddbd605a1d797b326d4ccc95a909695c3fce694f91ef3c97cae235f3d08541463fe4470d38ee513411bf1d3ecfd60b80dcc85451e51333eaa7ee74e17dd7b175342ff61e63e362894b4e8f5588507b91941c7d7c016c243ea8ff574679ffc35e2539f818df850f9878733aa139e7b4b39136fc9388412611631cc99e25a62cdbb74d168684b0c9cd3b4bfd84e0fb22a4f56a7f4cbb15d3c21512a0cfbb2ed06b9039fef9f2c9b919dd6b48dfc1f6c4886f425c4ac27edc0995003f60705aad183f79d054770d2b110fe42965cf06aa2ed33dea80d02c7b062e9b6b8127a18b8a5b2d8a291095ae7cf0d8b7f2f4e5b0f39199f413da318895eb6e8ffbb85ab2e0ddcfa01aa46d27933d996784af9085cfe4435427f4ca062d6b45af70d9d2fa7a780809193b5bb149715149a3cbf258ad0c20e3a965dcb2bf33bf4ff89fcb91aa58b846b795dd09ff62114a27a422ab38a5a19ca534d8ef9860f0291a6402692f083bddd6a34d6646ad707ac5a3d0a58c4a3032a535a659e0fdf4e9823b160ba7bf620465f91357584a0d95eb8101dbf9235df67977b600be1df0e79932089922499638148f1b4c80585d128688dd8ad3f6945769608b0ab2367b669722bb4fa66d9ffa09f5b0abfb3db8363a4b01d0bf474a8a83080b5bbf5930d7cf73f5bfd0d0b626ba38615d24e6cbcfa6c58fc8a5e12debe25c2cd334c161fccab60e8bbf491cf85d480c29d9a75c3773d647553d7869ebf77e3a608bf39a5a5fbc8eae7af2e25f0ea0efd3fa42542e83666ff7c88d6f96dcb403630708aa18ff5ae9d41a23f2327c5ae27e1669bcf3c9bc5b28297e89677ce5b5893e19587435f513db9c467940f3fdb72a8f29828104b9631ebfda4f8bc94a2abb7a3b0c5485c59d05dbf2c7fa3ac5522748e8b4905de10260bfb3651b7d3f1eef71296d82c7dd0828d8873e4208f194dc97b0fb1f52f2599d22d5b7675497896feb95375ca1be92f93e5dcd2285db06c9fb272c0a89e37ddf49acc2e94804420f0600af8047ffa63982fbcfa7be715de28a9ff2aac344681330ac4cea2ab8c2a87c731e39b88d6acb61124bb7b4aa664ce943bd8ed1b49a1336c5bf44a7f3f3f7ad4b2d8f59d753998efd597cb325de3493d66b31c564ea520405e631db15cb2008076bfa3c10338f6e95bde748ee9c6afec05857eaa1edadc1f6c1a0c7ba8c6cc4324019753f4f14c9d2f008c2991e542398808c6d998ac635c317adcd633d25a8599b6a71655fccbfac9b73d1192bf696649d1b2b4a4f84053ce773878d2cfad7d6abfe3f71731dac86cde8fc6e0e7a4ec16835023142d239357144f66eefabcc462b6799c6b03c7ad31735cb38cc2bc326997ba424e88094446e6179a3c13c11e0616cdf1eae8d264f3cd9e14446fdeb5424047d24d85a23141f88292e890f39e255e533a9761d1ef61e731a14b05d9e6b39f2c420be45dbf759203db73e35cd87cb46cae1b6633a06d8ea8de519be7a4666e9ef40e307835b1f145e5b2eed200a908a70df45cbfca80e9df47f39387ca5e39031d9e0050878cee96dc1deb82744e7a59d560c33a2425677d0b5cb25d896e926d2349ba2c6cd058237e15816e09f822abb9fd1410030b0aca3e57e40b35745f4270513bedfc0f538297cc13142b67e70638b6caf062d3a9857b13414b718ff1b575365be9536209e529cdb81cef46e47a043b0cee2c7f757a4e936641b6fdeaa27586d9cac002eff1791784a340e1f518442bfef386ea02b9fe00a5d131b19023d1dc68357d6e8a76ecb806e951847bb2f42caf9e1394399a790f6cc8704540501e9b8892d58fdc1da33a3ba161412c92954a442a0348e34765e7b13ed984d81b8c416814444b95c98f9a0ed7475dc852b6b41aeaf0c499985c1101ee94df8447735ecdd3dc790b6a78cad25810915b219c01b77b0aa2e79711b9e546b4b2c6a1404e14079f1c75d106849f33f959be4d2ae76cb4bd5581b7cc4f780b2c19d0a47cacbec0db213692f4d7d882e8c53021ea10fee1f01260f1da51768290f875660d013013dce14c4bed8c7de42d3a820ab3f94a9eaf513b8c601a190798e4ce4e7d1acabca2336a0a203c740f99e441b6cc2e826c75166e385208659ff83c610c322433ee250b6561b2f2d97b2ea8bbd2d753322568a240e5239a5d67a9f8343b03c25692ff0b332b9512365272c669a0131df161eb75524726809ca4d084849b7aa5aa44241e4719ca2a7cb92a4a6cc3af7accb6793790370f58857c3a2c439fecd0e8074e4d07702fc432d920022dc7d4fffc0a6d2999fe65518a75e395eec72bf1386ca5a64efb6540f5ddb994152a584724d5bf972a6a9100f21b4c37542f4aab11c0ac1122324cad5bef0b5c56a18c444640272f020a96c412206d38cd26d67c13c9f161ed8d5add4b1cfb4c75db41e9ff1cd30ad8294183f9e96958de7c011d42cebe6d97fd092450afdda122085a72f3e693828ede996eb652bd97f5184befc2f608880a6283eb70cf8f935800c364de8a0b22a52fb9739d94cb81fa1344fd6d4019dfd7503ef86d4a6a04fffb5eb629f52068b7a925c018ded5fd5fc938ef18e3ac8210b3fc5fec5c873cfdcc8344d8272c3e357975ab2a37eb620c1a3eb3d248fd2de7e512cd31a5fc9040996d95a036aefa5894f361c2a6a9ae033550b796ef57fd9dc2d09de11c1761e902f8bbab27701922c7fd4907dac4da7e91510787cd0fb742b1847f898c91f83f8cfcd91765cf808fd94e49cc715181cefa510790f8fc01801de93b720a45af14fcc239216053a1610c92a944ac18bd2893f29eb3beeaf51f4beb8bd9a9c46470bc70ceb05f6846c1348b1ef1368749e2d3fc933a6c3f76f6e102572261519fd689b7d69449453d4823454c1502cc73cd2a62123096d34184c68f64fdab0bbfdd6330567392614f855a8a7148568972a1740eb364b14c53596b8cac3d4d6c471f147beb0554caf523bce23efa34326eb6035c558a2600b772b44fa19a7671dcae9967808f7bcc578aa44652ed8d0765ba6d924d93a8c221059872968a2cabe840e41b8b1301b539e763adeb17af0fe7a430e689ba1b23023fd29f7bdaf11e9f6e5e424772e6b9f97d76140ba4ae8c1f4b15577553b9a4be4656edb297f44d342309ca6c3d17633ad4b96c3392b1878935a3bfee2e182f62a76933c6d0dfd79478a1a0b868dda6b70fb6f1dcba963f21a08b23b17029da8b619de5ae2943f5fdf2c1205c879ab392556a1c014edbdf9d15608b3d1b83a29b9ffdb37335357f3bd8a9b8e395fa47e6edb6e8baf525e50ea4175c2f0a9a7426b43f836f1caa00a37de81c291369f017ba3bad9a136db8ac577ef043a49dece15d5b5e6ea6b80dd8da52ccc504319ebe0c095547dbe4c84f3c0325ba8bfc35854ca7ab51e3712e2c34b6db8ec9048d57f72ade16766ffc821c2d20b0107e1ed2da8f4f72daaa6bb42b7c160124f5aeb4cf9fd3d59f396bbfc66108938e4f79b4e880f9213795b0437c96357cbddfd14da45eabb3974c767027512acb2004efa8f2610b3b8517282f1aba8f7912dab75c011c42d0001a04618f908051bd9525a61b9c4a05d19c6f9e5e35b3d31f9ce7a5d236c17843c8c8bdb5f4f82a2fd1ba197bbb67014f0cd1a0150c10d7b65e946f868e09a53162623bde8762f84e7174dbab8365a24911f7780b39dd09113ad8e66919002a96631b8bbd0c547518f30ed064a6cc10fc204b5725aaeb84234c8b1b186816230b54ff5005b6554f29512a234d389bdb5cd410e9da65585f50b3cc47ab3f53cc40a284bb3f7a8bedb6be69aa4e803fb8ac092534ac74d36a90e2e2820f5509abeda11c6f705e7e026f38facc7fa173b1677369b74671a39a941bd79e45d290f8e10c79b6982bfb6086c5ae902efdca91a57c8f5f8e2084acba2dced7f50122c7a1c3045941891f7b8dc6394676b47796b4aa2c190e3404b019584e1cb6e93948aea922ba8c3f289759671bf94f843af37d7acc533bd3e8fa05831721e12aa82bd6a3285b329f3b0a0109ae11bbdd4c5d828f881426e1ca8319678d25e1b6afdaad3d348cedec08564ecb750ce42323db653208349f4fb46c6af7f5df61c37fd5c78a4222d038a4138e73ecc30e3f3246db708925b567f6ca80d6d2c80def47910d6e4acfb5868a918e75c769293ecdc8f4bb483e875c0e4beb28cc117f1c73c69b5204fb5c1d295b030e16a06392dd5a1adcf404282ccc91cc2f92ad2e672f9f3de4088e28ee1e373134d52fa3b07e0608ab59addb8a914a8e0042f252aa148cc31964e547a2def939a5fa93cbfd790749bc1570e6d33be62c6298f439970edf8088a6db8368bba2e025b6a6351f8e2dc29127eccb7c0a83ca9e769bb5421d4f0eb6f307676fca23fa95ef63670897bc39fd1823c16bc2d52ef4724d19c4f18cca22791e7413d3299b1c384f1b9d41dfcea8073e9077434509a3abf8fdfad0e86774ebce4baddc0f300efd744c24af94e3cda56ffc54f107b777deef4e8f7bc9bb184e9b8e74d01e3eacc0b532a11d862ff66c365f97ef89a4629efe4f016ab99027d13a300ce845760e7254c86994e7423384d159105976fb92895e9e67726c251a5d33673233f757e7ba549aa695a5936bd1eb58ec270b9","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"e5a5da208da10d9c49a81c8ee6e58f8d"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
