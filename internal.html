<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"296d15fb33324842651b782b42359fc8775bedd31c4473c17178cbb2cc52056bffbaaa4e8146ae93dae29636f6ceb450eb59e337c2e258e1377b391d921b5a121acc66fb50306d3fa353b5f3d0b83b801261c991cdcfc3a5814fc5357f416817528105f1bb978d65723b8afa74c176bc8d5e9e6312e4496018e133efd0539ff0dc97b564c311b5a848266fe368951c0f0c5f563ad75ec0b8ced3f2f73d7bf907f273038a0a89d1b603f23a3eb46facb112d575472ed3fa70f378c47c3a374fb8597fbabb48c88eb6ded4a345e2c104eb5334a7312b7200ed36f8e91f4b3ecb69b3eb9e1443795bc2d85f63608b18ffafe1fa5e03d286312323e55bd9cdae045b7668f8e4690aed5aebefbe5f4dad372253415e0b0f0248e53f02df419fcbf5684421b1fb7e21851b855dc13986cf4475d26e0ebe0dd41404c9dc3a2d618e2edf2754872aea538e326910d56fbc6c42c4964cb43ac5b4fa0f008675791480dbe51e69a6386d9295b5b6fb748c3dc80a191f0f84a5c130a186e86ba6f2597b082f6791b6227b5471fc7294f90c3887765004ed7764b0995970809281cbccd55af650b41b6d2d4a81b5979dbbeb10292aee48a662250833d7db8c899f486f44f4e56f4bd531f13b442575f794fc229a26fc0928c95061e86133f9038389af5943bda6617687b24f4ecb38a5c340d66aa73182e03f1ddd440ac28c2d72070519333865497805c13e0dc2e75e95c1e82c1d56c4e3c7dab1dd933faf3f06ab1a0ae4223a0042445e82b785608ed50db6a9b00e396c5bf3f4bd2957534ebf599f3f53df539b8ebb5b127259917a4e431cd7485219844342c3399fd66c2097f6a79fa3c26983db00c5dc5cf695bbfcec6acf27422cb62dd0b7ebe633d435748e8ec23a8d702d95692580ca877efd08e4a52d7a54d7841985415970d054303cd5ae433e6d3eb17341a82960f99fbba1c823e7770714ec2709613346b2746414afe881ec93c28b7eb68ccf0d47e07463069ecdb566c9c996e347b318a8be74bb80dd5775ba13e334413c4b430919509b2dfcf5df43cd846f1715189cd81e82f50a403fa4dbd8fde47b1f826bb7d37da7807a88921b9331d3e4d1271bdc8c4c958a913133af16d1d7cc9d6da5b104f2aef4991389d604a08c1fc27d7317c1f6f5d81660ee9f3575e84b5ad54b2ed2379ea4a35740376564a9388c83d1632d60afc1d44ce22707739d461fec55d5a04ed3c6a9b0997b8e41b85517cb3962060145b860550f82b9a61d89c6700738c36af3adeebcd813f51189cee25d7911c77759e4150402fa5dfcbb2104c13367e3f616ad540a65895c9b2819152fb62735787c1682b4f3e358159b1e0e8268a3cf7cc7859920a5afb61bb4dbb4939daf01818f5452ac1a3e2260a1c7d8bf077835719824bb02a1e8fa29bdc3a1e8fb6e4ca6c52db4ea6c333b0593f0f490ea07af19280a41bfbfa6c5d82c8406e8b893459d9ac33485b86ce8b2b98c0d369e433992d4871782a2b70f0e615c48345aa173aed1a9191e9499104e1461e5e17aa504951101333c672aef67624c6e304c7e5f2eca1d6055cc366288b99c5cd60374499dafac5e623391718c3c3572a4da6f33d4f97a3e0a8ad341ad6bbce55bc33dc877c736cf289dd61ebdad2580e050542650ee4fdd8b49b028fcf56f8ca6e14ac3a9d7c8f74c9dc51d46d375746a1dbfd337a3ec4ff4a57841be9d213ca458b93185e5f0b8eff4d0ed1b1db25db191555fd2f5e21ed59eb2356d32a35b30231b5be52a190c257682bbd64c1162e0fde02ca85ef19df1cb6ef907dfa1104b1016ab0fa3fd334e8af1d481eb1c9e8b6257b261a67d34647742213735c59a49b0464d9b98b9d0c0f5cc51767563e4ae735b249920f6fa8ec48c86bba8c25cd866ebda7dfa04c5b82344a1093843676b4e5f42e65fc76ef2726002403ed73187dcebdfcffa4565bb7a30ff601139451c5a04154c5afd46df51d36cd9a0c0712d7a713daea988505f35b636b2d196574cf64a73aecb3c6b3794155898c606f2588e7a84a8943f95ff725e581d3f20448c8eddd060387bea93d66da3116c52d1fc11a9707f7f8212eac71f00719e9f40350ff4505b338dda7dea201b7a87f4cfd243c1760fa20aeb6ac73bb2d1f5bfe6d798e6acf38ff7d3964c08688df62b93fab63db788c6f9e1a32f9a81116d152cc10ecb9bbf63f1dd3f2bad5b30c6f7db730b68c56634d484c28a883804bf4557e15e7f67497ca1ab827e5c776966bcf513bd2a571c8496898a7ad701d32b5013572cee65a04e57ec2fa3ee2b858091008d3fee1ed47b40a8e0350c07f73d2df9a77e236a45794049711cf845417203c7a573d27f704fc04dc53b3f01d6b62107394fbd1806295689dd5a347ab1d2ccc5645dbff2aabaa8dafcedea8b504b80ddce326d029fd5f0f049d133a53e1a392e6713d2fa2bfe74c85f0e30774598a7a39bfe8b29ad6cc873f427cc00c2eb5d611ac4c626080de0f23c1ab51de3cf09052a1c134e141043cd0a9d6defe6a50ff3197de3eb9e21fc3c4ba413224fae584a2f0f3a4cd1e8121d6026bb7f94042e54e529cd707f3da9e00e672c187a27f4157b3da7508fdd3303eb0530221f7467745b4077bd4bb9e77fe91c0b20401314cadfa9fc0ea5e180fbe575d5a7e95c9c705b4e1af70898de409cbd0473a8e2699fd87a25117783bb450edcfa4052c3f5792ae603c30626beb3ab8f483213c782441af9301d1c64882d10d21b28392279b059c288022d3c5eaa42e857b2afbc19593ea5ec1fc10b4b015208b589894f04edcbf49bbc698ab557437854d7851b92cb27b52d0166163579d2bfb29eb551c206fcbb720dd75d774ec7def54a426cf0758ee33f547dce7c116b33572c36d50fe5fd261974e024bc6155d4357ba60098f3e340b17763cfa39f2e52351f67058ef410a7cf43f3c4a0a157c7e07756428432f45ab9297cec66e4043f2e0b74af4db6dbd24ade1a001ef7f903626ee23c7b25ef633b3915bafe0a1cc59dbb6d5f8e645b182778ce7645963aea58ae29a705b973ce9c130130cb45487b9fdd44b2a50df884de08e84a34de6a6a025de96ee63ec0f94a6a0d753330d1fda94b5da79bc2bf59e04aede3e65c9d9256346754b5ff152df4d389565f77a7f545fe24439d5824328d8f0a8a33fd96862654aee066d2cc3d3759841a845ab79ff37ee3f752a8502616756b5ecd26f60397226de7564395fc827e855c162e5203d376a158632eefd9c6705125032f019ca10bbbb69b24b501c1fe34795954b48a3531adf78257ab7b33dd2fd3fd3d2bc38de231e244927b4af809bb3800d70953d980144875cf66aa2886470b40b7d2246e979ab92278bc0d11b68539b65db483a0730f2742be868adc7817dbf9882c8f9daa93950425144081779c184d9532bc1f2bb96bf64bd75df4a34b3a3d8c9e1c43800f8711d8dae5a39d21603b9c02dbae4dcb3aca2fa9f2d0c32ef85342f286d9a913bfb683d35d7a47fa54547f7d681ac44047390c98d940a53161cb53c16a91d40710cdfc187c32de665db4ee0f94ec0a677ccf955f847b0012de9bb5dd78375fba0af3059673318287c3f272cbbe444d04d66ca2e79cc74759fc0f89f79b1aed5151578741918cefa30a7cb4218043c196d9914f76b76b9106c37a6cd7d6ba3c906a0344347ac41a1cd2198c0a5fc52e32250a72cc0e59c88ac74bfef20b73510f6df16fe4466fce875538b03781da7531e7c48708db6a68bbef8402de8eaadd2601c15baf3351c6e030485570fa8530077d0e442ec79b4eb42a901d7db392664089e7e1b940bc41a091635d27e224c748ae8fec84b05c5bc31e232ce8cdcde7cf0c4aa8883a56272451a17c3384e16cea10237bf31f46ef7f244e12ac53c3d69f9e93b645c7111148fce0f61f750651e4a35c3c92cb08d0c039c2dfbf902e7995f8bbc63ee29b559929b218686e2ae1643a711e39438799c181991eec2c7a38151fc9c572a58ff6e1ecf422dc199b00b7a4011ab46ae9039b6de6cbf69e21b8f6ce5a2e4c88cee045be6cb97e67b734a166b9ee04a1b4916e29f3c81ce36d6db82c771bcd125b551d85a31cd64ae9ba3c84a7c86b2e82df5817ffbf0d6ced274a55bfd9072e254cf2f4fea53ec1922fea121443ee59ce6cc0669cba0dbb2fd8401e0e1a6f2d35e375e0d6af8a863ca52e2964be6d81ce241acc4cfceb70298fd3ea027b9ee2abcd46b3b46d50d8ae925d4660e2ebd0b9a784ca4246fb924966f726d5cf94600c9a67932863c20a75524d2f6d98b667f9d797f071334b66067dfec98f93735d21ca8f6042ea4cb744c7a8b1a54e6ad4377d5f4e3100fa3b259d0fb9cc7d55860acf2988d75f1510f4714089c8ff5f4d87e7648e3913a569e342815a9a435b0583219fb5b588249d073126c93328c7d02337b38c2a27b22bb6873c356ee507e03b2d5afa12a9ba7c7430dd69b85f120bb4b65c8a8e3f7ec0ddf95762da9837074d8724a77ddf9114eae19e8f0e56f2c25fd768e1bbbfd9701ee7d9bae00280a201b42082c26979afe643b17881b7e4b3bcec9ba13743661f631b1797dea1f46b465afe205c6137425cda563ddab66ad1a02687612588ed5ee9f1c67b807a0fb3afe4587380f959c2b7004fc4d644b037a6bba3eb9e1bf35aa85650766f458b05278c9356568f30128f0300f42cca56d5aeb32b1adb6f68f9fdf61bfd6bd2c64f83b6443fe0f0a11df7a3ee750cb2284bd8b2eff16e1f7c8aa7f353e204239a08ea3aaa928d1d962fab8b11e6c84dc08d769857e9da42b16b22c3ddd90b7c96907dd5601815a338d97ef7ce40fd8e144c5aaf130cb93692832457a86b28e9ee4e7dd0471a9a20bc136c767f14d37b4d79c7dafc5e81569d4bad7f2a73d03e4993fc177645296da05618ee477509ae33008d97e3e7fd8239017711439af9eb47467e6d4ca7062974ecee16da4f27e11945c9e3f44fc7260864b0312b1b978c6640664b4ecf6952b1a7c2ede2516247bfc809a51fb0aa41357f65fd0019f9d30a01cd943bf3df9533fd6b8d18d38215bb2da6cd58a7e8eaff68a3f905fab207bcc25adf7e819b1348df8cb68fbb224b56307b3d12a0a232669e010a2b1b31b00bbc6a9b8448d9bcf6a8220850fbe13ea0d45c891a61bb5da3865f47ef47128d066cdf20631b3cf8e45282a9fc3b589c736f4f9e858e2db345eebbd786c915bf0c220c87ce20d144df85c212b58d98197f357e715cb8c8f2d816c5315269d5a0666392f3e86573f15cb38035a79973e8bb83e19a93147efd195bbfba09a74a3cc2fb11aabb8e29ea0194e814bdb66aa588a0ab4e712e022c0bf1881186a187740b96e7d0435a71b9e1326ce0131a561a820bb7fef79d54e5d5e5da4d0b58831cd23626a3d2dddbbd85f4f8406d1fa7b43e073ed1e9afcdc6daace0b644c4d9bd8cd361e00917564dd23efa769d6ba485d056a079fae7c177e147502fb0899cc8255af06a0fc8c21e394fa6a8bce126c37efbd40b08ee57cf7258fafabed4cb673ccfe0709865243e99105fdaf91121bf7b9bd9393c8bda8c47582c9a271222f34e9fc8b04b0226cbe8a18a8864dce56c5264855219ce7d10ae59328ef9f5187e7f2bce2097f0d80a75333793904e04050ea1a498e901a14245e93bf3c54cdd1063be355269bfc09ea02ae227e01cd1728575a9c0d089d81064fc0e10427e3a39b1365b1ce12311973b24968e4447f7a6cb4276727913c611d73d66b7694bd0b4c01c40d616c1f92fd88dd4793238df91b5df8c5162524061bf2f3bef578128da7bfd57e0e319e58477bbc86a1856c52c80df8062e815fcca1950899a06b1c09886d300d6c2ff718e131a202376220eb0d97a22a41e5df90f6f1fac6a18f9a4cfa401cf14c786899f1077ce5f4ffaed727e437ae427a489b8ddc91621b70e65744e86f1a4685358561c925e4c4a35c54e41dfb0fb314218054125b032b722d75890545daa56962a8cb780b4288bc0c070fded5b97e6bef82ac0c64146a68ba24d13eab62aeb7b7e86f80f88dbc5dcdace743453a4811a86fbeffb1be5e6cd666f26b5d15bdfd634be2a6b26369581d94889cfcd3f21dd827bcd097e15f3b3d382a04c526cdf0fd18104cc7a46b279d4744238dc667d1baa4bcc8b1017796b2725a5d822c3bee1e110716e09d464ad26133fe522923cffa2456e09709ff417ab5942ede6783c9798d6639c74d71f719947cef093de7c9e17e7dc7d8305ddbf482670dc42e89918cea3f08613dc956bd4ab582e758bde32a0d226ed47cf88f7fd1f5fe278bbdbe9ba90135ed06066669748909c48e24e6cd1a88b585a037bed77731714ac2587ae96967afeecc38cb419a7cfee41acdd45631b8ab7570f5697353bec18d22a3d09d722633b21bbcb118b7afbac6b250ed00da84a86039e7a04ced93cf7fa9f6934999aacb5b941d20e1ab2a816c3e1d028560b7dbb295016c2d44466cd56f71d2e9ffb4e0c2dc950d56ee89be11e307670a76960d6f559a969166193d5940a2840bc9adcad5981eeaca62250f60f537dbc0eda95aa1e1af602924237e1c4a7a7fbf2a60c5d85433b4f2368880731602d2f6a9e6f819769db094882f02e37f1f81468576f8e3b236dabc8b1bc699fcd1eae17c77f19ec1dfa55569f7d081f1149ba6fc395454f235a7638b36497420854b78c1a92023f0008e8b96488f774171f46cf4f84090f6f0a1fb5cf80da904705c485a279bdd8185b9c73655a6329f907628c4e4b89e36d44e97554972099f45d3663071e1e993c230ce6e929f4879d83d27ae2eb62001a380f84edd32165ae68ff8b6f74c580819a75e0c672cf39622fe9ba3cadfc67b7f368ed07a4ae399a560578002e9a314cb6497995da92c1e4cb07bcba619fca5901c64b26f95d451600c2365e0c6459a3786f1c467d39fb58cfa319036674f4a524cfad6e2587551dfccbbabd59961a268e6ff370d70082eb4a26d3ca56449548c8d57743fb4bf8e5acc7eb6b45cc599e6bc99b7a3f86fa0df9b991406d8d6f491c7c79b6bb97908bf46459d7361afddacca48172c32b2c272c6b530a84f339afe6c7e6149c4a37f4e149dea185b9fef736879e35610dfaaf65e5989530b40c0af982e1ef9d54fd8e3699c65ca64d05c7b4e88e27f750f881cd9d56bdc01e039e9828b061301b9e514439c233b854e0f9c12695ae87f440def35b0c1e901e19109a1284348ef5a3df7fcb0eee0e8ac415829dabd0d617bccb3a3b1d3d75b87c9add3ebb687e243185677fbcf9a7cd671f2a56ac3865f960b0c9f4e2f495364dce46ee50df161bb15d67faa6e274daaba8108e515c386c95b3a98bfd24394d4d178dd304f45bfeb38eae5617c426cdf8a10ec82bd9c39a154c009fe5fa505153874b9eaa4d51a67d8de11001e81600d333185b3b32e9735bb3e86fba4262118e38f53757086d71de7fcfcfeced1ac877b6d709995d47cbe1884c862d7be47df039f86503e2236136b661679ed9bec540bf19e4730ec2c125004a2045195cf6e13cc041cef5e30c969a4e736ce0a564ffddc9893acfd221732d22a2371fd125ab65278461d5b79257a9aa14d1821e6aaedd2a5f71b30faea3004f0c88402afd4b63421093f067c6bcda3b584f96535d90a84d6f2d8149a1ce8fa10e68cd83602f0f1436b709aee490f1a0cb188934c2af3c51f09dc94f9036ae048a202e016a4f49d25e65747442443855a585dcd5a038c6945e849419b6e0fa043743a00bce2f0e9003e51ff28ddfed1799f3c885cbe2d2c00d765ebc1ce9f7af386d096860c2046b33286a00a647e0891251e0f62438137b485f3b4b808c1d47c05b90e6a28a1a1aea8c58a791ac63de65a22bb6aa8afe375f1124748f88c5ab7fb39b57c72185f12c3d5dcb477122f0642a04659a2e02a4d2841913b9b8b66ccee34bfa7853adcc6eaf09bdec6acbe022ee0931e9ebc8c35cb1f589ed91ecff6c7eceb57e73825da56c42367ef775bb4fe6528203b346cb19732c2266322ccdac591c21b866b39bbe70b2f2478081471fc9c032258594eaa3765cd574264170aa5e627c91efb7e5e21ce4c02b41b22b97a511bc7e5a8d2ecab76969d1e58eee74b16588f50cd10fcdf269145b0b6328196d6e6160f64227d7d0280ce4373b7a999355624e81e4b5835469edb2707722b7f778cca77b2d399962460cbef6fe285a575a073f593bbaf4b7e0ef9730b40697363ad84d2c874673e94e0939f5628763b7f9eabc4af93eb631cd96345ae2debb45ce1bd62c39dffe9929da5c85179f97bafc2cd2ee60129c79463e0bf3fa2f8d353a9fe5fefff73bec4de68c7e8d8ea3e7dd10e7c7cfabcd073dbde4913acc1d68e297311c7688926bca4021a14f923655c12585149072a44a7afd89c94e39ce18a491096db036ca2e7622f78519c5816e3f64ae28cfa0b86f2a8ab45e8df802b6de3888c249ae9c353511ada7d18b18be859b8876508865229071223bbd139ea5d403655219e0bd619bb46804f838863a84ef5ec3eb9234caac6a7a186f614b322ce8af58484c4c59cb59c4446bfd35fb2978ac3d7460b0362b3e77a3ed9946e2d428588dabf4269871fa7e5bdda90e8f99de6ea22aaefe866e467d1630892b7cdebe45bd58940291d2c767523377f96b588c36fa1b18e2be24de71d806800c66a4f9b2565e86d83352e5edb8dbfd1beecab038b145cd04aa4c027c208f1ad29c0b83d03864aeba24dacfe52c7e19348cabbd746e6edb3963fadc010b06c79d31b9ffdcbb64fda0a8e24c1bed51c2e42829bd39ebfbd3f1d1ad279d36263d5bdef368b4d3bba7a6034e50127ef35d3dd143be42a5050e9e5fc20552e23fd1e89c7652dc4e9111198d1c6f1e8c723a72e0af6ef9b5709252f37ab1571a7f3f19aad375e775b5d9e3892b35b3c4e8adfb974a8959468d30f52eb7512a9df8b24e78745251762b330ddc29fd044ac929598f045f96cfffaa66fbef4255221d8a5a03047dfcdb0025f2466967d1a6322ed282b3db1b2a0664e593d87313957c217591499612c54f60cee33ab61e8aa8f65400a6ce7f0ebc5412e78c7539d9ad4f90e7ddd80e10c4c5da24d417c4f47947fc9907b4e5282ff5a72378dee18b7b5d01ee1514b71fa0f6ec9f3aef5f0c75435df71de91d0e61e61a4c33be23d0f6076e96acf01b0dcfe6cda693f74eb9c591d028c68c378f443dee2fc650faee31ddd4b83d4dc4798ec49e7dac3dd47134577291f82f7b8092a5978777ade7c079142e1f0f9e51862266e637d8b9d89b042b8979d694901f0838aea69a342d315d3368422f1f064b7564c63338c55e812b574a818c65c756afc0683da4f6842b42341ef0466bd36f6a83ab02acf175455b81543ee5ba61e7e897df2f6f50963ccb6a1c0f590fdf9633905b92a49dc0d503ed103324aa1380545b436ee6112907d6c74bf23306e9076a001c9ebda00e3f017e59315f83852db3541064b4e8c334b81546b95cf226a2e40f3d65410ce43eed530848a660906609e3483b26761c6d853e197a589e23a1bf42bd0e8366bb2d740b31edd1de1d2f93a6873ea449a7d7a3b051574f7f9dfed3724d1ab5f6674c8579913cb81d7f83cc6bcd92ad13e517a2e509f093945abf5c75eb2ddc9a299d892300375b8aea02e7eda64bbdf6b3ae92fdf6de0b8f81985f60a84871e348fbd689d0f5f11ce57abd82e5f29a0754c1ab79fd8edd6aac4fd44782a315213553f8f766f13c8e878eb1b4960b0e639a9fcc6cf22581d801bc7a8680793cac22d57f62be73eb332faf6872153e99788fbe3364e0bd75efec91d2b4acc4926c105c8d6622568752a058b82743b02c093a3b41964a2a31bc2097a062127c85aeaca3a900424f22700986bd9d870f65c11973ea9a47cd4d970b3a8772cff5901937daed3d61bccce3d4bc563049784803d89edc5abe278246292dd3cadaa129e01567213d0eb28e6ba26b221c072d8780b7736c07effa62c8d6931337cddb1f22cc723421abf1d7e72f0ed1b07cfd372dd65b62ba43d2e8a5bac49b4ec4be34aa5c28db335a8a1e0f6ea182a621ce1508d6c294da0b414e94e9042e567e676eae268785361c413420c26afe852f901b8257d21698dabb1792bf451db4d40503a297743b38af78090fee3fcf978be16dce03d54e4673ff9fe71d817b5c0b5edb67c12ab95274466ce7453114cd031ca47bcff4ad623417bcca7b00a67719c1a3b4e0cfef8da14d6b31e624913ba3c4236fa535ad9fe1893430a78b932373b67d2c68dba621e7dab441d7c9ee0bda7af5642dd13c5502ad737d7bf0c235cb64a9ae96e9a4b08bd922d842af31deedf9026a8e2796dd2021bfe461c6827eb96ae6c02cf3c9ad04bb4e97d4fc6a209e40f1b62a442c70834e980c40f6c1f843afa49dcef2bdd6a014bd804bd95061150cc04cc553df3c4f58676d07d2a451eb98b6b69336c4e9ff438151716bb1311ba4e07bb9cdca9d395d06f41514fddebf416c9c676842b2caf356ef2ea31761b9442409c299f941d40316d8ab4aecbf11072a8807aacc590f403994de11699dfd75c5c201f7a6aa10b50e6204e0c9442a15d409836e120151e2807b92c49de17325e3d43dee3bae8d1710b52983fd115b9395c0d6fe54739b4bdfbff89191ee7b8a13f1c2e3fe5993a1882b795f962b14e1a6dbb751a29df38c3a9f4d3b9ade450ba72413f9422530b99b9007075f0e63cce08fced52c21a5322035e766e7fb614d8dd021d7962ea5b4adfcbe39cbd7dbd62bd62d4413ce934df21b8ab0f3b8db97958670c5ca9f3b228e3efeb2cebbbabc144f6222ff2b2fedb61b556899527dc745806f476b69a7953d319d0ea8579f5cf4b735c944e1d126bb5d8daf56274a70b4f610974c82c5cdeb055aab158564254dd829bede1830203889bd174aa5a26e403797c9eb22f71c3a04ab09e0c8fd922d664a86b4a894d54e9eb06312c00cbf0c2bcc4454b91f927aa8fe79335e974176c365e060d5b12620f3d67bc94c6881c69bd46f3a5b339fd709ea232618c33525a8bf030ae4d84c5cb7ccc26e745233bf43128b23570056047a350dff28dcc3c718e4aaddd2b4ac6a1da924ec2dcf6d1430a9aef305015741efeeaf2041ff150c8b2a0caf07c11d361ab20d09e3d2c8ab5584ffbbd2b00689623aed27d816acab439fa2bc89bb1ba7efc4f547876b2898b46462b2b6383f842bff57cf5f9b46d5862eca952838ec7a6174269a055f102d6b8fab5b2e1c877efa8423d7c959e775c49b7190fdc872c9bb9d61e8aeda3a784e5032c528a47cea98b429b2aab3693a3cfa9fbb9faed5b759b22a5cc52f0c32da34c3a6a09f1a1d4457cbdea008fe62846b03edd81a8fda5292450bab1cfd186ad4a9064a3b3984cddab88ae2f67c2a5e1d01ab9a76f7b366d479a035ea5fdb9e664620cd2c521e11e8545dcc721c4547eae4315ace7f214ab6de46064edf3f5401b8e3feb121a2db634d4ae733b6fc82d18923008704b4301b65aa337580c6feff6b872c22af17e234af2afd7816fc54466504d4c3b705655574b25cef99eceb6b0bdf58f86f83fa1f3b184fd047419ddc1a95fb8400171c892d00731b5465616681cad4379a855e0ff0a0f8b49006594e2397e6ee2675a25bd4ae76363bc792ec680a508ba4667b26b2dbfe82e1a68cbe97e4939bf0c93ef85a944e47b623f7d04da29f209414a1355ecb43467d3d2b716eaa0e151b3fccf22f4409351ccd91aa88dda960db41df88c8c616f50e561866d33e22ffe73a1b8297638b8f8b2a9c35880feaaeb6ce90d5d7d9f285b6fe6cc961a94f20d2cf9c41df9d21948172f453a2187210d0a5d4abb81674491a8797d7b40f4fae25fb9839223060992045f4be32af93358a349a487932b7ac464789db58dab19a0158aaac4333bb49ba9845709cf0da7a008a8bce657d10f5289164ec1fbce0762614512cc3360352815d95db2f6d4df6c95cc7c4cf58b0c242a76d11e880cf483db71534a37711f81d419d6a99081a988c22d21087aa9479db6fd79f56135b386d219e853e92fb7fcc54e9554dad2c989d81cbf97cb8c6de1fc823b2302a45d8a73e82ab9b533b453863550b9ed32dfef7bb803faec270fc756026420907d402fcff1e7a08b90461ec02a812d1e85f3e86830f99b6756c1c5351777ebadb240d00a78649c019589dd44512d144429d5ad4f78df188f30d2685a30d7c8a81aef0787528d60434a01f3db7f1773e55c862b3f957f6e13707683daa3b4127a27518777a84770ba15a02e75c1fc723b666ce28daa383920120cb3f00b627beeb9241bbe9598473ed40dc331d4655c8cc7179655a3fa64f1d5554c2b7618efe3d15b91c6064a1fe74fb28ce90d7604ab1fb22446758aff428544bb5680a9c88c63006593e077b8ad3de5e56c15786bd347b33c16f2eb78db1518313116967027a6ebdc674d3621ddfda2c7e260f1493ed9adf7d84b5c3b972a9073e048f049be5c1710fc82f637d9b6155eeb17a2f430f8e554492285807d14e76ab048dae6726975f7648b39665cba25ac8cf79eea471758af753f8e81a973b80eef2d5b711b8387758a9c63226c33094110538c9fbdca47cd93dbeae934c2a0c82c47ed185368f97d24b04b80b9a46fa691e02371442b11ca8952c0dc890ba4106eb4ce38eb6ffe2b94d32816cdaf29ccc7f62bc1b5f30037811fa71eb54f4816c23a28c68bc84c9955ac5468e44ee9a73fe1c5945f3aa10fcfdd26ec9a6813d501ab272b74fc3223a6c7b9ec513f06aa60dc50ab0333a798c195c2eca0beece8bb29fed7f4c54afe4bf1ee1a2266ac9ef8ae0c8e377c2929c74ddc0eb1e52bed7e1f7d29892642842605391adca42cda2578455cdc1e17cc4ae09a473b13066705f3db6282485c6ef0e2b0c02e9488587c10d75f78ecea230460ec66ae60987c8a0749b73f9256bb10943989fa01b1c14b3cc1e84b88d04a6fe1558e7c3050c3e67696410b73028940448ac4f357594073b401ffa0baf3e5bd37e553e3e36e25541e835b2ff4a2c74cce83a379f23357fec8ba983bf082f786d2731eb7271a7acd8955328923ef84120a5fec6439e3be3eaa28b18b5a7bc40abf363d30d6a3ea6ea6b7cc8795be35f26552df8f123b8d7680a3fdd1a148891f74ec21c99227fdb67fcc4ca9c13d96c74a558a89d3db36b6d113555442b7717422dcdbc43df56b3bde260157c4bae5af02cfc5aa32c31d0ccac0198ddcc29e260683cc4b75b68d8a020875191e54cd3944f3667f9f6d31bef91193943a41d0cfa8b49b76dccf2038ad26b0a4cc7a446dfe2be87c3078af5a41c496ea4eba4e7eb3e31817c0c4cc3fab56de431ba8e31ba39f2d957162775a4a9a39eaa24730616f47c4034703a2fe103d75b4224fe20cfeccf2fac16fd737d02e148c2c980fb48068b449f8832bdab39543b35ea94ea545761d47b3446811bed43685255f64e81fdf5c50654871d670761eec95dfba9a9dcdfb03aee870aa9b0aab2ebf7fd1503255f906aa79a80bc7f75979d40bab3948ce9f16a4dc07633eb6b2612884870f93ac0b9daf5225571addf738185a6762283a76aa1a4b086964c1e793c2d5176fc033a5ee3736396edfe9af35161055cbd81e89beb9c12e628edaaed6b854fd2fba073ece137f0d9396657b0e1fcceb73ec62f8bc602f13afb783cab2ec09d699d434445b626ae8ef59b47ee51ac8400bc45a9b6639981ce0283d92821f214698b4ac1bcecdd727e7c2362da055d36eb0800508373f598a4aba3be6e97f9b6527ab84a988430a23dae4491b9a76b6d0996dce9099288f2fc308983e46e28397cf0bfc938f21350fe06485f49d7a1f454e7941985ec1c02367fa9d3408cee7b0e5e2b202a08e994a7c54c7fe50db0c61413a5c6a6a2d288ea565f2ea4fbdb8fa164620257842fdbb52604f9ce6a3ec38072ca18be509fba1438b70cdb6533dda638cd7feb690d4614fdf027808a20e2ba024b1b266d23d819d1459bb0cdd799f5ff3c760e13ca66feef3da283911255c05132255075020bd496c98d06b0e5126c00ba096bf325ea97472a5fb35f734a99612eeb82bcd8480ea48c02790a4ddbc4786ac241356b5a8184cd0bab8a1a0f37076fbc626cc492ea41b58493da18284c7c514e8beac0070833a9681b20f9c7530c677eb3987441c0854bf8c19452b674c83ea06a019976a98fba41185d63024f8c99b6d086e3282ba0d3385762acc8359848a3ebe93151d660d553114a16d8ee1e6099ad74c1602e48581b9686e450de6b700d27b8038de7adcfd9c144d9feeb58939c89565f1a7b3442b159b475db2853596b4a1359baf2184866072ff65a8c4da9e4fe2a74a857b740c00ba7f7cdc27c30bf606154e98891c01b89a0f1b20b32ed8a1ddecefc6abc9e9e2848a61bec0b1fbd12531f20e0fd0036e0f1159565283be54fedbf0588cd4de2b5b8142142b2baecddad983c81ef6fd6f2c466df56f957b26f2972cebe50fc46400a2cd6f2d9e6bc5432d6f76b143b7594132af4cbe3d1a0d3b213d40c4fed3cf5aba8d683e28d0dc6234aefe517a07656a74811c9af42ba61f0d444edb61fefc9cc9c55ad5bbfc0637867e83315b28404e695345f323211655a50122d0386cd857c24722f1912ae5f54337f4e7baf8ad75051e778357d4786a9bd40803943de274fb3b403823f27a5c09c5c91c43c2104a4b69693fd01b72da4be5bc10686b378aa1c897478d316cc9baf55e0ac95e5dd3a90275b2ec5b966ca262d5c07eed3ae46c4128ca8e5b9239769cd4da8d86db540ed55b5a11d9c75c6edc7271d852b9de96f7e0bc1c66660e7f0b114a7472ae9fe43f7aea9c878ed30b610c56c8630d02a17ef49f31e057203c56c2842e06085cb596783fa0e0b6d35600c40fe3d6a80f336a2a157c60e276c5a4baa5086c88667ff644643bbce341da741e3c9bc8836268efe6a9d4cf6f95b12254d95f113fcaace445f7483e614f2f131aa87655c236cf835c7a901547db922952c6abe723e809cda71221e80957fd96cf5f283b68bd7c831f47a9ed21cdbfcdf0140aed0203c7e1c6cc608e72e9cc1dc031f76f05c28ebeb67131240b9d9a27d275f23c21429c359bf7ef4437f34c73f878c9eddb0ac92cfec9f8221ded34b9e075346c7ab86ad315a14448a4f8c9880bd2db199641ca6fe7fd1f2160ef12e8215e0eab5ca52e2bcbd0a933440a04893443c109c4e597666fd860f7c3030217dce26ed2c61e944f236b1e28db9f9a91d2a486752b3a0be269469227dccd00890a7eb10bb7365201a205248afa2e5a497650b5bf25a9bc8d6f806e86931e3e092a628d2ec0d6d9967452f9518239839eb88cb54970a9c452833ab507df440414af730f5abda5258519a6bac920cafd8c2aaefd259a445793b2aab5ccc341b60c72e67e39821e609b2915b57e0aa246ba0b56118544dccdc57f18a4ba5645e6a54b30b5ca55a818082a779d908c0e6470a04e5a2f8232e90a215dc8487fd4dcd6877a66bdfc99a6ec43d9ab52988ed1678d3f16fc6f4dfeefc5acad904982f4a506ae46dcf0eb291ad06e6809f5f72d94ba6ebbadcb0a6e1abb46b2a0035136af40c0bac3b2165491fe0a0ad0e38860cd3242a43da3aea4097ba80a787b08249a16a5a14097d193894ad5682d72d532d2493e0b669faea0b40718855873d35faaa13b00656a5fd5b38abe8fe0df4cc4ba53a087561e095f7492b9ae7733d0a2c9d5ea7fcf7d28be7e368b075f1886500e4f58ed32c504f6dfd70792727ccdb5204f97d90439e5ff7a2124e9a761f809c5e9b92d25f9cdf2292aa28429b7fde95b05f2523e3d4e8ee843fd1db4d7e92602496b1eb1a540c153078f4c633dc3d7ee61b08faa9df9bc45b28112f315403caae8ab1dcd34ab9c534898766cb1c5c0708955e1e3f989fb78931cff5b3caa601ce3d173b99eb8015e907f69b1ba6be51bd7836d02d99ff48a71bfcfff6a941f6c49b53af71e4c259a44ece9393c22eb1ee9a1a398bf384913b89d77d1eddb3388cd2eb1a1061a35e0813528e83875f4bbb42411373c89c15baf8c3b39b001450e3e21e6bafdd0a5daecacba2b954bb1a46b39d3c3da4fcabaf31da0e0f8afcc8e3e526f1835e8f8ead2d51f61799838b7f2d87798933f93562a089ba483f967946cc9e78b22a56ef8dd11f819f1d881b52aa3a177683e63c61c6dae7197c3c3c2726ccbcd6e24c082979e0a3b1fa687267e0822e3a25a36883ab78f244b74cf551851882d4c576a3c75e8c8ecc531aebde64057f721d86ceefc6eb00248756221024a29acae6d323f5a38a3119f41a8577f17e3274da0d2710cdfa2713e676ee57c7460802ec5878889a2d29742f06fe8e97d212f037e005839d9de41c8d553ed8d4bab1c66124412dc1b55a24f938fe9bcd01f4f672b90b7bc1af3ec82481cd2cf703850c512678f305586d2388ed80cee4d28d36a518bf801ff36654cf58523dfeb631e9824fbac45ffa9cc957c481f4c09abcc43749a05f32a44bbaae7ce8f570c334e27fb6027f7d98c7471f6cef9fccf57e15fad92550eaf81af40fc45117c4132efafd4ad807d1a816bb063e50964112d2166236ab53d0fb736f87cdb95aa4ef5e72c58e04f4f03d3708f8d7889a01cce55d3842968885dd706aa3ff1968d053f104d8cb3216cd78f5e82553313c55ee4e4ff2c1c0a187c1d763b33ec447e38ac9bf1712c4ac2cead629ad847137700d45710506aa3f3f029dcb901a5a384ebb18be3c7253b17b5b830567ac0dffd2266999d8305a4fd417b6900a5f3259019d3b0d185665c7b2bfedb9a6b0fa271999492061086fb27d2a6493e1d1ef845d1b66c783c110d51ae5034a7e122de90be2daaa2518afaabdf61c6b199bb20a39c69c55e7ac0a24c936d1036d7e91f64874e98633b9709affd5a9581e9cc549b7dade0dc1c61c68a685707211db6a3c2660dcc0023a326a86c6c24d2650835f62f9f37c93aef1eb9d69557f5eb66a3180aaa23f1cee4e98c32ff725f383e30fe87117df4b10f83c5c0bf0692d8794a78f87e8126c7322b395bf3c250cb4e52b36ea2072aa047d553063d6a8c38008e8623189ce2a1c7d217d493af7d3ed75849764d1d5bb36873d2fec8522949f6bf8bcdc8b42527c8e32d241622a4d9be8a8ed3cb1e247f4725d364c68ea0b6eb2af3a9d2ad669d4fa79ea5737a62d4a729fe4fc209d16882c697fc50b701d9f66852d120ebdc1e9eb66a06331e2fdcc4d32969f1cfdcce33d53e88c49cf09b8eec3745507d1cb321772edd8225a3f537fc668a68dd0088fdf4dfc7a7e4708a4a3eaeec517af585adaa18ffda2e177b35638dc02f6560eaf7c45cf0d518cccd720a89fb9a38f00b93869acda133ed05120b55ca80f4d16bf67bec307ac2746b7c97798d0380db816deeb22f0656be47a284ec2dedddfaa5d797c6ccef6808cfeada53bfd635aa9657cf7d9450cddefdd5575bfbf60fcad9c4af4dfcae75c9990f28e983de88cd97e47b76d7bd5f44659e71edcb90a56c4e7b268b1a29119e709fd259047ab60e08dc901a381365caa2a603f40b78055943eae0d6b760c611318dfefd95d7c201fc89ca073d4c4f5c29210736a208ddede28181f4600280d114dc086c149328c1fabe9200a4fc6d19704716a90b683aa0fff82ab953eb020ba72b902eda1edb24df18f93aa8b4cf10d16b63db33a9df1a3bef3c269e4d09c617eae2d603b67e06cc01f6164232527dd8f3f99c067853f7df581d77c7c79d55a322692310f44248c5e183a797915028bbfb4580869f1c3fc8732ac962da9843f118416c2bf210fab316e01ee2f55207de90a06dabd966ca5148b34b0e1ab0cc4cc727c81994d06bd854eefec7c9745d2b84a54753a0cf756f33f7a049b314c803df553e56715d667a1faeb983f7fd05480a59be68b3490110d7ce340592f7b3f37efd216af05b32e32cf9d9d20e875c48f9e0538a699fcf2ba1c09d6312c941890edb4fc38169c05d0f08822886f4f71230275f92226496d163b1c6388847646d6760f956bf8682623802eb0df4352f319cdd6c3e0ff5cbd5626dbf9681e7fcd9e178bdab9d2c2e9c334bbf2159e9e1a0973019f1b80ead6a60703e720022f67fdabb5d13c64553e54658a93c0795f9e69e8943edd8a239e85acd0d05c8334bf9430c24e49b858c44941e26699ca0242d14f3b70e6253b226663d049c22fc08f3de3b671db8bc04f0280385d5c1aa2217e68d57325f69bc9737b795dff6ea467818825b7400e2605a2ef929f550440161e4095e346e1b895213fe326396664f95b2cc9b8a29be372acbd88389b81dc630f81f45a794f3d42a72a76d5523ca632d703595c0c1a431b733e51d09c4c1e9691b09e05bca032f7d64fdd1ab0dfcdb9c4383f4954a4e49feca484b919d87af9902d41919ca09630cd7972e93f7e3a37e8235c87098224cc8da2f5969fb9dff9dd6e0ae88dfcb59e4fb7f2c64ea74b1ef45c2a7deda5de416a063d9aab537d4c4fa9629cf511adb1996ba303b51c788aef864052475fc22875012d92e0ed2400740de02641eecdec981665618e806fc0b8e7909af8e6f3e6da5441303dc9ee4397aeac3a268d4988ba7e0ab3768fa306fd6b89db2d5f88b5a8f5d06ca0718fb2aa41b6d54729fd27b980bc89561580bd7b1023a39610fd83cf5b8cef20c055936e5143d846ad3c2f8cd923d6776355799fd42d4e0c6b07d9b85509b909bcfbc5f051b04ae6b000b7d76421ffcc950cf87fb9123bdee2557f21d3f684f181f8991cb44e95993d285bb0e1209c7d43eba6a3664902690b51f5a048ef6c433bf35f78cc626bb0fa0484bd51c53b722011aca9f32615f39630f5a968f41b59f3781e66a9b3c63bd82816d69edfbf5103224485456f9fcb5c3f68139ba7cf82240bf6c7d7314c988f5b9bea2d5a61802a2628d7bdd49947721e832f542f29fbc04ff9d2333a1fee6457da3c409cb3defb37fe6d5d69918d1383d9f74ea96a15d6b96f7cf41fa27fdf44c3257d4b6ebe5cf039af276b4885930c19c13dfeb756a528464b37a927daadf83fcebe17e1267f4fff408497d4bd51b78e258b5fdfb3713e20f62cac581f0270e0fec29b1b5eeaa71cda3c2947a2cc7eb74963e9a0d37a213ee93dd42708f4a2297043a62e6536e594ada94f702f1d542ace0a35ef44e2837d307f79f895ba21381f770b08655df86f67d98d9d7122347310f68a102c9e1fcc9633459ff1693a8855b61bbbec8949ed","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"04da92e5d13e05c88573bdc654500122"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
