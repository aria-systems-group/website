<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"5a3bcf5a24790d6c1b899973bae08e6e65be6050cabad13874637d815bec524e93de182f393d2933cdb4c502a7dbfc97de34d90994de14a18967bea36f30ee576ea0eb42e16d37abd223f3a25ad8432c4a5b10fce0a9a34662f269ac90a4d283b6208a9c05996a87d2a93ea8a34b2fa691e8dc60a629bdcc0ed61bb94fa9874e95be9adfe175691b1d2d7b7f10c56871c490ecb53cfa63e31741d5d26b6ee4780ccf28a5ece6dcc54b34c1209f040ac47613055c246e7f4aa8666ea7eb464371c7e4c810489d3bff183d585fa20cbc08aa3c12b2d537fdb1aeffbf3b405b1f03886eceb882da4eea7e084bb55845a64fd5594a30682c66e7553e2ff7f9e11923f818398cc29ae930f9860d589abcfa29389ed5aed6ab74c3f17e63e9baafa0b87e412d5b3af42b34f93d9bfebf992367190460b8e8df2ef8da85725735dc2f81c896f9b63503ec8b48c8ed0be5ecf6097f3720f04320c9e9a1eb3f1d003efd36d01e9242cb15345d61723323693f19c4b0ba9de6e43ae664c28b199f6b99257d248fe869ac8d08ebd3328265a9a3d30c04fb6ed84789e4d53fa40529e968b6ffbb1fed8e9c943015568b056ffa6587f199f1ae93a4bf909e3f77f6ef50e8454709a8920eb5eba6c9180d28a3897ddd9ed2503f28dd154bcf9ce2855fe41cea2171b5194469a973f9bdf27e25a21185c73e350b59b6384f496b761ac76c162fa2b9d1d01409e6cad37769c8282cf2130e79a968f0309d1fd94fc4976b45ba0deee5b0e2925e8f3f1a9a0b59b7ec4507f7ed4b5f7b8baf7bd8b4b6fcb92dfefa4503d9bb3912cbcc0f15bdd56e0dec95d5b5206801a7bfe90d993efe7298b3fcc06b46873f45231485dc1642e230e6fad4bd9a9278189b283def1ea81a69355912fe6e70aa92966a7a018b6b1d5eb4ea42b8b53094b0fa298304d01fbfa46ce09d007711b6f1d5ff729e9e7db03abe07ea49f4f5f5f9f43ae48f1382665b41fe460195e2b6a62b875be9e9dde1902d5f686c98e17d8e007e12f6f7283663f9cd8509facfec2e697b7561beea7967d1b62570e550bd05ba5d2d36acd8a397284c8a9419b816fb9d263451b61275538576141e7cc31592a99d7a433d39d7386a9cfc6a6b39689038ca15fe6567fea888de24e9d2aa66e9f19625980e15e0c01357b29f66583b9306c6c21bd19cfd9fc826f4a169845a3e0b035241b4405f907f3838bb88fa22a98f14d94291e7596dc0f922bbd54794169c1661f281e8ebb261f96262c076ae29d52b05eff7a9df42a631dde137d47a7093cd5e6701cac189577afac89922f6a65a81907fc7e8b6b4568bfc5bbb1ce7fb75583fce784d3b803704d966b9ab7d7f0598bf58ab58ccb9443859b844c6262722dc3a29e7c4bbddf998926c317bd5c43747146919869b3b3f1069bb50719c3d78b6d5ec8f5356113ede099be6d069b3fdd074deb1aca41131bdd6e3d8d8a4d4e8304de35d0e5b248b4e19d77f4d50234c72ecd3f77981d201b66642ff0b08b508d37db60452ed601fbeab4fdceb8112baa5bd0f42df9f2d379bd398bbf546e060ea9daf7da76dcdb1df7aeddcffb68e932036e1ce5b17f019c9429b0cc0c3d0fd68534578443e60a417183a8e1fbe7fa21f8445aafb80a347e8aef359e53c68eb73c4e3f7243c76c9ce6e7197b79be5ce11e5faf1be2922796035b94d3ef322e0f89b5aee261a53bce6effcc14ee78ad0c8a9d370908a1034899c12bf01d00dddf250ec33e76678b30410ff21a9bac96f3cc48cb3ddc945d7589eac64d7a93a24a67e3ed8f196b53c622ed020d99f7e43de6bb7f65ba71c3fa2b7cca3c6f40ee1b44e1d33b61d0e9c2aeb3dd213d258f15b6a890c4f272374de7ec2bddb40985ff802848280fcf0105f828dd6ac9732133291ee752e869195f8d95d90b76c4744717c5a03f165ad8bdb949d567bd08a1b8130b399863bd277a27388f701aa3aa22f48819edd6cb705eb0dd07eed94adc630d5ad47d4fd9b987e197c16d661961441c111605dfa14e6ab0b0d094339e8d50ff6003a0d661aa4633c208e18c60cd69f6435c3d913a139bc3142d4024ceced45003686081aa57286bfe05971324a6e14512e09e083ef1d8e521cb9f2bb7830c8c68a261c58619043ff4f53ca7e540f5699f81b9c6f2744f69750d5d11d7ad211a8ad1b5f6dcdec1e6838549cb7acd284db49ae6bbecc34b58f68f595b764aba9672ebe4fdf44e907fb2201f7bfd730f19bbb5b005a0976a6e3e707534bc8d0187947e9220508fadd15c98e92f89e400d5113afdcd9e072e0c0d52494519c13df9366c0a5487aed376aae968ef1b08e6b4f0709de68130a3b6b71f8184c43cb4a3114bb75dfe89a089716e474c4e1aca231a7463180a1852a6bd08821c68ea10b80752f442731299f893bdabae9cbbff2c8e34628dc1c5ee5b5f22df017398219d3472445b31f482aa80414b35ad905de58d8379e5655b2b6cec25399db8747b207e0799472fabe72c02cbce5494d79a624f5012152aed3a05b5209f9d7eeacf83059d263f2b2d7a14b8a7f14990f24eefdce414e7ef953ffac4188f502be812caaea63bbb1641d961f98a08365cf27d3aaffb9613793c03ec63fca68c52fbcbcb21318a9c3b9fa3cd347c4b0aedf6bed7dee601c1f8a679ad463b3ae7bd21f9f9ccb97ef7da8157d22136a130bcf60d25f7cb1a285b27543b5d07297121c6be4c180a781c9bc4d09177c1784e8a1d87b6cf443cd494bf6e296835d02e48744d84468cd8d32e84bba50275da6187b97326b642e3045d89a6f688ab96917376f7f85d1601659ce18fc776650b0a0a93e904e53c2fd752a890a55e1166bdbc18b9e7df23fb76851e8c7ef1ae582e9b287e8dddc0ca534de593fc2b33eede7925473176253d3a8ad3fda05f2926a414eec38858fbc067242a7ae3ab15e253e04a2cb439938829ef366bd9faa5765e9cea14ab88edd45080a873ae34a447c873eba54fc2fb5718c2aac3b519cd8a9dcc10be29f9424ec989cfab36f64ede2cf3029d205a91779b885bf35e815a4b4b80b7ac717411e1e3aca2c17484362736e937ee7a14b05797cdd56868d7b0caa56fcd3f4a400c63c68e7798c331fc92c5ad746a2efa1695c9f726c60555868bfe35073e1ad65099b4fc16191f5125e5bb338b2f29a35746833f64ffeadad03fc9f6b1e6b79790e7b77126f3186d86df5adfa00634877ae60056f217c1e3262ee095ba1290a50ea6f09486b819007eeda109681a49b621560791514d66a257b0b04ea2d1941b06315af396ade13540af139a6e389aa1a57bcec1822692790f85403b41a88d33c5a3ff7cee87a918d3231e0ede440d777376475b585729e55911bddf61e16d86a4a6bcdc7f1b8f6c03b702d64298bf1fc4b61aab8dc0457bb502400f2e7f8e927b6c528754d4f30c9474c4f0408f02e198b998019c1c1969d9d23ed1a84e645e1eae74b0cd1ef21e3ab647e6bee43768a25fdf28c3c1c864d002a6d4b6edf4945997f7738b967e7900a01f0a689232c96ffe7c89d01501c6fdc4acf9ac9c6c275b1c15aee8486548342e63e58650e6994d6039cb10ce5120ccda8dcdd00e8c98b29d56dcae1bb60ebd16f3269aa3bf96660a39cc4ed847634d3e1aa839cc964638c1bbb5fe54c502e315dcc84eecc691bc5fd09225f20d022a2e8a6c8490673e5971645764a272736f962617b224626997e163afbd3233c3804b52ac2a858718e755cadb77ececb3d206e304c490774b03df161c986ad76fb59ddbef574dc325137ce592d5a2cd67207464a34d4b9df6edc2ddb82505273548b47fc47aee82f6cb0b10252e88ab8a3ab71bf0931b17d1854ab6b4899ac3df1e28d1ef66d1da3589200b235b1ee226d123a9da9cda77374e8484f400d9c9a676e2e1e058dbcb9ca2548019d7ae906bca6a693d0c593fa9b2995bfd05d2a2b4fc9f03241f3256746b54ec34ed998071727d5a6f89c72789f4b7d3d932d1b1f0ca3477533273d3a44d7ad3ea122f4fef1c73462a081f590544a18bfd11dfd88c2158ee45b1979eafcbf9bd629b31e9aa465255fa636fa60676ceabd8f5087bc8ce12d98b3bbcd7718d5278784346d31bbdca3888171ef2d8d82b2280ce1b6be9c258e92ed3eff593aea8f6ff04eda42d02988a99a4dd12cbf54c328ff26f08e99c6f0570eaf6e0952d42586de3f148c79ebc6dd826889e4167bbdc2e5f7ae48ce3bde62ee192b8c80785f1c667fc28ef72c9ab8c5d2d2fc3af664821d4f84e6fb69b4a5fed9a3ba51b5c1e2f3f52f2188b6b6df6a701bd9edb51b19f54c9c5bb3ddddcdaf75b29c8d0f687c757a159c5166bf68ed939ce87e4ae33bc2f94df08707fcd74c242b09e11981a3b235fdb6338074436778067ce39497565ea328f85c2cd37ac138276cc88db1d923a333ac14d492148c311fcd945b66eb66a6042c6369e225c6dcda47ad6cc8d65f760c1728325cb50f0d97e6f448a20423d73987782f118c6a42f27b6284955ad685d36a1ac4e94aa8f63985d78a7f0f10524a43729807c70e78122dc64c01c00b5ad08bf312730fb7e696f6b479a5cff61d5d5151ddc2d02adaa6a07f5db4e838a15119ae9e2fd85e9015599c3e30d6c26cf38904a2d7dd061ddfef9df5bcf0ccf3875698da56b9b4171a1996d3620f9e37052ec6312149a83e1959a7003af16defcbabc58e9bee9d412469f6bdf4a475b1d574b20942c0da8123136a1dd2c19e41f14c552dab9ad28544a136f717799ab1e72eca72d9328b9e8913790d77d2041a32b0ff1333bba6e9454de8dd06598716078d1400b7887f9bd64b8f11f464224444c76167a43565c6318686fa4b5cfc614e8f531652b1f6f6768e2b1054a333a1433cb89a8e698faf019e006e34ea588e53380fb7610ac37a67779b91ec141e314f7ff7f54437adb8da8790a716edbad905c618e8e5e1c3b6d6f8984d904ebbcbdf2dbec88a2edae24f17e26f311110a252353c3e003293307ee6b6780435b3fd037cd8273fe981762a4642c18561a5b13884f50802c95918e022b5aa92c6d23b632153823787f69b7b004f40329589e7716a158c4b49cdbcf0cefc9482605cf59504bdc08a384888b677b861def5e095a3ce33299502ddb1c0a661b38d239d331679f7de2d35c022155f53677d1f6dd90f30e483538a83e1a249fd5e5905e9fd215ae97b317fe7cef4d7ea54cf2f6c7d39115159c7ea6f793d2767024f31be14bdf5d209aedf5fc3d233f4ea714adb1804c4bf041d93cf918bb740e7abb653e4dd7d775508c8e3d380aeda7e4c19bf7cb41c40028026ada3ca3a1a770222113bdc778cb52f9875bdcb175e284ce734e735b5287937eaab05f30413c8a7b958879c66e235de19ee2e3fc46e163538b7dfa44e5764a0a55ac886e3496ac72902d8d86c1164fb9be4bbdaca09fec1f5a5a17b481df021c5667c504c4cdc0140bb3649ba40064d9b7302f0033f94e8f7e8bdb3304b5edf4040c286aa6261867e3b53feb419b00cb79b0ac6b71bec57791c17cb7e5b0150b9cbd8de3a329e241f06563772b8824c42b17040a44b1dd30936a3a754115297a868cc31ba20c288c4057969a9178528d20dc8fc2a2fc66dac8cf6d83f7033de234b07c099163abfc26932259bc107ea1e3212354f4b32d696052069b39a72ccf36f2fa54ea70f2b8ba76a0a54599c8e26259e7a4621f56f9e68264af9e66bf61eb86e5eb34980d2eccf7d625b217b5ca6d6787188cecc9df7c20179755b950df688b663f0e15e762ec9e42de4620f177d1e1a5250f2e1b82259337be251087d74ba6da92bc3b33ac5ee23dcdf281e15791cbd0537a4244caf52cb17be264e1ec4154075a66c71d1d2f7722ab74e4980fe10c1f3bd02001d5f3df1908bef4cefd7435b0d6063f923c677b3c9aea6405c2560d9da1286bc29f043932142f8dadc43fa89c0b21bd5746b300a46dbb6c93f07250ec8d6cd5f5c944761bfb6e31d108f87f845716c68cd9c4a31c01e197159b74077cdce76b3bc7debbd476d832ce19fb30160630b6158ac608133f2c792cad0a4e35efd1cea86f335d5e4e82620cf778fc06909e6e2ac5d5dd79953726c446ed7311c3b1f6c31ffb7b24f37683a7c35973541ff35da25473a1cb1f8111e66e442d590ee8c80e975e2c71fa9b4baa55e6785b95674f3cfa91dfe6af537765614aca5a7eeff1500897d23eab955eacdd9143262db17e58f0eb6c7381a64ca0c315a9dd108e0c339d2585b72142d0f859cf846d6892f10d1a848a60a0e27dccbe866d5e9520a4dd504908203f15172df8e85e11e2d1c2565fd788b81af0b2e5ad6a2cf5e22dd562b9283f6468465ae6a0caae63e2370330b4064b5499b5a0d60dea1b2b071730e4468fa9753579f491830aeccd2c4765873b0bfe917b99d53cb466de039eaa960981135013aad1d92df827927992d58ef87c1b10d169b8bad87e0ba9322b6986588a83f495e7a5c901e2d3711566d9cdc23ea07eb72957c9423553b6a6411353a5205b87fa61f7e1274bd05adbe1f1b9cef3add870ca6a769f49b894c77bfa49ad846b3c67c793015ea7b74d1c465c7e88967523b80513fbd1d0f7b769fde7616e227bd20c10eaf93045d88226573e5507d892c5539ed4b11d012155f2a6105a9130ad546366a82a1570782ccfa282583ab17b3b5030f503a16c00e3ced9170e0ec0a5c44fe8a2480d810385690e580b0b8c17c7915b5948ae4a893176bfe194137d0c6824a10cd4e2593f0408e3a92117c8d1a08d7ffb477d60a555f29224764aefc1d84f82eb15da835390b6843ddbe354944d7a23db2b39e4615160cb7abef7d89bef6ac28dbf4eb9f883e1f745e646aa63024779263702162ad22ef206bb93103d6a783460aaab021fef40635d21ce73768f9918d4655a5498291b4dcf57458dfcaab772387242614c6b330926d335a750f29c710130c68e05e7be8b7338a4d61956e3ff36a6cb9087e890499bbbdff684f1fed7491ad15f1db9bd93147dc6c1c45799230efc48c2a5906b179ccde177f3331082608a5221f5ecd071181aad3d36a2a28a42cde36435385796ce0b72a77333dd6914ab038ce0737a2d7c5ebaf8afe2f7b01fa63c8d33e834196fb92914a1f4dd32898cb4b2433b22081aa960efcfedd6ec2169a1f0e8f22b20c185b0338a3ebdbea7c0115443c51eff0194d8583344732f0f5b3c45eccb5a86b58738206c75064f06ebb55b9500bd6f363ca8b7012b5c3b70538d99848d0643e6fd9c2f65af7d7b13ba40a498b5d73a5b9486461690bb00f34c4123cd5bcd082c5af6e465a75972ca2b621ba34fa35496153ef6712611ace2226b446d1c07aee1506af99f92393f024dc771275c276ac5f8405d305de09f84dee9f66dcb777fc391995c497ecd7834889c1513a65aa4b9c71da848e7e6ba3a91db4da5c7eb26e547a2dfe57bdb1fafe9e28e608cc1b99f5fb726be6a98bef84bb10e0d918ccfb563ff4d24989e2daa09d15d71b87c9bbb811a0168d534bc18a026b51c7ce0ab8ef2de8acb9c816cadf2d0d595cec0a0b94acb9ba541f3a610e6892967ada0144827a1ed3fc24fa2cc06316704e5eb0e939469e81e65ae8fec51e8a75aca5addc2d0497304fc50c682112443a6c219e6e5dbfe0bbada16ace1ef8db0caa1df47c86fed0ed52833c7128fa6ca682cbdc923e7dd8af3f0dec3c01d0324ecca503e4e0a97cc5d56d9b317e29ff2b02508c43a27971e67dcbc76d51a32bfd20cf94829731546d3639c05f1d48320fe503efe10b9cac88e8a4fcc26d5846fd2d448b01ef2112c5d08331432f54fc79473980a89b7cc0ac687004c3d99ee039fe21ea1ca05cc75c344f10166ca02cfaee5650a1a2089cbe840f03babfc0a048b9cdff2da000e1fb595a7c321bd14f00607cfa1d47244910cb0e4ac296fd35dc4ae1acae0280415bb40e7b0e835fb2c580222af8bfae9348c61172e6fe8ff8ca0a26c4097bb2acf6f4debd96217772c623aed50f66e2f702e9c72bd0d6e2bfa10b063a9dc67fc50a0c52df843dde0b03359083cf92b86183a4ed080c6b7074caaf3c2151a95e98f331d393e14471a0122e2c1fcc7d99600830931477de51084b20a320d1141a27fa852caad91292367f83b5ffdacb10f053cba8427644c53706c028a0fd32fcb83305797d8df8baaf95b87f298e6711504145b137abf3804a307709691c1ca58a2a4a35e92db53876ecfc765a7d70b9270d205f9fa452a5e6b9640c82869849311c9f0d1dd4d5ffd02b13116c1b04712e2f73d7c0fa9c4217f49c0110e208eabc6a17ab8557569ecdc9001d6fb5a4c135d0d59bd37559f81342bd1115e72f1e595d67b21aa390fb19526ff0e6250a0cbb10954ae426e74f5ca794dfb4f2e81d026cfab918faad0e54fa15fc9d4e7e17869330e209c0b6ba3fbdb83ef3f268f1fa375d71eb2c7484c0606e53614d245f4e5a935797b0eee126d0077f299cefe5d9f705a1e3ac5c35ea1f4a26271034b1cfdc6d3fdcf6c85aaedb0a54dcd6fca695172088cdcea038ef5579846cc6bb95337eb84284def7325ea0d786876863129172396fa70245993a04c4a5166d28a7cba57e018f9df59c0c654ce26198c8d5bd470101e4791a8d558c3d084a65198302f9b8c492de4aa03fe67b2b1f544279881231c1b2ad0ba9a999b9886df38423ab9856b0ea03d08ef4b25204cea8d7b8e47582113f48fb5cf39f22c4a513f46348e78fa60b025f910f43b16a983656156645eda551d722d3c3b94e95878be00e132a23305fee2836918e8b786817609e845bb80a0e35121b417db67f075e8a37f8d4e75fbaa1cd564b3bf6926549a2fd817e0129f4954015238e10e9a138f0495051c9ba61c53f17cb275fe2996be32d4d4a7d6da6449b44135597abdc3422ea5d7d6eb3bb6e66fa0fe9dfa5a8914137856d2c5ab5c9e2377682fc7cf80fb4731e0ea6e851c3a932fbe7c2f5b06b318f7c3f71bec3df59baa8635bfb29774fe29e246d71376f5641375ea10edcbb5c885fd59eaeb854915c55834f31565897d7c4167ae77a57eab77ec4c7b00bcdd4925ce372590aef470a2500561a29156117475ce40ad16adc868bf3702cc7feb14ade11877c05d03a45eb2d074883c153ace4733559c840dfc34b5e255af3a1fe6554e9e4898eaba1743c351c1c59840d19e2d48136b272341662779e5f89567ad43000f929b755675362342d5593eb03946bd942f4eef0e8f4efb32d2eb20d1aacf80e0e62bd9d3073a5c4b232cb1ee0c78afe54b44fd4597246880f197216241d411324cd594ea80f481293482b9a515c2f5e06331c9931f3158b23a704ded9f633b540506bbdb85e21e1abe14c9281a7a20c7cc4f8e77b959aef0c3066910e1f58f1cdf2fa75b60f90c25d42d2544cce5e8480ae1a8f99dffba47ee015cd64ed85414980ead05319bf6a4ca82e8bac4e56cbdfe70a4c44f67195816eb994437d58936da476db9fe853fb3de157b99f0067de219747d08e086a58591c14bca052bfd5b87719dd03c02f051fb77dccfca0dea834b38ace30c369b06dcffa91af8a3a5e7c369a0a564df6207ad696a11ce0cb594b5fcf8a5fea00854b6b69843cb393856ca75977d0b551323784ae2d5e7264a02836cc878e27ba4352ca8041db9c6346850aac70fe6efd45cc58a500e84b6a71dbc3b6022bbbf9da320e341a11bab2660c1ae6b8b94bdb6c954aa8f2899a43b0290b819424ee10afc620f7863466dd96d2048d2af7228a8f1184ef3a8df724aa3fd7b50d3544c01749e0fa8ee207b4e6398a3fff2e870013ebfe039e5e09232a2edf13af3a5e0f6e5b1254070b0d8f127add87bc82d467a0e7e5bd7b856928eaa8a7a958b0eb325b4304dcc4640053d52675b993f4f42d25a18fdeb080ede375394b5efd1d1e11f8b4c2f309e34a3dcef187bd765117c6bf5b7d5895c90ffc31e7621ba2b086f24a63ffc783e3a7689363ca397c770e2d1f700eca0b6f9849b205471162d00e0848aeaf6c1e523667cccfeaa165bce4f34452323090fc5cafd4aec72a4e294b4d3c0d82b6f9ff2bce289c1ca67e97769e7c6f4eb28eab6cc837684ab8157223045f9e4c3fabd262a18ccb49e1cd4ef5ecaafc51e7080fff72c449e421abb80d0a2ac43721906f7e48b9b35dc584586cc34d9c51981a5717b348135b1777ac43c6c372d3da841de5d55d1f3d60cf549e7f32a0912f00d3a12a0a2c3658234444856cf12ee6d2e5098b0ad3f75f4cc1c7549902fbfdc1585ad33d3acd17aa1f6fccedf7b81d19fa3c15f66510f2b55e353d24747f7077a13b1ffdfb8cb4d9df6ecc67c580749ec79b150971804e04164099ce7acb3efbaa1de09de16d312eadc37e2836fd3398c2ea3378b510fd2ceed8e59624d014e17e8e0fe930679ee354e64c24c0fdec33694c7bd4805e51d848e90a25d37b79d27cfb55e7de00f7677e1b6ed77a6830b377760c6f489838c7c0be93b2724e7cb93c0c0582420fcb8eb50d61ebdfcde8b434daa93b3c4a9f0672a40a93a8bbf0b05b606f003d38c76e2be667a1db7df2173118d4b52653855144d90ae03cd00501a46f2ec894a5f1c469933eb99a955b499c5cc21d927759db771818a05baf9d6575d353619e06703b6edfb3f5dc5ce1a4095a5027fd362bcba2075b4e4a400e3723ebb53aaa4181244db4cf576ceafd8e9cef5b02a0386531ab58acfab93cd9b08bee0ee94eb02c6f49be7d46b34ad97e51a53a25a2727a3d02f8d3e850a4640f9de25f52219ad661905d408695733b22a3bae9a33a9794e4e74fc441da0f526fc4fffaa9dec9f0843bfcc0f3a6d008a6a369109b4173c233b8403eff67989b66e69a052735b77343f9bc364fb84d2ffddae42a54cebec377bfb26dd32adfffd2c72c8db60cdff8535af01627296503123ac2de892ae9da62a9b573ff5183f981f9b3103332d1fa171f907390b44629f422ae6fd2b68f7944201f5d6c83555999e4a8811cdc09a6ca986cc4d5f105d870a715749f3459f93b2a296d4af96ffb1d9711516d4748ee0e197a57973537f1dd5575da8d5636a8fc036174709e37fd60c0497d3d1300f8e5075e95823dc93df5193d638a3f7cfc2e80a3a44c2d419af3e1b97ac43d3d6f70213c55bddaf7cce19792be6292306e600a3becb02b950cc7533806bfa8a3ab003dac9d5a03832c51562251dd2329d1dac6de85672001e223164e70c2291df176a27d44f48b311b30819eb316533585188c40f5aa0f0c77e03d0445b90aca999dab0493bfc35b6962016b2de326b712f2145091916564f10692a39c5931c60c785a2de71c3d3e8039218c582165c2a83d772c8c5485fb99ac90d354ae2118f4cd0bd6f752c67dab4fe9e7c78c36552c08ec67382846922fc91961d52717b1411963a6817570855bec8886fdddee584600cd1d525076b452719f8a498a108ee0d85328565f9a8898b4027c8a229c68f7c1ec72a79e51cba988492b75b4edb60041077720417f35f46bad10c4a5401c7261c9babf24cbccefd201b1afb58808111b75fb2b8f69cf2959a1b20636f4dc44c5add0cdb4e8b52bccdadf9b04ace251b31a31548b7f09f2aafee668aac418282e9c4ab0b4f460062e15b9624f75895bf469a1f3cb04e84ee231c53868ff433b170b549e615a42effc5854a5da342524795fcd18fd83ca00cd1657050dc255e8d30691768101fcc4d9014279be8449e21ddab5b31c202f6955eafe634e6ac6ecf6c73516451766dd8cf0ff921c59b765a5efd2756a1962f56714fcb072bb52abd314fcc9dcd49841b1163f855c7d378a911534839e6ca70b25375a133cde919cab61a6c7d0407796a403b5d0c1bcec5bda8cf7318ebd671e07ef6c42dcaa86a320bf6b632b2f5a4cec0741ebac76c10aff83c9b960543ba057a2fd4dc01b078a50fecb7eb59cd3122a91ae343396a1ea6f9b86f9487758c658b683269a1b5c225f43f035147fe36cf710423d64f64c4f75d475b95c0bf561d856c4c69405338f5ed5fc434812b7dbc17a19c8e91ba8906aa2e6ea50c05da4a3d30f99cc2d179fd38962a18828bd8974753fd9143cb8842bca605377cb2b71342d14a34cea52d5b3a0ca1813e1583db0072d7f17e5d3a424c4719270208fdf977cb708a85598fc50f86449e0f0cdb03f948de13350df0dbfa339dccd87fc4887e848b82276193b54523e628fb0860014afa317d4e876a6fd6b4bbc373be54ed887d893251447f737ca800dfb6b11336c434f665788448ada9f961ab0cd912ebc1f064ebc92b399c5de2ba68490c0ee22f1c8e63e959046e31e702b88f4a11c524b3649ff3ae29ab4a3b065460fcb9c572a3798b4fd9335d679bb40ecd6cf87c55c747787ea53a4dbcc113cc49ab3eb27eb1879c9d4ebfc2cd462ba02a3846f388b77a963fe0357bb3aa7ad7f6cae008f5be2741b9e383d94fbc465d0d13d0bf88cba51bf05c7c66086b15b89f86a1bb132ed8ebe8c58dec1b5c88ad52afd52d1ffed998cba1fec975eaa255c9c3db75ec47884142a205efdb94913f6237cfcea4253e0e9886e65ef8c195d83f0f357cca64dd2d240dc31929c48788f7404373bec207d490fe8357e2f226f86a7423275aed16cfce11c2207252a375c1b7251f2588f21f5167e6ebf9f7165a18683788a8603b99a50d4660aeb212b52ff0228f179605ffaf2c6303e40f27b92545a7db605496e431adbc87e7c9b8c4f7313742355912afd2dc0627f9444a1cef39c480388dec5d8953f2d0d77e884457e226f21ae3be78f8ad44143cf955370f9f4f32190b5e3ebddde477e719787da8a955142de9bd5aeb052f48c8de8a01cf6bd67fc0826c052996efbd3ce0383cc1d75fd3472e9cefc1026a67bbd9f43c3f2fbc92f67a041df846b4a73fc9f8fa18bd624b5a6ceffc03a449f0812c7099efbd0270d35880c122208caf44175048676f28d43ec62b38c42b275cbe7386f05194f5e43aee6d9cf282628fc19236cceed8ce4249969d938165d5e84410f63eb38bd37ee9bc5dae882f6d9e4ef24bb04c72c2150c0921ec3236665949d06fbf48b99e0901dc9d6d62b6f82f113cd8e115121bfbdd02acb96d20477b9dca524dbad9dffa222bc86a9ffa9c9dc00bb6c2223c8c30c2fe8b3ecacc3c91d79af6991a34ced60be9dadc95f0912a2aec3f7ac287f3bcefa4732abf11f416a2823113b46782cee934d5d6e758c1b4c326d91e87bf3de6aeba4ce6ff9e781b63fabbcc2b3884cdb742afd2d85e86e14a47039be38288b878019c1e5548d95d16b64862049fbb9bbc26fd3eb402ac56f2351e5106d82f607aca1d7caf9727758f2a5aec64d1a8580b417084e88c766d6b7acdd00569d4faacd30ec73877c693bf7803ecc13c68a93b858af8c0bdcceab00b3705d852f2198756d2a74f3b71f5fb02c621d9d9e7faf095e744dce1b1eec19f14174599ee52075b80db2cbcbcf272a2cc949287bf957c85912d16542e1826713e0295c23e52c17ed3c020a99ab92eda5f680aa441dea78f8c438e2b1b0f74a6e1732013077222a579dc39f5666cb87007cf40d6eef19dd8ac177366fc768d2c4ca32f5786c3d844e56978f3c5e45d34b7ee89981aae49e1089d9c548eed403441249e3a1193e285e43da9d1fc58b5d5be99389e9a29a465d797c14606cec2551787c24bae8869ba2eb658e8aa39c863b19790978ba9855881900fdc0701eb5e733f7eeb0e4c3e448749abb699e73db09d996219d6ff20e8180e47bc006a1c3fd6af2026689765d16ed548a254ebfcab294467bbd3f422456a691615609de4bbc4ff9798de63fc4997f90f43d188ab81d8edbf999ba32405c2e85f60f599b0c3428eade9c20ad2e30e2d6d5e19df2161a7922534c351684473dc83418eef2276a7bbffbb0772b3cdc7c635be87f6f9381e257e939620fcb33cff9c4d39dd27525490ed14b351a6936d1d7b8700a943e66acf0764c0e4f8619aa9adfeef8c8f0403438f2fb340df991a536924618c9713b02f5941c53d772664844d4a9ab59cc117523d129d722858295575182d7bb6fc7e0add67ec993a1228d68e3fb00ed6d00797bf915823c1929354e66cefc2001048f7e79d572498dc918fa0aaaba2260b2461aee7d86c7f882448b44a05cdd2f9a199414f1fd7bbfec64f993ec92dd792ad5c680edd869225453427c6e6e9e9b9a3f8dca9035eef4a706cff48b1394579feb9eae9253e4b133703d8b016ce1b111d645f3b2159a897db81f392ab46962e0d97d8cd5a41b110cf7287783b9706a9229912ff246570fc96428529baa13c8e558652168b72947ccdf34cc52aa802b0de036e9b8efd0c38572c09c0d8d0d2156d7f9fcf6b640cd5d83f8756b49530088ef4c83220c845555f7dff477d798893ce03b88a45469368c817f03c9bf2630ee51e80be03a0a712dd23eb5890a24dcfca90dd676fda8f7cf13dcbf39636ba249d50337e63df36d341d8d9f91295ccf755385f1e0a70c1364be1b640a084f9490ca4c7a21a6043f682dc3cb1e54b694547137711539fa66572283713254cd3ce7c9953947094d26b671abec8127c464917608734ec56874ee74cf2e6e0788c21324cced24bb2ef71c961eba8ad0fa1947a88c3e3a5ab22856de1b237cd324ec8553cec94d8f29c0d55d2c98106d7f8bf51ce576b3ab051de95747623cb75f75802e99d3a94f5bdbb077af2fd7b7ed3ddedb859814cba5875415a20163ef8759cdfdcadbf2f40b316fefbc1de14d38538397aae83573f8ac32aed433e9152a08768070864d102df652c4a3b4ff34262a254563cfcfabab795604654d816f935807f3785699e77b4e4e1d8b9ba1fbccf9349cc0b6318402e092f9f4a3a7ba1a43f7a4279ab511a580c0bf0834219b1d2e9020085a242e4e5b86558fcfb78c0cf27f657ee426467ef629606098f5c4f351d7d87fd464474fe2cd39ef11cb086332499e83392cccd028f25d60dc3f9b738660fb9d8d56d9ce20dcaa44fe380195833f7d00d98f1e0cd25014f7f260b7d47268b73701630df51e1f3af6f7986e0e8b47736e943bf787cd5680042e5b5aac0bf65c293ec0276382b6009d063715a6f62914c34ab540676b5eecc693763c6e33fdc932563ffd0187b5cfaed4b61eb13602d4fcdeacfacf8ac8aff4ab062790402003d18a069cdb73a63527ef4ec61b0df1659fb1eec04bdc5e2ccd922921fbefc32724e90c6a4d1ba238c191fc941b43c9d547d733c394134d60115adabe9e218aa73373809d9d00eb685275e10ab8f9fb3cad65d3ca18186628f92cb759249c75a375dcfa7a5ab07653531a922faaf89628a09540bc8df36875e5f4c0da9e47179664bbad6cbffafe3f9af99bccc3dc54dda36ad2d3ad087a58e32e6a4cca0e89102f6acbd5c5d22ffbecf144348d1ea60b2719f99f90fa49fe2df6d77a87d4763d4578441561246f101bbf14fb7f743b867bacf19005e3f797675d46b4fd91717377e13f7a8384406e091b7fbe9e7814115f10a1a970c361a7559702cfd873f561d3aad9d3d02a51333e65ba3c5849c8d2b11b096467cccbe8df1442b750c5fcdab99d5c4961dfc82ce3a82380a562ff73554729b7846a1f3481f11cfaa3ac45d36271f313cc2fb88d491f1c0530e8465dc17775815b7fde8033107ebc479d3d15b1365781b036d1773aff9c6072633e2068fe0c680ce7de9f5f445b1087484bf3d432bb0b0ff0f6112d2e12f29e281101232f8464203162e84938b4805f04cea87cd6f025b0331cd7bcfff2d197c939947ae044f3db8110b1417176b97eba5db97f296e333859b1c5944be988f6380fcdef7b00ddec8ec9c1b246068e8447cdf28637debc6e3a561846f62d68af36d10de13036e50ff46a81ebc654cc4e74037144e4a19cf237ac1180f1cadabeef66c9c43b04932f7454ac8ae1486ec5646c12f62c00cba857d8523dc26e013170fb19ac7f691f42fa56185109a55b98f6c62f55d8f01cdb4d157e12fa80fe25d5f9894159686833632695d463e7c8e8c74f9a24c9a1d2c493beb11a77fb9a9f571ce5e15587576bfcce0ca69380a9df76136b425ccf3446880f1898c28b6bea32e677c5ced7073a639102a236897c3bea5336fa95caec8a4dd613b0ad5e8512560797f22ca234facf56bd9ad913328837c289f2ce868cd07125ee7d585e21ab65bd2bd929e49039e874f86fdcd2e3304df96e370111d59d280c24d71d8ce5ccd3b6b8ee0eeea8213cd13d454bf3370a3a362d2847dca3366d3a227235cca39a4c292936e6fde2100a249c2b7015f667e4be593ce5c7211957ec841c890b228438284ffb42ef7b3fa614375c9e5e2e9cf4d21ee5be0235f02a6ec62a7c5582af7bc5fb192903dc58793fdf02ad93dc1a001f7b68998be4eab71838995989410af893d83d445f3b0fe90f718bdff9f2eada6685248d633ae3ac55c4b4d7a5ad369115cc88d2ab4d89b3dbc3fbc993e17c15f617a291b1a107857038fbe3e01ed3d713b421c0c76c8b94caddef7db944d7d46acbfdfb6477e496ff159a71385b732d063235c5b3b675ed2195bb075035007ea4d0bd0c6aa3bb5e68caa9171933d83b110553be81af6fc70a8ee7767fb0a708b8349fd641c227013d4d66526567b442a3af66af656e0f9ad885aa376f769ec48477eb21e140692c40ae8b811f74876cc7d9073fc221ce73975a32f42eb0390eded02c03b46263af498c3ee0f3c2681804876f90b6af9e3ce714ecda59acf82a1dd8a8ef848c5604f94a2130bf5b4e07ffd557ad723b1f11f2108d4da03cf1eea197d430ced9206026b9369488baa4cf9ddcf4e106032a9e5624cf4c117772f4f9706d879e2e5262e762fc3874760feba4c601ff1767c5ca0cfd2747f91c0a75495d733c3beee436cd2414ad92c9dd5a810dcb8d9a5aaaac8d5d647ce27a8f25cf12c01c54ef793337c3a077c39ca2cb2ce536be619f5a5205158ef719afdb20c823675b4770ec08c857892723b822753ce43a710f6e5d1f82f53abe9448553978388d87113c06651b7ca529958cff80c8144d1e4003878e16bb50acf8f8916d40a3fe2202d64c9e3af80966ae1cdccef4f45e444b78e1dd86e3dd62fc600215794a636753a47b809612ce3ea628da9607a69e0cb10e9a9cce00f4146777011f422ed25001467ad2e2710db11f6ef241d8ad46aa7edbe750d135f72d31c0a4e46fc6b41c5dd78f35a93d36db13980b826aa38b8ab6af54558ea412f5b99dd32c66b7fd4fbeeaf55d1c08d8f45b11ac9bb961f494378cee6a1d6e453ef0b6d594868196c293d10b5eb75c3c1edb99e850db300e5fdb2f85bc29557eb6b401807a8b50564faf075c6232ecae95f2e837038db035ef94e41e1605fac1f8f95792a78d58e5780b1adb3cef95caa2dcf7f2f13aa08227594a377c5deb3215a010dc2244875969ebca37c71526cf766b43b9d153509db15a85e33f3b94064ccccebab83d05154ad1f48fe0314d75eaaa384fe87fbbc9bfead057c575e6d77bd9ba2355f9353924c2175541c3f450ea7b5318a00a4340a8ff0c86d8f8847b2d388810d4dfb4fa2c48115b02b4b8bf5884ae58b07038e7c7241cfdab6b48e9a8b4ee22821bf8750cd6d7b2b9c5c510222a8bb0b3a4c1d1103e027faedfb2291cf33f8d2c4367bc3305f3ff05a05fedbf4db7eb81a2baeac068d2ccb503f74cd4a9b758037928782bad4033e78edbf01e240ab3fd7df68ea024fe031ed861320e7e59e712fa3211bd1cf0b3cff92b8da874a7c3c02f2e536fb44b023361f7d32729f2361b8f4d64b4b377e8a861365a171eb54e03baa32c09b6bca786b00737fdb71c4ea1de637a54b20ca98a69f8219dd01a01a298e6e0d36918184363f767d990a60bd2b5a1cf9101f05dbe209fc12d7adb0976452a60543773dcbcd13a365fc6147cc7d6a85cd29135c3dd2e330d2b37e1fe212f6ebed1c868c39d3c676aa067218720a2ed678a0e4c6bfac0c23cf60b225e30012db65c534978951d8eba6904303e940bdc01c7295aecd2982f766971e3399b71109b6255f7af0e1b368e23c559052f8dcc370c8fb1b340d8da7a2edf5686142ab8e421a9c4323d2d5a3617f19f48379c81cd8e5471a55c9ccccbf8ad5ff39181b656a75a8a6c474bcd6dc7ddaa2ac784414404766eba9053b747c3c0cecbae1487e44fd5649dfef1a1dc0e2c0f065294993e4991a28c654d1178fe1b835e26f2a707b5086b534bc38d6d321b827a7964e0e06391ff03af1df58f92349b8a0148afc8e52cb1300d353b11765b0729f6124e52295525df8fc9bce4e88ff095a26e8d7bdcb847ffc9ff5102f8745a86f51070267ce5e32e9ed0f9d804b6a3326bcf1376b6d59a662bfd9f7bf79f887fd9e01fcdc7d9ab08f220389ae090a10d698c336d4e58a0bd2f2b541547374d02df80394d8198b5f197542b5bb6262d01846f9d90bc4ae49c3a5450f277134629186c6631597a0f95123c1e3f0ab75cd0c67a861ef26d5f54e2c49ea004de01b7810aa7b73ade68fac0b3d0b2060210cd8084ea91754a7feeb18ff866cc2dcd0c0e6379865130fb0b98e33b0bde95a413dfaaebdd89dc3d4ff9ab177bd407fd4fdfd062f2f63965be9182033c95f72832536b2f71a0ac91e69c8c0bb6cea26c8faf43aa2d4b2695f401ec362371d20617ee654ac99dd50dbbb65ffc11bc38ffe4bc1f49bbd2f51024dcf67f40847e41e31484cc229c7cee630965c8df0a90ad76c086f7077d82dbd6de1a5fdafd0e0afc1443ddabc1e36e6cbfa34b47fad1db641a676fd7792251b3cd3612c5b9aa653566016fc890a2f2c8675cdaa06410d61a55ff9f6841e150be1ff3918b1fef93a1bfeb01406b94c31a970a5da598d8d0a683282ba1fb5c18d4a69f120beac22e9868effdf3975d2b6b171f7edd33c1e554d08c7e1aaca7dfb94da6a5b27bb8c7c8c05f1b9fc2fc9745d5ad432a62322826701e87f467751fe67bdc60cf6ff3a3850add585210d9546fe0b075821ef69ee1b1738af0ad3ed020e475cb4310348903de0544dd3e2472551a9b3540acad357242471a1fc748afbd77ecc57b93cd4ce918e20b2fa3e7af949662fba2f868c100df94c68f0c75c01447d4a547e04968b8eed0cc64ef468aca90b5d37f4b9dc9425cb73c7913ba854349bfd01695cbed94fd52f97ce72179934fe60118a0da62a0d333d7bdbaa92767181a4086492e16622bca6a06d81c43ef982ca53e67618de6","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a84784d57c9fe49f5b3fc2b8d315fc67"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
