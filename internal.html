<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0326c22b5881ccb4833336034bcbae87619eebd9ccc3a0d730ac67dce9958c72495ce2dfa945acc882974fb3a65f98247a254364151f29d564dbd5b704a21700fdcf07a3fa63ecf921cec1fd915750090bf7b4cd0b313c8c132eb5a81938f9fc84bbef94f10d4f0b18c48eced90c769d15214afaa6199ebd77862ad90127d452f88987b264a17c7c022161e1f95adf850924707eeb83f632024caf7cd497efad26b5537b4ec3c38a1b6f72346c360885265653b463a98676584922f7e2bdd466ee017d9b580a40b349172986aa2a3268a979663af8e51751cf0c78c77cea7ac41b1566065a660776b2333c64f86cec6bdfb13534b513464036e64d3c471b899f30658aff7434d9b1d2e793699aae76e4bd140d50a839205e09202dfe73f820dafc9841927b79509d620eeaa720ee8455223fbbcfad6946fcdfca7dcae316d47d9f56c935d77d29b64479e5ab7944792963f1318b86cd5b5845437ce751553be05e26f716c6303dc884c4ebec11c0872cab40af63b84f180d24eab67090f7fdc21b159ecc8d66ab3a45cdeb6a3aa54ee69e86cac94079682c5ddab946ed6bf9d578e3e30a9e8cf3ae578b3228e3bfc9ae77b51c03daa246880aa92cfa70ae7f115819706b23ad60641b2afbf089df857eba33b1035b4d5675fef8a596b119edcb2bca1757357a21d9e94618783b833accece811013230a43fde0ffa1ec1478b316a382737a806130f6fef527b160e8de732b918d259ce301000b7a49ceede4e3599d916bdca2e695fd284b11fd1dc13fb1fcd4606989d4490527dcbdccfc5a52044a0e2245bcbb6dc4ebf8056afc3c35331579f3595a4bd8d313a10f5f01cce66cac3b9645fc2947935e4fffcb6814a657e03486f1b3b14100c5d852e5688170b823f918b779507ab13003a890754ce997ea99eef04a590357db891cbedb79df17c872eb2c784a88ddc22e8413acae29c15fcadce08e20d29d39332a9e1959edd21db1042f3dadf4146cb93d83441dcad976f34ba1accf5158f9aab27d1e954da5999611ddc423f7a5dbf3c9cd13171493d3058ec8120b95ca6433fe4798041bb682925b72d554680863d05d533c07093d44c962b4557f96e2ff64deeb6924c81753649750db8c662a3927384510e7ded888dfe7923c7f84d7c36efe13d857b34d20e8b452b2c981d3266240ea068822b01147e9f3bb254b2741c8f9d59deafef2551eab3ff2cf2e80885d8282e5a63c60f4c0d74100779e2c1315e7232c286a7a0f264cbe077ddd249883b8bd917d2d84ff147a9bcb0cc887436de724291d94cd3a9dc42a60f7e9d435a5fbeba7e8b802d53001485122eeaf7adae51258443f230c6e704836c16a112f0f7405bf27c95ce11f7ff1e44a9c0d879f0aa9603425cb7a4ab562ab9191ffca9f11c11b99f46473527ae40ac6a5f959c2960b0827f574254c2c6a6c05321b7ebf49ea3dba3371658a5f438c30645ef210860038d3e0d95357183ece60994482f5088dec833152e5aa39160df420f397554bc55f19a9caeedd64b3ebc085cf8ef2c49098b89bbabffb0bee573e0a774f92f2edafbb9349c5b436ccf0fdc493633a1aef2dd34e232ea27880000706cc3906341783f8fa23766c587d2477dcbacf263069dffa4249965dc044f782460d2d7a779b7b667e54d0d3ac72cf1147adc489fa076e3b3af90c65462d848e113c738c20b7467464b386ebc06dafcd26adb7e5eeb0c1fdd3f220d961362c517f97ec0aba1313d93fa714654e7d6708a8c3fabba445be093a3fcec37e0216170e3c87c536bc8436171fd7505c0c561132c6bd374276eebce66451b340a547345a494c41c577c4ac39d452215aedc354748f2a6723a07f4fd8d774f3b8d16319094718f1e131576c8f1c9a3794f06200901093a3a36c26c7490e5243762ecbc91c1451ebeab3754d6659c2200ca3bb863c3b648309180fbb2c9cffd622f8f8d2a43eab040bd3dc2ff0dfd97c865784e2e284334441eda376bde82817bb1a6360fbac6d1437c56ebd88c8dafc6662722e47d6478d95bf1521b71a34aba3621e91e67e39b72486627bfe1a3759922408b7d08a540033afa88833c7942bb3515179fa83ae42a4942337ac9a90bcf11ebc01c73bb81ddef8635a3866bb007e7a906c5b07156585260528031b799093046c6389a3d25a457691ff8647b0a0708f067010724e573552603b22ab9e3bc0efc2cd24aa341b7968e92cd17477bb0abdd1e3145d8f707c10f08a6d5d141db7d70966183b58f6e80c2d7a884837778c31834db83781b9fbfe231b95eece35feac5371f70370cba896506e196f6e024326efa49aeabb094815798481f1e6e9caeb1960f9afa59af4badf50726a41c4d36eeafba8b504caace5887e1f53e3965d932c88a293cd1878e3fc32a24f487229dff813feb41354f0e737f068753360c0304d3235e97ac05b5fbf186bead28ca6a4c8189658946584f56ad2509daaa0e572de95a8d48b99292e44e2619b142fd51acf5a138bf20613f90a39d363e9bfd4614dccf8082b041b5d37b68d5f487ae2dac43f24ab0c0289971d4bdd602150883a9cf4c9dfb6de18ac19a7f526f58a413d763f8a9b4d37e4ba9dc363b64e6c56d809ebc9d2a75d1b3eb8501dad539af77b1a328d84c31257fa7c91dfaa134fc89d4d78737980f2c1ea35dc2d7e0103608e5d05ed811e54df4a810338aab97b18db69e8f8a9c768518f68b3a9ea1de497634a2440997147c3e49dfe466fd33c719b470cdc1acd53951ed006d89350bf8d5d79b89a0700183e75862b1585a1c84a9c2a8376ca05f5730cc4a6a190bbf5154f83c4e1337508e63aef2ff66d6b3eabb2af8c0a9c3c39363bf33ec7b8ff778fc7246fa87df137afa0208a5858bed905d4b9d71b75c98c032fba9d8c939593f34b7dc4cc8eaa0807da8fa88b548fe5c9cf686550aae3028767fb04fe38a68254c737b3a76e99e316fb7e82945c37c54a1a30fb6649a00ffac59457a247860f7eb9f69ffb917ab334e1e14e8c782af65287e4fa27f081c07015459ebe11cd8fad2d6c0b983ce4c889fa92317419fd7fb0e9cbd36117fd4039f7c9c640f6bf7685571ec15220314d548c6c8c358de12364f12738dc587e0f1d39dabda2b04beca007327bee307d8edebcc4de368fb7835cc7114ce28ba48c797e894ce9402a54d3e8e507d5fb4a016a435477bb8c7dc78f2b93594d8fc2f084d6da2932ebe55bb5262417ccee077ddcf1c5dc1f58a7644af86675b78658665c22e3ee015b8618725f7647fa6cd986187e8e343338fc68c86676d7a2ec33b1a7c65e13bbae02144ca1638a1c4c025ba8260808a0cc6e72446aaa8eed8ecd60a5caa2db9ba7d0f16a0ff2cc90f990290ab56389e9fbb5434b91618fc7fec72670154beedc78c53875d95b73e50698efaa89f8304d553d0def973e3a479931532143b3a7ac77c3bce5f365ba1e84ee0d67d281e28be29babaf3e5c4b511499fcbc82a4e63a2027039b604d15a0579df62cc401fd1ce3f7c0078a7522f041bf7cd40dba2040f81084042134907f88f69b9790b092c3bd740bb1a32b935a7dbe26506a18552f0ed6af9416c88cb94619e082c1d19fffdf55f7fbd898dd68a5ee8827d2ba2c5cce078083ea862aa78759f7953a2519e33f0a3c6745aaddd32496acda328e40df20898ed80ca9f2d78675e907dc9f6d537c6efdc425bd2dffc35274634625299612f3822ecb4b183026cb11baec67612ca01e7135f4481b2ee384c952070b5100dd62eaf754636797a1fe63a79c5be4575d2abb7c4216d4107762e460ce67248a1a7dbdd1551d42f5cba9e41cf46ad37350d66681a4d393a240bf45d24b60b7d71e0fef7e8f9793bffcdf70abd7c13c973898edd1c4e6a1bd5da6ce863eb995731ab70680b952ec39743b682a8139bfbc55c486a5430592896cce74e2408a9c647b43939e02d1f6dc21e62e9ee9c0e94f863cfb8358d0adefeef1cb8bad70b41fab24bf1a1cd900840fe6da83ea4ced138d1862ae1e40d95daf87caf3d9a2b39a01c1eb6ffc328ea445b578ab83a61e893063522c50820b2307ed196cf00fc2f3eac9521e84a162f9aa1b843683c415951a06922bfbe9c399c2d59c735081fcfd4735263269cfbde731aee3c7301cb2042529cecb88b69daf6124e5d58950a6343d978e0f79fbd48b22b0ff845008859ca627ce9562d61c747a42c540ab833deb28ce705187764a7ba9ee4f07323f435ba276d2759ef151a134f57bb98aeb500e013cbb0abed012307982fcf6d126ce90ff42a0859fa4553182f6fa79a486d55eb36a96baa6fa5931c575f6ce0d5aa8e4997ca3aa86c28452d3d28f0bb3a31a9ff85af23f7a76db88b991d4c678b6b9ef95ecc886f535c4866928fd48c1e9125146a507cb9f105aa0f02b43d7a6b27bdcd8b67291302391c02a1b5e856fdc9cb77a828c5e7d47e384923504038393ec8293d4a92db0162968f958c083a2a8394234e1c0284e42a45e65239248314c18ff71d8b2eb21ff467b22c517439f46b66df32a335164713b808f6296fa2df2b96b23a04a13c119b2552c8a82d18f3bdd2b7fda2c5b70d9b36c89d207ddaa462e6333190c5197ab9ceeab0b1a0ab19cccf3c96968e0aa7a20d0f94c43ff06a683eeb46da9967088703972dc38febce9bf4e0cfc672946fd918ef56067757061adcb6af1cb9b3748844358592fabcd755be71682863b502e18159a5b6b20e6c136f8577a5e971472b1cb801d23ba9fc75bb3b1a439999b48beb3fe35bb8e09c64636883c69a47b3c256ff02bce0a681913e51a08aeeefbd490a2513d4697055edacd6da57effb37b73c45edfd44cf9cd9c0c958bc4c60ce344de39a253cf0319717de9e1d0a6cdfbbec264354915c62e07ac23d18a2764a23505b642827bb897e9b8156d8c9d6719d087b3b36505fb6dbb67e8d4fbf9b6cfb7da05e3e817c5f1044c198c3a63c07369a6bbdd786c4edd21ff4d33d0eca021a4e21e5b0618e39fbd4b204cf3742e536fabc6ac07120af2e034e84810a6524d2d3af604f172cb2e93b207b57a591a6ff6c7179f25f437325f1822ee4a466d09583ddd0de8c0229fda3447a37d1b8903f37ecc63b5997dab4a4eba87a47a5151221183320ad17a1e57c1ca024ded84d0934986c15ade8aee8708ae44fef1baebc962350ef5d420643befba48605422286cee2ac147fb697b3499741aea000cb2cee8f762d4cad8d9d013c3ae10aef1d4deadffb99849c33678ff8ee465c154e9514a6b7e052c3ae72b64595b031cf327a74c627b59396c68e84af431c2405c4e713643ab945f2ad95a1faa87bf7391f67b340ddb461d2f8ea8252b39db7b20c6a8ec1f02407b48d7c241076d6583e6969d9793fa34cb19676a4be2ae21447bbc5f614a3f06b5b73bd1402800d0309decc315a5cb8d6b4a9754d4cfaf1f94ae1392dd1641fa8e779c6269f3c67e5482e9aad35a37cbfe6e29557b84feb7d00da7ea2c862d61605d7e7dfdb12554f7829998f3b415e1f38e9b5201126a04aaa6893c6a8449a14a0457d3a4b17fc24ff89e24998c2f727472da4d0d67f521fd7461783b461be34f938fac2ddbaaca9dccc078cf91aa506c961708e695aaf316db6afc494d3c355e293f8f7646ae6506f52d9a32f1589a070c816eb8f8fc47d415205ea35059bee3340b6a3de7af34e08014cbe3ddddc3d6e1d26e48d08fec932582c6f1d7fddc5cb836ab3b25aa81a2870d298512833704c0a6861d8000b065ef2e483ffe636cda5aae7e786f01f371560971cce7e1ae81bfc8844242468c5b3d409c74b97c2c2b0979641a74509b44d83277aac63c6b050e2b90e156da1129f46ba8f10f9e86a23ccebff3c2d85db4b57c6c7b370331bab2c80f7d64ed9edd6fd5ea994054ddbf9f928ce64fc50222a492f159bbefc0ef66b17508553ec3e782bb95d2c43aa4a49277205c09a9bc233f8910a4b20dbf9fbe43857c55f2b737b88653b040e975664adac3575e80eb64c30880daa644e83f90764a356cc64e7d73957e982ada50cf0a8fa31afa5f3b6ce7fa63415c2ba98fc1bf0c0777bc20b9a04020efbd2b71194ffcbf80c4e617f51455ff432ac5bdcfa92bc5b56f987cf7839912acb0cfdd27fa0e8d6f185127b27fd08b5a5273c2f5cbf6e17a7e54499476e95ec6586a4c6dd4c2675a4689f5b11ef66f7e2e389087dd98cd9a3c950a10a86d0176fd8db2ede7ec5620922ed810b2eb14f289a2ca48e14abc2a865fc78c743f293d5c3d36b85115e80aa531ab2bd2323a1e90c56f5d13e4ae205f7afa8dd26019a3bf4b6aad51cbf8a8f6f1c9978b468f0afbd7e305eef153a9fe711803114d93ef4b06b10a454454f967b45ca16c3077f678d7121fa8c4aaae96733c5d6a68abeb94f216ab06178ed27c8d5bb69004dfcde20a14f2a90f97438270b9713b50c2e94899267ab51d7ac73c473dc0ec2386f313d73afa7a28ea3c88f0c836c568c61a4c98e0a52e8caa6b5d5dcf0338fba287b80f86dddc679958f9c8061c354b1d537dc397cda8b80ade336d1a952d1bb260285c9ec86731e5e1d4c11981c9e2acf1496450f47dd4007642050bdf5f05a6df73cc3e309346b2811619acb8ec3f67315729efaf2c4419f1bd9f6e279e1e3d100e7d39e0aca9d44d41eb7ba934b9b19711764b166aa8e118dc0b64516ac42bededb58beab3c673cb0372eba736d679fac0d1e07ae431b49ef5a26ab42c0ea06c254d2c9a4484e9000b58e0a6262b70f726d012a2e360825940fa6c00356934ecf3847b21693c8650f2c9cbda7a993184539593ae5ae39fe5ef4494501a30246a42daf05f066ce61d89c9b8ba49fbeb20d4633692fd550ae44f8e65d62bd8e5a14dc88db16c752e5fcb5af48f262a007a8f820d3dd4e01ae5357bf2f18aa425f72525f9830fa72e58f3f2ee9c3ee16ae803c2032be3ed242e7f3b2c81a866429c0fb6ffab1f1c1451d806a44c035e3c261049dc49e7ebdec9a56a07dba12f289dab89d33545f84f772f051a8338c6f5998f7cc1c0dc3503e0e37cca4d2ab54c60e6cacaa6ab72066c677672346198764157aa9a74065df997a0b028caab77d8057daff7c5518f51de3c9f89b90e461e25dc4345d92c404e2a349da701cf99c9c8a80d717660bae7e0eec71d14b67393469f1e524e935a6aa85a28a2de60f3cf07f45b925b571008a2fe0db5925a59d8328a05ef4eca14b64ce49964f809e437db8c3f48626da4b68c1d01b870ae7a8796356118c7e70ee99bc1eaa5a0957ad27adc93d71371b8c542e38ea257a472d815c3e9092efc07571b6eea8efacd984362245dc8396c3d57c71734a840b14c40a36d04791a663e0710989e58dc9ef98ae28d8d288f46b883507b506e1971ee45f55f294f2174cf1e70fad40b1365e860f8ec44a403983c2011d8dc81a3f0267a816852d49f72bb71d8048cd81ebf8fdf0b2cdd1d76d97046cfffc905ab0a1afb0eb597aba3c7aeaa88d3edb99c92cef3a99c70388c789bf2552c2a8990c31a4cd5ad4f3bef45e8247a298aad3c28fde61efd6e3c0a9e8e01a54ab8e0946aae135810da7470686afe05bb9651885c3aef9a5888159fd72d0adde6c472786e5731ab6a6da3fed36bea7e065c0bb124946712da527f16d66ff624805030a604e0a4f5508d33735d760c566943653cef5ecd36cb3556a2a878f9b514c5b5952f264bc35cf2a3fce5ef0c54b7b85bf6dc5c6dd0c1f265e696254455364d9aa30b3aa211751a6a769f034376e4f32a6d777e64bf3bb9d5dae7d463599676f68151531c9c5526f0281350f2a19a02034f13a6bdc286d1c4a9eac01bfc41977d3054fae459469b08b8638c8941ed16e7ed6365e0f1ae8e59765cf7c7f2e7638d93b894c0bf01faf65e72b68a1ecbd351088075c222aadbeb7684dfd2f6c10bb6cc8c2e1f4466cc24e6dad04e96c72bd8990a9136c716e440a54028826846881b946b1d2e87cd0be4fa36598865ca46285d90d3c50dca84e35f75b3dbedf42467df8bf007a15da1e00ca985d0e78b71152b5cd29729f9ecfdb01d4b68d83236b1722b92c7decb90890ea0a5965121e4455d65874eecc1a5e4df729054005bbc8b27359b5fc6668c1cdcb2bc85647dab40e34096d52309c00fa51d37e424244e10a067fa78a4dddee51f0cd5ad9360954967a49dfbd5a0595825b0bf9e951b8d825e759a89d4f2b3d45110f3effa2d5abcfbc796788ebf6982c68827a826cb09980b1693d8ce23f4d3d2f4d39c41bd260bf9640040c241907cd578ba549ae0a4cd8e3ccd652eb5c4d3be53bd0648f74d777a403f19d43d1350aec985087e1ad85c1cac3245733a76830f8b4f5ff3d4c5460486363c6c19c9f7948c783ee6f5c77ddc4e7f49d4dfa81270dfaf16c70e3325c25e5663530974bb91280d7c657065e73b4b6f6814d5dd22c3b8e6a9cae169f6c619c7d6c847991f92ff68557131ada9189d1e25837fab1e369a0d3114c1dd9a3dc4048a9f2f76ece8f8a0c430b277c6554d78968466f4fdb3e531c9b1b31744250ff3e7cd60ed579c7e5d0ba0a5efb3b289316a5898cf98bc0ba3bc63323bd7338a7049eda05979bf33d16106861cd23d4d6500820bc8bb284617c111e75d3fb2351748781483ccabf382d89f6a0e1a8ef3caff9f82b420e77cefa704dbf04a8882537a144fe5b311c7d3cdd9a34e1224adc9260b73174186bf6b10b9bd5ce6dfb459bf49c9a7ff457c40e04142dfa7d226951642d3430dd7cc6e6791703209359c0a90dd0ef62e1695a7ab7b00c1927ccfe99823a19b7a53b7a3a995b9142098e46ef5853cddccff91d288e500ee51239c79d4ad2e5d24b988c46c2d5eb5de24f64e0bd3469be64a0c526dbead47ad53ec120f6f486a0fa09d746d799af766e59c2f6f128b582195cd23f02068cab46e58f6008847fe6d7ab4b22d43cdac30464eb8a73a65c400d0860dd40ebdc8f0069ca18ecf2137cb98b1dada32876366648cc9affc121e7c0023a88633774d38937fc3cd4fffea4a1869c060f6bf917168531057222139db22f77d6187783852490046255011669d53cd8f5921c459310f4c38743fb7a2d9510ed3e2e8dac49d0f5a9b3eb420f5e86528bb366b11fb7fd106cf9521fe1cd95986b6e0be0ee2fdddc35ae235ef558755ba38ba820e0bcfdd299743ae7edec3adc0c9543503f17c4cceabf15c7c01193c964edecd329ce0dccdd74ea209b667d8348a8767690cb4334b09745fbe8dc0dbd33dc2b3753bc0041da314f4c8a3b96a5a51634d02b766ab6f3b02d943f3622ed3ff55707b2751b416f6e63a37ef11e3e0187a99af516e5c83408843f79340580765e72a3e1e598dbbc68f0685203aed1d42199ea592733cb45e3872d7ff6451508e0f9354297897909e2574e9221c94036c95a7df282cb6427f9398dfdc46967e83d365f371c95f2c7f7943b6261f88a526c52b1625be3b90360dd9c41c75560d4a5c9ce8aaefadd34b403828c47b7cb45ced8792368c593b66d1f4b5b9eb5769ae96f631c3d0be2599d54ed369c25a91b0d0adce486b84c695164aff6999dddb21aee5ebd68902c6a036383dd810050a5e632da414e8c34d6bb747e4ce9e67447b7a91d5692494db21372d9df6b697a85989a249ecbb2022fcea567a0159f8fb3d42f6c404109361a3181ead841392d517b092c6b63bfbfbd99ba75acfefd8d6e99f84f7e61c7cdfd74ab26af80f0ae0c1466e3827e6a6b0b440d9bba8430034cff9170bc35cb841ea44657a6f238c285a5c38e52d1a6034c079a4a7b86425063a93d44153456d44d51210df0c4695adb04c7fefd27a2297b20429559185fcf0da0ccf5ae35f87290200119c1de7fee3f31b8a5a03638939d9f0facb01a6997745026a4785b3f7f799be11aa7ffe3a5a02b191119d1fc50a09ac4090dd2ec6a90dffb14e92e633849c22c271d498f34bfec29ac76325b64930db7a3822c0ad70979453095fcfb65a6bc09c26f4fa51988b03f5dd8cd30ac372abf9844ad4920d020d4c1429bfd4ef305f3a5c50cae9582bd8106e406ccec1111cdd86183295ef7a1ff139c61d976439c56fb1cc9deeac692cc9090b424d81cc4c38bb7dd32b661488e62724e1e1ec412e598db610d7b54e55d3630f7f313249b983610a982d143cdb24884154d60f3be0f325c2d62d91d20b4af9d2d7d3573cd3df21b60ed5c8f88b8f38c6e7439eb00c5f0503a9938568f16f458a5c851db23253ac5afbaa7229c1e74361ab9fe3b025ed2eeef531b2ca2f9cfbfd544f22aa2af574c4408071e7d5f283e997eccc759d84e6acfde235643bcde966bd7adc0ac5f9eef08d217681805d520c2dab564e7d2d89ce46e41470db84cfe8469b2d45676ca095b18fdaad36db4f767e2c5d4c38d8e23b394a77a1c2697db13e782c345d2b2c3f24dfd19e7bb7546b1559682424d9ed9961ffde283b12dbdcf5fc0be492bc468ae94854e847eb4cf40ede828365bdcf9f0d1e19c0e6c59dc1cb72a6e881a5c61a84e716cd2ff3213764fc17defe1bade4980af8881c2cfa48fb6519a30ad2a4952a4df91063ecceee58b5102677cdad702a04373db9ea794dac217f8ce9a0c7118fa82a4a07eb75c927d1d1b26fd9ac021ac395d504ad1b9fdfe4eb05c2ef2f605ad48d6705e2593e7168facf078d7eea78ed3be91809cdf1676cbf9f8c408584228c846054b27c06d60fea8a72123fd36a0f10bb83bd5d4ef1ecea1a76c6c28c2f1938407efe60939479caa6e60de6aefe62fe94f4e60babafbc0a913b7e676a8be63c9c2064834b36afda5f9c95288b7da113a36a9b9d5dd0802f7393bd457828bf272dc2ad0a3d68f439dfa4ed86ea3375bd8b3c49e78b5f1473f7101fbd9ea22db6ada70412264193f291124920d87dd939fdcf4b23b62386c398b8c668ee8b9d5af66ddd4f07ed751d9699f11f121e63a1c1e52332b5db137d90097f4df918d9135dd72d2b95fae54e8dacde39b268b4fa5f9de7dd22b0bece7b6d3517820c4b175e0c8e50a6c9743eeeaa821f2d450e921b8fa12cec225d6397fb152758a32d35cf3cf52827ab25f29ef8f0f32782777b851116b22013e9e53654821136eda722ac05f70999cd78a6a22268195bfd9ed9fde73cc8e2125c917d4c6f5c50d59e6dd2e1706dbc12d1ccc0cf3936497fb7b758c033022a55f1c026c22a9875234a1f6f4176d009be9e14d927eaafc9bee3fb98022f2c05ae0e5b0461e4828fd1212a8dc20d20dd21f33dc668d4b7400b6e04c4f9ed940e2a3f3ff285793b115973011dfd6cdbe50f8627a6f2449247f9469a59c6dbf12202c7ba11e8c7091cc2f4eb1f9fa6df478ad22ce49d5e9e5f9a6d845c38596ea4af7597719935abc83cb34fe56c65a16873b2a699ad2d9dee3c519a052d9d6b485c3ac97cd138c7ee6c2e45d01b4d9bf6dd874a7ff06b8820ff733c1fa5f68adfa189af8642cbb51163278c0c6de4e632262a90b90fafebf296e63f0a374a8b8d8a03bfd430892816b0438231f0b3bcac4699c2444df9ae0ee2cc1bfb1682f4dfb56aa44373232ccda64fa7c9815b95655c86dd9a4674a4d0a0341a95eab5aa99da72eba5b984c53bdf882c4e6fc9d6a497daba12046b8770082e4067ba42434242b6499e1c96d01b2b16df8ce7257eea85859fd65f6c77349c748a30ed6d228a5f69ef9d8cce316a033ff34261dcc71ed787058b561197dc762b9aa6b656b9e667f79b5f00d93ccf5c36abc546570512c270a02bfd9acdb27327c62fcd3b6184a524393391a4aa6e25ed18d568a4d2cfdb204228429f8797352975904f621e1c0d1b40668f77a1dee75e7ca76284de87d4dd2e3deeaddacc750c4bf2d5fa9d79fd60edd29e0ee7a94534cb1ddc886df5d21e04b9f44cc13b98cddfef3d3d7d5062a60d85184be8c64106f4f058a6b8984e8c7a869abeeb4eb3caeaea947dab61ca4cd31780e0b49545e38c7db1b653a26537c5b1afb71ee51f5da93b42893090fa1d03a04eb1656437b104163b3cd05f1d3979d78df392d199c2110d2c770943d7bed9a1a288b9b9308b8fb700a2c3535ca5231a36586806b9f848214d8e55b79dd04359a01d61a69a068221fa5edd86ecee0c1da40b1238fe9944592181199b9ca01ff258cd5d453560ebc6f8aff65107f885ad445a8b104a2b5f2020d0a447e68fc0c9a9da78083c35c489ee3bc3f6badc35531a2d1976f240cc6fbf51f0a00f5fab16fd4b38ba3a6d7351d5eae92c0e31c244630cfe2886668fd6f83e6a6f0871ed1850006860c8b2fb9de1501e7c22d1d58ddde7a6e288d91f5641df31e0518237eda4b55fc7a2491a79e4004dee809cfb133f1b319f5f1e8f8e4ca20a2ddc76309bf71a99e697515f1f2033a837cb4dfaab53a328d1d6eacfd07a7086dcae80ce8d2aae0aa643429bc4d6867dc68b44bf262e6dd9966cf5c02b8e5ba06f0433ee788c198a9b426a845a3d39d503e5c5237f87efdbd07b25c87d964fd3308d4400673c79a417c59b2d2f4d61376a63ac2d74a4ea55510bc2b8a98b95fa65d750fd0fb371bc49116c20df91d80e0f370280c47729bf873726615766fded539fe4d5707174129093f42b40c2935722b073617435a86dcc5fb32f6b21a76b4bde218ee918b761bf8dc7020c987ee0493a85c700744ec8d222163720f4d720ee92706c0ae450224bdbe682f91c11edcd91643aaf7c0d8450c81632d30732a06e4dacbf9a9b9db669482c5b252cfb08a36f16a232d914a011c8f472f5c1dc4cf6507d91f559f4980f5678b7273fdb73da0559aeee7973fb9d6ad2335bfb2ff3eb4792493d632cf51fbc7a93be0e8ff74fe9032c252528e631278eee96c4be767b3b49429035b58f62aa51c02eb4e3f68cdcfff581643bed09d2e962c3035c410626c604cf6596715dd9f1340f798757e365c170d1582174292a071ef63cd1b1f6aa8b2be6510f50e7446a841c5f90c30ddf34abbbfff1e8612a6c52e7519eb24bc5a1578a34112dfedd09cd73cdd1a5b485272c97c2ef6e15511ad493420205b14593480e97f3b4f002f3b828425c19f9072c3031501f8a927b2c5ca2608c9fc3e123cf8b5b9f2240cf4168cae0c796c1061a5143cc8f7d30922ab156c9960e2cf3f36a6ad93c034b78d032a8bccf5b2e0d6fc93740f39284901c5471567f8195598328d607ce49fe88fd8d1ae693aa3739b06e9d86040cbc71afd0037abf20b1c185f7593fdc8731cf3acd416d3bb82b93e934c0b076d0ef59be70513034c7f582a4184dba6ce4919560e912b2e3caf32d04d1e430f1ba8e4c5d1dc0ee9e3cd5258ecb97e9a01a7d7ff2dbd34bd8566a89b85b8def0b45e7478f7aa940b3ec00d4306f318df3e6cc41d16c654ba750de7ebb0abffbbd9197885084049a356ea7e3a6a3234b5427059d8e602d77ca940fef9208efc22f34927ce44f96db8dff972e72d4ac600276cc9904587c09578ea10d6ed0b27a2ec46ff98ed28de0c6e948d4a9e4fe86ca25b4622af69b38dae90fdf2add282163893d96d713b0e5927207e763d442b0ccdcacf93fad978c5986d96b956d84361f1cd1982a1220ce3d9a90e1c4a380683fdf804df1ad7dd421bb56c18f993b5380a3dfcbc855cdb620e4e9a61b66084532ccdc9f916c17d9c8c086166491e8ff66433d412eff94297976f62bfb6192cb057c88fc7fb2c77f682604244be38dea7d1b71f10c70ab682fd0e5065d255b05ac4e5d3991e5684a91477205b39bcb36fbf98c355eac9f63f44bccff652309928c0fdc50949779c2fa4c95bddc714d7b5fec29348bb97d3f2cf50a3e79eec0199b32a79e3411493825fe9484b00d9feae0fe1276f7b4514ea58da360cad18b2ed124d6657a7563715e85da35b70aebd85f417dfdaf1bd3543fffc7a9d3fb40d37c00776cfab89cdd0f3d55aa04d1627ffa533c58b7de92d9e8051acd08032433d41c9114a3ba8a1fded278fefa0a2b9013f26ef741661e4059f365a89f49d92a55416b0e21ad3d6e8f1975c6fda8dc27ce02d12741afb74b6b0b499daff9c9604c7f80a9915443381733d91074e6d97de4c10ab68fd8d26811b53da4004cb268c435db726042d17ab0820240e80027eb31151fb65e03802fc8eb5061d2a3a7b82632f690200957b86fdafcba45c69e861c12fdb999556e0e24dbac5ea1f93943d702ecbb0155bb08233109a919ba2de945e4164d42e0843b0388d58433799a56ec0930a4e131157957b14613eaab26578d447d2efb143619281261b9ae392c4862a4dd87d261e46c2c9772aede9dd303707272a94eca796d8b1da166cb4a0e86d2016a314da692179d5391ccb3ea206ce0b4b6606dee7fe53e0327ebc1f1a6602cde06f62b3fdd4c9b9d076362e88c872d42efd2941423d5ed491aff97da6dd89c6c9d60eb7bb83076baf627606f4b6c41f049ad64756ab769b406b6bf7bc84ade61ceb4b37239e0067357ebc1d8886d3bd0cb1a23b39553c104fa547d3e079a688e0342c492994b9dcc2acc2e7c38eaff9212977fce01021bbd0b49d1bd4a4be09356c8ec980e420b5f387389a04d285e759b250ab52b332e474180a7f63105685affafbec936e70021a2687e6d0f06d6818971fe823d4a130bf1fe5864750dd73b57c2d7eb1f9c2c1fcf78abc13d8254ab60df36a0c337747915bb06459fc37fdc0310395ef5aca1ab35ea89b69514980cdff57416742877648108bbd0872e0ca4270b83106d32a7013dcf77c50beb463aa23acac753b9e00464b2d7191796969a47a663cd685721264f5bf2f02c3cbbcb4b846ab116a5188f2d026c0d2815a88e260389a04359d3766f43b87903950c36977b990d37b8d3526f33c348ca96bcd703509a1b07a6412839e9f0c471450823758b4f2c1ea1391410cc693c4965abf0881ced775ad61c9fe1c7ed62f482913ca9762ae05e46bd6be47b2bf7d11454d739567679b10393749a27c134826ed073c5ef28a4063d687b9cb23e74af08ef70a18e60a98366245d75317216c06c76ecfe7deaec91412211a13b6697f237f2b4ccaa2374d843f9fc2d131bbf38e631c1b66f2bd8b9c22f387cb9adcbdcdf1419ab1ed472a9d0b963383f7d0540d5bbb9e6bebb3154075168c0958f7e4b2bb5036dc959878aa4250bd911818d8077f9597b3ebdbe8670315f09999091003ab7df33fc40fbeb64875a1bc3cdc69ee46bc740f16bda30164fc5a392b62e1708a129dcbdc598febe45c1de6fa0c9ce6397a7467f0ba0bd69cf0450b0ff34e5b848346cada0c57785342128a7b59a7d0b15b59f176536696d1ad5436b00f2e763c5037f572ee84bd045953430e04121f819963e3df0bdd5667c9826e4873ad622873c46dc0c5e6581de22ec001576d42757187d7021269ed6bc5258a9a0adc450cc4bbb5347634fea2b2027e7b8082154e5e3e3d5a7db61752dd1c57e89afceb78b8b8af98306ba11d2b4ff65f2152d10432ca6e083069a4877282f29c5bb7d536d7983eca3c740cc9da5068cd5f9ddd5207a738a9d4542bb327970ccc71d1ae062140bd5592f09b03e36f20ec8771bf2d9025f5bd9b0b8387997e7ab665c111d0ec5246b1a87dd07bfac35b8385226fe5d868c7168dcf4e3ba33f0393cc25c889e5258240c9c6d6bca164bc6263bdd3dc63568d7b9c92708b015c48764b5aaacb2efd718398c905bb510af326354c3ceeb06e3ae2fd7c9399fc8572f18089aa7783f29b87c5221109d9e4365800dffbc049df5465abec6b48ed68478db67cd311a80c2f00ea98ace26ace76bd349ecbc072c583ff6cad9f63a9647495cce227b9c1c89009e279c073d269350404e877dffc641779eb12f1c40c427f997fa645c01114b8d3b54678d6341b79367db4ec4dcc78744c6471e97a7b1e53a7fe95c0b027bc6c84ae19dd7a09d843103841c153fc578410579f6e601a4109fe4d2267c63bb99e67188b69bc5fea019e3343e894507ab2d75a1a81c3a1c93fb6704bc20ba8d6ed5a31c745b0886658f662b98ec0eb358b24a89324231e150c9db40425689affa85b4f857c944c36ae14222a5be2871a320534c044d5c8c0000e17bb1fba94420ac3e7ca847ef9704fc68dc63c96e789e8894a2a22766e73a308855ce46f989d8fbd08e9d5aa43f64c45bfab510d339b6356a475f5667c6070a303e9e846e5bb770dfca2bc47fa99f4966d3f7b255ede525c4c1a9cae981e5fd3dc136cc5f4cb0d54565ad565c1f24d23ce81dc14f742b8af62f0e26c84589dd9e65962a2b9b58394ec3da695fa31edafa50ceeb2f7b945c926b1a079bb9183e81cb4d8ce5bc605dffc866c335fb4da11e0665426cbf25109c708c0c165ed4b902fa0de49b14a834f1ff9ff8b8a6ccbc7f25506a2dae28630750660bb698e62516347fbdd10f0c5ae877c80d10d723a5894f243e7b939d4f0836ae6b675b2ddfc7824a09cdbfa80a4d6bae4b882d99f22fc5305674ec4c0e5cac9775b91dbad11517a2e98cf66aeb3ad7c954f8b5e5172c3b81680c3a18985cf33804d3d4edfb68ffe818348814146ed2ce302097a7bf046ad5d129eae207cc22305f6d2bf86665516ebf03e766a4c3cec7b600052f633b0289826d114f178ee53c4bde5c5327fee7a036ba49487c1a0c8176de306f9116874afe89926a3e6b38215add51db67ca5bac9eb9345579b13743197f9a483f94fb4731c706631f786f6861df22d2b0e2d439b86aaa507a553c313ec4566d41be44e66027cf5a3055a4ef267f862cae618ebad55390477b3dc33c7dead1a678e7bf799f0af9f4de3baff1675c17a465e89b1048b78acdd8953454610702cea44904b5116ca75f48055cb78a1d78f8e923da328bde550971ac0dd72f54b382b809e6436724d9e9f42a132736df96994450fbd760bba24a59f17d1c4e363710a0ab1ba072ef1c90b538af2d37af1f2f8fd81c818bc50c9e4998df2955a26888d280caaf839b0ff0e1f5e6c2c510e349738ad994236e38a25ac6bf232ce902713694c04c3bab355351a1b3931609ed762894e62642189204396ced4d94b1204cd1e8c93cfdbd08085fc703914af1bfba2cee33038b2dc17926443445a48c80f5d0a6262ae75b5b914ca1922726e8d8e6742e0ba545bece083edc310ab0acb3a97c3490b3c6a4594b192633fd9b6ee977b5b4494be8a5b6dce99156106d414858b208d97f21632606f2fe1e5920fd95c6d205da9a296ccc677ac73f48f00ca1bba596f1f2238ce6769a0cf2f07cc79176d772095a36765a6e8914410d23d8603abd08a02ba68225bcb6dc124a113f2ae404751fcf514d41723915ff1b56a382a423b84254cf438bd7db91bc28a06907400c64d46ffad5bb12ee53266ba6db61c189ffafed0276d430a65a9181fcd527fd7ec9224ff6f4ebe41c2eee2b95a4aa5061afb1f17f6414040709a6ad7ea2899c2a13253b1d43a6270c1f770d3956b6e72b2aabddf3a2cd9fba4d2a0a73c0febba875d11e527143296718f29d6c973b0e51e93c065abb793778b423819541394dd113e74dd24afc8650ec470d452b486b04cf32b49fbbbe8cd04af2cde2622a08adbe8c91acca79bbc520c3aec421a0b12bd36e4fedd2cda6a45cf944f1a552490ae8c20ce98aa27e24d9369f5dce8222372d0efc053e178fc79456c05bb140bef6eddf6611891352caaa72d0cb729e2a65263363dcc20758582303b4874b6abb9b17c01c846c9dd5c2b5a2b9f6815d064f82f286ff045cabbcd54627cfc40d12a8dd17aa178e6d96e4d0c6998f61d4a5d2f2de8791e22e20b87add55096c4f0e34b05205ef1547965113d1dc7534a569efb1c41ae97579732376bfbde97f2bbbe2b46693c192ab5dd208ab1cb4df1f1f37093a8678ffccc3c6dc4b6ee31d287cb036f75524169991774823cd361f69e1ee30f43033de3f97db0c4631550a893b078c2da935d3a78749c065f846426f3a07580f51573562cd4253b652088c1d61aa833d6d9e0a6d70592c9cf6947f41e4528a05a9242d190553a25a6145646608eea5c5e6a1e97f61e1b5c63fa49353012e77fa2e3b07134518a0757772fc3b2396bab5ec78fcff8d20d0246d65ac26f2aca9283ab26217e97323edab556d2333e567b9e1240c721dfdf204950335826f01e2f049bfcefc9fc7633d5e0b01419ecc3f014a5e45871679c5237ffd046d2a67da37bc42c29857b17c1f2921942c5799f7e73e5f2bd84735371069adb8c4261d70bf24651931e275eb32f39da7a00b9ff3146898229b90beee7ca3ffbda92b94a915fa111c06c4f58280859123356fee906f3ca292a3508ba0f8dad4aa73947de94e7799114fb05da1091c928f182c3edcc819c05263220f42bd9a089bf46203813b9a59db5169100181687744f3d95fe84c8cee63652613c7ee0a10f214944e518bc0d55819dcdac8021cb65fe9d86b0fc9d9cc5cfe71548ee61134e56d3ca35785c70ec62c28a2f6b7e1284f2d56bc03911f87c89d2482694b683d69545b80fc214f71f9458288eac66a99f0b5a21388347785ff934f53b674c3e5f8d548ba03f6ec3b95d40bed692cc13473c5359566af5d5f60940409f4b853b21aa7c1339e1426ed0a60d51e128ee96a85c5c4090624285b7abc4b3b91e47d1798fc1626e5050be71a76be8c7e08acf08c9bb9fdaa6274db94f30e7667f53e9c777","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"8e34c445e3f4ec3b5ed1ea21a37ab83c"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
