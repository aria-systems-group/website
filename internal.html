<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"d3458a415d3a0f042f8193a8f1bfbe46526d99d67ca311126ae2375fd41a8e89cde4e00b93665d1bdee75f3c96142024871a0207a0674740cbd9c3862e726413d6e7560f710be6aae836ac061ba66455c1e6966cacbd457940801daa1f7c8c5d3283bf473bdc718078bfe3400609d1db71bdb1ea3603ebc5364a4de05733617d3178850dc6b091de8bfd89376ad945883c02c74acd60e544ebd4f3f42df2e0cd3d23821d51f987ae97a3b0682a468feb92b9e3745892e31f1a23ed483433584a7cddea937f442c7e65d4cb6d104c5971c5a474a5ea8f19d62987c49652daea38d1544b6b7b1864704bdde1ec0d0ca6f3dad9ce69eb402d53a5d3f341f5e15ec0e9070b37cc8f5a87734a597fdad5abc9e94ada540f0d1f76c5de6867bc3d615786d2deee721480930360df117edf3da989234738d93bd99eb9432b59ac1c40521e5143f6a9d04dd8aa45e3f482792a7aefbd1469ad949659575292ff52a58e16037c2da5d3642eea5d143989b6a570c5dfeeb61e2a51cf207295061efc82fb973e19f56a974954a994c3b5843c396ec4f86f7e402f58e4e45b8d796c081619d94b4af2a3b05b54358c09fe3aef6aa201245b64030886611fbb8491527f5a37592ba37a5e2e4e2e0e3734cec8cb70d55a8fe75d1b0703b49a4ee37af5e3a2f848832649072aaf72dc304b68762f836f8bf03ae747bce64422bff0dfb8a2d1ab2db5af29773dce248cc9e25c49309d46aff1009aa310fb4dd8a45ecab3ec511f8765650f0144bce737b0cba613da84225202669b6544e8c59fd0ce890d9a4c75d00c5f751a5476624e9e730b638c0b7beb3a514380994d2bd5dc823f79a51abf7e014406eead5808a9dc893912afa3eb4dda334e24af16ae03aa89de7f977613ce6548802a7e186e9a8f794139197c0dfca68005d43eeced300b64f5445dddb6335420532f79511ffdfcfd7eb9364761a6e0c72dd32102601d507a1e214b5eb2b96a5f8dfbaabb90c2106020a11cff9a1262066658367e17429b32a4a8e2ae9ed6228f16f554b909a7cb156ab32b2ba8a349a03b8c4b7b6eb1e0d1156155151fca12db416feb8c77be575793b6d5f5381207904b76fc66cb687cbb7f5635a3fdccd096ee2ff55b4f9df7556a8b1f94a9ff4e91f192a1f39909002f54216383d91f58963b5565f0a59f527ba20414313827dda706c19c6d7eee9f48bad22ced61159b138d0811b6372299c309d823d2edd40392a302a076b266938199750b5291405bc538a721beb343720350216a6420413c0fb2bc758be2db18b4241d1d82836f1fa97369c9c2d88e566fd2e4b91b9e1419a04b9a16852e7c102e92efd7f76a8d1bfd03753d79642659804bbe52a750e7b76bae04f59afe73800ddfbc9aa2af3cfba85aee319ec1ef78b9d5414dc09e74152df55662449eb5c663131b539ad5752e4b40c82a3cac3da57ea44feb3b0e8837744b9636c22977db2e84ef1ca3258f744da51f1f58a0987a243bf805ea17691a9288952061914f6fcdef05e732dd27ad9f90e444011312ffc44706b0586cb7d07ad665d94b56c2c7238f2ffd6e268aa14c140f4d1d34bbc04bcd918e79bacab7aeaee7d59fc6abd5bf176f55932ff9557557870896d96cc642cf69c151c47b56a3391a966e5b9edfcbf9d5f0eee13cf88395a4e07983687b6d3796a7de3408228d54afaab2b80820ffe7cf881ad55bc40bf5414dd02f284c8e60d40731da7d77f8a6bf26d24975b2f7660a216bd5d9a039215227c20337a40678befd4b9fc498a43de6bd716aaf47a73b06393c73e3df7701858d1c10c73eabe3f9df40ac8a6ce20c96eda149391df98d00fad37dc3742673092c4f7b29187caf9c3d13379ade46c0d79889da44761dffc7a8d8da1c89c60f34d9c16f2c4c09d8fe07bbbb735bbb0864bc73675f0b5ec1c72ac465a7f32f09e59f8399a4d01ad38e0cf9b3d8441844dfc3e9f4d53adcfd2e049d66ad0309d18bc9fb61968f8730a4b527e13e8fb4f13511a68356f39d2ac0db14041f3865478664f336b232248c76b8576196c9402a790e8d49a687b6760e10d35e3ffd729f9ca4f6987f50ab53db8bed8fcd15462588eaa1d1c043026cfeca413cf6df170e22b2f252680e955e413b3a117d5302df8ffc7b7cca033472c81934615091f5222f6cc17d8a307f254924263e8a2d9981952d68875534e537ad005564b272b59c67d5287f6d9ec76c481116507ff7ee76c145735a60977eedd4cb591028ca8c81eb99b49f61e4cd58d5a8eb219d5e052049bb44c4aac329664cbd455f7152b359a96c77382d9cb65b4825b9e35d732c05434bf1ee7b34c6cddf81ee4c2091b3afa8214549853310331ef1583b782efe3364fbe56517a98bdfea91a1d4ea0d7113a8c18b89796be439f16d60d2a779b4d6729bd09458bbc99048bbf6801b2844f783c7cc4b2aba4600561e6785cc2c712fd714bfb4bd60eda27591f9ea0dd04347c51959cab3d341d48591505db6ee15f42cb30266861962c3a02e83f95186df83a81c7746b51bf548f770c5f568b7ff3f2b021408bf34a8900c6514e8bb0a9dff5dba23351a2b6bdcf96a07369e23a1bfce2792697ba47a63a6d22c7fa11ddfa157e70e46991da50d29e3509a83f963fa6ae036b3f0bfa05d9d28962a13bba04e84c6879d7f4a964c612aa61b7da24b5528e573047b302fa0152142d35894ad025d241d8546d6973afc05bdfe107f6c73a6a11759d2c5569e738affe3a019c5e010be6d874dde79a325935c7fe9e30f2846dedbaa876286a0f881f5112375f3c1b0645173ccb54f5c986aef4a375dc0822983d7586bd1f5e75ec8b096cd593a9d12caaf614171ebb9cef0511621110cd4ad19dd7b9060579b097d491a37f2f7f91f4c192ecb03013edca5cf19f7d24602d6098a778a9a6a5dacd299250ee019f504b389210fe3ec25206526d5b4ce043677d9bf699286e8cbdcdc959cb6f96ef054c6a47cf59c72f7ef0cf88ce5777c10c9554cb3e6483e1c4d3bf9958c345573a9ea3329b1ab4f980636b9b58289858c931633e2327c9c4c582409fc9970f7c7b9e57eaaa4d4e3bccdce25a2093a097ba224aef792aba2def05ee7de1f6a675f796fdbab7b765042478b39fcc85249ae93ba584d8c97a151d0c455000bbc6e756d6785f34f759694d231c49151d097d1d02a1dcad61aa01d088e99ee1a28573eceef01abde9bc6a1a78b9e1efbe8198421c331525056951fe0f165011acdb06c60c5e200bef7bc9797439a0f38f15381e7065bf61c05b37bcf6ba04d6ae7f39ddfbe25d119cd9f9cf2c3f8c1d7651951f01ce8b8c0809a632fe3c5fd20f7a9bc2a6ee0deb1b08aeebbe0273b5f1ea01e0397735bce748c45f794077782fbd37cfae2a4de6ba855e44a9e3dfa65f6fae4c9e57c39ecedde94529ee7768318fb640c6827321da71fce250d67cb29f8c214714d47dc8f20b35223372784a1005142e7f53b277cb87b0f32fe6bc9acd93b72df21bb25abf612398f2265a7f11f5bdc296b0f111406773d8530f31f48f7775c18e2787d14b2f5d1a6f737e7ea864d4bc43cf40fe34b6d754b59b10944a303f6e43e62d32ccf0ea278746f67d9fbe14d45384e725946aef7094d99dd9e41cab5ac9c815ed459314034d3f368afeac79da853f112b8c351f7a71b76bf025c38d4b16aea93897ee28cb7371aa123b74c6234350cffd52fa862c261d77bff7955a48b73ab95fb0bc67fda71bd02ebdc413adbe92ddf2d999fcc2e4daf887c066f3f3a3076e2fea48cb47008f9874c820a86e9bfe49c07463301e4c973df209f9f9c8cf799a8d50de46151a545ba4c73e446024a8e3b433f971d7d093130cab0224b9393f775d3d1186a3135a37c06c8db702830af17b4941fe0724313abc2eae002f1826876bb3bc5bac8d84803b7cfe8525db9134c3ba02caf5b9e61a15f4513611ec1155a882ab76ef8df274209288901aedb05f11a6c13ed90b0441b6df8f32b3215f13afdb4b7d9c53940213274f61cfee92106cf4344be08fea8a5253b3eb412696ae0fdbeb496d79355896fe525cf39e9f3044dae99913a89106628cf0203ac5f00d98e73e129672311fca38e610cc7ef1c9e9b5e20692e9b0ff5de10d5a1b1fb0c92537856388eb8c856292db295e974ac151a454de8068a3f1ddcd6153f906fe760552a9db6cdfecd93a78b56e45ff3a381ff060db65a3bdfbb2908842488b012438377b2e3507de306bcbc612189dd622ddb9c74729068a833b071047e598e730c13e4b432591025b14b3a978b5aae0177bb82b1c07e96e0f32387b51aa3c92fe3eacb5fa8a23ecfdcd16b242c75bf271a3ef7f6f8f266c5dfe3bcdd2c8c5cd65170c30b782a28135b5757684d35e915a728f61870dfc9611cbd9bc2ea052311cee50f49566aeeb0f92ddb3e6edc75218d9a9be042d27cb1a605cd274297671da146f792b2e7093c7a3c4ddd8656cbe44a2d320bbc7c695c8bac3b780f035fafd1ac8a9e35c62b7d58f3dc7da6b8bcbc1dbe62c73582004b80cdafe1a0fb96112e16e1661bdeb907b9d2386fef3a9d8fa39e22fe813060e3d3874391cc2e11aae8c7db241a2de356485738ff4b8f10967d217be253c519b0ca6226785ee471b22b66679fa5ea03febf8e37b1692a29a64d2e12711e6f4563b8e90b7476e48c716c15484e6e82daceee26b66f862a230809d1221ebd3b2c702a7a70598f32d2eb89193e74b22447a0d3578e629185238d71be4a227a95821d1813928eaa65acb17d8077a0809915e09de46813c2bd50439731b8d17bfcd53c81e3bc37d40fe43f036e1f5e696661edcae848a5f1b463c4a5f8ce22f282c4ae57700e08e3d0c4db4d086b17c7bd1cf23e883179aa2b71a1d03464a198e3ebf2c30927d5b641f306d5bbb6bab679c7b22d2c76d2f9e169b1633b2d677b992eed148b862ad3773f6c73e569b0d6c40fafadb3e6440bbbe5a80a77f9838945bc8979dafc2cf5a7b9e2ab09b2362c93305666acf85971ccec8fbdd49fb17a8c7c3c9b8fb309d0f907bf2508cd42ed3a26a030f53f837ff4bb9f383c86bfd1338390cccb344a0c96ccfbcbf636ff9973fc1e3f31508b3179f0031f7ef803adc808610233f9a2928922876697bccaad135a76f753e5b1cdd4acc8f83b3b19c74eca2f41532a33111f7fd4a0447a7b1ab623b81e30ff3baa17b4fddcd92258b6c7b7b71a9a38b8c14968918a3d1da3631602ce60c8afd7adac613189b77b400f0d1c91f079657aae4539d5cd921571d16c43bd773e3e10351c49fadc570bac9712179a7262f65c365ef00f2ecf4ca7c8b7e73d17986303095d352e6f3806cdabecab43258740f0ee7d02421843e872e2ca5a09337e3c31be95190d923f10cbc2cabbb6ee68b2a2f71e022880b3f5caebdb4c34a38bb7bd556e93ca9afa764e817eac3aa1c2a821a37078141a222f6bcdf9fee3b2245c1fb08f3b30b57d9b6dbe6ce8a4033b40c2c1fad7802e719c85d31287a21bc0c3fcf85205c4bf89b5073b1cede2925d12a3d078f6badb3dc5ac4db604819870260b24568f3a46ca1fc00eb82cbe5e4c84197ee09e7e7a6cfb66daf37ad288db5058c03d07f34029ca9b7c289163618fa0bb615aa581fab4e4ca22d3e27980dcbed0af5c87969e737b00148a9e665308c5d33d4e72abba48749a6093c32fd0482f7bf23c5bb29b52cbe0b246167e4a7c97494ccb64901816b6447d479bda3a79a315f83d6158273c9f902f0bdde0d7f9330fba45eea81465884727b32e986e3a3bb7fcd3cf1d7275b5507c70cd5f3cf81fb5bd9eaf501024956e8d295d8ab80501883bc76bca521d3e1feb9972b6f39da1904df312406f10cd068145ab2cdebf2f48202543fa3623310ab95d5b7ee527ab9d6f5c85a0e28147b6e6e61c6b6dca76cefc35ea6b31ce0ef77e93b01380954789f21291e5a9f4757e6ea2d0795c75cab24c89e22939c4a27749ca3ddb3180e599fe92376ec3ee8f2fad6c85e0a239178675e3bc9b6d259494632b4212af1bc8dfe2ecc6eed6ca61f524a63a3d785fa26c669c73e0d10e63838287262e6ad114deb5a655068f27836be7482d4edc6d60881d1c816bc24ed61aa3ba224801b34aa4e9b1ea0e10e5419f1ffac1459d7d3f4ada40d8b667d33984b86bcb2849f13070bfbea31226df4ad77e9d385bd9f5299d06ba2733cb1b547a26de17aa39af7894b5be3d091d45e856c65e4d5703b8a97a35e9c6365aac422ca8701040ef1b132edae400fc71df60dbce41b2093f301df3be490323b05e715cfedc86300589d21f77ed22ebe18f35016e6724096edeca8111814a226a3f26eb3fa88355621258ec5ace908b317bc1da6ec369a1e5896738e0e0a1fef45baa616d1341596740b9002fb911b4cee46f3c4981627c43ce6b6b23e0c4182ea3b9adff5f9303816c753255247dc7a2f57b44d53fe1d0cb357947a280f337a250ceb435be492653b7a461ea1ed721789d268eac7677bce10bc8fac81d3725cd5a6af9989d39f8a626fc91d07f1abf6d9b04bf345c62a66913e80e1db75608d9492a84e72ccd7d7b8e02a1820969f298f40f883a5c5f230957c7a127dc10beee72d8898a8c4c09af2f0303c7ca8583b77c7d3ede0dd8e9204d19d0ec233125c86e9449997aa26eea73dce3933b1729829b21d049614a7dd991bbfaa796aacd5705c92c37116546e7620a5f7f105bfdbb8d831672cac172f8e436e58d878bc9031f887e8fc8d88fe314ad7c22ae41cd247c70d884f6e56824f47700055e0f9fe071fa2d55bf068e3cfc39137e3eebb0e24b5a7841f02b075c1d4fa6cd45e75e2304eda3b8542ff020d325d4bd3565340415383b496f45ecef295b2780dee92984b50c41955f32aec680944ef626e0dafaf87afd485552d74b68c2ebcf8707434931c8324fb3bc6ecee733257f7a1af27dff3ac1288bbd9bce5af87980badf78c69836a072b7c9a2817b793cff746a044e3338a57a97d3dad80f6349a28da653d109298b2cea1224bc35c6c848f04b44e83a71b4a15f7d1c9620aa70a057af71213830f185acace1fb7ad4c84c53e3edce6bcf5b7eaae68582064628f797f9b990e5206ebb316a9b22a8fdf4ba4ebd904d55e05590d18fc4255610414e02a03864870a998467ee7cbf531f85eae295573f2ac42517c82391295d361c72fe7fdc4d1a0412f6755e1929ec2dd24a228a55c34562c7bce09a426cf0b840adafd8b87439497f11683661c1c975e5ab4cf43eecd3d79d5de7285527cc2abea93b33662a6b27a84ceaf9e1b52738a649b46e51fa95a3c42db4f87d2d36e37ec93fb613a293df15c3080d5c05c462cc0f3c80468680f4d388310bfb3b5f6bd776b4d3e8ba87a03d1fee27e779d216461e227bbbc9b13aa5b0d594800b1b4da0311b91eeb5e18408067beebe0bdb4a9a533afb75f0d9e8e71f85a67ff94b5362541d0ee44d9b43dfc35275abd5319b605614229d96147848ecc087bee67e07265ef8d578897616074bde31fee7ab46032ed1c0af72274f151756169524e65b55e31b205751b14132c681ea916b7b3d0ae46c86936f90fdbdeca52cf2f57332cce993a05e99e6d6566744085996cae2e7e42f611abdb0759d6d61878b6f39de59628384eb5d252ab4d0c8de55c1d2007cd7f00cd0ee18d0acc5d24c902574b065f657e4ee92946ef3603f30655f6f0bbed3d142171082ae09de129ed316d18610cfacb484c32dd88172a71be27dcb9c47b279864406119956cab8c797cd5aa68729e2c377d101279d76e7cc2b113453dc8ac67a043017f16a8004a079da95b89b23a430dfc7e9ccc6dd62aab3b6e9559c218e116a69854c04249e7a435b1c835a6126260e064be3609f79034ac8058436f841fda1eb99092807e4106b6979920f8a9c6f77178530e33c7b9800d70063684470275311350d9cdbc379f77a150853bc6c1b49d38b58230e834bbf5025f4784844128674efd7d825d5c63095e8e38ed69c0f6443eae374c2d5bd6f18f187327c0c042258ae1d93049ea0d071b255445a5b44c39a45e91130d070be997bf4d94daab227350e9a5c3134a71eeae1a845222c1ce2cb135f1b3617b9cfb8ba9039151f3fc0c1280f049c01aab4f25d6481ce63816ec83a84569654bc79f16b240eed88a47ecd0b95c5d6746b180f7db0e6bac14890aa2ed8a87e8ddbe7cd6f3f3df29258d39c0ba89f4bf349c687652c853f590b2db1e9a10145609683a040f4bcd0b11de0dcf4c87bc0b46231e03b586d93e56bc9548e38933c5869adc58706e7d9a0633e2edf444d1b81e7e6c35538608da109642511b15cee7f62a9889db5a3e527affa8b5cc3205a4c05f173be366c74ae32556f5aeb7c078f6c64ff7bd45b54523b1f210eca00f7c221066d2030bf25ee1ca7e3c79e306bcd8a27bb26ddf0da74b4cc7c263c89f504564fd2a156617e3612f5a426c9ec06d30f55d5cc208adb4c0a220f4b85aac35d370f336c89a5493cf07b10db0b655dbbde6ad16d2e4b4f668c7b09da29506d4b871fd7684adfc853e2d6ddb5689ddabd62aa046d79966085c5cb3751294f950defe3ea3ca25a6a79cefee48dd7e0f08346c027de9859b5eec093a53cc76294bdbbb27286a2fad7591a4a186910cd3b9ca7c3a7b9737a09ce5ab6f879750c3ee55d6359d3bc6bb384e2ce7022e351897b5b02fbdacfa8bdf2a618c235f7e8463a9345e0b686419dd6df5c5a28e5b34b9774635f3af935022f2164ad44823be1c951416d8e9becfb85ccb58a2a6a1a79301bf6c90582207ac2222a4d85741dbc48e3ebdd01d01bb5a974b6d59ca5567e6abbf7bd90c55863c50efad01c5bf8e7f8955cf77c340f5e5fdbcee317fb50e4f0b2ed3aa5170b91421be396659ddb7612d38c668fcd754bbbad11107add0904513898a9d2b0087abf6cb56d301fddb46bac8e587f36a112594f696b8b5c79ae13ab157eccf5ca4695dc41edd91b4fde1e23fad127cb4a149c82cdbee8ea2b372a2b4b93a9e30aa1f71dd45af64ea2b7030b067e3cfbb879cb98d5ba55c3eb72904e661e4f7b24f3c4e782a1523614ff75cf0354645fa9de0d7ca57c21ae9c96d28971e2c8f0851c2a60ac9722585536c59aba3437389e030ae0b2ac35a92c4e44158dee88fb3bb9b81f3f4eea1a4ff1b6d8e603da4d6a8986af706f865b95af297fbb787c9dc6ace78836a1d6a0b1d73d55f935c1ce3968747507262153538a2dd8e2636993c22367c1decbae27d9ba9b7b06e223e5b5feaf58582cb4c50471cb0cbda8752c0a6a64bf43cc059805e0286ee310df08db688247e6991468e90af7bf8006eb06813c7a524d24003941511480715a1b2afcfb7f6c75950de94708922983905e445626a22380dd061d3fae1cf2aff8de4e01217aa589abbeec530a2cf9f2ba9e0b7e5564119b799fd1f75a07d8608b3afee6956099afb938bc3c8ac02c3748f71a6db66b88c859ca237418723b899e1c2ceea96900f76c6d32b5b2ac21edd30ea2f2c17c34dbfbdd6459c10e0dee7c991f7451354e4d9019c5ed4dc90438a893cf434b2fb8919c2c7283ab8032b52da0f814c871ef750c95f9fc5d818674bb1d2c88f7a85ad7a02845028e4a547741a67ebca4d902d7454ecd2e86b81f1191abeffb120cfbd943bbacd087c9edd4e7ff3fa62ef9c5550a55ba2c61c465f1188f4f6ffa72daf13686a568cb051e199a436302b93873aff311073d6b8d5ab74da90e080ebf1a10e6b77d16e44144f7019fdbaee30d27eaa4699440fce292d39c92c919e3f43a5254db4c91c5415df61dd1bb9e450764a7f6f88ce54c20d484032e77e15f3470363ac69af2183f0d56ede7f6ce4eabf1831e8554c4fa99e3a881faae15952b79e0bb8d447f3489f43e738322230cdce9074a493eff777546eed80ad6c196498a210566dbf4efb3f9237ddcf3952c697fa34f6221805ecc126432db27a473706d0dff2c5cda6e541165aed3a4adc949ee08161f815cd9acbfda9d57259a1fe5f44c7897978e5492e43be1fbf1269887911881b024e2d04900842e4aab34db8023b0d7e2293b2a5159b935d1ce4ed0993fb0638fdda83d6f355be4ac6e2eaf1357c8950d3c6688b2f783324b6755709a633c1867fd4e1ada32f4c82486fb90392f264319f5692ff11fd7f877ad59b3e013e1f556e4f134f8b613fc00ceda0d092da3c4c9c5f8e35e9cd3323468ec541309f26c2145c6501aa2b7cbf11c5413e5d883315cb53ee602c6eb6f7463977987005e7804a9248bb20e577353e77dfd06790830623897dc06a396b6a58ca251e20f7d54fdd076a7ec0b6a58d7c5933be926bda52ad673ff7945bec4e7e3d7750c88c5f81f7391efd36680c804b6a4793a497fe701666b39322887a0abdf1410929f1a74a4bbaad753d669faf390a865c2f3277a71173bf12ac8eb916c0780961a44d1ecec10467e4049640bea4493a1b9080b67e2e1d1a086fe0f7be68879538f59bfc4475cab3074992cd80ec2bd13574438991b3b9b910c9783a77dd6769c2b942df9b2da34fa651909c9a3e33c20a13f066614e221d4e30a45f08a54ee4b8758531024fcca983be6d41a53a14d26021a0f4885146ca9b6e74c95049df52f3586a89a60d200ef4715a617ae7f708243839354a5f78c00f1b86910ce3661e7d4a72d0ecee8a57dd4f53eda831388832d654129f5b58dc786c7766e36907d720158aedcac605b4042cfd7856bbdeb6fcf7dab12725c8122c524e1425679eeab2b34f44de4a1d59a9cc8124d1ec845119afdcdae6ddc3fb2e52c307f2a857ec9ea411c86d12135de6345525e7e3e4c77bbe66a9c62bd861e920aafcaee6e82a988279338320b0d46786049fae3b84c904ad630d3c53b3c8bfe06f965e1e6ce7b39d9a935db3682d4ce136a19382d2594e19df9537c00fb8a368a1ed81ca85dcf848994d13742ea62c2b1b63846b46e6f28a7d632c787362c483c0f25c7fb8626e159900ff838b1518ffb9e5b2b10c66880d958dc474f74b16e6901c7452883526648a29933ef22c6ccaba5b4fa1df7a65218a816bc6c9da11926257698a24f3306e3a02985779314f351b437bcaff0219a38b3a2b1414eb3908895a5b8a1baccd521e32d8560a3781c2df4aeebfdea9d5c9b0ea67c3a5cfc163fa9da34f71138c4dd43df4118a192b9c92793dab32a34cd063879c11f7dd3577e550cc86b1626da3276b13d1c6090275caa0a193f2c40f6d3d0466166fbe0cd357f47ae4e4f56e4bf945887e1a2fc808a8be0516c03089516e7f70c008fb08c3c0c5090a49d77ff93a278c5c4f5305b6bdcc7578dbd3d8b6491f6433f569e3d557fd05074ca7632187ff7f1bbdba5d54f6a144a999bb75ff1bf7f2baa5d774365066934e0f1338048eb3a90f57146d204b540c452a8f35abc14e40f72b0210eb70da7ea5698888323ae7b36542d15a8693d2d676852fda2a7b6e8ecb22f6acf0a4a91d9a428ca61af015ced736a460d040937b177044950387c75afe5829857e0274cf7265644d495b4694595349d3198136d47561f06740ec87030630f3791be3dd9433ef96f3071cae96cada363deb955de949c34232d1cf369ab992e36b9da0ccffe07f1c1f7b8166fc4030ab49e9fd6c47ba48664721604bfb48b575c3c00b010546d523e19568cd5daec203ac3f69822babdcd5da9e254d5d38535ff5f9d1a87184fb0a2028d8fc605c934139a8ec557131e7008dd629a5ac66ec3908dc58a53b966f285a769c514ab0071a36e0c7f337cd73b3a7714a9b85ccf4a6a0c6b739f8fe5d10ef7fe5185487d772f16543bdf65a8d78552a317667625e6a94cd76b234e2a811a8979152602bcebd198f70884ed06b01756f4df075383e9e5f95e6c0735953c8ab051abeaa3d8ec290e89e6f80a19ec99a1adf3a12629ffc085b6306537af5c783005c86ab8bb856be0110f48cba7dc0e90fd9a5e879c96755769f9e6ea11071f1d10deb98affe1aeb49563212dee2a957b6bd87da991c75bfca9b76cfc2fd6f0e2bc917512a9cf084faa8b5d94a3a249451c5c2e7cd77ea1910f0da859649a7b44462e0d5587519d8f6ad38c878f4770c3a66f8df5fb6072972829faf34c09d71242fc8d0f5d8ac41fde49e13dbb6589b1f0f1267e85e97e1a14da3352589ec2cd7a3f70e684438e4aaa0a365f543826cb32ff69c0cb73fb81e3999842c9b31e1e5bd904a7c46f40cda2a9a2a8e2a4c9152c8b4998744c35f2a538a07459425ebd28c91beab6596d338f5361ccc90cf92f449669d920be5594b1cd28ab3e1721816d3d6c2b66f91fa703029952f4caccf078997838165451dbce7f51024059fb4e2aaff37b0f677c3994eae448fb8e6c4ee1f9cd8156fcc7c840ea20f2f988b12108dca830676d24425c781a1094b583c65e7ef05a0172a3a11bfa8a3b73ec0e22341f8963508cf98be3b7c6293150ce7f4aee0428646540ccc5c49bd0c37edd365101f316c847564307911d86a72682eb49a1bccd1f01af2738731f6adc90eb110914b0458614f7e2ae6693d0f46437eb9c6285cd41ddb8147abc5e0973b1d3a477dbad3d15cf3b508ee22263d954ac462ce126094e0c4c59756b3b80d1065dfb7de03441dc77f73b6e65defcdc85eddb7d81ed0190f3ca6212a60809b0d70e502febb950c065fa6c62fc305b85704d47e91f41e0d2ca3b7865d1949f275acba660f6076fb413d367f2d8e2eaf955605248627a696c16b4e9e3f4e0fefe7ba32311973acd9f1e4f5a2d73246e8d2ea54f2bc0e58990fcb08322b386d1c65d3f1caff3ba034992ff8b0f5c34e3b9e19977e5e6597b899662ff2a34bd4f024b5e742c321d690ebe577f966c6776d7e9f8641acb33a6859b010ccf5d01817c44f2975ba66897d642a6d3c6297a4b2bc6f317c1fe8c3cbb89c10f86632ed5fa45ad0394d3b731719d2ffcf85b0c387340e44b410b612cf03000edcc1d58d6c879d2d8224f0138dca555991a6bf92acfa3c4a81b493a8394625c624a435b15d78038aac747c059a39c8b8ebf8be9983563748bccf313d7c37bdeb66de10e9f1c5f849a72028e5aea1f1d12b75df79573585757343000f91d529abf4e7e3aaf1e107d384c3668807588f962055333face2e96632cd4a197984b17a2270f20a8a2d54edfb3a7cd95ae86701db461783cd8ca3839859743fbcb7d3112e787c16d74a6eae60b5c8589225e9b904a5776a43feaf6b7af9024bb4e174497578625479589c592776d29702326d7ab00ab2144a2e90d392b680e9dda0cfd127ba6b45dd1f5566233ba8f33f620b8d3ca138cee5ddca3dea3d3548ed5e74b2e9b33ccd32119b4300eb1f745c3b9c5570aa3ccf3e33e02e93046f0bd57c810101a48afcf7a9ddfeb682f49e18c535a91130e01af0612d563c16b9854872c678184f0fb086c34c9aa7c9422bd934b142d04be3bcb9e3485a9fe1435407a332fbd5101ac5a3a7c38af8287c9854392ead4ee238062e59522fe02d159156689445074d1bfbe57747b225d1e797e7172496b6da4e8eb5f8bf64710603080ed49898436307309389382db1f5a08977b62e213fd5fab37d30c36c1bb8bfca878507a77aec114a1f3c8bf7adfd9d347b047910cd8aad90946a22b39ba7848ea89e7e56b4de6dfcba522531098c25314dfb1f0a3d660a56c7e8da94c679899b7824de11959574151954512129e1f8e594cc5443ea46b04bddf9f33dc5daf38d05f82351331f0459a68ded5ac9a2f1b59f5c668ad5cd05ca25a92e16bd08839045885d363b65a997215c3c5049093558db72184d3c298d2f6d9eb8bbca0575e487197c144235834214684b89c21aebf74ba9a9933a98e7870c34d7291bb4ba2235db4909af32852c93f0e44f5af74ec083bcfc5f15f98d098d7c143be94ee8cf053e3320fa8a7f5232493f0ae2d8840e2638b6a57d057f6539ba24deaa2ab3b30786d749d5e2d93d4bbf7845f929411f5819160cb4c075e28ae512412b062f3762c80673ed6ce70ae291a22c1c253623b7befc4e55c1b3755b9f700e26070ffd0b3393dd7f653d0c666fad7415183a7b65dbf77cb48c034c7f23e6508ab3d9ada189cb39a28d963496baa7e436cdabc5abafd66f90ec77185455f6eff4015c92ac0214943c803cbb68572a48313346997acd87f5ee274374e5542b9445f37f6496bcc3a64e07157b2089f73c3f3597dffc2ed9ee646373bc6ebc6d66290b59118fcf54d2d198564916cbc45010be49047919951883b80cd990e50fbfa9c5a28b516d64e7629c53f6a202bf4b1e3f34c9283f03cd4bda4fddcc6e5f1f2e8e6e7cebf1d696eec727c4b3e8f02fed5bc745b4e259b908adf25914c9b13d2fa81dfcce3d090a916ba3b30de6ce2a14355b91eb1a2f6e9a8d770dc8fc9e5cea10946eaac9cad3d1b6ef90cf5b038b70fc0cdee08f2861725afcec14968e888b35e36a67aad4c59333eafa10fb2fc6dff2f5e37fe6f65c98d8311c453151b002d29a4abff20d7e1a3908349712b71cb762854078ab1d5eff0e4672fe0d337cd88a68f08519ed8ed5cfca15a939c2d974a3f253af42dd582f90044dfba33673c41b8151f326e5bd878d22bae8fd370f3256eeb46f2bad8d584d83057eb91531a1087e4f8a23a9b2efc77254c86f18d74e16de1f28b996562727ef1c7066baaa1c42e93cfc1522c3b539289837b1578355c66a6edab6f5e130578674dd8474208636a62dcb227b6338d11944d06797f460c62e39d2ee6551655cd242c7581ddca5147847b3a252d6549bb7cc7e4660535f14c1aad59d8887d4625bc8eef74b383c3387488fc7dca90903e7f1a4e6e96dbd16eeff06e780fc1af61136c52b84c8c76d32bed01ed9174cca3ef3adb8dd58dd5343fdb85c237eeabb3c02905e2e101ddc4c44b0249fe213b1236a741dad18daa357879a9ca4f9e78e655bfbda7079f312243b7514ef2ce7fddd2c0bf62bd36b7eadea75dbb584577705010c8a450199af3b50ef211983a0d33a36cf3dfb78a982b0c52637b8e52ce04d6571354a46965196817d0309de32d2113e084bbb53235f337cc525b0dc53c5bc5f3af91a3f4abe22c11ae1559618caf5a4824c0a4af933fe277e28f08c2d4337229dbc41c4499118c888a7f7feb6c65682fa96a5f75cf1a634ea311dd413c6ab674ee5e41f5c8bab23fee37ce783c62097b1ac80fd89203c165cc045ba0da2215c7756e1f27ae0b5eb93f7fdba3ede9f28c5cb4c262ea393415febdd986cf1135cc18c84402d0b13ed40e21bd98273eb2c22b4a87d214cd77b3969679041076b1efd605f4cde9f0f0316e6023bda232e6ec1b03f896b717f7f774ca7d30e33a5257399b916a411f66cbba809ef50352e8c534e49b62ffe278c9112a222596c10c99beef364ecc6c2f3593ff9905051794c03be299f835acd7eaf86ebe1fdfe7167d502e03dc916991f9d30a8678a2a1f91b2911f915e17fa348c85343fd4a2fceaa7a6fa9f2763eddc43c5e26ca0b732d007d5cb9578cce96b6bf8b5386fc976ef565881ef684486ce11b22ed6ead4695cb312075ece38ddfed51f5b180c9b6149a49153956ea06858e02228ad1eb2ec037b9965fd29daacd80efdd371d8bf8bea9aa19bfbee57b62dd8031e4156f238e29d7ee38e80dacbd87d5d306640574cb66db4e3341bba1716f7ff719a7073c37d1fd2de1a77a6c9c04cc1e4661b693b214f27a1c48fdc2dbfef8d29d041701871187339971a5339979b723ae25a238d7a417747ea3e36d0608108c00fa577921cf1c696ce20945179e9182d5fd889fe009427bdd19b0918ae35ddbcf6ff28d3c2781e8f9e5334437886cf86608f5caca8c48cc38f016454ffec83d26b6268660650f9676bf4f191ce57498cc59f3823aa223ea514b47fb86f8102e619fe2efa0b79f65ca56f2f55e2c8844df6540208c6e074db066321f1f8b8cc78178c19ea3ed764b6f54afdffb6395641a76c8d6206f1fee4ed1614431c11f8b5cf5ffd724fe9247ce6078a66613fe840dbe1f7c01b4d7bbc16e1e4d432724fc0a1d5bb22eea86a95050c49c2b9f49ea0e89e5bd54d457ecc65cdfcd75aac0aeefd0815c7b6fa571be2e15be343109b7153d6bc88fc69e52c0bc5dfd3ff894eaecb7695546a1dd9ff806c568cd01af1e3d85d3b62b27c3b839de037979fbe07c3fbc7bd18c5442ed7ca83ef7abbbc7198334b2190a947eb5680b767bdc2ff2af59da0884661c2d45cb4d6f91a14ef4519da3e2f7b858e1c7da4134257706466ace15d6ee92caeaee4570863714251aecc808e29f74a312d53fcdafbdc1bef7f43f6e14e5f2eb5764b4dc2315e682271867815ebaf8890bbce54a4235f8ada7f52bed8730a1fa20382dd5219205a8c7b293e3c0e752abe3359218ce881a0716887730c10cae3d9afcc500c722f1f0998fd12d39307ff6b5b84cf077507a371ef8e6298ed130d67bb8cfc7ab1c337bfcc85ba4645a90ab3fda8b9c6843be9e7df1340dc9251ddb3afff2189e15d87334075dde4bf724fc14ccbdef240088a41c65f8554101d13750837d26a48256da84f119f448deb7df67c2ddd6f7612e351607a5b596779e9363ab4b5cdefbe6c3a7e85fe6edaea593e13609b1bf807c2cf96c1185d093252230ac44a33f0725ae7e918096c1fbb7aa5b465deba07e30fc5d6e2a53dafc425643c2ca033866c9034c43c6deeebb11c91552e8cb7259e7d6dc4d933cb6c323b7eeca78a7c007453f081dd5dfe1ffd292d6bd374e700fdc2a746b7b5c8ad0dae86507bbc9da1688abb9faa7a59013b61324d637d8173a3cdb174d0584a92eeafb1e9e5d9440a6bc8569a65dbea7b04c07726f6302e0764eefb9a23858a07e3d794fba70c44b03a8f504d73ad9d529fd6d426e7f3f12fac9067ae61bbe5443525da862b5b223cc02b1dc5b09826506b8d8b5644fd5e90d2eae7505df819b28473b4292f0f090d95171eda2168639850f866625261cebe2f3c30afec0d0dea7eef75257a98e4a8a416d68a46501307e838e5671e1217ad478b924fd50111b369bad713e7c4ceecb61e0f39c745617778e8362ee676e74e58103697240d0fbaa33272efa7f0a9c2819116d914951a7e3b09a61019939a9dfc8988d169c1627f85d2a6fba268ca00449a5354a6e9e59ef1eeae99ce3265090902a132eab5720e6adf3796124aa25310dc64354f5de671f8b4e18e6df9130023069d05208eded0d852de72808251ff150ff71b17c5c395444895e354d7a4058361c6b68156a107661106cd403cbabb962c7b28ab17ac1ea888246c69e953362041534ffb94e93be3ca6efee3672320695c985a87540a5a47f30833a3a323c13b63d56e5dad07a8080f370f82da60709efec7ef9435186f4f8f47b37fa6e908abe851f302f17e30d7c07083175be1bb6efc7f171137c3e62a054e8a45024881fc53f66defe709b7d7515a2b7a0ffd2ada624766be590274522566c7ec2411faf5067ddb7075709dbe75a77d9a5f1190a58a91fd92383ec0245de89f229a548e03a133cf1946aec8485ae8f35c4fff6d7f05ffe7e697fb82cb531ea18f72a9380d48c8ddb59c67965f179bb81ffbe8b533666410d5bfe64d3e7b4b5c2b39f021678303d4d334ffcf7947397657d440cf440e37f9d22306e3257c284762f63d7a963f8e696b5084319488b1ad0b5a2656d34031cac81dc790f9032b1e38e62efeb54710d38ebd9094689384a84dd452ea990370a59d203828ae13cceadc69adb765af39e7e92f2678be187de0bf92a6b07b1d1b915dcade8aefed70c690d35caf298f9725b7113c70d3d905b9c6643677b081ecf990c13e32bf86514d1a11bba773ff08554b7cfce73c5672b6aef39bd4610450a5610edaf8047b8a7e871f14c29eb7d001ce5e76ed574eabbd02009d8c74ffc9af8e359bfdc9d78ce165995a6e9ba09fb7ead2cfc00a9c8c3be568e89ca67ae02803bf5b681fc4a928dc418a4497f7b62b78cb0e81932344a2dfdba25c4df648642bf7988a6cfe94746960d2e91657e6f3896f7b76c783576b1c4ed2564f2c4e57ce353dc0c9dd9ff00030af942e4c88b97daf38b5b953a6004aaa7696eda87da62bc41bc4b4322b2eb17c05c7cfc2521c0c73510409d50b4efc64bf47fe24b6572d438b015772157cd2f104955bfd16c2c5ae10d5cdce2b5b8e0efa34b346ba23276ca9244dd00081cb96596cb7a46941ea8d3d0b4d74136526a29c5590886b7d148aaf4f06547fdd72d7506b809e2e33c7a124d5f8c3f7d511b14f431e1b96d1f4e62b8e0591ce2a5dbb1b581449254d612f6715675d4a3fd0dbdcd1d5adea92eb40ba164f7c4c57d8509ae8fb3ba9ee369c18418e53f863eaeb409ba79fb2fbf92e0da66b09cb4d68c9ace7307f1a1aa11cc6ce7fbeb398ed106e7932fc7967e4fbdb4ff114d8292fee81545d6dce24c13b24388ae0cc57c6f1c4df1d15e30ccad12d66cc8b9666530366ad4c80ff6844e2fe3f4008bcf3e872fad0d1bdc18f33105b129347d2004332dd4554d49694a604809e8edaac4f10424d9f12c9517396be049d1888b954fbe8c4728c7f861145cde1acaedcc66c7489040690a7d76a2ca441b0783a3102b377f33aed91b1402df8399a6cceb0d7891637ec352e48fc4ca3fa7511a7f8de8f25874b7081ba19d6bafe560b8a0","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"cd6eea1f335eb79cfb9180c2213e3d9f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
