<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"2d4b0fb9ba2c74daaa03c1aa3089a40654e5e69eaf4f8f8172ef4af6cdae3ffee94f334d3c0af6f46b4cef5f802ee25e79966287c85ee0f024fd350ce9aaba6b13cdc93e219f38d30ee2b79da5bec2fa49103a62ff109dccf37780166c7e1e672da34ee63e95223eb7807efc9a50f874ff4d8f9d1809981c972a63967d51a4f724b536bc49de142e01eb8e1df86fbe7f49e6fbf8b83b68cbc25b2b7a32904190aee3dc60731a544d0fee88b4893ad8938c75e8912882027c03645f2e870fa8ddcb0db36c2cdb2c9e27f309e447519ec2ba99d087877d3cb786b3a2e85139d1f102a18dc5138a100466bd5964386880dd8e4b1c9d6ad4d2e2be4aedee8d3c13cb4debbc4d54954abf58e308e8804007b1c413c1f14dcea2b2c0514e1887b8b66bc8f5c82b564a4f781d15d8803b739cdca74e003cf3a1a0b342cd0367183b201d795df02cff0ad4d8a378301c0c6854728b488de834cc487093e28f3fae269c64c863bcbf4f42dd1c218cb137ccffb02532273f118b82d514a4547eeb7f55381fea65b842325e9bd87598b0f7b87b82defb2efe2eb2d1f90e3fdfa148d7db9ffa02d3cc6ad212172c52c3610d32547e8a54780ba1c29bdbfff0416261dedb432102b563dda2325e61247ddae6ca6d4f13fe18f4843738b3c46fa0adcb61a6704f99d044edfeb650f877915bf35173ec2e1d3db6bbc2e588bfacce098f84dba67f5ee6e894110677e676d4276d92a4121b904ed5886f9ce928a5bf5ccc6fcda108bad8460b4e0a6051640c0567a38aa35b96665f2e3024fe17fd4f7b3f5c3c7855a9731791eda3fe7dae3c57c290ae936c8514d00ddb928b7cc56d9d9206775f3aaf482ebc54d31a122acc041f4d82345b06630e19c58510e35adfd46e8606fc8f3cfa3cf518c8b1ea9996f95c2b57e6135dea60080a2d9663bc94e331899b39a6e7efbb64684f9fb75328d8ab7b4e371fb1c8b19c1517089ad7807134b05788eba42ff636617de64e5909002ea6b19195b4dbc06bfd0923c2ec46db24cac0e622ce6109c9f63870420f1cbc21e213e2a247e463c491765a8f3e8169981c29430038b256dd6776f41cd490668461881d644e5e79d8d9b6bb7f2bb40dbe9fdf2cf2b48063de7b09450f6f96d0c9dd65510aee34cb310c6fa3cbe59db988093fb0f5fbfdd92ea46d828a7601c816ba42190be5ce27e016bacef654f2c570a887e2dc5fb87d1f34e1f8ad3686adae2e29bd5ac62d1d93e3eb226883ced862856165b2e388730cc2add6efcdd5a1a21bd4c8a406716a42328dbb51903dfafc39d32ece06039ab12d07889ad3d53665d294ef9061133975471d5a37e7e88fb00aa723ea7387fb2d941f1cdf293fde84456b9122861d35371021121796299aef2d91ac38eb87d0312766e23d52193bc5738dac96cf56ba867b3b187a33964935ea8a9cb82570f24a1ed4908ff21dc0dcc7affe5b5eee96d12dca8bb92a75c5494f049ef6f603d9cf799573c3a2306778c6641179d1e1e20fe16f75c1091a9949d180ecd5fbb78a8e1d5d82a9fda6463c341b5318b664374b7d27f4985cfcde9fae1cf532d644ec671c7b62059aee9e25c673da0fe3ffd098f9f1ec38b07818a3ed0fa4770ac1303d6d23024a7b544d1a69cb260f1f059ce1154d72973a993b409d5bfb47df2a352035af4613d6c342911501609078b4f60535e113a228181134c5ffa8aeccf954ee52bdb703b1ea6a72b7df712f061e5af1a863e75696a8aee9fc46a6ea564f9cd0fd68f9ad8e57955399066e0ca76c255336e06b8cf7185b573254309835f0934c78d2056eb8fc371c01080eb90ecbb72cbe35e238e3af8648260d3e1936a10b79798c40b40de7fe95feb9518f769a9890c461f7c0031141006cfef8d6aef547ab5ef8f6d58f3853dd4204f0cc45c8787ff5461c8d6a6eb788e049403002ec8511dd51b4e5b2b0e305c2ee9c3063b3044b30812d8aa6bc2ed7214eaa19dc039a320b58e9763bbb1b544faf57c3cbd1f35e65db5e2cecf9be76ebbca43b67015119bd929e5f0c5ecc46404acd361d91e0c5650257e1da473adbaf97cdc4f3b539073bbe85442b1aadbcf52fda44e860015beae08ce45f80bb85a181af3c911a0f8caac14074d8ae2590cd69dc1f39b596d8034bc90e9a2f9f323fa619a862de0cf3ad639bfa165047bcc409fa6aa75d68a53e93e724c3263f725d7161d17230e30c860cbf27b0050f348dce1e7a266a55d66ad1a69eb11501201472d1522fe69a7344c9dcc130bf90c0f0a193d3cef11133a40a9059134b086ad5b4e17282a03102b3b073b97ae00f7a32433e56462e88a9789187fab9beef81054770b137dc6d35f073f66e950531ae088ed7e3b5af27d72f8dc5facd560403e5927c255634a302280474b935933b8394628dbbedd9d053ab490de104554014747ea953e2aecc03fc864e98c7838d1ba022b722f52fadd291257f28e661ce552259f2f96651b68cc472a418ec79f5a5d4ef96b199cac234800faa2f0b8e0310b7b20cf72fcbe681c49c3b1603158f9ed880161bccc5363a8998bd5621ce0405769e094736fd004fc0c5c1d489900b81bb71d11f17384b9492217696bbd085f128ec7c242e69ea67a09375cf70e4f091a4f2cce734fba366097e00e2c965a2efe67fb83dcee4edc781aac5ec7e834bbd3e17a3ac76e2275574185044d3857180efea20d904fa7b1830eed8afdf14dce0543aa015b1d3d4203342dcbc894e58db62b4e0d4b7b02e259ccf650cf1207dbe90272fdfa2a76a4ebaa6bafde58dfdc32767498a38ad36d37b900493cbf1725c94f362ec9d804cc99fe49aabbb398d7e79f2ab08db7538f0e83e1047a65cf73ad4c729fd83f9153011874e47344fdfed9cc378887587697fb8fd4227e7f2d799322d5b546ca78214743416a3d358a7558ad4c9c368e11fc13a8f63b8c06edcdd81a888ac1a354ab29284db90847836ae67fd67a8d31d3920ba6f7c9df3270a5cecff18dbc4e9853f5c9ebfe12c7a7dcf82624aba7c2e0d5251e8bc320b2356b594e4a7aa102fe8c233fff57fa0006bb508a53dc196debe89b40a6e8b3e94971fdcb4e01f6882b3cbcef81e13a0e1de0559a303939db377d5360145cbc04945f05bf0f46a906b8081b55d43fdda3df311cc6f7de4afa8637ee83c38e3b2146987d230ba6e19fc0fe576c9e407417bf99ccc81d23df25db1691d482f444d439fd28cf1e3e9caf7b2b1f89d8e7f53e68f22298b79442e548de890f679cb719db64e388db969514392f3635da8f0988df965de37abc4641093b8967dd96b1c6251faefff94dff57a53f726a13bcb56214f8e9d966accfad6ff62860dc805c2aded4eb2145a53ebdd609a0a88e3c984bcc116d42acbd9dc735935871227e31547dbd3953d364ca56a52bdb49bc5102ff83aef00217d69290a9c0ea48d1c832b2825c9a3a7ac849d5accb373612e64236296f5e9be8b2303bbb4003ac14aa53273bdb9744ae858a6c6730bcd6be719983a24d6139eb30060f9a869a2e09ec031e777fdf73a49733f1d8c999bfa5ee57a48fc4fc116ddcbaf960747784a82d9403b68c7d65a21f5a50266999a27a39d9ba79eb9e0872ee63b8541663d83673cfa8ba98f701d0b8f91ed3aaaff3530101e6512189f4782df156f4684aab5c7d35ff23e61889b8650c36962a52c36440d0a6053458c8917ecc0d19dc33ca1b7e3fbe9f701a8c9547eac931caf0eead924456676b2879b65f1b3e75233222ed99ab3626c57b5f4949e6e7ea914b5a0920b638b09626ec218be0100f0436f2a1b8a1f7cda565febdbcd9b4b06cde7ecb01970b8b28c3282fe3c1bfef4fa6496bd29c797a07fb2f51584e2d18cf5c757a633b52437b32e074f48713c659134d0389fc2ad3eeca4c9fa4a9c9d69861a9d2b9b0bbb5ce92860318a5ee5f1d6184829d16d224f5dfc09e4c563c2e01aa957a84d47a009ed877913c6ccbe07cf683324d4029209d9de031c0a3af5b9d3a626ea4c823947c1b082b1523ed71c1ce170fa147a617a6e07caa012cb33da2c7a10c41674ded999ca64801f1eeaf97263c7530f089007a24c1e2de194d524c3ee748e63c33afca02235405465308f40d39bf81558d8f3eb8641b5eef1191c670c94ce178396ee68185f1680ca19c25c58e0454328d6521be48ac3794583abc7c9df8b12f9ca7f7c2b3cee125f3ec7174c8016ecaae6d798d88034de3a13f15e638153fc2d27c16a875dcb88edd1266459c6de02d0397eb15b020d6ef498c8b02e864d8646ef343423d398a0f17ad7480720dab007ea616481d772e26c5ffc33951fb8ee30af79f60776a7d24e7643fac7ce32b54bdcae07210b24d8528b6e560970b9e014d99c0a9a6aead445a871aa2f8eafdf9cd98659ee99ade7d6b8fa133ab884ee8d12f56df7b77b6805eee49ad57c6699550b33d1d0b637863108611a9b4c46bf0079f50ebb2b7ef9a9a17802c8e40d5d7b076b3be57a4a3ba9023c181ba131a9d2748c59165992ec6b18d3e1f3d302b16a7a82fbc7fbb6bb0ad47469b31dc2f3b603a043a57176387d6846499666a70037872b534efb40c5b374a318fe1b5e568c8bb7d598d316c9e6f1e82ba55d5e71c9b980e7aae8c9a08377f5935fd65d0f4fb2c6ab115f7c83e28500241a98f8a968934e0f7dee890b4f165f992e18775b9d408b0a45f5bb976268116276c1c5fec59cd97c0e3ac3c39433b6c12922bc4e92e02530d83e5f81164810f79a8478a108ded53995aad2a9511561b1d6ff75686127c21147cc277b6f62ac67c1c8c8cf861f0ffc2c5e1b2bb99f12a6fc469e317a01c01cb3ef4cc78e30ab5d184adb8579200d49a5b8e3f2185323cef6a1d3ffa568b34eac11cfa5c402d9492f6828cc9e9cba444d992a600418f5121acd37f734a21ca8790b9eed33e68c324958c1b6c7d3bb001fe13367fd122d1c49a20e8179b1ea0e1c199f0a16e5f8591435104f1dfc91cf46305de509d03ad467022e76d22947d54bb76fd55f7228d236bb08b05d9d2f4e4133c79de433e4b72bae986b6ddd03c4a55ee37ee00df106f6155c9ed27e923da8dd6873ad73dd1073b721447287ce168972fd230505a5b178bb7b52725a818768d1ba0853c0f22d91ed72c229a61159643bd64d8e0e3a6a6d25fad03e862c22ebfd5416047bbc1f06e60b15fc5bd7b0669bc595a46e2f6eee6b499471a6a6e7f53949a7f7aa003b6c9c9c80706aa6a8aaa6175ed2c05d2301ae9e752f2012be582c7b35c2dd84bea9310a20dcea200741a0e354a984f5212499b4bd55e4ffc54575c3e10f54d2fa47789db32bdd345c675a01ff8e4303cc5cd0a1cf46b6ab96f7ffcbe304d01da0257d06b04d6df2a87a0bbd9be171f78d4297277d793ae17e2ddb81989e1fc7ec9798e75670229f10ae9a00eae7ee023e753643f420e911eed77ae0db8817a9b5e3e01bdde3a8304a7b8ed91b830404c64ec15fd9f04ea5e10057d9d37ba2e34d08fc81f52eabdc62d1510ebf66ef689638c0fa9e18b5132acb392adbb141dd170ae6529a8c7761b947c315a1efd22790cc9718260b7e80bad775d4e7aff16a6b00bddabb2bc220e4217d27c52f8dffb4a4d89c3aefacc42e3d676373a544dd4ff2086c99fdbb8feab582ba4b45e248d23589c1ccb091f7aaa7daa816a7bf69ad7578e935ead97f1305bb4f76f6d8747b7a39070caddc93dce62d2afa52523c3eeb763ce6aad60a5bb0c5e3c278de011be870950191d960d47538dd6fbf40bf8aeba7e6280054fff870afc438eacbc8afe6799269310af9d8b6e6c7dcd9046864af1897e2fd7d6088ea1f7bd1900c8559b520c82e36b40fa0a75c863bf4e53f0f6efbf056f7ba20a9c903f239e49ddd15887e074051d8176142c844dd3c406e9000cd380c9038d88c499b4f0861974bf39eb47dd54ddbe4bb4fc1cb37170e5adc9e741d52b4c3f68faf765e924b9eae907e4edae13659640a4d91f0f65213940c8c72111f2d7791ad977dc2342c8239548035bfa88f35ecc2a479ab8ecb70f1e11e19ecada6f9577221899670b37dcc1fb090f1a7faf24cb81ccfb21acc07e171d163aa4b4d5dbc10407e4d153fe5be5a96c1a854bd2316f3ebb59744f78e1456c1cfe204b43ed5de87ee3b7c7b7b1b93150e1fa9e123ca6a3b546cae4c1e70f6f3d6c849ee39a8f93fe90ef9eebadebf5d7917c507b661e12758e76f58517ca7e785f9a63a9ff16577ec958347d94e712495dd02ca603a03723ed3aedc82b2494ec7ba2296d061cca0e201c438db2a767c40a98d97adb62e6f5151ab555d14384545ed23beb9f177c6d75b7e05d14b8bdd837c4510ff4051667e748acf9b5e1790e32690ac98a0796f5333ff40806f836b0f7da8e48f4c760eb0a328188cd02f47f6be4e6e58df602f4feed96f30049d39d78feb7d7e54b9c125f60acc5e24dacf17d4c3773b31cc6b9cf69311adcadf575366af332e6aeb2145e35c5d96d84e06bd720aedc6d7b47945ee0268ff4e580546928bb32e9b2ce0bed88c64a7b0adcb711aaa6a918b8ac28d8ac72fc56bcc8626df6a1e1a8cbf4d86ba747a5f26b4fe551b75c8fbe47011fc040d80f26cf5cab6ce694117444a8d92d232b138fb478d0641ec9e1359e69a6a270c1c748fc6a73f840649d9412e7cad66aeef0a3366e8e613317505418264c16e862d3a9aac3136d3e51310214a4ece8280bd2451966f57483dbd56abbb7ddf9951f9ae5b52afe6ad1536ea08d99ce527abaca33537872ece907f7af6062f9d957e4f9522316f15f0fd77cf71c23d7ff0968cbddb23a1f9ebb786bad2d25b0428719b77a1d742be352c604209bb94b3afccd1fed194bab198abe95986462f8a890c3cee8d7a6b546c7e593418d86abae894f09acc71c682bcc0a1b5589a73a27351abffc0227814b30f7243dbfa4f7b968b73ccb65cb6f2c20960de58455a4493710921803e6cdf2b12537f2a617ba342f340155d89d90741e1fbed4eeb59d4527b4ba4e78c29baf943a416d6ff957117b4e4682983153f95fab954c94388d4a01cd6abf354e57a3a1b05d191e1309b964a75971a12f0f57505aff45b1b249a6d2350c7714402d2eec5cd1df74449c6ae6e2e1bf31bb9b7871ce2b6086862a2caadd4cd0da6539fe83ab33f56dc735fd4dc8fb8e164f66647e4e306a445714b8aa1fd7455c66c614d81048e976198818246e8b8e68b0e2c0560c94c1c69b35d78447b2ae82fd3a83f9853d57dda6a96b30653c116ff611c517918b6d6c62a777ecfc35dc629fc64be91e051646c906ae8799dc030e54412da3a7b8806492b08e4941556b6c422f6429c3cbe1cf0743fa861f80cfd615b148fc0eebe1b701527c77322c5d5d5558c86470882b06122bbee36850b79afbe807c6405a997bd17f69c70aa1f3a61c9093a70e0aa14e1bf6f10b9c9c15cad8f9af866ada3ff657bb9e1869b1300ea9535815c1a1060008118ef2f6fc37267f15b083841a16088249dbd1c83fee2d56c7b491d693464074cfcc8be2c94e7d6403a2b466f53f09a27977dc15776483effffffa92e0be55042ef5cd9b67adee55a1e452c2a7d534b26b7df158a27604a250279872e2bb945eed6bef565e69ad70d67299ac8bc54386610ac32569bd7bc5cdba82fd9fa50954ea7fa5ce29e04761b82f4a7b81962689d2f50188fe21f9573d6d002634babd74a7a5b5b43c666d9846e77be70f690ae0bca6eeb8ba650778925775dc3b018d65589b43dbbfc9ad27de9b1335770d7cc4de8f629fe52436b80ec748fd858e7402aab4376f0dd14bff832b405e058a8b6c7e9720fcbb25ac5c8ff49516ea279c5fc191864ca6bfd28f283bec604002b0c1e34d96acce01672833916e7b3c13c968c3cb44de82d1adf931937352a691c5da4e2f370ef6522ccb3a5546db984d07138ed396ca7a1df206a71f7b4e00d0a05762fdc08339de4060b1f58d1cb167daaf0712dbda741c725001b8591c37285a3cec269639aab5bfd1f76c4c00b85fc0fd5ef82a124eaded6353dd37c9cf9fcf2c2b2ec7bdbaed503a3b0633f1801708793ea0ce0bcf565097e7cd089fe97ff1fbe7295c23ade57f7c0fa83433f1a99aa28f77444229262b58b24774b92d7e07e20d07e7204bc49d874c2e9abf9fb1a57a43b76a9d1188e9276652a63203171f2a281dd07c6f22790fccee3146eccf4989f81c3a722780456b180e819934c8f79b221b9e6c7d8a200ebf23bd9b8ae03126f8ecb3f97941c022dafc755f5a31f707fe121893d20fb290fbb8341de694bbcef06d59c49254542fb05cb2d67ed07a5d5846e161f819bf38f78d7b6268bca8314188900b792490f3b23e81a4e2a74b57851341212f75a98c28b0b96c029712044ba99feaeeabec19606639de368dc4a9c882432bb6a2679b18f5fc36e2637a59db8240e5fb9340c24ee9a074c138bc333ba971606ee33052cc14f5ca3b60d4501c00aef12403d94676ea425b936ed28cea21c7c8c02d876429e1617ff3218d6a52cee0fa4a8e9338d1c1dbb7c008723c10aebb89a2246cfa6bbb89b7b7725640333ee1c21c47f20f56ac0f36706e9b392fb2ee67813e1ff7017f04b6b33f719f725db07b9b4dea062e7615ea50733068fb33386c17abe2549ee5e95c66bda1571084e9237d08ea8dc34c14122ede2f102fbd63b44dccc68ad6b59e52b0a8b14808e4b1e8f3d874f4c6228d47edaa266508a9656a8c60b0c9fd1c721166e7d34f61bcebe2514a6f2a02e16cbc96431a5aaf967703beb55003e6620fd4157d8da229e9c7026321dee071ce2b90a4412d90c8ac3b78d1f3b80e76a8fe7cade2b9b2cc62ef65697bc21ef5e2ceaa40cdd7d6036635a365e0cc415cb1025e34f42a5bd9b8b9207a8210559795c79f053ff61ef17877af4f09b25b519011987b0a2d868b7ca50a3d7a553b104ac3cefe12c7b589de2cf843fa331ab67167ae7be5f1de577ad58f07a905705953aa1b1939da5b4b5a17b3ba80390491d9bdbd380a8d11231f9872286bdb0ba2b3df952ce991fbfea592ec6dd08788e2ecd8340aadb2d1c191142e7c76d42ea495af9f6737be9198f4276b59c545e3756852017d2cd8d06d64777486e02ae4f832bc0dd097e024f494fbbae7d249115787798ae6e5d822ece5f856446667c0d8846897bd72df493128c76c21fe89309f6ce9f823c384bf6d154360685caadc8a0d6a9ba184572e6ad5d273917f94db2fef488b61d971e611c59499014e664b30a7e7eea40e17173c84a3b74066a249d5e975e6a1fd778eda0adbde23a5ae425682631f4952878c694d90e6e8cd2dab04a56193df591babb45cf5b71da73152aa91413dcd7a26391d1f426a7c2b0cfe3e55e6607b2155801a8ed0d73d199d3c8cb03088e89bb16253480725c2feeec73b962a404232de0583fd0cd61b754eedab3bfada6e4caa08cc5c6b1c20e918038502d1d1d973afc9dd73951c3612545af616e253595e7acdddda8d53f21c901dd78f4684864322413abe7f01d7d456cdf28db7f917a5adf41cf9617c4c862e4d255162f6dc24112b3876dc01e96558b1405b46f017a83bac3c9819d04edc8d7e66fdd8b1228e22332a7f8eaf6689f64342e47415485fa4edbe2d22cd0aff58c1292ecca0da1ff512257620b46356b25c209d75aeab31b5fc070fe8fff21f0cdbb1225c6ab5a45742ed4b61a4f192121a235a3e7adfc417caf09adad2959b179b4a74cebd72b8d2656191e358cc3015d79589954a9f0a9bea3ef876f724a6e920cd0e2b2555c2afe0a3a7eab091497b75043d8b2c964ecea72ebe8ff52cf828948b7712b51333eeb3d14369838a3138995b907b21ae7439b1acf0fae2b07a969aff5fa77871fb793661097f166e27fa58f2ca17ef48c43d0212dd1a9789cea953a6130b20b24101fc5600b5d765ddf0d792c7e33510ec640ddb0153682d64f877d0be8f14d6e3e73914e43c9b5a401c1762231cd2cd8c1300fd60aad44f050a85956f317eaed13924ce77869dfb3e59ed36378ee1f0f544b546818e4c9494c7b69526bc171136895c0d918e6f5d28f71e5712cd0001baff41bf3b61fa6957b935bc07a67ba10e8c3fa18ed239843daf14a758acf4d5aafa8a19e1b4497356d9f9bc139c742fb1735ed6e8412b873b753f20475423705953e1de029d48a35e54b17ed4f6c16cd12b960205d409ae407092c918453daf7693efdaf42f2b80cd75767a6f22114760cdaf1b17422d5d109917385527bbb8b4817ca1d0f656a1e36a4b980561c59925dd569eab5d44fcfe922a45a3ad641ef52dae7b0a70da7e309926ebaa5d058604041f37710f0befb8649113adedecf3ad650d3e6727d03eb3ae60a1b11c46305b4aef17eb84b4870f3356483984b8da78be5ba449036fcc0a9c4bb918c722407593e0341ee3a239654aaf7e93f79f3467faff2b521c58f960f747bfa19b1186042e4447ad6ad28335281483405192024dee0a8eb69f51916b81c479aac333e7671f7c4388f6b58f230f2cb63ae3ebb02db1d06d3211da7fb9b708cb1c3964998fbb387feef71668f391cf2a51893637079ad5de87b603ae9b6fa0a45e245d9623d7b3bd1d3add41c020cca15ab8d7879fef7b4644fcb09162023e232f87181d6d825de536290f2201eb7160b844dc329a1d805e397e2c11a6de04357ffce6c3f8a7e861ddac36d784231b3a0aec1e885304f5984a65ab47c01ada500ceb0f7a6cb5cfdb1c35a75f0fc1becc606759534745badd8f1d809f12b214996e29c2a243aecbc917e74e291206b72996b15df3f78b74e27c3f59ab6376b52eb1cb975e24dd20886f7fa2a0b347e1fb719c43f385d1ab441563c336e8bf9cfdacc358aa1f3be471d71bb83a9c6652d91415954fef1d8297bab778e687725266ac047bac190e4b6942bbf17917a77745eb6fdc80a97c38fd46c8deb3d20a69b4db2df8f034ba921d78f918a46ca5a2ae9d479d8fb8e0127bb51515d76607e582cdf7ef582abb14a3638ecb247a36ec114e7e6e8a496c6e367f901c8906fa7c3abe87bf4ed36f7116e01f41a57114cc523d8ac4aca6f484e676eb6d301a4ca2bb4ccae65a9a5ed81c05c1d0d23ef5f298be4a2812848a7199df1356816f941f72bb2d31fd5a5e9c693180515508dcee3bc1accb119ae60e1e41e53c31a54e567fed8dfd099c74300bdec7329dd0d891042ded7ba5c34a70beb3551ef3451ecfc53df33ef57c4d0d2963f51c3b9d4736fc013a71ef31854e41036ead3fd88303c4f26ff21118ac15c322962bede521dc4c63bb88d95f9b7bde21262f7bc213455fd913a783789bdff7b742198f7214a93256baa53d12de3ad38cd6c6d8c7d3b9c0846441ad446dbc58374a45d30ddec3ad84b5202a2a9fbbd25443caba803bf2aaee0881308abd2c8a995b22d16a7c6efdc4f0ba95eedf94501ba91b7f7e6527787cac02f4d3e3b56e6ccae6a1f36f6e7ee824811d88b434b8593df8e99cd9331b59130d9f9d26cbcf8b832225ff5c35c81553c627b6f710f095b53de663a190f0668b941bb3825e49c0045f63a97c65876c3c07e4f76ffdbc92ff0065a9a7c529fe7e8e2e09b7fd66edd87dd935e597092e774663eb582012d858f6147e6d92181be1063d9653073a3c898a3a6a3d070f8e26e1cc35f7e74c9d8931c0c1dd1d156aaf059997d6012b4c5317370e51dc777d2484738e158d5aee4956e4d39a6ab0fb4abe6df122a253f26013f54b2addc4d8fa6ee47091e039aad9145ff4c4f713609e039fd12891f866f97a4f17b89770bbaf4339ce860c2c02666b12c43b0f9fe42be37f0f812a02414b530589dd7b1890dd02492c6b58aefaefc367e9f525ece1a7283406b4ecea71b6b6b06551d5c033290c7fab8c59f682ca3a4fdd171f5808bd4eaa018d11ac09d16cbd7e07546dc9829fc7625dd2770dc140a43d4066f25785efec8e830aeafda99e4eb642fec998d4e1c07cb7225728a70d7ee2b6ef0798939a8ea5a21622e6a16ede09734c210b6665ef49a3a933d2d2d9e74ef16cfb3de037e37f83b82dab86c963f7378f9582e34b97a4939e7c464d2255c7970f912f14c7c6b5d3cae012df85ef27f6c641d5f5b01a0bbf36dc73029bf006307f6cf8958eeb6c3eab9fb65f3ea43070c1b8e30742538e06c75f747c5299ca508e2a18fd8b5e1a61548d14bd2f30187bc92d56cbbbf14c3e665929a9679c8597bceca047edc14351014375568939bb950f4f3508640f6e262281f435fbcc94b9a6b409ae641f907470c3499171a18cc0f4d2c79bee5b3f53c768439942cef962b7cd49e7d2c031f2a97b907ae47686d4d5025c54ee676f4b9781e7138930a5dc6f934543ceb9b5b29f31447f3e3a1e4e01dc315aad9b1cf5f2f159052524f02bea3d5223a701178dc3df631088b91838bca960d1b683dbc7dee00682f88aa81cd9fc29800d194006087f742288cde05f8bcfc37a905358e63571759cb5e2f6ceae6584e1269c18e6194cdf872fc9072de66494e7ec8123e2b1019836fab6ed03f57fba49d846c3997388ed09fb8d2d38ae3e2907e45ab7097f7708ddad81a3c0bb581b8b32ee040d502c127898e35ba03696ea80cb08e5a9c7cd7d2718d2a3be86c66f3dea21a2474974d3c9070c7074d04fe94db45dfaffcc9a9ba66c8684a76188a61bbf49f2a20aa73110bd356a3d50e7661f1c46ad3e8f5a5b015bc3c13904a871fdc552b6fafd79e37d00bd604ae01cab85d528124add340442be40f439f729241938979b2b9ac8ae04a64be4d70cb26838347e43152e01a213c3eda52a6524bdf7a16e477bcbebd6b7f603aa3ba8360607cb6a87a4feb184f46f5f85f9b6c94b7fa730d97f7b5c3ac3b0c1192f00d6aa19d2b3063493a01a576288d91819ec1fcd341afb734f2c6e3540d5b61be9a7da524072fcc683ed649eb4616a764e0a3859621c2c2705fc075e80ec7e9f53a43a90a17e7ceab868b2b1e9d3d6033c3c268acb9d14225876ec3b7aa7c391b3a2e1783764945bf59b271dae34ca735016a27001348b05a332173ed859f9515cba384841d6ea7f1d5a1ecf3f07e8a08e9d00463c28ad1d8831154500b9306da955550272976abe0220509b6d7b210b11520de88c347668c80359292f6ee4b79051d09e6647fa212eec548e7b0c045ea2759ba9bdc7cdcc175795c2b09ad92a7db5f1e5c792555a36d4b23ebe2a87d458c713b8c4a3068f58f124baeb3ea8bfac85f4b158cfc86eb485034de9f210e8d450fc40cf22e381295f08a0825540d12cfb80af7210bfdd9c18c47a0100aaa6031d11c3968184514badbfe23a6621febe53c45c0a654eec8e31ae082c959ee6fc6cdf90522da91f539d8091ed37fcab29f25b14fdeaeb2a1910bf3850fc1235943597bed5aa9b336a14091acd85e6279e08181b64e2b4c9c0724f124ecaef383e60be8b01f8dc8c45ef5ed8a4cc0f4d43488733091e5fffec2a987029c9017409a231aae42dcb20f77545d9691707532067946d796175a3c18e77f5e9141c61c819680fc500d301bfa94996906660dfe76f380ba75ec52953d0db365782be5e1aa5ab5f53d22662a1c81a03e720277747407e08cdab906d735d1cb975308f5894e3a07a8d8234ebd59a09307333cca7438e97e04baa02ba192ac1945aafe3a6dd42c9d935cae987fccddb9e9fe629b935e18151682bb1305f56a3261b62d98966f99feafc29e4340dab4c9d17f2d1bf83a162a173b5d5df4129301b75e07b78fcfaaeefc5a8f94574e956630c77805865989da8b240258feb156471521f34c95ea80376c1abda71fac9c371ba85229b4276b66d68f1b38590b553334d428efdcff723385a4ff5429fbe63ec441f7b55300f577e2a91b111c25eece61347fc32d76f4157d4329cb58a75d4af7065fe3a041ea3df486185a711ccdca7d6d1c0736ae8408ab75a189c08f91f96902b101490763fb5b72e03705df768d9d744ad304e35da8c107c72cd5b3abaea544acb472a8af6330369ab97d8ffbf9f2d25f357a8ec926f078578b5892a243e6d6825cf860a8a8cd7f0c32bc31d1ef27fb656d9b6c122b41e0866c858fc66093151a206408d33f3783490897bde3ace3fb9915659c0ce399817c17328ad3ec7b0bd99db897c7c8fa95bbffed2f6e1e5695ebc9d201e323cf7a707aeb027c2b582cb20ca8c38ca38236d6646c80bae5a63049ca1e2d9fdec2710373afbd2c195c684f7d4d7d608a7bc6bfd45f8868363c08ee6ac85b8427c2acd83d0823a51edc3d5780183263d9cfedf70e163f93f694753f3cc4fe529df51b06cad64f98012edfd97719be5e368703b2feb57ae809de683be5a04cdef70ae9ac7f28c614d2f447f0a861de55db70c36b685a607359e3ab05bc144042ab467887d83075de757d05eb9ffe76b6366d5104be7e4cb987ad10f529d599e5a523dfd4499657622ee73d5f02dc150df9cfd850e51f7e5aa6f8804cc8d364b10ee3e1a34d1120d1d438626a8b61480fd2e29fa6912bc72bbf27c9bedbde6903acf36ca90332eb72c4dd74ec74cc2a35d4f42a451d401c2137ceff7a30e4035dd58ac1782ab8588c2553afa4f7f7f23c9b60fba0c0a42350fe7becafae434bb4e97c7a7654bdc38f1eb4b16f5d22f2056bf26c46ae881c42d2dc7f5465cfc677a0fc31f00e2a2c36b152ffad915a670495e3d7eb027b0f47a9cd72f78f56b5ac44b51bb7299bc8d32c7f28a75925393f7ca3dcc496f7d6cf6ddf228d09c848c6e7b5da1850ff3bada59dc2c64b2256bfc33a76c722a81f9e75c39df6fe9a5d240efe2f06b00a192a6561309b364c0af60ff55e5ef8e592b056a40bb0381f5b1170c40285a25abd5cad8c1f8399f5aba449b8294d9a016da2e5e5eaaeb607e347813c641e79c02636e998889fc01acaf937141e2227ac168094fb7b85fae434ed90c58189f6651dd1b905b65f4bef395d5aa08ccfb55959b8729ab3cd4195fe3fef4557e30776d6650fd6a2836063a772a7be746f753843d2e3d6c60c4d52510662f2693b8d09e679d87a1fe306de3bc4f2cd64c3b6f7764bcba6d0c250affa308cf4bc26dadfe1364b8f15ed5732f0befaab704dbe4592ba9672bc06f88f58f442ec33205c319ef50628bbaadde79d8e5ea6490aeee50484c62feacf878077d5f8318ab4856573697ddc5352f32855308c2ab3d54703f3cf377f9198f89055e3ce865ea47eabb9dc09e57db06bad8161e36f4b5b773c4fffe618c33134e23eadfb5ba7d52eb8ad3d5c9db981d3609afab1b206609e533eb7e64e946a245987a975196179d25bcfb7b2ed7de9e4f7385fadab4c0ea650e5c2ddca843e9fd03c3142c0a5dfcb3e9e6e2dff39575b9feca41a68d8981253a3f0a63f99cb127224bcac04c5884de6915f6018893490c93f2d305207a52cb0de2da2542ccd1f80dc975c98a3d714954e18e7430104c85f3ecd3d8068cc19f523648575ff053517400a48308cde3c8ae2f399ccb1f577e16aa5b578b428d7e4d7dfa02e20116c84078f421cbdf039905c2d26f7c12737e9b9cf1b867cdee8fabdc30ba092b105a1cfdf3c3a5cfadc5fc4f5c36817edfc65964e3e0c477004e5265d85c92d7d85bc143cd19c27eec23dc090efb1575b068fa17283d5d82e31e90c15851b7e1a3baa931aceba1909715e77d32da164a563e0aca68c39062903aa366ba6bba664d129e7f406b4a3e6cc1b6716e7f041221786db46d3645f72c79e0de1a18eb406be5c8c2f7da3a5a9e87a1545a6f2b7b13f047f38a88084e6eee36830f0e12b23383fcc1609a13bf7d6917752fa758a490797ddccd6ffb8b2915cf2e0346d784da9b13b5b37cd3478675807a8659bccfbd039ea1253d642f0f08cd86d8f417252df543832d957fe82de1de816ee80b50c0b7040596aa9081b95be1f1d2d0c69603cfc70cf8f592bd622c372d860c5152397ee91af2a7d29a4cdf40537a00fb8927f9123215ee6b8dcc271542b95d3c02acc83622a84d820aa1cbc61acd568e4dce9265578b328fd577bbc5c3b229db76369d6cde95a2d37ff41602dbc3b3ab46c8ca0292f4167c36d2d6df44c451101a07b7613c3dfd01fde7409570da10dd4414d9cbaff2a19526a29a32d60930e40254e2aae31ade6b3c4f0e6cbf4aa83d62cca875c6c53b7f4c250a82f32df42427c7ef4be8ea8e13d101fdd392e9fb9da8b1afc8247e1a61320ed9de3240e04f439985204a33432217debda0f46eed8e3f459ecf0818c0354e93524e286958e44ef7508cbf3d2c39102b9ada1b0d7df41c60e7a924998f0f2d64780052e28a1b451835b461f81805da03c3f9e823e0096b4c542f3aa66fcfc0efda46e77e9149f8baf3c7e4012b3c9fe4864b58cea568286032bf6dbecd9f617edc311d36e6fedd4da13956d9fba1e23f43deb4eded4857b7c2c379f0ecbbd27ff7f7ca497e3d99e979aa8986c9ba666a3a04e398a10454eb3f6a65432482359baa4b1b1bbd80922b9ac7ed0657620a0d483243eead98c2b393888fb54693b347724f6bb420aa43fcd24ece66af8e55040618b83ded9fd8ae0a340cbbbb8c658713e97eb9195adc79412d04bf6c4d589f57df6c5a4438a1ff7f6e3f73303837b7008ffa34f34dc0770a784119785f639997464f4f57dba734a60d9c31987b18fd0e39c28982dba7aa90b25eb622fc56f9a290889e4c35363645829e0e03090a36cce81ebfed87e6a40ac701fb806863cd978d799eea1e9625cdb8abd015d070397689deb4baf6ec5e26536e4568e93cc104cfb5073fd982b229a52d432122922697e4cbbb5cc0cddcbf32211d8e8b73e349e599b3be6c76ff804bea2f01f152e1d5af40fa86ea7ac8d15ab0db2f26e39542447bd4f6eaef20890139a57dc4f59a437b635c3bc34f11d6aa2c1222de1cb98ccb2c176ea2f7f3245a798f427a374d7664f5929483635e1a836974dede7a5790f0d87bc785e3037168cadd67a1c04da63ee92d85e9b90d73411b773ca1d05191d863bd780c5b52746fb0250015770bbed29b2fbb5b9a54d030bf9cffc6597fae0b4fa66f7e2358f31fb3bce4f1e48e7b0d2873bc2d8b2c03a7ccb9ddba6a0d39ea556234d806c7e69e06d4a2e5695e3de1ec11d18f7b37214e9216f0b42c39394cdd14068e46938c872c8357d766f8bd5c637be2e38184437d6c9f6570feec7ad207a7c35ae0274715fe8ee5d23b5b7dc062b37594f1a6a1af97a01bb36474fb185509e8b8a780ccac0bb6da760061f757f5f38ce24c62012cd709f4051c1a82a1a8fc93ecc1cea5f6616856931a039f8ca9f81d7d2f5f5c976fa26a7bc32dbc0845ad444107125634a160b82240cb096063c36eeb04846eb96a6c884e9add0f3da032451dcd895a3298abec77a2d7184a1aff981c1e779d9384aea59fbeaace1034badd0e4090702bb12b7ae48d7741b25f4a6d6478946bd08ed71e71035e74e97cfed99750eb8253377b101c34a12f567d35e39c51a413e7392f24f4d17ea6dd2d489e7a86067a310eb65c70475076a0e31b0c2da71b49c5129c3c8ff0bd31c9212a05f0f95e56db19d59bfe16d191b492df6cfff421b9ac4b5bde2d25c940b3cfe569896d270a1ad7fa6e01e0957fab5b3eb3e5702d47518e08384d516115fc2a47ab2bf51201ff10a15f90f837c5d436ebe9cf0d85e00aca616d4228e1713d3962c801778a7eb736e3cf2778e829dfd707319b69fe2999119fd7981aa2f94e9fdf3805ffe43616589bdb13028e696c00ac2204b0c6e63cce5a71bcf03c98f3729794f6c6befaf1ddbbfa1fe11f41129f1adb3a4b24d4ca0a5f2c103237d97e6c2c06f7e93639d59928ce8d54ceb9a2fb9ff07a7d707c479cfb46e71eba56a9bea39adca7bc471d4175375375bfb1987dfab86336bae414b367b3c1a00d18d472d866acd06be82a1a99a42e3c9e5c9e1fdfcb203f34b533abe7d7785739102394ba91ed634162532c59ebec427f11897875b2248c9ddf63790f013da05a7b56b1ba8405dd5ea16998e4e7815fac0505a25f47f01a4982c4e6f26cc5d3a0f73a08cd4fa10c5b849c99c60f1454fea05b28496ea8b451e996103e40a853321a8561301971e2e127e7a97e0f9366b5442939d9601ed7f758bce3786c26716230e89a6f68381dd0d35aa20527c57f5b8cc0d96394bfbd729002f4efbe8876bd30558ea057f8fdbcbcbe21cac43b6055c7e5340b3eb1f6fad63b4f1c7036b5f733e87b93d53e80f0250a1a8c968d5eb1e9b99fbc51813fcab89d01e291abca77d96bb1bfda326f22fc98fcce64fe06b4109e882ac8af8eff5b179b8dbccf244988e620b5d88869cfe0e14ed3d1fb20e00417bd905842800e84f3594f874d303b798bbd42f1b095b3784901481e797426f081e05a339656dac861455e0171c1e76d39637ead98e5bab96538a1856b28b5aebe30655257fd2eabb91fedc2d26a9b543b9799805fa5a1f0a2e6a88b2fdc8ae67815006196bb01d289459e6b5655257114765d1de11567a91498cb2fdc29a081ab5359b36ebd038db043e05303ba44f738b8698c2bfc445373a6d1272c6f519a7529f729bdaa042f53cd526ed9a28bde831e099a95b972f4644f12518e62a6f2520727cf6add4ec1709fef73c62059395e212b69d08fc10436268838230db2222cd255e573f6c131a561e295fa68734fbe431a6959e109218c2aab5ce07373d52a404ded350b61613d329f33f156a7cdabf572fdaa5b232e055c57abd930a290c2152a6b591f4acc6219f5054037e79597c2ee4202abede508788333298c88c670ee8949886e88aa7e2a17c043dd04b147cbc29b27757438f0a46b774e31ed0a71d5d618a53714d895686ac8669837962fa35d9070f9bfe825144b2a62ca7ef71e59d064dfd5c0043bff3a4595ea0f1fa0735f3e8f9b6dc851013cc19578aecc45ae53d9ba5d06aabe98f903a51638e4ba902f5ef234ce93608609c6e8f8cef9dead068e368e3478bbb150ee6e2092621d3fe475e87f7d9843bcd9b2a2d3c500d00500de2573306c83560e8b51a14f6c4198564c1000281c3bebc75ef5dac90135e43703065ba871477233fbea8a6a88a04b59bd051d0a0aa0b03145a24d9a431c3de58ef6a3f1dba61533639484c87c8db6a27b8aea082e15c90df8f422163f1006fea1864868b35a77e0055bff4fbf798e58254c78f6c068277224e9b36b50fe450feb616f79238d8999695cf4e60e7e4dedaeb5bae7add2488cdf2c125f727f37cb118","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"d3ce226670aee96c7227ca9e69e53809"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
