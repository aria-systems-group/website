<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"5d24392ccc54fd0a399818462dab5205f6d53a91b9593f1aab45ad49f4939182fe0d9d15fdcc2b9b4483083894253adba95a607c7d25a63a6122114755c508ca08020f8bac6bf71ef8236ac7d7117af32a11e9dbaf7db9b3d6332f46c6632bbb2a32b69f409e6074e09270bbadaa47032a86eeb84bcca8904243985cbfa40373c402057e03f6dcdb9de6b9ef3de17f83292247a3363c2b17bf4d0059cd41fcb54091ff0682abd0d66de201893ca501b2b129142135562652c6f2a5e03ab6aaf7002f7c4a3fed1770afa09773a3fbc042addf7d74f18a010ad740bcd99d1bce32c1b603ce4f242c04289fbccf45e3db61b37f94ccc0ac304993736ef7e1638fbc5cf56256304dcd2f14661293f9cf8d7851bf5129afde198f19a7ce504450d231dc8208ddf50f960379faefa5013c8fdb2e49b07366a3abe82846b8c0227b2e4c001c402cacc48ca0853e39cc1046c31f9526199d34bdfad4306bf32db2e48f179f459f0d43999d6cda6339dd04fbebd1e32c40436d684388d67b25423fffa9d07a955607f8bec8015a412d45aca853517325814e76b01a5d7ecdb814e13e0503102d9bf2acc50c6905c8870dc4d7e8bdc103fe272700925be833ab4aeb646d2f38d3cba1e39858d1c0bdc75ae9c9835d45011a8a34009a10fe7b4c283af8faed828b86f1b93c7ca78b1cc6dbcb27b691280a35023dec4df73c8fa2b1bef8da0ac23b4638fcdef3ee0ceca9d97f2fd9051f7fa3b8b28e3ba70b79b8d169cd5650ba892c21698c4c74995b964054a241b338e7eb52ac662e706a5bcebac6746b09cf073270590163c145912983adb5302a021746871e99c2d8c3c8593944e956b6353da8650a9436a55518f18a88e36b39336f8dff49f689d11b0eec124b21df206d3f1cf5be93d6f3ce3d8dbd8942c24eda7a574c1a237837fa3db3aaee774949fb79ade3367cacf9bf00c5632f3fb34bcef3732c644ba24622c1b519a4eabd4ce0bbee45fde44c1062ae2729c5f6400fdce42365fbb9780ac7286ad0c302bb767d0ad9347822b8d5b7b271f7510f82858e5ddb197ae9c703965c43dcce4f336159282c1539358483e606918dc639bb94e2048a54a85d9bcb356eec9f824c388d14af2956b00bf10b508b6eea6e3fe92c930ed0acb8b2fa4c5abbe93b37f638119fcfa2a35d37e3330c281eda816e8ab3fcede96ddd52f605159386c20f3b50f7fc9ed6b4f97708f608bc49050f41cf015a95ae810d0c1682b5b52ec61148f078231d6782a1cfe330d2dc82103bb2b4bf94bffbb9ecca2aa254b32cd09db1b6a04c5cb628db4d2d2f854719db04008199d7faefba4bd535c64f4b853c33609ae02bad3cd7a145bece8463f47a0ef0011c04f158c54e8f68e4a7ee9c19e976876aa8f0f046eff73d7aeda56e6a40e9c0bb9ff8e7b2020939ac0a6d7ab66e97205e2c3abdea7f680b74696478299dcab78a29b8de9987ec236ba629787a51d0eaa25efff7f5c75b0c5546a4378d162a45642bea9e1358a3bacc9d9b1e3906490f1e2e919c8b6df0a324ead9b4a4a12f68930990e09823fd084654d524e710e45dd01ed1b9df90c0db32796f4ae1193b736d38644147e32173483141eb5e8572f49df8e3f6cce2a918fc4f72fca4f6eead52f0e651edc2a6949920cdbe7b425db3e9cac3409ec861bac646a88f6a98734ecc7a810696075dc30e6275cdcf45bdefe1b4a7967306c83308940751268afe890965062a73a43623ee4717b01f2f569449f6f2e79d313672554699d38cdecb604f54490fcb7aa19b7dbfe69b19ae2664bfec0eaf7ec190caee8b43b37e394cf52f6cdf89334fbf671a175e18cca0608584521adbcf4c535b39fb3082b25f713b42f72c9f1e8ebf2bef142636390b3e57e5d10a1dd07e238e7003d855a8d48b2717ec5b629f9e876204ea3e3688e15f28f73b4e8c1ab7300cf0f7917fcd7440f30ec77a7d2904343230c24d4cff3438a986848ec5635a1e1ebb87a6d63219cd65bf59b940f349d98dc70013aec26ce1e3f3e7a20e9a6c85fbf9746d09e84cd62d7c0ebea3de6e2a43a3da850180f0f7d6b1f11bbd9ab32a54fd39bb9b0124e7d7945e88bf6962a95e206d78d2f852ab1a3bafef17456790bd5ee5e57f8362684828bdd82fe6ff814909d369f8be6a48e5d641ec05f6c8d0cd948b937480584bbffc1b433f0545e6485d65462678c3cba5baeae12910a98ab1b77c3c346ef4124678c0a7a09f4ecf5095345061e19a4b468e07f96459b0a6ce5a7df496e16ae01dbc3013c8563a0e1b7efff44e23d5d0037b0ba8c2b16a9ee954ae389aa394c086986ebf37368694ad367e859f5a5770e975da742daa310243a64d6c863f4683cd263735be54773456d4207a35460ee81a06b9fd8dbb1f34a35cb1c137220f3fcce921e436e1587a7db19e3adf5a742444661c4d96506c90e1077cfdc150f518a7de5bba789b79198f342bb7c26b76bf8f322fd5d6663a13a0de59423ccb79912abaa3ee7167817bb2591f10a99c325a6fba2d485cc6c3caa87ddfb1cb75f35908832945f075675f6b6ff164e440d6b7700303fa8213d3b45849012cf5247472965643070f01b3e2c564ee5e04e90c2854f78742ebe7dab6c4d9842837555fee564d75dfdb78d7bca0da405b7681d93f9c34013da77b14970dfcf97ab58275c2c8c4afc51fa48fc9491c5d9fab9d9f9389639d59d497cedd857d7552dda8a953698d4dc491ead2a96bb2a6493dc74cd2a445dd2b433925b4e1032bdd3cbebe5911ed13ada11f68a6173b6c2e3523216862a36d985525b1e8523501a9fe3a46c97aa57ee46444342becdeb32fe26bb4a9bcfa62930338fac7b4b5a247ce63188a2f999bcd00e27adc6b790bf55ef5bf95da2ec1185c3acc3669f393b166efaa4baada4509a3e17ff786e36e7bb8de395fba887a7a7060e3cb782af0ae71b4bfaeb446ac7ff7e496aebe6326c97cc22d2074fb5ffeaf0c1403457eeaa1018f521f243373a54cb1cbb00988095ad7a38793dc83f067ca369d8df8175d814bedcc56a737f14f15b361982bc257f0d90c5eadb830028cdd5a0ff7925514b4d4c3668a398aa927f03dd1199542135da563fbe2fb8327eb753e73a8cc7f9c41fd2e3da60527e70e02f793f6a1f74be4412a3cbd0c66e1465cb165e0ad55c1b9ae5f586afd0e79a2fe1af39a372af4edd6243e2f74119afa35bbcca48695a7b452415ef8b0deebe395775536cc46c1d6ad4659ac567fdc073d64542f22f556a43e83f1ef9a6947accd9f7fa5adfe867d2bc3a7e3738a231ddc132ae58df6015d09b18e5f5873818a5be67d73e8287f54ec9a679f3aa97a7f7167ab14896a8b92a53cf61904140bb419bc49bcc15a4bfab89133faa71c6270f192a723f32dc91b194c154fbe0648b6ccf1b901f88969590426bce807e5f71535cf6ddc561841899662a952e96d0eadf44a85d59f8e1736f7afc9b559fe7698a04d4e1a5249a73930e1fbdadbfd783d5540196e3c510f7f20f8bc247a0ff9d9909c323b3cad1f1e451f8302c827e2e20585fbe45a1c5ab841148ab81004edba9ba6572a182149d184e7bb370d78cbae45cec965cd9f42d0d7b9e9905d8dcd81599d0637a972922362d373d034c9fa32ef5976ecc02a48f21e3120185f7ac92d46b826d49ecec00185cecc7d775976b6843ae77cde8f06293e5880cd3e60d4a73ca42e78415d8f875bc008f69022c72ec475a2063ae0f2cb75f9587394e8fe9bbb52363743689cb3a53bf091a931b4f9f1bb85854a47e102331d0b2388dd626698eb142e97000e6d46e3131d89f68cebc28bd89d9fb0de91695d6ab101ea5fb1687d8d3c3982b31a6f6f25c7e4786fac35023b74ab20925b1de180b5d9f00697b54f31cd6c8fb29b48192bfbc2500491df5e2d004fd9c0b919b7c6455dc661e78189ba2def19d8742f7fd447793ea428388172e54c18871d5948cc59ea60e5c3871dbcc4f68564133e9accd663b92b378399fca293c2965f35f8f803768095d227a98324fe98657b735132e388397ee389f3b829e0a0e491cc06f7273da6938e71d34b4e1e02c5c1e0f068dc421c389139cd00bc92e32b027a2e6a629c0582e6d4ed2b812fa179265b1a5e3786dba6ffffd98a801941f0200351a2daf3abe91c4e8b39911986833765d063c4339677841f7047cc4eaae212af74d0daff437bb32bd835fb18c5d8eb8d6ed0ddd5c5886f4ec62cf43d6c808e85d868876da64141823bffa59a5aaa1d8e55cf5f9336faa44e2cae86c720d48542253fbab982bff4643e77e2d146069189446ce057237b3aadbe18b088c7e4fcd1dc302fb3223e6ffa544c779cdbeaa5fb56851c6e88255fed9560a4d781e24f8fae80bd9bdef8c44f3c9e0bff1f63d4447e3536fb7f78563fad7f9044cc249881acfbbf7026bfb49c34963227571f30da678ab54aba0885d99ed36a0334c316574af7c0dfdb80a59545abd1ea0f41821246b5f1ee5b14e266935ec573d4a668f48f4f775b447c4e5b5c617dccaedd64aaa7195a81c8ad83fa62a619dd8c39c58649df4ddb2263c2d729c85b29bcc604ea757b5d3a41304540f5fa02de195688b52b8a6eb97007e6ee769bc0aef611b7eab29e4c73be4b4d8ac20604a9ee308287d3f15faaff62b8a3e8677188ffc0c46092cc0e62cc412c5c8eb92bcb1a34bc77bd96e9ae559a19da6a38350aba7104bfba5fa7c215a2d1d9f73eecdb939712ece4c433cea5119a5349c4360c4af1788feabd3ca75bae1113f40d7198732cd4bfe0f751850c7cf9ec444c9a6fb2f1914fbcba12f72fed15def01bd7d7f89141447a6e1dfb060bb823c1fb16d5d8871459a354a86219118ef57c98081c61bbed0ee09346dc07e7bf9ecd893ce4a679b4b5b7c9ef85fd92683f599c72d8e9a6ada6adff605236e9caec73560b560a0bcb58197e163267a29b6a0701d614846346741c9e2a588602632d63b239f51a0178880dc7d7875aba20553f1d085e32879883aab3a6a45f8777cd94d2f54ad17a396254f2b9b2b3fd3d5b55069ec8d9ee7a417861a7bc1d9f005e486fdba96196cb321f598441a3bd6f2a289890945615d785075b379d308f017cbe953fbe4a5fff62f80ba82edfc79afba2a9c00a55fb21180d76b82e95c926bdbb259016e7c3f3fd535c0a39f9df70c6797ecb073fbf4efe20539b38f7690f50b1f85f46b4e943147422ae374fc9128bc21a65f1f3ef6d85a5551fefabf9fed7f86b70c7a1e756c339f6ac784bb3141e1336dd74e6a35379e462d56b7fa2cbda4610d8f1ee3e8dc9aa1cedf9bd147fc68134d92ec5385c169e23a4f4ed3eb4cc0d34cf99948b0e24cf545077b645119766da1ab5f0f94f2f1c3b499653067608b0bfda2f7009d059ad48eaae8d37e0b81e9f0ccdf3d2f311874bb72c9110036c5db6295a32fb7aa163f0a379b1591dd40cb15a8ae4af047a92897a078c0e394ad72b06f3c6c2989d5cce08052cec2e799804f51580b5bffe574d17449ed64899bb2aed9de12033ebf5e046c38228e315ad368335f19e91d0db047e33b0188c881a480b23dccbf7ad9aada8b8c40e6ba6afbf1bd6e1fdf98b73fd3a9b9ea5d92fe7e3460a54d5a7b0f5f057722568c0117bc676196e5e76b24ebe2459c3502b9b2d370d12b9e12d725923852d69b93688edd5935de1b6aaf909a385a1259ac300910ac682e2b8f99292bfab4b8319d670b75094175d8282bada2de4b9af532add74e765be7d4a9b1339ce0b05b41922fce09d3e5ac9211edb4c2a9860190aa52813933be75fa979ac1ce515313d77763166d1f03eac4e4cafcca6a02f4d4fe45782b01967057b44c7fd5cd9e155af0d3af71248303f73cca81893878ef958a0f9e4a6dea821d7105e9e3424a3bfb8b6a299b641e565696bf3e21c6af2a8025670598ee44a56cd6934a64ff993db333f94146ace9897e29f61e1a3477bdb934c6699c7fe22022a64b7658391718a3eabc6e28508a3f647bc80da3ce7d654bf1d74e3006e7232af198bca74fe85feb7afdb0730a724a01fcc50205134b07c7d485d6399ad42700464ef24302e926112d024ecb92f095407a5e13025ec2938fa3ae339fb30bf77006f5ff6e122f5cb0af9a35dddc05be7079dba7906397c79c2395293fc7ddbd9e2f9c75b1b471b57e235d521024ad7b9970beadcfc8c7afae1d10976fd38cbf511177602ba6ad0af884d666838285d174fdb7438d9a0bb3c5235a53e5c283345e0bf5cb7e622592319d4a4d9387cf9ecbf9d00358057da027814a8ec57b39e6836c7ddf11d9992a8ade7ab1d1d26b0ba390230dd1029bd26c81131e3a210900fc6c73da62e37691b3ae951a2def71f2470f88385922cea706d3bf9fdf015e0566eab31acbfa5cd0e3971af946aec8b604fc27e10404ce418e116d0d7af6cbe1ad90036e499d7277752cf9fb73d761d6d2a6242c9eced7ab6d77a5ebf7830a01502667b804c0ef752808e5340f777ae7c38d1c8f5e2ee114565426aa4471da1bf5332db92eed6cadb4a3a61f4c4bce67a361ea76aa2f5831a3f65b2aa9e4f45bf945100114be68e9029ad3e579f17a1cc822bb8d7a5de51f229a7e96598c343a1bde371998e9ff001d97280f70dcea31941e41a9d90302918e1bf676bbc9af021cba555d1630530773865075a1ba8085b8a8c1b6a631f4bf54e3c6499b3f99cb0e2bad57e18ae3196fece9f0f55b833f3c975f1c1fd6ca58da21aa3ad42015ad05625647ce10bbede5a9b2372f2564ee5432a1733ca9ce38a7c0746e8a5765a4b95477d51920a5e9b94202d371dadfe382ebe10dd1785e5bea718236a0494307fe73dac0d73b1d8858949479fdccfd551f05957e41eeefd3d580ee91af9c6ac0624f48f199742506262006a1e088fd3103f944509584301c1518e01447e8f0a7ecb8b8b0496ba5225e23588bd7bde9b21142a336d111b0c3e17539136de77da753f99f294e4f94f5aecfc668854feb3e30cc4c7088fb380c493d076dfe8938a7c460965a6cac33382b44f4a4803212bbd50c62b1ef9551771e85f190df8bbb2573d4323b1a2da77280ecc362288c3ab441e6cd49887996dd874d81878ce35b22df66e9416ac4ab151bdfbf15c7cc121c45b07e5cbdc6631724cf05072d9c8d51353859dc679dfaa91f88059001de604489f991465382050fae48b57f7477f8c4ca2416e2f5cd90dcc3f031d8f00661f723f2855849ac768281217310f114b2a0e7739bc5bd5f7363c21561e4b889ed2057e7a178e70177a9a3dad2c1e85a2beeef5ba8c531c5463b6d3c971f771db3be87e2aa5cbe86a2e50d8078c9a97d747f368ce80eaeec719dacb354d38c5b980ccb6c180c66d1e684419bad8e58a68157c5ce38a86715fb76d30d41827683ca4bea50aed3be8e2c5bd91ba66c66eab1fca961456d815128a19ebbf789d6d4193740f96ba099141d4ba8b633ec77f5605e8e16d704099b19af6eae79fdbaf8e47df4d30ffe11a1e378f345b71109753d076a2c346675cd1d9e92b7288f771d1bea24c5b52e7631486caea96bb7e38689fd86ed837d2f7277c4793ff26a03d32daa31ca792ba8f7a412fb39a8b9bf4d8f52db75e25a8bc36278b82e381ee6fcac7adb5d0131802a401dce82ab08c0348bf5d70f5bfd3b735ec16b202aeb6d442861c3e8c8f4e5f0daae532f122b2fb24dde587d400d4dbd719d7320b80aa9d788b9275a638e3177d7b2da65d9e05bbcf460fbacf37b4a043831627f9017f58b2928c97d5ee8468cb0a411446b6fa0c703eeb702b20548fbfd690b1815892fce42ce542d8edc6b517f350447514a0282446da905dcadd198f4a7c0439815c94b6426c038359e3504cb004aac1f9c09c1dc56699a9145563d86ab3fe776bf7210761c50033b2b3a4d98fa4c53f4fbfceace0ee179d95e1fe0b31a9c5c408c6fbd26ca3eee525ce937c266e95a52a59de5bb70d1661f7dfd079c7435b6a419da3f3e040b7563ffcc12d83a5795523efa00675c0d0e0220b2983e839c100a51cf9c4c9041955153e1aa5a973b2e7909b8341d9536587cdb4dafffb028ba66b901ceffac6fe7408b22787af7fad1947f7bc73aace0f029c80f1dd45f7b76ea8ea8f368409600b47d775e10a1ad26591723b2900abe6f4d977e1a6d60a253878f4748e2720f9b97ea22c3a993291b6927850b4d70bd4221afe5065096996a97a46a5ca3dad58d44de64c5b14f26d1591b7e01e8efd283ccc64ef21239ad3a924eb61eab410317ef489075e7272a51c1cf1c0ce54813819044f6fc7d3ece4ce30e973154012e2755f55a8336d4bca980d96713c6a926e2afadad7e071467269acf923d8f1846f69c713d344ef7c739f9fc0259f7458f0d68d717430310b0322af7e52c8a9990ba2744ab589180e8d56882fa3f36db7929a42952045989e84bd1d6026dcf3c2fbbeca1a3bd122e61d40f572ca1a4672dbfddae98b4015c0e0c4c65f71d3bbb6aa7a80ff2037a75f4a8b506cb424468a5e3e436d9147e695879709d6d0f7328b2aee59f39c9737fac5552d9db4bb5b68451571243c5ebed7d71de42d503111dcbf54376ecead65a53fdb19ac6e4ba7df997afe141c4105c2d9269ff001684c78a24c0f1dcf720a0b613d08221d96d81111043ae5f291469c81d53e88d7b2a154078f7aaef56b2f0710f07d8ccd8568d461c4afeef6abca516a9d2722ef4c26fccb5d5031df5bc36fb1883f930a366586db2b1cf4f5f7bf912d7d7faf01f60d8023601c88c020f2c0c3382281881dca58d5e3cda24b38ec1dc779186028682087b4badf36d7394e6e84bb3c654be614398a7467934268c27619d52be182a4b1d49510c06e08f149be9c56234c55b6964a3d262799a0ad2253c3ad3b23d62f033ac4acb3cc5f22ffd9a087274aed1c78196df4f81e3ca537fa8cc78ae0a14243ffb82b3479d870df9918dd1520897deba52c7641ee97760f67f94f2cfee1510ad75dc908102e6b2078d74a61572328cc31dfdfb5fcfdf591259a4aef4efc94dc070f6587227dc209e0dc63f4ae56d6c02e66122d3188addc1a6b81942788e0477d51a6b317a69ff0e47b2f07f2bdc9e02eb1501024482d78d3fc69d3120871c5813427dd9474efc62e0e92c042f9bdaec2b7b4d30af862e27b5c06f374a7a58ad703b36bfc74ee8d4d4ca345be85cfc6b5dc8e12004b2b7bcd63f7f695b02567023332af0fd7503d724359cf674e72146079f5529d8faba63fbe0573f7997843f3121975ffe813ba50d3c398dafe8ae462f7a365beee65ac17d2a1a9b081ef174f9fd509ed5d9c90d7c3f047d3d3258b7b7bda1620123873fbe1f11503227c5e4292e801a6ca840f3076dfc45937b0fb9114c192422c4e813c2139b6532cc59738ff104438485f5643c42ac2f121a64649fdf4e5d0afca2f4cf5a1813db92d383add1483a96f5e4f666af8a8e1df0a84cb1693ccd8544bbd6afdc43467b93121dd22c1022b8413f57f73011363685bc6c2c6114acae46df3323b118e80ed5dcbd37df3f612de9383d19078e35e9badf1a69aa5eba2d0c283715e2931f75c732153f4f6d7cfa3210937d06647afc68938bf3612097457a86e853bc5c1aebd4e97a184407294880d484fe86488a61c858c1970a55b21863d64c58e5ba9881cf4e84ab88e6580329c908db24d42ce8d4bfb189c09b487a7d7b36f2437a1db79a749bf47f356bb282913f1e66db1e0991c438d6af917269c0dbc5cfe5ba145cb39b85d4fa5bb472844bce96d5946caf37677b3010956f8fda715b43aad02ebcefc37ec6dfdc43436299bcb5a17df796d60887fc5066ea2557454e34a4b6e82d19de077d142fd7fdd5d78b768a600b3df2d9d999c600bb8777bd3d8559eb54e5020744c9b76ef2fa21be79bbb594e286424d70f5e93c40622730fb185c160b67b8c3d389ae7756a2922bc696f3c22f20f94afbdf291c1ced237bf434559b85ddad4c792631d5c67959541e4ae0fc4220fcfc6340354c3faebd4768d6ad382f456a7b4ee21c1ad6cf76115b4d2a1be4eb607b8f8bf7163590e8b5fb2b5f6a7e5aadf7f66e36a2c957f86cf69a33ea40477afa21d584a6565da34af8ac34c01e6127fe8015ea79f065340a605a5c448c2890dca40d280c07b78976caa7339e75cfb3082ecfe1becc65ecd8d4458e77d413ef6da0c7bf609770e7c5e2e3a62d1e0d715bbf74af56a05e73cd22ea41d6169993fd815289a19173fdd4cafe52460773e40204cbd1ffdb7631ed435fcfbbfc1fedaf9d5712b50a95b728e689d4ac68294a7a0a395179ce7ca6aa2f6d2e00d8eaf9edcac9a06c660bf177f367a31c18373ba4d9ecf659c267bf6f8851065875db2e27527fd58b1ce1c802e86151f0d55d595d8e070d18215e64378ad3c0e62600efe385835a74e21e9a5ef279bbb04d869c8206fbf481e12ea280a954a527f19adae8ac7d482204efb50f3b3fc24367897412007bb4fd7d8c3075e7037531bd8d2766077960be22844515485b6ea769529a207d16016ccf7a3e4a6c1dc1e3857311e3204672932c436b9575a955c373c79e40b3ba794c0ac2ff229b01556b2af092ef00907ffa86217037b893f656658ff0b862b6dbc7e1cbf040792e0128e63fde826756c5a7e0263ad7c583811d413dae5abfbceecdf8f3b7165fd2f9a1c209e93bfc2ff84a8a754bc9e6de63e3212578b629b0134192202ff2a02bf51f4353be56df084b56b2b8c10f0784f4f067cb693760ec5171e25e97d9c270b502ba45b9e873fd93df9066db51019d309b46b7be75a43a00d9bc3548af83ceece3cb182d2fe96e497ba5dcfa063bf8cd343d06b911aa8f98857e6f277f30b82473aeb552fafc7173250995436a0e0fc7b9048e20129502119250ee5b4da620c872993bcd484c6c515cd86b8355bfac0a2a9f893c179716c4aad40417684a70d4a4e6ef78cf585980d21d6e4050917667a902d4be4eec7f520cc39fecfaa0c85c898150d26c42b90d90467e12fad555c0b58a18ab0338b9b778200c8c696b8410f4fb3392de34ead61157fdbd862e8f272a06620a7ac3738c33353914891daabc85a3bd12777440ce6fd3ff34cf32d596be06341a9fd7c1164bf456a8519eb2df7b005d975190c4ccd1bbdc792f219876e6fc0c3cd040efdcfcbb5651cf4146915efd4ebd115906bbd830a01ddff7a4b96d2e7ed51bebc0d6784f53c81442e1b77ae215cdcc14bb738895a2ff9936ab270f5f15ad9a1fbe576ef4c8ed719392931b62832fb64c8ce61138f66383871a99e52c0ea2a0988b125759d96f6e5320eace05deb1992687d625b5ac2b278aadf914a3a4e1c6f03d81502dff8b10fdaae8a84d02ecbd3ec3223fb2473b38e347d6748739fa8a93a9f4c57563286ac52f53c89c9d193af22de5f52e7d40aa4c3f9c26b9531cc9ab8fb809eeb3de0580daa7a3ad2c5a41ad16dfe428bb4d568aea6c07919eff9a60364af0a7df9ab4a5b0bb299bc4d123a36c318c1d0c69601e3e021e0f9ebdadfce68f27ac74fe0a31b8837a3ef21165f4bb9aa5d5e21ff5dc3e949ac5ec9180b97d28084a16526b3d5177d2dffdd28767d9d3c355cb8d33b763ff927abc26f31b5c34c09e3ba1fd88d8faa4f87770c45c310daa2e54567c89b69259a875e1c5269d2571a1000d05de1be8b5f77b0c8f7a2be34e4b914b5d76714d6edd621764ba77c1f5cd4306c22797f74f98e2f96684c4091221666a0d780dff8c39712dbd9c5eb147b92fb8f81061a2dc58c64e854c16c229bc0dbca9bd18495b3d4e733189e62c5433ef511b9c666cbfc18e5753284a0396522b1591525436934cbe7deb9ac55468f561d05efd60cc4cc76eb250e01e8c3236abb0b268e5b12a3679fce8687366ca897c1fb456f1d35148b3fb2bf9b99eab03d9a264cf5f978ca89601ddf1117ce9c092cbfbd7b0c49b81cd8aa9d3f8a11b7611efd6e6f30513f98a7baaf7faf41d95d476c7a23d111baa2fadf0b459e3294a6cce0b2026c9e0cd47388fcc08248ef57698b8f3a285bef4cd339161b7ac6ecc5ff3de99c5f8d7c8cb2ffb23267ed2d85f392b3e0b31052e4aea789d11680e21b6fb552be9cc95b178c4b862ba321d4884f3e0cb036d60156fa8688280a7e80b1df81b0f01a8f70d4de731e64801c3e495fa52c76d0feb1169d00698c0499147d8fca22ca6f0652df65550b52c055c120e48e7c1b6b8c60f1b95d1d2807675f86470f4c5cb80c16c34e201d553eed29295c9f3cb19b17c5c5c83c15e5def143c80f79c4b36b624e5960a7b891d72d68f58ea15988fd04e43687273f45f84ec8b008321fe2dff5c6971ba75a2f8260a3ba4be58bf681522ddfff5506e4d9f7d39d06390fd5a7ed751c4a4b773e9f8d228b8a5b44a249ec4951bd38b436872f07c2f366b56ddb69bffdf7767c595ef8384a4d9f9ed27dd77e5f639cfa18d36c7f430a30ac17714c937f51210a1884f20c7ff81bf4b0321bad50b42d3a80311ffa3de163b755977a83fe2db9c8dd9a6e70de2c1f67b1312fb7efed1bad6c8119fea0b0fc53d8a6319daf7e50ed8b52a0efed6071a898434fd4bfb3cdffc8ed022302ef856aaf3ce6adcc654ab9bf4768bf82feaa89b5371aa38ceb8b1eb94bc94fee07ccdbfb09e4f7a63d2aeccb0feb126692b69182c6ab4cf33a60ff3ae3635edafce100cf58eee1faa37fa295185df76386dafcaa27005d76414bf09407f5a338938ae77698b3f37da16fea7f4fccae7b5658ac731aa2a8a5e6716747e2c9e643af332d0da67e85de56ac85db9f6805c1a841a90c7fd1fc49b658b6803af0328b4ed9b556b4bbdecd9be7242b75c5006cfff9a26ae7af276be6985575fb72b9630a74b6aec9236b3ff18bd613be7a908dc87768a47110a4f1a0894c430572d36b04db0a9cde696edabbc62f31b3105762982bcab9b4e4e85b23a40e2487bfaf33832eda17634a5350ebd86eddb520bef4c540bec17059d39f24e9877f27600130e316db9d04d2af4b3e829991ae211ec086aaf7f10fc09641eacfa2fbef95fd00f357a5e1af59ca8b6f64b024ee71892d39a7eff1daba153e54739c1a9a4be5affd37656d81a543b313180b9f04f2d79e0689da0aa6450917e7a3e90d09bba411c01a7747d69b0df7b43b648df0ed238a837e98de090675e4dc23e4a9873d30a46b833111cd37acf3ceabe249ea561c6f9f89653d88b2f256cec48638929a897bd0b2de7476cfb1c87795963f56021114135e5ed9bb0211cc7a6590f7a80e33c297f6f2bc9878c914f72cf3aa0f847545478a0d30e699201cbc2aca200834e2e08649366c60ee5bde3f0475639427b66e544a03cb0091364a8d52a65686f77faaee97a4d0c68cb82e402ebba5f0f0a57a326ea3c53c3a3377388e5f03c56209be0b15e61f537704d64d6c5d9352760be939097a636780e3ccc20a069a7442a90b984a65d1a826659cf94d5e87557048ea5d4a11209ee6ee25cb7176206706201992d4b7a0a0d8e8714412c2418fdcb76341cf421ac2f3f4ae513e75905ba57f2483d7752ca5be6877f98dbd81ba7157987275f3386ad597651ccee5167ee7765e043162e172da152e1c1aaa474ec11f18f386003e22d414d57bf53b462c5b43f8c3d9be1e8ee4c90535dad61e1c3f93c5229295ebdb1515f2e0d2771c0e50fffa2c00f192af46d1f7472d06e78964e15843513ec7a1a17a6c61b1ea445f58a95271ccd8e6aa1ef4f5d2e0adc9f436ceb9b65432d717f7d16d4f46b1b00b2236db9909188914d60eb73f8852628557ac12f477aa9d081ebca70de29e1dafc9e20e171f7a9629ed254fa501f34dc741c975a9c3c6c77d90a7133472cae6cb29284a7b0785acb6d901cfd7710cfbddef239a8fa3c244349daf637827d237216339891e437e77cdc5251b10d749c011e838395b4ce85b9626ad9912c0f9ffb5d733389e56fb9cac037f019a358a52e5de761b8723cf48597f5eee0914a00f990bc5cc1dfed886c60e0dbb2db7e011a7a4adaaf194369a5eb84f19f1e9b3b4c1efeaadfff20f908f050d7d6e906a5009b52a6db387faf63aaa47aaff6003e7952a6b968814e1844dc500ea2ea3d28fe977b165d0b631b615293d5cd1f0ed1c7a6a9f288c727adc91651a692c6db4f41a0da958f922d7c957bbd7c6585578e6c05eea912397e5e8644d78c0248a3216fd4c685c29269ec4d8933f5a28b71bae425e09eb740afdd1989980b8c52e7818a7519452f27fd1eac25967c66181c6efd90c126ad0e907696b6761be6de4902f53e4465f40d0cce84bafbf731e00180a207037498b9b8cd718a5882181a8609e1416cb6a1050d87dfc037c98d73a2594831c136e04a02bd5e8a6bc093b15a5e213b30dc5d60e7d38b2103f5373a189ceaf3afb99b757815a62455678fbdc069feb86b1e9aca3953fb42d1484529cf60363c0969c4e21e9e169d4cc14e3e54684c98fed60288622e3a8b2b27625352b04f9a70159fa96e5cc4f2cfeada2e5e73c1fad4d9f6d8cb5745f29b70b7e4890edcb004e8be9af3bf17f26526c46bdb81ca868df53f5b3269137a049e30c61519ce582c84d3f3ba6e546c2b03cc681049016d6c94e109b95d821042debdcab38879dcc693bb4ffbea473480cb2088a565fc34793c3803de37d1b3d0d928c0e6f357f5bd10eefdcb96567f37b5fd7230a967ab439661c0fa04a59602ef3d82b47875146be7f70a4bef5c47928d0f3b2a5a4491442d72caa83ef75edbab7f7a4b90e6313d0d3550f312c5551c2de4c769cdb77fd3e1bb8792f46c84a9fea1436faff8b9384c12e0fe584d1c4b2179cc2a2d36b5b3e56dc4f0a1f2f3c79c6613d7cd0a884dcafdf759c252095cad7bea0f4a8ca64003973901be96c356a70ca38fe698c1fb5ee924d606a4f3b07fb6d39e20a1bda864e659ab336b4961174f5e3c3a7b93b931951f27a5997f03dc82c7e766d3c62809f98e2380b850f7646c2613cd955546edf6edb0a8a4446ec35d2c6a1bc917fa862cd4057dff392717c8a5893f97578d48d9accf0bc63e4f4a1ea27d84f2ed642bfd22f7f9f4a89f2c35bcedcafe4e6311796fc1ac5d272698535b2afc2e56c5e5f914b7015ad95fca671ce6ba25f52a53742d6d5164ec9816e3bc51ef840b834ef903615a66cb2f0ec303ba2b57149146c171cebbf388dba8df14809e46d0b336b10fa13bd93993408f719a3e197d675fab30280d34023bfae2897db53a741c99f132b1e98e828e202fc398f25f8cea3b1eafec37ad50d2f6f46e6f5e0503fbeb3f795980a433f778bc8079e7f243fa4ba76a357555248c6ddc98eb6cd4e9edc5a30ac632c76441ff9420d38c236edae61418285d51addbc2c843a6128a9ae24f75c3db52c528dbe1a381fce28e8bf3529b1386ec4a7d95cff27d8ef1392cf3323b0c61fcf4e1ef8b0090121b132d49dbed2ef529d98f916e2d27c2cfe5484eaf8bb35567c812c5f662619789023ae2b2f3897e2962bd4280a34036314bf20a7aae9d6e5140fb7817955c3b22a05d99a5d0da4174deda7b2c18098857f38725ab83145bb11fd9f44d3db68ee70bdd6c37fddb13d4a7689cd99d1825eb8917f08750e4eedb4ad71a20e580bdbde9fec9b7dee78028360bf4f1dd47c8048f7b15bec61c9609eaca1d33a791512d03dc745adb3755e4fdd3332b6bc5023cfeb31deab3d0c334a37dab58118cdb90c38c75cce399fbfd880edee35c19dc98837a6160180916f51253b1ab5668817579ab4c125cad56bb8684a22f1218c6b305a84c53eaaf18f8a82e9e13931f4a3abb76b41b34d848d8e0f240162fe654daa27006a3b895858f1e18b309bf4c52e623a7c8aad05e93ebf8a7531c7e9c173304076913a897cd6444f9916980983206fc2f9804a3fad67c3a8e6ccfff9fa4f9e5a2d79c4a701286af8a84bd4f9d6e860386cf52110ca99367d47a5b4f02f261674c320dfc815bdf6d83eba4b37c314547b8d6522fe5787ef921fa97c046b746e7c0eb31d81b8335194d0f3d7cfb53ae48d214cfc2138d85253dd39872bfe4352fd3562a7262b751e14c9d9a4c07d1f7bc419f8d34ee609f9d6516fa197f48317a51b0342be20c3ca5f03063b4c0f57aad04679089615423927ff69f1891d810270a41073d03b381924193ac4d5b1b699e9f6533f64be10700fe40675949a17295ffb596d4758617a04729b71b62dc1ed7ae6abe1ebda77902e2aaad5939bb257cd2feadb1fdf12f8df56d6d78f0a492ea81ccad1ba613ff8d1c4c2dc816a1da042503e957b888a274a52f6218032305d7c5de1a8ad05e0f532efaf7df896f722ff30a86d1eb2833510700677daa339f09bfba77ecb9aca4948a5e000c69da14e128891034351e156a19a09db0ad54ded125af4ccfe482a22ddfbd685f36b49813fa5f4891775536af38de86babd9f7a0152e46332daae27199513eaac5db9a623350deb4a35c03487e10299ed20f262db2a1603aaea02e35641553e7181166312a6716ea7af7c5fcdf6190fb17451d14399c7ce1138617809cc7fc5f0aa56d42e89338b2bb41ab38f78ad59dbd19d2a7a0c339a5a6da45fc1ca13f7c7862852c60a3cca87bf23e62d8fb71dffc11cd563f6bbd0bff46db65aad891ed9a83637b5d0da6d75317c550a150dcd01528b28499f8bb1f781cedc6f405956b595b5b9c6d57c71cb328834e9d2a2448b458258fb5693a945f7438ead0370719059867bf58171c47ee9b7953b5319343fbf94d3f149b318fc7c8e6c62454ad05b8abdbac4ba8e934f36a3e50652174cfbfbd50fc111a36184b6ac392b23bdce2b03aecef54bde6cbe082343b018e44e25e602a298fce5059b1373ec82b6c471eca6f3e94c646ab4abcd105ffa1f5e00ca051f07da4ed535a0e4972f6008a3e81d34762a271821220a33b1ed2053f54784bacafd90679f2373b7615b097e544c8bb4e1c72570527e0f5236303329563cdb019388d183905bc0280666899f21323aab952ce9b4e0152adac8fd7dbd8c5c872ad28801e244a302e1f27ee15351bbeed75a68bd860c53a0e1b854f73a41dc4b11e508cd6a1e576dbf97068f9a86655abaf96b3943dac17a83d23c808370b807f6ef3279f5fdf51bea42c635bbbf827d71fab4e0aff5e5825115cd237e4e8e04ebaff333221b08ddc57dbad69aefa72862834ea2888c2970e396e90b78128e496c121a3b49bfabfc50c6e6dd0d057eff8e2f899b0f176fe1dc3063ad71d2684f79a0eec60277fd140ec87f3d8ab6e1e44ab0ee3663ecac135cde1512cc213afe319999f0b282d5f8aabfd90566259776fde2a46d0b5876fbe6796f4f3de96773e3c6362d0bb14de24f34fdc8b0aeebfa57eca47ed9f866b2edfbb0e6e0393debe175b15155406e26cfcecd3adf870221291a1dceee22c2996bc86efa51601b3776c76ef7f0f9415924d45fc8d8d4bf9d40ec7c9deb75a6586c2fb39fef066bf62ef8fdad21902b5d791b9a9d03fb56c149aa1dcf80b7f3c2ebb13e84c0e2579843b62ade48ee63528d66cdc6ae88e4c6580d798ea526172a9963dfa338a5c1c9a1cb755e9db0d1b898be2566d70f17e5a023d3b632dfc4b312cfc29bae6efd06e2a202e06427fc1eec2e22760336309cbb1249326739a03c542c7fa339c3f9dea517fd83c8bf6585340891f62436fa6c0687f03315ed7c5fdcb947c69583ef34da3110f8020449876baeb85f932729007cb9b6e51542356845a57104f81a2157392f4a7915f85bba97f5243168e0eb2cc83e7a82ed3e7e4d8726f2c80eb7d4eb3578efb6fd3e77e5702792764246df415b21025e41021e277b7eab53887804565e61083dcffff6dada595fac4da54cf82863ae06c88a8df77e52fb2a116024f2721e25df61c454cdc6948d1d310a03c040878819672295999414eba7346cba2a401df964486307da7ff97508988de2b516f663048d93a9c9fec9879dd615afc8d6df3a40bbc3bf17ba8fa329036f248586c19401b5805d6ff1e5b8fb64d24d4fecd5bc90970b50a4e8f10b3b0297fa291425f42dddd15dd1efa06b99513ec181724a31128778958542b6ef1e1796550ab6106befa58bda162159d6b629d0b9ff00b37721dbf3b2765514b711e1022e7f13f80ea91f81f7e93f80e13c711985246d8e9bd74c55ae646115dccdbc2b3cf9b77427d4b032fdc1e7e30b14a17f5f5f1357446d3e96fce57e9e5028e95a0471ab397a006496b475a83ec3fd31949175741c15e93f7ad5e6812f68e3d04b7e9f714521f1a3ffdcc01352d07c1e16617040670030f347caa5606cd6198334d4797117b46c40f90ceb64bffd3b78c157caa91261941ae119688b198dd63a17f45f729ddc9d9dab16bf9b846a025a33108aea9c89613ecf8a343072ed20000766b99006d9f04f2179de343aba191d8f32ddbde9401bfa34addd62b69ab3dd09fe4e08b0dbd5fa52da14055c05c82791f538da013f1fa6513112726809ac977035dd512487dd9a180892b7838414364bbddc0be4ab19bc7489a4692cae20b11acf234a22fc16517e346b5303cbbec528edb5d885f97bad3c23763d0f1f7c74cb72d3b05ecfc79629bbe94ba108ae625644b01f3a9ee3e49ca5b31bf6ac2e375e3244cdd8bbde5b6b412f8e9aaa66010c6297da55264e5a18c3db38a3a55831a5e7691062de99dbcfc2c6ff54f66471d9f11218003e10fa200bbdeabd08b121c71263f468d5e8f747b1ed5b9ea19d5b392dc194716f42b2401b583e07b2ab4fac0fe95428d31fb05a9732e65fd1bf41776f5bdb1fcb31cfa1ee874ee21541210a395f2b1f2fe7cd315386947219d3f76c7b27e7f4d14304f55884e285d0f8f1b61d2629bd5a7baabbb248950a5ef1cdd5f33ed0f69362f67d7e4025a9b80326956f77fe70f50887188b668ef76dabb79bc95221ca31fee72b8f9a9158caac288743895cdafdd510de644bc4d22ec64e0cfb27a200420c24b35684de07ea1121257a49042fa07492b10c0b935f49c212ba3afd59aea2ccb3cb048f0d4ff92096eb40d42cc9e527fee480565ac0487c880dc1b1ba76b6d06478f570d03b4b50624b054e4fb9681b6377285255e9cf8312a6c62a230aaeff10877e59b3ba6e72040a157164a7b0c88adbee6db45657efc95bd3f623c6707470ae50060596e9cc934f329c87b6730ebcfc152832cb6172acbfef9a0543643f4ae9844d1403b069ce70c6f1453297f66be3f892dc2ca203c2b203df9e1c436803057e5e455c386","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"18889461ce562fb0bcd8e291c4c58904"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
