<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"62c29bb1c8fc92323c37168621758569ec5d908c42092568269f4cf8dcb486c788cb35d7bf0408b994b77f8053e4514d2751131ec14fa80eb56cba15824848b2511066353bc176d707beaf9653c0b6a3c0301d7497b345066b69a66d43a504686c3fe0199c3e9f52caf7e51e33adffdc18be8108111481777be6e85cef0261dd4f2297dbb85406e4865ca8f70877b9e95e687bb1d743ba5a2ecdd2c9a351d1f4eee819dce7d4f26af5c2edb90c3f4d6877590b14e6a1526a6afe80a1591b3c489650ed522e84851253c30e09b81e411874198df6f808fe2b9e6fa4008b202b3db27dfe8decc816d4eac5dd2df5869a6dbfe7adb0ab9190f08c325e472d1d26397831ef74d3be2dfbbc93e040a0f4355ab0351ae08a317a6a9fff809f6f2f4924b6f29afe8238613ec0706a1907da6edc67a78254a9a0461f52aca596d3dd8b022a39b7fbcf2134d44bdc3316440a82f929b07ffcbdffbb521520fa2a15c131773afe68fe31786a0488b9f210301b09f8859338d6996d4e7023824eb2b676d91b5fd46b28abeb9100aa79d23c23f09cc29e78d729e78a2b2dffde5a980436c19ea13129058f5d1eea5355da42a2a6539346199e3518f9b6a0a497f99dfa4508d3575634097251c1183e041585ae233f6d7008f240da4ed06fbb7e4bd05ddf5731ceefd03e121dae815566ca7c95b34ab920e0290d10e85aab45d8143257ae8ab239ab95a31e013eb696f183cade61c7bc29e702c29d483686570bc82225127c8638b061da24527f07961bcf94449f0c1c216a5f56fd6b2c6377ac234004dd48d097a22e119d134bdb03ebf8487b6a884ff8fbcadd1afb4fe29b1e9d7f4068bbde7d668be72fb0c06691f1257c9b5580241994ee5c886565c9ccf160d3d859ff657f0e639333e1a7c0caae7818ed0771be4badf456b20bb359602625fa39d9574141cba7f3d064e82618b9af304f97e547aecbdc8aaa31a3e23bc1be8e553665fd1d97b595361ca13e367032cde866a65d41e9a003be122923b12dc4986c0e09c1cea39b16b88fcc83810b3b4280375a6043c0f28f9103bb12df66d66daf88273606a4448d44b023192b988f2d9f36791f9deb3b44aebf1d435e9ff79975a951b7250f4c6f16fcc7c8e4f5b33026c374971b0cdb115e2d27a496c0ca794e28e8f558fbabafef7270a121b37eb155a5c08beda0e65cb57bb6eed6f38d3970c4ca11965db58ed1815dff0e89f52834c25d92db6d077898491ac52ffa061bcca603feeb3cbef9ea8fe97737bd683f285eb37bcf671098c53f0f3c3f2327990b3423d2a9cc69cf858f355102ce860db157f02b1b5632e15dad1efb5f3a36262f734a8c2c06c4e553cfc7ae95e11e031d2de7169fafcc4894538a75b82967cdeca06dc2805c09e52e42a36611599b5d4fec072809197e2ed4f9c3aaf9601cdd23c5a2959a8b18f9b52c6f0912fafb25d2b3e50a24b68245e68bfd212da878de9a6dc9560d42ec11a624e76d399bd2247312d0466affd718565f236d24c7ab812530b5402034ef1958249d463e5b2d4c7e0b8c832fa3bd3afa74bf15210bb63403d5c995f75fd97b59c987e2d76bd1f87860f0cae9ca978a7b9c95ecb58270484d8b1378582db50f0414016b3c4b990fc9e4cf3145a86c5e9bf591cc4ad4e994c72f2bfe2cf0a50a920d8acd9eb376ed3d590f64ca5228d12abc8ef7054b6ff5334658e00e1462fb29c724f5e25fe07e24a7bbf8ac181905482574016e717b50e82e217280652ec875ee16818c889e5b9b2fc4f142c7423ed881f74224cf50c377fc62982fd33e6931976fc6634195c7853fa53d69632e96dc524efc6d0849b1004a82b2c38ffbf3b053958e7e762aa8a88bf80b6106e980c82578f88547c65e8e0a82b9c84e9d91d76922ab01f4bed390944fee06848253c0cfad07c601ee4bf77a15c1388a81236cf0c5fde5628ab435172d1721ecf2806483273c90ab308c5ec7eab33a4b84b319037f6370af01a40e5e13c7ab433a74fe9632e1c4689c0b6629a0c3fdca3c219f16734b7228bb9281448fd2b20ae6e40f5e9c5b546e7541dbaf6203ff5741d050c749967a6f620909e7e9d1deeb8a37b5891d6705a7a85bba808dd4cf5c92b1075db7b4dab11e3db111c64a1dddef18b2fa6730c5f30fb6a89c48a6d971add779cac9fbcc8805a79e92129114d573cecde47cb2a2ed5cbd874bcf129fc8dae44a05c26e2752d2f72fa96e865f8a8ebee6ab6e950de04920f982b64a23c1e7c88d1f9c67d447c5cda41d1a1ecc6935354660aa893f3ca9a17a785364789060a321a927cf47618b750cee5740ed664a6dc6e58f49f4283559884189b00e285a1eb4673929522d985805f87b7121745ffcede2072c3b80da38c148de881d8c5a95c8ac5eaea0f3c18c2016b1286d70281b3994b313248fda619bd58b03698142a454375c4e93f32e5ea971291bc3561f7b72ce124c67c31ae132067d4b48b342961c9d2124b34327931fe25d9bc4de1fd51f06ecd03b23501c09be68ee9b0edc81c4bb5d19b680c471e8f229e9f1da5e503834c0a148e788ec3a4d896f6c65d87966968287e4bd31044efe6d99b46065703154240ee45688b456461bfa180e0aca10c0162bfa18387db442a22f81fb1b21689035e1f41ccd1f33c2ce90f1f1b079063d269a536c4fc84e2b5622bcf80b8565b6921bf7be94d690056eedaecf039aabd1a3212219ad5f4a38283ac015dd0ced7dc9d02a37f91aa137848bbe7493ae75e337442af7f3a76d3a08e019b1f807afca89162da9cc01a63d4747a52420c507d99bc5e86c8fca202bc64cf07be6298c20be5d5965a9c7e5a96792ca473616dabed2c71964a3c04deb05dcc2c6c37bc920eaf8fe70d9ebe345fa10b1083b69bd2d5e6197579d58afd49f63bbbd7f425c36ce5e7b5a67702b6c3e537d6463881f704dad0e09789b296782ab92482d0d84d1e5ac7fbf4a571bfeb8ab4217edfafe8a81bd18a6f60e560f30a822ee3f87099454f795342c7a559b4f75d14386c3914c4622b06e60bc2a2e2467326f40e2f3e15d08534b3ad1ce474f7250af6fa5d6a774a06bb9f3287e026d75ad3023447cbaaa52eb2be398e629ba9f3250c2933eb3837c364489dcb90d35cd4f793333f8af2960a1f0f602526ee5a392616d9c222c31e94c1e0320c942256f741cc7e46f96a880fce606312e0d7a9f8be765092c1b1a26267b53f60a406eb4fdd7c3b06fd39466d1f714deb4b13bddc7f7e40821ff8529645b0290924dd173396ac4541da999036387504c8ec6bdddadd36ebc386d9953a1bdb36de4090d768efd8ccbe37af565e6c6e20a246ca6b21f258b2db891671b5713bd69de20b577ad9710d1188b5325ec2bba3d1adb9c360aa4923b88ead6ef965bc8c230357360226706b4105c021420141edb7a079dab044001a9062615d8893f64c38efcfeb8baa8ab40a01d280e4ae5b022851519df41d73719b094c8306f26c1ae10755eff64d970a88107befc4662266c3d9ce6d37881ca901614856712c3f7b56a4abd880dcc8b57cfeaa19c309811c80322cd2e2a1e4595cd63a35417ba9b012eeb12cbc6f6f26d47e5d455489f85258d3392d3ed87720b1374a3809a45f66db7c71491936822f5df60b743d16293cec1f5dcbd5d61a9454751d972cda52e437219da553478c3c10bbe58e8a807becad2f966c45f1deca94090798584537cda0798e7d06a98979db560ab990ee5154c792b7ef680c27831dbec34504498f61f675d58f81d964f0588e1c940824a49e745c0707cad733a15c43f96c3f2dbcc9dd056241b796b8e9a59a275cb7cc283b7035df92277b277938e23a81ded6eba77b77089fb96a3a5d3814ba23ebd4746b30c2aa083a2eeebed6973883ffd1154a9295e5c99f04d7803b67e5b266e297c1f1c10f8339df1649e4287fab33f4ef85431906d07eae3f8ecae751069dfc088e7ec14d3188829138878d1189482fb31fead085ead66497e29c85cfc280ca8575635c82118c21ed4889f3ae16c7d0c2d13ffc62557462dda971a7be8647e8cd2acd42c29c46822527bb198b3168f045d7f6ca51f7bf15f1c24b8ce9f0c51b134601a3a4c11bf5376370156ef1bbb1e209b1ae96f9d7fe74644264a7fffef848c57515c31209532b434cc9f9121a4dd61c417d0a206111f290f26798489bf519ebcc1b75d0aaac54ea5907df6fe9c83787a12ec385cbc014d7ae6a6c005277dd8e95ce2497d1099a7b58430513c49ead024304db520f66c630c9a4c6734324ce825c1861ebbf5afc72d2cc15bca3d16ce2fdf32a7d5106ae97ea920b6347dd6a5119364bb746ba42876f571e902ce79d6abf1cb006618a19c2b1fecbb2e6c5edbfb1c68d6b6d57c30c9166b0df9b100b691f1ac01312af9efe04d1e0f3edde5c47f86f627b3089d543674a29199d7e052a4d3578a8d5a01504c31260826edfbe950d0c1146471e2dbab57cfd5678cdb4ef24d2081a0aae53511dc7e25488f26962494577c4ac39a9c41faa7337cfc9670574f4cf6555babaf675284de1a015f376864e1dcf2dbb6344e767860816e9d08c0f10aaa66e5a2f04b52d359e19f74bdb379f607a2e13b9aa6118c7097d4a84664e830d9b87383fe0012896f4c1ebb2e6dde8ad1f681f835ebc99702fa77298a9f10d4f96cc31595d8811e44bbe14aef90801c1ed2ce9f58efdcfc6703b28ec4ba9a1d7c28c22fff0324855ce476a07acb1027069f5c0248d3993addc9618c7b48424022fc9ceed7bac65ec5bff3fb1fa47c091158d47fc86d4c44e2c6fda4f4d0739fe696c82ea8f75dc9afd4596f348e72aa2a7d7a7cbd0876c1e319cd243659005303603f50564202d349317cb1d023fc34efeae91166dda175099373f16f9f39c4b7728d0d7b5e7a9233e1af469631c7b952d95d9164ad26700e2657f53b1830c01a26317afa0ca5765089f66f480b36242eb48f075d6a6ba027c9e24c688240acee6fdefdee521a9f3d67215dcd76d62a0e2163bf7cd5af41d1d523f905de0c329bbd1c267878b1a43a784fe3390cbb28c143916d45e6ff00ed1a309446fff4a62b1c6c9aa394df83977c44e8a347e0cd96f16ecf7f7966c1c4fefdb5eed0ea01ce8c75fc6e68c8b1eafaa301cbb09761d2c443afd5b7c18b81219809eeca6e1f9076f9efab64dd6e19c3a753c02528f967a3fec4ee313c21888023978e4348b5d44bb340647e3cb0119164a67c88de749f0708f106ad6e0ee43996a87ff615466d5355229d604eebc67bd502b93eb415034cdc171ebff63046f9eae06818462a0fb9c61a72f0bb799e583f2668a0b9effa231e8b6556bb2b0d9ceda0c6003b931af2a6d861f3b6bc2ddc9ca778c573100d170b29662a2d4a4c0ba542228d3a0e6345689009a6f13a07d7f1709efd7eb0a7cecf949f0a7bcc3acf1f47ff2de1472e72ad771f003191afb4453e66fbd4da2a309e6c5d3fff72660d89178038fa862b9cb69f8a4cbdcbe233c895eb5b17e3484c7b1c526498ee7e1efd1aa1fcf56904541f3291c81f958f1784b8e6ef98f55293365dc28b23659e1540612a1df23bbf0b78496ab575852d67172628b3d2a7ca53ba4acd514b70d04e77502dadfc528586d81cdfcc0849aad4e783d83de12fedd152b9e360f846f9fcf2b4a287c9a9d54a850cc3b3ef779f54448315b4bc2fa93659e81438837a6aebef399d69bdaf190b85d805288315d5c20c7a8818e05b54283d2f1ec4416d866df2b1379b6e64941d8f8a07afed2538c77ff8a1bdf13df9f404fc74ca3a1ccb8ea06dc8d19f9876f183772d46c05c6b20dfaeb1c36253468d0d9e601c1cddb331156c4da39485c26a77f6cd45bbb9db5752b2891fd65027f4fc584365b3e158f54def0673ba751e2b69df4897b05c877269529c914cee3810b18af5187e5eab4f1f2ad7d1ade81a1d52d8664cfd473caba683fefed89d8a6032473a3c4a34a4ccaa1d3b870a76a46c2da688d03a0da1487b3de762ba99b40df3f818a2fc5c324ab22c9c0a5e26901b2db256aee0bb7d1c88b9a784f86843a8b1ed4dfa7c7c6719fe01615a92f2d26fc48b967733eb35f89a09c45ab1d127b8c14869b159d406832b313713b423a4ecb0cd14d5437c39fa212edaebb9c4650059ff62586ac51d155176019fd9ebb4b45de523b5f70773325e64fbdd6eb594bd93061d96ba095d6cadd401e6261768002a0f9bed3e8198ae4cddd602d080c66943f0bd56d324b9cc3903b91a65a628e963f50877d9d3feb64dc3eb2869a8824e2cfb4587a1fd1131879a7860af98a7559fb69d0bde892370e8afe6ca3d5de33fddd11c5186c87d20ab894669a28c616c5df3c0444641852bbf3676450749c926bb5bd5cb7b156cd5e921849efbfb0f8a4ffee349cb49c614c1c80d67f7d4bf3efe28ba8586d82621de4ec120b66934fb9166188abf5cbdf894876797faf843ec2cee8df74ec91f6fa68d6017145745db15d567d57c64092167c6b403a7d1de8e754234a0b06bae34cad0229eaa018af9af5f3696a328e772619e62c80089dce30d49bcec2736f311c8a47822d00d8dfa637c3d24e61856385855fc9a50f798ef956b4371b88ef45d0ac87722ea35581d5f3de82e44e36b5b7c046a962a3b112732caa6c03d95f23f4674df8ac785b419c3a930615bc426bf45fbb4f802ea3eb900ddfab26a62fa90868d4e770a297b46c30cee54376ee934cc9ce51465927df7b0c362d87839121bd9bd01426177e20055ee4f145dae5fd40e58f87d28895ad172a8d0ded4362e9502a8de5ee6549d2c0578f600ec2c02518edeb2b34c99173c3e72ee67b206c191da8c0a8397eb4e2e473ba3d2963ca9c7ae1eeae123c5ceed59f0ccf26843afbc893ea9bbc22ee5bdf8fd377e570e06ebe09ec9b192bdd196808b91a44384c31419976391c8b39b32f5fbbf35e432efa5e18cb4d5e2746442284e8631acb39ecac687d57bf554ef03fc54600e2eaf72a5c10455df98ef10eb4add5f834b472e3398f3684a169e8535148c1aae3d003bdd3700a85892a0c90457d356e478f3668f7b662b31eb00f5b9d6f33a7740bafb64e62ccaf5e3c8d7a641784984655d302e9b1201b189733b500e1e2c34d174bcf6acf652b7c039fbe4e268115e2043737788752c2a08c2c176daf2b045645bfcc9f82f935c047797c85e65875c33ddb6cca3af0418b459239be6a7b06d1120802023e0faecad0b582146155a66831e82d66e43804456c1692998172b3ddf88627f714eeae0b10a6c152478b8699cee041bee60b8fe375e56e96d4eb044718239c52fecd99daea2d57b60de1fefb97ba3ea3d0c66d349b6cd4d5bb9c7c077e765f05826e9ab51c05dfd02a5761184ee85d1b2452aeaa95b2627cfaeb157e9373f2bfd915f2e13b0cb9d557ce8f049112cdd4253685baed5ffdad025b0968c1b386dbe56eb39775d6f64155fd8046fb8a15032c33d12d87bec38822f6f27d50fa1b91d9fad827bc661f0a7cbed11132fea1876a338d35046f36b6580b935109ab2f766af8f797a4589fabbd07b6f3c376858a9636d549ffa8d2d299d9330c8a3ac770887b12e8da5bf4f7f816ed7fb15beb54f9f772ab6e5bc422e93e8d15c2849cded4440d92ba088284f664fc625f4ecabe413c399ec2e6d1abffacfdce32df292dd78958dcb6bb0acd2fe90a4264280f0e7880675d3af0443a4eace1eddd44acb3129d131533d2115858d071a0f197f357b5462fb33d810cc710d6d0ba6abe2066c3c6c8ae3fa4bd60199f01b4731dc83aaaa8c37e28e89097286b4fc64aab76f1127bca08978486103ff8e71b981d6be7d505703f4916106243721dbb23e2a40507205b804071c1f36aae4e34bf9c4dbab25d0107d26a004cf1d50670f67c5b2203eae47013e4c281cc23d6c3d697f180c69d87783cded354f659ed96456f86799fba1d188e30dccc42cca4ae176e669313c16f4a84ca77ff0ed05cceab2fe2d0a650a5dc4e1c1e3d38fed6c2daceafa90b7ac37b6de6f66593f7d9859ccfb824300e6876c34cc59ef5c6bbd29eba88a82b514c734abd790ba76d585fcf5f738e0f4a310cbf8bf06120bc05cef227e4ccbcf5d263366db7725aaa1368e1d3db1a370764e9607fde7d07a565f6dca8ad3ce07718920abef2ccd48dce59bbfeb446571b22571f5feae6a3729a736ae014b63062527ee0e8df539b2d586fdbfb44191e15f4f33e08090a6306ca188bc203a9e0983fc4e26beb7a30228fcb8d2ec0dbc577ba7712465ab2793f93d78b5a18812864044f8da257daf97df53d85fc70cc14e8624fdb9434a1d153b30313be6d8c0e0ccf2d899860cceddfd891890ea4549de0c14f335d2e0340aa847ef202578acd04b1aae1b45d12a3abe3f022efcfff2614f7d81e2699128c92b8724f30d0ca0ec391f4dd58b0ee893e1da1d4c39f1e48cd1f8e7b66b17a5e4a08c4cbf63b41738243ab01f469f50fbd1fd814ddf1ef33a177d621d9c3271f3a44afd4417bc10881203540404c6afb6247953adf93477b39366d4dc837d3fcda9f1cbe629b907548da986e37c9b5691fbb2996a1f8b88c7bdd5ebad879a3b8e7191bb66b0b01a68fdabcd231df13ed523cc0f65d92c7cd29a27d258a94d3bad8f7e61c618dec5c77cc984e49c13b8057b7c7c13505ae6e18cd874209d1c878602acd54fbbfd6a7d0b7ad1a890484d18d3ba6ae7460be863980704dff03b64c10063d481052def18f37b91f277ee06ca29f53b322cd6163d305271c5b40ec648c65a0ac5eda4d0d5497ea9105f83ab459d318e1c318277697d48514cbef1da4b23386311716f87cd27313cfc82b0a60fead2fb34e2476dafe769cf6dad209ca9a0bb1eaa994db95113caaa67779b83a0e759f78f63addfeb681f9c7ae0b306c680e962a230f7906c0eed49f310ff084ddc6994b786d2ca290fa019076e57093f5dcfe632672c1ef0299f721bea17901733c7b5ae73d90be1a1d6a44679dd3c989f7f04bfffc61ceeb319e290828bfc95a97f14a08f002fd6d8a9992b258417933dba4457396916e1e4b2aff188dabab4f893ff973f30a66b269ae8eb551bb3421ccd3fae14208aa6e527f5692f2f0ef49344f3f4f1bc4db33f3d72b66d79a04f3df898cde0f80833822c952f18ecffcf1451813f0fd4bc346c5400ff7eee32e4519d63b0f1750cb7da86518bac7a71d52f2f0cf9860be0695b9b398d173cb5fef66bfdb23d283f96b1afd54fe8f93219cfe6260452a83ad6df85018d1d1223c327da286e0c874d437e6097c8841407260af03199d33f65b2074bcdbfe896757fb9c239535b4f828df868800e0eaa88eabfc410d013e3b3106c530333b1c2d044538ce7b720c5f3380b5169b675e15f8dc7b4b5e2acba4c2fb3a2ec5a92d53097ea42ee5d137078c98b173a4094c00756ade2d30f350e14414a240564c8cda7c1f70f9ba096027c9810d1994ffd22f1fc2e72cbf39a08c3bf6dedd8473330514597b746d62d346b66625e4c56776ca080e78bd79670f8548e7c56c08661a90bbe748c3d37f346fb54d2b1830d0d41ea83893a8705ebc33bbf04ad21d3c433d7237abe9a018400161a4506af8ed88c1061dc0e9ffe7213d7dba1a2123073ca723942cd4d06a68d6d51902535b71b05c2ccc8e89e4440d5dc318347c9695cdd651bb00e0bf2c73f7d3249b48fbf4a311fa0500ff950d7ed3782c259ff609db2d97d13634bc6184b94296b3a7bc88f22230c30b3a7c9882f60092a034396cf1c1e4e6f6629f7d0d7d9f59642e4c3940ccf24a925e00ef578f4da4b01bb5e9e5d1f6ee7497c8e2707c5c695a035cbe71ff83fcaea5dc45aa725910b2bcffa72b9dd1d40153cabcf2d66f337eaae739ed034a2921fe6b36286fd25d20017701debee7297a8ae3a712a1c538e17f17b3d098f919d4fc0c3aa2e1ef85fb4948d9738c48b961b8a72757f45669a74e1264051461485e7f4db2e088992ef417bf5321c0a6553217bb8e278a957d2bfb13779ee9810b02e3bfec77752a9d7317a98d2437ec3a76df21cd64a80a0f58c4e763dcb7c66a4b26688827d654f7a6da3978a90eef8a8e112eabc0b4fe43c758668039507db55e9fcf6528d0d01ad87cfa3aa4ddefd02e50b486c2c527ce6c49cd9777e283f1a33a55328c7e4d830a3724c78268f34106e806bd994a20d9f555dc92179ef1afc81e0ebc4236717d86b2bad78486284c57c011aff0dc96cac4398f63eb566022b95b34c9f892a6feec3c8d8929f0f00f81da69644d5511271318e823e883a2e9dcb49ade1a1868fd35757c34e33ad79aef43c55fa5776f2af8386c3c4684612d1c4ebbe887f4999464e2777b3c58b38f516b4cdfae6947e7a790a4fa489bba3cf2e31058f9442f95741ec0ddad0493a5d871440cd67272c78c9749185a561aeb52ae6eafb5bd443060666d693699009673728d031eec39131814971b864d3193dc61797adda403437e4a7acf941a17349024ce16f9fe8fbdd41d17a1d3cbc5f64af95df9c0ea3691aae7091df92cd10b557509696270c10ac8ed044ef7d929c441853e3776f657ed1b376a57c8aace7237576a819f2bf8c00597414419758e61834c664bc94bdaf10543ee8e8cccca54384910a56427f133f05e874922083101a2fcfa8f5ed4176d2c04b397aa9808960f07b8fdbf56d46fb0f41b8a73b489d5abfa461804f5795d8264e79b39df423ee7a71123f9ba4884a40dd115f777d15feab6288a5d61c89e07fa846b15a0a88977467986ba671da6268d65b13be6984915d16612477ce9b58c4fdb926741db078b01d0f0b2e75f7a721dc7d6ec6a84f3622cbdee8c611f9a2aaaa0fcda2430599f0e592088e0e3d451b75d0bcffc3b69aa917c167848484da94dd80cf4670a3323f998f3b72d3fa3097e1fe59b048f7011f6ae110a5f4f88d2eb91ebcae369b752a1596019dd993e5d3bb114e01dcfe089d8d75c61461a0f873ad26043523ac32ac583e604ee03452786a56b176e4acfe94897289c85cc0e55080c60adb89ffdfe5a82b2341d32010d049a3e834bdbcd098a84f6aaf5a152ffcda0e245c523f7e81d471fb1e7942d6eb91f4d3d52c658428b33e6af6eb5652a9e109e1c76333e42c33ff5ffad9e36c32638cd2ad347e8be3a5c849be83e948e19c10b31d48beff316ca4db5ed8740244a325647d5f4d6bfb2fb3640c54fa6b5513165e652e686c5feed106a5a81a8a4ef4a55ec9f540c76694c641ff7a52e40e314c3bbd7cf6ca163053fe7cfb897dcc66f445dc73859942d51b8004c012159fa3f379bbf46b60c4ecab9270a15a2a3f17b5320838bfb52ac878e90800f4cfd2a2b586463fa7e18ea13993a7dd1edb211413ed053a8bb278e48836d66d26769cafe556896fb0cebc2b5dfbc7ab5853810372e3885801427e232860b2611981ffebbb16db1f060c86c44bea87365a229e78caf21b85fc5cbde1fa002bf691ca9f5e217ed4e9d2cc0b2acccbd5a28b6b7a303d7fd262f39dc2641b05f52245c2e8581e7702c18a6c85644676113473ebb5f2672b0ff41cce95be47d45d460d5c6f9c73caa5c8a49ecdbfd0c5ee614a3a74bdf0524fdac0988bb7c58bb23086725f1f1947888793f323dcb1c826313cb1e5f8a2da8876ed80093eeacf926d2f389c2bf7cb2082e8fba154bc89b1d9a533c3cc2ffaf08f65e5a41e04c2ca6dde0fbc46a39ed72b22cb29e033c4b65428df993a2f48216f3a42639833245ba47774bf611ce6115b49b44b8c0d0b26901b720b2cdcaf4d1cf7b9cd5ab8d43ef1b06dccbb829829046646b1dc2a5f728f76ccd6f7cb554a1f73eafd06357c6846fdec70d25ac919484d5e18614096d1e5b68b74581cd7abd71d969a6e8849d2655dea741c30070b7fde5b13c267eb5feee5859478784dae118bed5a7a6c0f567967bf23b557821d1045d2d8b10268b19d41d5046b6b0dfbf566a0d3812da59f9e61b0bc9613082fe97f26fdf39290e5ce18c06949635fa2fb9cc12cb572dee9d057a0798236b9167097c7e78ca7af571666930262152c76ff5af1680f0cdbb015ee2aeed744dd5b2e93358849c68a021bb33856e49e26e8e7e45054ec03d91cc7567e70a046a1fd81bbf95981ce50901a96170de9e1c9c9d0667e4f90573880ae77adbe0a6d7583975f364d22b1c6805b30efaa519bd7c41c2318f8d0a131981e467b55ea06059de4220f03c6f2a7167afcb9e829968a6599f9d8c8bce2eb625e9380d16c51e79417d7219295afaadb7f1935d86c4f8b80a055698a8d5f08435ba58b1c5dc95ab93e8d3c129f0c867c477f53e76fe073fda10686b2daf1965c3c292e16ed3be04c3f8b4d56bb690650c05cf2cbc7b512d9078d757d292eb4e740c30833c5dedadfe0578eab36a216acdb44fd600c8a344d4e0dfa95e84977d6e8cdac54340a0141b5be2dfcb64f657fc8bd7ff27fc563fae9c1cdee553766f6fd44513a7d9ab2d3f83d2511c32d1f4ea8c365acdda584a85ef9e7ab2d3aec0d7ed50d8845c0e51ec160bd5d0fda8c2d564520b45f3d8da475ce0c5771e72cabae98fb877eb7abc3cb422eba4ae42586b74444c2a5609b0d0d35a25b1dc56ddb6dc255232caa0d21877da538892031fd21ec7ed645424a2e9905903b04a369e259292cc436be58e6aa52d5aea2669ac896be5e8ab3e302aa4fbd2bdf07344e508fb8d2c47794fe926c5b16990362039a0c3b08abac9aafb4f4bb7e17cf3dd14f962b720e7c10f6030fad78735551b5a318a0baa9ada49b4606867c1a58f997829447bf5c65aae4c310d559928abf1d4a7950fdbc63349a3a84239b2e1c7a758146616775a251ff848c76b22d1b44556da79d68ec8f9008659fbb82d28c8bf62185484c063eaa6c25c9a7f0299afa07fabda36bdc4188acf74350544a04290e929e3afb5a5e241359cbea948fc03f52235c881e70e5b5c2353ce0ae4b9a38a09c9762ad096b66f0e839e94cfd6738de89117c4e1059a4a7b607224c65ff142b8434ff630ca3d3bf8ae440fcc79e2bf2caf4c28d488d92a5f15cc74f23de7844b59f5ac8f9ad2842a0e4a8e11c9b3ec736dd2698984ab5fae40569a978808dee89e12fa0559e737cb347611d82384a0c0abfa49c0e13a442b2ee1d1316261496e3c0554e852053d74ca92c987af40795bf0a8a7137588692db8f444b5ec29db4f6555bae0e23c7c012f686326cafa86bc5876e538bdfe0d5340b5482c61026f36e709c63dbf2bb5ba4ae2d0c32a582b38055e2b7a2c4477b6d466e48fe9a4db269803058881a4efaacebffab09a46a86843e95e2d7c73fca5d9888b88dbe4dcee8d54c46f8ff9f65ce2fdf1680fd99f37ef382c82ce789bbdc31a423522fac5a831cbf3f0559e6b35ca5b9f7118bb168ebac0da71fc5de039f710cdfc2a52388e8dba587e3130c55a6000e2dc5096da72814b03da4291796a6aa6d8293e3bbeacd897e56f23cd4fb4fc8b128ad6065e75b53a7d43d18ee51b8c086dd9d00e256ae7ad9472b6872f036fa0dbc921db3c54a55801561121522cb62fbff239bf55a237e30e90df4e0fb1746ed1a93d96375d62b2505cd6c269968f6220099be842c9eef95e88214f92de8e8679d25b923190c66b026be609bc8ed839907ca0446cea4f5cc6b3345a89302a25798c666c13c988852cc760d64ef53de7753fe7e273e1118adb20b16d1644cb866dfbc4de1af2b828a9010248047a2ff96fce1fe1c09b0257c0c52edfb5e8346c52a844ea2b9637a7ce750060afb9a254c696cd9fb3e858639543b2e8f976d2a66485a2154952de03b4b76611d204535bc26fb601eddca0482f87fc3f437c7e4c38b92254b69b789d9071789babc609a04b0c74f052267afaf30e8b6a446bbbe2e23269cdf2900be9855eaa46210a9ba5cd148963da98ef38c112f0bdd620259aa2f2b190174fef755ffacf69db1699858ec1fc8c0c6cb514cff5d052d3044cfd7f70f850651a635f59c3f607a0a57799df81c844005a35b74012abbeee66e9a5bda17557bff8335c457c96167f36775e5c16e5619efb7394f2513a4462fbb380eab5335d8d15057767f4edb5b413d60546c8d9bc7d6876499d984311238032a5e0a994aa166474ae57c024e61a886a762f0a6f153ae3907f5a3d5b181e470c6ce2944cab03844643fcd5c2ed671c7bb4dc23764c8e30c72d7ded8f8c98869c10d7e271b63192cdb55418b09ae22da62bc1f2bed2d2409313babaa7d0e7a7a3d16014c642e4dd1a77b2a30180997cc8d9520cd251c7283b0b11b15acbf9a008f1aaf2ef31ad7837e93bb77cf758e81865faf3fc330ec5b0805d8dfcab216d0b721f129064b55edd1f47f7dbbaf3a420283068c5a32c6e56a6d3d44aa1bc9728c676b989d987f84a6fe028b8c54685f029a5c1d7e9afce8d4939bd80137106bb78f4067a293096c0dc702f9b6b9923ad44532874d6362242efc22142f58187356663032845d09d353cda14427eaecdaadfcaa10e1cfd6f69d042c79e8770a68b2550fd7c0c081833a4e4ca7737865717e25564b518f176ebb36b2469a366a0900366ccd87fa950dae5d162955aa74faf3cad81fd7ec76c50e7d68e34857eb7b2f49910b8446e1686018d81bb29b79dd40b1387ff6eb5ada8ed1e800402b802f34bd190506f9262ec3a929591de2fff5afd3d623c028ebe25310a877ee27ffa2d6e5c784b64a73f7db3b29ef2d161cf4e73114dc6f89db17f2decef8d2c27ccf296c91f2e2d6e957260d72677d4986b26e1ac199eec583dd3d9ed1660c8af8300f4ff766cc15dd7ededabcad269213ec26b6ad8e000254cf2bd6fa159f102c1f0ae20be2403b167e74321eb83945265f9bbd8ded7cdf48a82f0c55137d1de121a37023435c470b0aab864860917b172a53a758b33f27ce46b3d7a28336208e173368eb1b2a525bbbb2c0369eddb65ad4795f8261b49897e5aa56c80b82b9e0d71df9bcc94f2ca859e9d0f93ebaa9bc7b2612edaf9d587db3e19db1422c9fc10e40df00e504996de87522dc9ae9bdeba1aa7c90c1df76cb5dc1293c11b1ad115efebe9fb890ae030b960888c62a1872a5983b5505aa56e00f2e423da139a78e7b64c09cac15417a40b261eb3e7e0fe8c1931bd4d047104e7502782101faa4741497da9c72f38018be59c182d874ee6274d0aa3c68181dd1a36baac8344b4818fabefbbaca5769e8195280bb16d1a7e4697938cfe14b8a3dc3d6f872cf7e3ae9904be28827bd0e37a023ade6bab8cb4de22e8a5204d926ca0180079fc29dc3b714cc939b9830e202527ed38e491b7e7ac191b594de027f1dbfc9ad6537e34cb66dd1633d8bac2596c40ec635b70a0c2f45b82482eb790064dbe3513535c63190eb32d1fd8939bd55a16585d79040a6bc49956625f4369f4031849bc37bf4608b3466f206765cf70504c0b7b57ae91eb18fff8688fbc27a3b089f3ea6e1ab5cfaee3dbbee2d0d0f6317096dc113e928a6d81f2e391c99722d9eecba556f5ae529ccd4d741595419615a76ac890d974851d104b988f189c6ae45a70f9adb3b3fa598df0ffd9836d49a261e9e372cb883f7176bd585e10aec077b3f9244017bc6711d2901690b72fb44694d696230e61317df0e7f6c50d50ead2a7eae9f6ddcdeef6aca6d416f32ac3cdb5f5d3444b2212e84b9b552d18d1acdd4437b87b1f7150d2be71a95265da7383f4bf1a699f6e8f0865207ed00cacdacd28b89d3f9b38e1823d6fea70ee521c34aad1917ba31875466b4415df6f525af12bf86cfd75abb1a937dfe931b70b8d110fc0a6c1582c24c9bbbf616f9a57a8d0bcd7513a43de9aae0ec47d238f855a362288679ef7d88a80d2a470a2ee4df1cbef313d8bebd3367e375299b9f26d0f497e1f00b93e6b9d0d6530da2eb54b84feb9d4f1e73d0820a44572ec334bf509ec2a3f4d98cee3591bce0428808a2e38eb9757846f42895bb1234186069a0ff44470c8ce2fb0703116bbd09b226b0f4d09f5b751be0b8972e3dcde9b623a3eb91cd6f1984c5c0fcf7a124df8a65bbad10c4f51a4edcc45bcca2d463276f1bb68c2b7969224bb9222b8affdaeb9214c8ab9694edd44f51f19957616ea6456a06ef18f7d7d3fc7df89ece022af4ee52a059c778a109b06ca03947cc76f05be58ebce5c2abf0381f69847497f73c44955e1f5d092518104ebf60d1e9d3a3f0e9c3769c709bc59b23dd3e440a19d85e6166ba41ae555191c73fa22d8f66d034d1241b1dc0bda7e9c86137cd8842d0cab545e35ddf36274a0730dc3f41c187817c47fe6f24dd6157bb08832dc2b1e9402a1b136388972a622909f4f97723d99c362cb29ab6162f0ad0e899de81667315bfe043441c63c6b3da08fdf9ec7f5108632ff94a014d960f739eb65f3faaef096141468f53fd8dbe0a808b2074b8eeceb385fe5f85062399484ed6796e176afcdfc287bd92c27dbc3e603c5a714fdf2c4e90a30bc729d8cb1abefd320bf96fa43df89c47632c9ca4c6f60c69560af4dc1a9e1719ed6b1367d3666531105e98ce0329e5ee84ee7548d4eeb2538f7e6aaf7c4280ea629a198def0155ecc1a21ad3f679592f376e90a5c72e2600735c133723e6faaed57101cfd31ebe948c02413e288f79538248d90172be1277dcd699f8b805fd93765efb05da9335064c2d05ff18a7ba33d3e8b49ec45fae86d2d57bde88fa611cfb35e8d2ac2481b35cbfe681b05df069055d5aab9103932dac18c36f16ce0689aec2f7307994943f35eca3e6b667c0f01c52e541554c18219897e049c8e03125609fce61a5aaca05ce2e3f3efd782679822e5cef6fb041f58dcc029e32eb8642cc77e6466b02d15c599f8427037dd9763b9204c2017a3c7cc10b54853b3b6738c570a64b032aea64a3b4ecab0f9d9f2fb16eb31ba14f8787b4dad9a8be5b18a82ee608f3e519094be341962b96607b0fe717d255f6f09de75c824ff2ed36467bd1c70146aae521455824d4e362076b37c23ec7b40aa7c6d7c90b19ac6d08e8f737bec7c5f593f97607236cc1fea8a6a09ed53bf02a80ba9a7167d4b5df9048f19dc619c5a4848ca85b8dca53a2c8d39d39363d8f08d1d0995d0d7572591d0d58d01fdd1539923c3feaf229ff97908403c8b3e1593380a5f130228240e0ca672d696070afb33eb42441d76c031b1828111e0a6175db277325f599ba4e8d3957e43687107fab3aef98bb690e00e8dbcf42ea771846a2499a028fb8b7252421e7e08b93a0abae517b613fa7797558228b208ca003035bb4604a730e7975e9e3e13e6a6c5654cdf5b760263ba3355d3da05bd0de0c67d6dba6e6404ebb2758af44a01c98b0b044b608f9a35dcb81e329c5d7f6d752ff922fe8bd5e143d9c0cc8db90dbb485ad844b8eb5ff94ceefb37105c21dc2d09f395488aa87e33e9bb970871404eaf84f3eec42c4152784b639e7ef7bae7d77dae875d82cdcb18e149a61172d1bdf662ea226841ebdbd09cd7958e5a9aed9570ae1542ee59ddff812d757356e05d5758be66bfdc12411ea7b4d28709f00725619f9ce53e2c5b09acecb59ef653e5d8d022d3ee95c4cc91f1cef8638a817a7e79a2c2eb0c47315cad94c651402c730a1e86997eb0e9db66ab6a183001dfa9ba788ae63331482a503e8d3a984f5e30c3d5635f55424dc3f97767de56b20e00ad6f1a218225f788b0d351f699657d7a2e521bcaa0ea2b0b5ce3960d95b437b09294b908331f753cd034f9d61316eae73fff5aebfba010c9eb228dc66b53d47c84ed19931ed9f55bc877ac9f0e45dcea339380a3d3ec2fb367db15a42db253d0e70a2e9e298b4ca14b973f7f695fb3a9730ccd93f49afb3b55058af1f8af1bf410d79e4ce9bde46dfec6d026f50d2f6303b088cccc4c1d080236e108c90cb25b481b655b141dee1ffebbd8beb2d605720e321966e63ea769dc547b6c08c6c22b1f28b0d9da1014630f1b59fd9e33c34e68fdc12d1a1bd2c3a1e696753c1b8222e0bbc6402ea15e713e9b39a6235868448b40f26edb287c4d0fe39d2af7c697e2a231e628924ffd7b0452ed3b0f6dfc21f989df251f65a1b4e616fb97f79a066b4cfe7b0d1b0de172446d8255e76bc5d2dfd7a9f0360902e76db6544131d7811d62890bc4eb59f432d40abd959d44000ca3030c8ea6dec1c7ec4b7ec0e161104de4b3065303cfd5659336747282fd093d75036f8c9b6b561abca075d3f5e807d88d9c341c235424c8c12b489872fdfa8e8694dd6b9a7c71e492239c13d0934edca249121e80c1e204e5057c3a6760354b297fb70770959a904473074838e013464c95ca311549330bd9edd485bee1332b45753edeaa980c4f6eeb1a07f674b1a06aa9763646a1f12c96045b52f74aa12c260bea6641960617bf52b318308795f71958248d89cc2c1d805d0bbd8085b9bc2f76f33422977ff06a577589089bde87d52206ac1e218e9563a2553ac9b92c23f258ccb2bdfdfecc74da9504161a6a842cef3de08f2fe4b246e6cd05a3a013771e5ade9f42a27af035b954910aca82a1335d639e1e0288d459a156dede1aecbebdcf13f8fcdcc544a65a4e7d9ea09d4a38010214202b4ed41b8f5bd81d3e0f229c446362756c103823cca02ba5c15ca2e38f9f5f12499d0182dd405985267234fc3f8ccb9870c9d75c50cd4ccf135336836313964f23a","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"9d882fe3c44ebe6d6ea207515a0bc4d2"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
