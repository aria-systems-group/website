<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"3e143f80108bfc8211dac23a186438242ac8d56d037b03105f241cbbf05789bdeb91a600860160c8bfdd97bd26c7c4c7770108e7abf7a0c855e6ad6f5655b28b4adba9708e8d1ef17f6c311fd11557b7ea6e0e719fbecc1d5a309cb734fcf648b744d8e1f029c6cf7cedc3b016ffb05bca9fb85119502f612355bb6863da3d87883889719d3472a1474e7d8fdd73b55087b84ce269a2d87512c150412f643b87de2b6780fa6e1bc656229d6044063ef5aef5f6d02c7eacb4548b07df33a640fc643408930515b3f3b27a13f12875e1059ef1d1bb3edce2675a43ea271dea391ac9b7d053aa1b2a4970a345bd6c09d96c551f7e544fa5de513c1a9a9841a3205a33ad274e14a327d8384f6bdccd77a44f138e606f89648f5a4e70c952ecf7834c83faeca82e4a38dd737bbc113277719a15eb9882bfbfd89e468b3d1f0b44b1d7eca6fb06a6dae1ae37b94d9aab30b66e0ad62026a1af7f9009cc57630735d52d991889d6700c3f56349e52b1dbc66e6abc9081b83a1bb448c37983c519c3fd68cafb36cf06b9f677ae38d63b0beccac007e523ce69edf4a37d4d88fd9aecd5c872af268ca13fe1b331093fea55535ffec29e8a1bf27640e44e3e3c42b341d5df2e70ae5300a321745477a2d739032d6b8c510baeb4b6f0f6fe624e94ef461c663afffece6ba5cab805a3bbe274048283c6219a0c10cbe897cffa92db82b7527372e500bcdce250fb854d2fb7ce904e8f4d49ee591219d9cde45aff673814081dfdf1bc0beeb6e768a36d733dfbd4eb941d0333538184929898fe0bedef32befb2cac65c2ca4347ec516f8b69596f77cbfbf2248c9ea7486358354739c68c6e7a63be769d3dd54fbf2d0ab62e9a87c9feb5c3b4389aa02a52a79216cb4c10413473df0947d500b69a8874602c085ffc77b30aed8006c295ed6529b74672cbe984922f9950aacc03b147e5d5fabfb11e5456f7c2420dcc9f06c88043d86828e476f5980b41847b6482eca19d197a2194fcd240696285ba0e7dc55af3fb6fd8673324bf56c3732762c9340c9c851d0e3076802386cf41e66b749e3d75c1a1a5aa2e669cd26c991afc07c88d6d7b9ad57345a60880c9ad10cc1d8f85990c8228d1c0c552231a60ad061d0e519859e5a485aa934d37d414fe48999c1854a1feff3802140c98bff814f4d61633ccde16344d35ed94be5bd05d7f177ffe7a9bef6ec7c16e1582d717d20137fc8392f0e197d3f3ae02747c5f1d99f3b25735198040c47c1deafe23df07809847b5c4cf806dac45169e03bae02e2a123d8f0974547df6d76671fdb89e25506087f9c0d452130479b6c829109963ace7ea6468655926a0af7075ca229cf90719e49c5b00dbf8bd15d05f9e7cf1047fc804c90772e2e6887343c6fc92e433e049da6203c291b98e9eabd66828d81620c0416e587b329e9b666e1644fda5c9d896b39360462230d419950b191371d4886649ca7e24696f5df8b19dc15caf9e87c5da6552b98896bc719db1e61545d0bbbefb90fff4e60c0afa0baad88b3cd6e2f41f4695d9f106000201913b68a5ad2781e0916f2900ed61887667acb2da0dc072824c76d8333c7df34aa0d5f54a972383565385afcf57ee604b6ea5683c610e6a1f3d9280b4de08e1312cf56ddb149e222a5eee89e0974852613bed2bf67eea569955ed2d3de7fdd2110a26295a2c06205b106b7c5aa4d86fe00d1d193e67550d44071e1809189f1d3a7f77c36c9eabe93683c629554a949cdc58f203f661d1e0f0da212beb756c6e45c90e381d086d937fc512caa022c0e951b5923115e6d2418083b55f29bc2941cb59bcedef4dc1db57162f688555d74d4db1a490ca864b0aa9ceca55247e8a76a1e41c4b1f7c4994171304c4e467433a9b33cd1af97a1c6bb96776dcd22e2c4b00882cfc4d4d0b881e044178400268101b22959c51918a54c607b6d0fe4ff048f6fb9862ae3407350bf8b9cfe3b00d0601b445e388b7e922e1e083737c816cc34e68ca15071001cbdc9263e7f67f84b18cf9c263fb90b35a61ba5760bf04c35dfd53e65f6fca12f4950f6b7f973cfa2553794bb36e4a52b610bedaa8f813d6548cef4d8f0dac4d002283f1e5226ba4ca2f854e81703ba1d2ebd9d33ed704d126c52853f6cc28125ad2e430dda917106590fbabb758ebc68402930328692f2535e90364cd388ef0509f3d8d69f688dba3ec8dd1c2aeaa86c7bba3ee57154befb9c39524dd3a4ee5485ba89c6872b4454be2590a392ebf771140ff9c6d173b733d4c681af079a3e86e4d08d88e226d1a47fbd0bb531b26f99e9f5b96665477aa9efb6a0c7e64bc26d76a444c7c03cf2743d71cf3f3e0ea3ca96f1974f102a685d4191a0ad9283b776d7446e03cadc654679981f12faf56ef1eca2c8dde8e5fcb7b2643ddc3aab94ffaef7c40b822b42846770b645a79be0e712d36eda7097b52872b64f5b83bd152107c0a34f0ad26dd0d0ba037859801dfa728c9de0156f997bc57bc4bd7638d117bf5e5f70cb26f4acf5b84da4b9fe6e3564826ad50b5a97ac9516ffcf182ce85646951064bb6f344fa093e34424ef1f88f19163f727807bc9b18cb17839d25b93e3c3860a41bd536cf6d8aeff92680f51ee991885ee2537af77dcada75f00727263181c39ce79176955644a055e32e5585f4d8a836eefb52b9098766bae675124add26bcd9549375e616ec946c422385a5f6a7663857bec9de37d8916cefaa1dbec882038675745edbc549d9b479b74ff805ab8bbf6d875cbb0909859f3c9dd7a373e5d9cfbeeb845cd006639f8d66c68362ad7d326864f4b33733fe5927164daf6ba3f82a31530f70a039c8df9309fc2fa20e805dd39e93f5623da6a0ed419caf75fa872acaf5e4347cae2f58a3fcc5d2dd2f01297ce20e897e5e8313d3f25d3650555401abe2b41d468b58259f660d17db895d10d4ebe859b6cae901487ddc2b261fa894b12206bf73d7694336f999a789599b199eeb83947e1a405bc8c6bb26a89cf2e1103e68133aaa19f315d010e7fe40ce69c74cdeed4fe9a4079bcbac4d9c7f0d6eb39f4baf0f5e8f07ee75cac17f0cdd4b5c06d1caf378b0a5c11627e903bdec0f2664400d15944c943180664e5155cc8d8c830c1567ac5334e517d47151d34c93bc8a983267c9772a774984b3d4fc500c9d88ef2c4771590215a533d8e6ca2f2f8a109bd8133c693da30bc89bcb0d6420c6d13ba572a09dfdc4b51ddf92823aae0839c051a54cf7f938d26b7bd20d4f8f5667ff235ffbf045ae29f4b1451a15f8a0611def5f8af5fce2464b052d3be8511ce231ade8a9c0595979933bc4ee562c1f17c2628036f8bd8c682700ce5d272ec990d4a32860776964c7ea3d9f8c178cb67873e0f347132bd26e9ac2f26ca234a8d7a5a86ec75b348713473f46b5ed406303adf0da7c42844707b1a2ec7482e7ad5abd3bd8df7798593519c3b1f3aabebac72ef05667c6f3c212f9c1b910b337c022ddee40c6a72c2270c697234ac587aa6f3ea649a789eb92482ce7195eeca818ec103d34656ed801d3de690334437d4e4e2feedfd9e013efd637901f1c1b808d3b52552073017c4d374f5823536fc2cb35c721bd63b5e5858c77d41304f23f63158085544f55cbc8b0a98f1ce594a4739ecce354d49c9c0627dee490423f5d520875c003c4cc2c7a968afe3b801f138cd7be1f5365b940b69af58adfcd0aac53b73a6ea30169c4ea404f3070e6295885e2e6404b2a2eb8e10ee9efa4cecf7ea422dfbe5f54926fb02a7f420bcc261b0f780bdd6ec21ecdf20bbee17cb38aa4ca1709e93b192e686a694bb1d486b12c3e58b49977be0dbe738a8120a2e3e352fcc81dd01296db5970c4cae5d9d62cae3a3aa5c68e14b81104c0a70cc444fa9c26313c750c4b1c7883ada319016480a86892740627a1a2b62037e2156d119fae1d9ab12a70f588e2dc4b4c74a7fba5ea9234bcda1107c5aa6b222f938291151762918cb577389971804e22344d9c3b82f9384dbe4d5dd5f4f54cfb777961b953afbc28d44d23bc900e72ba9672f174ff8a39253cf47df9cfe22956be0ef7f1f10a7138679b433659a6dfbb740be399d54316d5785dc07241cec45d5d3999f7aa42c780e6fd22d8b204e00ca560df9ce2fee1eb062951a542be500cf005d9e434f64043df0ba0944b9d0c8f98b7a7ee687c16f39ea557857e3ef2b1287154a1192268d96be927d0d6733bb1d8a96526a2523ca40b7dbd0cca81661b2a51b59f02fd2478e669281fa1a55195b46d4df3807b00ff1219daec31dbbc577f55a4cf465c2a345d7bd9f825c4ee09e9c1a46f5b12fa828a734293a6f71c9dd308299b4415610fb8f6aaaff3582b53313dbdb59ec4861e9d86be5f07b45755ea0475a562efb38769edce378f4aa240858520708de141728fd113d2e181c0a91094cf38f28dc2aee9037e232c4e8cb590db4d3f236dd27c0c863e1b8dcc3a24ac6b7c59f8984735b639d885d2e9dd3d7ba56bcb88c3eaab09da57e05a70045b4cc2e96937b73474b30fd42933c5388d1c12c9b247e32955befc6252c271f322859444248b125806df9a1151976c966f5fc129556b2999b15e3effd13fc8b71dd81c833d58836ad227317dfa07fe0470972688281172c230330fc3c20a1d9a8c5b301e82c6dfe364942cd2e7b4dea760a05d074379d35684c2b07af7abf4a143d673c2a21df9eef354cbc13c735266b7d08d0338453e05d358e9cfd4e2756e2073559d401d7861938f3eec4364e6e87f67338ffc83d82fa82e1fd45ed02384c6b77afba27484763db8100e6788facbb4f778b7d25bcff2abe21469f0d801c6fba0ba755fbc9cab65ae2ca1739f03dbf90396ca59289f92bcaef75b77d76ac300bca5e50f5d5389765ef0cde2626d403874bef31db64580cf92b454399bfdc366b1524cd6a38b85db635e2c97dd0190c196f27f5d1bc1b5fd7dbe88da7de3cf68fd6fd564653d3231feaf69d14a489bda164dcb6dad7488152f495ef28948ec39d8e257d8b739081c2f165e2b82de6a122af8637d98c3659cb3983ba1f55a1a44852bc41fdea27b750ef08bf860304de9ab15bcad6bd6f1471049a99097a6bc1b423f07d906161b68bbc2e49d65e839bbb6baae4d2992dcdffb27aa087ab18209218c8f23599b5671f2f649fbe5d22bdbb8930ce6b12bd550641cb3d0b2deae855b9e730e69e435d5ef3b2d3040c3aee51425303407be540edb797cead83ffe68ebf7c12edb10a42cb990680809b1112743a17dc1d77adf0c7d160a3477379161f2b6f38981b9ce4a76a99f7fa88621b058fdb821803a5d1faa61153a923ac76e2582124521a5f6aed40458e387a3e67d11dfcb6c1c3f9bf87fbfd182113e64c2ee536202ca2fa4ec859306014d63aacc687e34750f1632c1c8fe85306b6739724ae493bb3bfaaf9d7349151080a0997eea1fbb68892942c65c9d9d4ab31bb9ae5519069b557673a813a97cc33a5049c6e0991730eed58823cc32cef259a426401310f94c7abc32b3838469f2bcb5e6291976f42f4eef9821f768d4b835806546188793e6646eebce188626c57caef052a0e760649cf4999d00b95c3a23a449930d26717583b979dedf4c823b6d05966f89d11fb86986216205b0598ecb663ddf6898cd86d25ae7f75c86d7f14d79e0155607b880549e9269e1a9cc4795507728c2cea372ead8468ec1ec1972336d0e7a642fa5ab69b2e8c44378a67a459aee8f9f0f5d0bd7a022e39653fcbd06879f03ab73c9ca952a82bd9378909b2f8f255b3e6b8c46a5523ab471779eb8448bbf3d95c00380f91d0fc9cfca4a0c7137ebea100c48411248cf89baac47082e5442cd5223bc3ecb92b3a77cd63e072f872747847bd7f239159e17b1dc6a0a651063551f778312a6c67716cb30d960f2ea9e3a8ee5ca83f98229b47f0c07e4fb4fb66d5456325afb2a0bb358f5a8c525c2f396fa18a70894b08e864b12cfe4127c075fef5df9e28359701416388fd6b1bf82afe6b3792b20a5c8aed36d290710d6a79d52878b7e50ecbd09d9e7d8ce424664b6821e3d329317091c8aba99b0f1145854b36f6cca7d01b8ed174f7072da416d504d162d206486717fef1f7af168d597f48ee9bc28e132009cda9c5c1bdb0099f707616bb4c0e8d6a7b475782c102c4e4e31e70d8ddeaf38f9c5e9157b5350a6666f0648cdf7a64898a81341850655d0b8ac2eac377b89638b25d55f9de06ac9bf79d2fa62e3b4e482ff70e837a3c68e3aa60b9bb3e64b8859a47f389d6f4d8877b18994755cd78ce0fa45c33480105a3dc07c0a90f8503f8ad63500b91f0730563c2bbb2b941967197d0a990cef2d8233fd71b8e8ee7f112af65da0f255b0efff158501282be154af31fa220c460584c40ba64bc5e1976706ea7b797e7bf3c7d02dd970511373b843252423c61b262dc77d62edf2d82bcc023fb8d2005e39bce9f3f32967cc1dd3d6309c18532e00cfa905438323d84f94996685dfc5478b3c0537b9ded343051e6d8900c0ed426a18f9a3cef610500149137906a78c090eb0ca2b8d981db006b94a4703645b35dfdd53c0e2afa3857db620cab38267374a4dbdcf55c80b3b5d3c3e2c5cf17e1a5e272bf4ace37ba5d2b43cc1ee6977bfe86e8dce75ab3968c934e775ddcfeb97d5723816964f4a61097d109f8ed42e544ebf8c9b98e1a0f6eddb9240fff17ef4efd2bae2c0cf15228766235c7498d4f32a66076df027b394c29b68e25d106400c43d1ec0114afc1f52c3ada0918ce7ead75c5cd0be3aa7f154fd44738bcda51ebecad490e61f73a56084695ea1c2d21703a5834c0ae11b360dcc1c3a370017d9e7abb8af1458481d776b88ec11e7c68767f319a9aaae836694f2048cf6ea99cec9aef319d77ef404b24dbfc8c3a4d9beec9e41090f66bb7123fa0a34fa9745c0fb456d4cf8a6307a03514a40d7515adea9cbd9d62e7ac535bf755b4fe56f31267f41aa373c90716ace7b2124dc20fc8e418111c41657b456dc0c08cb2cb671119dc36662f729b95aeae82405b9fa0ba3bec0d7474f046b4356d50573fee521507d1f6eb3fcb3a3b92dac0846d43c57e4a92bd524a7db97bc94fb652241a6eedf07e72349d4d762acd686ff8dd783a6e7f7e62075d338b2b1a4e7e1d78e863857b55b9888a06b30bff707dd9cae45a7fca14d2c2b5a5b5b8e7cfac26be99bc01c108e1d35f3df64c7f3de8070c72dacbf474b3bf07e8de64beea6da047cf6ab9b9cbc902ab656de1cebdb744774ea1229109f0030f32952336ed2e1a82cce2c5b794144708ee88dff9cd7976eb53c37919bd1395a7ab91a11bee2007faf3c6da5a95e0250ddfa572eb3ace27753c41dd979771da07e92c588b573457efadafb56a914634e86f8188a60c841974d1696b21b200e3ba6400e3ecd2e8c1b3ddc51a5eb33756302eec1c79ce81a9fd34aaff99c066d8f7d2f370dbbcaeba3519d758c0522a0f547cf249363d2e6c84c9f9462d9a89692810f49f295119bbb6d335da10759d57f7be6a993f5c53b83e300b2b100ad085f93a4cf3917336f9178b5452823751466eaaab06d79387f1fc3d3d8a9447c9e2a8ec8bc5afdb5a69736c1180143a4713e3ed234b8ebbde59124c5bada5a2be2ee7d1f25b08db9508781aaff770555d46cdde3c70b06bbe682125e3ab983653440bc49244067e19f6f37542c33b17a3986d49de041871709e0529e9ed5703a30b693536a81c48d7b8b18f79856fb8cc1dae44b1bf6c7d17192397def13f731d196f6b45361c72aa42f252b4a7f065336d847b731eba922a128a8e12b04f0e911897853fa31bfdbea4c0c4350fe8fbffe06c456c93d35718ff5d5c3cc86ca94339fdf654f8f91daccbc1e8b88465bd14fa12345b3670a848d4d2c819237c109e19e52d2310d5d2d097656f20c950a04a7878ca8d45aa3faf9b596b1bac065a89a4112523a3f2888374218c31365d6024e8292f7935d7287de3071b49bede04409e15c0b86db0d9fc2e5ac3fd2347d89711e32f556f83888ddc19102503fc9f0d157a0ab4271c6e5cd1020e32edfcc9eb5c7dcb8a7c500357947da3b83ce429234e0d01e03cbe96b9ab426d67d95a0edbf0e69c5e1dc908e3eff13aa8cd7b69bea59ea96508769ef40c33549fdc49761842a9070074f2ddadb004af1a5ae549111ade7a4d74fbe16fb0fe9dcf9712b6b959ac3c1bd9cba5baf590c1ade9512230e4ae6d9b8438110a6ab4b80e784f6885637905c345d1aaa9c70af369a16b0e9b2a6e095a4704e4f42966c3b5bed2b4e030720f107e689423a9f700178673efbc60805915e35ed7128b2e125b95defb3463ec2036cee791a679e356fe29f392e95f942e17179e9b43afd63449aab29f1af873a4676ad1aefcb3a81bec74a1fc78678151c27f1e4045501556f322651f4882c22eb8d89be56fdfec9003c8e2050ca671dadd4dc454c0c73cd74a574d463fa24aef7030276383e429af63628a80aec18f09b830341a9641907b09dd2181013e090b0713099964217a39afcaf483213ee968e54bab11a884f463808ea28fef726fcb6dbe0c0956b98ad6e6760a687206848f42bdc33487b77950722d232d86651f7666f78004701fea40605d12ba33c1a49f76bd433825a37d85b0d87b594c434516662ab0774e0f0031d94d7522f070fe7b6626e4fbbf8d0716783284c29cd8fb216c91fb779a6538c0dc2eec84f390199d5f8534c66df2d956ad6347dd23501bd20d426457c5216463ec6377d07c18201ac38593fa6fa3c6d89e69f8caddf6a65b044da910509577243205903e0ad7fae06d00c34b1c2c6fd94a95530f2874258b2b19733c7f2dc8658fe0c6228e4313a2378f1330e6035443791b924dac75f21ca5a744d2118d3c6cc3fcaa70f038524fab14e6eb5a201c913bc86c8f137120cd641828f799875e88baad06a951e25457a89a58af0c0298b5bd5ca2c0cd6752d94d7b14cae49f5c2e3ceaa251b0f8c7bff41bdd89b2f56aecefbc2bd5c3905a28649a475ed7b50585279ee157e5a5ce0a700964e9bc3b429b9904636b298e8cb8c85752b5f4b2434f012e7c27fc341a86d7aebcfb3ecfa56afacff5e045a89f125ff0e0a52a90fc028a64a00c858447a1b6291b6e7131b4feaa34cc29de779ad4db39fbe606698ce929379f6cb8e0fbe0adac475384f193864607c9ca5a4277a4d2045987de62fb6906d2d2e772a572a5b78ca4793c7c9a2ed7c6fcdf223cce005351dc08ecb2711d581ed4a1d652b2e2993736ac9ce04fd3a355d3ae848252f5c4849c3f2bb1f97cc5d087269902a817a6a94efdaf3abcd48964b30d141097aa6ee3a238cee01dd375e82892af2e9ca79c0293652a43b168716ab3b51e5c959ac12fd512576244fa7512c20f855076f71e4d840bb0ecc61a9e3ec2df66e6684d54fb46b1d4f298bf7f2724aba5bfc42ce94e79374eaee5bb876f68c31ca3c3fc78b1f802d9a8b450932b892ee660052d7c0f9bd8c9779f766294620dcb9e01a16ca5b838901b03c787b17c48b7f116a90f15d916062fac9308b2771dc8e7a566c0bbff1610d91345e938aee9bf17182c4d9c644f316fc01f86e759f51104c7535cc243a37bb45a4e55bdcef956425790e14a3f6b74b528fc48c8ad77cf991a58a2dbe62ca38a6bb347c1d071be569dc4eb13b4385af9e93871cd28262e32cee582a42f5a8d91a6c337b520ec49e3060b48a47ceb4f87f0faf80f9fafd6c91135d51647a4ce4997f73e609d850ffa4959778e6dd43cd16253471d67649b54b8a3b34bdc58af05c54aa8ad4e27a7cf2e5b79dadcb61c0fc1c9b165f2c44bd3db810dbdad9f951c376491c1d6a61f452cc298465101b6da6354bddc226473423029bac6bf96897c2941db28f42950083afabfcd243160c61ca43816c23b8e37f0c08edbd0e1a3e55be52716964b7f8f4c41da5a2296e63f47bf0cf06db93cf95c97b0e915672c197ca26c3ac2e416da832a164e8dc1d14c6ae1156f599e624781bca4d85023d6877ab12929f9a3a38f2bb58f9141f826e533c307951dd9d3602b2e371bb3c81f5543552ccb364c8b4a5eb2988f15ca89d1fc41f2f9600d14f36cd436a18a68f8f1718259765e2241857b57c8af28332eb8608e0dfdb61d71b62490e2624f505391dc9da7cb114b5069831bbbe3189db214ec4a5dddbc8413b0b96c9b9c4ab4ea179f5dc2ba5b3a953d12c813a41d3938c5dd3c8fc9c1420230e2f25f2cf3b57ec69838d866b2315efac2b51b7f2b03bd65086f92b963273570a4bb5fa5f2bab482c003b2684ecc2db3b0add0232fbfbe2b3f492bb6d55a1f00dcaab344837754f33de76bb65d1d611259c5155f6bc931f2da00e916e1235522e4122cc894b6af3701bb9e9a9337905e2d513afe6db9eb92cae236006def9cf1a523622988feffc626a1c083fbfa2ae39a9337e905b538f259901f6d38d094ffd16cc2042fc89eee1d5c59f719cc7db9d1f626781104b78e8db4ebf15c611cf0ae9f1e46ab5a0afff2660bd5377172bd92025dfb02f439c79221f3c3201c87684c12b00c0db545bfc83dc17322013cc0695549ba5b090ab7d6d6487d4b63987998c42f9a8b6fbfd5635094199052ada11f7afc21cae3c51dc31cd825fc3ad5e0f963a31e4910d94f5b5313b8961f7b7cfe84fb1b001cf199911eff4013b641b7e7325046d489648d30f58e8b19367b6f04c4efaa37af1498df9f83b09c5657db2087244c2a3ccbe42a77818f101746344c33ac151a4d0f96cae7a0223f9007b7626fea259dd53006c0a099b08f8d40acaead3c3d0ecc603b238daba759ebe58247765c422374bd3a2a632bc686f1da9382e0a1e47d3909e041592dd9c63b371aa977fa994858d1cfbdb3f4e89a19568d6457bf07e8c4566edff5c6e67ac9560d7843b342c84cb6fafbca55467f481f81e245a2321bdfb22d7032c71f99250c5727ec9e5437939999a9ad9442ebfcb7f6ce48902ca1c2f0e67de8d1b200223045134744a0629e62867f92d11487dbbefe9074c41f85d01d99b784c0e96159a6ab36803150ac5f0456a3f8d7975e9f0101864cddca4f50daa64eaab32416c01fb729d0952fb5f90b146fa8f1ed214d8a6107943e85b6acb051eb05c817b1cb3d6f8f82242f221d0539bf53dceebcc5fdb84f9ab61701a36175327235508ab0902fa4e166c73fc6a728eb3cc2b402914b8290bbf95eecef9663bd9a68dd0d5d7500bd8419df788794d9717afa25dfae816536fb16a89a501b35fc11bd669bff1f520fa82c75d4e40e25626ec1fa794d458f81a62bf11eeeb07b643367ff3bef7b55b93c497735ccf370d0d3d746066eb649ba8fe37aebaeaccb277c39e60989ac95b1577e0b9894a4b42ba85bc586ee9e7ddad70d8649066cf0893be4df6a1563fccb18ac7300ddbb283669a87d00a6bb20dab628ee69a15dde1cee5a7e61386a6d076e18b1eabf84e03d151eca2b43ab8e4ffda8b90a06734775ddcd21b2187d7b04fe27bd48bc96b94a4bee7ca83dd17a946f845502aead48f384e33244ad14fbaf57b84ca99ccccfeaefd9a165b65595871ee8939292d262a27e6d99b3c32066570c8368179aef5cce5a102df57f60c228642ebc7764ce7fba2d8d90f1a243797570aa1552635a57a30884f9080c40ffa99ee7b5a337dfaee2972213d53cb1c9d6d172b4b8f2d396b106d54a64f6becfb5d070de717452d4143788f5f5868688fcc7204e187189f0b0b53ae758dc406139bd15d40f421456dc3278111149753fb36288f22eba20a3e0ff1208f03439c5168bd0b88af80c086f5713ff5adfd996310141d6e4ed570ec55945698bb64a5fc52d710413fe4c68ed965d0cc3bf3af52156c6306f8c18cca8973a85ad9ca30938015571cdd9bf6255a0c3e3115474cd91d45858a08e0353391ef86a851a1994ab4b1d48ee04ba1ba48d4517dcf15913273a5fae3e8ef03ca1098e8e63aa0e3948977839800c915495b51e75569c559645e75f9839a6f2260bff94841aa765776e6b0dd5437bb242bdc980ba12862b3144a8bf81d6cd211436f7b890c1f3e0d764d2da2ac541bc17e9cb49c2e5b09f949d4ecf3237fe09d2dd457684ebc55a8ae35ef6d4f16ee439a786ddbf5f91638a0b688f9d75a8ed6e2ad8365cfb4cbf4d637fa8eea2afeb419052ba07f1419e4543f3667a74f070a3f5133ee350e5af7c8923e88bd99028c41c7b12fd18e3da814c1f080a90d4098b05742f7bc2c7a9f159a73ce6fe936d94b253102e874726041f0f9049b01226b1395767809dc825a8e3adc3bbf85aa723a58995b5b4fc4d8a1f45c91a1860bdf6072d2c6a7b14caafe0827a266e17b704b5366c5d9473c4554085e53858f2d6fc7a24c4607aeeb7f342f353e056e973f5a8d1c8d41d285d032537bd685e422d0b50a20329343c8b0fc97a2859605cd694ef2f17668e011a1353296dd09d441fd208a1fa19b3191a3b64198ca102a29c0eeb0dee7ee5b16d4d197cb9b6fb102a3a65bb6b8b865659c89fdb4914527dd174a3ac8d0e723f18af9025c042aa5ac8e0444bc182692e221f4a3912518d0d818a937b692343acd53bdb59dad4ce37ec24828c1bd6d4c5b488feaea4e68a8ce6c6c42955d63c786f67563dcf6bf3aedc71522c33767fd0a01549129db02a84595eca3a9f1d361ea1e7bf8c0d0a01393f43690c0f550f125811400d8e41008d9062fb807c7670689f365c5b59a1d57c8adaeca4bf65b85c6fb33c1973f309780680d40b026cff20c07cb30c70554a4a2adf4a34d69d973bf1d6e48e755edec3a3c2cd53559087faceef5a682fe4851ef7b6e8d0e9fd43e5d8212ecf17da592b40ee294928421d31f62bdf88ff08f4f56265be445c181e4b3479b685a6f13fd44332295afc789424f64a89e9698f4866dcc4d1264e2b696cbca1bbd9b241e29a8f5df6d6607d664da073791c0fc7eeaca8399cee8b42b354e32f1026645da9c11717f0f8ec3e3fdafa7032a0c062ab9b7dd472dad1c1999bc5ae9bb5883fd70886807611ddc914197f13e136ce89e60a51a2d876c3a16a404e0eb4f6f26e70ed5a2042680af6bd04f866e8ac9a4ac55346b53de444169bf4cc6ed2bfbca029923ae0441f9cbecf923ba32530e62207ab67fb4f0f71ea3dbbc8ca54144f127ccbb9732cb469472568bc6a05052b2b81ca04ea1352b0d8831c11a51bb421178db7ff10133c904e4ca8e9797d8d2c5d6c34b2eb207bde1a99545d8d8b3458a3cf4f5dab86c7ddbbab52ab0c0bab2a3b05ac8ad58c9e0824662a55df51515a4e75498ac511e3fe10d20cf2709401fd1fcc2b94f0db3075b6079676a0ab4a557df934da3664a82b0fa7026c1cac1709b0bf3fd499260b27f895f79a208a99b7f999b1b36e0c785058f8f25d43e04fee266a0e0aaba1905d5d5e1f75c582ee3ebad4e63f0cc54a05ca3140dcd7baccde0bd853006050100c530077b9335d36bf23e2425f6fc2467f12442cada9a41d8775ec8bcab2716ad5c132ef7e698a0d11297ce27694eda8eee094008478b84b548c38db0f1fc3f1a38455699c005bbd5162bb1192bb8dab4c338e8cb753b2f2a751cc9c6313229294fb4d179992c1dd2be79ac39fdd0e9a40c24382aa9100566dadb2057161258b1a43e5e1c5ff15ef22727c7ca8c09039d7060c3d9e979c8ac4aff8df630d91646d2710b60e9b9550d6392dcd690f0e9ad9a82f1e9b1fb7fd53be69024e3f991dab2b36710d7476f62392506e4b8456e6dd9a7d6aa6aaf68ed7a44dcb189cb73cfe40513ba7128433b330d06ccd488013da4d897f9cfd200acf5239297a6f9eadd7622c2019e837ffdd0065164909b225a18a9af976f0e2501a1acce44118a65089ce20990880c470376db83cd9d4416690936781208f1bac5141aba69203412336fb002c5704d54701a81c58ef0fe459f1502e951f3cdd7d9a28b29f40a196901b79318fbf9b648b9c13daf24090965110e836c3fb3f61d1e1af6c2a94d94b53d48bbb6f538d2e37a993a444967a358b50cc1de585bc72bb5e1ef1f90d6013b2edb46d9bbac42ae129e537e9e80ac24a40d0adca329f87a901d2f484a7e680c0a76850a17b6f257191c4bd54a0154111ff2624783f88da1cfdaf0e03448c5ccf1caf903c8ba64a9247f6c532ea1ca16967cd9dca52a6279232ec3fc4c3162882932e8951d6808d9371ffa1e065b1ac15f2cbe8bf4e384149e5d7fae2b9258383857b103dfd596f01d41886b0e7be4faf5ed61e3a836b6e6dcfa18ca9cf8ba4390a2f90f5935983d44a7efb167c09c5a254f8340ba2f125014272dabea853185c38c7000d186857c74ebfd6d8fcba9b3e8b3ab637f59fc3c8d91dd7c8ce1a21f52f8dcdf17865b35bfc37f8cd59169089e14f75a660cb4431eedb122dc7f84a1021ea33058f20ffc43c7c0b022484c80c81ac993ae521aa2e674b99fa05ed91b9ec67807cf43c0df08173a1e1e0251637cedf2906b149d04840f5d42938eb16d03aa18191f68c1da88cd30863f3e236abd58576bc732dee851aa7d93dadc29636157c88c49878ada5ff9c06828ad0f125c8d29f8986ffdf8603d65de7854857ae4051124783f9a49938903f203a2eeaf00e4a0fc030e5249e0c8f74ec758fccb2bf38d19e92fb9dc6379b427371b824fa49416e7a3c7a5ff76b7cd8a27a8010dbd80d3138b2699c5e2ec8f9d207e31aa040f506678a3a625c7f896acbb3a24be2cef6284e8a8c3a89647d5124e875bd2e4e425f2b5bb575a806b2903adf5ce8bf4052f09e0fbbd1dcdbbc3522945126504f9b74a8e38b1006cd30935712d996b0df81bca93d7ef7722670a2d0e7fa6bd654eceb09b1b00e4a71da8dcf5bbc0cf78d407f22fb26596a0eca153116f6156e7e8822e7cac4733dd4c34f1d40d0903718a928ee9cb75dee3295a811b988cd20e77e49765a61939d71592b8c16602a5d5f17ff10743c9c145cd76e3e60997bd95a0bf8061d41a07732f50252bc7a90f08fd8c670714b126416e57f1db521bf2313ead7f2b0c7e56bdf882a780109d27dc8fbbe61b0198d127050c169cceb6813764f90a07b0fab2ec3580bcb4f4e3039a3cd491d5078a97f221b4009a067e2256f41c81607c649c9c19b75b1225726ad7347f148b50cbca9833219f69045539606dc43bdc2587bea5bb8c5987c2cfb024cb436e222d86d1fb989f6d04c4fdf4cc2ae47cf4945a58d5a354df7467d1d268afd5de8810bab009903e68c3e53194409dfba6ae47cf7fc2c62c959b8fb4c5164082623def37cc5c70003368b035b5da7bc94165327e21ef9e526ac0ef1c1b3e3d27f9433368518107a5a67692bde24f08f053547bec0b94247aaeb5e4da41920651f513f03583392a785ef4958ddbfc2f5f13b6fc64fffd7f351ea48fddbd1a8644697e1dc09c02a75ec6bb16ff1de28da6a861b84a3d5eda2ee79e4eaefa9a4749d3d775288f0d3b140772e0e1c1e546ec9c2f6ba813ce9e569d1555920a45f96aa8f548078fddd88062b733ffe6bcb4a985afa2404523be0fc42b97b609ad2bb12660460b711752c8c997aeca9a748067009a6da8ec1deecf4a44364620e4b802d7732abdfafeba3ff0c79de287ec3a923dab844a855e0becce0a62034291ea1f9531a6950339f7d64876886a8d19bf1b87ce8f41486821a2b974bd0d95bb5a20b34b13ef6b45693a1335787ffc47c1691b20d33d395a811908d7545dffdc52a20ef468d366f3750e55c9a3da10787ac8763b53a36a8b67d4dc44e44dd05fd98bae2c1ec8d42a5a793735c534238a8dc872671f25ad3200aa9fd54338feb58cf2fc939f21a364fdd339c83141a8b2465dc8c737547ce8e28a585012745506f510dfe07e7f1cfb06a57eaa0e1d013fb6922f595e69ac1634f8b034ca786a59847f33329965c439acff2dbf79948c88684b83e376ca55e5973f8c9cfea5922976b73a5387e94da63b546608fd419b318456ddf885db2a6616aaa7015c1c3f24ee904276a473c52a1be414e835531f221bf89c3ace0b48887286d233223fc506043adde6975a38936621c16ac1f25f896ab6c691c9ffee136ce341299eb4839dc1f57ff327b4156b5d6e20fbcb2bb20210eff9a5b55939dc80a8059a6e1ba3a303466f88e211cc523faa2e014ab701ae385deacbbb0caedf991ecee0ccdf63a13314257763f2721fa351c00a76b014ef7c913eff570e66d843c0ecffcf4cd859e55cf9fdf76f8330347222f2146646ddcf29e73832a06227ca021da027ac75efa4c4410ee698c312d0e933962e127d269625a05a55d22f008f98aac2db19141301519bc82de6b54eb44ab334b741c8349ed52743f7ca7e523a3ded408b051514139a91b874578f9eba091661d4b406f6d304e7b9d53a753ed5831bd695f14e23c25a3f4d49a39d8c4907b0a6eb7401daedcf7912c424eff1a7524c65fbf192088dbbf00d28661edbdc01603d5c0017ee02fbe1b8c9de3016af0e9ebef8444a7366df0a8e4799d0cef5b1169c9708aec1cc544e766949160a862359f7cdb28b69aa4e65554913244fc1b12fe612fcf1df55116f4083452a268e4aca142befed9690a6abf44e35e3a242f042b4bc48f8e79594642ce380327cf1634ca019c5d7c0f8b0152a44c131eacec51cd0c56525608b24d8fecbee8ed60858057352ac84cea60b37bc4008122e53020c0c55e47beb7dab143877673b6bb379678c65fc4b4dd3ab7160cc8f008d6f31949ccf4b0446ea266e096fc1f334a803500576236e267fd88fa15cb0799571900a91a80067c5e85e07e493aa74c075938647c516dc02cc978d6447e145e7171dfa7c1b2dbe50b633571369ace4748cee9f5a74577c50f75dc91a77cb0502d0202d29eb06036c61dd321268ea2b42febb77fc4abffa7b5f6cfd2ca57de87965593d8ae9b8d84baf7c7725ef366731d7b6a874710881ee14e57be720055256a848f8958d49f73b098861d3f8aa9eeddc98fc8b1ff0f459b84949c6832943eb8388cadce422785301ab31dd821db9683381411bb4dc58f7585aa90a982906450abaf213b520265155ca07e14131cebc8a62c19e907be755e759befd94bbe539f0e1714f14a23d283897e91cb3b985afa9cc67568468b5c814adf5321aa7a45540dbbe6a8e47ffb9a9f953cc90b501b8d27096ef03d38a168a4c8347137f66d60a590f59b79c7878664652bc98a0bcacf007a5bc746e4d8216c63e173f3df825798c495809dfc5d694720fd25cbc2fc1152c7bddf0ea24675ea6d61ae8300092567886abf23f7d6f3679216dd8d5cb3c85db8e57dfa92c6108599cff2532092fa7b3738087a028323c09fbd1be7e19bc7053b5782d1436f7ed6aac1b6633b3faf21135018cc4043b2427035911d791cd701bd2d97e50073f7a06fc81760812a29a6f866e48b1f35018ec20a64a02a16af17d6fae399fc3fd8f726a10ea41bcf497937e3a7cd819e8fa90af40cd0a067d644d1db288234cb482f85103f4b85bfe352c1059978e72c8b9c3b597cfe08c3152c7ffa7c8de112b5a9f7d44e07f8253adc5de6da1269d71c12923b2e32f7c0a2a717173a2b4eccceb7cdace6d556e3f2e1e7b16d3b9126a1682916784b92200e8335f9c11333b48dd72987bbe0b9ab508ebd7cd5097e340463c29e76cbc36efde191f7cda0b4efdcab800b95896e0a45652bc13435d3978c0023bbf462dfe1e561c9c1194c39315cfcd3b988189d10bf25bfaf92eeca7dbbdd561e31227936bbf0addd092673b416695447f4334ab1be79e157282ab0a3993605fe9ce7af77239392e28f79162de299fdba8edd48b4a1d9350e51fa8264bbdaa19e54a6145bbea89d70a27dafb21dbc07c252171d793cb95fca69bbc15dfd871fd7b08ebbfac70e1aff0d0894966d5646d6ec08cbe0e01a3aba51a7cfa0708d3d5eb02b73f7219e9618810c789e09e97630579a59483198eb4d76d423921e1678904fce1706d3382ee1e2355190b5b55c28b2919d6ee431ba9e8d6e1dd4c7911083255bc81e98325a960a1348b9312a5c1ba05afd90c7dd99e9e359c69714b3dd2e9849d16261771e6236d93860ce72b10cc2174316d21afee30fdd369f98aa1edbe8003825e6ca749f6e14c9f495999cfef49c8dc0c9ba7363d44502e2fd601ddaf2db2cdfc9fac254ca64d3b12c4f02979b21f78a951c8d8cdc5d87016bcde28d2c5e7abaeb8c99e072eb4617c6bcc635f6374a4f9b35455958b63747a27e800fde2f31a6e31a63feea11407df93c701b5d19ecc66a8305cc7c6055228c0e085329f13e3e83ef8b57c4f45cf473e889db070a999c55eaf53e43e552360da68824c4535126c15166284e3a5f0b7697552d79f49e0e7b1d146543988118f8a61fe1a2241717363d4295dae18ad8e2a62a37ab725489015a52c23e2dcf3fef31af9f9d50c525e5ffa3b350b8800ee474f24b044963d31975e6e5ea6d638aecd657a5ccacacf6fae638ba78e18282cdbab24cae562f13d543ba5c2120ff6cf86daf51cb2f06bd76737023fd94d82c892fa98350eea725716faaf88f99cebfd35f0d3e1962b6873f5b1434e9f06f0a327c69084775d64137b374ce0309db265d66eff1f2f06d85358bcc9eed45da3dbbbf8f2c6b006c4934bffdd96d3295a795337ee55513e8b5d96f68c002f8e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"751d9b73f82dff89c4203590843c0b09"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
