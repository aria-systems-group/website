<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"73987fc6d0a0e7168bdc19fe17cbd03dc6dd01d1d5ce429df9a4dc9a94cdbdc00b9880908d79d46fd1b80f3863517abf72549727c3a407d19e6e3d8ea1d1f751246fc6008bbd9344515e4829587a8234a800bf72a7a39578af3b6b6c71ea55595ca947464a98ec29f13c4e610e4000e27e9ddf3d53f9a84378423fffd77647d79734a29179242a8cf0f19bee810430b3ea7ddf1aa9c536aea4713905a5f7ee8787f413420729d099a8eb6bdc2249d7e0ea012fd59c562464bf4315b382d74b9fd01438776bd4beafd0a7e63826259484190fdba4acc613131ac9221fc9ef586d70ce64094a3552608dd37bc7711a513cd8c3758d6f59716cd948b28457f2ea9cb660c142eed0986fad5e7a0baa9d403e6fe0a5f38782721477584e85c8ae372be2591fc8e0817f5a68cae1b217238846fb19cd9035ec9e9db0ba66aaecaa4846763936708ab89b2a7c661ed2a61c698dfee25c6ddb144750082b74e0c9dd2e7e3a7e3c41b58da98e62486195f115d85912aca6dace508c03abd0506a71c2ddc84f3c837e94a5b618460f5e7e6a4d28fb0778a00987978a3bfdced0c6e13a0c1ab90b93638309f1f50163b400e48d420329c54930507a8dba45744e39ba6ed9f2b7766155c67a1a2ae7e55baca70f4aca6b9f0ba4b23eef1180ae768ca2b34147c3142d03d7ed94efc32e76ee7cc6413dea7f39e150923d6112574f618ac7ac188637f0253ee2d3ce60378e258c4f9245dabf2f9efa3227adcce590b0e4f7cedcc76eec9289522d97cf9394e4c331ec99315080e542cfe07c6023521c8dbcd54acf9a72b1659b005c5b8104f53eb61f3183c04275ae5eb1cab12061d1017329001cea42af115f2d7ad0a5edadd0d10618553af21017be1afb3772475671d0734aeb71313cc3abc879311dccfcce9a12908f9e5e144add8f9ba1144440262f6c35f88dd0b34e6682fafa5e0d7657c5f529ac57bac35d40fcb46d8d14e93fc50b777931f7570ad3f7ed4c8ce1947ecfaf207e05695063b56bd9fd26273d10220945b1ec0711ddf0f975e0c804221f3c3de40402d533e567336d4cfd66e4880fb3c107a3a7a5671b2be3b7c1cd42e6f7740a7c1f940bd2d29a17a014f44fa75999849346cf7296fcab360d053ee16f29d64cb1b91480fe71739045cf4f6522c7017115f83b53db450ef61e9341031780d0cddb4ad3ff28ccebdc4537ccdafc9de92bcea0201725b1d42849e64e0bd56b0b5a5bf6dc6b86e13610cd8fe7152f14797ccbeecceddd1e91205f88ededbd6e229c027c6bdb3fe5af6579009e09fde70dbeba9947d8f5e7314135a2e1753d37fa20d81477c6c3f67754a9c255f3f64a2999331948d863e513174abd6f776199796ce1f8e478aba120eacd3eb1be3ac134b3faf90f755fafed5bd37f3b42a5dcc413e10b15fa9514fbcd9adb902b99c17da75dcc897509b7abed2831ac25e2a1bd796ff1613b31f0f107f9232411b2e77f830ffb3d103105a0e3996df20489aa4333571389dec7fc67766782fdad056dcda6a7bff44b4c9cf7db0fb371f1b66e7c8a71c486c79d5bfb68856f72bb85cb4a42651c4992c4f58197e6970307cfe2d5da403812d537167a2eb7c1aeefdca79a927095390921a534d4fe933815ba66203b49d7fa4fa016866e80fb2aad3e2d5c822c8417fd24655b327538b02c8b87d95eae8c544fcb730e2797f430f8d53e4404bf816520a97463f068c62e6beb5d38d34e7e98e45b02a427aab74c44b18640a734e25dd22c659bf26675916d07f2312455d27e9ad66c32dd90eb2d82f56481f260fc007eaa30f184379cfc021e80e4cbaeff00bb84a1e4366cedce614d19c14757e9132e70c4c18e23cf489ec83043e5fd5014bc6a607f64fc0f5fc59d0eda12eea29ae1072c94ca934279314ddc329407f9c91a2874ef47f08acdfbeb092f88dbcccd1e833b78867419bba339821e23d9291ce43f5b5d5231852fea3cbea91937706db08c52cb7cb98a61de8997cc2639bfe2dd15b45aacc32acf19fb7b4e8ff4ed792f9fcc2b128643ab863c46a6c4fe5c7aef4b4e74e09a197756c8399dfb069f2a99d1706ab79b6fa0a4b58ddcbc852e06c3214dcc5b7f12a3bbf3b2ff9bb44134caef5e4ab53425e98bb7f6e67831aee66a459b134bab831840f514c7a4cf014283056d863ae077a0c8e520c57f197b59baf4363cbe60cc32005999c8f0664303df2f2c1497420ec7efeb27a51613f02b6581425b3e8334561aedaa17aa43fc5e74098b806d9a1c42c66f6246fd47d01ce24f916d45c748c8afa1599157bb6ae4e048fb37627a8ecb269c68959fd4ed571136344efefd32fecb638c4003abba4679893b4b11b9ecb2d5fbf40d9fd6f8a4df5e560ee636751835b0d7e31732cc024c1f4ea7a940a7a9ddf97b5a73c5f1d6fda1b1360185dac30f862d214704464196f51586c6e4f503b0933019fee560a83a4b5f3fd0abe59f5c4fd6f6d64d811dd25d5ead1c13ef6569a67ff172a3b86e49d29fdb9329b253c3a2a3857be54d2cfe5702a6bfc47fcb46b86036493c19599ca5380fe0674e7eca71865d4ab205788aa462d080b8a24107f84ec68bda035e909e59e422cce177240207cac1476120a59dbecd3bfcb474b7454e2d665ab1ad61a82103001ba13309c77f20e628673e1217a378496370eb0c91b8f2702e33fa1fd1e41dfaeb3086004a5c80ae28e986c6e18b9e641894d83ae59e2028e4bb7226efbd1833085ebf144232a34ec38a7a5a1774e99994c077b127870e2b01e43fffe58bed46f2c4ac0d47eb85dc2177c81456e40da5682b2b5eccd6a3ff3a6c7c583aeed63a8e533f2088dea7afb59ded06ca88783472a0a61a97022e908e15a209da3aea5e4099ee1008dd1f6c8a584af4ca1de21c3fd33783ba26f15e0603f8da7259afd015c0101356d4852bfc61873bba6a3c1e1b27c4d0ea09e512cdbd433dbf01185307ea6edba66c3f8d9edef3461ec9bbc6a88ddee7fdc183106aa2bcd386e4b789753ca8190149620f81750c8f6c51d78eeb6a0c642543ddc8324a3f52cac42bb34d686e2a524e483f4e35e8224012c14e278fc0cf9b4b6628352396817aec7580a4696d4ef67a54f1b376de92e36a1de3d09b0c14c1ecfd494a1445b0a2e9a79f4fdbd2966fe4788430f53100e13fa4f38a846de1601b9bd67a65e315b8818ced5955d11cc46c14ba1afd21c7cb3c145b8972d9d78608ff9b5a53c73bdf1a21617e8efe0e0f66414bdbb37fb30aee914bba5d2f1632d5c0b538cf7f870d8b89d188140ccd82a11fa8dbfeb8fe394852883e69275094f91415d3a9632478941cec97967739f6ee4c558caef1880cf7216612cad69d53aadf9e8b9ca9bde9362ff5d635b3204d9f91339841b735973db5b906dbb49a5ef1f16cb965bc08d8db6ad6ac76bdceed202b386c05b4a1afaf12db4a16379106dde28cf7eaf4dfcbe36b0453e214d4b5b446f6b83a752287658bd4606916007d30f6477ff960205e3691e01f95e0fd46f036413c63884bff1bd7cee118adc1821d178322194319c4ff1ed51df0d98943459df15310135058e0b7299ba652f645d940860df6d249126a6f05a59a0af2cc6b26305169b7c8ebf9165df518f8f82c71df73425375f29f5ccf96a15e381253c79313b65813820d5950d2cd8848efeeda4fe098d7cba1a993160094c4e37dd1d3cf5d2388cb04542e8ab208b1f2a2dc037b9c6b1bb3bd659fa1bb9b820c8aa2d2c0b3133e8fa7946a7ac1ee68f27238235cef3b03ad211f1c876d102ee6a285e02e6a8063fdbc93eab67357548f44880d64f2b3fc1b056a2331d9fc35f249913e194faeaab8a4e67ab958664249c14358afb5a52808a6b905a2b3f2528d04605a4cf7b18b3eb23ff6651edbc76a326f1d2fbbe894e3bff1faef8bdf675b72d8baee17863c4d30ea860162e2a7cb1acb5e10ed869dbd0ea0e5557ac927518883779d99df65a3cc4a3cf21a53bc4adeb0d6dee14e85f656c49119833f2699d54966595a5ba0baf870c6156c003557de801f403d0e12a33b19d355ef0cee161b5625e7569c8134ec2e9db10825278efdbbbc2a454e8fbbf5c86ea247bbd64fdb9cc543bd715bfc24e062e20f319b792e6d627daa671312f5e4a54ea585d0ff56ea10ee06964fb0236b2b163f749024d8586765fbe5985990b333f2e2dfa84369ec7b83cf34df92d27ba8af3dc69be67aff47acc89cd73140b3622065281e90941e8fe5adac438f2a278f05891e427dfec936b69d22be8b139d2a6e5cb723535c6a5ef776a2a669249cc97d83ff5e38e731d7ca969dcf68563100f38df7f97101929d45e2f20684d1fc2f277de378683a911063043d3d69917d84f019f29d30f4b02932b521f92a7529923e47890750e714bcf4636e9fcbc93ff57a6fc3eb8c73a18485e39f9fccd63ba8ee773f35ce8d947f34e121f85735d41b0517ed05c0296ced3f5fc71f007cbc1f8b384088179a2a63f4d34ca2abcabfd79310b482a9ff228868021e91457cad80b116b7f88ff1071cc5a9368b8a984703aa418f2f618e9df1f23ccfd5f471c2ac902c81b007c371a4ce7475be1a6da1334d07a9c4e208bf89574f6f22b65e96ebbdeae7c93cc184afcb06245b6ecd15111af591745f9f876ce4d27a45d1910eb3dce474194e93dfb90f111008f9f3d92809e7dde8739ad8636513e7ec7e755dbda9c20ae2dca60d4634fc89f52e7b0c6f8af001e7536f769017780bf0092bf0191fa0cfdf4741d5b2b37c9bea8fa79bd1c3d06b18878f5e67ac3628558658441c9ba79acff169aa13e051da4b42a65b5d3e8c6c912170fe68b6a432aece4a437debcc6414cf0becbe6a9fc4d7037e946559ddedc10ef75b81f58d8c0fcd08a1f4b99575a7e561f494f09c641bac3d2a33daf3140a8e5e154c4d520d9ac7f02b710631e6bcba8c833425a93113f5ec0665e3e2a0bf4e0e5a4bbd12e7f902b4c46916d241826b9e60aa688fa95130a1ed06c8f17c5ec814018fde80d795a3663a0fd22b914fdd23679f4b66431a2d1c53c8aa827a59a3a798cac54e97dab634e083f99cc254519e56f79e4e10c4aac7e0d4f2915bea8c8cec7db11bfbdd8b81546ffe3d9a4e6e55a06350168e7f5b823211abadb15931c92627cf086bc5a955453459f61f986108c7b7f060f63d67beff31218cbf0cf0a7d79d25e9512e82991971c819cb282e4ec14f4aea1f63d74378879a2d2cb72f7ceb811fd14b4e9776e3288ccd1c40ce3eeddfd66b5c09e3acc032070b9782a8ce14e3d428f5f646b06753601d552e7e3351b8f2a781d6c4f107e5b89b8f5679a2c674d0f365a35d46d437bb8020ef7cb9f55ce3aa08b89b551520921e42212db174189027e86d136e1fd14d237a11a2703d3018c8b272f47e3568ffef54d1e02d929bb3ef85daa00f0b29803b32c2c5b2c321fd23aac74b563844975d04dc66faed14e62fecf37a32327e8d52e667947e6b757c474f6cc785b649c1cedffd657fd9ed031169021cc47db0cd9036f14e1271b42b66db694b5f4cdd0eaf235d57712c36a9d197e0033e426690384f4e669353beefdf3dd1a12c6d0f61ccfad1a1cce60a60688eeb44c1360beecfef1865df5b224194d9b2d1e212293d092fecb697d75e5a259da7446159b0de6a902d9f24562f92002ba01941eda3ff324f4455c0bbf60bb697bc3bcdb60efc2b482e31add1cb83751282e29c615cde5b8920a4541663af94cb66ca0db90d3227577d3ac51ef76e5735ef6aedcf24b8861f423325b0a74e005cf847735fc62a542bf73e4c5416ab8763b1d169f63bb500643ac674b0b9b81fbf9cb7187f2152dcd82c14c688e316e70c70fb6e84925577b8c12b13e5897c41af71ab832f7aeafd80fcf508e0d68bac79ae4b89cb4e74b0a86e78b4e1ed963d3d815174fc192ac14f9e3f4d01255c35d387d46f32d708d2cfc7777ea4038227954d0d3e00ed8563706fc250fbca8e3b142e364267908741ffcbfe0e0805ca71265024f280363352aefd3caaf81dc832597a45a07c03e1f0a9abae0c78fa543a1cc8631b8c29f13100aa7d896080ae966dd69c4b8c0191bfff7bb1f5e715e90fb8cc32fdf96f29305c213d4baa794ace793bec66f442edb43a574dae62a697778d2dface5649e64fb4de39d8fa4b3ad4232c1abd0386b5ea7237048ebaf312efc0590321d17fce3504127430400a2fffaef13b4a9e6e63d697bf1ba8a40183a268711b410f21befeb79103e0401f6bbd73e5a6f5663b54fb68f43b5a5f35c69d864f3c751f36a17bc16caa38b577846f4d58e0f4b04983b764b275aa85395ac56351c7e7ddf633e455520180d8222fc3dbf3e827dc7f64cd688197f226a876a371db4a7629e66aeae28349c58b8e538effbe47422484bee845e7c8dfca1cc0510d3db0ba53cb75c2c4c4dcf3464e751a42621144dde54fc34e4b0f14eb3ddf6106d64dfa0ddaff68b57ff9879829c9f617aaced6007869b6070209cc156459e6c35ff76e5b68e5472a547294bbb2d2b78dd935edfaf33c6be2b8fdf36969fcbe950058d60d2b8e97c5484324227e0ee98c9b1cec6de1d56db308d51b67ad93fafab99db0ca28a5475f94a0d4710e5ddb1dfe6c7d794edf4fa7b7474188e3b806bfb9656b0ecf2b1a142b18ff8601462d1edeae75b5f3c65527bf34c886fda8632d0e75707018a61983effee4ad2097e2abac346e6337868e5faddacceaaf5e466089529bf0cd35aa484420aeae0b87db5bad62f80b1a568aea5b559d4df91ad72943fa2ac2e2d7016fd33decb7887754cbf3c8d60737a524ba774c300ab8e2ef9acc5b4a16d6980a5c0f2efde20a37503b215c24bd048e7dcfd33188a68f4b63d267d57b27765be74a47a2b8f9058285837de2c38ea9ab32249bf198bbe74697da1ae915326a901cc0579e47b3e6471c34524c3219419df7007e632f083e39cec78b277f74986cb7d6916113b276617c36cc92375f1f7d4aec3d3962c2538c5f8a4d3c27cf5ea18be518d635cf6748392bb8d0059fdbacc8b8ea17424bfe9c93a6d05d00a49077061538a380d172b2ebeea5b96383c7d70363cb12dc0b3cfe1d7061e583a39e9642593820e4d7835c43b796c10b29e762c87b303eb2549880cfceb88781eb3b5ec82b46fcbbf822babb4a2f679eaaa449d70617f76bf60593fd3ae9bc59f6e5d0484ec53db48f7f664eeb4fe820370c5f60c1298ef3b52fd03242a4193d8615024926f6a5dd04cf17d5c07e21d5a22b0411f3c367d94059cec1f7e2a2b3d9764a9314562e0ce05e12e5084a023c3dbb70365c4c11a6741b514c4e607a8982b01cc709dd1ae3100be46fe6e20fc46cce93cc4e2cdcb98b1c5ca746702e39a06d90080582808435ec2ace96ab36e945b1fb10f502d1d1e274b93e994a6a4553a9825e9983b29f6df8d01d66ba04b9a114885ba96f32fc3c18af11181fdaf495942df5fabc8ffdb2eb9549b348dc433935810398773ca7eb988c4cdbe21281c8f14339923f27c3bf58130fb900a1b721a3913a0fd527cdcd5bb225e80cefb51eb280f09408e8a5bf670c3518cb3959e37d0c038b8b1afca8e2dd5ae58716547707571bc46bf8dae9df36db1c3dc5420d31e3617d183f85fbe26e045f70fabc86e5e4bad5294bc17f2abf6d9cfc6dcb72c95518ac3ba48d7fc77fe2d4062ce88d7538f72cac49083e31908909ad128d7324d2a6070839abe04b164bc895a7701f9f67ee2713e2ebcabfcace9eea69a60a92628c7c1ed6f88f0d0639823c3d45a8676d78b379cfe46038aac6fe390bcfa8e081103d558082767360ac489cc2d3c9b0e6f9942f3424f6fdd103a3b5d2a0737b3c9434943e2456e004f109899346fcde3714848dd306b84d26f54f5d03b0362abbce2510edd96e7791982ac932ba12506521800e63d2a8cd9ebb3fe4794ed7277150b0025795805fc1c0e96b21ca8cfbab68812d79e512175f76f637aa81c840f5a52d7659955fee869b77d7a8274199f3fd3af35434722b7f90a9ae29e6103bfee4341ae81fac1777faa5f6883b5c0929d4486821560acfff830f341bc2da0418ab72357fdcc864224340caf798ad5f246060aeff898809f05e512c7118e180242af1fd1a0e7e97e3f209d0e5482d25107b2d598faa802e06da3f6afe8e666a2cd2cda9a03d9fb0008c04166357bc400f319845c824d6241bd3a333e9f800f478696cd6a45489194ddf413f7e13211a85207e8556ff6e8b1870f5b4294170f42098d5f8c0491d34b07eab8aa9720b0ca2014a044f4571b9e659c3c7a6a8e01a82ec529e761eb2cb8d3a0f5dce0ece6a632871c9ba567a06a75f8c9eb7a7503808a815dbcde1b3564f77405672a74ab3b24502b5c8987a3b813041f81999a158eb80ada832668a8c2116ee660c54d2944a8443dece2025ad8acc11ba6903b9cd68c930994d8274f5097948e88c92292bd29ec35b59135db7287713345b28089f7f3a3812f52fd26d34317e9bdcc7d596bb1ddaaa5614e380c044eedb5f86fd0b67eb54243652d7213d4d419241c918be2340df1b0649f4d41fb62bf27028453ca4240ac7fb8481c8ad0a0512bd17428798259868b344c41fe31d9db66dd1ae90dd27062fe810e418022a1b5f4fdbde87d3588d628a593b3c27f652848474cf5b645c1a8490299f2c8e6d84a0115da17e4a0a342e8034f0b0c3ee62d9e31d5b020849daf6a404e2089d0d72bd7bac982111536ef73d974fc10b400169c43770ca2f8757f9683772332428e7a49bf7ff6f647ba6b3c22eac153f40a1e43dd36e199b013fd19a48f2f4b47db2d24388fd3191156610119adc6e41920d20084c855cc953477fbdd5464666392fc585d72490bdb432f0933e66ad1389d842196951f4c6c496a80b9825dc518743ed31483ebcc72284253352557f55eec77fc1f269735a4dd246070e6c49f7fab6c39c1d48f765129bf0c2e9d9c27e4789ff5aa65309315dff5554631588340cd4aebfd1dcf2bc52f65db23dedb66f76970301b1fe3ac60f83860803327209504c512075ff68fa31a14d873ccdc72c87ddc2be81be5039dad1b168ee9520e2d7aff462693c03a66526c5cd641713d0bf8684137985a6321de3020b77a49429d5ed7f6f0cc12dc3fcb8286f0dd313a23a6f8aadb692f3b27a1e77283340a80d339206498bb19ad0b6021cb9a87ad7b62dca31881415c7a444a72f4ef61c86ae4bbe69d62f1b087dc3a9652dd76d59b271db0949e2f4f1ac46b23fbd4e6728864e36dc2ed2f42d5995a91379d161a710ec4508930c1964fae075c74edbbb60a2b2a9ffd9663e15cbc34a66d516355208063f35aedb070e7dfcea68f3e9965e3dc412238873f43139b677d524286164ed9f7688015f6a2cd66c734901466bfb77dc082e4ed68ebed274cdab96824f63c8a989fea14ec4142f60750b4cb4d05fe63f884ac8a2c09dede046b044ffeedd5129e3df3b4105f864db1833183c96b61ce6230b9c8de80254bd681df1082f1ae9888e2ab1499cd58bbb95633135d099058bee9719e345b2026ade38257be81fb72adeb0e76605928967a55343f0714c9b977fad9efbc94d09433097501d5d83b43a13e68b02516e401a9b222303fd28c50cbe2c5cd50c8ead1cbc32996817eb599dc71f7b78cd42ff4345954251b9498904e17a3f45f4ca5a27e852fb9f658c1f0c8b6b6df42d69cc50eeb0d4730766867ff626dec72a262ea6433b5079f9abed6dfe9a856e155c1e929baadf3b6ffcfeacd29996773baa8502db40c49ab1b0cd19355b19c9a5182e3051f07363ae5bc8d286890ea968000f2ef9768f15a91bba43b1852042f70bf25b9664b715cc5e2433c6ad02336346047f9c2f2584aabdbae0a7b0a1ecfa56982953f777156695c673a085d3b4a2f4c9ac27ba016306927de322d26a31d2d9c4940742fab9bcf8b1465d8ac6025649454c83de573b00f829e36f4655edc25f1a805574691260b02fbd6d18d12dd9c2b274e80ac4b439d99d7c61a2ef9b6745178cc1c1e57f4cf38b7b7fe042e649aa05ea633fd5b96bf30d5177567a495004a901e107c9568728bd0c8f26cf9d7e2a7315bc95dd4850705b6b6af104754a2a2952dfc19e069d75911127da434a08b0d51f254975db5557d4e91075bbeaa307665cd9333f3d62ef398a59174b9ae14687ca6ec0a0b29d8538241e5731be7e50ab2fb7992839b6a35181e4e6fba7e571584bafc21a3c79337a422a326d71614bf9083c41c6b9911caf1f3dfc5a053c93d0ce5bf9cdc0232d44b3f6cabb25e014761b11a68883c95c0c14802d82b0f626b6bdda3c8ec14c316bd7b2a74d36f895d649dc1993750b566e93ea6aec6a04171e6daffa9a78862e0655426e09b3a45fbe95e90167e86243468f8c942c33d2b42f28dbd98a226065b625fe20e4148ed87d02e900a185cf059f22ce47986212e77393ad6f54ab730742b1ee53911003da774672b0bd125e71ecbd39a4084793af0dd28e68962c2216797f87bdb361fec85caff6c30ef110a4a77c6923cdac24ad50653d25991e095fdd986fbb83fe053459912c9f36c5c999dfae9301bc441ee51b1d48f8a6652401478a64aa99483076573b3c5f19cbee78df2ac33b908800ab17ecc5bbfc3aa857479a88f9d46951f80cbfa2e571e98645b173610e973aad6d0d42ddd154590c9590c252fad2cfe25911a2651d68ecacc3ff08610c147b20bd951eb8b6f1c7e82c8bbba42a0de2f96593c5fed9d6770bbb91418b211edd45a9e537386186f52d1cb4d8c293f85760011cecaf97f0bdd8cee95ccc88df13735a53e1827609f789f7678b4f3e8b42f4f0b4833b886eebff8bee0695ee262508a4e5a96d9ba74e12804bbbb806ad2666fd3d41bb5dea264ae958babb5999414df61b5de4146ab82a89ec4883e1ba955bee7a1d0d0434248f14151ee3f3c6fd05a87b3ee99ea9f3b3ee606a56ae086c51288393ed6c18e7e0e0ea54e1b844d1f2f04a63bc67a2e82b2eeceba68a86e31626630df627c0e0d9750425c7f0d2e000f01dfa42f5c020db40d21ff3481c6b6f041b27cd9d038f9cd71ab6fce451c75f75c555b87f24278c382da05b3ecfe0c269e9115e8931aa03ecf2de2f43e9220132ad3ba99841c2bb347a70ada4cf5b3d0e8d5222b908e95e52b2da2da88e8a0187bfa38be7cc6be2b3731db9d60c9bd8555a25040aad2bb9d7faf218e05d0d93180e10c4431bb8d3739fb34ac6d5fac90f056c68ec60a7b24d70d8e41a42a92454458ffb871993e3a20c69985a77a6909e59526134482d08205098966f75256727af5dc0f4bc8d37341707c858ac6127b689160da6ea8103f2ac4403419eb7c4f2467415d995c38ff112fb3f6278ce387c902d1d75e3b6865615a3e83581f2ee76a5191200066eff28616a22a83680d07f05cce9c8a980f985d5249b776f46bc856dbb2e5e11c9c7c7e7c0bb49cbf072433fc0ac4b97e5f73b51f5d921385dd346bc1b4a9146de9586ba2ffbfcd02475e59f55bfabf1f4b3ed9c68b144d580eaf848df050aa859673d98b139bf35db624034ba189864354feedf4ef3a689d08c3b3cae100951e86eb6a184dbc0685045fa70676a843e426b55373c00605c4282d72e579102fa053f0c357582e7b7e4a13acf62389991e17b726d987a4cab43dc842b7125b8127591cc90d2a25cf1ddd29165d8b5b7fe4ae73166191d91afa10522037f95f391822cad003945c014dd7754fbd57470fb8274fedbd78fbbe5477ca64d08cdca09958cdaf80583526e86bada2b0f62ea19125402d0e3cf6f3fe95062fc08d53c9ad61df6b83605d12a8b0720151af007f355f356ddbb08b543115538643b5f09eeccfa649596e5297a7be6da643b7ca07b31579f480d53489e415605f4d8d65c2d0a59eb822686737cc5361b74566a4be0de46199474129dc0ce3e243340ae1dbd4570444d2ff968ca83ecd3ba47b168219e0f94420177041e42ba8bf793b30207014fbc565a4d97642e3408d745dabce2d58dfeed637647ee1d3347228b2ee763c17ff30d8f9c732bcd83f12a8de5aeb286252252c701c0d9588dc4e5e65ed9b59e44596918ea9a97f925e3af160eb6a143881cf841fed68d9a9f80b610d932bb26fc1ad86afcf70c537274a05abe5d5775736f53dc829894c1b72d6604612319f99c904b8863cea579969a51fd0f9e48d79d1ed632893e5f394941bdabbc3cd3e1942e6282425039e9aed85e552e31c4597a9a85d9af29d1b385901adb4807126afb03cf26e445a17c51912b95778c33a57fc0edd75f4b31610c9a06f94580a6d31a339b39b073ce7b72bec0a72ac0442a17312fa3e40490f991bf8a72c21a79e1b51fc26f7b04cd962dcc4ee3e9677f5767f0f437cb2282ecb2abb5bf671152f352f89ee6d9ae94d3bd0e2d397b8f0a453223a75bbaed7f17af1d05ee23086cf9e4108c91d42e4ed87642b27a16dae9136246dd6202683b359021bcf1b8889b4755ed55dcdc02966f376c3688c5e84217f3f81624bcee0f604a6cc2921f97769df15ef14c2bf641fb352b8b9628efa710921913a7f7d57b007ea4256817f77fd2300b3f7040ea5906599b4c7ee147e95b5c01443238860c27aac48f773e7852504d03cdd6128c9deba3ba920bf8e18729f22eb6223e4d4def6a7bbf9f4545b3df024d9c7dac1e7ec0042e7d7c088ae81ac86699fb939bf365315efbfebf2903982f6e5ed3b6c529bdedd5876c684b6643682f188682d1964979948ce77e4c4184380941453058f2e1e161b9ecb5ea62f1496f4d3f8c31c0b7a75b89546776458823367af12c010010ea3c8d278eb08dc4a2ee002d6ad54127b4ffc885bc79a2dff3cf8596326f39beec70ffce01562b774e6bf981ec6a06a5266632665a9fb30163a1ba823bd27e1b07fd2500fe313a26025df074a954ed86f41b5d4e786985bae6530dd7f9d8e03dfcfe26534b562915a95ea71790ea3d7b4f707c9b0402152b14d88432e0ab0b7d9a501b1d78420580aa20584e45a02153baab861d15d5291f3e4828f24131f86b6357e145e9d67083ae7d859acbfa7fe01b13f6fccd714b43188b7d790be57b581697d83a05a0a66915ea5b32e32e85e27780c535462d61a062da80ba043893bd77f260e4922a4d57adf9852e552a672cfe30a2d2ac3f4180afcf465eb9848ee29b418540cfb2bbcaf1b45e7cad58089ce316b9a6a98098b6f350b97b6d9f2ef2ffd52a451b5e36e9c6a531d30c692bd60143eb7d7707ea0e27e30ae1f2650210e1441475ede26c173e97a5e3f7a09986f29261b03b5775c5f6edfd84f609bf2655d8c7d13e907134598f8b64caa2d0d05cb59e30b80fef04c90311b18689d3126768d809727215292cc13b681e075fe18300c610f5dbcb38f396676fe98826b9965cce65104247e9f18efd82094c7838aa4cd37e941d30cb9a36ebe409c8b7ffd2c0c9c09b5224603ffb15f6f4b39e9309a0616e723fcaee36cde8ce7e380c810685d4cc364d957d85be32b1bc55249be931f983bee783d4bd67c031a19214b5ad5404202db33843fa89e87773bcc52f862d66d4b320fa5406a617e0fa052d8deba71ebd4d7c013954e269881ef06eabc47c77fc3230a03bca9314455f46b55a33817d4b330c2212f28651684d8333a568ab3b1ecaa1aa998d41a80fc015b0d77f1e01feae2496193dc6eeadd66e0b77ca7297bec69aa7f6aeba6a02ad6e247b34e07738c2dcb53106e7d58d55c6ee799a20d76dbaff056a21b86849d7e6036e5ad11a0ee8258b51b1aec51502202a86546ac182e54047a9d039e28850310f678d8020fe8affd251d837244da53d684aa349c8f47aaef70938bd46014a93b702e52070e09a7939caa7ac98a6aa5d7d6f22653876cd85d18a157aa4edd2910ef7a87520007aed071bb487f5f1be6485afa78ecd1a162e2aaeb1cc14b69da39977414b8d89757a575b524003cbd40ccc6d8bfd5ffa5b5630974eab22c8964a9b7d77cf68efd49e3e36e0f236b00738b1ea03473104bfb01105aa74416b493de7f2212674a8a39ed69a6257c0fbef8b843d717f3ab9ef6501be32c4cb07412e6a01c7240fb9bcb185060f221d94e75bbf9f710c07102ed529dc8bb232968005567849bb41d10c7a5653af11e87b2acf8e96f433b0c3da647263cd8fe9f4e90e2b0991387dbe82b9f1078bc8e49e6a932f93ad0a7196441b7d7cc81908b6dea79c0c8ff77f0c0231103a5b22e010aea0e9ef2a34c16bb5f96c77d6533a18e410ffeb08bd00ce5dce15bb7f2844513d675c5cf056f1f6e30e5dde64fedbedf8fdfb25540ccda7e9610a8be4a545f69ef81d092c852c3da01eb449d20887701ad7c2e0d2ac970ffb73c1b473c6e606cb3e4fc7a6dae9a8bc89e7186559b2c640971ac7f88907a1862a5b93d7a9aeb8ca2dd1d7cb6119c73a5825af52d33212e122f221c84c6fccd03e222bfe8ccbe6a98351fccb2558cef7a3fad381976b7ac74567d07722f60450b0cf6759a1c6990b15228fd0e6115b598dc068b64875012de670aafd2be47599b9980d9e70f84f6cc0fbc3774f5570b1aacbd8a1d2b3f1a15174f46994ed543da4a968b04cdd7786d48f2290693b7f511e3b5e6f0039dab6b7eecc7fd3a6fe72fdf20fbe76a03d8b9332a6ebd21821181cedf41e2534d1dfc75a3e4b939c758746046c76141911885335344079dbf45aab4cc7bc111ac531218bc0cd08817a404436ca5dd4577d979ebe33b5c64fa2bc025de8153e4115846450ba201ed80199c671aa0caaff2eb76c6b879e3599e07beb031cc1d08463fc86eb78f4dccc1b1328ec52fbe8ceebdd856eb0fce7ecd8046a9fa596a2b64f945d0d278fab8230f2f9be60631d8bde806ba182f917160e477873d446bc4f719325d1c427c4235a51d2faff3c8754c443c5bb1567d2118fc24465d6cc3cd0e517bbc54c6674c50aaa846773159a07f6dae3a84fa0b7b080c0c180919ee2a8a1a215483fd965e0cb5817244ebf9794b5b866d506c050b850c1a346d8e4eec09b98a1a1c5705ef1defe6acce91a1aa7b22784076a471a778e6b877a4c71191f82b8af9752bacd7f9e678466bd799146d4218cc6c9136e4ed494fcf100568b25692c2b19b45d183e199d4c560c64aae1277b9f2089a0aa94bf75a7b11716a98bc81b20e4da68a68a96a2f81d2a44b1daa2e8e2276820daf83b1534385ced3562ef76d683282fca33081039a1dd760318d7b608f94cf38a1fd3ce79f800d4cd16963284d6af5ca763bcdade3264c48bf065865a72cfb89a9a375bf8109fd8143d3871a356a8315a1bffc62c85a14b888534fc341fcb9e688d9d4b5407bcce62fc9f56b872da24fa235f4646e52dbad8375f98203441e1039dfca87f560d1daeb67a5b36409ffab38b360ad4fb464f53abcbdf3f1ac456be3adffbca13a4acc94d4f57660eab205d115f3203784f77902a94ff4acc0dd0362e6bb3824a8aa3abda89ee5b0d10eccee0ed4754f17b19408b705e51afd64bfb57a5fe625a6cfa2fa62b0e88bbdcaccaf9f6341ab38eaaf21f7b7169686f8f2f29324cb059831b8d38ff8cf883445d33c4c93c48e2f5deaa6848accfee0c3b8de84d787b1d611b562831547575013a672774cc258c9bc1b575c4e6101d784652def165e888a1576efb2abe6843c2a42599833dcdcdd91f5a0827b789203f6c4b3aba841732270024e7e1417a73302bad58955ec96f0e03b6c4b8afca210b0fa0e7fc04844de82fcced7c8a8a0bb983044b29bf993b34b056a111ad76aaebe1302916b6a2a74e5dda2efd4369d2d15d6fd8e706c262b945fcb1a5d9dab6181898e9f62cc18d063057f6cdd437bb93332a5cef691fa1713207e8091dceda5b3d8b641b50a234995396d53046ce3e224b40168574ed1eb9ee1200683275ad5154d988b16849873c9c285c5088f7a8cf42e6a79c4907087211fcbd017a48cb6744d43c67d2ee35bb83918c2d80f7bfdf7009cc24b645fa6de23320ded3d920d4adac6a5b6fdf0e1254afd96dc7b5b3e0dd8c051a0fc5af58e7b9d93df4e72f211abdb218db716b58993e427bedd62bb171b38a9daae9b8309308b5119901bc81c6beb88964dfad025b5f59a71ebe0e886c86196e00fd15b57f8582abfa81e9e5963da6152d130d811bc817af6eb4489bbea3d1fecb786d3e99ab131c7fe4dbb1e0b185eb43b90d3beb97fe87da77c5c633cf218dd82b224eab62e72f2dd0f13c1ddbab90640aa1af12b076945942720103c00b2ed2f5bd6a28e3fdf4742da6d5064da5cdf0ddb4755120e4ff2baa38f2aff247e034228945acc7227fb97e277297d9e79ee57d892ce0cb049372649a83fd97f4c452ff86d119e33dbf1204118ec0f1b719186a1fbd4fb18833e5c45ebca8f16d4018f52496fbbac3429896b681ba4bb2a97de841d2be6f86722825e9b5cb32d39f5d516d4f0abe23abf3160c9034ae88f0a6ae3dc3b412e831ddd5a8fcf3483ecfde84367dd569d120b28ab359ba4878af4d69fbd4e5d20ab135a34108e1c89d2340a7f8564208a2f8f4c504f109233eb3485a86cef6b921e1cdce9e7af34f6427ea3bda888e4793ca3470cc8997abfd01f9e02d77b92e6e177793ff00216e1dfa5ed6ad8f20fc831cd6d4cf9ee14e00178f117d92d85e38c5c089f77c4f67ed98dfece49dc285b49bc4d3f3d82b5e305b258563b77b5603a8af590c19f7eafe6b244ee643e054d5e4fa9f24f8fc3817971309908f8c6edbf188c765172bd5604dd16a4b7613fb926039286c9e50ce70fc7de349842b19c6b301bb641465f5df1786e3ccd2a9d838d9d49a3ce3b98d09edddd9727037ab0b1427e7f14be80b27a9dfb1ac54d8dfcd0a30040bf7ee4b6533d12a5cf6eb87dd8ce6b6a53fd3a05f06c482e730cae5fd9801906d41e2464f3c6c97cb03417b04929c2409473fb03eaed4abb92d334339059d04566fb7ae5bb331c8fcf5442a5b51535960be5f2a628f2dc82aa3d5d607b2521a61dc6cecdf6f7f14e2a41475f738bc1cb9f5ea36b151e13cb74237f3ed569adc48cf2084ac3bdd041c0a80cd391d657e0f78a44f3b677d00d1385342f79e63d39a4aa979e7c8d11eaecaed95b75ee46d341386c58c0acff7cfdf85bff0b2715b2585534312ec9995a7f6464fa8a87ba3e9380d88ed47632ce7d11d0d6eaa5217b574540e1e26bc91d47204001fee7a37d609eedbb3de0d0e3f569162d46934d8d6e78d8140843d54f838b4723a43741b68349127f6c8de6e038e96e75128a82e0a6bcb4edf0421c1298f0d12edc3b0e972f1c296532db63caa5de0bc95d4207bc6c832440d866e40fb2c1f946ef2641e3c2512323c1e3114df516544436c61269d22115500213b99e3912b16bca9eb5f9d327769b0191122d3c54d6c9e91b0688eb744509bf556c3d6b12c352ea394a77044f32668ee86efeea2391a53bb75695545183b65651605791e3dbd6093424b230a8803a28edc344681b7a7298cd9a7a18a6a5e2e7226cf5cc49753a639b231bfb59d55bfd7be6e438294fc6001cae816151504d828ef2147a404c23af469e78d8e21658f56eec106279656596a31a370bdc7a6f215365673424e572c176fb6f5192f6ff53f5d7210193337ed6581dad53b2abc779b31b7fce75b1e500d9b4e20cf5fd5119abf239170bda7a1ee0c4af265bb4e01dbd13867f048c4faabab7cdc3fcc5088652c37b5a51c93e6cdafa46c7e24e7a4b2ebab1746b380a21e90e2711558f0ab4913a8b871ae3b4d368b79917597f8f669b7455474753642f3365a1cb39ff8d588da1443a6a0693f9dd63eef0103a156282cacbbef447c46e247945446e51568d852d9100d916e7db18b8deec70da13887936ab2b3fd4dd8c09499f2f0693acd7d459af59764555ba78b2a599e6051c930bebf4d665ea916eeb6a9fa990ba68bf55c1e0c7930270c9e585e69c4311f19bfd7d298c0a354deb0b4113bc0015ba941afc951d9d2e86b161e52578b760f0948639321c8d3310c7803a1ca9a56599df7b3a5d34261e42ce3e3c71501d44b1da4c8b87b6f5d1a52d86e22e2610d5f6bf6ff02c8565d880ee5df85dd61b42b36f8c6e281f33da5ebc2f1a460a0f16af0821d38414ff6e2604679202827fde60abca680a55761ca52cf7fb6ecfa89b8b7e9f915f592132b759ca20290e33dacba196d3cfb6e51c442be2df20d5c0e93090b0c464e7ff1c9111014d79c7796fdba08cab2f36d99f8ecc3043635d829e09de2657193635ac7a4c193a7ebe9d72bdb286d31a63241fa2a6835d4530014668b3c77ec47e4153c11b98ff35d82b7781bfeb37b007756c353adba07a777183c8e18b94dab20234f934726521fb2f9eb9597ffd658949fa893c7816ee468396f4742737b4a17ed92396d5d89e6f7def61bdb20d8dc91c75d3c8b420d6bc8b0b468ce3dc9766e1f846791a6abc9bd5a50339fda8856b6dd30cce5e6c54c6793f9e9b9df96c2914133c9b4cd9966104dfb58d231274f88b4539db809c030d1d2778c9328a7f0ad0019f7b4c0d69464ad7aed0b857b1256e4f8dcc78b31edcf5ee82dbb6b7ac55c9c43dc1ac59dc140c63ef6a9624f6d1e9c3f74305a9f712dc68d32c10042ecf1f2d511d13e4f0ad2adb2803e8558bb51c93950d260621624eab42a335ab9aa855e2ccdfc","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"f1a10871d41f7d270b5e86ba30f8e44b"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
