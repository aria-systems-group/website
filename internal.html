<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"abda388f115a96b3d85457d7e668db99baf41c5dc1613cc472002ec55e7bd6adf1e9af9fcb890b31fa7509eefce9a089b4d928837fce7a7a6e58a6367e9296a6d1aef76e2637abd69039d82126db5af6030beba32015509dd1e770c77620e5c639b4f97088a9bbe0f09a6c3be03a15db0cd608603f0fb2e839e636b0eac3c095dff882f10b43516ccc4b7b20fca7e59389a154755b5e31700d045bdfad831d5609a661f8add615fe298da70edd0380c35d44a4141d47cbdb7bb71d4142d6d15aa5db17097cefca104c457e0f44e94413a75bc9d35ae8c2d5863df06e9a8199c3bf9f60f8ea47aff43bf1be17ab7213014c2e9f0ec96f214dd0e2c4fbbe3edd021613aae41df104d2121b339a7c1763de7dfdb6600c9c2679c57484845dd9bbf1fc0e129a3fee7e1d0a9ea49864c6aab07ae96b40eb8c2d24814d7d9f2c4e0a0c92d16d50bfc57bbb8640357154a69524a86f740103ea2976dcd6638142eda6f31b93db50726b28f1e7e26e24b3030dfe7e73f931ec86392d14c280643976b95c479aee021a933dbcd6930979331f0e85ed00f56a2fc83cc7334ce70bfbc6f4d33e2393e8005efa78fd34c5e5988cb3ab3072e3622c14c8c4ef3858d71b8ae964f4e6a4ab0f58e0ae882086e9384d00f9a0d395219bdbfc55ec8dcc6ee0b4589b8dd163865d83c9b4ee13969b7cd7ff308f496e75b7831e430822976231e3ae2ad25baabd7f7b05262e313a845414821b04b169a7d2e84675666747819c3582bad6ded8c638ccd5f5b22856a7dd76d001a895490f33ea48998e110992d269a3c8350130f686d168f23eb48754f4bc110bf6fcac02d8358c0cc22254ef1e47e81ac7412a67b9d3c013b3fe00a302be3cc75ed11ac2c09843534a3e2808364b6e7846a46df8ecaed8989bd97b95da0d77a6f6b2fd5e8bd5dda270d3ebf41428925f8882308cfefdd2030e1af78875fa351c802f3a3c1368091d865acb7dfe150eefd9a1c97314e35e4ababa02c25d930a41678728c42a0ecb25eca09d53407fbbe0134ed44425bfcb78fbb0bd8948a26d472fbeb3b61e3e994bec7243aa08a721a224af5cf73426c159ca75694ec284f0bfd66f8cea34f748293fb8a0a9b444ee651ad35d08f9fcb2eba3a424d51838bac03e874303a4af59b6d326ac62b1efc1fb47c9545a88272d45e6d41ffe352c444ecdb81a684c1ff1831dbda7d1e597b6d88fd78fd0466889a93864993b7fd1b04a9150711adb5443d9547ced791847ce610547904062727d8ad21147a30e236bebaeb226ee371246d60d77611cfb92d8bca0aa7cfa76a7adf536f8e5f4be8fcfa315e2b14dfe90cd648068ae89d933352f306a880fc255cdd3889e2ddf56f193f3459563c853212d957781cc18f9736c109af47f5548ebf6f09ee1e1b5986792fcc4b8a3b0561edbb80bb4adb354701cf8860aa1c374052368df41635698d55bb94cc9bba222e25f6fe5bf4839fb1aef7d5095b7aac032bc4af2738820147411f0386663e77c7dca0ac12e9062c268938a76ce396a70bb521bb64bf8ff2c81393c3abd2bc985e5e3db9e8eb7a9211d905fdaf6003fcdfe3001824d65a12ec89121f44899a179230b163b2975867e442e748008d56e698d3751d4f110daa637cbada313480dcd6955cf563dbd9b5c861a45bb653145d0bae37f78582553ab0a29d8330154ccca5d8ae7a5d9b22473ef60510df03fa1ed6350f93f456b5b8b9682f0388dd05a981526f93ebcdc46a864cfa4b82daa1cf5fc28dfc338182a07efb0519777364a958a6aad0a32055c28474518764b4f9dadeeadcf36603f43998d5489b194cf469b314d1b71cd81abf3144f6c021842a8c07d82e60d7bac6e23d9805b2bb4968b439d905fe25a97af94a57625538e97e3df985cd819953cb547ca17b12c8f16d4ffee2959b2b702a21136cabe6892d90c2c698cf43dd9b0c4b08e0252397853a71636ee7443a2a6de43696ce40dcd5b040dbbcb5313b9aa98b046980d61837b7f9825e147f4b9523522bf59e389738d184d380c795c1bc7547d1cc3624ee647e11a96e8df0a0bdf12660e00ba16aa1ade743cc6c049328d0265e2a6a6b68858c1d714882b9512f86232155f758b30b07b14cfc495b09cdc283036d4dbdead64dedd741445c5489a2d1983a83f1209dfe719a6a3bcda57bfcb5b149f4ed213bf82ee612db46f575551439e79b03e0f4f396c7d2a9f75103aca4dc3acee371aaf87c3c9832222fcfeffada32833adce6acc99e6aa92bdbb4ce862f8f40d76d5ef3284f9c845ae03fffbbc0aba1051324ef55e1fb7c2e96f616a9e64ad3f1d3fdb2972e51ccf879f23f80ae77ef26d4f95352cca95d2ebd92f9622c6c5c836bfa7ec808570704a396addccbe74edd7d4fe7592f96858b678657703a16260c30b3311ebb949657a0ebb080d976f37c97dc5e32b3cc30f811b9a023a98380bbbd1e7c6b398227f563cd4cbe1fcf7d53e80a05628a75b63a8052087c1a6821ad64e42977685115bff518dcd12475e3b598d3ead9e40905dc32592868640f1984d5fded910046eafa0822ece8d370d2ed02f63429022a95d35b230c9044adb8c498e74c9f377f901804ccc4932185ade809cae2d2a8d01b50a60e3e30e287e0f19d0fde82fd5a74299a4e1d1542e50b69747703052d373e1a8628c0645c6f1a7d92cac238ece05a01c14a998482b9bd18e6e3163fd8c83fe19c0f9cf358fb01b0b93aa61dee7d81ad394c3a460c59ec1011de8d17bb90028f1d8353e7451ad345f35ff07bdcf50ee3919631851e888853b4e718d1e1a6387e4aad39d5f6ec058b255020e9d7c061d6fa8142070781af5f6d0c2b0088dda97b4443fb834c3b4a2c84086e2dfa68a0829a25d2a3f10ec6ac46803ef167d1d96e03fc1aa43c63a8047d530db70a7b604c593d2efc2d5bad906f34481029102a2c8052ea32d83bd0df348ebc5e3dd3a4cc08b206ad54bb0a55edfd9b598bbff243a3ead3a9bae4e5827db4059b92ea0d7cb3f3aff4b110175ca21ca7709f38ff98359ba4ea26464eaca54b79a4cb830d841aa373567610639b4f0cecf6355f3591ca0b8a32c1d0d2c7c15b0a6ad4fc06eba46d50ca74283a4f6fcff7568b9958210c2c7e66b357e4937e0aa024e09cd9bf12dcc502edd7c5d2f5fa82414498b0a51e28e77e10d03dd219021be1c14180295b5028bf970f0ce37877555c50c8094e56de669f95ee95dd253140ba5d669c5382fc227a0c8ecb6b3a6d2fb0e2960252208e183e1b21f512d17d3688ce56bf63e6c3d9be8bc9836496619e0fe019e9e24f6feb69f48eaa14770ea2ff84fcb3751f6d20adeee667bddc8d0e9e735fa1619a6c5e562869204694dc9f4fb3976fad47908adf786636432de262c29ab2c474077d1477d2cc9ea245093f58570e8cb135fa6987a99cd98b7c89def0f30f85a7e041b7a99b09b8e12c476a302a647fc9f3f655caefb3e430bc4833f0d085117a4e7706e02b57d3df74395e72f66d3b116309777e182bf359d050f411ed1cb315042c1e4d1d4f1954fba70aeb8de0cba0d5bf4c9dfae9cad2307328d63c498647f552be952d11ed3b88cfb7c8ac551873e16b63482298685e2ba11f72299846c448ed046a6b0137a930ba939a24876e03bf9db565e24312e98b465e1e610e5773bc00235a35345ef4adf1784d79086fb065b3554c8619f0164eed9837aba2cc31c23c90ff34029cfcbec4500bf66321d08008cda76d4ea552012afffa664a318c9fb902936192e1fb62b38819c298c82bd6e6286777793657bc9fa3c8f33c32e4c736085f41a40596cf62b322fbe8c82ac8e65e3a9b9678495089fb3db63c967c4a85019774a5f39a32acb415706bc0b70cfea321daf1c1e3f9ae6d8d45b8bb356280b33da7084ed9aa52b7aa40456360bb7b9d7892752f5953af3985a25bc14c919118a39ac9c14aa21707cc0a98ca02b7a132d8b647fde37c3f948871ee5a0fcb4e2b8d8d9cd6ac662303c62fa7e3311501a22177cac6c07c0007e9de74a9df083cc7d5f2046740d1b7495f03fe78e937cab16b12421c201f86b148c41a764a9fc260be3310ca00f9cb3bd9454e5dccc4a32860b51d31277d5ce890360d2031644aed11e55b7e6231fe054d781ae15b54437964dc46a01416c6685ff7a3d439bcbbd950f2356bca6013dff5097acecbe3929e7d278942da4f0c293a0b66ae89b94dbbba6f0a8f5efcd6ad9990a1fc9b197932883d457a07f230a9ad835568c11832609431836173d650b7ca157de58e9eb213fc40547f6da9b7d568df3730775a8e6fe696e54ebf9cbd94990276a043a831fef2f7b43b9d74bdbdea50dca1b0d8ef9a1c42ed667f9bc72eaa0a7a51ad7bfd9bab8df17cb3aa83df61002b3f9afbceaac7e86087d36b590a1d785c624506a61ebcc02cf3a225ad94305db968e1f3c024007c89541a061d287644a0c0639c1637a8f7b15be485f76457ff2c92b00abdc613c3eaf4b8dc2e13cdf11d212fd11659634af0d4425ee55a30b12fbc3ba58df2b2246306578e34aee25af841fe73c9f91663b24fa007c434abeefdd6204975a15f735b0bc3c3c150869cd678e02082164de8e20b7820e8af8f0ec97e046e4c87ed03aed11757a39d02d2d6d0719ac02ba814170e4b1db59a5d47ba43ebdeaa99dbf06041b826bf6afb0a3ccad0ac985912fd61bd22e0cd0133b34bf5b7748415c027909f4a396f214cdd1f0dc6f6666e993fd286e03b7de03af71543ae36325482d5f4535c8bd7bd3231246a7942d71ff5e39d06d8cddad01aca0e52cb4788b7d2cf24743b7d6fe1897f6eaf0f961d25bfab152898d18d7a9db7804eb4b08ef31438d575ca36cacf32a52fe3fcdaded82938b2bd46e5bb6ac4e54d8834e220f4587c804ed5b25002f6b56a1be52f0ba1eb62e7b710bd574803e676a95086158870a0cb4d1db1eabe629fb923372c79f11a974332441cca2579aae925dfbb881a75c81007b10fea8ae7e74ce14d463c19f6ac7b74d7c2cda6f4965f57e7a306f87df2827db8e36e5788e79b7756bcb05d7b30ed1fded64482daa484d968e5de12404cf0b9f00dbb4090640d63dfae7a3b961211b402d67271a8f7777f6365c1be2ca37b2e6cef6fc992e05f0fbea87cc5a16662574e91bed207bf7495ba01db5c850abbf9d04f881ceb4ac6955aaee746bd6b32996dcf0349e6a5f3cfc048679bb7ae47e97cc7c13424e701271a35fcf959d25bdcd3c42b33d9317a014edbcb9c58129acfd51abe4b3db6cee91cd943ff2e0a88bf51679ed256bef6ee9aebcfe784c30a29fd5b045fd9c4f9edd6b0d6e91f6abd9ba5a566a537412e09778e510dc58f89f4c591ba8f8d671a8a0ec009ca804a92763a1f72ae61c42047034dd83fd7561535b76a9de8308ffdf73f49d36b63580a9f8d6cc894195be1be759d89d0a0c1245bc10ba61c3585aa6ead9bc9bcd0c0a6a7bd6fcf241bc495b5fdbf1cf54deb1c1d3676b54f791e15601a5cab893bacbcb6277545e123eae820632994ea20ad7dbeab938224f61813b88bb0c316b25b73c7fe7d829cdc8ce583b5c17cfe49212df47fb9cde418c5029d69ac3b05f60ebaba831e8ebf121c7856ba55607520bbdc6580bfb594b097809b76bbb1c63ae9f2bc8ced3cc877f546a16f33298e2c998ef0c6a469ac20b0234bf72473559598ea69df65e6fa47c65fe3fcc9f163ee8beb18af796bf0d37c3e24afafc09c06af69bd794e41240519aa9d4242a442fbde0701dafec7a8da9a0aeb9535a60afad0b7c8b5f7f130250d16dc08b282b42b5da707e736d2e17b762c0061638d3110cb4ce9584629003ea02fac998dfc25df4904b1661126599aa6d597c2c67a5d5f2ac7d47a0902d53eeb0b8a8db7e97ae3d4f4b620d32b6fc8739e6255bb2fc2363497ef26958336bf54acf3a505ef73344d2862e331dd30a55127f11784ab69fee1a215d6889ba40a3266884d8bb9608969340cf4424ca7926ad44695257ccc98cfec785b90620c596ea12a475b7b2a5c6ac82cba436d76110c541ae4a70f11efbc44dbbe928b9a88476996d814ec78701ec896952af88f21dc7495aca8c2c1c0791ce6a1752b5aaa398579b8005874c70907ff6d22fde6702af58d3ea5eab19224b58d4460d346f71afb2162d9c352b062c12d074f4f75afad0320ae891e92f51d4cb186ce7c1a59f88e09c6bdecddf2a53829fee998af269c93e3e40270dca8ee80cea85fcc062f6480a8a3fd9eeb3141ecdecaba24ac7e2743b6be27f2ba4632c2e119350dbae821c5dfb6bdc09e7c30130678b8bc68049b880a5d0b7ffcd966131c31d2982368468cdcd7b8ca02b03496405f249a09c16975b982ae6a01682f01fa5d31003a5539c815ec4641c4466dce5e6367eb487d672551277adaa1a0f92b852f97a2da2bb9103472c1e6917a0624a3d34fa1f7c179428110df84f70564272fc653dc6fddaf5dc56087ac5891f2b94dded44f86e027f020520978fae6bf3d812d84169b0d37f86ebae8493afe723767832850787f58c5742a5e7c902d5d31da7912731a066588f1abb77985b7f04bfb48a48803e3d26b9d35bd519f2f7af62fc65986b4eb18974fba66531993d63e9432b1cd16bf0694e862b7ca1d2053c5d9295a316fee14b74cd6bca8d88b9c30841184ad8259530e991c7f16189988f5e6cf17f18822aa9c15da7d69475439ea29dcf87bb41a5e59a1fb88539013e7254054dc856ec1b64690027ed1b290bd38d2a895d7885f6dea08abf7dae46ab7f1f47eb186f33a33790058b25bc775977665428d6b2db0cac0259c4b7cd13e93af097d30f44c82bbf6c0486d697f0c016a4cbd2306227b70b0fdf56ac62fe323e9a820db659cae97d0d8ac91062a6f187cb6569a3bd8e8b511607738adb47ec738691f25aa43cd8e538506f8fc3ae422551a2ab9bc4b20763812841a366c99d340c675d8cbf8da93ccd541f496bfdf65a12b236d6ccdaff06ffc451ec8306c602c3ed84b33489b142fa7f7999061a78ae032eabb06b876a3ef07a23ef6afe9e3efbbc0d0cd8f3596c078e44666b7192def7d807ab7167e64ce0a6d3eee7c0497c7d3baffae70ed268a624f27f4c03d38bd7921598b5346c4ae29b9d7d88b82217cc16271937dc3d40aa2fdc6650f1b7a69c016fb809e741826130019b6f4bccdf1cda3e7cd5bc4deb9d30f327918359070de7160e69e8009981c16edc45a1517be7ad0961e67704e9b1bed86b04cdee19626d286a9d980c4c3a7a11738c30807d79cc143abce8578ae7b4de3154ade6ca1cf5aacd396e027cd5ce3b37492a02ebb25e9d1433e7d2b1cd08ac81b12730fdd267975e2797b8660597035ab3cbc6a2d1b251619feb1821e23b9786116295b2844f5aeee8f7ee7f4038bcc288f0a62b0d663154cb2086d1fa7a7b44ed0218e8028e42a42eaffebbb29b7fa47998c8c1c4b7e67615e0b7b7f90053d3a1034276ddfa5d40b7127dd4292076ee3ce481c90e28b80c76921b0478414422692ff08ba270b305f21bfa275bc58524f659e477fe805061892854e64daecbc158f3072a04a015e377648119edfcd38acc6ac61ea5c8cbd6c428f23aeeadc0e6ed386a8386245955dc966d11e97e0f9e5a49d05457ec6f3076dfa486883b5457f2df71ed857a4e8a45944b967c01b27f10db5a79b89957b711ae1fc6ec6a7e78a49b0a35795f4e0a579f90f4b77983efe8a8ce6d2c05a80d181c5d52fd205a8106a1a08e6c97b374d028fd7adb1e8a68d792ec2fe869600c609762ddf2c5ed4e4abeb8b8699b52c0b70c37e61bb963a8a24e3eb35bad0383195c3773369ee469e4d1c70e41de416cc45d3ba6efb8081e7eae6b165fd4a67e3cea2d31ec6e9af9c1df05c2feed9aca27a4594ec6bf8fa7f7324535a582516d9368ba8a656355490e1e9f2c0586579e306a61e9ed0f8e3c143a163b213706b1201e8c5c3e66b98c164f4386b8c49c23db62ce8d9f8724eb1b8b777a680a59210508f8550e2580118ab9e5d0aa8a8b1ad06b80cd9342a2c42c36f9905f0a88f416f9b516f32fd548207c25501dd5455157dabc12d51f737ba82c37b7da49db5fb363af3e507b738705160938235af83444e9922cab0a5995c74e780705e42a9a7252bfd5c34f4e1b10e6eeb8551d90b4d4c610b5d76637924f8d0789516bd19f92279836787840e752d0cb4bf60e597fdeb5c5b609ef819ab75f6f7078dcc78e97e469aed91c0aaf336aa33bd21e304d14cf81305f186ffb9f0352f4050febbff776519ce7492f9eb3aa88d4ea08d54bf2ae60b918f8f32f62a1828fac86e2d2f75a1d89d83d8e723d528d6311adbcb0edf9b77fb175618e1b074bc1e5d4690d3c35ccaceac62647b0fa2ee4e330a0ef2ba65829fc01067a39cb81c6b4be45eb4afc9cc49e611fc512399be49c1c830542c4e01f4f80b5d52cd80805b58fdc0afb0b58fd7cb753cbd79529144abfaad718cb2f82d70efb825c022ba04ccbe534d2b8878757a4ec87226bdb77919768fa6f79933abb276c621528fc9eea1b89113a21aa2fbe9081df92e9be8c48f09e615d2d22e9c1ba57782901922939ca04270128f4d1862e07fd095d94f7968b0cd6b11b4c0a45cd08ebf28c5114d97a348d9847a4b14c9d308b8c2b34367abc3659ba63b43fbccf4edae32b8f4badada305c29a4500f766b40ff7d7ef4eb245768cba3b6ade2717ec0279f2b4efa4be2a803ccbdfcec8328128129efe4f4c1cb9c15148390e8904c11822e8ab0fa1b8f7f2d2d9dcef21a152cd2f23d675d6404d4960096f35d440567ae62a58f74c1ffbfd625d6c3afe568989486cff950dcd3a2a4d7c911d9d8c7900fe5d472fa128f404534e5d8400b225f1d2c37fb35498db5cda7150f0568549bf1543007e1e0212a191ab8fb5c80a1928f35013f1edf848fd8b8c8ea4a4cc6d6c40c6ae8f1946af11a23983e95441bc7f4d59503e673a67d75c39dc16b809371ebced67b2380d7f33d97cbc3466b52c520405c178328d27d7f53cbcddc69cbc5abd3c4aae0f3767464033f62f9aeddc716d45a2147f5da1bc115b956cf22c4e5ea71b0c98db00eebc735d44847bbc4e5a305c3c8e05c8cb8ae2f9814905b951dc486264b0c94151845ca8869bd58cf470fef3c71899b09eeb0b581304da2bfed214015ecb79540007d99ac50f165723892c1530abe363d8ec02ab79cffd076ef0707509b796bc0c087d3e110c4b91abc55325a00afa430d359898de46a3a4afdc4bb7404911544280bce88e5cd1adf9d529c780a2e48761dbc0872be7a8bc3e7e974838775aeb51fca930a8b6c07cb994eee363049d7f3211348d34c5283ac8acf404e2b59e692c84fc994cd656b9611654deae0d94cbc370c77e4f92202dc9508e2d7bba2a340a232d83367399d3603b8b62526d43177fe0c291718b37e8441338b4082f6bce741ab00db0a127d6d18dc1b2df66469ec5cf689ad1d7cf287cbacc4b3dc25ca8057aaab5ff071aa66d78d6b6e4376af974fe6e79f04517e564f4fd29830b3e50a6ce57e3a464cbe6c652f0b6be885286ee6c4610e2d4c40cf9f0f3a64c2659c5cd3da9cb76cb967ae6629ba267a9ac6b6817ed52d61b2a369fce0a0b1ad7a5f2b53e2a0a83a056c8573c4c970917308af9067bbd8064bc2fdc2abc916a6b7b24f2590ea12210b77905512d90061d4fb3b23a1d7dc247ef55d9a2ccd10ef4e110bde434c3415a1c129a9e9b9cdb088a217b56ee99fac55e70a852761d03c4f60d20585230389febf8db5c4136ba3eedabde74e45b1c64dcf5d9766f6cacab149a415b96c0720335ea9a6caf1cadbdc834436415602598dd1a0598064946e92f5311acde459f35b32e4a3ce5a2ac3b6b93e5318a8d3023c1de42f9c68512ed519baf3f059090ed8046fdfcc2b0b1d1ec12c4fc7394b78f2c5bb59f0c3716e5a1c6e7b4174fb286f684d354d3773374cf4769b3229944fc3f869dbdf7b8b3177e9eb7036da265c850bba6c023f22b0103463103f1791acfae827076272dffd6e3d85e3869014cc6812364c69757c0316f01dcbc95ce0e6f99252c608ac7f43650f0a0b1f36a7f88dd21c70609b4123900fb5f0060fb555c4a0fbf3b49c37854bb5566603caea382caca4e55b90689df875d4048d79bb5f9ea4bc201dbfd4aaaad4c30e8d42116f3ac282a07f842e18f5215aaa6737bfc9ae43085fd8fd22b41824a82c3e332163ad5e1e9569cbddb02134a27a189cc5d7da31a3467ce44d53706497363008de070f824e555f1a411ab5ba1ebb9521e65b2384a79249ce9aa106efe43b2e00df0cc6e2d975a2143c98ed5ff740573880a01bd42273ed4e28b077476af6d4f649ffe2fc0a26b58c5e279aa4f36c669f3dd5bb0973e756b0cc5d4e0585d7ecd0f870b10169c014f10de8a825a93cf5bb16bbd6e62ad0352a6e49bd4c947aa76e4100a607e4e6556a10cadc2c8ae817d37071b05b76d8305a264f1c41fbfbd67d1a7f31bd603f2919d06ac94a461ca3474f6f84f3bb550b8bfd287bb15466a1a98f21cd75b21d1d35a36a90464846658fcf8a0af0925f4ff34f649854a0945b7773ac499726f1ab76c6e1942dd65e34f16e48b2190b0e011f42d311b2aa1013780e623b103a4993d9cb24d54b0e8c3ab6b3e8c5ad11e5b9f1a13a059f19d5dd562e922e903484c2c768fcc65f4f49bde8a23eada5c1a784f6e5509e80f8a207f02e585081a8a456dbc9ca21bdd70c82284d39095904d80c35d1447d3f7526cb02924b57c32df23f99940e9a34570599de60465e5707d60020206d8ab6664fc467f287877f6c2d6ce17d84e51d48a9ff01787c6f45e57aa918447039af023e2f7c7da82994c50e18f59f59af969bee8fb6e977e3b5d02584c75a1cc753f85cae7f08dec8046caeb61ea0dedc6204572bc95bee33beca9986498145ff7a01c6b4e5cb2bbf95abaa06a42e577bb60ce0091e50fe2870d3e07719dc001c4bb3961ab544090293fe16233308bcbab777156096adb38ce42ef7e1d88b3d8f51e032d3f3d9251f8286e6efda7466ab3452d8da36f9dd4683c2f6ae9ec61b4b8ebff005bdafc0f8efcfa09c4735260a7f726b2ae036af70df89f4a420c300f9a4e0414a5964ae26addea5ba20c653ddbcc944ed95ee87ee54ee65982550ceadfc680dccd1eef95ad11829dc4de34ae9c23c15fefebcf5e1c77a6be0d0e3991f52fe1cb4f9e38585119a6e7744daddb22dfea190fde5a1d959e9efa8d03a5354c00edbbcd4bd365f0fae57877b615e1695c49a77627d601cf7f918549c1c3f1e71d674f6eafeacaa5cf425b8e28f629aebe88bc5a78a77a411b524f32500157d2d8be5e1044f735ab24a2bd8d7f3edcca1b395c821e2afd41db93784b6f587e7acdfc9bab93f3cc2c43691dfaf3255c7a7c6d79607bfdd4c97b65dc500438b768df916210dcd5251df440ebe361fd3f5f6dbd2cd6943c98cd9a50f504d797518f9761b7ecdeee09de76012770a74d1bf54fe33d0eee6f3df8dec8f99eefd1d741fb905fe8514c8a07fe53f26af860173065b97cc1ad68fbe49b3cf503747ea1cc2d22532dda7eecb933c0a23e1b822cffa9860396f9ee5ccf9c7df8395511430e30ed3466538b9226af169945b4dd636ccc0521d55d307d72556e72ec05f68afac5708278dff5a8273548cb53d4a679b302e2527dac03c37e561d179b50688f99dfa3b42a952ea8ad888cf6433c7220fd492d4ae0ffac6cb8a6d38e26f846c5d296d3ee5f89f47a6e5e9a275272b3c39edfea46176c3f94853782885ba58d2f6f086b031c286f7ce63bafac73ce4071436a1322d334956c95e43e5190e488df7dbdbd800e2d91f3f03b3d09d39a054f15d2f9e7e77b9e2810051860616991fcdfe8371151ecfa66fb0849a8bc073d268e89df2c21b1262bc69874cfa20e3d17fd427fe4072e2b8324bbd1905ccdcae3d03e81e89fc9a1b22502489df01e1bb567fde6bbbc393ac6d176b544c3e153bc3ca2eac90e38bf5c75321335f5a203ee23e774203f27d10ba1d095c6c0301f750923383a622015c00a4877a011e527de600da75eb855782df5da4b9341d2d0413df1f7d1f3a8db20f8d56852e00c0e8e94a0d2c0a05eada4c5c428f76c31bd500227cd0080b8c9353c8aa076818d94a49449f5ec8000116cb945cdeb3d1c823f1a211d066bc2c1955e091fe8f2cf88ffa804d9d343b93d054b3cb27a70083fc6f617064b524ba3ddcc5585f3d3e624b34abee9de71d5945b84ab3bf5e6001df6ee821d1c9d898c9577ab6daab4bfb16ffa6e5297932a0f1ec459474d6fb346f1b0994afc1e3b4d5376ac411024c1bda1243ce36fe8e8b591fd544d458b1f746c42a19fde028afe5fb9557cc098b51db9bc4fc99185238e0f3cd50371b3725cbeef08e5cfeb31427da2685cfe51340fff19a1404732743371eb55214d496be4da69cb06b6d7951bb5c8d97777cd5712ab370c7d8a7d4a5749ad92d414da9cbed16e83063bf94f0d4269463a518310cd42209ee84feb951c33d94eea06f3b061d023fe75da8a44ad5385f058ccb9f2c58f1efb5fb6589d4ba01c5a27ca80eea99f1d04e044d2a42f02f9010cfc0cf7e4a4f8aee0eb9fca41c6edaadccd5d95522331c3bdaa017ade4bc2130c1817a907df6cd258a61abdfed21b3cabe820e17facc4804935d533020fdd12a4e3f3bacf9fcb1d5739cfdebefc0f1a0c1ce2f30f48fd6dc790281b475f7ab948389a2649f2c1d5992bf2163642fe1453e8fb5aef6c3281cf6088d90b0ab2b642af2b1f3a91fc4cb23301fe2ef076e8d21b9366f023e7133be763cec5d6af8a07055e4627f3f486c21c1ab820c5a37c20c562682fd1e0c9972de2d44d47f637278fad4c243d77f44f4a0a053047fdaf622cb591bab41473f8cc6f2b3ebb37fc8e3d3111fd78b794c7e40a8642389eb4dbb87f99db8506efe6082104ead98e882a28724d43cf48ceb234de1ae4d03384df3d53dd3681a1015c87c12d817b66fc8d2d68be270e1404ad787c61209287243b12b76ff690751ad72b77642e847fd2e91b3a16019160d3f02a6483e98d094d1fa853fa9b8b35b7e18fc1e5cf3786e145c22a015c5e8021c7f78bf8275932646be9f2216f6bcba087c5c322dbd79b3eb3dc9a50b7e0928c662cbc92a7e98830678705611d01a3dbff17f03d300472652617469eed9c0384fd4b8d197760493c8181cf6becc7a3cca466b72d57a20ac720a0b8e5530ca3a171b12fa7a1d17d8f2282603b894a2cd332ba154088299a321af773a3715d4972ba9f5f8e5ac7d498610c8b48525f9fe4a9fce9066060411d4c0de3a31f4267a0bfe4780995c834e156d944c5e39082b1b124a9bd0f197c525eab724766171e3be8f9002334e54efddb185a5a76ae71ea750ad6eec397b4970a23ff8080ff1951427d1ba30d4a92e3cef0c78c1150d3fa164ffeebbd16c35c746da4e385ffb289d4b32b81a47bc53a83ee4b23dc263e104d75db41f73e5536b4ae9caea4eee48b5ea61e09440a642f3f9da66ee4bec765b0b11d7c69002dbc95f505efe340695af092cb73f9519406624ca2a9639c0d6859e3c2eb0ef43eb2bd263607c01201c0ca0cb33d92a3f3f204fc58f7433cd8d227ee4fbe998382bb9a646b80886c16ffde294717814ae92b9986762fb63f7a1a174965521063f5da964ac4002acacdfedd1d6525daa412c868075efe74236a1527493f2ea71c8d21ca13c4e31c8d0f4d1bd883d89505a4c384e8d30165a714be3a5a42c4f9a9cfaf92f29ee4aeeaf7fd6d8867e6716aa925d1d9787975c941a8491c02c37a6e87e37f3e84508482f1f7ff22b676933b7376edee9b922d448d0b794bb779e038f242619c88e7c08482f0503c5a9c6d0ddfec4c8dfb0873a94d93ae6cbbc0501ecab577522de977a36e4a6eacbf5b9adc4d831081ba6120759a0a712a4c75ee42437634e3caf3b24203261edba3bbc6421f60c972cdc8ad47296c1352ced3927928984c24ec716824b60a20e7385f20fb217179b168cd3e57019df2c878744153dd1f411e9eb96c6f8c006c5633db76dc618de3d748d629e5e046bd4699bb4f6e18b7a20ceef8437989225e7a6c216de3edb8552892c79ea8026901a323813ae2c3cc3fd177a9e1ca9ca54fec7c2386faa7c40f9b10b1690dbeef07ee0d10d5c0560716b638f7b74fddd1c39d9ac4b7923345fc92c42b7e4ec3cee67f762616028a236319af90d1cdde8c18a7f547f1744aa19f65fb92567a6468d5378487b8250f51fa02b79e7af18c531ffb0b55b0e19f1e264e27cfc33f0581b3b02d45f497ef55f2b3da49a06fc996e80fc63ef478134e2443f7c0406a74949ff1b5ded28787cf108719337dca681fcce67eece943ad4fb29d8c61c3c01ed18338eb14a2449b2edf2709f2a2bfbb8d7e996aad80f4742d8974262379d1857cd1545b636141bb549b78a28052e8da2ba2c687976988165d159c21e02b18edf4ff59b3fccde5f375f4e179dc873897d2dee8e9c71542344813f99e7f45b24cbff5f24287ee344c4a22e86f7503a01a3954b547b0a0e2440a00fbacfb26524794e8581c0ef128c40252f76813147b404db2ace6b34e19bf0c57d8a0ee0b3a94080efc89eb22413889aa8965b5efa5836a3f5064b091387ae6d7a78eef45143d3c43d81b7bd8071743f65dc53ea34745c03f2aa379883677e8706384bdfb52779c8d79338d117fc31e1578b5b11ecc82a5f75c857d700668566c3a2300622053a927f4d4df55015f94af5d3b1b6bd5f8e266b2f5c395b29e114c66879facca6bc61b6ec7c4002c30dd2d83f36d10b0983293e77ab153b34e4cfb6b26048eca03ac21a5d7969773435bf25eacead09ebcc833eb1bbbf76bbd5d8bbea641578b17fa127c8e2469595388bd70bb7610bacd65bfa655b1745429d3f5e6cd299812fce8b07dd2173e3a82a31d24faf7055aff889f042873b43a2e49b36a62b24ef8d52437d5a9e6d9bde09e600a293b694a0fd7c98bcd374f76edaa1a68e6c2f93d01d381bf9f9b20b4297b8785c0fc1ba12ea17878abf6b1acd6e8275119840bd5666d465c433662ef5966f2f486d3b4362c454e943b401844d3c607e7224cb19c4286a3038adf1a4885469c73b38f482b9caf74773bdf1cee3559036dafc10518608b7f9d490e2e0c4d05ddee499fc46f6e98dbd572f740202ba876f27ceaaff7e52a73c7397c25ecfd11b3ce58528ff09af1713b8b1fca57904d5132fcf77ba69084c3a9d9ca3e04b2fe8cba57fd528b671028ef2b678c04aad8d0836fa6d5df10e9a98effadce12882026576ad2d27d34e4bfb884c0777a3af4b0c8f5aa2d686e4ba981e1e624d208a7a6c8762a211aaf1cdcdab0319c3b72ca3e92faba4912a718a80295c9ec962e2037cdea168a86dc215404933532ddc31f94d7b31d42289cfb085549ff7febffb2dabe76c4bdc801bc2e36e784c1790b5887a8b3984c4c9819796fa919c6613666c1d2f7d9dd2d988b5791da0ff7e5171c22652e061639778447ab40473e4ac65b9c42608e2da5eb66702b56e76c3d08b075ab48276e7a939b95aaebc0d537777864159199801948a3d23448356ee0e0c447f17f3383a2808bc6f7c60493c522425f577e1cbb67dbc2be3159eb3682fba0bf78da51b432fe8a1cbb91c229f8a26527d4049c58e60c00e6c53f0d94c66d7fb6c47767bde0fcfbd01179e86eaf439b15e89e76f22077d4675e15c0382de115bec7af0b230c9678f19a823e5b526a6e5b171e00641a7fd95642c2b08495fce59053681b3105b241fc9713dcb11ee963357b05581c034bf3729b5fb22eee62d5226650081e2a0e75a501b02f6172f5e9a624216940e0ee859a14f5131d021d0c150dc19e0a12b199843cb91a952633c65317b758eed95c7a449e9826aa2bc1226713e5639e328b4fbdf3cd0750ee0e5b0a9e787865bdc73c27af2f4a8c092b2c38885f0e19ced3ee758d8fb389a54ffbc9eb1ad6791faec756d7e5e2cc482e6f985cd4fd79b9608be68aa8f0d50af5a9850c061ed57ede08e740105d6b6fc83a79b1f0a888b23d2c8d529d2f6ee5afda1be979949e0562f23f549e205509965875da5aa1a918b50bee1e72ed515db9b7c645f0708f4294c0bccd109966924820c4779e2b77bd46ed4c18438c4ed69680ecabdad133cdedcb30a2b567411c53e9133af27a46bbc5b3cf4bb004f018f467178458875ad6e2035386290a271790cd755694004d99a69cc71bd91d36386560c3301bca061317ae9fdde0f2a44226a557225b60579db4aec1b724a7196fcf0417a0d274009d30bf05f1e75403eb3a5863991aeb63886bbdfa9d48b01d991d2af1a544d5a4dba22b850094d37b71a1832d568e4389a327276becd4421958e2ef160e69ce54e285c629fdbd56f2c20fc99b06b6b941a9d0320722b966f6b57b17c20720fc997e824ec21ae1a075adc81bada02dc9641ba694513d90566d03037ec1552b3dcea661284f26d715aff0ebc7bbad0288db099f41960b3f0a340d746f42d0a5029c4e5812b80df8a6859dea8ba07f1d692523e067a61e216c227cd770e539544f5243c7b6cd040420f7f8629f17ab071e380f81db717d465a3e3b5e4066dd13f65b24dca01da078c3a4c0633545d2c1eb3816568ee1b9df3eff62d72e1abdb9e6b08f09ccd7ff15e090de90ca316af7fc5d2369ea990a879daeb3baaf4c82a8cdfd9d35b1c7ad44dbe964963065e3809d91c7e0a719806f8f42167653b1a9f8f971331d92380e31d1cd389fd492d5c94958c0dd6fbdff60d989579f4318d1b598f38b7c0fd20caf33799f0f48bccd7839a3fecc7260b16bb220309f7b277f2296d86d296961130a7858e5a10624d5b13f41a7522ba29371528eb75f3e1e461a9408e7ee6f537bd68d8244f43911fd5570f976d21a5b42c6e242be09fcf91bc2d9f9895b959d0aa2581ca03e7ac5469805b2779e14c468769ed9d1ef0d55aca7a422fc293cc0593aacfb139961cc3c7348a7ba792496d513430b13723a28abb0b2605a055616216963a62cc179e9848d10d360a5cbbecc400d8bfb57de4f5b6676720e7d88b953c41a75e4b31d066fdbed2405bcb79f5189d0eb9aaa837883aa939c33bc9a20f9f380d4567d58b16b2bc66bda07c42be5418b91dd7fd41389fa34b38ab6b10678f89e20415f3df1e0d68d27e9f4aca48b980fafe0cd7795c625f2f6434a4f8734ee8e827d1df7dcf87f605a4c527505a26eac20b199f20c9439a54f1703962bd846ba2213be9c9d70e27d52a72e17882c1a4870c4aabf74cb30678b5617f6a43b084de5c1ca5f8215fccc1fc8d1f5357b2d6d6ff8e3a772ec2e1ef97497d06a55789a24a107b017cfffec2280bf69170896aa5c7d42d914a73cfb807db805e1aa027a6c417019647539af4d717bbf49d512cf47e0980104babdc0ed7aa0fa449d852cdc236929b8431d55c4730f49f5999d30c2e58addd74f1a828591b884c69930176e86417aba2294b0394f3d8cd44d6a45a16413a2a168f3f02823d15a4795d496dc46d7c9c5d5293b43b324c15d332fba09ff22281780057fb26f15601d0c205a9c2777f70afa9e0300d0711e70bfa88b279bf90e803b7e5790a60e24e43aee5a5212ed13d958c150f8698ca574b0a0e3d0161c6b6d032c2ec2d41070a2aab3edffb7511ff1ccd90350f1a8f733bdd4e2426c3ed87891ab6119dda9cc9464d9fbd5709ca143a3c6e1bd00c828a06638f27f3e5d2074cad5280a26c13aafa0bc6b7c61474f9e9b4b3b6ca8add0470c7823bb5e9805b95a51d5e7294a9cf281dad0538e278ce92740d90182800861772306247491d6245ee8866f5c468888f25c6d2b2469d5a438e91fa2145fe038095f62feab557263d396a7c9fa8812507aeeea7b3af3b505fe6598a00834d297987a045f72ba4a9153941721a0e96a881e86b3d7fae4c57998ae92084cf751f03ae91f6dbf2075e41ad486ec79c696de106e77ef637d54acaafdf96492989f832cec0646b65c6e73074ba870b868011c4446f43d81ac7c9a266375d02c31d7bbdbff3796f4ff790ef93a7c165cc94c20b8870608bdbea2283bee228a4a12f104d753a755903bfcf6d36be474bf143121b79b4dd301663d3abf0b35cade7f920da625aad76a956507fc6895e72e0efc7a021ed2d4d03f6702f5914bfca977c8206bd1af1aab0491d32f2d30dc4969be85a1cced385eeb6d6cba716e4b4d6f93d6088ea7ec19719f682fd075443a4a911dc0920493876b604f8a381df72a7157e4b1db441065ad94f35572f303ce5af6e647f85f94eaa7a70283fdd0f966cbe7c71d8253bcb6fdf7d279d991bf27d1ff307e5bd0432d2accce31a5e13499cbcd474153982be8519b941774f0d0675e087620c82d18a3bb8daab11dd8c8df456fc39790fab4e51fc0c0cbad869f2a12c3abead350361a75fbb14ebd0b26f36a92bc4811575e640d8de9b9f22ad1d5b5a0e37cf78800f3aec1b5901758f31db9f838937973f79e25258ffce0f08bafd517358b94596a496c439c2618742b88d126962547cfca04f90df86de740da33461ea551228d64a2771edc28c91b4fbd4890297002f9f36bec99ba3ad224e2cd4b4e3b5c20888ded87b0f0fba1bed20193cc810d36a337317aa6d36fa3644dc37adebb454f87646e66b2c94d2b8213ae5089d3a9841ae2c5745eed2521c6fd677165fdbe98c74e73e927b80b678baf723286de16e4f8990fca0478f33ab0004e7f106057009a37be6f4e446688d212441c07f2ae6c8b2390298347c16977d0c08b7e5da6820323441ce43e8469243e82a1493bed328129099d2608a025c7f180fad8b022fd6b5e99a7f7a80b4677a11df09827fecb41e8cae7a74db3eb1ba8b82709cb14d101bcce05c5f27dd7533a71bc3da5c080cade58fabb9ea907ad85813120b9ba1661423f1cd01c15bcf634745e15dbe0a44a1bd584f7a64435a3f30573cb2d5ff196000bc6432976bb2df85a30518d5ca077c6f077032ec2917df8bb23dad0860e480b083c0977faea9ca28fe1b4a979c4a39a86b3b7769a947111afa2132ace6d9f7170daff7d2b5e72d6b0a555d0ac3086bcad5c35703ba246e4810d117b3602c966dcd76e63b92b1590831e665c5e7e7e6aa90870aeefa6017ac7f0f83ed79d7559e3b3a95c4118138e9103987e8cf296827041eab8bf5f2b62948fbd7c0417ed0c85b69d78077f7905ed998d","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"fd784638959dfd5272c884733cfb7294"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
