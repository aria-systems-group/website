<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"955ab2c3429180c476a9e44c532a1af20c762541f45cd6d7072af3175399e04746662a8da16a5b323f28cf54d2ef57d7fa928b42236476cabe3b5faf3f797c2a65aa9cc9611b25564737dfea03dd75c0ced6e722ad32f77e3b60e1babed5ae63991fc650cbd13f4eb9d1a6dc9b5a55ce514d918b289c4d0c7cdbecff1939bcf6ca436043a8eea73be9ad7f112d1946394724ba5954a14b4e4453bffc1bd76b82efda47f1190ba9e7fa03c085f09ad1e30c2b0e172b33dfe9c976aeb1a54e66ee7c5ec64069cfbfb4510ab3858add4ee97a43e03bd38d812d18b8e723075ff66ed0e1db01f4190aed01b7949e7794d7b119bd5e8627d4d7ec88c4f7096e42d6cc0376716894d36951534254f2825493de6f122706091f611440d96e0f3cf0ed4c63099c19b4c3e66a08d60886bf9a3d1dc9110027456e61389cc463c47872be71b8e44bc1ecd7334b72a40859ca905d50eb370792167675b979db20c21d8ddad17014485786939f4dd5cb45f385981a811f24ba4b83f2ca6110a696c962b33d44e31b58486db16d522af2ac950632de4524cd10cc0cc9682ffe0b1f37d59858a341abffd7ad396b76ba491c18e75f10947d7d8390f9b328b52798739e85920d68bf9392d195539e980e73ece33252e5d9d4faf54e5621a9b2cb279fbf0f032ef04cfb16df724c8787456e2a5477e1da6d4f115b45e85a3e508cec764abd8904c53ab77f0885158863ca1a7af114dfdd7f532b056f1ac877fe539ac5ce4fd04d3f14c9d6de1e288b48bdea549fab0820cbe67e3341f719b33f6478b215c06a1e058f296ba5d1c853112e5172d492ee5d71af5319aac7277fae2e43b5ffdfcc89929a935d4979dfef8ccfaab931b0357c4da33610d2b27a36f090e290f36a617f911ae1bbae55a819800c75d26e65f0ac37e68e6e92a49b8e75ae42f0f5b062574d1292aaeb14bb5333f05253aa53657e1c95182ee57f269948ab3adcc7354967ef6ee07af81a363fbf050498a7f485be77706d53eff145a6323294c85456f869ab052c1026e3fe90107ad13436730b563a604c4c7ab95a1d919e90572430294d1a8355f9f2c641cf3b9efa5a5cb30a08ef115a2eecdb9e8aeed54f258423a57bd0db9db1e8a8e9125a0a0e3c0d7cd56d19c1afb6e0c92bcda325240cc6c93322f6a44c9506bd20b0a8d0d50e3b447c6f03098d9fcc31c7b889b58a7fb203c5283faaba5257d4727d68969aaa34b13d396f3af1710c39a6e25073ba4f799a92c4cd1468ae346863c9bc60590726a43be18f0a6de35296892e97d2ec670e5a4401a7f2ab4dcd156fb2882e7e6544704f67b41b69489d0ac032d11a198769951850a0958f1b1fbadc2b6d21390c6f069bf18be0898780982585e7c06f0201e7fd9c2a138aa500fc92d96d75ff0f9ae735c7d4c50762921802449af0d0c939abab927d04e55c9c422de8724dd57920e78201f3fb238f410d584ca1c75f05950fac0cf623563634fe5ccbb5b97c4ba84183929d93148c3b76c3264bebec6e1de7f049f10e8fcff9c7cd2306e2b1111c6556193eb6786ff201bcd89d5da4de00f8c0361a1eef087b0c4678f732714ce633d13a39d3c99f138fff9b04e90e4fe926be0973d1de3cad3983910f828f63b04f797ac2cc8fbeb6244958b28fe06a0ed552460552515305af28d6b5fcde23033c3f5c6319e761828d73c75a2e9ebf73617301891fce0e9f67de6c7e372b4d9c92899d270045923e87c48db1fe350320a0b68134a4604c85a436abad2d7e896f07d8ca732e25470d3f5c62de084d965cbeb58a46437b55b4487607380f5a9b50ecbe2b77e6cff9840fd9d591eecf4d81068ac849f980d349c006cd2ef340ac13f5b8956ff9eda12e3d8a3218677801bfad8071310ffada4a9222821cbb159f9f25cfe95670cf7d239584f8a2561f635fdf206ab3376dfe05826a54214ff30cc7f617a770d5e0ab111dbf9fffa8ac69f194c823986afc499ffe05f34f54987282bdb641ef73422a21b32961cac288ef862a39b4fac24f618226b47c68adc64640d4fe3d8a3179dad5a12f8de622bb090838d09e969935f0fb08c936d0e527719dd4813c1f0eb38500fb185ef52d88975c0575b93f1acdc310a8cbcb50563fb7ed7f6c737b30e460400a057c9160bdd3f8ca07113b5e9cc0f4bddd7f20cf74a53bff60d397ee9230850d23564d427bc779a75248cff8b06d40862fb1b4f4b3a78324d4ee5dcc527467e4307846529ff0f9bf3e7064fca7d26278899d5143da0ad8c11c300fbe61a275ccefbe7c2cb3ad4cb39e7da36187a81da72a869f3a3e5d9340fd6d0ad4b2a9d24bc53bece7aa1006e35ecfb9dd0b7d1a4f83b6ec7703f3484248d748e9aa25e277fc08dda2e6544d39947f8b2fa2ede2092b156c62292a28d7a8b6981819185db951f7392aa649c26a211fecf2392167dec4794d3960db960677325388cb12fc684ea5fa418e300dac0249f4a0b5a7babe7b28ef0c74300e442d5a1991171d753e1b662a9598258b8f6000deda70b1dd7a9f38b4c67b076146b33ef1ce5a75974d3af674b8d14cd299022857925ad7fde57fb29de45e3f99749d1e17aa27a789683f374f6b63b4ad9abe7ef113e5a66c6cf6347a56b2a0ee3e6a6f6331411ca27acdb6f8edc22f6dfef08ce175064264cdcf7fb21daa5516c5e06d2e067a9720e0c8335dd7cdebf0d6d7a772e8571df500aefa7b249d053a730789d4ba6708305cb5f90eb115e54a6feacb576ee2e84f9c3c44a5b57a1bd77f47fb990cdc01fcf520bd4ca22c67e41e9ed54ec2d353c74c55edb40cbb9bc31fd6fb57ef900cdfcddc9373c08997f4b8db129f8504542cc29b05d1d265838238bba176d07dd1ab1f5218b9065c1aeed543ae9def74494d8b0c53879b6e2b7da825eba6df2787636c7182bc11ae10f4413c99fbe61256397c9795449ab26379ebde72d29428904eb0075356dbc867f5be4da69a421539dcd5761c91c824ac1bdc2f5d12024a436c530e80aa5f878a8df65ad0eedf81284ca2294efcbd7871d74aacf9693be03071f9b182890b2f6b391a44687ae9744dfc55ecbb364d8a4c1e8cf46b6dd39370d615fa9eabe6d889880c91e16d91a51913b50d1c8defdd997a060bbed8b6d159b8f2461e9596f49a51b6ce0f4ab55eacc65ac1626ca4a8374d8d57a384cda4e7d5f713136ff03f95b69ba10999ce46ac2a1c482ca5df65953bedba1ec6ee85e2e0676f748749ebcf81a9b6a346cd116fadc6843edfc450b50464410387b5a19707bae6dfbdd78ba2050e7a946afa66c384aca32ccf519b08342a503a6b2ac743665878df5ae32ed2ed808cf1ce0fc5601bc95e8333e075fd093a5fc5c99c137cb0462248bafeb9b62bff45bc964e99a1c66be07d60693f5e3e407c407cf50b74ca0e0f2495b24bf1a25231b9ebfe506f3f62a81896a2cadb75ffc183d29a368f7868e531c438c08047e22ed1db83953878dc18036a0e54fea92cdcca837eba4dd2448d03fb16c52f95d4ea7c9c0049f84a28484e07690ae7ee5ae049d3f1f00db043eb1c4c0dbb586c1470d733a3ec5fda159622ce1ae595f3350c2e5ea41f84a28c7207cd4276af9ef6e1aabfd814825e3508cfdfbaf1961b758941e39dd15979973ad01d47b8cf2ba8274c4d40a6f12ec90395a752da93d84190a12e1db1a6fb1486b3934ad958e39242c67c2da787980655884ad674c8fd6a823cb1f68455542c20865f49ff434d9d4e42ede12fe62f557da965d8b12c4e913eb1166a2f34535a9017f231efa1d98e98743b6aa867c3d8c2c9b1622689832ef23d2da5fcf8583fd3925940c344c88b9378a46120e9714e703f62a74dd82f1fe27c230b52c256323ad761c6f8275ef09d6d4e1496fb8ecf4557726b572ea587aa435d71c3cde74efe2da24326fd99bc634aa0ebc15dcc70c5cc2ca5643c7221b301dcd8ca62d2129a3a4a811f3817fdab7182222bcf07d9bd9dd477b20931012a7baf130a85a4e0e2950b3ed116c366679165e324fe94972e6e5bc2a4f752685a3178e2b3113721e651f4f2f991e76695628150f29dad18fef9f2a2d72468d2c9c7f4b2c8b2e8bed73e15caec32174d65b779e0a31ffbeec160b5a56755a1ec994b21f9b81ceb37223825b34cc72599af15f72db1c7141fcf3f921187584e0067f460acac486d101df56022d664e7f7067681267c1fcc68d847fe320214fc8fbdf2a444196825a86d98d03648ec166c0ab9b5f9bb3e9979587c774315289857125f457045e7ab315ed149eb7a743b613c5c077a2a6cdd99923ab7ba7d71987373b43e3c9a2f7fd9d64dd8e3fc84dc8ea7012e213809e9f78c19b420dcc3a54b1b1b6d94ff7b0b7a489c35f8870e6d54ad01098c1afa7461828f36545f58cc05ec811fc5870f95ddbc541fd693925245cb8009740b7a173c4890f37f74763166740c1975f5dc34a8ec41874e6d283aa2e3cef3385efdfcba23d2ed7c862cf419ba6d1f332ebfe23135d085662fafa213b3aaede57d07c0e238aa4cae6e1ec9e98db87f1dc0a7b409fc8d043765d5a0feb738eec7934d6c36f99bd79563f7d4ba25f02f26846938819d88a4f00e04a6d1ba01f8d9de79e30b7795ba0a20985cc7701559c1657eec41483af0a86dc53d7f760457dff188c4d2bc8862d67f62f7fb07458e546325202a385b4fbf5f7ab926d5fb66e85636b88c5a2d12bc40f90a5fed8393da2cccc4f4b30fda98a8fffe1724a34130e37648892fb07f0cd18075877de0c61713c03b2b5db32728e8dcca5b6a9e5f03f573434143df33269381472092bf10a7f8a083fbc60fad3899e2cf0ff44466c235ff962c99bd5921c6cad84bfb252e13efd44200dce828ef74633d3dc8a7524a4dc4fbc77c7fb6d0a3551c016edc66a1b6e1f3e92f0d24a93c7f64208cdd4f81330ed3cbd6a5cc7cec3b404b451407edeefce925b3ec560f5bfa95208b3f8a725ff2404cda877ce4becc2e90e62cdd7bbd4dcdbac14716e1f45c1183d4beecaf03f7877af0de06ab0ca68069a3432116ee10db574fd9b087bfe0d7025d1aa67b4b705c7eba176fbc993556ec3e9ae23c6c2bc02ced1b5402b37ca05612ef13604e8afe43572f957884384f86939aa083f3a4f052803e97bfe5d61445a625120b19024bc35621c9c229395f2117b4bd2bf41fabb0320134e9753c92ad9418676367c313420f989e26585ef19028ae45f60d348567ccb8a0ab92d420754224c07238cd5f4c0650b2b7a5cfb11fa3e0c697c92010d137ea8646b5b801f70ea8ad78f1bc5b04875e0408ec69cbc2c39bb20695e9897a379878639ecacdf590d10bd77f87fb99beb34161b8502718f742a86b7ddf64e7a366c3cddada4febe6cb7240e3e4cd6393a1297244389dadaf3fe416a7e7f4eda5b001e561152ef4c5e445fecfb75669c608efdb601cf580acfc4c2a66459b67d1530efd8b3897820cfaa55452fa7128df4069981c5107ce4ae680bea4cd4d92376f3c0be3bb290a2fa46ce5263d2b7c9c6ab3970dbc379a65ab317bd3b23bcb632326a0d76f6f916ecf6e2f1ae7405c66eddb7c6571ec1ff78df163b789c4fc7813dd76adb3c192d28e12023450be6b852c474d9472487e79514f237f0ed294dcdbea92bb2ac732820a8c56aa921253473951678fe3b040563ff3d9718f6330cfd94c343a3fcb0d6fdb2cf8ae5ecfca9c0c7f457479a55dea8a6e563a012926c519c269982733ac55eda42c64e0a38d697771e3323f34828787ed6dc2be367b4dfe9b9f939dcbb3b98ee94a6f07f988d351eec7c3aaa5a7800c2107d3979536b794c0ea2a788986a0b5b059489844fe0c3ef4aabf444c1f802e8a518e4a23c79035f710b32c4d893a64118b45fa45e183b251231eede595182bc7f8b49945bc642f10cae63c04a7b2db64e60868b51a897e5ab60d32af2261b891f1ca8feded2604e7386220f31acba30319f321f465f4788d6a9cb812189e9536722ad3b63405616bc2883a4711f53f8d01315e8d6e0b44df86bbe17a1e29057ecc136630f11495c3df6c5c23d54933bf3376561c4e1c45484981246e1c1bffbe64d4c46a033221f07f23353ef2e8319ee1fac9af3d5eca2cca7680127942ffd0fa71dccc44fd27dc6cc5abb6e187b0a2b66eb66c155df145f4180abe73598917be37415d93c330ade46e77a4b21335f5b9ae4b267e6f2f5fe4f768f6801957b98b18674e09e79e43441227f21cc165729708db7fa1abe5cdf72fb8b5e8f2c2a3d25595b74f7c8970def75536269f783c82bf36e940e3b2162b9f68e728e73321a8d79be1d7c4e2c2313d3f2532f1d67f1a025ea708072c73805b9c60ec852d124b669920a10a80dec6ba840c5a7523c9e1fe50324ae86f1707588cacaa1e33290b56e5edde49cbdcb2fb8614a88788e9dcbe2c58ed3b6e5f643fd1ca74254f607597350ca6f294aa348db57f65835c40330cd54a5a725f543181b6ef5ca67904abeac3d333b4218d9b6ce74eaf4f6897af126bd411d5bdb4c104aceee58484b29927af13c5a8af1e25025406a0d9177eb8aa577b12b70d8e3c03118a31e2b3f560ece6666ba4d5dfeb8806689520458eeff69f0f93d00c76de5a9db7d9a3c31ef101745909a562f30c710acfe8b2f5417502192b5bfaef5e3d9ecaba7466ac8d3a74fa5954823aca96748684405d0181ab107fe24dec42ebfabfa1ce893e5a554c40904ee742a959117f021286fc300016ba913739994b96b583b9d83e5cbeb559ba1f4be24f5cf2cdcee06a7215bc88980f9559287a8a6ead6433fc87418da05144b1b8b0d96704f5a98ed111595371e44d5dc3c5d33740e25d841cf754e6b4f2fa2892936ba6bbdb234c7b23d582fdf56f8b2ccdc771124c9b8ce810f44b67d98d55ec51644d812396caebd1a57002cd7c6268e7c34454b02691bccbcabd614d58d9b7d554585ef7fba914bfbfd6c9dc92aadb80c19cd2c2bc8135ab32a9b8dbc321a7f86ef0dd15ab3e10917057b702043faab58c08b87ce9608c526df08368b2d65b4c36251017c7be949588a4760e21f22303bb09e0f27d8f3ea0f2e744f164028fbc363bc8d8995352b2baa4c4cbd60c5233d0e47ed8420f58f9208a058d99e2542a2b20197aa67ad658dd03771f702f6de7d3a378b0df41a58bd58f40860e187fc32c1b3885be184017e90433b69d7bd9969d1643d354cb6bc4075340a10e4f992201edc4cd4d0b50aeb6e5bcd93a2fc8e9f31261531bd7c19f726dfa7c9e5a70154319f864a529ff96fa804788b1c863b18c78950843db74122f00a6e160c22c7b75345904a153bd9430103d288ab6e65cd15462936d0a7aa0743a6f510fb4b37df1200d61d9b5875a309442c2dba83864d105fefd0d8dc940a7ebbf10f3082693244835c90dc8ecc43d04ea2c3af1e3a2d741210fd2ef54bdbe6a1df812cc7a5d11e14d2a5564f4a7921f2f0826d3f4fc41dc825aed61dc3b3d30c2bcbf9cc7b88da83e2f4580b0ee8ff652e87674ff62f23b9837ffa0686385adda0431d2d5fb72f85905236c590a6bd9e4494c13f9796534bdddaf78177273258786b8a7cd70339eb33ae2d2a56949f04bd8d22a33272c8be445c42076d84a0b2588e75d2205f16fa1745b60c29f9d9f2da95dd077bca096f748a724d2acac2aaf7f01069d6d35631aee383269cc2922d95fc48678e212b54483ca828d3d1071a5fc58636d991fb30fc9b0de3a289b43adf6ce883ea47aea3b1efcfc044858c6ad1ccbc441d5f5a07575a02235688080291b59d93e7573db1ef8e21d1c4ea9a122f2e725c8f00c43f7990f0ae206bade51183eea31806d740ef2148115b74db5bac33c6b52e49812a423c30c315ecc48d0fe16698bcbdabfff43f01f51fef59dfe7d1ceea3ec3ed587418b77e4cee392582b816cba9b2b6fab770e81676730cfd45a3c96be62a45f0a61eef07e4902d9456a425576670c380e87b9288f22f3f5c279bbd46ed0475e1be8d6831416f3b06c647fd3ff916c4144ff5b466b69e4eb209867ca477fd41a14e735a47158bd5546363dde424d873fa42c94235412e80d767aa29e0e75bbb41526426ab04d8124da0c3dd259f6dc0d5fb3a2707d91c160253ed4543d13c9594d85538dd1f04607657f5528c6cbb43c3b3b062b247fde95e8737f59a63626725cb87261582155fdbe6e275a6345314220ca19ea149be730f89b781d2a771c7ab536c974503d725514f6603dce7a75dee7eb1a225fcdbbfb28ba8b5cc5d3f37cfec2ed86d8244e10263aab5bfc8c09dd31e8bd21a7496305063a94d5af265bab9369538b4cc06fcf268d1ecc29da35a7ad42ef36e65537ab93f540a29a114c0eaebf9871aab84d60bc6e7326653c5e8ae67443481b93d4a4ec19fd94adc6155ca5f2649d1f680ce6e97a27f86f8072740338d5d95911af4a9aa11ebc90d4a105ed0fc7aa5c4d3974d15204586382615bc45ce43f59fde303dd9c56bcfc938f051cfee7d8f48030ba3d9731d4655907cdf2b1b93726e8e417118cc15d6dc9909a45a05a96eb074df8f864ea6906a8580e41da0d29820c2d8cd4421615f43f1d300eb6bac53cece80d8a47b36bcecd351e6715e1492a2b4734225f79f7cf9cd3766099e7fc3c9714de895f29b2243bc06d887b5bc0ec583b350811fc63f9d3beb1a9e676e9f994b5661753a49de4d78626e37f0305daa4e0967d9e3fac1fda315e28360dc65cdaf3841baed7a79f1d88330e91edfd7b81153fac8188860cc25edbb101040d1a19382d86f0f22198192f62b765176fef9958b2311283d66abfb80e3f8da204de2b46c311a8d3e2062596389367e3810af86dfc50002fcbac42c91344440c8ceddea9fc50f8fb44100aaf727bbe6aa87a537bf8f7144f295571439b101f24392614ba80ffeef4fda7b0c2604d563dec9bcf958c776596b63800853de6dbc595a4f300362811e36ca0fbfd17a3bcf7e0e413237c16da4dc61b856623bcd185d16e34192357c4b1ffb3eb660dc550475b4aac9bcf164024210da385b8a37883908351eaaf1c6ce03bb7cab15e4dda56d48994bfed187259d74b3a2843cd13a0526148ea78eb4f0bfcb71bea54fffbe3816a6ad7fa13d9cea17770fe00f6de9c610eb6f5fe3392b3f947b49420575f7ca3f8e9109e88c2cf00cd96009f5b2a2bc0e8147af26b69284ab7b793291b66ca13fccbdce55160c9c95c72d484963337fd4ce179f945391fb7e3008ff8a861d046ff1bcbe47b452f600e59d3bde788e34ebde8b1cf6730c079bb81d2e16729e494d8dd144ee5db1dc8fd94aa045fdd02b675b7a914288fd0870b06116ea0e8c290a96e801cfe8c424a2f3cd00707efb9cc09018c52c26a688b22950b4c1f55572fced8f972f5c83af100b6b2defe38447b674c212589e9343624305849860b61161171533ae4004f7b20024257b42ac34e15f7b9b7aee72cedc791b1a5cbbb5c64a941f8500b98b204cdbcd095657874d022f42c92bb5df3926ab321c09563723c990defc9d109e34801e2999824f3d56e4fc07842761ccf6ccb7d26bc7c3265a143ff2f1768d721c8b53ca0a933e28c423717e280dbf61275b775be80bea30d23e303750df263c29ab08c5fe380df0f61e7feae13bba3300d3a29edb77fbc2ab7ae84ff72b053af838e511ec3261dbd29236d04baec450f55b2cfa9d1e7894b30aba502f041e71a8cbd95fc15bea4f6640bcff6d6fe80791f90230725eb696332e9ef62d952bf429e0d5cefaf244475d4827f55fa690157616e387a9cad87cd8d2da0ed159226800710b1e3f73080845452b420e59231881d301f66df0d9bb810bb3ca3ef1b20fa93e550ca17fde70723c98013e572054ab80798a9f82c448f93422eeb84f4ab3d65566061af336a94fe8086c9eee0168552a23bff13b8ce8a6dea0d8963e01d75119ada1ae57dfd2ea2ac44c3ec0177f55e92c00239b11febf440c0bae9ac1eff5d653c6f844ec9b9519649177ea9f574520216b80f59592abbfd504b7317b05b103ca5895b3bd1e98f64003663afec0c9046508e273d8e662938fa610ec1d24cb77f8222e628c69fbb89baeaf83f59ff880cc64b14c93b0a144a6d469ed1a45625620349b2bb23dd91bef5195a914d941c48385ea4f0ec966c54750a9dbc297e93b4c3cc72cbdef049a2d1fabbc1fbb5bc3c92a13e48875ebe07e8cee42eeb4f5a597e06b22fa70959a2db91c0c92b4cbc25e4bb57bf0875058628882e597f1f8ad48d3a10795b9af0b6a6225dbff4d86b866b3bf565c65cad67318920af7f5c3ef785917c9f139b5be5892b74a0ff277aa7347650d2a913e1beb7fd00a4c4ad90b40e326d70f2f456b4b07ed83481dc76bb947c56e74eed35e23711339fe90a437501f1a6a9e21b91ffcc1d2b1b388f2d9a579a57f0a9d2dc8e50e68fc32bfaa2ffe9b80e264d17548b0ba037753188d1c4619c726d2a03d60e784a1b662c2b26524e9b8bd3b1e7451886b6590a5a60648cf2ba1ac89fdcacf46b74c6966dbfd415cc1f43a96a93064a9b4d77575bb0e2cbec37d6c11108b0ef914330ff60bcf439709fc4f777b78756b11f6c1e4356d26b87cd92ca2aaee72736b3b3cd1d5e313f34836b8f157858d8efef32f43c60e67cf700f8dfda7fa2bccfb4ad4562fb62410c46ba295bb4e92c30fe32abca4fc39819dfe378664fcbb6b379c7ee71a3a0abd567df4d5976e612667b6fc5529e8c9f1adc5dbab28529751d78c6df0f0971504d208a5e2ae467cf5168fd8b54c873db4cc8d266631ee6070d532e87dc9bbbbe962f3573ea7475a9074f629ec501458198357c3a0b48dba455b269c92eeb644c42a19f1b49b4df440311e3f9b954d30c280ab90c422271dfaa980e2c6ccee68966e2f14d9c2f52848de23150a207f4ca810da93a95a06518edd37954278ab18ce71604a4dec6028d39596e938f4ca7a86e2600334dffd9469ec9ece8d9de3f7468e0b8093f6938fdce2963a1200d4191a312b7eebb1ca649d8def593d5d1ac06dc5406cf57fc8440821fbdd4fb1deb9a55e5b63324f4fb6e8b50c41e99e79a553305743e0ae522233add9150eb25df786d5e95bf8eacf9cec9e2a17f7837e4acc9b67819707cc6af5479657c0de51df172c9378bcedf46f3c68f1cd38bd1988e78084242e05a6b79060471126d78712290b37ca887c8c67f3eba577907c69f5b026ddb3b612289c4953dec1372fbc61e20c72da3bc0f74a2a098283196f1078fb609d10f2d270aac31978824a88a1040cb0ab206affc78ceed4b1c6969c15db5b55f7fe7e1e15a79574fb104ee8e65c4d9034511d2736cabf94ed104a90a67ce9d1c401190a6b470969ca232c3e37857aa9eebc1089d25e6f2a66060b95686b99bf170f54d7849d8d478b39bd3d34347d3d6873ee4af257cba465323e62e7479fdafce0c1495ef5674ad34af1ea58f1d305905b1325939f51323c047ad90f07244e4f0f98810fece8df840ef7528f5b0c5df78053084035b521b01294498b2beec4c5bc0e4a1bacf4cc97f8d1bf69b46f207d38db127de762a1a47109d3426b02fe7207b70148935e542577d5a761af5691f6ab5a463d7fabcff31c5ade9b240d569f6452e7d1eb0f3c7657c10126c9c3dd8da3a1713db325e2ad26033caf42e24c1201bf24ebe9e9f8223787e3cab718c9be9841fee6ae31fbc309d1b82d9df1f6d7c97781919d1cb75ced2d73d00e6f7c8bda40fba0a368995c321c7a6581a7c2e8b240dd23114de3a189d939f2259db3e28ec62fbb9f09c92753852e57cde57b454187fab7af9c5aed1c75decb961f8e86c0fcc57f5a2f7f1f1331211e28922687e0a04d5209bba903d1035998e2f844e18030fa03487982af892b87372a3600e82ca5047ff34c80cb2262a1eca040e2e239883fdab9ff4352d685da151596b52a55970a36b39d3888d050d3faa3f7d278723eb81d35a2c65bab6ad9c3e80db2c9079ecd6fe0f1151b082d1afc4694e020086b8dd669542c435c51514069f29f1635c3e6f97b5ec52bb7afad967927ef7c2ebfffa3352f5ac25e9aaf54bccdde73400370317ef16c601663fb64ccb1cc83a6ed88d053d294b49783c8054dc6da410a4e0032ff15760ab7c941d1250e73df5f8753bf92b89b6582d2192513f5910dcf3cd5c3b293528619edbad57d840c216c9451ab4bfeea9d0d242412d45d6db71b66ecb1a96b81f4622f00747bc94d9c0ac715227fa35759b59e353098b204ebd1f7fc952515d61ba636c2b7247ce0c6d8853f0c313491e53b1dbee0d2e81daa4569c20a0bec778691b6ee88276a273e304ed46ad7f9fd181301a0da5f72d208fe8c0e4029a24484f69e45708e191ad3965639bf53aac4085176bd334aabc92e5a42a293f298518e3f766aa6ddff80e04e8491a0ccb5e38a5215dd201a03d0a6106133a84d6f34859f259a0afec36885a88280262e38256ca06bb7aa1182ddf246067f274058f556a2e9a4f19ce2f739e52e1e3ff6955310cfc2b5d1f49772cb5575b2c95a9ec136cb41095b31d0cd2a689a4ccc10008867f530ce7dd18fcd43d6d7f65af3d2dfbff0b43688cfdf7c7257d0c1838a5cd21b3d1c6866894f856916ece4bbce7dce9e17f7ed4f2a44198b7e2ee7e13132acd21281b1dbf9eeeafbeee9e7a71e722219fa318bd459001edf879bfd55652815f9fd0cbf8e1cfc314c169dcc0a9c962647a0c5468328e55186896ae2256a101ce820e0d6336443d6a8f83cc3a450d191eed4a74bee5f7ffba4bd73af0decdcffe61dfa8b72087fb1a15ab69c3eb3ada1f01b102ca0bab98d42ef8b802ec54abeebd24154ff9f1f238f24b33921d8b53e1a461675125d885b73c0d5e80ed8a4b0397685fa35dcdfb0db6831d44a87df298a55670169335fe32df1a8ec2dfd4dcb4f64c5364709243ba7bcc746f9b23601e7085bd00fc297b2ad84aa49f6b92ec0f59faf83de4d4e4b3d4d81d1e891669279507e2371e9d428a9f591f045ad419c2bd7b349f42ef6229804d1eaf81b5cffd89144025cdb81d2d90010b65d8a556a43873f4c95cb1b5d72d39678458ca600c0d38f9ecfa5c67821c950912e58969f5cb303c36bf674319874b1da9af71f6d240ab4cb6442978d9943af5c1b99e313bcab8f8330c1874a97b4ab7e85cfab55370e0340a2c161fdfa5d9fd2c0e3b7c5e3b4bbdcf19216b57fe1579713470d3632c06640ff97c30c917a41cc12076158659aa0a150f3aec28034c6a13daf28d671466e832812b142d13ef7607a64ddcefd3b50d761d903ea13f1cc7a531eefa59182f6f74d72475844765f2dd8e8d1493bcb3eaab3538ad0d604c42340d80584db21e8c4bdf57ff833bf4d7375185a073a49294e797de80a2184b76b0688fcbde247b75e03e51916c47f8c9c31192024cf96ba46384c417d0aa0cdc5788b35c03c4148557f8fbb9369cea116beaf0b1ba543850d9688c1b086443e34c7ea3f53be6cdb560380a7a048443d509b1a00863ebf91a55e8c830ec1810514490f62b6c8ccf6ef3182e3c671d67117ee1b530598cbaedb8d63a679e492b3571dbd17c4b2663408f6571bb7057a49d98f0431670086eba5fab1ace7ee31f7850fc1cbae1e5dfd862547ce5a7796fde4504dd143ce87add9a87c52a0c1880cfdb07b6826fc748c4aa465acc590a8d33fc50f9c81e7ce4ba42d4949a86041cf97b51fc164f5d821710cdaf917fccf15f1088781cb5274891c96c26830cf5055b43cc82954b21322c172228bffad3a481bf013fd175d42e4d28014fbe2b39f999b34275ace28f344eed941d8581c6a9d65c2c821dea72274cb9159fde69558b121b02b317083e127a3924de45aeff7f1010ad45556ae17e2765607c7129cf357e8b78206834385d1e3f44637ac5cbb4429a88eaeb027d164d9ec10853ac2c3c83bab4bc727df3bc14ad37e2e52dbf2dac3c3ec67c8ccdfdd33dd999779fad165ece4b70a533176405d9bb4534e35f1b701a442ad180e2ff50750e71e79dd4eb3282c6648bd644f2945a7b43a67f80719804ba7172c3719f09c754b8e241221ad770d3e73275dd7aa260541ca101635d099ecd40dd759a31ac7a940e530d2cd8438d49d059800dc3b735d565a38fd3dbb2d23dc810b7a84ba737bcb204732f92443ba556ba510323b7091bae743db18270a6cbd955802945196ec64069bf495eadddfc00be93cfdcaf58e43bc2b6a1aca9ffdd1ca467b74158ccfa327640f2f12a1128482ffe980ae5a66567eae5c16c1e9f85417f96cb0376bb9827419ace0b857cc967d7c3e6697bab6e249e94c0641cf0b473cc8294a3d447cb38bb19083bf13152895504fb5812ae7de92b42c9dc44703131a5abac1b24f0370aee8b479ae770ebaeeec9ea4a726a95f2c7128ef2e0b453665fa40600706678a127810b4df509f6994b8c7ebbf72009dfbcfe62aa1d2ede5184e7fbbcaf69289a9d20d5a883f5d480cd35ad5f8ef466686883161b9915ce5b6bef847ef515875da974a4674e06574c585f5e6dd37430af7eccc0571f3eab9fc6220372f7af437056e9cd05cc4de0c1dffd710c58569621fe4581b7602116b3c23dd4e754f95aeea00d05cdd09b23e03bbea9402863aa215e20e63f43b0c7408526e4eed14263444ce7908e99bad07d549add01d69fe5e98ceb2eca3839fea548e80f3a8a7d8785a4c9b7d6cccad0ce78cede8c91b998b7017c8d97c0a08655371f52c16f8503b1c7077fafcf9dc6c3cccd5ddeaa13f27a283264400df1910cb24ff85a15e912a232c94bc8e3410397ac220ba40cf212e31f3f16f4e3e1a86a1994dff304ac16c3d9a9f6a9c727a98d5442edf2f1f114ac1bef712b6042e252d75185c3509a00659d053586e7058f9346dcb2a58167c789bc8f5aae5d3df3be57cecf11a0f67e0fc83e85ac5fd7bd19624c77853f1741e3838163fce0839018e6ec51c173120042d488adc3b7c1ca7278d40e63c4fe8c1cf15efdfb8ee15f319bac8ef6c2509cf10f53440c9df0e30a8433a759377d54ed7040128c31e5dab0cd0da085670851b25f8c9ba6cfa30c4cb6be1694dc3c019f33eb60a68d004f86c05a1d49474ab99ddb46f596f37d965a4ea499be17bff97b736eccf8f8de265ee82c85a755a9eb7b7230a617c204683b72ef5a208d9cc1630c65ae7bdc7e03e910dc0e6b9f2714bdd4161aec4074cbb087a4b1726afaaffa0b19e3d611ebc9cf5cb8848c35777acbcbedf69dfc592abdaccb92500b38c2ee38fd2a4c3e2106c3c171f981e4c8753dc5720adba5c14df71481ebc2d1357c97990605941e4114ade17578a5bd9559cf05f312eac6cc9d8801adb8c4226e54dd49f4aaed64a21f16ae407a5018706bdab7556c24198aeb4ca7095da5d478464dbe5bb8ae7415eb08ff6ac01a45bd02c514d8f176fc7d56c59ec84bf24184ef0d5ce4d2bd6612992571c91a6d3e1dd948cd0c3c0bd7de651fbb061a5347dc3450bb70e81ef6dc09772c9c97083a60189c2e42195143eb64d67f0a39d50cd5d9b2bc0bdb288fb83c2f0f7f685aca716816de9a5721dfdea80e32108f54e9462f6fb261d95d32cc1fa4253ba37f53f29716d2a2e403b1696f51cc5204e7f477a860da4a1c87a4c19f15df571999fd0ede47ba89510f427b0a940043b2fa7f1d1a49d9eebea22fc7745ef1dd081f8b9fbc148c9b704edeb52c4fc29ce6cd9057662d52cdf7f34f0f61c6405ec3c539808d48d723c1428a470330b5813a358a2ea84cfc7deab58c59379a7aff71a3260b26bc1f867b8a21157c02e4d940a0f1da1188b93beb53f57c40550c93c80977bf1f28a9092559f5f11fa98960e212fd28ef7539e9f0f16331354518b7bd814841e018c9d223ef574588e6c976bc2068d686927e8650dadf2a0e9017448959f68cb29d31e843845fc8a65594d4ba4987be4134676fec2b4ec9eb62d9e27f059abbf1fadf45eef6dd499ebba3452fdbffe2ee14cc0b2f9cc5ccd4e479e64c6450862f338dd1a81dbde98805c5b846bb1c4924cc95a3c8685ad6f5d87be35ec526b98b247d8109942faabcc33811d801b6325753bed16b198d20c5e1354d6ec1df5c770b3d3f4b3a1f619e21c26e670917ac7eb29f74195c1395ccad68903705a9195e3d71c7cb1d63f09bc8f89bdc23539c5659f5ac066ee59c09b461ec80f7eed32035e5a8414a748b106aefdee122c46cd6e46ef33362bf441bc27e8038302bcb59aa3d0be420ff84e0d21f189378465edc924737ff2793aeac4f74f81f610ba4ee77c5c33b113e33b9af51b3a91c81cabde90848381c25f95bbf52048715570ef33c8329c276dba9269fc9752b7e579307708e9e88c910e2fa951a3531ec99664cd31ff8010e050438493cc56c43f80e42d1540a15ecce3a9f3e1619135d3dc6707d5bb9530721b85d53470cd0cd83c4548abe0f47097181d39e63cdb519fe98101a297b640157c9f106cd6504dffaef00a70a4ca438e6a5f9b74ce0c1dad22f88a03e32149a7d47568d31ebfad5620f0a1a5f32670ff24bb26081951484d48a407781c4ad95e9aacb2ee091d9a7a5aa810f65ae393ef1e66cb5970589338464cd7000e58e77b68f7694b0c3b30f3a89cfd95dac9dcac34ef7facfa5d8f919484348f92b35fb0686a94fc1fc351902d7fc1c191ab6e68872ffa7d30a966ca031dc665f3403258c0f43f5968b081fd96190efe2d2edfa749e77c9fbc31ce23171b0ca69427f29025c48643af455b97568ffacc9b0173141674e00f9b81befd86fdf900571dc559065a8a2be3a441fa4797a6dd8bb3cc7d91bff0d0f84104de8a304d978770e65116ec026b80ad87a431af4906c66f75c4bb4adee6396cfccdd14ff2801aa585506189132add0f14aca0820a3a1fcb50a1651fdbdde02930539fbecb2b2a1e065e85cf80699eea84dcd327f89e64286f02765e28a0b0a1253999e42603cbf2b22e8edeee96c9482039b7ca1c72608f776bb2803e3d0c191c890501ad999daba03247c8a442198857c1a6f0fbf1ebb8eb5f4567faff16defeefe5f56e9fb395b631ed7771ecb3520a410ede236758ad71b726f8bd83b28852e8907a41a1600bb4ca051919cac1802f9aae46f9a9b1a42ddd33bba14c28106055b1d7a4e30781e5fa8293217ff0177329845a93d31e4dd2f2c944531e88ee2979b8f31c46961fe9d9dff5d5c44dbb7e1f14bf80ff1ed2f684ebafba87c9c11b33666c315d870d6fa4e96a146fe07b8b310c2a5b007b1df9c40e2327771e43798b78a3b7f572950f3e44183bc6da68983574767ce55ad0dd047fb25bd456435f9ad9a9b1ce9d646ffe29fbb0cfe1dff28ea672335f0c33e230bfe4346fa5aa483be80c1e32a8923fba3ad8d84f7c556ad45760a83935ecf1426a8cd934e1457db70a5e714417a1e70a2b8529edfe288b2dd8b812c1c6f5d7c650bbab7592de60593a13e92b771511bb61da6454d0140578417d9f27e9e936d52abd157682cfc4ab5964f5b08d9a51ac44b2073893a43c0b07e05300e172d131f77f0924bb3e169ec02ebe8abaf3a939951d1d6580183c1390673ce0a7112ad693946163a3f9c8ea90f2fbad3654f4b4d950f70dbd2e9af466e777212bcade0578c6c3decf224a91e0e6f469df28a773483cabe3356cb8deb3ac689b0515ac93a876ada62d919c203128ead94f68288e3efcf8643e588d9ebebf058aca3df25b8b83dcff48a5a2ad5cb4a2c3b6003570b9cfb8ed7d0388293e175589e9007e5380cf3069243469526a55182da23a6ae2d1abf595bbb48e214d2904f6f4e24abb2229f3870225715d2d192e6dc85e0406a9b1122911ff5f971af385a0aa787efc261284c9250c9cc720cd18ab5415e617d7226342f1e43ee91ed0d1e8211e538792f4323c70fea26285578ec3e97c2ef543a72bfe798e2db8db3f502226828b2c5f92d57090064aa5068f344463107ba0c4d592007759ae25909e694cd0b078e84fb268f414d9e8bf147e3d4f1d7cbd0e331ecfa3f5ef53db0b53355d0ccc306625e5f07cf12144038abe958749686c608e19d803ec5411cf479d78ae44bcf90e81dd36bbc25c5159beda1172825912dd5cf3f3640d4eab591d1c6a6bbdc66907473f406e2cd46d703ff1d02b920023363168e9e5d0a16df0da39d8f0e36b1ad900d641815914b0055ad7987981ac80a65a43d053669833508ed7a272ca0cfa3ad76e8a28f06cd895ab9eec58b6e9e8c43b333cdb7a42d3333328a3735b72457c5c5b50f93d6defa6e5196eda973116cfb40de63e4b929bcc6f938f2f2e19fa73adde9ec870f7db2e1b6375c7b4a18d66e972898ad19e819d9fd23c77b583f26a8f6e0b1316034b46cf44b6c0a987b3962b4ca215315e5f3da0d0e7444afe51e4c6ddd2e06c7fddc2b64dd7179e131264ecedf75b3ef411b4a10efd1b9a30adfad8b6c6a19f99de11705727cdc74b950bcc07bd11aa318a578f5a60182e02bc99804257417d4327db483d28cb960a789b806b7b3b8bb12bba1872261bfd3ee9328dff5f036df25f975d8f6f9aecc46259fe8c27799fe4716c79a85a87c5746c3271be0f436cbb964144fb59b303ee44381094a1d9d90ce2c3bed0401726d42040ac70037c94d2811f76f52b9ba84ca70e604a409b3c61e055144eb069cbbe90794cad68ab76cb1ad4c98d0b696872a863e8338f1642c43f20630cee2215ae8d6f2d789c1fc1f764f65924f860d131dafaf71e9724baa1caf6fc7bd500902f22aa66c2ee0cb755154bfc8ae66fedfa956d038aae2d1db7157c108962a88cb0c3be7fac80fddc6b3fecfb5b97e15bcff820eb1ba6acc70f9b16df6bb7263f719debb59c1e146989831c2eace4534d9bebcdf05dcc4c5d205c30279896168dc98f6167ce97f5d37703b5873e9d60008cdf7473afb0ba53e44a38cc00acd6b15063e4192d1df461484ddea2260e1bfbdce530bb52c6d4bf7f906690d6fb0bf0fa452f52f0a48f5d17c1d0dca850678f2ed9e405afad2d8e4f2f344f6a6037a6f4716838bb0b1e4e7e3dbc3cae2420a873867a596e5b5e8dfcac0f34643023b12d2026fe027e2b33fa59b60e591677def8d1a1b6e1bc480f1e1554bdfc646f111b1b4ea07d7d8d9c2c09179180857bbf7842877b5067440e1d9b930ad78d36d2b9e74c7ec38456ff9f5c4fa24d828d53d3eedbb75e18d0c04f019eb81bc71f4db6313e3c659b26b36937e633692b7ea11d048a0f7825365bda2bf6b873847dcaa6fc3fc0a36935d1bafa33cecb5e2f8a52353fc178f407832705a248a950bb2e5a94f22c0ab2a374291cb6160f18e3f61fe977e5acf0aea38edbdd9eca804b01b828173c751e1e891463e75a4c168ccf1265924968937c6c99c89f9ec20751fa8781ba1618d2e251fb8c5153b618d85b4a0c9e083d1bb5e37dc4ebf1a2e7bd1750ead0c701a0d703f87afb6e295289fbcf88ad30901caf33f3f3bf960d3009f8cd064d4a64c6e28873a1dfe2994c1a1a8d2974ceb098ad069f56ed0e7fe3b1fd2ebf273b372a655a132169eadb97dbbdca0a890886925dbc566e7bd23cbc95f4ae15b0c62d945f027b19fcabdf55e6587f3cb442956ff83c35822be6447b633ac97593e656d42fe0ad6b9a63d91a067c6b9038a338af37f96fa9bc3420663350f0145dc15d803fe20b719bcec4129fd894a4c6bc27b260858f81a02943da794efd3677a84befef5b6f9f7","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"cd62a73784116abb693445ddaf0ad0a4"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
