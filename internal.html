<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0d80732ff8853e5ad4ae71402ed7b3732f555f9f7b0515ed669efcae0cccea3babd04e1fa94119c88d8e4b68f68cfbaad011ba00e9322a824d692eed188b962f97e4d16d8d82860b81b18d0c54728b142655212dcdc85ef1418974ab43bbd8f39614a9d87c686a76691385382c0c72c23f9dc698eca360b67e1820e209427a491143854a7750ea42fc4aa3c6749950db1ebab487de65f0cfd840f3048aad6b44b58f83b24668064fd51482dd67f13d17326bbf35ea003f4fe7fa8c73014fb44f9836a145ab4a3b72e254efe20e3a2cea03833e5c1170bbd476c002e552d0008e4072693f1e67c5bdf7e083bdab7338358b48cebe3bc043f435d002c13fcc73788f201030560975073354897bea24b6e9eb87773de43cb5801b3010087416b2073649089aea3fee2eefdf5b768ba1f8f64a14a8a7392d4d6c218d456162b076d8a12648f9cad718e7871d45a34b7cb025a2d9596b867bb62dc2405882e78a718459ab817348249036039832a5e2b240195d7d77ff48a192a27719e121a4094b671993be0c1cac934a050010c2d240c68eaac3e9933ca7a9ec72990af204525d3074b66841571c6e1025a22d728eac5c6569ce766d1e7144fc6646a7c02a70a8e0f3c00d323ea110b4da326b13779380b9f219a3062e5fbfa4ecaae0ed79339e4ebe0d5c29c9d63f044924b0917743a9eb16e1ecdf80fa56183845932824f558e1d8d6ad27651db10a06020410608de27623023916cb2da12f1f3b939c43e7558c40c232178d161fb3003c9bee2f36c11f777d4ff53c51334dca94b84baa99cb16e5c9269ddf9b765fc1463ea6ef4b980e4074638fd355f8645fe7ab2e240ca26f9aa7a19cfcbd3540b7001bbbe2f3be957358782d5c0f34fad40282e29ec446c5e335d70e136b5f6e40f7e5290fae4c3b40ba9621e41f8b8c4b1935e993a09ad517544c96c2cfda49b86c810b7c7f1544b24ff42d6f3692b1feae5608d01a87b95c037352f3cc2c23b653ddb589323e1060cb83056d8315bb0d499212a9547669d22b8880da280c750f292659d7d2fd452264e9b509ddf9e948b93f088c3045f07011b7732821016e0138bd05849a2c3d5861d408827c0ed8152f97a3065dc7c4401a5c24eba4b7b9db32aa22fc0fe39aaf4d7976aec8264cbf4e1375ee6c54e46d91b57bf54cfd39740150038fae89dfc8820884de0711817eb29aaf9afbfd5ddfec987edcf03cabd77fd22861ccd6c0c601da965ae462d0cf3ec0c78b970fb26b30158ee012df591aac2ad90c2dcf55e7dcffbd872af55c7e2ac88e9e7fdac3e884856406c7d7de8ee81bfd8c259050d0329469f9ed9348fe598bca25cc0471604bbd1ef956aac7bfe9d48c65cbf71953791f6c243a8c16c4377c7c9f70a4907a8efda7b4c56f98fc38543f70ac77e322da22544d6404ec2207196e486acb8fa1a789acd53f5d93ee7a3e2f3d28d5f3ebc2d11df93e3a32aaf63d2bccfe72b301dc120c1ff5d9962a93ff33cf826046b456021b196148e01c95baca923faabdcd6efe07f95efc82e955bbd3846569c63d677228fe2f2e5e9cf0d11871e4516112bfeb3b10e0dc5ce88dba56437107178ce85d59f69e6b3ff8b3a7e68dbc665d051ace3720357103a63f472069d189bfcbd56435ad7c73b4bd9a881de2cc65a67f7852641a29bff2b6759be1e48f2ef96e9071ef6b27dd89ddfab89e08a461a26b1d921312383c24b20584c33e6f3851b14240541d016bab8858b00c9d42abf54325ce291f1c283a78b4002f224afcfdd062d34b605009ac9fcd0acbf63110db77cfc040cb4732b7c83fc097e435901c96b78f4750e687358acce3b730121305bb369014f3470fc712b1f194ad65a9b5d87704c8a7867b06759819560e6f8f966aed35fe1731d2f79bbc609b3026b3968b3de524dc6a25424f02bdd43e786946fde67235386759ed0034c27c167861305517f11e74376213d6c2e2805c7f2fcb57007b45ea794dd81d34728b2d6083b5a918e840cb768f63038acb800e47e42ca8264419a421e05fec75b1527c81be03c5fa066773392a619b5ec76e46d101c5e403b71c90b40e5274897b6910963dab5925b20487c9bc4cad2e4a9045e660d690cdfbfa247ce8550822df9a58d888432857969707cce0feffdd0ddea07bc0f24f12a7cce09588171c1fda8677d0c543bc66339b21fbe744f3487b79227d9f8788bff138eb76c25de9b328fec58f99a65b4cf6ef82c0ef40cd44b39adab8374fd3a7c66c9048be241f181c004de00cddc9f57a9cb85e2ed8b13a85e79064df35f37f222ecafeb2bf718e8ef2a3cf55ba5388dcc983bd78fc84a211e58cde7ce80e8f947c24176ff0aa57919127ab5bffab50c774f66f3582727925b10df07057b555537a8d6d74360efcfc6309fb724a13769e2bd84ac6ea5918f7bd197111fd7986b5ca260f22b66a312dc5b074c8cc4d91ab83e29ec4a3b48c71059231638babbd206b488b7b042a20ab7cedd63f3b94edc71207a7e79ac4d2be44f337bafe4064ee521d62df597d5b20cc4ecb74b8128796ada3d4af7a3d257ba46499040270d22efae69a4ae65677391fc7ac7dd6dacee9189017ace88bf890c3046d613d07c2925fe2a816499ec2b7331faf5efbc26d2cf13b0c92b470598513d1154d8d07cc42bf01b4543c16e3197ff297f552e6cc0154ea13136c3fee8884932daa118d85bad83bd527760ce88078359b7c6b99248c6f64fa9a962af4fe9e4bad74baa36c6cc3952a2ec957ea93798d90a80b62ad2964c814857a34a4bf51bb1051b00f07b6571aab497976d991f296369f2d9082d598eb1be92eb86f2c8359b9df76cb8bac07035244855adfb352171046cabf65a402d14411eb8e9738d15fc87fac359e5520232e355d65f200d4c84f6f392b54aed56cdbfa72a372291de4ffbaff8da8243d22adc15d79f318c0dc302c19317cb1603719249bea6cb5c5cdff0142352a2fd416746788e1a55a1e277a2d3d5cc917f8cb4842af359bcc8d5f323ca1cb89aa961e05d408492dd807caa0f75b36f96647a35c378c71cea39bc8da228f23e2e81b50422ae94fd447f5f2b84ebb030bdae78da3ebd7acab216ff4e3852e708be513435a453ee7d5a325cb416790684c7d02dc218a970b6a661cd701fe759d70ce6c2abf4445e6c81df7db9b788ed20e21526bc2b5ddfa088529f16fbf8e8ac11a54e3aae1a0ac5bc6f51af7a2b9fea6b1218b67d9e44bde0ba854729b7918e99c19e79b79e4054edfae8aa27206e016d0f280d28567fdc494e10ae1cf5048139e629ba22a4265ea6c9fdbb1ba961a3e034c636ac3b05cf419d24badc9065481dbe4f63df564e69a422386bb189220049616777c6166edbeea0b62ad548f601a05159755aad246f56aa8ff2700ffb8a80a8a6cc517328039c94fe178f04811623679bf9d3aba9d1d71195d5738433b22144aeba231f795207165336db159e945ac97da44fb6103b4352b2692a1bb58ccec56b270c3b3f81e81c62425186c24ae66299c252f59effe42ff5acfd66fc3645a6067a09923a7aaa49801dfe2b2b29ee645364bbd7d906ba1d171615318ffe7d2d41b900abf06f4ad2b8edff280bd3050d931e8897b50e2c311482ba520030cefdc4d6c8edbb856e2d04f66c4783148bdd435a1848088a017a216b2fb3c034be91c5486e3d38d327d4a3fa1536a9d23ac24854cdd36a4c5b516738ba00f1f91c8e00f15db6626cb4621228c02052ebb1bbde46fc459813431e044eadc2df2552232ca21d13a6abcddaac51f173bbeba1023c233e7a5283f71a58399e1a7938b1155e7340a165aba41f2a0d7d47aca4a61070170e46cf02752495493a13faab82290632bfeb82f9053e22a905983ce20e1d44f7ae1240478165e38fdfaf1bee4320d73d48d8f384a1cbb67c7e6bc41bf2ab91b597fb97ae46ef1a31bfafd0e3d214acd611bb0ba31c56d514cfdae2ccd5a9319cbb45df8058f4760d98caedf0b1cb226d7d40165f7921ab9e7b51abfd5881557a57d44665aa65e2ed741887dfd1bc32922928ce1276e517b78e2d4755daaca6882369807578f464d9960c60dc5ee543b09228be9ea81988d8e98f350c37112d2f3a1d52f7a8adf87e99416641e9c930e938a232434425b44d9bea285f8491d9233bc4d1ff387630b9058e561eadf954f97534532fbc754af563fee51989600f9ef3a5504a6ac9485205bb118be9ec9dab67139ca318ee206539e214c00e8708932db779c7bd33183ce81970762ca1590f095311a977ada83265afefb3d20ff5fc49aaa073891eda1888a68b39853e7980a5958f38866de1fd7f6b28c7a72581cb02b42825875a35f9fa299444c744df8f89da9a34489e64d15e31af8c3a1b0d35a64e52cd24bfd44562df5a4fb8dfcd138d5205b12094f19323b4199e3d636878d8e986db19013bb6acc8cc2f8c61c71db79aca215213da46b3902d674138fc64aea7a0439aa2b0caf38034e805c689d24a69da7dc4e341b5a2695ae53ab5ac470fc4bb53fa1ebe335ada1dcc691783e4347b1818eac57b8a8d3431178d43b4e12cca46b35413356ddc99132b15cc1ccd13a2a20be0bcabcebe583c23c101a69baec0d58f880d4d5f9e06766272d7356ce49e303e412134c9aa645ecc5d1f340468c016eb7e6491eb74554f30f35f48e8ac5b9265f4607040bf10a7f5e6a7be0133420ccd43e437aff4928ee70ed4b366ef28dfb1e513a4c65af54a32d21bd316b3758ad20cee032e675d0bc28df89c38634d01ada358a78a0e206c7028ccef4c2a1d191626115e536e556a01937055a216e8bb707814a77c0e7ef131e4985a8fd8d5ae7f1f2662a03bdba23772b099361406af8eddce17b49516906826e168c926d1443b7fa58d25ca2b454f3ba920ebc650a52063d59d46ad9dcf4c58b72784afac8730981487b4e1492098ff4346c9c58efa9f359ffef5155297369fad486769cb134f0ac7548473a3ec5bb1b8384334d3599956c2a0f5a5d99dbde1143745a7ac7243dcfb91be77368a606eccaf6a3aea8c59239d3a6bcdd033ce1baa847d61e2137dfdf890c4cf948ceb302854577f27d89403b181810423ea71ddf1eaa7a16f77a0fe795551caf9a980fcd1503b2ad34fa41bc72fdbac0b72b209ff9fddf443e9a3afee1a7433e52f0ff7367225223841dbc80e94fb7b262e509c823b11ff99bd1acf33f830c7b3f99447439064918aa24786978918400385028079079247308f2fa39a9a67994ebed5ab309008bf8af4675204af303c487956d7ace6c727f90ac450e2d922b241935a672cd2cbd259f4cc3e4a100857eee18710a36feb6f02f23856992db85d189b5b3e0256c1d7dbd5d64cdefbdcc790440aa79e1586a536162ba68fc87976d76601e9a20a765e50c3a17a249c08c5ba1ce7df901be0c0800b2f8cfd0e193a32da4bf671e6078e3a300938a2cb10ed94a05c1c6e4e34858050693e8238855f6621414c80e39c89ee827e8cf76df7523229e08ae4afe1b357392e3d7446f51497a5d5b156afb3c691e6d820748665077a2f1443297254b3bc070dfa678d33d5edadcccf7c0c9f390ec7b3bcfbe8d8feada9c0eef7522f4187af5c100185e1e83c443f3deaeae61215b8994ffd0ad511d91e61113aa38723510e3d89d3a0a38867f98331b29932376bbdfe283e56efee67e009aa079633e04dfd1c2b4b1009d0b8c62fccd6e610cf24606c4724dbfdc6daf2052d2611590f1c9ed4d78934ccad1ce328dc719050fed45b2259ddaae53770c67950b8f44c8dd321b760e61b828516416b63f23d5522f6d1b9aaf8ac6894fbd9a1f37607c9954d84205827d426ca982fae8d12625871f50c92e57c8cbb79ac449353fb6851715b913187f8bb382ec75bafda528942b2090097c4d07d55ee0c59b4b106a41f13054a8c078dbb666c2365a6f62ccb35cb01605565c9ea0e76fe1a311fe500d1e71e2d5925eb8f3dab229b01accd71a517eb0eceadd13f9e8abad544b48581d78ca037bb41446876634b5772f60c692c1189ba5e65ac2714ef084dc7ebad5c67f08c5bc81b19cbf388de55a6a662099941025f091c36d06efc1bcf348b5c58bb3962de0eb8f35d392b55e2f60492b2139f41651aa0d1aafe74ddc9221cb909a2f9d232116f45650c7ec8f07b0dc530f87005d39db6328a1662dd3489f9d4dc0b67cb794cc9d52e30354dc9aa6b2b316f8dc0fba885fd4ce2ecf8f3e598b6c5c698de960df6974d591a07f4187e7aed24b76a55d4dc2e1e0b99fad5973f8ae802577987c0036f5b12f4aa4ac4878b7a391e9ad84514d0f32ebe57c54e52105c91eb0ca869dfce8627d511115bd844690c2a5ea00277596b54b249b019b532904ac6094e1227e81f7eb3ac34ffbf05b70e1e7856f7c38709c0c3fe317740f04479e0e43396f6ecbcefb8fb8b755d383df131dbc4e2c7b940bc9ae521103b0776efd855f34bb1d199f4850c17cd1e60c52279fb0a4403be32e791165c2aef4fe40fa557b39361ca5f208dc546c35ce6d248a1a0724ce246f3aebfc79c2e970628d9df150fcc546cf16ee1b2d4a1a87da5083880738ef2577f2c8dd060c4bbef8f6b33961477617130b82633e4052373184b8c834221023de578de83c8f0376c348e880a16a34e837473cdeb53faff0a2c466f0b73203ab2eea0fe7c104be3e4012060bc1f8dc7d4dedfdd43a92a0ff67fcefd669940b41e6613a7910acecdb939cec90b4b9801d3651c9f56b3f749514d7c417b7adf087918eed8f7db89eaa7211cfe3e3e55f345225594be95c8961f2968c2040afaed659c31fabb78ad3ccbc395ddd55b19dfeaf3cd8c15d6986b349d6669dcd12d7ea158f5c751ca61a132029a72331af1d529207fbd73c10901c16f34a50e44fd31c8d26ff0c2c67196a29a8883878822bf5173a8ff32ff7d80b1043456599b2c08590f5181769deb5346170f1128b1ea76f585b07fb3696fb3574d64352e17682830133e28a4b0c76a16f7d47af1c055071ca67252a3a017358fff9337cb03e21d017fb5e549440fca2fae13deb5c4d8a414ffe846336f99190bd368eb07aa8298792822381119969ab98d5b2b9fdba94a7bc85f8ed62f98b8a20bd58897f55b73b24b985062d0b6d6192b924770613cc068161a5e8f72a52cbac94a531dcc93fcbaa6207bd87550bab118a0d689d610a2b3dbf235ba3046ec8a7e90f1be1b7e441bbe74875a4012340a8b4bbeb2d536e983e0a3d5c226c285125972825b94c4bac3807f5c621aceb35a796345742740a08db158a7d54a591013abd72f8c9568134c075f67b6526665652f4ec6bedc5caa161e21737e9ce33784b0d63bbd89a6cb867b16c45faa496953735241594d407a67e5823e193c3d913da7e051aa0aee7a85cfb3ae814ed14bd6e69cf14449560278b47011607ce0baa9feeb856f403a3a190ed890671156364d06e903dc87787d862fce567d9b18e2b82bd2846e7251aa06671633beac9b2b0f415ac8c6930a1f2dc8bc3fb43d8e0400e7a312de29c3cbfb9b80b0207c1df18cdf8ea610e76da9dbe0075dfa8bf949f414475d3717939807a08c4222aa861e9bf26cbe1281af42abec52d3c14d73fa1dfc3537ad27703d2364f723df4a85cb67e1548acefdea188d2025ac9f6412c608ab51cc399280c54b765eb0a9ea3d4131ee4b828b9312bb4a3257682e56a376ec7449ffd74bc041e1c1e0df841c1a55cb84509f2c863462d40981053e0824debb0823947045bdaa0a969282f686c83419c1dab7a7e49eae4647f80ff75bb40e18cfa37bd90992b0b5746a747d89958a6ab0825b34def0b3fd0e1bd965ea304e2e6753e70a992990b1f14a42c6993c7e7ba2e936e10c61a1941506e576dcbf8e2fee3ceb8c5acc7469054c69497b05d525ce2456c8fabda6f3f6f1cdfc9fe5c3dadf006ea3c2932255d3394276f28cc8bed21da01ad88ff3bf98d84473a05dab949ba2c8bdd47acb3d37b730f65c44a682f02ccb38de885da8097b8b14813cf2d0cc44d13cf0cf297d8661cf37c20716d1d315b4f101ddbfdae4370456290504635d113eb27c995a8228060555cfa29e3b2f03bf2715fc0378780b515e813f46bb5efce4729ebf0c7724d3375228b6926f7955206f178842fa6da86accdd09d1510b95020aa7627e493b234731d18481d71a209ed5954ff5458fe159de0f2e3a242a2438e58248844e3943af87128b1fe22798e6da3b9bb0b21e73a37dc5721692bf74365ce88e4ded5cdaa4d51ea705f0622a8e5321c8cab5b38aef8d58f40f4da5ebd69d206a7b4ecc40c3fdf755ef3a00f034bbf1728c38a447fefe30377d3918c1607e0d68f5eb9c3eed71feec0933fb10d6acf0dcdfd4503ec93ea2e101a1dd15f3b7d8339cb12b2d359012cc2b46c41c44820f170aca50a80f6ac933990684b8428956f24a72aff0130440aa45591cb882ff99c0cb91efbf0b5fcabd05a7e81a51337febfc4c83a0fd26aac14e2c9e219a821f63d296f874b6d3248b7bd54a01d70c13b51e5ae261bc7119a46f40cd105dc8c49d95696be544e7e89035c198dc7b5ec3c3f266021305a45932357918ea3c05c77deccc18d743e9c7f0a2eaf2fd1950e8bcc1d7ed91ddde50989251fa35a2f48314c209c7e6469e56ee13ac36a28957f6e9da75cf6eed387e6e68648a2ad9667d672693f7eadd00de5f237badd52c77a7c14bb8240c81a476c902403f131b3df720e8ccec61cbee4617c22db7695d2ad9fe3cddd39f7a07b5c0d7d1230838004c8fae7aca4324e13b7faa1c079f23d5ef4bf04a644801e715a8bd4b6daaf74444f6cbf5d9d7059d779c54ab07e1908817dfc7267915881c2096aeccbba8edffdef18c21393075c0de38c5ab55ae425fa24e40a0a33d355157d9bcea80416d8fcaa578de3a238c1cccbfb69977aa50d0e0532430463f48a38e0c32dd0757eddd5cbe978dd2dec27fd4f1aedd652f9e8935b0a6a5b284f9c2170d42978920b42ce35b92d61e8123dfcfefba5f875ee17fa8688bb81111b53df5c6c779711a9d7c93d987a7408415229f41f275b816f0a34a1f7d5816aa3fdb85b9be1dfc79d9ecdee019dc93d24cbaea415d4620107948dbe2d6a8a876422dba304e3cc2c722756e5b0e1285bf27fcac534bbb571d11b91b569a20c674a7eb0ec36ca3aead3a3c5889f94a4c982c5c458e44eaad5b11a462f83728014db1b3bbcdd27561ad82666a59c7d03ad2d6ebc75e3aaaa3a8789703702420c8246c0941ea19eabc19e5bb1b9b0a89cab84c862d9bf0d6eafae0df44622356e88a40eca51903d172af5fa498307487e296284995c9ffdcff9f34ca09ccef5bd52d69542844b5db6806c0a5f0521ec38305373b1b3b2c93c538598cce30b7e39ba71bbcde7497badbef5dc9c328782826c17c2a45093c4b563855713543843a273d7f14ea364267b972ce4e1205437cb3dcd9a3214687f0016322472bed23dce024174e5a9902bc4a16a2e855247e5e28cfd9adf953b0ba067a2824a3f5df5fece24ee99c829f2356161d3542f5c6ea2eaae42a242c3a8ce25195d97559b11a3c29a6c097792c0aea177367f9a324d1d7ea0c39a74a4588103e22dcebb3429421a0af08ffae4f429046b93d166b41fdcee9bc3331abbc3b16762c64e0f61a8d747b6dc65a7578300f956dcfb2e237edb2964fbfc01d0d9e058da22b47c8cdeec3a8317197aacb9d3ab384e058cbe4a0171dffaaef4dc1fb246eb3dc0e85712edb908f15f514962b5eeb698a1b8453fbf40f4863d01485662eeb2219654b73c1250e3393e4125b5c9edc8823a500358e0606eb9b7b51a2a6712288ad04d7f1e29b7fa1508630d8d310c0a49214e9e0ffca693e14576f6aea6b3ae0e7a85f9a24a3bae2ed7925d4bc6742d6937e084338b7ee933349d35dfba05417ece544e796d86c652aff0640d38b20e6c05decddf5674ff91dde4770e026aaf2e1a7b2737088f5ea7f4a2c56b4268baa98a9da40b123e89d71b422681f095eaa6bbcef799ff16d8ff7e1ff8581823a62b136ebc54ac5dbb495f764576c0d882d5e96960c8aff53cf9b72042f05eb10f8c3d69717883020fa27588423dc7ca7cbea169f75b78d8bf1b4f393696ca619718380aa8f11457276e613b3828c5ad082fc9c465b74f52d5d401501de4f5d52411658d75e583f31f7176345179bdc283e4735630cc8f8efaee380880ee5e9c3e91de3c7c36bdbe1f67d0e302774da200ca187a63f61f0898c1673b1a34adb3eeea10bb5cc231ca101c001470ffaba2aed17a6701dad04fad0f0779835efaab3f78720974b3fec22b126b1b5c7625f8af7b4339d6f288d3e1bca1f1258fc9167e970646c4416eb2a7de392593444151a19655e775828dc1bcbf07c1655f1bceec6d62d194c6ba0deaa28d55df184194b66c165fff5a9450c65919f130237e3d2acc3931da3d002f11b1c2d2131be71dd501c169b766ab16e1c6e170865fbfcc2a06d2396e7aa8905d27cf974ecef14204f729e7bb6093eb9cac864de7ba2a69d5d62c6f9cea3ca0f5d08a68365e1606b7f1da14bd6e4824afdad8002af2f581b3cd2969987654548d4f135f60e0bfc0a2e92ad510f36ddaad60184742ad361318c8b693e86205a4b97fb23bd26e79591d6a281dd5948b3fb6c3e4ffd944babdc62fc182ef6e8bb38d5720b67badee559774d64aa22c9fb558866f39b8f4cae9e7e770af069dc62a4b877873b0ca3ff7b83d939ffff3d3c6cb90d75ea8cf9c4f9a81b2d3d549de68c99c3edb44947f7a78480ec4be6ae602b54c56ffc78780d8f88362e08db8eef7e45b85b70ee16db0a8b4b3957de2bbc3d6c68f0a28de835a3673f26b99aef0be62dd318f9ba24555789a3b1b6e8cf94701bce2841648a90c51e1d4fc4aa1ddd45375b2815d9426993450636bc8367419b41773d25d4c29352006d0f263af0851a636759c51bfad7c6f086e9d5a45159d5af8a95301e09ad4c07e9a5ec94c19a242fd23b0364bbffa7d5d2e0caaf0f55cd49d78b174ef288fa482d17fdd157372fde889401226c527a8e14c95fe6f0dfd8fe5aba26ee259df4460e473db171c6ba3a92ecb810c7070d72ceb247bec0d1dfab3b76e49496718a03c807a871626a1bf86bc232ca505995ebe011f80c33ec1052499e9280d8cd130028102485946f6219751193c9b1f687a689970fa4a6ad809078f3867bd13ed97281eaddd566076feb1ae495c3d665649b4d5a6e84da6b699ff209faf02c4fd9ac36f07efc8b8c282a316024e9bdad78dd10478067357930445ce05bad3c9c6ae1009be1063fce9f9942a4177a1b2e015d138c124bc9ce8293969100c0521172ebe4191a1708c9f3e6e9c02d437e9a743fbc921b9cb5ca20cd70c5361cd362da9966ce72ae24effdd8ab16206863e7cd646cc244ae5bb10e4d77b70e65d239d3875a7a839dfd6aa93515cc4f2475ad2d01b49c1d92eaeda355f3d57c971189eb0bbb8a2922319c737601e8b2762a2df6cb3e0c68722e6b46f86282ee8646a61600941ea6ff7a0261519bef74f7c97c7f9c16823823657a5d188bde475e1fcdf5c7c2d7ec7bf01f0b62dbb6c7e741a67596cb0076bee2ede82074bf36f54fb59776786467bfb57408f6138254c82c301c6deff1e583111c0c6dff3b6d061f3f2bf62255cec4461ceec83bc3178e952453f79e26720dd3a40c7e1a593adb3ee994f2f53abfa66ea962a8f05e74ba4d65fb0efe9609fccd7bb42cd6aeb17f2c1a82bba6a85816a31845c435f020d4a7fbf84c74fe0dee21e43830b032b2e08ce6d76d0f33a744b1f02121fcdff10c3ec245aca6aaa32f17cc3cf69f320f29c78f61740e7aeb5a225a3753b56ca636ebb34b42e9ccc3a2493b87c47df7a5e39ea21f3f7e0c4051787eea82ef7042424664c9aeef7deaf84c79e57aeb95c2ae703736e771ff597141c76e900d6a511b1a37c200c9632b70132366ef8aa2feef0aa866b66fc87590c09d2cd51ed4d3c59d41d23179dbc8ab0a3a093a1c16f4cb27ec730c26896ad19c4c2dfbf3c3ab649723b62a4451e3484fe6a6fbe2c9908f707adb0cfd250459690ae8a58900a68b3daffd26876a8e23f762e05d7d8102387b8f9647476ab9124d2f9acd2ed2830febdd05a36d0c40ad1c5d849671f2778fbded9a4e1724b8df7adb776e12f7e9fed5785aa15a9f12638f5466ca7d2f50d56c945cc47adb8e4f18b0bd09bb77dddc0b65353ed1feb8e934e188c50215bf6320fda0945a29b8c7a03aa626707c7bbf258934d2515e01cc3b7d92b284166361aa214301b5eb82f45a628ec9eb9bc06b1a505fc28639576ecb441023ff72e30b398f86c42b30e5a6e9c7c69ed006a478188ec86ba7e405d5fa411acbe58b3989edabb546be033dadd2d9844ddb6ed303a1d7de63db468eb7a7c9aa14ccd7885dd4d2aeb088a3772357bde51aa2705e31168f73ec27aee1369640d9252180720acac2ae644028c0600dac3382a3557a44d3bd30d4b1adbc5a8ffeb10b106b798237524e68db7dc85b1e4937fd3c6e3fc4d7c9b1ceefc6060ebfb048a0acb9109305bdd743d624ad7596d545123e94471ae195b5a38fa39e3255bf2eec1048bde67bb22549a76fb149e83e93478692725de2869d48dd81846caf1bdc47fb5f9763ab073501841a406430c7831770ae6e5cd1fcb8c08868a8c4aa0ca0a9814a647aea6a7f2b76b1443a8ef37a4bc60150cac39572eb7bd9898619cf9c96bf2c9d5b6e68d1c4649b62a61b7452270628679f4f7748eea381abe990ab2fb6c215308e1b56abcc3430823284f5380d8213764b30b542614f19d9cbedd00077bb33900b9bce8e798dcecfdf717e5d5ae5c936bee717e1d023459009e8258b9a835b5ea1982b08797606d2501435039eec62ef588c8625e4567f7eae27edd7775bdfbc3cdc1625c633f1731a8b8a6c087788fa18a97841833ceba3232f95f6ce98074750c01d339236884f9b44da8b5aa1f85c80711e80641cb244983649b73bc84131322e1d94c6284506ff64b85ae7fbadecec0ff1a047d9e6ed8820d162be6b891fcf1545f5c330d419b3b601bfce5cbfe9b73153ece265457acd35fc6329f75b9c4c6d98d44617b2e6b003a842218f25774fd0ecdc283e549aa9b74dafa710e6d160dc174a18c2d7185ed135e2240acea6931779810fbeca9def07415807df858661cf3783a7fd53f6d78ef85e0f502cc6e1b6cf536ebabffa27cdb37b26053317cfa9275bc7fb992b8406ce75b08b10881709fb16bdad448d67911e931ef8ff4a401b88854d2624084f9535618d167a267a71d10fdebdcd6b47c2cd91b6e9d5da3c796ec834ba199ee414489ee9e992acd76d2cb3b9e5c283fadbfffb067b2ced9a950cacd6d931b79f24fed3e60c74843257d0d2058f0f858493f77b87273fe19535693f810be6156a72593205f23014d2bc2e9676cb19bfc1766bafbcd9a299cceea11b77e2d7a8e74196f4ed0c97c4ee8db0f07af71f46dc23837737604578a4beeb5dd1160591afa237194ad3cb7867b348e99a6147b76f5c1435a70b484dc60c30298e5e3adb93c5eeace8fc26dc2d9ae80ce62564726ea79b39a2274398155ea16364283fe015224d9b0e9cf23192e8984d2d062781d671330c90aca58556c17fdf2b009c1f12aec820d44be97c0914c5facecd775dec3fb525b8fe2e93d7fac1f619429ab0b8bfe0ca6efeda4efcb13a3e223a34916c9438542a9273f3599d493d1647f34cec218d4934ef5f626eec93748b11dd3d795e4cf31ccf2018d379864008bbf67a4dacaf280a887fc323ffc576b19f1aebe555d901bbe803bdd2260811ed2fbf92da957896f5315de5527a8cffac521ba341ada0cfe9441c10e34ae16acb35f7586afa20d8e8082441e86b242dabf2e99d0e13e651c2714eeddd40c8de4112aa47a07ff2b81f9cacf966b343a972bfad9c1a620ee402bd798feabad7ca835f3e84e21f718d913f444a3df8b1c5a2eb435022d95ca80329cc0802e629db9891cd2977f2101d23a784641dbdd1a791b7cee28cbb554e8621f76021d0d7040e5d909ced27c1c8f3e4e183fccc2ddab5b8f81e2cf840f83fa563a20c7a67ec8b1308766c50ba8f1baa2aae50b2064c2407dff561f76180323ddf683479a22dedfdafe98f4ba541b8f4a85466ff8cc9eb4c358a3300c3ac3adbbb707edaaccb81a5ab147a25f9623c949ba095fb2f287f9da6060aaad5012d72e428a1bf80bed6189db78e2800da4428a22b5ede20568e381fdd2b26eae40381fdacbc197d73bf24346f6d0ba3358764cc8ab1a68352f63069421c7c7e748230af51ede825e177f94d1fabe5c878794262e928b02cdd6f0862de1f35b53e26451a26cb1e592c346c669a75a2eff512b1218df740a0b984d660e64acbd380c1cb2ff1b9654a7c567f9ce09de084c83cc8ca428f34f58e981bcec86feedc3f106354f26020d86b4dbf3cde9b2cb46df5fab84b2f1d09bb018b03b94fee9a246fd4aaea00c73b042e44d423349d6e5eb4c97875632130eb618fa1c0316d6fdda4a7636af499dee45b02eae1ff3d4f26f96d40943cc2f22966ae6df6ca8fc681dcea38801fa0e10effeb631d91f66756b9774474ea0d86509ea119bf39dacb731b08d9020086f93cc83cb25f006334c7d5890699a02d237c2998ce39a60d1c66933e208f5dd5eef83599a3cb79c3e6e5f2ced99e6caa781e8e60e41b167e9260b8cc984baa085f7c71bc4eb5ef729115ce7dd36e99adae618659a5b81c921a4fb5e9d3b934f9e08e74c5d4fc904842dd57103279bba4e2c86fd115d7c5c159476523c64a36e4797f84c72a0970496ac8eb9e94e909023cd29f71ac3e33ba9b233c00dbd8d0008af063481a19f90d2e2b31792fa6adc8cc6bd69f7d67622c8e3f8b254a0cd585acc152af7da2cae22d68738e49eb5bd420ed123ae3323e117fec3bc7e574c36742185853b0301a2c659e7af891d3df46b5d4a76add8b442b0f0255ec205708dbe12ff8d7b0c18f14a953a4119641405688c3db084d89ed99ff3cf29574434b305f84011e91289936e1a1fa08b447386fa201b8c75700779e8278e84d9a26f0c743261a57a97f9bb6c5b47493f2255bafd4ff63d5e476113d5d4b3dfe23ad1ece3f0cf02401bed1ad5ec5165a43ecdfc74e2e895c81c624b27877b31074cd4dcab7bccbde50d0dee0ce92e967f0a7f3873145e261c2c5cffea05a1727274d9ab624dc59961bdcc7e8052b9367d34d6f93d095e5114062342af675792e64f6a3941bb2d2d722a768dd20da8c8f58032b823e33dca5b5f9e0d174967c0ffab22c5cafa1de6871fef7c863e70048005313d932dc2298e36f446e48e446078a8f3e03f82a4b51968731aaf1f510745acfddd8a5efacb9a47e2b60c380e2e5f055c91d54cb5793d39d6443887364583d87e2fa42f660d8d52d2e78e11e3af17790036edb91df651add934cead33d2d4e31610aa04ed80559685e33a47fa8e509ac559798b389080999b50f5e938fafb3ac2165812b3883888ffad469990cd48d2b91b7adc83c061327d3c2824f3ac00a15d1aba6b5649bfdfd785e17e5d442b6e5bb2bf5b29866b7cf74656563dcbdd6caaf0d95a1353419a52e0a70380ddc607bbaf53409f3d8a5915b040bc75f56057aabbf299df651c1250d529d82e89ef2ad1f3315c43b2b3224141ad9a2a1db9fc939795607da4ef8e1844e14c35239d350c83b0a95b73a12f62d7833acd201145902413e08325a7c56b96e5c75f65a1498c4761c73a191eafdc68b5bbc4b928fa940dc8cd3c4aa73b652bf208d4f35612e6783fc127db0f0c565f304bae3342dc2ca55a4ea04bf0bb1571241817823dfb8356800e043542183c04ed4c5364d772787c6df6ec7e79819f2319d44d2aea801b861a04835b27a21ec88f4e63829de0bad7dbb40976e9b6cb83ca7d38fbecfa52a0b73e41168e8778b15276c9fd7f8f96c5bcc99e1398d17c77cd0f0f339c1eb8873d27293d063c30fdd253fcd1417f71291ffc815371b157e86863ce76bbc71aacee7073b2145cfde8b8c28920d819f8e4580c104d9b4eee74a144fa0822e124fe1547fcea6056b029bc8b306b31f0b883e298f41efd8fc107bf1c2b0453a395286a9453d900b3bbd061e034278b45088ab40f52aeb316881b7dd5af9756ef47aed82ffbcfda2f278c6fd611bbd41a6805a8ea6be56ac1f100dfc326cb1587d284098d5b4de32e0e96663dfc78a13837b868cacf56053d189675235bfe36c6398ad3036690bf11d1afc85fe92283699b5b050ca6dae1b293c359792a13479ad10a683f7d00aea22e0d72b15e2b5fef7dac949d97de7893d7ee70b9d7737357808631e8fcc14645f6d21c997b8303c6092f0ee930c4e48462c0091630f26922ef7e964802829b07dcc421bf7050e6d0d080faaa7f385b0716e5ea50ba4132eb5b35c356b937d104cd59f32f9c4ac56063ca4ad3adca0ad9a080ad20344dd4d0ab2d266f5dea685a82b7bdc1985c8f8ae488b96424632a45ec8adf2c6636e7a1e10617f2e99c88a65e080103392858fb9898e1325e76068e6112d0b16605285b7e9f26febecfb8136c8e2e130eb9fad848d6da40adc036a79a6e605109f24b9e2be63082c364d318d8542aee90b569119bbaf541ab1d0789f887139aca478b0caef927e42fb36d5c10f1afa93d656737f54b917b363ca328d7b70fd24658789ca42d1aac692c302b91e3fb93a345a46aca4e628d0ee6136bbb6253a7ffb526667082185632cd0ef9d9af4bd32f225760d98dc08fe6bb8cf7ed584bb231b43b42c9e5e9df48eed5a7a4ee50139870259da32b223fbc42cb33906f759a1e5bd799ecb81e9065bb021325e29e4a985bfe15e752b2dce3c4765e085555a17e0a7829792cf644ac9083a5b69a4490c4eadaf4125fd41a2f18a3e22fc5eefba3595ef607db8cf594e8652371587f46e889403545351f767b1b0fd00924911d5a4886b2d94eea9ed6ffb5bdb372a0e4de6954bd7ebe8a8620305a27d42490dbf0dc04c833fccd0de095ea7c7776b8ca52a9e7c521a870c91a1001fc00df25aab3d86f389b98da255586262c6d87ecb2b0206351c73aa0f91b0bd10ba2d79884dbb1ffaef9af75503aef5430f94a74eb96a1ab8f4009fd5422af9720d666c2b52dd24c3275fac98d09175a917d56e157f0d16a98c721a76947ca167c35403d0bf897506680015ef3e13c4113b016f4153e2ffd68b5c908d68ddedffcbd100466a851fe27741442d3fe5f5f89ec5e7836c6e9b5751639dc46e3b5f2576e4b39d5718a815f9513a1670ccf86be6b1a986034599c23467b87f20cdab3fc1b38c3d90a16649cdad48123e2924d2d2dc48730cfca9ec9182fe41c156aed523e97b534117c8ea55dd314e0c7f6d79e3aa8a98243a9eb3c91bb4b5ee6d5356f5629b6d76c14e7708fbf3065518fd696b0e9fc071e654e58b453cb300b6e2112e04db3135dca49bb557b2511baa691f3d3633665200f7cc2fd07c6e827ba131498721c930505a376a938ac8622b1e5913279d66d2bbcfe3d169cbfc2ec9487920d1f9b7cd2463b3e4862b9a363afee0d2f6c9b67d36c819b76acea4624c67103a6acf0bec128cc04319bf8bcb61a70fbbe802c55a9f66e2b79190a8c1ed7973c492dd8f61024ae42bbdb15e4c256aa85d6b57ee7aa8d9701c7d1cca7d61400d488f1c3aa915c453a8625249a8aa2497cf3304b11e4845f9eaf1ede0ba3dd3cda8066c336ee9e5b72c639839f217093d7190b8d7064f68267c536e20260dc85d5b94f14621e45654de03f62bc38d4bd695d16479084ea60b808dc07d77a319d333d71ee0aa9d44542029e97f89d68238f8208040be70fd433f59385a86f59a3fa794d81530463967e50d242cb96fd0869e4f9cc37487b18752bb32d083397ec47baa3c4f46fab6b4a43fba22207dae4fb7bfa1f741bd81a32648ab2c2d75605d097ba30b39f28c939ea6eefd5bfae46e03b9bda97e360f6471d5708737f46f48ec06d1e87022d38dc26c05b36c27c6774f2ebcbfe69667eef52b3f1c8a8758b5e68b4b5820febd6d317c599a76aaad35031954cdad7b85aa40c3c84508383c59aa584690ea7f22ce886d218645fe040940a7acf2e56832188d910d9c2be3cd2dafe032c105cd7acb49305f71206191c91f0169ba470703af3ec5d1ada9648a478b3e725cc2f062e52b55a792c1ab08854bcec23d12f6bbda7192be73896143b88277dd5099898aca3e04e8d39a4d480ae9249a3252589fb5e59232c3ddaf84b71bb1d65fed1526974be338042d196f3119c66c102e7cdc84d9c06b085b58d7280d15216c040dc1a826d11a251a6b01d704374181803a7d4997246170a0fd9d0da23256e01816f6cca666ead70946dfd21836beb2300e63de43820bf8ea88942317fc070ffb24eb3df948a121116f0e7d212fcf978d0eda911566dfef74576c356e8ea4d7b597e36844e6b8667545ac1acb16a36a69be72eb2adeca5aeb0e5a4cece31588f8b876277ecf2932f3b868ec480b202fd87fb4fd0e44aa56326e2099116dfa6b66e52854d3ddda06827561d1f5da0efdeeeb896e7bbafc1b204804d40737f92868c5702cbd60dd9340b2b20074f19b202bce2f72bbb37a0b05f79ce3d3f30d25a7b2bc5","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"5ed60e21cdb0deba6afacad3e5c377ee"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
