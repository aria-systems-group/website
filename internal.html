<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"b1be31ea7fe333b79250d281eb148ee8f5994615f774647d0caea5560ee84f31ed449a4e1a5ef5b9d854b46d93c5cf03052daa2040119d763aa57c8a22460531ce20aeb1dfe45a4023034dc459f829de9cfaa8eb7d6f31f0c78cd3ba39cebf82818edec0840ceea8043f0f9e25133f68e283681b77fa9dd1aefaf41fac1cb6413d54f897f2a03643b7855e7829dc42a345eda4547e7c666b62ffd190cc5e654b3e965acd2e7a963622baa6091f8e507af4f28fbb84466e262eeef95189c5cc15e1b0ff7dd9be11c3f0f0779d3466b592c0f859e007f0e6d64704eab7391e8491091744803e858c4166b8658b45c2c19bf22017e6fa606e92347d6e18d37b226576bbac48f4736c9f7dbefbd440975359826501add1a4919353e0f292433598dce6f77875e4cae16e256ad57c4b183b6e274cc692bd3452823d7efda62c9cf38d54a8586b8c084852d860021c61aae98bb57413fe3b12945af0efdab340bb6696f73a4fa7c4d08b6f6fae1cdbb0a3a4570d5169ac190886ff8ff5b45449400af1a2c4831409969a717eae4438440a57f715c6170f38da7536d19d08bc11eb99de969d61ad64fe46efa4584de612b6cf133bc87021bfdc3bf81e19f828628bb8c9f1d31d4ecfccae854e5764c388de91450d36a02425c08a8ab3d38afd8f922cf50563cb80ad068d76d97affec0dd9a3bd5ba153804f64e4a80baa7574d832a00ddb7495fa4c057f04cd17ba14c35e4f4e90b6f90003d85da45475ba74fd2473cc97f28b08b15f15a79194601ae6b89c182ac256ecfdc45046b112eee16fd955ac1dd5f5d61507b96bd446975857130d430cbe66b41bdbf2ce2a55e980b3bdb126c8b1d02ada18e95ce4567a935e651f4a410cecb0a4e0363b4f2ee40cf6a46a141f6cad919d093028cfd75ff14d58e6b77c865051bdf977cca4cf8ea8e4403da89a1ef59db258778c37e84f10ec5ae5376012b446a536d30033d5c6423edf97ed11bf54fd00c54dcbb73e02e45463180c44fffe18b65d6e85d6c90b460028d8a0b096145a48f17ec9a7143d1ece3d87e429c678f968b36ff96f9969ea9c720d125d6b45a846b510b9be84a2fe0b68b78e45e9a81af72a47682ccdf0f0be10b0dcb149a94f83242259c1a37981a87c4602e668a5fba6667f6d212d4b1c141c4e23055e90a6e8a6f516a0da8b38104222262369c19f9f946997c3c55c59d7de39d70c31a0d1be8db85762fd0af67088b2b005fb2e74b41a09aeb66bebf35e85933ea063a0781c142115b527738402a3271f826bc52ab3bc196900c0a8046980fb12126d09563bddbb8d8919623bb7a88117049a96c63d2cadf68dcbfd76ef08dd8a4378536f4da1d5f55745511100f5e6c2089ee36a6ddad47939676f9eec08047395ad5705d78a6e58638a197a28039c7974963c44417a13ed37452ea3b679cd07c1c1f21a792e0985cf94deb861b6a0bd9e70f55fcf4bad425656b80c570fda1f2aa4f3956f6cb039ae5920fe45d1143edf773a9c4866ed2044de2b8dfb92f040c25dea30e7ba3b90a3d733562d46798a11a3ed9691cb8272e5c796c298ba7c64f1a28946401fc75dd3f925136e6314f983956b5132dcb45c25331e75333c92f7cf7671e7eb0281cab4cc2586343c92af915ffa12d25ea8dece9d9c7b9289b61412ab01ccbfbe637d224a75bda2a2e79912adeea6adeeb04275a5af552a3aaef6a55767523c426889ab58284d074e5096d3eff8ed4fb40ffdcb6f881d77aa99910eb383d1a2259b8f5684e5a7937ee998639873d7cbf9809b6ad473a924b4115f530e127dae7d7d398bc504bc67b7c80b92ef15b5cbf707621b12e78ed051e6849f196f598d13eb826ed931aead232253c391cec93d25eb83f79ebba2450a9552f1645b1bd815ac98149a693a4d7b59b6fb5744fb4312f299263e5a8670de8f6a9fc92eab00932a0aadd7b1ad610cffaf8e715aa5a32a183065c7a9b0bc35a9f5702c77d36ccdbf93ddf1ce5ea7fe23e9291d150a199b84138406c30c830dfe315ab53f129c7f491bb6c2fbd5873d18a3af302189bbed78bbcab19ee62b3fc543968ebe7fc608d0a7e40e6cbc4bf3b069996ef4b7e44f8305ece441e9ccd00c17d843e1bb6dbed808d08cc5230ff057075bccfdcfeff7fc43a3ed5161ebbf8e51c5dbb3215320e90869a96ac8ef9b1e6af729e610e07a8354fce287f65ffd4bd8f0c7e2264eab71d0c148cd3a944347da1c6b7ab72c8302595ea2f057d8eb1111cf2fa2b62ebdfcdfd9d81ac81417d1bc493750a6c1d10707ce7a0d55744df595198f86740d1c0c23f3a10b76bdec49317e79ae09b188a3b3b648795e6830e3054af47d95cf78b936441e3425e7278e9f237ab3d5d9f0c8bb71a71117e477216637db5879bf28221cac811873e32d1e0620f879528e949159feebce2cef7b8b14d71535ccdc73120cc95b7ba543a5e7e708e7125c3dfe9daa90bcaf89887847cb2a6bfb956a784eda326ca8a43b5c6281d92c2dfb2c68970caca72b5ba4372886b3afedccc08af00b67d800d61276227ff170c427c92c262f0dd7aba312f12c687aed2ac5bb6e5e314b3664eea0915a37463a0ce96fcf62c747da789a0dc711dc59df53f7a18dc251e8fda0ae77a06bbda38cc8c4a886a8dd45d0a0e183d08a8753879248717bbfdcb67dc4eedc1aacdbb091cb90c55e75c69251196b20956b64f216258a3353ad83b451a369cf5b49be12b05934917a129dc93feecf6d2ac71a1b256c4c47b34354f9f7f56e6ee2967b3ec79d0e9c57440b5c9efb4614ef53603c8c38668ff0d782af4a2f8e3573dd688da29085bfb6a69e5224095e02090ae1ebbfe96c0b69541d5b24f9df936fd8431cb74331abbfeeb736c288501bc881cbe76fc59bec181f652cc0c7d566f883474c743c110a79680a053ee002996f34f5fadcc271e02b9618dd39ecdfc7664940641966373c7b87f833131fc558a91566f6c9bdc65649bf6a5e69101f6bd8f54fc0bcad582f909e3e8b6457c1d9ca78882fb5c972b5a2ae50fa250af4eee37a96715fed5cbbf3d5a7586a6a2e9d4396ef03a76f569fac433909204ac6e030fa01688b0377e38e907d8f02f55871e6f84d5561c8c176941f5204bffe2aa3cb4ea46919fdaba48b0d2c0c843a11f006404d68b5cfdd56803b9d24cfef43afc965e184230a807aeb922ed39559dd8711834a1a444836b0df6a5e65326c1c112b071bb3507294073a0317006e0ff0cbc3c2409d42b2579858ea1c9ec543987c757e7b1faa4feed8c28d71dd0e4d1b436a869db5bb13b5b8775cfcad049dd6e09a3184070c306296fc0f848bdaf0610ccd87def3895bb9a75a645bd6421a4904b00b71bbc45a1521f2ccb93858b4792b628afd180d577021de6089030bbad4be524d5bfc1a5584a9ffa244e2f160a0e8e1466b68cc6fa8afc5cfc7f5ad9942af941811412c964dc265104f69d99cad31e94fd107b133008d5f1fd4c94f328c7aeee5cb049ad75866dc4e9dbd04060249a653fc22333d4468ebb8e45afed6974c1a5d42f830f68db8f7faf8a83bd301803c0a40e52f29d50a91257ec205774973893ccd5d431e88ec27fdc2818bc2dfcfe20b7c4f1e9d0169e58e6ee21f168ea32bdb3969549c3413571914762a8248081ff1cbe6bc85d3a22e5031587630fd68feba60db7d5a72d72d97841643c21c6cc3d90c83fec21b7142527eecab0a478a827bf32c56e6dd5c1c2b5ebbd79fd0f9fdcd3601bf7dd78bbb28b17f157489d4e20e7ed3d4de4dcd1e8bf3e66976e8a8c005958015812856f055d063add4c9bd5b0d895f8e3b05c4f7de7e5b1b62f3c49469046017c7bc264b97c746032d7edec566921ea28b3a8e16c0d1dc732cd269984724fe1ac84dd43e32550908c1fbb67e3fc3f6c6b8b56f5a9a37c6fd27e300ef5815c25c7246c0c688390a81df7ba69483d76fadbb3c91a358a2535d45e8e7668bef8fd4bae8c2d4054de7572a4df71c86006630865783128b8b5113d3450db769c731db03766d86842cdef32c5759f918de6e505ab68eecae12daa494708a3fe226166a6d795c02f2e8190016a8789f19fcb5b9888b5f74a6cad9bd4e90216065e0e63905d48185d83fc9a885a1c751e9bc96034389bcb250eda34861fe553341532ea9be11e362c11695a5751ee7c9880190132d82449822760fec09c8d41f77e8b7f86055be25a566763cae79ceb06deba459d632727adb58469e1d664b5df78927ded9d4395ef431ea40619f10b17753f05173f542778f3691eb8a03ac52c6b78612e1d25a0a87ba028d76c0fac212531261aa95dc80a7d0c580c63a4f8ea0af461edb16099ad9b1279554f8188692b715d6a829d742d3455a95b014b895ceafe2e054cfb1e94f089c654ff1c81d57cb6cf667a2f335c24bd55e463b2d3879d8815b913e541d48948c9759c38a2b40008618998b9ff4463d4a70a2ef2af97413c20baeacdf4819ae352ab9b6faab468652082114aa78610a0341b17cb7afffeb5727a217f4e7a0433d70ea2d9711319ae333fbd1e7c9916da2293cd9ad57a415483984a3600c6747b88c5a5efb5b1991444dd3afdaf9d32ce25a0449eb643c11ee981775a48613b3d77d20e0111059ec46151cd5f5796918c620732aac7295b1e84f7eec17c8961361bf0dab8e71989cdb1145dcb94210b0c60223e6b0d53241a722d43fca59fee09af7565775020ef0df52686d84efa5f2f87778c59fa42253802d890f618356341e34bbb994e25e24a1534276dece02f78ace6999cc46eee10352493d63db2f43490284f5f9934d22540a8227d9b3be915a2a548a5465320dd8da6a801d0c4cd0119c53aaa49e776e04c0a4079180fbc513002bb72d1c2653332382a9b0c8a3ed07628447699b74309cb1d94591ab397dc5ae4e606aa53c1f65e6a288e60a1a4f8a99afc0a9c2b8cd33b52f9d827d99636413f61cbc6c2b54ed3353f9b4c0eeb5999fd25365cf62a547689fb24bf5505cb60012d26cd06d97953d7d9f90d8da39447506ac0230894447f03411bf5ec3c3379d94df3bbbe4a7fa4d8dc2cf3860fc961a210b84100bcd7a103c8b5839835cb45541876d3880daea88897adf9b6909915f6b04e08cab973c0f677ed73ef0c6bb5100f092aa57043cc8d26618e11d163ccbe1f5eb13d81eb6da1c54d4a133cc65e66f83a2c3c93fcc27de99f81d940705a3a596d800eab1d52783a533e724bcb57c1cb213178e1d281686af36d2b3d21c4133ae1367c41ac4f53f7c7fffb6390e9cf15c9b322741e1b5a8b4a33d26f28d21e57926468b400322c90d1361f6e410887de898f5f32b14ef5e48098888a2fb2d4c4ac1ce594dc285a1f247c0ff977e30c815a7fe4baed347bdda9c53687b850583827372b03a5bcc6df7fc1a385687612bdf480cbfd18365b7fbd4abd838d5f5bc0dd75ed6cbf92ee40eaf4ed011c71e21c4c6bf48420a850e283f3657be9779df104f03633973324da077e143580373ba632c286277698d43bdfa1528d446af754f89c6a7ad05b43326393e4619e801ef8938933f555fc1afac704c8969b72cb0d5e909ca4a2b168e231a1d86ec18155a1303ce5963c103007f04538adc28d6cfdb3b8ab28a5a1544d0fcde6600b0f09fd4acc2ee09003fca6ad42d2c2f134acafca4230305a9ac80533b18dda8055c86e7133389acc15b95f611f81e1e6ee7da71605d44eea81c058bde034ea9f9aa9c5d8a4b80e323b30c403c5a464e519645db9c1a9143ef28b2220db85e7b7b3ec1bfe02087a91aa7458807a70ece38395c486d08558a118e6bf00b0ad139a097d5eec27b606151579495dc26213673dcb4ec4fc7d13f087a123d2de2ec05973b3c81b721507eb80fe9fdea2bc9ddc0657810d8853a9d58e480dda7429d5803cbd071330cf2e1a8aa39d7b00149f77b1c981709f8a0b6bb9488d6d61d762b3214df40b407ba8934b6e4e36d1fcc27975171da02a51074a50364ff37f181576382c278f9ddc295bc102e12cf66d30cf0b24f7e8da7a2c888e069a97be8459956fdfe650a5c278b822cf4fce47e466cb7f73b707c52baffa90c384e106d86f4efd492fcca0c47b43e4f80ae31d209ba62511ce5d90799415c6013ece9711e735d1a3e0aa4e4758e9105587a820a52ce3b361e6ef395ffb4046eb70b08a13d5fc5dc10374f88fd78c4f98dd148626a3fc5c1947aa2ee9fe0b19a3a95784f1eb687ae61329512c5d74d6cfd087a0b789c962861de3478b1ba94a1c666f23d2748174632582d82c88bd824312f32c479e89275cf0be654627a627aec8466cebb1fb39287ba7c3a25b331cbf709a2e387841ee9d2c44c7e6e1142b00520c57a3b23a6a0198c0f94a2c1cf0ab7e89d1441b17d469290c240f79f0d69d527626134a70a43b8a4f9295776ad7bab7e7c722bdff655131dce0ed8d721eb52e52e28980bf6e44acf631f98ee7fbb5e5a7b350e79e7ac38412661da30d8bf10f7226f06760b37cd9ee48c66995e014e684288e5640dd481e32cdfc6b718067b0532383695afc19289e64ce342f92b04e9c6dfd9ef0a1e7300a1805bf3ddddabfc8289a9bf2ee8ce88025a91b12b727cc426cb384c3b82c020dfd778dcda1604822ac34f08e59513b9f069ce03961a72f34d9f9972013be5e491d598e0fbd2e1dc3ff6a84d0ec3dca0f22f9bfa934825f3a591b53df9bc340a5716f394920e0ee78cb250784a6ece5a5c0a1f4641f29383672683e0db6de6f625939066b475fb1aea7489db3f3e6fe76f3d8f86cf0043cf9618d031aa9baed150cc380830d15ea5566b0637ba029a344a70f809ce42a57731482528dfcd186578a05a0199ed6f046e8dd036c5956e788b45f3b7d81b888ce09c6191394755ed1e809fb97fd70af2ee7eae8002c661562b0d0c296578af98acdfdb5274cb15825e021dc5345e869510c42c5837004ea343c6ca8123a10917cb4f29ec7b7cf8983c4d397774aa3da922dc5cf0b4a3fffb40a4b288d85e13590e788827d2dfd9be9e5452b99693bf26a28e0517e163e63f6654d48057cfa8c649d646c7e59fc3c5e99e50326dedccf10444b0cc0b8a804effa45369d28877c9276fdddf2a7fc30ae364c8094ba19a6e2013592ed890a9e52ae23c48464783a69da45fa9a730e6ab53490444e4592c446526f14986b4aeaf137dcf25227237ddc475f591cf69cb9fba894f16d210ce4e1aa3a582680198125497fe90be26d6082ab298561ea8efbace72620e3800d593a9d3f1816b66bb8b73222d22eab6958da5f2a855cb0932556bfcaa60b0ed14eac775bd6a4a0ff0f5c2f28051fb2152644527aec94d92072b6e9d602ac1df1c726c07271c10748bb43a763a06266b799e507c16c7ae3a4f0aec240baf25f4eee42c9babbcbf6399e1354082ac77122e6bf880b7b116cb3da2fe6f168e51f41362e06cb80798473a67f6a1b7d91c87fde38d0b18fd457efe80700c6be9244e05e05bbdedb4c151513f053ee7999efc691622b0db3683bb24ec01ea70c817ffadfe3eb1ca946c679c9999c815228984d6426d172d6013885a31122c2278d4aae7e047bd346e0364e0db3768f871edf6a0dad2ee154e11d33e56ea160bfc571ea2b27440026c476950cfc202fc5aa47116f295136573b34b9bc97453d1da5ac21a9dca660743fb37c2d176c49837f5eef6e5fd8f9b5c5929f6d24e055b5107469ae4c86d2f55fefe23ec69df757b0f781a6cceb53337abb860cad456399526b137d0154e585793135c0800a08746b486fa88489b000c76bb48224dad46bd5131f262fc44eeeeb1e28e2cef8ddf0df2ed7f8ca52ac9c391503eb823743cc4d8cd2ce9b4d356f572ab635f8b04236fc15a1dcc71bf66c6b5f0ad80d67f7080e9841d123812428861e976a41f568611ad56e0c52e99e17f4f74ffa4d2f6b8cceecc4ee2dbce50e6e85301afa92837c1d79942b23a3750a1d5f258262799c49ffb0075d3c09e3238a5af813facbac67711e6b927890ea1fd135224f7d84f2475da6d7714819566692c830d7617cc9b0209a45b4ddb549237eda1e11046226d13fb70bfb5ab56c96fe0669d1af98951a62c1e490faa9ca4cf430971669e979f8595e0c27a55792e01a2294459e38ffe7f2d151a2bf90dcac07b25000464fa976f4774a12f66f37e3bec431cc746e709e31761e997c4544113da6efce9be6b4435f5821c9ee38524f03cdbfebaabd69f8e8e1f5be2f27e2d48ebaaecffc6d1d8d9b046cc1ec0bf4420278b6fbe8da9b725956beff2b985bb4ec21fbcc2d001231067eb376ab14c3a770a9b4fa9cb9ffbafa69284ab1ed8edacd79a8cafe276fabd2e3d29ad6e1805a541c856580b5412b0a772fb3e5bb54bba9d8fdd49ea349222197b5d5834380532892b34a9cf291cf3112e80a4b5a41336386e980e24bdcc7f5b087520fdb30ede1a117ed8bec6aec6319a1a57573f0a97874325bbc3ae1e37e30af4245985cb367bf6fdcec42f4bf10dd8eedfd64c781938dd0dae96b5f2cbb8b67dcaabe9d3f182a5a8215bb8c71600729147d5e3aada0f4457b1e29c6f5506d2600e847b7c682feb1fb85b3a946a1c884ab1ec541a8a134d5a1d974bc13a8f7757ec98e3b86757763f77676caf24ed909cb83d3c7b3110ec17cd96c92a0aa41855656fd674dfc54cfce03ad9d3f60fac253001481fe8a4304eeb50543191de8d91ce340a9f68a373a8b5f90dec4b0c3e0646a3eace05739291deaa14358b29e4552e1fec2738af8510fb987a4154629558a84c23eb56eac89d3bf01696806b85aa3843296371ba563e1e057a7a5d8f6d3e18a1a278873cb44cd76ef3cb611cf6fae154143dec8e59c3d32e51a7f98e7d93d5eba8419f50584391c65e67f287913d6e5db806ee7d64e7fa2d6ccbf05a9313c4c8d2621fcbfc9a79839779da4353077a7b56ada08b84b6ebd560d07b38576c56521e743e1723dbc4f2537a3814e10e86404a92e155ad4163787cd4a8fd5356578146914c54913a8049ad49b7da4d8c74742c16d4d588f314ce073c316b0280a91a570a0bedb443fcd0d298caf2825528ecda85455c7f22163cb62ae43a3a3841594abffda99b531fa5c46ed286993eefbb81b3167b63569e7244007e15d02fe1d8a00741c47516e04f36592985fdfe67b477d9823ced940be0f203d7f1c4f065e099112695a10e9bd1dc26adbcd4d91773bed5604b538754d01ec291b8529cf9c819082b2c24151afda1fc72c0d07359dde142e12923728cbc5d555d832e58d073514c81214ecd4a6e25df989ca984349b6636998a87d6cfc2ab099acbf0bfbdef4ac60c38116af3b2e8891f36464dc9fa8d5e53f3d80ee740b47e9f71144265a64724110bbab7a659123cd1a069e13faa89498d01f12fc3b6ddd3b89595f4213f502ffea2c1ff7e96a844665b5a0d9543d43c40395db2286f922a20f763f959a8c6ea222955fd8be620ff8710b2f784871d83bd0c7ce8f75fc15a34e2f2bdedefa07d8be83067ff0c989ade4fcf095c677916759ebfbb715d84eee78bb6119bef4ed5bc51b941bd86962a2772b61314b7e30a74920b8b99745bae1c21644c8152e6733051dbe04ea67a50c91018060154e2a67644ce1d97410d33e174701e007e865a753b0d140ec49099b38487705e2704086813b3ba6544d70e05b3e0075c06531b17c80637434cd80b111731c4d02607233efc713a7c69fc0135de0cf9f2cd6aa874a502976d16014fedaf8bd9a77ff235f1d6ab9c8c3635bcf0fec40a3df6daaf97732b43d35caca6e015fc544f0bc9955cb0c404de6ce4dc926026dfa330604ade4e90940cb1e8fd652941feb88669900b4aa2bfca0a6170d6753c6fcf8ac3e6b371be212d8ea87da2f436015b5608e4a105755b6a422e50202ab669dcd1a269ef1686c3f2a35dd9801444c5a3f9e066d73dc7235e24b1dd119a135f8d271a15596c3dfd2c24329cad4f5160a670abe6d562e5c2069244345a1ef3cb3097134bcc869fd009d103560164265436ae201996e200d59ebef27c17b9afbfce22bac47c4539929273106b330ba956b800e6a40401832fe0e5b6c02fdf1d165f87fa3132575e2671f33057fc8394418e3781fc2748521a1e1fe9712a010aa45cb62998987d53c5a802738c79c028e4219348bba0cf4f87b2059ff2323dc99cb4b5f17ceb532c16d9e9a988f13a3e1f4316e7a2a8fe19d7c0f97efe0422f33bcf31abf2932706ea0ac21abe3de23a818931a2e83a7cfc376aa51a46dc7365d70c1e946b13cb84900a86d00aaa3733fcb2bfb2cb2cfef010651da1800af0ca4bcbcfc7ddfe3ec4e57ea4719d94bae334da5aeb4e09d1cefdef97b3a097d89ae8a9ab625d49ab55bcae44e6578954d7916778afdef70cac36b4e8d3e02179c41258dca0818b57fea4a0da5088d9227fa3bcb9c7871ba6e415a259b32a2a2812a4ed1519f36b653c8d01dfa6ab9e35e778d1b1aa4e153c4504bbe0f0c2eabe1719e16479f60c7a01750f2569e2682c7912e55479ecbc8428a3fc04e12d059df997f8d15ff5a65103a4d62c566b242bb3870f03bf4430ce97ca00a7b08570cc52cb8a96fa685945bdc5ec80e60a2d2211690d2020224b07fd24f7be9dd5010c16a24488211c5abe30159283c57ed03289c7ed8da8b3e5ae5f07e68689dff8818d83c9d8c5b3083e54b734ce9089e06ed5817ed7ec54b0e0000cd437ec1b6ce3c8eee288a83ceeeca4d3249dcc92bf805fb179d8a20f8874ac6a5d6fe18d775ae27b09a4eef1b3b2ec7ec13474f1148632d932b4e2b077b61e26578d4ed8fe135ad85a45a0bb5069f5c30aa5cd8720270d7dec9bdd546163ad0ab2898cdcb795b0bbcc85314eda3eb3b81240dd5cc13198ec5fb4b0f269075c116a4f7086a8c6ec50ca8eac256ed9b19e1b4413072bd34e3a64e4030a3463e7b827bc7a5c248471d892d3807250a00d00736d396ed6c49213fbe1bce550ffc7d356c0abb3ffccc5b5fcca76b453ab0ee6d14b516e8b53e7e0270d6ec8c988ee92efcc49580a0d2227729b33a6f7ea0217556c1e150ee0f683be660b1a3183e1c548d4950d5649fa16e70aa52cbf53e2e31d4fdbcc589862e369b3d19d1d9a1b1f019addc48131e0a28a459e51f94d84f86f302f5c30e33efa07082bda7196960fc74f3cd249bfe10282276655b41fc182016729f271c48cd55abfbe4f1e0cb6c85c06b4b0a30136f23e5c23502838824ba1091794df46abccdaf5998f32bd240d143834674a5568bc7c7a87d48f8659b14abcbdf1681c49c642b5fab4d40970af4f535ea90dec7095d6e14da9aee506c84a6b5129270276cd14f5bdda0ac38115c8a237256e58a2a985d75579421b5272bbdf77e5f697e57a2724dfe2cc8667afa7880cd5ad43b0f9f26f6e79cea17248fbf0eb46b30a4a21bc9b9e36e976ee32211d5f2e2573d1d0e89d58f040eeea82629435e5547f605717e4323d00c6ee8b140087bf28d4c26f20d9297fd6f9a3013d3acaf416755f83505d997762938585e2e86640e631ff630787b53bfedfe9c971adcfff585f0e588cbb5a016d18a1826a270d7035625b0609ad222cffce12def26907510739c35e077389d83a020da93c6dcfc0810f929f388074dea4dccc9bb92012320f0c837117936e77c555a2fcff78215a974c7dd76b4670d77a21d2a9ea1bce3bbbac33a31bc6a486870e7c45a38ed245b90157c3185e95618ed72cbb3615950a073f319f46725f9d1bb3c68ec3162ba7a9233900e10ef636633f5b807b5e6b5a98cacaa281aeb4c55d20ac8f00f71f59ac770298361b5bd66354b101b1c3ee34c19ffb5aaf679f8120c9b87a658b9e5305a024954dae9f6bde1aac9c153e1feb3cee83dcd5e6ad5430342c19da7edd7fd32a155770b4d6cf42003c276ba69586f1fc498d39542704f1d8dfb45d5ea7b93a0ef75f335683499ee4fdb47908988eaf5643a4694fe730f121c5c419144978f69f7743960e5aa439204480bc4edf9a8579428ef2d110a7ccfaba81ac987f9e7d594cbf99fcdd2072f4c4efecd2226749570ccc62bff21027e220c63bafd147c43183c0b1e056fe24a4f6d74bed0d63f6a998dd207de232982758b509d4435ac76249b47e8d3a8d6701074a4be48822dfbf59b8078ed610890629d0266153d827a997a496901dcc43d696832ad203eab5b2364b7e704ac9609de9760f0c104de2383b0f66d64c63a14924a311e6aa489369c909164a5d5a15171761c9b9c8507960e24f41e11cd44d335871331e9a76b0820367ba03c1371352cc0fde76d35b57b783c91aa08be24171e144b4dcd15046a4da7b235e7c5e7d3a6ff760edbe4e92c7831426d886a851ddc2db2c8b48d1a9a1ccfe2bd6103d8369bfcbf845bbdb93a0e160c29a2309770f5a0e67ce168c8ad52fbaecce8f05902423c28fce0b078a9d165c81feb8b65287d8c87db0434da89bb78f1602e4f66c1674a65df41992f992dc6b91d702c90d7e5bd507b446bd1e11dc527cb5e422406adb72257a05e14b499f045a9d3a4a96f7f839af52b0227a1219f41bf1353775ed13af8211515f1c9350ddc864dbbb550920f42862780a6181f524fedd3836fe28aabfca375e21e04ab0138214af888c2fbd23a0a440458e1b9a94b57fb3ce0cd8b721e65c6e8ac4b62b496b7d69efb1ade2d3662c0d467d36f748ebe19d780ceceb733c4fc5f468db65dfb98c51dc3b93d251e33f28b432900425dda432d0fc18d6fe4a37665c64b491658e0f2d052f7fa957ef640ee4abb44002ad2ff9d599aed7835c11b9b26340af74197093754667e80e6c9f93117f7a8877518e9cd89cdfc7358c773840922f360fd77295a15569f55fa102834cf1b6f1e7c407717774ad6c7ec097cee9d9d733521fe9e14a70e6cf94850160cfa3e0ce6ff28795a7f9c7bd27124f102828173a2da04e77f971d05aa331b85c9f280614cbd7abfb4ba7fb9d18cbf22f991ffe50d2e3f0e7e3252f25fe5a2832f6db9d47cf0c3def9a99e6c7f5ab35975ef4532ceaecb533343fa3d949f545acdd9b41c348874adb8fc54ae02a4c18f5a4d884dffdd45a099e446333a6aafcf9a8002ad6e776c621ae51b44639d2e78c79efacdec86f0685157432608e15c3903a109c9ed1d6f43be1bbc166c5720d02f3ff8039c785e7ae9e4bb9aad04b817dac84eba4dbc8511f849ecbda3592598e7d44e8b3927adaad370ba5bad6a40e3af042ee207befa60fc149ad20aa8a7fd8e4871af66ea4612ca4dbf71a96d8e23bb859776c8bdb1acdfa09ce31d7ee8f2386c657c2e2d50665aa9cb50cfdd2561689983c5d4ab3269675835ecb9ae0b33c995a1f945076943c4d157e8ece4e07607c8d1f30dd5fa630982843914042b24f443ebffdd80a2b84231e089ce7392c6f1ac32f8b2f92c2d1385c6b8d3b4e59c4dcd8c9a02ca23004191d6c87c1a2c96466bc2878eda3f728df61bb85b7e3fde9a2543b997fef35b090ca6bb92738934be6dc9bc6505997c8f3909e8dd77bdeaeb5f2be3b00b37b2294c60741d7a6929c9ee69b65024698c15f153cc30ee097bb10bab34744e8678ce8e84c7fa63ba61d367f8fa06bb88ac2a08761e6ebd4bd0da16f1ed95210613b969919375e656f7eebcbf8463c6063d125a49266a2bd44969296f3796f7ba9fe1e5c836a25c46d318d08c4b125821869f19ca563ec6cb31e715e0076a133980c5dd6765a4266a6feb878c8c7608749bfdeb787df57b83718585fda23090a68357d4142129333c902b903c1ece9772bedbc08ba53472f5bf4d5e327e621603e00e9c117949f4700fefd4a9a520b1427e3b06d1fcae0f104f4960181ae5349fdbe67a1449b3d69a22993dbe3178222a8f7c58368d39d86ea6cab4c09157605449cd8adb60a789c4aa27eff73d6ac9648b004182fbbe0f811b40afd15bc5183fae2ce3f799cfa38ade08805782c19a590673c7713b438a1857d45d559cf4c60d8fc2ee0d7b348d3fe746602dcbca45a6cc46390777530e3a450e57df376edde9652d7ecdf97aef43b36a2330bbcb373889bd812a8b4dc2614337340b1ad0dd395ed8d5af46956e813d44388f8713c7a7acd4d0494e1426bfb3b866b9cc0a656cc125841c972ab6c69fabf76f97b941eb3f60d4c0cfdf7283e517b0ede2f796c3ebe30200ddea9358ab4bd7225d6ef6f9d11de23a2e83d8bac99c80fd353c459abf812b360bc7e58381aeff941def6123235ab4f51c4cb6cdc05ca59296ab2ce483a9d5f61a3f29cdaa9767d6a9edadce514b22c54d1cdfc2bc1e5f6d34a39b578bca6fa36de80116d3562a5820c3d4c360064f5b8312d05d4bb9c00f9a0edd430884720752ab5fde1cc0a4d20609dcbbf06ff34b1cc96dc2ad5afb9ad951c705b0c60b41086aee1a90d2640919f9187080d8f0568d398a72a4de2b41ff6795256a85ccc221625c79f86be957a3c8c8abf1aba136b410048ba954e44c05eb7ed795ac3828eb5172e1e04e84f2ba13e29404a00871fe34a96563699d9767f8b244f209750ff8b22bde59f73e9a834b137a78f59353cf159e2703c48700d8cb4dfba6ec8bcfa78559eae6228c0bd5c9688d95511a3bfe49c8cb7bee5ea18beb2084ba6214e76a278df6436a42e811fec50427a7fe6cfd3444d353e05184b020f98b56d38b5a889a1ab976a2fbf43b2ef26e0f8c99e294bc1aec968108630acd43f8677e8472d56bbafc672be39fc3d95e70827ac72e75f406976ee42e268a0a70e1d9943bec0f73a0328b940753855987a65d96d6a8c0d37c64fc54e88f406f6d359a89f7f4a0604735de1bad7a142822c41b39ad906901f61e2484678705438cba7087333c84f42cd74c85bb16520d937366ef3a193d1484756e17f707fbea098e829a82bb6b2080a0f3be3ad7cfa0f7125f1f90dc57035f562c12255c24da16b431fc9656419925c110fa445553cebe33b11d73f1d9e6eee9bd47bd0fafc9cbe959014019a1f27c64fd9d624f51376fa08162eba56b4f07919dcf4b11d9f491a94816da0a718d9ec3e7e972e3ecd75e556d3f43b20080ab6b7e614202aae22d9b6ebfaf937f808596fda9870bf6d9f487bfabd42bafea7f3db98d334a594858718723540ccf4376b1fede601a2aba9ada89353e0d7440f3d30ca9d91bc6e74ebce65affde053ec58f67d7c29f0ab6601667ca8b80a7bc13682e32eaa863e8b89f0acf180f433679fe2543fed9a2fae6659038f59a78bbcc4e15eb1fe506e6e24dcfbdba125d147e01635bc5ba920aa3b96f3115b522552ee505bc1a95e93abc9763c929e53c048b459fe21a77a000fec5e0593facc5544a5cd6eae7abdbc61142a8e766ebe230a2a25fe8e0564b090ac065281364ec977a61667983046d14ace4fbbef4a1b6be8a129dd22f946c62cd798e249867d896fe5e2d217da1189ec9a632859bc656f71e89eaf886ffce838feb7d154cca95c5713a6068882a0b8530ed963ac67e88f0bd292bb663151ecaf24329b130b76143c1c227e652f7558012ca09a5a2ba45c3e4b337536de0ab9e6f0dbf909b7f899ff510c8a8699b4fa65ee651d76712611c111e5b6477fb641a5e80f65f90d041765dbe1f579c731041a8fc0ec8f8afa5fe48d1106483084104294197a73d0594ce138cdc2509e29616d5b9a1050b08e9417f601516aad900d143d3cdd5bf0474581a307a4ccaef468d722eb4fc9dcce094637b8ea8dc53cfbea2a9ee2a3ff24607a0bae0686a966a04eeb114f8ae59ac057dccc5225e0590a7e579d43894d704701439b2c2da70f983406ab82aa6e26c75e75b2bb0fd7923d3b45538b98ef123cd21d629b7aaf054f47de396512ab9b08c34813f3ea3f84b3b78adac07bf0c9f367698908d9abb406360ada7323a5edb7bdc719842c274e843dc3d4983cc7bd4584547ca8debf68f4a0055ba3e1bf7a5ad973810a0f0d6ab6eb2575c51c79521bd4bfdcae379e18c8bb1d65cf2e3cbf6e00dbfd0dbabe5a63fdf17f1480c18e8bc257eeb5a629dcad4356ebf186a25175716b708fa4818df0df5738e6530830ac667e8a5d4f935dfcf93548f9e347f770411da1330314abebe09832e63d7aff446a8c59aeb81a7083f794611d6ad824917397f2fe52e2ba21d2ca7eed3778c48ca87049110a2bf55561acdd65a030bfea313bcd2faeae4e1906bf74ee0e812c9458bc2af4525ef4c792496a4aa0886211209f9bcb8f6e82c6bb6ce91fb3255211e2bfb393606f58a9504f8b36d58f9156cc98bf9a6696e1cad9f7ce45a7f2e759ccbd952ff39f84dedbe476b63af2173fe6bdf6c045081265ca6fcfe7555c2b4ac59c7ee37d8b6b6c2ff1d43e640b365fda67a777546d5118784f232ac455a047aabe35b4ba363821ffd47bd47f403dcada91946da8bf6877c3d83d446663cc5a1e865ba3b52d2df2fc5f3841102774fd7acb65f378e6a73d42296db8b3e5ce174f0d222ab6499d583ca331f37950f4d8658806165a551102aabee957e38ddd9e099e74d724a878094b3b6ba91cf5f641ebf4a64fce723b44b60afa773221df12ab15fcebae183cb03e73f2f979490bcf4aef1f011f26748ef4d285c53a676d03d1fab5ba4e33b2d5a14a76f4d0abdcd7f5485b5cf00abb939c2f4e2b7ebae5a3e9625d50a808a2f4b61c01df2735895bb7167d3a2aba81d13ca0614eb41132321ee6bda6b919425f8db4337c614ba2c9815290013e13c9cf990de6aaf4f6b91a31abad6cddf4b9e5026ab068396a3595a2a6312ef7d8fa3a77db1e90bd6e85ce93122ae21ea0e1d58b92207da0cde0e9a3d649682c04809d2457903d4e53b65820db831b17ac797d9ee091d28c089a08b9aeea438002805ddfa87129ec19d10450445a78471ce71f9f5fc681ff862a4fa26b7775adcf2590f23c86f77b23a132c778ccbe875ebc23b6da468316ec09164bdbab432570eac2c7f94ed880cfc696089c625ec57d8d78d1485c708151880a2082520c79e6828509e518cdc4a783157c613b99883851743baee10e475bcc4e10ae2c1bdd4d8c426a070814f6f6ae8e61b720852dc67caeef615ec565704aa97d9f39de2aba5d4895533f1aba4422ab3f89f76f7df7a30d9d04d5739bc34513d5f8484938036a9fde3fe66f7cb3352e26ad2cce7376e90a5dc37228e556418395152c76cfbe5b44be807145c1e492db3659112cc667531bd616aeb162ab5be244c85f8b41b8d3d1d37f77e60085dafb27bf2d19f3588e9bc567651014ee6f320d0f4ce2c862ecbc0b3b3881bacff85da364ef4aadae1fc221cf1351db6e97f59751a5ad2513f1959a52a4374d83809768f11c5702ab1bd364d76a1f3209a0920fc8d1c78a6cf791a4e5b25a1c7542119bc03fabfe2280182bcbd1518f823cc3895bcbddc101f9eb56fb7763a486a082295c3b9322fa68eb7413036c678c8579d0b9e7ccb7b3c0592275cf79d6c24b46e5c26156b0a465800156c8651a1c394054f2051cdc754108e7a529a9f74bdf9ecc73688d565ca55ba53ba7fd0ae42608631ebd8284cc20df91f1c7432943c992d332bd6ef88ea0e13caac72fe848688f748d9a211cbd16406e87a78eae4b9ca2ede4b086bfbb12ea2dd843c89ceea8b0bb61a452a723196d872d43f649ecf0358a04e363edfac3bce7be4b2966a4598a78d868e78c3c86b30128c9ab2c923cac85c75cd2ae147011641f6c7038ce99edb547d0e5f017a4ddfb5e2c7a46c96925e98cdf0909cdac7ecff32c4deeaf089a3788757767b28c291eac8d061f54df138816d342d2f3eab3b5f33ec60aad887468b3bb1b2188407b906532e0c59e4f843e1bc3417cc862600d2d46febaaace29568569b2483ff73d776e2913b97062bc9f4cbfdc3a7017ff0975d6b0c85cf095ebfe98386b2a4846af18bdf291c6a282d646fc5774e667b2eb4add7fe1da37140e889dd0ad4fe1d0cde827f93d5fe6232816df8faaed6e24b6ea0e87e0fb22929bf399e688f84e2e06474c2ba43235776a1e30c6530ca9c73e9e86fbc00a57fc34c059d1b08447366cbc160e183abedb0b7085b053025f4f8465869427a83694a10ddfadb7634a4853b5aa768ccfac2bf5dcbaed13737729fc2105a0031ac6684e21e4446e568c1c73702bf04c092d2e18198ee1a2e700757ee1f2e41bc65626948641907e1756c4ec427d6fd30ba257ef5d3d041487fa891dbd1985bd98b1203c3729ec05efcd7b99c48d0035f59db62c5f058f47b585be0a20c2e6a880e0bf478275ad3bb2000d06574e31b27d811a2e782b0086868709425c7b410be284bcfef3bbcae1f0174b0ad95a53316c9f7095f1931c7979908cf709c90e8d3bd4c601ef9117e90ac17ee6fb546441e88b19940adcba83bcf7e9b25c2d1c4effb7d19e9dcb2de8748df2be85b6b6135975625cd60af6710bafa47c592882966140a4355ff5edca5061d60314f20b4bfa77ef47386b3f8daacbe7bcb07f9925c89fa714ef3803cebbc5b08f15383defe306e44f6f9815c3fc44a6d6324ef82b2d6137ad44690709f67f129aff57ea447ffc4e32d17e7c8f3e2bbc431992d163317a599499754ec3100bf0b3b587c9af10261b8948bdca989409f49ce6ec83dd2f20be54d139ef77b74f53a15a8695b78d04f25ba9862573051317b584882eb3812bb50c6b57c6c2a5bbb2fb0edd6a8726521bd5911116eaf2","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"cb5d1eeede9dffe6e6e7e53311d9b257"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
