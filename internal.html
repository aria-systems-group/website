<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"096dd1887924e3c5f4db90782547c00dacd0023ae666729cc0ddc8aef40ec6cb69343f3e078213699ccd5b348fedfc4beb9523c3e408b43f5ec500b6b6bf9bfb97c1f60ce45f633c91a605a43dd8432c98b17546a48a5735efe297d3c87f58e80cda497ce1b2acf61b385eff82c47411d9c9b1b1018a384d56acb9204e0215f9e21106e6482d7245753905c7ff775df66c9d8c7d95496538ab8b291229a449e1a3dba8db5418809f3f8e3c70ad2f1a2474a32afdcf6b69565f4568ced77f4d3a54a0e096d63cd6a15ab6541cf41236552aadd55e03c09cad53ad2db1dbce983094bda217ba39ffb0dee0755b12895cb2eacbcbc160b89c866f63ad056de1b8094ae84cc9debbdbe1d7abb4e0b420f3bbf50b8a1e62e068ae72299e9256c9e381883af5594d683e485f562eedf6e6f56ecb3b011bdf9518affc88d161b3dc40f42d993d3923a27071f378dad4d50f3cc7ae0a3421ae67f30bc562cf7a4408ce58cc84c9ad3ee73a7af09a22771667cc6f5f88bf6d2387801824e94a72f0036cda8cec382096a5e45926100e8d3df8054f8f5cfcd820d25e73696fba57d2e5b2d9fe7e302785a2e36281805a500dc627c5bd12d1e05df032bb8717ca096fb4485658aaaed9055e8d2855e6e5f42e2d048e7632f80cb7f367af16a5edf4d3c58312570cf43bb7aa833ab6b3a695c7e0db74e10c1b44e6f9317d3ea6bdb34bfde5e904725c198d67869f385fb3da52e49358f780d7364c90b0383f74c81b51daa34f1a32d3c556f83f806f0e5174c7038bd3e2c8a9b77ce92efca4a3bfd7aeed71f4fc1f34cfaeb18d59a51efbf39b7af3d6eb1592a3573a1743b861516cd57f73facb109f77ea213711b6bf260d86ddf9e2b389ea37b88e910dd9f255d51aa70176cbdf109ef5de11be147d19d8c6f1899d544e6002412da6b4ff4602669de9fca2c39c5f4fd408f4b6f595020f4d1991c9d6b3711170c655bc270492f1c48c35b502bf9da369c2bc1d71d374d90c092f968cfdfc859f9d77c32f24ca972d82074ff23981b86d4f0ffc1edd9b51d1f8b32cdbf499d7b74cf57192f5b6c00464460cb73869282ef46ab45f526f48386b7233a5e041ccb09ec9cb39ebbaaea44275f20d84d7c2b5a9a81f8b401d8a710b9a0ed3ca6da96c10bea3eba70da3e90a36a42482760e2bc625b9de7e6cbb730befe47af585d540b8ec659fdfdafb835880d5aa731f692b1e28877ff52d95bf1a3bcaffa5cf90b04546f38e59fbbc7cf94d431e4a73bf8db6aa92fae0d136b76936edf251862fbe109effc9a2af853cb55db9e09871fd9a411ef1b13e1b447a73f846849932b8b22f6fd5db2c34d97b7e9a2208f9c822c1c38f6b60bc0f4b5f19aa1e0406afd2e3a0999f018671506bea8914e42e097511295c53b31f20a247ffe3b671a8c0fd07cab91f92f7441f17a9438e29cedf208ad9e51ed6a599f0c6224be9d5a075f9407bd16c5c25d5e694c41e9807b4d941d8b17864cd4efd133c6c1148c64d056f1d3c8b6153771ed7911d0b7207fc45c7f30f3289641f0bf5e8723af4ac8a45b717f6b511528969ad4c76509886892e58e6cecc48df237d4df38438ce33ecdebd37ec03999ec49efbc5dc7d67c2c55357e59072e1cfdc2b06cd0a5ebdcc5bdc01ef5bb2f09b4259478a0be8804a83034a1994522b81d111337900c7d58ba40926ded21b42babb6f064b1bd5da40e7e50f3c0fd1d2f612e0a4b145729449b32e7d3bd8cfef43306176c7e48a09a2ada7c503255c4bbf7cb1eb6b22d935295c09ab7a28c432072e759320f4c93795dcbb110a72e9c988414a35371f2b77df4bab302271ede89f246593ba7dde9a0eb1635507e8faa4c7fd2b3ca813bbfb65b4b2d1f53f09cbe6a35891117c41fe82172fe1b1c5b7562f62d4d9e544d7bca22fe8d8b3f24012fc72acaf5d5af7f2681d93ec3e7eff823f5b999aefadfad9770b0a46cf1c8ce30222264747a13f176a0fd043a9c06672daf48ae51670ced7bcc2a8e97a1e1f77e061e11779011fc5fd063f8d501522c0e8e0d35414c78a84a2df341c8c375a1cd35b69bcd1330ca163d923d667ae739381e1419326bc71aa417f03379beff22919bbbdae758f5e1021f041cfee4afb01471a2bffa7f8bc4e9da59fb505123643ba3cdd28474a31db74634a957bdded1b922d65028021d1505d433ebb46047ea03dc0ec9f9de3be4ef0f1580b94a521a44c71a798714c3422c8d87419d7f38d30990659ff4d6937c60c75381a735398e1b117c981cb2a406a06140025a4619f79d3ac98b45769b5149e8523576df2a1c5b9bc3517ba3148b9428a482391249d360c8cc54316de89399009ec30eba39049c23dba359bdd14d26e1d1e77a9ce65a690b1dc0c3f50bb310c40198244bd71b3c47ba49ed713343b3f375de1c10be7e5193f9eb8339cbe049e16914b49b6793a72539252a8ecc9908ebde70b5bbe1f81a4ce05d28001e2e1d0c68aa600f08e319a70e7a7be1f7b2dcffecbc3aab4202c9b96244eeb5467f7581a02130073efee35b2ffa74bcdc9fc806692dda97f37f28b2aa50095056a87a1489ffef23633eeb6406827aa6be9c27c863e83bc18c2f63307f393a078a11c0e3be8edfa4c583cc5d6a9a3f838a8ef4284bd6d8e05aef3334f36adfa91b68d8efbba5315612a345de3e1e021110e3a7e8d0c8c85834b58e886821d6d3c95ef1072a50d23adfa4d4868c4f748b48968e1e3e4238f491d944ea31c0ab5c5b3a9d69fe7ed92b46aa960908f224b5798db23b1955eef9ed7b83bb8e88bb5cbf380b8e173f1fc27cf2b099dde1fa8f35ca9dd2484e02ad1c6e9821c19a6542251d65491fc089f67522421747ae73e32464f1e0d2f08339aab7659a6f28b708febb87bfa7e8a5390d57cb3c0480ea65f80a4e1117ad86dcdbfd179b5e685c0f311d182f62c5849a09b4df9b6c6bc82dd9b7f1f1755407f0e922ff0588f21cd26798cd6b91dd064425ecd85ae8659c59426b3cdf0266154235954bb3bcef1c30cbada1bc32c35b7b3c125eeefe71323335c38f70a83c14d3adb8e616cb01301c5c64f2efaf49baeb429f46b5709b35ec19e8f8e00686992850b107af672bcdd37d41f51f488a02255cf99921d2615e8f2e646ad0b6018a4528b038376b198f633e45c40fbfbbf13c071a12740b5fbc7813fc37122d2247b10cb32dc1f7cda9975af6ea6043a848b9591d8b25eeaddafc989df19738ff973acc2ff4ae078cdc0fc333a970ff9ce5ee34f24ff11dd1caea29fb45a045f553e182ce8f0d6f0dcd5e7f2c03b732e31a0cb12b8f3c297bdded5bc8f3ae4b654c25561842ac683ffe5a464f69be9134f82f7f6987eccbdf88984677a74794937ce638efd1c372a85ca6451ffac20c1eab3aaed0c75c862a8d675fb2d59adb422173f072dff6c3783774e057bdf948221a0ecdcbc8355fd0aa75ab4b0dfc0ffef73b254d9d3fc1bf606b1945d3dae89ebc472b6872ea40ea1c2f0afd812c50ee3157c268f1bef12ed6ad70f368bb7bf095f003fa5b16e376c07c784f623cb15361e5414fa8ec51cb83a77799f447744e51f3977110a295dd71fc5b0baf41c59f8c9f4283fc5f1c1bc11a89cbbfa0c499968fe296c9da1c5152db40c7ca8131f273456121a65613fca3c9cdc2ca3f17c576c2762910ddaad399753ff973b7dd501345155244c3c7fde403b945bf5d7b033c84fcdfc600e1b1ab623757ec85e02b0245e4be820c217b870f346cc5dfc195e23025a7b7a1af6e141d72840c22ca9fd261ff45eccf0a5d14c9b7160aef3421691b5615a3cb9d8a2d95cca36a97208043944584b7f5a55f1d8aad1ea05425ffc47823c3132459199de5a65001151986ed0cbce3a068c2d99f023e6e6b8e1d43fa147658bd6272922576a1344cdbc88dfe954510732df7e56471da44c5d0933f01baf0695b3200427bcd5dbbdb424a212b3e6ad20bdf98b79cc64042ca40bf1513e09bc38084cbe44329f6b11904627d2aed3a820c382aa5b84be377d83052bb1e86b067571b8613c9c50318df3f551d270bcdcbbb502fd29d841bced0e297f3af155e0fd934818c964a05d4f2d8b81d9100ae5b18651e8753532fc41cabc97fa25b1f17e61595e1f35250e4685e2be29ff9f2e0ee00f824b5719e5b5c8b71d918a41eb4f42296ff6f7a8906a92aadd2f9e0e948c3140b186598197a73c803a47a0500dd9cd93f8ecf88b40d98c4e6c70645e9b0aa7be2f053b62034b2595cf89a4b2adc94061377e75f611e2b365e5fca08bec81ef7a0b69e9134f7760974a5a8d05ba4448372514f49eea267a91fc344e5130d5c613172601ea451f68e6131cf61531568712839449cadae908d869b5e4027be43aea1fbc19836a8eb47e7179bb31cb9f788c4176f1c9d749e046af64e7d52ef4f301042f39c3e4333635981552936a70688780ac65f4dadc6dc9ec4a6f12bc776bdcd14b08f2cb67863218aef1d8a4bb9914c1fa9421a267a0e284dc96cc87e2c62abeed1e843cf471783a260267aeec93b5dfd9dbe352b75827ec56bec736b2d8e3a8dfdc65b62dd10e54e3331f9e04efc0d6b7508788c06224672a6dc154c135721aee87571040ecb074daace9dfdc8bc497762945bc4207afa5543202b71bb71c2fc27d8cd6677bbcdf06730eb40a556fb995bce527b7694f0f42a092bba146e4f1cad13f26453aad562a6cd84320a7f9430cc9c1b3ffd3b316e0643309399adc2986ec03db8e79cc93e237a14cecc093de5ca221298110784f1f0d9de6d7e22daa497c9e4876b01d3075810b73648064411a6453c1e8796e3e448c12f4ab7a6eaacc65ead0c62c9f0110f972877e53b88d62eef51e3ad4a873f9f47fb24a42b74866690adb13a8818401211a9d86462422e3627c6a82a49f3674fdab421cf5c8c7be8de5cbac61d64c94de64df52de62d8ac5c57bb6d7f024a7e6da1c642287c2d67819fb77fc6f71d3a9a7698ff9ad9cd50e04ee2f620453f2409f5f4e235386bc19bef67ba175dc1cc37b0e79cc633e301ef99d296bf1a4d730580b1d379df60102cc8c018d96a57eeecd738c8450ec594555df40cc26d1401387c198d0cb76d6ee3b15d04cae0b0401c173340411a059e3831eb6779c8e05d50dbb308ebe73daf167c768878c64ca8c005c145a884c311885dd0c6e15d7261db0a3805f31a2d56a175a3afcbf603569e36d68e9c3cbaab2f4f59e06a8ef8b032ccd463cd32b33e16b3800fa4ee97e129a1c66c5a1cc4dd43387b9ba3d7567a7ce95683c4a50461cae7e93868251cd69dd0b3ed61c837358de2b7fbb086b1f7334e0fac596225374aaad95b86e12554323f4f8589e4ddc9a7b6def8bb28b75f9962e27a661aff9942b0ef7f921a03f3547409caae7c815ee8b21723367c13f79683a9d69ac5248a8b1a3b412ab23d8f6ec9e329c040c0a8c35e26733a3f38a1cadee988b0a680dca01369d3d2ec9ccee330750672f8c2cb1fb8568f345465b80b8c46b4c9107088fd18ebb89f7239f18e7ef580070dc7bf48cad2785f074c248045f1a4324046c36d1b2006ca35c759eb063b1af7d4f7aa00d292f8680fb668922e5b9213017f9c8acd2645867c3438f6be973b242af22810507465806ed0627b56d2921278b671f84bce968c91e206c94e61052d7a0a29ee75a3fe7bbdc4ba7790a3c89fdbc11ee7655bc50a2fdf87b4e2ac7428dda6c1d06b759c1336e2303563206089fa12c2ef9e258d71d0c0f5fad37541bc2c2964d23d66e80d00a9d6919a088b9d73085fd7beee75709b66a73f89cbb4f94c63e35177c0a60ae2827044c5c89bbb8db58333c2c7c1425b02c12ab8efe31c613a7bc0e55a5969242814b15ddaf8ddc83a5b8c5e71a64bf3c2df00e06b94897533720e329b2093c69f091a044d8a10a446487096493ffca694d5a285062df9a564abf9cfca7dc531d7b31216b8860c216d07c75e99523f18d08edd7f7ca14ca071319a911202de31f192aa739153eb4da83cba4c00dc5492c943d192f5dc55f367ec1b87dc4c8ae229ed8463ac521919a44135f3f194a08335ddb212c29c023c3e7ba79f41d5fb66a92f379e674ae214f8d48f153f0386f0cebf73de2c5292a4b8974041f7d2209d6adb883ec6e1ad24410e3abba3ba097696abfa647263d30a081712eeade159b04736a88631b34c24355231bcf0ec3472d4b0e15b1dcea83968423c66772f930df46b2d7c6217c15e04357f6315396f4df16b71b258be070a4ddd873ea9f802782725363ab1e46c6894112b5f11a94807cb1e5cc1f94cae8832b096da07bf861be5c87f380371e954553ed0fa122c24a858c083ef0ba2b66795fe275862e82d4340f5038b824e2027c7fd4cfbc7fcccec2832734743fa668d646b0db586b9f52642b476aa1ee40f4dc76b95c451e5568d44e4280d8db85f1fe00a1d7c47d322f4fab715011486b42a077fbcd51b1c211db77e754e60078bce3ea21fa9441f8fdf3dfcd90c6f6a31198524a05aec26e31dee4c50789096f37a62d35196e4fd80ae82899a5bde51db30a305db21645c87cac6ebae6fc33e252b5576fd5b31e84dcad9fc999c9ad3a7224b6a61628c9ce14f0880c20318c711185bc91f797f648f1bd8ff278f282a2cc6990dc8f195ad5184cb431db351656bd4dfa99e0d9d7e667aa829d934de65afa3e1657f550c3c6bb7900639fc2c18d1d4cd16c71041051477dd17fe76796b4a20b755f79917db5c76db5398dcbee59bcf22a60c3d6edbd517189c0c75ded60912c91e57fb36fa91123f69a8a046b80f6f502c7aa159e45a3037d220655d99522e54c0ec814742afbc961556687497e9153c653474b1006ddea5d2b1bd84788d7f189242d87d9b74444ae284f9c7d492e2b3cce4b234b67c2b8fa7e707a2c381191b4ff00bc5c7617fd762d2aaa10a7ebf7224301fdf1fbb99cc4df05a2159a1682bb441cca2d8e71b2d40330a51d61756c913158deed562c563fab120bc73bb7b391b239a50ec23624c41d428443149e21172c5f49805aaf3875fd16a932a06168ce967452690bdc4f5b1e8c5f4ff45c27d5d09fe7c0cd15faa99c914f9e59179246ad8ffc8e2dd0fe9dd657a5b4f70ffcad3da76b9f18d2f9bedfd37a6c6eb503edb459f561f42f3ecc4eb5242a095fb9ace09e25e2ea03d2e78c2961c7c5b555360021ce315ff76a00f9063550b730bc75e898c6bb9bb0d9d065e84b6d01626c959f28e441056c4d58eada40d66bfb42ecdb9450b7e2d85d77dcffa7ba269f7ef134c0d4aa96e187c83c559f688f047e38d1fe3c3e7e6ab109bc0783139d9aef8c450d88e13313b6161cc84b1ded7d3b8a0675401c54a47ff365c5df3c031d3100026317f9fe9e27978e14dc4fe532aee55bdca547787738007c9612f8b11bb18d07189949aaeec18c0521f6b5bca1abe90d6217271abc2f6290920a75b89c4760f47e6f1cd3a7a48881ed6fbdf45c7d50466cae99a6b807e088b82e121c19216574be2a3e618a91b6946f46b8330d83095d2c5b43ac6838d0ecf315aee4c731a778a53bdba39d253561f2e2dbf123b82e6507111cb3a3b783677fb415508b7c6ce114eb2044c9e76ed8e437f6c478df670386922d764bc9b5dbf2a77bb150aa52177e9555ce764dc39a2e16ed434cd28cd3e61c12169713a8f64a8cffc1f0f196df09a39e7e2f94eec5429d5166bcaffb298cc12e8370ea524300a12e5bdae150fe15f83a121662448f045334e8f75da5ab785117555bcca4b57b8cf60b832e4ee61b14361631072087d2db15ace2b225a727efab736db573eec48a6c9b14514862cdebbb18c0f2406f82d979dd248add6645b33d4bb4b325d81946cc18c1a3aea011901907e6b2d0acfe5e60dfe691ccb1c8b98b7bdad9f39d93a6810d3285973302185c738ac33bda5666fa7f6f7fe3e2d834c0dfb6a2d79f4f14e852eb900ed25b3a99f10a784a7ff1b7a09d3edd3d656c4c592f07800f9c6e9d2732ac203c5bccee0691bb13a3f4ef4dabada12ee20dd0b72f524751e8947f8a0ffb4056e19edaf3d0e9858cf1c02c007d29e6cfc3b24cbf0be69156fc99134be9166c512a096c4dc3acee3865f1419e759af0e136e0aa312b78374145378cb9e3497ac29e0e92d0dd27b64d5c75b8f56646e9fdc2933b80a34cacc90b3b675e1441acd90d4a6ff3c5a7e012611026d252880debf71add3539b0b87552eb924df728f59ae387fc54b56d5027d615fbc4f582641353e09d7c874cecbd429da84b671d33fa4f6f8d40fec25602377d3f764dbd82094b75a2a8da411273c8725b4cbf161f53dbfe3e026989610795b2cb441cb924c5953bfb8d0bc8213a8109244b9b78a6a8789c24c715cb3e01fe9893e9fb4707d1fd44a8a25023ccb89162e80fd1f06f904d617a49b13cd05200e119b10ad3d8db8811be5d0a0d3149a68f41d9ba9c04e05a4e01d903c0c6f7891ccf24f6d13bb0e064948b95dc1212dc5e68306a611a290f8855bfa2dd617920b78499f2aecc94a0c816f8cae6cd4ededa18a537a9bce7af703a0eb21daa67d597cd7d7feff07b66fccb3da749a971f05da73ad9af34247197fc0fdaadfc5a4a2bb6560cafc70ccda7533c31e07d7d79718daed46018cd9ae80dd1dc095eff9da0227e8d3b41fcd2b45abab0586babec8c951afaa0b98b992405557893df574f9dbdddaffdb28907dc12136fbb17d2876c0a7271a79bfba33e735ae7b50d219cf5b109f58b0f8e41925e9a13b836c6d35efb916054ed4a1aa056e9fcb448b985367cf5cfea631cee7a6f0335db6745eda2deafa75d60950c534542f21913dde59cdad9b210d59d62e3eac43c21b34e70ab8588439a795cc8f860c08d5288ae457f0155053d33942e1b44e2195e3aaecd567aa6158e5055f23a8a223c5934e71b55919cd4b760729a573216f4d143e47634336d761a040f015b81a24b84d5234174dccf8f84e7b7f7323445784db3e83f7fe70bf7e2a36cfb4ca40979509d3a216977bc733fc759a27fa72302099edafecdb0a386a5d323ccefa1f56c16492752a7639c25a8bf465c549b83c0152112b297527b217ed6776f8597a40f4bf60885fdf6a96f28d1ef6c40e73738a1016461e77accd7dc361eaa4b90195d819f9252a2bd3d91df3791a647a18beb1fa7a4ffe45bf287873d205a3b675903614deb32c88b58a3f6b9c5e1a187cd9a0e13f1b4477fff79b4ef68cb226f7aaafa9341061b91b278d8f34daabc5bc1a13bfe3e22dd63cdd29f327e15274848ec07f0d34f688d0e390d67045e4ce2b50acf14e622a9b3a4904294585156b8936cd61f73ac902b5e0574a670ebedac0c9dbdf14b1d28cb7a378857993f80066c9ec9c52c60a922c4aabdb9415da79a488154d032800ec72bec1cc0acdfc97541d763101b7193b228a92b2d055e9c816b0ac153fc7a09a20f64df05d8a3aa11c23ef8d252908ac718d5ca50fbf6f4fea5d034b45bd326888b4ded1584051d75be3163ac8518ab6db58dc160f167276ea23410189ddf52516ab2ed8db7385bc0301e843cddd7a20fe869e8f5e6d5a7493b9f1fb5718c241f27639e41e1e22b45786696db9fb1e50f4311c6708015f525a37ad0892b9e41514b119e556b54c29396958d3f828da43dfbe9b0cdc9cdbbc8001eefe5a95262120fce927a1aeba14fd0a97a5ed1b53bc09eb0a5e5d5d86b68dde799ec1c75428bdb7c4d66897c50a72a001ee0195e4634838c29f0018ccfbadecb7dd9b70d2e11e35a84f41f4e93aa3924df70215187a7bcf3c3f769d93bdeefe43acfed2628aa1cbae7eb67fd3d86d234bec0aff6aafe2568b1648d6f45a97cac8f71186b26880eae5267a0ee74b80e689b54875edb396cf7a208d23f4608a4ff6e0b494565f41c412c68d8be84ea7d8585e3a35b3b8f76a01384cf0ef386cf0df14f0fff933a783be018e86992f69eabc70b5b775e609254f85ff69b655fa0c6193f599c97e506a4f8d23591778ce8ddcafebe873410dfee0f06037bcbffff0c0c443c9d22534faa306aa23372200585f6a9adff44106e022b8cdfc3c833506b879ad106c0a0435a9ee6fd1cdda25201b56e220e17804119ae5a4059ab9a3df61241ff5a48a31ccfc838091e9503e5a4a1ee4e92aef5f44251182a8a9af658a3b3ac2d0628a0d9d6717d3aafb8f8bfe0b780cc6ec64578977ce4f13aa27776d2fbcce67400686b6948811af8a0a661687de259a14bf88751e00ffd1ab975b3f0a1264ead8653f1069842a949f4cbe8ca8833c8539d37fa3f4575fdf7761bb297702193cba82e47b0943306b06334e9e912b3c997e408671708b11893f50d384b31d77688ba25d8ccb07d4f055db4788db3e09d58c9b043c26edc84ac66c729fab1360f326c5e3dee0a67b9d4b1ce943807266734d3e7428536cc2e1fc642bb499a6c846ae375735f1644c985856c5050c9df00297f82a59c21e03ead679e02eab40263c80b803c8fd6a4302bdee8b1577e1e4ec217f91b6a597d91af4453b50d5d01850104bc99d87b1dcd4531bb4ea3d33c98b1570cf52a686cf6360b79064855719ca68b97058829fb6fa41923a4890a7e18c0703a1c951631b51eb7f58b890a30bc963ba11d8434b3346325f0c16e4c679e65bf343d7c23d27e9665e3c1544b3b3e0ab7cc9e72a1f0842cb55bd7e08df314959fd514ef41402aaf6ea6cc1d231a4658ed124e3d9790c9d50b6482b9e84f2f0f84663fb65bd577b66bb100d3f016eaf3c252f29b7d9fac0942d4b351346ddf06196c5dff1aa22cffe4570dee4cf38ab184de25a7960dbad639412a601fdc6af34b18e3c7b30a2288d48aadbc918e9688deb723d635d8504cfcbd7637c77db3307dca20e37aa11ed64031553145bfd6fcae39348f6cae5e1a1db9238b3246ba3a64b08bacdc4d0381bd6e830a0a993bf7ea7b705959f5e552a31cb8dc245740054e4b1af415037a5b58960d0929823790f0f782f2ddda551690ab58a07193759e10b95ae2c6ace19c4a79651e50395d60e49aea72e82bfaee1f9d0d59c0e1c25f42721679a124a8329683d075b009f1a239e52ce973484880f908619051a93411d80fe33dba37516aa75a287f947a899e09cee1542744412d449bc7d64ec64130c0c72d855f33a1efa071f0876abc3df64f9797f77249b3ec989bb8b8b3a9a77b1459e5b72d32988663637b711eb3749774a812e038cd3e955a63116a6fd8f38257f2447ff2535a507c23ba7ee7669679caf95cf67b5a8ef2fad193ebdcc7230a1088f80114efb44067333d4434647546c81edebe8d9f5dd5c7176507941959e4baef1675b2f7196a8353f64edc347b8d30e012abfe3760e19dcd11414b5d4fa513c6cf72ef0f1a26de87dfc874db853fb7fdaf4b07ce5a375719fd30ec6328c37f165602450c61b455ffbc0b8280bb3ddca7f18282b7ea679e0a5b582c05b3f2ac7ed1142bf4f13131f3cc589375e5988db1380da54c8000c2568e2b12b94192bc611a3aeab147259c6e07a35309bed51ae4830808db9918b4e1c32cb6ba1640d14d1c43409ba1b6af2eb71bb98a8c2caac051e8f855d5c2e7f8bc9805516203866dd1a530efb1d31ed8d6a83da7f26afde4c6368804f7a67f22788e79e8552cc067c15e99290d82652a94648f5a91154788b5305b7b6ab1c083c27dca65462d72be7d1000101675ead4a75fd96bf015d531a18aa95d35cbc8119e261cbdd2e39e78555d2820fcf89076e9b491f93b71d0c1b3e779117f86ef3dd5f15d9b8ed40f6200931980f8c7b9ebd5216fce3abadca77a6b6492356c21ebaf7f85bb88db7af48c29155e934374b34b2875d506a683e485f42689cf0d546651e8d7bf20ff0392a01586b5dd2e783379f0253b266056a2bdc3e583ab859b512fc2b4f9a61f7061bc906e7e0b876c40d993e40a375c2b9b624549123b710122192e18bdfdeb1c64888528ca874c90aab9af3cfc20732ffe0807185cbead588c8aa6209bf8d3295a54f42126802fb4baf86abbb8bd0843271c5b8fd508fe1e687e0ffab2f591ff6949e6920e156cabb1f60375c7a8c648ae6455e16089b9d9bcab59a99ab59ebfb8dae9b5984797f693f266dbc4f9993010971306d90110fe392094a702b9c5021e92150b7ae692245ea17cdf1ec9c1a8ba3210a4f1e7fb6e4ab12e74103d6563ccd4562210693047fa8ab785ecf632cf8113fe9d65f459216bdd618437f464e6f7b5bcc0e147d4170f8bb3227bb98541647c12d595bb6e70ce741f568892c2f075ad3767b6700a4329f4154ac26a8b19646993013382ed4da31002651de60926d888044a56bbce8b6864034652fbec66b2f0e929c8f2bd0c41927b07a1505b38a6e67acb305b66484eaa8dde0e5080c78acf5ec6d139e003905571b7690ffe2da42904ce256136817938f8ed3d74538765f5fea7e23f261fbcae76a0d3da7b83148fe32beec9ad211872f11676b0864431bd9249aee100e60ca3f87ea326f18a18bd3fb9386f05af017bf7a5f830693ba9257fec1ef13a87ba80f7c36d8888be4048cdf0439fcf0b840305d6f5ab958e382b4a0cb8b9a13d126777cbf80a5ba363017585c84df7a70489313cbc38742b36396d5deea6502d4667a7e9454b5cac5b6fd0cb6c598825813a0ae3e7204936a46715e34a05adf76eea1a352f442222cc72a7edd2ae4d144b3102dedb27c22e5fd68df42d849d45bf4b7f453b8cfecefb7d172373ad4cd69eda4bc89f3eda6ecc3df6ecfc4362ea5e5398694bfe4c1c848fd288edd42e4d31beab27826cd896df802260c03e470018cbff0f3c87fabf4998416237e60d35b13e38db4fb8ae7abb73074c9ed50c70e18dfe85e20c306683eb1cc279d73f4bd79ecff014fc3f716f9b0d032720f8856e43955ce003c219bbc594cd2d2aad2a9533faa00dde196863ec6d19e459da1a664924b1870c584664ce726c69fc2cf7290e743c0e51e22c9fe123ecd568fb655493150be55ea2df370b711308190b95400e7a89d84ac51c912c512f5647eab481f72320a99c0edda47aa4a948a56bd516d08dcb6de35200db0d005897b84326e8733f27cfc507114dc41008d21176a5ccf59f80253eaef60ecd0b6fd8b1e0f9f44a12b6d300449aba12e144c14fc49a4861d019a3fb43a49d6b321a175e631758c29056568dccdb30142c2a0bda13cca6909e875c4720bddead83058e55f6910cd5154550a4c3ee006006f8a3ff4cdca0ab59c5a299ea4a4775403c3ac0fb15fbe82da535abe2de8b516f72574359b250abc43cfc4160292d2e406d0fb194dc3e7feae6443f16c6860cc179beedd92726bdc203e8bab1d8114b8fe9c4a9ad0c789de3d27ff68fd83eaaaf26fb6990b4e60dbfefd7db62989b78cda85a01ed70da92519737b9dc98721437b82431ba345a43d4b1b19cd6fc5d109e210ec3251f0382d192b87e037d755b1441c8f5ffa07c32059c1c14b6226b9970a457a0732e8b72a6d196cc21f5b18887c3f502d90b9122746950e5186b11eec950d955f4c390a749430f16bc3a4dfeafd8b174676c2cbb704fe9f27da11374fb899c0613c98551b2c3d14082e5c19f67e484073c4d845c91eb0f3d8fd59e9c2738a89504a35896a1bce17209fa90575dd35c8696f7fad5e14e91dc3fb725f6b1eea90979f7cd5c96bb12b9e22b64c06f9e3ec96728c43e81630171e1aa73926e70cae0c5d58f53bb1c0a8ea61e8311aad07914e96fea2ce580bcee88ea0e7213521362c19106cbe42752271b8e3deecc0a3f4d0e3a1134c7bd5997aa244173569a2140ea20f3e491d494dd23c66dbef0c18ab09bc7e9db1d9477895ed389322b133296db455ec5c2d17813a44a16123eaeadffba77a7fc93d3a563e31063d189eb65c814375f8e8555525c882b7ff4506c1a9dd09a585d30f9215bf1744ae0f374ef28add3a9f89caad7f6e9c8e8c7bbba99a8cb2e9d34ed2763c5ea64cf57e7864f26706e4baff6847a8223e3992a871d50ac098f9013b4d0dd7d3e592552a99f427ce05bdeffaebf1251181976a33517d1a49965704b997e97b0cff4c7983fe30854d9689da2515bedb1a0c728d708492498c3c86635d1288d3a5d6a68660959d3a386fae433662d0cb61eff6953b3abfe2328c5d637196133fbc5bed0c5f5d5ffe6934f0072e8bd8eacb04590b4adab0fe5abfad7b5ceee8ae33183dbad9d3a284972e34a9f881ce8ffd7d1ecf6f278a58ccce450ab3b3a7ec7599fb19dbdd45b16a2908e44a2055e5561af69f0ed33106c0afff786e76b6c3b1a0737adb7fc159a8f1d1942f176eea139d09da74c8605d629fbd5eae125ba88b3e7f4a15c9ae442a0fb614b8c1959a0e0ae79a2fadd9f9ced6cbe2eab415499d5523f67b2b6454d57360e7d6f28d81855f29490e122daedebcb4ba94a34135a6eafe350fc5fe2836616f177a57cc22181b6c516706e0cb220f07ff9840acf97f8b985eb218e2a15a9a50bbd765d258795e2ae1e9ffa35e5a75d0bcc3838db0ef7269c88fdb08a267598d4cbfcad42357c16f0bca9aa1c81dd19aee808f1cea28e3d75cefc50f9f6fc0fb87bebb96fffcac45ca6aed4a237952994fed0f2f410c2d7825b25c9b168bf7a50f7e5fd19b6ef7911edd84ec6db6d42396436e7e3dadd208ecb16d59233a6d05e4ee65cf866e733e8a6727d6de39f110102a71a16ee111e8b3db64dd9483391c99469c3131d34c93065d9e6c4f95865a5644520d7c690862a59433564f16fd377e1e51fab09ba5675b360837f3c6a8c3caa93b2508c9160d2df94ee216c454ccb71e4c1c59939b4b95be46387a5c3a46b4e84820575c029fa2a4c008f509ed8f557863909a0e8c1ffba88cf2d3d488147dd591d64bfdae10ac1c17421ab96a9fa2903f90f78fa655cabf7e50730e3fe6e0c44449598393e284c7446ae82c84d0702be28fb595ed32440ffddf69876c6d92d3cbdc27a3cf7fbf1490378ce3be54f92eb9085caa061e0418dd6941ec9ee8fef7eeb4bd5c72de665f186ed14c10ffc9ca41aca242faf7d671351ee286f66a49f28f412d484a483ee72ad26c1987f9ac1c84bd5b29545097961d026db3882759c4d2307d01e39a4dec47f09e8928f5b50a289d596c91b59351fa9b73e1ae7938f03cc72cbf09a5eecf718b6a4dd392d66ec08df36f165439d63f67d109361f096c3646fc1855222036ebd0cd0acf781c32a38b5eb20fc0a813c1bb0d1c0d760ff21da5eb3eeb3d1ebddfa2db094e97ef8e693eeafec1797225ca5464ae501123765dd66e28299f8a01a43edc7dd774334a364e853a42f7045589b5a92e18715fec13213e8aa075039f4dfa8f8ad4810dc90ae7b5f696cad13c918fd0702887f01f19e6b4f4e4a08a04067b4a6ddce0fff461a02e7b6c18faf816975ee3bf8d6c06f6572e7b66ee2a1dda649e62d5370e9ebda9acacd7ed7cae99b8df6f9afbef11852d63fe4777ebf549dab5bb33a9f5437e4d35094a304ac8cf04204982c41955408417fe79013ee90dee3dc32a10b1ed5d26ffabb5599aa91d0078e31a69f79f44b464e4a3e23d0b66a7364cda8f25da7d309b7300f8d79faa3668f883dec11f07c7bb39047e5fc28249ed47bb5ee9a4e572cc847e8dfd0dbe5cb3d8a617d019ef6cc0ed07745c49478569e638654a43f827abce8988a4d3f17087649a7e1dfbfc10ff19d9f4db9fd8344b012e06e1f43aac4e0ab7be978b776b118eed371a8af667835c328b4cf791a610ee4e55f1679c19f50139562a2a310a1c548fca62fc9b2cbfe08b04cedff3e4376ed4155b11b1a5e265007f8eb17373f3880ec7d4fdff850c387e76b0247534e6f6af416a0b63e178a51754252cb446a8ebddb3f2f6f0dae8740e7afd041b83b51243074f4fb0468a817bfb7d747061782d223b88105c621f90d7d47e89dce81274c565c1f6d403b6ea68480c3d7e577eca6b03c4617b3bb4d7f628f4a01121103258fb9365d62a0b5d566b09891e91b2e2a3d5777a849208a48fdd569062bb1a5fd3ed1c0851f8bbc02f525f36a9bd338ae6d96bcc76c9f1181c2051f42c3be44f9be1912ad150c862ff92fb3f8ac155b462d33cc8e38f4e0638f54e7041028c582fbe7a14c0b973378bbbbef4400b22b2eead492102dd6b575ce0c77cb6d26ea468fc756c9607d206f3a4df1b9a82085c8c2c3de94e17f2cc443ed992d18f0d5c91f6080ab24e4da3fc8f85416ac08e4653df9e0b5c9e81ce370b6b73d5d936e0aca9d241a4677918c4fd71317af23283c916b1b25ded20dae4c64a7e2c1e378784898050b9bd5100fb5c4c228e184c873073aa0b04f774cabfcc3623651cd41d7e9e9454a5480535b87a7135703b1549269c52db630f1b45896a77def91dad5e24fc02612789b01683058ee960aa7a3be9d20480f64cbc1895dc4dc7c742318ed40c6479711742713bd3c7ddbd790cd664ecd75fa70d25675783e3e606d183e836a54dc6db85fef1c26ff38c9a497ecd7ef4c59129aa3d585775f76aa2c3036585a0b513a60b379ef6248ef81a690147cabef0dcfce794d5d57e83f05ca9ae80b7a09dc4f70d479a5f9e3bae47b6613d1bbf3f0ac19bc46da1dd430d8d577e1566f5e145e2fd1e96f197e08359b1c078885a00b42e27e6e0b298f9035080026ff60a8934216cf6775dcfdf3f80a4c4103ae5489950b940c5602d307241ed5eabc333f276c3f73a3748b0bc8b9fffb5d8bf294c42c65b1ac28aa7c925066b114dffea155bb26578b4a75331becd6576675d19c3dd85344e09eadc459eb0ad939a59da127b9db0615b722106ec20ff8c7e73109a88eedf552aa4adf0f85c758e2cc99a38fb303cca5f9c189030fe79754d7ef5663120e8126f6a09c2b035b51d8adf81fe93b33d155d925a826babd485f4d3eb8d790bdfadffe7202b18780b8f7e406007363de26cd0f7390c1473033c8285faba1754c768e41e21bef8413e75e772e5d10357af87f99207e0db3bb8622e931c3ec8d12776c0ee938b00e38408bccdb7b739d15761a8da4b183b784d7e76bb94f6b27a9bd0a4580c60a59aec0d6d367096ec7e461d9a3f87653bfd4e6d61771b198680201e3737d1d62be95020c382d01049608a065b3e84118a0df4a1faa31d8618d2b3191100f9d9faca1650f666780b8b0b8349548984d575f861aaecd93c64b104385a24113fac31210d6b268cff69bc382cea44699f9fe9ef2cb6e8980267984d555d507aff62a46a60ce1c333312d835cc8b527cea611173fd350b796c8737e2450e60c74c585089bfd2b24365258c3508218c6e5d3bedadcd0f6888c0eab98395abd307b3eaa8173ac0b9ffeeefce44d3cc24c0596cc351e1b361b74ec6a42cd894128f356f43c214fe39a62975e63bbff92ad580804c92a33b4fd77503966e5691d101a5b488f6c979411e9cbcfb62eb21e102281b17b26b7693fef585aed975b0513237dd008cc554d8933aebb92e7d89b86840a35bac6a7581facd33d2044a97cac4c6178a04e2578de89784d91e62983619557436347ad8a5674ac3cefd9af5f382c8e83988687114851637063288f0c8ae65964736572e0f1d4b31382190f83ef7290aa781dccdc3fa15d67a6d9d042040cfe61b870e3be8347c47cb7d73f8926c83df123a152be97be4372c7ce21f468e53461b4321ffdf1972ff931da22ebd8dc44867497300585f4a8e935b75c0559ef20ce87b0bbf4582166113e4893cf7b487ff109b0aba32f938e3b822fa1d869a752e3e886808ab12c279e2068dea490588a3c739a08736c617d9465f448f3b0eee5970e3d0284be5cc8d32fa7861d9de8e23dd1fb98eabc220f2a5e3c3e60c853c5b48d5c8fd14d4ae96edfb960f652f47cab16cba6630c0f0ecd20305648d4006b65a6c881f8e6082dc4f37d2eca7650cd237d23402333f2a2fe4b01562fc11bbc1d5e796a2edbb108b9e6ccb881637ff4c2f9b5d9cb71ccc1d726deb9b70a5cfa7e93c03e5d5ff8b49a651c6e85c512c9c9986761d51f1d9d49318461002a32afb50f7cb254cbca8031b5bdcdd4d3fd5ed65d4f08690db71ee1d07dc3695293163429430806040788825c6b59d9b020fced11d4447b654534fecb825417896c768d75ca99bc6f7755d0c01d2d578e7fc8fca20afe754c52231589a7bb1f31ee28efab231b1eff5857b3c1bd8fa569e400f06707d15efa8b1468a7328c2eed96e43d87437acc4a7d44ccdcddf132ee00846b408c5149562c1faac7e299e6884c7fe0d24b418586973d6e99f0053e96e24b820928d1bfd4b908d93307364a4e0f4dcce77d946308fa3828667277827431c03dca9f338b7bcb37745275b8805fa1a96409dd7b7cefa757c18d92b94e17825af8831aa1e859f197bbf42a852d57ce9d42fc9ee20e87cbc129d7b34fc6b27ef5846d7d447cd393a084f09e804bd717d0312b23c8a5a6f6702e2bf5e2a3430efe4ab20e11669a13f412258ad3ee7bd65dac299697b906bc1cc40b0c413165647471bb27fcf2f46af8b755b629a0968bcc92701c17b9dab4784e526263f45f23d3157cef2edac4cabdeddc042ec184dd6decdd8e89899eec23930c51ed95d0b1d4c97ac76916ab868ffe72b1a14348adc476e879a97440f7f003a192e1915d6c66587b5468510a229040be7ed4421695bcb800612e3f22a2d0f0ce925c03e9c2691714bf9d5c5092f160d1e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"ab39ca90fc76d919ce498b786c87f1c6"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
