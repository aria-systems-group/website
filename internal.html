<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"d028046a37123ef303158fc070398f8495ac67352bc594458b45e20e2781b1f65d670960abaf79cceb75a1d4c6e6e8beac1b9dbd5f5eb182b930d020e48db998d80c124f66a69907216733dc93bf995ca22dd3574433f4ab81efa2db1a3db1cacc871a1eaa6933931d302a1f4c1f0828743ef4a3b551ac3b11d0bc864767b7c648bfc8bc8343b6a9793bf20c92187a9152a6dcbc6d81784072ba8aaed1475beb1575b3e3b10609625e5c9c7301c5b1896832e222002de02279c675c121589802635521bda8d3652b83a7d5e6f6928d6550b6c754eb102ca46189ef0411534ec0d97ac6d8e454a04b370c1c72b82e5a6b0cc90cdd62d0a45ff61dcbf10f384ed1e666d2d6a2e8f263f0c7dca07f589663a37393bc94746c4f34618edb86ec7317713e19d73289f7ece24224663348193b8470520a628f4a3b313cfff30fccc085aae36cd4cf40033620c2de47c8062ccf8d899cccc45412d25021fb189f698c471fed14ac9065d388dab14e96ced38d97574b95feb88ad0527430e1832f441da2d8bdb0323b7c7120939b38d623f93dd8a819dab2b60487eada09e6b3a5fdd127051cc817474a6a524a70d54eccc8a4df49b22fa6bf27ac3ff38fd4f423e58dc703f7530edb81ce663936ba1a6eb9b0689165325cd4a8259fa9aac1e3baf4eb087bb649703e0b3a7d43eb5f4981a04fc746f9a3cf2a804e5f44491011eab2d050389620b60e540c169e551e98e128239ad7ec595ed2eaf2c1462c39ac8b8e6b1510d7b64345dde38efff8163ac740aceba2e06927a0f97526af9a997574ce951a932b56ca70008644b6783fa81963abd95fe17b3f534d8484c371549e3a58330c6a5e105f84d45b400d53ba069305542e54d88ae0504b18f105781a07bddb63ce8942eab9890cfb574edb9fed0d7dffe6a71fe98db7f053903298cf686b6875aa8cd0d6a27e387f203e461de6d4d7a48cff3c28fa098a30b21d167f88a9888d6c338bc163d4b262091acade83f9bfb15dfd69688981f310241dd210575c49862f954dd20aa4a9249e64f1b1407e4147c9d9e1f2a2969413dc9e12266258626b854c43e82229eaf04f95d744ba75fbfe5ca2712df653de5b4675e94190355fd27556417b7b1a950ad16469406700dbac1965fc07e11a72336ec86d6abeda10b1187703ac333ac9ec2821778b8f043d1fe49abbad6b63235f66907b4d309d7200eb2c4c3a1028b3fd5ff9beb26745115af555d32d8a6cc73d517c2760b99c831bfe58007f8cfad543e9d9663a4f45790c15954784027158aaa35e119d0bb882e266f2f96ab1dee18e22b3dd98af81ab2061bc4bcc4482ac0e80e4ba01184ef26dc2ba1a58a590582d456bff0b2b984f3e4af6c49cbc4fd5c6bc38a10944fa8bdf93813962f9be863c58f78b5e1e4f01d54cd5efe0d4d32562a7c51e812638cee09a12ee6f9e872de3e43d5db5830e1378976154f66fbdec3b76880812948df33eecf6ab3fedc45a811f92c16c162fafd4bef8d23f98cb85387a13c25fda3a706f33ea60c3161f9d5170ee0198bee674861f40646389e0c7cf0a14c89b3a637f688d9d4ca91f32b77ca5a856b26b8c9e9aa5e2f80c7f341f6c712c8386308eefbc483d2dfd82f45d7674c5bb61a8dc3b5ea6fc6b41f473e25825e4787ed994d2c6f63627183f53e730d954a107bd07d9ed9e7b9ded37289d57828f741c5e252a0b23736a1c633740a0d5b9b373200ddecd40f697719cc8ea0df1daf333cd07cc60a1635bde3dd92d78f51f202d240957f9e5bf13289001878360587b5524e07a14e1a3ecb4a9c4256bab8338f40575d6fc0e536d354ec2d506fad420d3a87f64ffa26c03f162e0c23a4a81914624eb427579bb7ae387ae6e3aa4a2c662d22573ff094d9a2f985ebd47f95a9d289a3073361d1e2a1e21653fe1ac0bd7ed239c9e85fb57d9d3b73f2d5b582fda3e64ff8f420d1c111276dc91b7b1c5cb19618523d11ae3df2a45abdeb7272796ff38731a888d6ab32bc8d4275d1dc5dc3a1cd0b501deef4f41348f98cb0f4bda6e0d1e75201ab265835591449d79d0052e2baa1575fcab799084805b56837a31b424029242f9f95078f47d2ad33537b8f441f63729cdc56e3837bf58c8619f9c0e5688e28b4886c800a35cfbdaf815e5d2820b12e4d181adf4b94e0969df0e7a12854489f2594e9735a9ee01c6e72f07317ab5ebb4dcaf8bb991106ff3d8d4b8e349775857527ca5e7683a3488143b7dca6a79c504c7464b0db7d33b6616c857f3a40fa0186d489c7eecf659ee2609f4d1003a9c1a10d9890e82312574cb6083c9b896cfa053d7d2a52cc0fd0846c3c6ab01c61a4f6859cd8018d3efbd878415477e5eb42152cd958e2df11c8649db0e54a56ec844a135bda1b13f24ee5a9fc02e9e1abe4304a7b6ee34eb5c877575758d9448c38470d586e8d3a6d2063e8bfb3a8209b72103b98f33d7fa7773653043a0b518bfcba350bf8bafd1a236a5afa8f5a7f3d2190996ad44ba80effc51324bf53bfadcb0ad979bc78e5de02f7fcd17dfa0b9db956a10d6042b4e1385f3e4f82f45c773d0c68c85d5d18fa4bb74dd6e737867746b3bcba3b3cefdeba8f0f68e30ac71044f1a8b0a012300af52c7b29a46830b2a165e2043490b375ae7c027e35b28dd457a690799b348468b20b200b4f3508fd10260099a3cae06ee9858231840dd96807e76421f4a8015181a0f8731c33a97bd0f4e4b8e925e8da8212776a31d209ae2919a43296e861477a74e2d8d7553a4c5bb1f5e3ccef8807fabcff7b2712e88d4523cb3f99e4794c621823c216bac15e704eff8245436dadd15cab7c2d67e3fd03d902ad5f695101b5524c8d67081b4c29fbd00bf36f5a1431ef87dce2141cc1421c3f69328c25ad028fa1e980e3db4e8d75529b46555b6ea78fda10ec7eaf92f4951c934b1851c17f62f8915e249d033d92246fe7ed19ff0ea21e34c07262bf78c7146d0372049867bfa19a14b729c20ce31c42d9205a0c31d1a9ae9f269aa04426539a0f0fc9a6fe55764269ba5d268693cf9d62aafd84044eab2498be9ee890f3e586a1e983fc686e63ccff21e109e018596d0263c9bc3ab7d955f8239afd1cfbb00247b6ab2c833a06ee3d6adcd9ceb7d190b7f4cc4b532ce1ff4ae86e5dc651956e3ebb7882ac08443ebbee5afb68e330bf7bb821fd1c6ce8695105d8fd4aaf899977765f18fe33ca70eaa3d13341cf22a5deb77e9d4817f26d4c2de7e7957ccc804d408eb1509c46b3bea43824484aaae2d41abe6474c3cd1dbcb0358c14e79a13d90ea56588385e8bd02021c0361edc54663fb98a6196e613d2a3f2a4814e9587fb33922d81046593d30dc7a021604eb567be9a05bc152c14a65ac03caa11bb0e2cb4564e69910f8848e9d5bfea8291a068f16fb3293dc780ed3563323c5bb5ee48875b3cb88cb9477040ca493245bb8256a770406a370fa938c0a5682f0539c159ff72ee97e8a046b1eb93e5854c789930f1c3065de276eca38462a5afe0cda2ccb6c0bc3e600f578d3719e85c8a4c51acf1264b628897e3d31fd039bbfbd7eb548c0ae6cf155382244cd0bfd6ab1e8deea69923af450a327cec4e717b169b012dabdcf7b5ba9527f741aa03a8e47a652fe4ff128a26955c4d4bfb7a02986b95089d2c860a0e94b39a29f530bf989f2f5fd0135a7ef144b0894a6de48a4207372e067077c7b0fdcd2e0ce0daa4e181b956a28b68b174e44067ac0f61f8c16711648bd77478d59f9f795e35dd1c1bf80a310a49cc613510f0d821e3e883de3e82facecbac1aaf65bce82ef0845dc083c45182670285c857d445129e7649f3ff93bc2f2511bba05dbde664fadd4098235260de849bf4207087196b5b837e3c619765d13869c3217f8a8afddcee4937c25e5f038e1b80df2f2b4d63d9f3fec3c76d0a5c54de4ea0bba0f88ec7e720846fb7520d0b6fd31de68de42d9f0b8e2c27f6a897c7226f43a11bf00c30bc93730aa0e88bc8a0dfbd01927d5cd58fab1d047103a33376b7ca78c3fafb9553f9a276b3935e5293a545419e88e5d24c3dd06764554fa2910fc31a2ff3a120bc5899fa57f42331ce56a240280c88244a9425cc578d4efc2417ee348bb9c425aa00ea1c3ddf536c70cb9402a58afa27fc772a16fd6cb2b27dac05dc3309d6f2531667c58fed6c76b54bfc471eb4469e1909ea309a7bb2ce6b99455eb6d1f57f0d9a2f45c4a7b736db8b005e9e2cf8b884fad7e3ba49b96f0998f1eca389228b2ec7879a5d46962f1e5e12ccd810f38b1642bb926327ea6e8ecdfaa562eedcc1a654a9e0e32c6cb03d8875c56141b1d5f15e9b6813ef08f218fd3c5db00d87bae21c61768d2994c3a3eca2b0af8ce6df93fe745cf166b77e037d28229959fc0486bb56334fe4950bb341dfe94c332a186e832c0cadc0022782581543594fa9c9b67959132f4294b39aff9cc65c9528ca7b37d5cde72dcdeb474ab4093ef01824e0567d7971bc34c24795725e704efd806626f874576e0f42c8700b73902cedf6af1f6b10c1814c9476fc1ca1295f62f8369be00d1f8d2fd27cadf1fa94b29a1aae47857ac64fc23b12262ead9ce439391030bd5c97c2975edff9fff67f6971deec57b4cd9fd72cf1b0697b31cdee4900d049685a1d8a0012879702f2cadf11beb3179040bda8ed5ac41470f7f41a25556fef4cc84ed0ae90ea921844c58ce1b32b593fdf56a0cb0afc94dcbf309f375e5f73bd73474aee13c50ea3e5d663c8715335929a3a0a6919918606608d2e4a32853db21c1b524f40a0d2bbbfd645c2eb9f0fe67211c9c68920169b70763dd989634d104a113060d023ddd710013e61c34332fbbef16080bc0e15f8d56d580f1b2283776d285e648d766013119bc2e831dcf48653ced9b0dc95aaccb53a347fb80fa3849f761e8050b39e97c0e27bc62b4b404c7a8a085341034bc5a3908839f6c07e72f445edc29045e56825519d6c47a5ad99c89e8732380abffc9e1990a24a47b6dbae98275806cab5ba4ddbb6930704bf028f056368cab9eaa510e70b4579deff633e8e1d5cc4df55f15540612e973a1761efd213d05ad018eaedea0eaf3826a9198fde77a65e90d15388c6474efe3ab229e74bf198d92d0219d71647a9504a27cab99696cfd0b223e5e95828a3aebaac1cb04b85ba194639b34fa5848b5f8a18599f4a421f356cc7e1108049f68d0ba69ca6bdd348db7c70418a7c6a815179a0d6467defd723a69dee5e614bb4211cee09241c9b4a49220c92f2d032179ac1681787fe43325a784f0def1b6fef9c24eb5bbb6ea148855c9db1bb2a6daac441392ec0ec999c6ae8bcbd52fea21a5ec419731ff98d22442b0c8984f74559d307323b9f68c14dddfc187fe6cac165c64f9173c138356e56c4dfc8c173c000450699562154ae84452841e07861512544b293c07bcd34f8821428101f2181545aa97283118f0245db31ac7096ddff60d804ae8f9c0c017712647d4352036da2f2b7f86f3a98a9ee80dcfc0a2a60f04be9052844eb9963cd0903ec7fd15fa117179869b422d5cada521d62eca34bbdd9dd99678f05e7e794752104688fa2a507704e10d22df28c415ce3c5683acc90ec5d681e0503e16e73b18b35dd5e1a816a13f87635565f938532c2b45970d8cd79c26b145405e7998a8a58e7077304666300dd059db1e70071731837a48b8a1f5195ba4cc3f017bef6e2eb2ae84a43dc1ffe0db5a8ba3ef891266aa99a95fff30838d80c1d4c42b193674b4de8ddd00b5880955308cd9d64820af8aca11356cb694a5473824684b61e49d793e5bf7606ba2bd18d1fb1130991c71bd92830e94b924a9aaaceb000e5da56e6eb1c471e12bd9a55a458ca458442655afaae1c9c4390abb6fa6cddb88fd20abea503a1786502fe0cea752a6454e970a415ea38b7e4c730798ad157572cf38edc63401e3f5f9c2a46fa1cf95ec170d188cee6aa7959525cdf7d353fed607f07293859ca1edb22e561d5de7bcfcc4d861747ef859ed9757f07b797c9147e837f4ce4f99fa156c937f554370f1140e60d1080eedba28cb5ec35f62ee07f3bbb12b21b974c3f176549d4962e165d76e2886267844191b06fe4951025469933598364306871997e472953f8d8eb49f423e018574557c93989c090354f5642657adf5943bb1700c81cfac482e4fe8f088d05fcead162fb168620edb87016184b6dd6095b722b2880c26a680ab69cdcfd2c4a53c3b7761aac616f9ef1225e5cc9b3be9978964d156d889ee68ec681bcbcb1b4ade101adcf740d2f763ed30c65bc5e15169cc62f78dda0112faa61adc214c8408270d9fa72262fdbf3dc407342ca13025c70964bac48304a63fceb9b4ab495a69ac0fda82fbdaea2ca5f76bfbb5aeafb177e3e6ab1f2f88dab76f2a318b81e23a8850e348ca198dfaadc6a012c6897c80684e342b37dd84825f52b74b737eaa125339536ca6a83e0b6f202e81920eb8c94f3096b7b67266d4c65c5ab4e3906d13e20070bff1a3e20e298ff3efa114944c44cf56123d6043511d9af8e43e179f39444ea8d15da6086768b2fb67669d90541f6fbaf61215d9a17e19cee9fca4b6500147809c585dce856654436f2d36484dc694c34b5341fb2c5a096f844072c63605405be1639fad52c46549560dc7c0be6a56fa15afd8c1b619ab3077d8bafb42f3f5e9f25a2e9128cb8ff32bf24fd432759bc1d3e67c5f833ab06f5854cc6089c38418fa70e547b694b15e5ea063b7a2eb0d0d28b2ae0b0997b95f08f64dce482cdedfc92e8e0a59b2acfcb6bf2aa5882477d0fa1f5d62e71abbf361b4d9fb177df5212b060834b11e5c84ac15fcca1cab7817a1a8a29afa88f327d814bdb05d1da0d266f34461807004def613f137d6c2e76f7bed3e2d29752ce3de02f2f81b3f84caa77b41c401e77d1e1670e0f8a5d5247db420cb4eb95305890c63b1a4a611a10368679d03698be431b320a13e2b5e97ac84b016ab4efa500106e3ab371e5e7fdb7cf3327698c5b0b7684523105299c1136ea427bf985b98262d94554d3053e1a199adf2f5fc6e5b6c2097774bddb034050ee01b666128efbd6d121fb9503b81fc7937fca98531e5787d89cbccbb34de8718d6a416bf3d29c8b203a2c5f05782557b4e92aec87289bac08eb150e360f80c48ebca7b51da7c145d6ec2cd5f7acd89245b20820266cdd5303398d4d4c9a5193f0a3954ef3b627646d8bd7b0414b6fec779e26f8307ea36c9be39a4cd64dc0b4741e9c3dd3177f36fbafc778f531783ef8449ddba9215d67a6245829fde16af9eca6722c4af13ade2b5ab11169cad3ac86172bc02a7230f5758d31dd3183edab20ada358eed00888bef871fe0b1370f2b904220ba37915a95915a92103285b6e3475ff250779a06116d73a986218a276dd803d1ffd96289465ae8c052fda61a4b3f672ba48e36e735c0707e481c174dd69da03454dfc57c8cda3cc7951eb03fcf50b5da3ca9f745f3330ef1ab71d2193bedadd5ad000dc053185f194f5e301fbb0457ea19dc381c2389eafa9fe878400e3a94c8153c37f00abfb31603f7df8b3d8ca051aac2dbd5682c22954b4645d8fa8fbc8c95ddcd7535bb24ebe4c5080b504200d08113010c292ca27334724165d20df1f3ee47ac092ed6748e71010213c74ffcc5aa93dbccd6f5a328e766f03764a4665ed16b4e0e8b7ff28800ca5a1dbc1ea1cb72a3b771de6a82981ec96df0efa1661ff817ae6f64ae6fde733f52d5bf68786683ffa9badaa0ef828046a9f431757686a7f87f89f4abcb5f4f816167e7e82a5cb61acc63625a3c899d4d2cd96090860ebda6bae4d021ce97230fa4530469b10ef333b93f79a0cb497cc1e05c31f021656a48223e4262b8f710a67991e5ab735dae3352bae51a9b9eb1afcf846d3a96bd66e2e17da1fb80303c1d8ffe07190c798f980c9fff29a40be097c604eaaecfec8bbf5771392e4e11a087a009226c8c1d3f3965a210eb25e7452b8fe05b1dfe354ce51223d4fbd95aad244f11264ffc2364591218453b8d525f85c4a1da4806f2c8cc949b4f97b3fae3c62d626e6ee7b5bb2a4f0508a1d75c4aab669ee5aaba2e00f1c8c3cf9493d34e4399a1daf9d28985a8065fa91bec3f1bf7e8b88ff4d7798ee643a265b57cd5c542d7b944d38bbbabd616df45dbd8f401e4b23110736df2bcf2b5bf57066ea7420ee64fc1875a55ab825b7be988b5cfc5ca45be914f41375ecf8d78b1ee14791b1198874fe5ea9881dc9ea19419b421b54fb4d28c96ea04e814ca1339d58c322287fe222849445f91dca79888c1fa834bfdc30b02324d1fdc151369b35468952015d2edc315c2753ee66273d5ed11a58af029f08c92cad2cf99722fd6bc97c42bfb4097228db9fc8ebe9fcbbd0f5eeffb43135d78c7c31c4f9bfa9b0fe62c0aee9a846e3ab10c7d7be074bb4b18dfb87995f9959f6c2d86106cd4689bcb9a899460fe73bbb5a2d1f9648eb27e61c58f467d89b7615da99d77ef761344d64f62d10320219f5f5dbb2b53569e49065de777c1fdf2a7990bd76a7f3e385b0cfede5682df40a2071216eb3a5c022a5280c24eb071755ca0ea275e3ca0033c1648f3b5bb43d515e15d9eb9608f60a80b3ed5209f1b4e4854bd39977255a8096c95be30f629502b3b1a17f3183fb32b460e5aebcaf087f1309a80d0fd17ab631bd45cc2437218984d33eb750c027d83ccfc1fcee2a7906cc8191962e57dbb34abab3ae3cf643741ce57681f8a76c19b55f11a358da492bd553448424cebcf9303c72b0d465ca4c062a510b60e3477e1d6634cb79dd175c99c153af0b1fd2be4192c2b563f997f43a01dae5e2ad6caed4969ae74b1e6bc1d11476ec8aec7ac4825e57a985310ec27f5365d5176ccb0b4d3e84496e828f094ecf6daa6d1f965f9b0d9a47fed2a86246784cd25ccba9c81bbbbc159803728f49a88460cabd5a747d49424ff6502040775d88429c686b59b9510c4da0605198d5399680800c99d2639f15d8e8d22fd055d27d84ff5837c0a23ee43fb2a6665bfe9ab017e610244f3e876e2ec777d4199acf81f7d271c8e0ad16b61481bd5bb8d8647bb7ea3ffbc2f566c93288766c4fd8e05146771942040e4e0dfd3904f46900f32fc133cedc18f2644e9daaab8369947c4ed7253ec00b3cdda127259ea4d3a51c87b0ebc6b72858fa6a517622b57d390a25213a8f47bce3c511e8d55ed5553ee1db47115bcc3139fd3190254c1c3ce7421ab26e6a0f6da14d947d73e8d3a7f4100ddd2571f84c6b01b919af01428574298774e5914125f1278215ce0723e9052330a1b2e169a9c4aef4cbbccf5b0f398018294fc3c917fec864f5578fb044675a9c1d45f84120ebbd31988306d7424e215d7706c0a49ac97bb2f5d4abebbb7b9d34212dad27b328d262c8ca4c2e4511f71092728c28d6f68103ba8be9e73aa20e3ef2fc243c4bd4d2150c09d4436dd82582e3476fb55046024a72b0b83eb1ca0575bddc32b06245af59643663bd496095fed065762a274bb786d9bcb0fd9a3133813a2ae0b61ebb8a92089a2549bca2e13f6e1ed550e7b8fda166c62711fcecfa16409d3bfecd2b07cc0826c8d6b5d1346f66de863e5f47c37d2337f97c93a2baa7ff8e6109fdaccfaac1f0a98456e32ea90d344cc7fb3d9a40a55f5ffe5d95f3e8089a3a4fd141b0c6a96da1f6a1e61f80e138ef7252a8818b8153435665caf6f9eafe0ca2bf22ce283e9ccf08d9447d7e7b149b6443b64b1b16d3d1bdd3b41d8597d2a5294beed935d852e4930f2f139eeb05dfa27eddbf53ae83f856ea6a887564184cab9cc996869a25a8f860aab6d5e7506e3509d3c2a11e3b40e0de10ac5caca708da914131c92caa97e382e3e2a50c923942d8145c6fa610fa3daa6cf81bdc8ccd19f55328a92756851be4d85d0b261f24876c4888c9c0e6104b69f4145a1302a96c303212c9a90336203534dfd63084fc0f4bd8830e87f2feb607aa7e54040f1b47422fd1af9fb3f37970c73bf0e9e34bdb96f5584d2802226cc8c75e3f97179df7cc3de9379ee2153f4a3e5711446e20ded8a8863ac496446ac3c3fc9fa5f84845e4db6139d3e20cc00fce34b68d5aed22037dc7b82fba95e6c007a5fb2e3a53961772346ba1fba7bf63eed29bb9f00c11e1c84045cdb38e11d8ed1479ccb7f3288c792985f69d3406a63d852ef944034875a3383277b70df28d1c51a822ce42bfc34a4762c2843234656764c04b5ce447c29b390761fa4dac81022fc7572de4c8e2fc121392997ccad6455a65453ca35ccffc6d49f41442ac13eaf405fd6b471aa74e3e05ae3043750393635453e716e1788c927b304e4a6b5eb73951814e2697851042f70c3615cfa94ddf3edacf15aed9c639518fd760615c417000a267cf99e3b30b6bfecd93f56665c9317a03880d3a9aa40495e82e45d1da487598e33e9c480d9c9033e791ffa21949a4fb55e983d4e90a73ed750616af5d06879779b58ea3c69068bd4b10f6f77e3b7cdaa79d80f9ade413cf8d5936e3a25c4b871da950d14f15be27948d4f06913d36a0a89867c5b1bb0c43935fbec184f31a8be73b9488661a9715b938192be4d2524453d5bfc9c0a22fb83e88e33e0b656f0376a41ca188301b821d15063452bf09b029b3a88d39abc7f5d62ccb473a397159fbc7978c51be1e3a7966b21bc7377041e32e42e12a1182acd59791bfdf1418f46a13829d33663ccf842f7dc4ca19dbe77230d6c0b80bc40037000acc586a6a784b77191efdc9ffcf368028157a3db814374825cebdba8685b21d22324f0fdf781a33a07ce57d428fea8baa51fa776d12c37d3c7914069028fe2f01f0d67135c259fd3a96a2fc2ee1a79b8aab2776015475874ca76d6c74ca8a2a8d00e0c48b4010e370d3a17ff0b2e895c8230794e14874a834ef5b994a3ec18255038130a34aa27a01f48ff7c778991aa7811ff0a84853dedea7851d5e9e4bf6fc84a8b3fa1005366f5e47b9b6c60cdc9d3d4db440414ed677521464584728851071525db44e262bbe08395131a9250afefbd5e7c480f5d1fdade4b38da96253d9439b163a169be684fb6fd99e0090c1f7c5cf1199f346dd246585a0af59cb70c18d4d8b31a9895760504dabe5c43ba8e607644d625ce5bc7980ad4e3a17c5989241075dd22d85141a0755c3113321bf6d948960bb7d9cadd11dcbdc7e22555337dcd5dcaf39352f6345616a6fb9787dab512f533d59f417874bdb7381af8d01c835204015d895b09f5d1bdb72498aed6531ab3f52fc7ebe305249951d477c8ad41c3a3053a99ccf189133aef906b0b72836a051883e7e2faa804e05a07729505d0802007e53cd4913be5027008f3c1239b1a7902afa1a87dfb6cf5c430c9022565e95f784ce7b4211922734bade4c2769bb90bffaef005fe064f88f651a443834d0756217153f1d355f5f6fee9aa85cce7340e0ffc8dd62a7f09aac742c2208e0c7d0d4d967d328103992ef71f06a3ad6fc829ba64c8014adecfbb354bfd2bd4ecc738d7dc98f36ae890ebad61548c320e5f6d3e05f4da0255cd4e48d8a5c35b1c0f4c1fa1f95b70c9825453c6a65ebffa5bce4fc5825baaf8d0424a9d8cfd2d34fafc8cdb4ab9736cf4b4d330b79803b03a94fe1617f64d06a81a8610edc75190f9ac57bee129909abf5284554f9fc78b9674837ca6fdca61bb2eb44d2e983b7473131b17c2ef3970edee14dd832d1e337279ebf14cce88e98fa802ea11478c87c08faea5ec1251dd9d09d9f7cc322c670a5365e2441710fd20fc4ab7ff7facbf1bc0989a54265ae4eb2d7db73aa2dd07af532379025e922f7f18789571a5d106cc27ff40014373c777fb5095994a1a69092f69abbd27c0b61185a07df05fa4a8d86fde41a8009fb804bfe89eddd35c0682d67e83efd4ebce114be91ec15bc26424cdd8504cfaebe462d0e8bab936b7f59364777232e78faa7ed99c063154cff8187e677cf49646fd6ebbc2cbaccf13188e5de727f1d52dd5a1dea68903c8fea817880060addd6b4dae01b82d5c46e6c312083fb580b71528895c93b8842a3eb6520af2098a1b337e1396334132f9f1c616d9513847226c0ed74b099f05089aa614ccdbe87fa9edc1730773ad871e9f387c8107435a9f151633f4af4f36ee88d049c4a4a4154cf296faaddeba7fe71e378cd32e7ba8c63a0aebcb6b6f9882c6ec512c9232457f6c41482f262e1358dc4e5d88edc5a9b23aeee9ee0efe0551e0fcdbf05cbc1a3d2e1235126422423877fb1adb56f7a36dbd41609bddf17d6e6bc351d40b14b54cbe02df8299137e537ce77d255b4258930dce054dedafb9d99929fb9b7706c46e56328ed6017f5449c85f1b3980f9f94116a9e8b502b405d9bba6f918416a69d6535e8404497a51dfba59486507bea08190677c1a3c9f9f8eba7d39d798fca1dca8508d5320826f87cecfab5b04057393eb00ae80be1126e8ec334c52f9c57b89c6061aad1f03191ce81d8db4d98dc25c246f9dd9a65bbba5126fadffac010032144b2800222a46e852f252bd086bac7b58dc1177112a096413dd557a278225be134e518c7fe39de767484b6d1358943b0070e6101088738e44c508f4aaf2606ec681b3e3ff2e6c32562994a2abed55d0a51af2dc153db611e24f936d8ab2a3ade12a8f8a4b39b01cf11af9d153d5713c2909709e43f4c41c4aa62e22699b41fe1c95a8f0eab15b28ccb4fdf665866eb414a1c4dcf35a4e802f0cb5b51c34dbce611e1567f934643d95880d7d19dd9fe8a45858c6ba148be678b7a1e506d8cd86718b8b49fda0f211135d0a4423191ad4c8f3f3f45a0dfb01a5d4db7b1cfdb21356d44e1b98681d8457ab9c3c2dd640a2b3734d6dc500d0c39da58d1c82cf4943f346805d4520dd50c2b96469ba6a8b19c4cef6d0391ea35c7ef8f5af1cdfe30691d6e0318ba1fbd8fd8addc20d12c300401d2d5a0745416f365d5eae267a5bbf0194b7f9f027ab65fd4caadad124ef0fdce300d63b158aa1f4838fcc20606ac74dda42dbcd2968ab4ac1c0865d875a7db8afb989d7012dba0c0608bebb8d53459f14bbeffd9bec9dd58a1b2ce1177b4f5cf7f9f9376112a34e31ee4b82cfddea9222ca011788a6242e4a008b3d2f533e3598dd03aeef9e51a873eb9e85cb9f9091c0a60a734207dd82d9a0db22d2af78b209889fcfebe72a6dab543b31601b89dccab89bbf8b78c0f49f53480afcf5ed031f8a0342f4df889f687b2f9f30d3e02d5887724612ead9361076472be8ba3ae3b041eb9f52933b9144b07c9021e49bddcc3509d81647115237569504850d02e8c9c8bc841740a3bd28cac57ca273dbd7275eec715f0464adca12b7cfc57d465c2d7d1ad4064914a76f13549fa8317892aaa38afad1dbaf0cffa4a728a643a82023a3f143259904eba17b6f6e2e6f9725da43a4b5287ee71e40ea2765fd30d2be0ed6b3e9ad7a346eb78bcb08303e508d3d00a40de658d7542c20e43bae351c79a51528850708c0b805e4b98b4a58fcc31e9313afa5dadd4329a3585c6eab36ce1587b3ee39999789e07d32c002e1e5add1dd019d348e5115fb70bbb1cb554a203312ff2ae35798747d9ed704c2327cffc2768b89146725833f969d1e6b8c00fcdfcd6b16ba80c3d220e0e6b282bce913cb6f35f427f9f7d59b984dc313e766c58bb6f40dd9eead45e546217b11090d4adacdbcacb512666579a75010aa1ad89e89bd75822c22f64c999b3214a27dd89e27f95b9d46ca654bf10836d909af66b756f519858dad338c622c1dbd4f523588032cfa1240fb92c06b8a32ba8842704072cb8e5023e4d71855e1c1d318ff6c06ae2e59bd66dbec06337c4c9295e8edf08180d7d3f099023dc6d95774901c67bc2212fc27fc23f16efd92b05e537dfe8321f15ef1c6f8a4b3a1c2cb841ce32ba2649dd0fc51abf629cfae19e8c9503233cf2f027b50989a2fec4a2b57e3d6286ce19569948cf834e346f111151e64639cf8bc630786ff4f3758f53734bce54626c7827be21f24cb301eeb572a961e35bdc175ab667107671bafdc176456ecfa1e90c85765da2b83fa8a1878b4b26e708183c0b000c767128dab9becc511557bbeba0d167291d6638b3df05dc7645e30d9dfc9072bcfc936459e96fee6b29f37973ccab271b550aedf862d2aa21a7aa33ffcb6cdc00315a577797a101795e1e7d9d5992b69009f983837a7add1403fcf23bd812e8fc53907cb8a48ca2d3044cdfa34d93bb442006fbe445944e406b85bbd18e2206cb898ab4dca068d3a1e8ac8c20b4d42ac1a6f652c6e840437be153023ce29b178190f5f8b976b03957b218382966f0bbe3980c2713cec2fce211ce751e2b77213f4e507b7440f22ff8c99dec0d30702eedfe8e37b165a9a43872f6b5ca6f960add14763a779609b842a303d4379df7cb2fc7df2fc6d38fc01f77e3f9af38988524d77ce015f331348237340ab08998f3156923d501fe7fa31a57a82fb7e1581beb95d74d54e75aa623a461addb3c2ce81bbf108c377127c84f4367c7fc0e5a88c4bee4e425fec9fe969deef8361f534a11ebc98d1de2a6bbcc2617c2309c881a6d365c475d4b7e117fe3ec90bd0e618787b47c8b91e9191fc35fbc8a17a51c5e6f515060520e5d25dfa85a21cad18de2ba20e8096f52dc10ab16985d79da2e02208221a516d70b6e5907b14083f72b826d0a21565d8afbe5a65fa56d1525aec965404810e6bd6d0bfdd9ed76e6e9b1511e8d8fcd264f37c96ab5606c3a26bc3d25db68dc487f5848018676484f4d63f8b6ea78f94478df63cdb99db41445d7ce625efad01497e0e6065cee71041aaf3c6654baa74faaa8e800efa2011c0915d187a35bcad91bef52f19db73fd52be71634e0087710a8901a805f732e772593f6fe4fdb765f84cb3f97d30ab4fa3cf432b1f28357a24ff8fb8f2cd6af074ad52b1ff6afa28fc7581a9839d05f1796da2f331603765457bc5121a0d6f0f437b54b8ea4853d6dc3de8be3cbe2c3b576269c72b16325c926bf07823380c35d510c110c2e4a557be66391798af87a1e44522592ef73d4ab84c2dfc68dc5b62d4a177119c0106ebdc0f7e11a58aa897d809e4061ceedb5056675fbc6de53d5ba735293143668da36343c043653f65bc83c484e7cf4b42030cccd7114add90386cf0cd6dac68f4f001800c1413ebae31b6d06fa7cd4ade0130db08ab1d2cde657f4705e9531897ed7cd9e1863a481b5016ab0c2b6d351957e104ab08c2d277a9fbd70f2ac1488fd69e06c6f0f0963195199dce367b04a29c49e8f0ca4cdf24937ccc9a4548bccc7d58157ad9dea19467557460b357b16cc68d33091cd880bd8c5dfc2964e049d29fb99aee35d7e05698cf6772c00a9ab5d0f2008a87b26332165dde1107b8fd53a5a624bd960907d8ee1a0450e865f63bfd55db53031c49d30ca2a011bee28a853f22bd5cc2cf21df01138b8fa5e2de0465e4ffb1c15a63779be99e9145b2d920922e1b08b47eb60e8208439fe35aac8fe86bca9e4f93b8948476259d2ed4376ca9469f7e02b1775a31e0e78e10efed5a0b5747014d70052d6b7930ce83fb93e5939d68786c35e6d96a856c5d9b37f8a0259d900c5558d7b190ff6951a2f40c7e78475e3efd86eb01f78cfa523635c73db22d2cd3adef36e5009d839cd348ca3bced77ec7f6c5c517b85d3c2974e48936b9483b534596a919f50d68850141e5c004a87004928219b4dc55cb8afd88431266da9a27e21c924d30816592353f47d6fb4185eff9e52bbcce6e0d7d3cae67a05655b0db797f8ec2d5ebb1be3aa5d8f0fb05f890cde2d2ec4494bc9fddab70b453946a533290c8852c6f0842e5f31835fb127ff3a0cfe36cca47ed14ad002e3344c2afcaa6614a149e903a4ad318eb2267b183596066eb64490faa546ff08b17817880fd5a4b0c9117d6414d4fa6bb45510e17c2fd3d51c422e9312fa06c7d11ca1608e49081ae6a66749f85b3d17370fb1cb4a109fcfd59cafcfa150c3d2f876eb5e28ecdc13c1318b8e0d023657f6d43b7b9610bff12be2fa23d22ae4f60ac9a9c000bea0efccaf5b1d3292693b3c2374af4c7aca4ad30183f8f843da14b3f54353f502d150c684642fcdfe13982465ace316fc225f2eb2f4dfaec7b3560671cdd898dd45f61f9f94b63923c96af27416e4c8f284fbcd6f85b837cf8e16e1fdba71825d0679966c922d6d265a7c2fe608e67506daa5c193168784ed01a44c7a2f1ef4d5a2cbc45d78cde126da98eb2429c4c07dcc3f25fc489d09b275fe0047042aad8b9f73739cde10b1ea7313cce9ff992614ac173f14199cc933ac36ea1fde7dd820f36ece7cdb91efaeb08f29a555aa08cea560dc6486104c8e8b5f987bebad82eb0cfc940069af9858d20923f682f5bdc7487c554ea4a5bf11ef5b64ce2670d200aafd9c2dda5db135e76c6e6dcf8402761623d4db332d053e36e37ae892a4ffe59833c9151ddefe7e6226ceaa409539860b5a2753a34d2ae1af6911d0ac9d6b568a9fb81019a8860ba7cbe8b80940d60c146fd332a3135f86c3000342744dea8227615658f5d78aad428f1099523578882feada10202db089a1b8d4fdd7049f4a4641da6c319aa7ef06acf5d76cfcd85cf95b4c793ec238525d7191c367c758bce7a97bd9ab25a888be11e4b37f41616255c45204b439107b572e1b49990c36f437b43bbefb0e409a46534ab3199ccd311a4056c8926db81b2350adb1bbbbd43135c44d93ca4d41c64f6ae0a6a0ae367ac646f37c7563c663870bee75bf7ce786568122caa943ec746523861f6d7a2c439f416fa16594a7d8ccea61a1c1831fbd80f0c36d38243eb5e42be42135d08b63e0695077fb539a3f17b394d4ee78fb69417ec0f7405758f85775a4f9762c23e0b849226d43212818e6228928dac5cd037f3ec495856fdfb3e20972dcd040edac74aa843f8a9434390a1d9ca59bee687125532cb886ae29218c746969b5905285ece75c791a8bd0c05f5d42ef3fed00c14029cb117e9480e1c67e2a65dfe0bb4f0dd70d3b8b5b4956ba31e4279338834961bd4982965632af69654c964cb2acdda83df515dda38bd4448fea5b6dd7a028ec07c8d36b964c79e424b733ae65f39d1d81945c862feebbf82c3e04f07fac9caa20126a06ad8a4773a547c542de43ca3eb64325bbdbdc136e9bd6ab6faae12ae52d6bf39d855d9265eaa46856e38bd7740b7a15d18dedf56095912a9f8172e1f218a820378adfd86ae14f62cf5848873e69714d6c0c2e0bba143bbac69a6e5b57e0c500a55286d20928d611eabd7ba799724ba8e53d8a93e3a1e02fb802e6e4ad447337484364ed9c57a0762abdb619e1cccd8c5c8b434a1c9cd45b4bf67bb83c3f7595b6c4f7b1969e928bc33e9ef57315ad93c35a1f8686537864e711f5eec03e176d4a87c50b8626b6aee714d33fb01affa93c540e3ebfea952bb4c9ec1f8dfb60a0643f98d9d28b7d2bebf49855e597a14e91317b3c2f9566a7cf88603a8de6d36f56d82da0ff1c80d32a2997671e6a1443315be6c56324abe59ceab1875d0ec00f5ea8bd62e50eead721969d8db8633d0916dec5cb024eefbb8c8a2f3dd1e15c7b995fd46ac8782e2719d013dccbeb61c5665eb4ef49ddf88487cbe805bcb838fcf17020888181b49a0b3d446abb2fcd4b000b32073ad5dc8dd99e916095eb4da120854d63457c66d7a0fa17becedc7d4e23414c9166e0b2fb753832e6c6bc2552417e22be98e4a1e8a365823f6f173c2b5f27090132213f2155c3c7b3795fead091a3dd02662881e5471e5b0ff5ca2a132490b5a2782a01b4538434b150531403ebdca91a6cbb06f85437c653d4c2ebf43af4842e3ad2de9eabc6a352be09471c2f05b821e12ead11a8a43efb2d15bc819c39bf4862f716566c8a1debb5ccdda3e6ebcd0c8b5617f2bbf474ce5b3df87087bee62e774850b3099a4bc84cdf1395e5592d117f69d284cf823b3931aeb3ad442a677336f8d1dd07854d4e80706e1e198430e3841a926858a14180e4bc9cf8ebc0336282f5086f2f199498a6842429ea185a598aa9d701e39b6e763a4ac30a59a1d540b76cde880d768e84a54e7286edacacfc55eb2954cc4305a1f35c3416bf7087ec7b8bac01ae7fb209166c2c4c0b08e3bfba175eba8c521e015ea9703d14e12bc0eb085e0de137e703222e38b74ba3c3747bf38c63497a5dc92e2380fee9e01e8806c58e51a5725a85d156928efcefdd4eb39c3ea97ebe5d9d308b37bedc6a55290c5fc89a61017ba3bde394bcba2afe2fdabbbbd2f94d56e931c3e6a30ffb8e6c2485a558186f59be0b74bb1c3ff8384a9971ef7bf300056d90449a62f691fc2281bb3bd069d727fda52dfa8dd3018356927360f8c8fd38c9ccb0544e82bdb2be8ff95869f7390937b1614772111502a43981d4d3420041f2084b8169fafb230952940d141a84d8faacf2f8a3bf88a5fbecf033c61786fb397cfdde123f3e8e40ae89b6f43339417daa9e0bf40fa3e6038631bf34150490e814f0ba761e87708813c4cb072b5cafe0a12c5781a22b9f6d89494c8efbe754d894bb190f13441f5c1226d195dfdacff8c50eb9b6b6b48618579902bb7f8210e7b13b85152d243f59d39e49ccd1b07b0b9c0efc9ed38","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"3e1d1d97459438c937f2a13ccb159181"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
