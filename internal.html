<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"17d53c5d86077a1a1418d44af85b5c186650dfefc44248ccf9c602063d78f6c23a9c33a405655e40a0edbe11a989f689d5e35168a72e49c65fc4883de3af6a8d866fc7555a28131deceb0fdbc96830a2de84de69596636af05081785f5f7063ce7f53d18a4cab6f1fc9902dd71bfb263b993ac68669a809650b002e0acd0e63816adacb70fdc84752fb26e89ea1d35e4b5361a513dcb81caee8a06401b8cd80e8d8b556e9fe3cda789d350589efa84a3dfb0f3427f7c9af3052a9686d9221b550d8d46437ef49a8629be15371794e2f759412f5fd4ae060efeebbdc60c13c5dd0d8affd8998e73d8fa046e561610ee124edca21fbf24842b1be89b43fe8ddb80087463497bd32f882ecb5264069a26ee20fee43212539f1e9e4854995724538ffe027cbb99d68ea0f67690afec13e7ca00a5646e020e25d70f86ac518a8ac781e20e2d63010dd6e9ce694723109c56b81cacc2bd6cb320cbaf9aa19098d3aad6f540dd6686002c4718422e43fbc646abba86aa663d37c28d356e6684c62aa9be2d58e4b0a59448ee08e8c8a91639083392fcab0f0f3de27d5c05e4fa2658e3bec2a7123b9e87631235f53e81a18e731cf5b022a4178fa3218873c7f0b24addd49dffa441e586da2580336ccd2d5ff4b326c4bd91a9b6f619bf0ee272f0f9770381164b3688c511b2fbfc29ec791768bef57c20b5fbe3d4b816c045d64df38cc3ea6638f8b9dc909f7d34e21c4eb4919389cb2808367cee68e1b0c367d9962e7abfa97f2c1029b0444cf22ec642a66d951985cd770623ed9e50fe140697b0e028b0d8c40fac38422885150b4f2c629d6dc648d2d6047dc3887e3700cbfe35d15a53d2c5d5f78778e0d0c4370f494cc5347f91e104f378015810f6d726ad37a08789c6d0556bba89ab1c944b4e46a6ec367bd08fa8fe013ee468d087e9952f1fe15c9e5a14eea95f975799d8cf5f1788e5440b7b841d4d10afe1d6d98c43bbdd5e5d0f702e3f06201f9a27d7e088d6c02167fe1dd773a6c251b340ceb670989e74dc9678dbf326c4e8caf257f3f576ececb2417ca03387ed923ba0f5bfc5f614e342ffc18cc4d039c306e2af7a75575b923331bdd3aea046ecd0a1eadfdb7bb3f250f6b4af0528eb05b426b4f0de6e146afa079ef32cc1a0a87011b16dec9d51d5054f0a34ed385955aa522cbcec9f4a4d8ca1ba08afb8f7a3422328277f6abda7901d679e2979c7c3df5d759164e16c0b9e3bff1c552b93c9f69f6c5af417d9fc1623953ee11f53b17bd0f61340dc760f86cbfdff49aa6d00836202b62c1c14038dc4802a77424ab53c12eefb0d629283e88ebb2fa66dc3a850ddde578e2fa423747a87f6682ed120690385f2f86b563506aced34a1ed61d2797e216008741952d7e66c6af8f8f8e4d5645b4fb7c52645bde86e0ba05d764a22b7b65dc603c1089134bd3d165c97258511ea45a3bd074fc554257895c6209a85efba4193a3e3932390c649160725ffc5e01589335336672a96766e0e2aba5e0f5388387520a405d6e64fadef4203da1e853b01b2436fad2033474e646202b3676463bce44c3c0c923f8c39b9245e02b41c5bdf84acaae07de9d1fe6d643abbee785df4c0f4e44b2e9c4930f3f9bda3e52a4995a8bfb51b061439d70b62d53a45ff11fc859517212a7dae5064b2be327bd5c3602e7018e5e8d0e83f8fde26ca19d6604a77a4230ecf8464909d9c22dce6a6efd64a719294c42661eee683acdbbd347e2904e709fe5e0f54f4192aef333452de1fae69133e5fc032842e714c034789ad7541a97e4909c582e4c3d371086d358a39dcd693acf3733a01be5f5bfe77691dcecc105641dd48f2849d7c9e6e0e0e1ea36da1443359e396cc7dc8d797b98695f9f452b284bc98a82b9ab35eb10150335f204cb9af60e3875778acde1a8d42874d0e2df03a6dc6270ce6f90cf5ab86cc68f5c95f862f980d7669a026d2e5fa28b062fe0bb8c9e3805967d94cf4e23f965cc1d4019ee4a39788a2a25c5f371a0cc2aeebafd2c22c9f846f416461ca7414100790b3ed385ec0395cedca76afcc6b808003ad1097870445a193b2aa1dd5296f81bc8fc4ceef27ff3cff04d31fe45f296445b7a587b9aa4d5dfab8710d15ec7588f5ed20dc95c96f54f9f00747d131e2cbdd0342a5adb25fd35f0fb3c6c5b680469145cf9265263677864c378dee1c1ff824c99d41ef9a6b2cb3443bf01b291eddf4e44a03afbe83cc4de5ecd28730ce70570c0c9e622f4dcb10767afc3d39b23c2acac42a3456aca0c6634a4eb4a406179d675af7cb087608b7059885e717dbec9f3acb60b47b8485413e8df5c4953cc205ec2e2befbdf014ae72c9fd41d2fd71cf3215a79590ce7c41768192c3407613776524d06f1cafcae6c00018e5035e2d0b4dc2f5c8f8072795f08a7ee3c8a304f3e4854af91ca852e614903d58c4e85c5b2ab6ac9ec2ecc059a113fe8468026f83cf9acac67eb84737c72886055b3dc12113af875dac19268db50c4733a8fa7adeff4e1d8cba7a2d27d6c68295115ef417ebf79248036c19ecb6e870dd46c485dc30ee98173342a8b69aa21439c1b65a41703bc7180055e58ed30ae16f71e9cb3a53457643ad339a230c76e94fdb64ed77cdfc57012201264c2e67d04eead04bb364293e1da299993bdc40d2dbdce3ec8a23b6a300fabd7b12b1257821bd6e277d7dcc2b7ff12fc3903a40876a17a81f8340806cf6bb8db0b68addc4829500e6597945dae674fb9bc4e9f437205c0c213cdbefa7ffc92098ec245cb2d299aae9d1f6742e3ba534cb9c9fcc3b2d5b90285ae4bef9d7562e975d9112e04c58cdb3f241fe2f44efb1422a89586f94547d6f5ed8cf6bc5f65e7907aa6e45d2611f8a8fc70bb357cd643d8722293adc7a8625f7c8bc62448b5765160a7c569af346426a744537f77baf06376f7a0e542c04b3d7faf537b14096eae1542d49728972e025eda1f63ff4d6bd23c967f25c7382e459f84515de6049d38cecbfe003f1e4eaf8a46d5f5995516ef4691d8099a84cb9061c001403493b3fe1faab613776581b43824e84b3f9507ccc0d6b60176764cbfbece7cc4b7a8e553fdc7927733efbda0a276e99d51338bbc74bcc20c7a63b863135adbf48b4f49516cdedf90d3ac8b1b6cc380def74bde827885ef0f2e933a719311381077d09ce7c3e2541f01f6fcdb6a5091bac2ef963f576d98e077fb60f463053d42d90d03042ab9f452e967d8015b769264f3815d6c2dcce9507564dadc87a119f38ae61e27e40e16624339bd57d0580e124637ca5d2c4936e94ee81cc279c44640348ec6a335106d5f818b21d6727c1e7db784a29ed739cc8886960a1e551bf92501fa29047461f9897de26bccdb362f9dfb676b391c0f18aa706a12dfddf15f36105e540d7a8baf74cdc8cec1f1710b3534ad4d0c331adef79cac0819340ce4e0a83e14556984ec04cd9ad3c562d81e3d224dd541fb0e7374d43bfd8d1d2b3b7f55146493a926ba5ad27ddd3d4a2f6f440a230fc9791c3ccbb2545af373a9077e4b1f57eca4952245f64c89d5bf7c2f7e65bb569c7ef68cf5c3311b2fed4a02c2e6bbc6c5404200328e4e72b3d43063503734c715dce5503dc2e350e2ccdb01c02afa8fc10e8ee7f567c9f013168f08230a574b6b9958b6847366afab1c04fce245835f9ae87716d43bf3b384e2e409296eecdf96cc87a3806a5de1104038d7cd99a4df513e7137a166e08ad3d25c586793b72a31028737e9da639c95fb5483e5d6a3f11ef4cdf0310c9d5e514a36b92501a2f4327e94821d420e0b85e99208e2c5b626000bf8f472c8cbbafd2505bf7249bcf880b7202af80317c0c5af955fa87422529b7fd6079d5c0eccf49dc69a60fe267f1298c6ebaee8a40148af39a077baa411adf6096f76b9ee7ba58d91275ad31245be38c44ef3ac591fe4805a827da495321566ee96f1f276f6ba9efc77b522869c0c03d9ee8eee8cc513a2b5ed67dfdaeade0f91ea9974ac261d7f355e2a2d31a97c46009e8e2c2b2fd0c02c50cca0d440b11d2ad2827b426c7bfda4153e0316be36b967bcde8973e72cc3bd2003e908594f88ddf62ab7a23a6b5941d5f11617a729185648acda4c44da335f513d530cda6528b12e25e3da6a7015cdd2c9e11f9f304d20a3cbe9044bbc54ada2a69d3fda562e22b19bc69fc6d87455554f92663cc08bdca35a12cfe04b3e3e0a5df984e240df72a711cc3de74d0bee55e1005fb13668ef86bf27dad3605ec645eaf23d64263444ebfc996fef6a5ecd04a8f1ad59bd52642596620758522318c26ad37b7dd06018bbf86edcba2a7966ed6451c23c17cda9d142b66247a60966f637381431830eebc6a09476fac869702f497977c9ebe701c37f0ae6fa1f98f29ace9c300d1e5686bc618def8f39aa73610e6ea178f8c7738fb1ecf1c552a502e63c57ccd2fcba3c64b93f106f49f24541d5c2869fbb0a0e7c7836d3ed783d42c90a02404f017278e24b796cb0aecca799da3e9d33b82d76b0d8f0194333f676197306a447b4e00eedf660c3d069a2080188ee00116a19c3a2e196ccd97580fdc5dd916ca4035b138c3ec13cf7754d71402ef9e38bf00e971e4bb8b0a9bf628f4bf7e2cb95bd2f898d5fb262ad01a2d820d0d06fa5397d70409de60b0011341327b4b47b5bbc12cc2f84c8b4867384ad10800c25bb9bb2a6a2df92a0fee3a41f2d1e5867d31ba42d4d096bb430b69cc1b36d653d0714824cc93e9e497db9413b959e0fde5a0e79da301ba0aaace2a6a54bc427b40fc445415ec43039f5837604f1f7d3ea86e9e90a4c75ab21e8335abbc46a73ea8f9601a1cc4e0b6f840395c8cd220e3280e58beb5c84be76a525ee2bd2ce27ec11b00de4c8ab204927a869d3fc2cb162ba6a3c94b2acf9a2bb672910071caea267f642442ec0900cdea9e359a6656f5acaab88bf944dcec974057eba930315cbf3cba9cc9a5b989a0336c3d670598c73dd3045a825b0eed05020f1c12b78c1872a163082ab31e48dcacf3b2bbcbd5e5a716fae2678bc193bc24fa89cc4dba2fff4052def4831d21385ff0954d33b0c2577a7944f76e0a8441131ef255f3798b7f58e57abf640ea471d35a6d5019c860c96f146364c384e39cd2e3fe70c75a1afeb62e86151b24d665be48caefab18a24aa8431bb7dc99ea6283a020a6727b869710497cf3d91846800cac3654fa2db38aa8acab94079898a7de4ddb15c6ef2a6faced41ae83a9ec8114a6163041432b4e4163abf609f93e12962d3a984b7f9bc7193e6b1b2df8c7a09511b19f27f4b3e469b2f3911be6a640c77be9b1b8ba752e6d19e63bf019b97815450efc6d062b28deb026a7f671ed02a086c1cabf980f96c91cdefb2ca3de3a1eaedf4ea779f6411a5cab27d34db5ccabae61b9c5573d4d8563f7c8cae5b97bd12acd65221e7f20b25f35205450ad94a423ac4f2038ce6651fbea052c232b2182a86a7f03d5c11052bfae437b452e241190a5841379a88a1b49071fc8d920bb40abd7d76e95995bafb3edc660ea4dc99de8513200a1c8b0ec40c33239becdcafeff14890a239fa1939ddd3849814cf253d069de00fb5f5c5ec7fceb290f13833ac8596278ddf4a27889e843320194b52e397e407130d7458a4d1e680a424736c93488100bb556e11417441afbb09777dbd8770aadd274175ec4d514bd5efc7416b40ffa3f2986353a94fbb636ec1175df577cdb278181a65d8630fb2383df03b9b49bede743b3ec9732217c07dade6ebf3257fcf37b728b4e262f362a48b03c90d81d0609cc8c2cf8823868f089a888cb46970d097580215c7a54a8ec59b0ec33b1f51487312e4af2f1652b3f7fde36d9e5fb9cf16adb3226198ea995369d3858b452127c7838b2e669de97a672ac00a64fe0833e17e4a2f6907dbd32fe0591010159427b4ed346cb35a917596ed3cb69cdac956b945b369b2e3bd4511f7838d3971c6515980fe04d42f3f1bcb3d7a3752e2488b9a67ac226782fe7e98be54822fcbff6a025a1c7d2c00a1e7f9b9fa45515b54a3c7552778b1a31f632cc9cbd30f9f46e8fc961a4cb979d5a4f9f800ac36652f7b69edaa2291aa5f68f2a556720a9a689521c4e874814dd54674ebfd4798f5e5a2c812a83b5e3129d726b082d3068a6b0020248008026f480a8e5ddb6ea4c16f82c2fabd4b2d97c69a2aaa973192c3e64d4a3ac27fbeecd555766b9629907ae3c80987669fff9163abb867644279f8e10f357c5eb6e9ad4443fa1ca486e8f784b059c639b209354eeab0ef075a53e357e9d724254cd6ba59fb6dec9d87e9cb680e76707bfeed614b8b768f269ab863a81860af53ecb8b0909b74358b5d4815b6606a2a17dea24f7b6d018b152570fef68b31a2fcec30d181fb74a0c117e631d62d3c5445281c5a56055443d584f512f3a462307f09abf8d8ff16c07b546029317ca06832d58bcbff9006c05eaf0f4c3cada586d85106eacd67ffea4f6a890b3745b3ab23943d527e580423c5c4351bec58d756b5a172b5290e3e6e83e97a52317c1550d9a3d411a9a48f439e3ee4df2885b0967e59b22292c3374b812a7f30d790b01079e994db83d054b0de7f13815dff60e051650da314d55ba77134c04742f530ed4a0ff7c2d9714687fafaad279acb38c3d6d45c6dd6cb14bde41d7e1e461bfd8c2e7f4309d98be00766b2445537d3a0b041167b13b8384757f5f8ddd234794fadc1df76f1858480de932a7fca750232d64ae21cd26dbf3d79a8996dba2ee574c2ae8f8979259ec247f06f0184724d3323af28581058cfacb7b4d907419ff4255ca1246b55fb126c2f2e6333f5fde21b5da91106add338c33e9e5f9947b7d48ae4b5b7c3aef8a120511a7310328ba5775c615f15631de62fb4b3dab0f2654e9b44a4d50824ba04623639e704fb46e4a07a504c1252cc56c9d5e86286b50ee4dd923420be7743f4158d35e3508dc0d20fd0644740ba3365cece63e618c09a5ee51a2921d7aad3faba01f3454b39442bf5a49114930ac753657e2ee66ec470c39dd961507a46ff5335028905c7b3af677393c469a7eb188b5cbc6c172955700c3446dbe0962ecf3dbfbee9db01d4a1821fe032794e92be31b42e8539b7a5c8a1e05c64417c206ccf661707ba005897d306ce019ffdcff0cf5924925b5ea29dd8b9ff6ffb992ed95d779424ebd9baed4b65f4ef601e9202e675c35703627b42254a5a7c5a11d52ee1a146e8452183d263334f3588a044575b0d33619c397b0f086704945dbb739cb250d25314d5d540afe1e03da753abc368a5ec81cd3d57a4358786cbe5a538561aa9c64ed2cd385d5236c37cc859c995f3f442789ed3b045361651331a4a980cb5c4f3c38968fb3eef995274042471452301141ed85addfafcac7a301ec130d2c4cb23ebced7def711cfd4d4ca67d5da6bce3cea3fab78e5df4b0daf337040564c664d671bda909227c93a9153bb6b1c0f77b25b64c424a5de7ce612f3ef3bb6a2a93a2f9942fb85c5a1b3adc2c343ae86d5b6cf5b9720d63f2dbd01592f2c88d4f27d7e53f2930aed51e819efda50316a3fa7c5951c80e6a428e80d0d402ac613231ee7f002e3013938efea326a6e563e56bd09d7ea2cc8b8538fb67a012c96ea3c825d70527504c0ea2ef92bf1a9d3141242713f3b1d604d7a5f8b584811cc19f63321dde4ec9a509436d9e393ea138bc58e4dc9ec2a64ec4843eb888279a675123871e5b515a909db22766a27ab3d425b7b7bbbb5fca19d21ef89b7f87b77bafe5eb718b0259d73431e3675bb9ed68a8e56785c83285f122ceab7cf57dbd85d6df6c3bf0718efd398946b11eb0df1fd7799ba3c783c5093bc0d5ac622e0363d604b2477d28cda198fa48937ed03a1ef95f729e36515a01eafd76fda337959873da1cdca0d9961a400e67dffd73c54cb67d19af8fbb03d1af040ebac1a5204f8bc833752a2a387a98bdf4b24205018baa5869bd5a3c78e58351172e33f96a5cfc150f519342dd9978c6f2871069735038756de7ed3d1d417f747e8966f813ae04589cd47a8ef19215a27a7c945fe0330a044404c26ce831bbbabb7dabd0f8e6a7cfaee549421608af79750f2d82a63c837d38cda5a96c59dc720002cde79a472dc9b44b363f371f64fb9086389c126f08d4f2dfcb904e5f49f230b1de09077314772765212dad3f0669b895bfea509b22b8056050caaf7ee9cb414c9b578e023638c4cdc17e56157dc4ed03cda2707cff772a63b3fdd44822409890565f7a78598741dcd414e4765017c85a31254a83c6f7941da495328988439ff82db10bb1ac0d8a3bff84b2c52852dd8287e84084cf40b827244b5795b665748826378dbb2439c2e0bcf02f66d0a911c72b04922b2513a5cd9e8d6e8ec3778c9f2acfe36949cd997762168a277ec3abce11f841bb7eb280591ce5ec8db6f71d0f29cd40c3889c5030bf61a29ed7f3ba6f07ad1f0bd7da8cdd51d28b4d497316682610f5c3414af365208e766b2defb7fb2d6a0b46ee4ba42935d9f206f01a45bd4a0151146b4993ab19a21c1092a2e74f91ba82239a6e832d7d73b162a288ff32b602d1aa98eb5d54b7051c6bed49f45714aab70e2d73b14d1009fa920131ebbf886e71db14866a230260f3aacee8f79a0416ef0b6db8621575d7d138f60417686231f78b57821e8f5ea7145c8bd5d18f6ab72027049a9e13883e5942d527e29e73567407fd2a38fe22be295f8ec15db6507c6bf2c49a84f6587296de929c064bd753334b757299b60aceb65a1aaef74b80e4cc0a355e6fa60a7b15cf609d5f0a319eb36f8e3c2bde7738e059c03d8210f931589fdeb8068dabda53a3cdf6a4c914f6ceeb143c6176bfd5b96aea745e5bd65198af5f9180036cf55ae5cd91f38becc4f4dedc59cc18181c6a4e7f14c0199b6a1a42a5097fe3ac095760f0390fc79530218f755d2db50ca32b345e039106abd576302e3cd1b609d88e752c8c154482751e120677bd9ffc6444c105515c883da3a46b3005f63d1769acd63c73a33df59d5a709f68e4f26d4b878b9661c39864279d100017625997d864e1ec06a122c5e04b8859406d0c24716ac87421be94ef6bf0e39c1be149fdd8591320d673ef84f29b75d0223de4b0155c99e7174c0a1774749f55eacb574c4c19416f1c2adaca3cbc83cc1ebfe4ce26dc1c9091d9513d40007f8d65be93b89f54092a9671a5a9cecc512e0d96ad9138d8803f19b07b65a6057830143f76abd5109e613b5ceb262ba8fd48c8dd48cd80de305d419181f79e3601ee5300e8b94155377cfe63fb762b2739c384649ea83337e8046f24636744206f347ffd88365850e969fc8742d732989987994bc1fd9ec9fd799667151cbbce8b43360ec44e8d31472fe9612965266f11b961bdbf8028803946378453552858b31f399fa9a0514ad13565ac4aaa44eb957d814a502e286813a285d95fada1eb88f29963ee2f37b9cd51768df54cb8c5ec1f80d1952ca9d6943e8eff65de6815d7ff2c9d9aaba5456924a8b7a092d7f83c90467d7e4ac8b9bc041929914ac4bb0e9bea216a8a32c8046b8bb89c07fcca559b15ab3a5c655c8a7a4fcc018fc96de13998e57e9260b3a3932a1109bff77696f84e170a1d79bd125606003f7fcc718af545c0516d101d230e7128fcd80c93ba2d0873d7a0e814cb7f09dfc80c3a490084dc1b549bdc50f10f94b225883b9bf227895211211f88c64c5e1c9d4e567e625ed3133e9f3b9fb053edfd2c5143c760fc83ce99b32e2c9f9637c3067e0192d3b3c4f51808bf177bab0c9df513cf0d4ae292bd0ba3191575ade42761556ad0a55c916bc8d49480355ce1975376ce8b7b0069d248a58d8af73d16b7992829a46b7ed70a33e777e05cae349213465082fbdfaea91172de3741e273a14091ea8aafac0cc7e6977707aa95bdbd396ba9b0aaa2478518323e03cdc8c9d5fa56bb2338c6cc7c7b5cdf8136c769c42f9e31bfaab5c99f465f32f38a3c3d0c7f751a5068bc9531d18c3c0fe2b5caa5c93dd6a20d2490e0ae1b040bd31cf25374dfcc94cc638c3d8c168710d512d3097b55b37f7a3b516669205becf86fb38be3ea5ad688c2007d3554f7a4926ac3a8c7f1a2dd39ce41254c8ef8b7d580172e3bc1aca31619b9099023c56741b31e5731d5d71884d81c9868387fd2e5d08982c579c8309f4b9174c10132a7cab1841ff2b86bbacb65676b0dd1a978ad3d770e286a9ffb56084cf6b57075cc6401b497f70146735bbc0abe9e46ad3075337639a6bfb6cf288e2be2b39490e7f2903f8dccee7cd7205cbecc4797f3a33950be3f9e0402272e3e6b104df3f114e9d3421c1067d38701ad5806f44f451b6b2a093839727da5bb5e9cbbc3e58d10af4cc4a89586e3840455067517f684151166d1a80fe34567f37ab97d04beeaec20e2b6bb4c412503f37f5f777d2a2fa91789c29e898f501372743fb8add0042507726d87968dd6f358e307a93a47e826b75c0e730866686c4a2bfbf6e54461db57d65ca432d7b2b02f07c7af1a8a3a258669be2737448ba91272a8d86990a4b7bd9371859b850076a74d4c51148d82970a77aae0ffa56878f9a16d9b0d155d277f24196e025f3c99c94e949d949c3d4c19ea807b5f6ad21b1366240e12ae0a4374aea770e9051edd5afcd4ec25431053e7c5753e8e3b1a0a6a9b4dbd389034f266ea981dbc425dda79996603621a8641522d642c7746232e5336ccc40d510975a5998c7bad678467aff074e54cdd206e88a872ff9410f33a8ce58908b0c2008206232be675973d616bc9890cd149286990a69f7c93d2fda146ad9b248898607cc9dcd91e5b896d7a431367b8ff66c50cbbd23bc720c7be934716ebc91038dee3efb876b84dbe3dbeb5c20bfc0a8627a1afb21c7da7533665d48afed0060836c00885cc30179a369a12407bb7de91e905c69ee663052e16aa0f84734a7659513ccf7b8e7bf9bc1fd52d67a4e87cba73573603ca5adb839e3c0929c54cf775fc3324d652927935053ed9da582e9ab2671cc6b47addc6a84f73fcc7bb51a9eb8cf31b136437ed03e2826f9d50c6ad89587ed0a62333343a1f0f4218fd46d8821b1111c3ad90e8490aea5ff550589a4bfda525aa8d1f88a26aa07fe48bf0535ccd1d7e262cc6586a7579f07303c4ccde6082cb30650b352d68dbcfc599f0915730b72236478c021a642be7045b571b2f82d7f24b0c9eb036f28c12657a8f732d465ab374354e7ac42a22d6ea2a9453e7b097ca05636321c262db15f1b6fd14d7c8ee02943803dbcefa822a1a80a5e6027981e88f1cfcd94f932d4b9e59dfd092b03506ac0143cdccb10c19b8d30d0f1059566a1147a9a7380b57d04c8f515bc8e1ef5bccd5d6fddc597aff560c56772f72234249eaef7c418cb8f501fa7c8ee23a85d07791748fed4c5a17b3e20b2fe6630c59ead6eb975b0d98420d2974819448ecc4417b51c02bf75eb31769e015bb00bd44e0b2525aa1beead7d965d7c00297ec88a5056cee095472aedc5432664e8560748d7b01cf4adae226af13799a592da2e582d94be88a2bba98253c15cef6158130a790da0caae8e1719d0d55dd47be53d3f564fba5dc77bba704ba5db5a2171f5dfdcdd735eb85bb3b8e1d49ea4b00d4cfad05b15afe239f6d494e0799b608d38c8c79259a3671c28dc564ba417e55eb733dda396c89de3e901700fe4912b91db55f1290575902e1ca61009a5cd05e545dfdde82c2e1e553e390eab11b26e7ec4694642e1bbc158a905e415e6b161e2a56a4b3fdcc005ebf994f24d0f41af6eb387e4155e56fdbcf23fa49b33ff66a14c91943d4d73cb7e3a4961535887fa506e1941c4e05c2d1bccab1e6ec0e070707d222fa5be2a58f8f4dddfa62fae7ff6cc440d7ea8d71ae841f29d109648528de81edd52bfccb210a3ba09983630facf6a00e3f0b946c1735ccb66186902d9d89a2c05c56a2b529ea88fcd09eb2601cd2e42ad11c96aea3b53b9be422e5a6c345e4f89734ac19339e0dbe0cd0cd40b5e319742385a396b8e791e37dec84f1e7e36c4d05ad8bb4b84b3f4021a4abbd9dcb45297e1b3a9bb87e86c858d3613744a29f864dfcaf3b1bb94933736efc32b4747125d3320d0a2906f3a87da6df2f008acf1a16b8d55dba319849ca96b7faca3ee2095f2672d828ccf7fc705d84ffa0ca8027a7cec84341102de78f0245a87fd0045304a38608d59761fd47f9da0516123c5085a6e437f071872a87f499e1ce187104c134d8b0895a23de012d5d64f473d979a466bfccdae8339efd232c62d0c8d82494c7a26d49f69f4e48cd31008c1163f2a053b2f9d7a0fd8f8734a97da7d54f137c9e562ac3dc19eeae538c2b16d9a212a80b2615c71f6aaad996d96e5729fd55e7219ed2e14e45ad4f2af0d646c6f8388feee93e4462418409ad893ba2de3b80a3c7d66178d481e4c08b36a3bbe857544c43ed21efb75e7e3f628d4b1d12cf6b8f385d195b5d3ef119f5b2df1c58492f2bd155a968c0fc525c268ae4ebdc798dd720d8f83a3707988b5f2439861531146832741a6841cffe4b1da7044b761caf07791dbabd81d81751dfdc24f88b8a9200aaa33dc172c02b2961f561c6dbab9ea6c427cb8ad29723c82910ea90a3a616c16aa04eb8bdaf63b24789963f8cfb3f7b1bd433e8c88b74317f4f6c472b920291b4656724a9c0d80c5b546c107bc49229ee7fe756789b6e103eafe296f48deba2ba19b1d7368c393e4a61ade671b6f1965ec8f560831f6f6350d0ffce50d594d52f1928fd00e3215f27c4bb906db0aa4dbdc5468708f7f9cd2abc0853215f098fac113e7ba82ac45caf26367af5f327ac7bc1cc28dff188d68cb5aa3e9bd87a3db5bae0f5afd8b9662500bbebe7c5182876f56129434c34d99c6738c7bcd51a59f159596f1cfcc60d9e8186a163a7a56bbb23570e61c07d57a42a321f708f2da6282a8efe66e03e425f743c47c64fe476e9bd5cde9e089fd240f325737d5533939600984a573b4ff61da1469c77c2085237a5c97d92d2dd22df3c575fb72bc5d53970d53b4691ccf8bdeaf20807e361da12a91efaab9794292f1edf32d37c86209f6ed1c5eefc9f4b5c061060218c2acf04fe34b69540514143ca6c90b8aaff9464cd8d9974efb1d7a5e4b260033ec1c77a47ad6c6e31955d791753f5cfb38b24ed1501277ee113feb634c1af1daf535f71334879e2105a2300d2a8351a7ee6975af97bf8a4a2ac73d8bb2c07467c24a592c7dc24c90f8e2cbc4b7816b0258226250b14a30fb75f9e7711ea6943b7b3cbf7d09384a444d4209d9db20016a9f0662191d9be8d114c3d55bfb5f4cd806f6737a38a543256332fca9b7bb35f0dafdfca5a71d8c85205d81b6a53ac77fe8d7a3e14bcf616675718c5c4a23819030855aa61d5d20df0ed2e14279f9e40fdc6a1fcfbbe9baa9059aba2d931e9660ca76874cde75091536a9ebcd9ccd8912975bba51f1ed5b8fea2139f28794e78b5d2470ae6a8a76951453d45216cb902eb68ed390f56d4d314e826df9eed39d0d64c576787536a173964d64340fa81f9483089e2d74253bfa86af30299c3aa1424ed6d7be722da3bbb8a318d4a0d49520179c95229c00ef7c6744ec6ddb0cd5f62bcad6ade76e9705d3d6a2b86cc1266de79be2b2b411d316ab9f1bad9b9a8813603388f646123f078ecc8fba521c83931132d388b761aa5bd8f3043b132b62fc4dfd4522aa396e3671e8e2e1463a80d0b2055d4ae42525549ac5f479293f4de74ffdb96ad997b707d8c98aaa0fd93f54440b37d8caa054109756c67d184311e9012902d9769343f7cfd2356761e3d091b64fd74aa17da43015bec3f63be552f6a9b9f40b80bb16abfbba49777fb4e4d2236fb95064ecdb59a2cb6222c71dd93135eece1dbb0c0fd853250687642ffb9fc76f6c78d5d708ff0f46b6c1cb294bd0a1d7c9117327dd1b06de765402b4a6a865b8522546b96771e278d5d920cbcd7d7d22864c0f50911a31af6623c48c5340b1e6e6412bcef2691f90e4678813de300dd43bf1e17e366e925664bc240e5f82d579f6d5ed44487b9f04858b19fe15c373ea4ab81a87123b6d4a7e40247f0389e1ce953c34635d3bc8dc3bfb8bc25ba05ef5cf71ce1abcf903c0cd79d219482fb9ac7fe4676952869eabcd057da23e6255acb3332915f86dd5e896eefe67980e60082f6e7a54988eb4db9da8f0f683bada58b7d622495d56c7460ff3a05be5154cccd51d188b4e7c6193a6de08288d6e294699630d6535c46674e34b5d6b7201118a7122343daeb0de51a670a9ad182b433c91405f01a8bfc552a131e21582ebb6e53d0c425d03395699494d4cae4e9ef9b6c126dca877d0af1ee61aed1145cf31d7dd413a23d98521e90905bd435612f04fb6f8ce37fc3c658dd154be4e4e1fab63df9fe796706abec980cf3a93e3d6b3256a69dcd80638b52edce2ef59e6e3d91bdd2c2237466985440790ef003b78862380c6165c4abc94c64ddd7bd5219a15dba281a25a2d674bf14b0f5de86a49d4e7b85cc7c544fffce234e574f40041de8e3a16c4bed526dbe5c37a9e6283584fe132b3039503465a3b07b98fdbc991994ca55659fd91def3b58c4b6ac5c14f2a53d4529ba3c88cc64b66134136644ae2ddf0ae0294e663178030aade8b88d0777334a2722b2e6f55c89daf51730e42f79f79c69bab7c0b1cf173d3548bfaae05bc2e0976366e1ed1016cec8737296a90853aeae619f913684d5720fded4ffa32e6b7dfe985f797ea34d7daf9b81254cc7f0030f955ff1cdb734ef9360b5729e147984d7ed8cfbf22e255bcc7843bd296f2f2702e0485cf77592b60c9eefe69e1c6c47dd6fbd600d7741ddd807bccdb399df7684bdc7731894e74496bf60aac6cf14fe447cf571f236a7ea4d4796733ed180183e29caa261b6b221a25551fa1ec2281837a84c955fb29318131a8e7e0fdde2a1089838d58905ddec3fa3b41a918b42a5de7a9454890b9d057e2e70041ec8e32b547ee8362a38f6b921ecdbf77891e5b25e34213918e2ac929dd58d4b55053dd5a9d0ba479c96a000c29ae37b6b7b3bf99f910b7347f5a2143bdb831b56e1e9356824034b47fd273f898bc5efc745de9e7afb890f94bc0e7cae3879e1a6dabd4b0e2fc8876668d3fdd6a0d46624b3b6998150cceebb6c9a998cce1453009ccba7f67c39b380af8502b3b24864244e31ef7612715926bfa1772eae90c9466c890ffd97e689909aa75676c2e0aec71961f924625175eed29af505bd45755b28e0a95856f3a696537a7fdaa3b75defc353bf28bca1d254e4445d1aab2d650fae600e27c68ce282c9ccd4aa595db303fcb5a2f2e6bfc241d8da7c3161029e15f9d4003fb310dda911c1d35cd8de2de18f740b0d23df5a813ea4dde6fb6cea5283f3918fc2805b036442418fdf6262c2d1e7fc7f37f579cbc906be180cafc4cf2af5b8c4f194637b97700b6d69fa239905a601e663425ac6bcd3f7cfb7af400485cb62e81d51ae413658886614ea1285fcd6daa39ffe30c09dd7fd98adc9236913c87129d0a4295edc87e15ad383326d77aafaa4f5b8716d1287d5df1fb4cfb77989359c600d855dbec90864c0f1da0bb517ba17e7acf8212d206932b0327be97a12a531e8031b01fa4ef638014423fb86b946b1ba69c815adaf0990c2d5a6aff5de4324aab109023d9cd2357781be590461c6c65b079ee3954321c80f9c9e913edc12928a7304493a4ba5c93ad2dbd0b64d6617a2db79e66c7b369cb1fc79aef0fcf4a77f2912798671111647a63e88888754000808bdc104e7cfd93fdfd115bc3f15d9b58a3d2a948b534b0e1bbd07607c18346dd0bcfa03a2c839670b950f82ebc111dff2ee3b09f9a3813ab422c8d06a7b6f05f363023cb346573ead8193fdd9c1eb84735ffdd64128dcc9f051c92852ea28c8a51dbdaa9eafd680bf9f6bad4ff4930131428540a20f533ed6eac958545273969bcdd436f572b810ee196b1d67e8d1e3ed4e4a52e7dec891df1e5b9cd0c98171791bd9a74ca82bdc6ac4fe9d3899f82d8cc8771de7fe4d93701ed4860674d4d6cd97d8a8be4395db6d1ef312ef9ddd090631c1b533c377575fec22edf1335925a387f492a34de761319051fd38bfd3a1b45d10146e1e4396e2419f1c269d62152a67a38eb63f8ca456fda329ba9ab594b4374de06606d75278e98884eb7739d0ade8b65d83f3065e06f1eb3c596f1a0ba2ed0c5179585a32c8af156babae2ff0b2e1b27dd96e6597346785a65c04a8bf9aa1cf274d5d6aa27b461b5c0373da7f3544a540885c541c1826ac23c30079c3a715972fb308e08bf44ea2be68b144eea76d98f418344def9c05fe1c73fef13b80bcea4c5abddc7f6b0d1d744dfb390f6071e7df4e211ff526513a4088ab9fe7784411d336f61e50b7ce79e65888e54744d188da4163d8d918fe974adcd754afe840b750c734402944bfb3d69de8ab71291710dc7be3ad52a8f379347458a51234c2714f2dbbafd099e465dde40af88cac1a578e7ba7498f5e80bf53400fb4077baafd60c753467c2e7be04cb49963b5249b8ee2c5435662531f381bd9e7f050580dc0094fa6cef24901504ebedc2bdc7ab25af6a2119d387414e7966a3e683f61ef12ae2d6a5371437525372d67501407fd113f77c312a082bf5212a1f3468f13d3ed827ebeef6aaf02e1398c142cfe57e240c616e379a2e7ec19b3eb1814f1627a2793b61f45fdbed5d2940fd42149b35150db211fa3e3568259a497d07b9e5925a4ab92f3267aec04c04b0a8a8de19365930d9075e2993febbccd22361bc22d037eeea77bce2f4bc4f24d1f43fa573353501ffbca11ac14ecf1a1e36f76494e6d82c7cc0caf045012f4a23d39d8f9f3a7304a72e62f2888bb8e00cdc803f631cf37a52670fe4770be05a6a1d898def0d62d3b17b4fee77e66dcd5bdde8884450d18c4e0e16890aa447cf082e668da1249d73d28c95218209c6830cac870345f433f2029096c4386919b605db1d8a63f4bca1e0ea5f6cd5f78128d4c7c6525b6527e1d8cf7e870dfd0c672a0c92ace36b1d6081872bb3cd467b6098c13f744d49d05cd408a78a060ff91fe9f5ce70883b2bd7b0c8fe64047e85527ed6185960bee0060b9e170324c631b60061d8543837ac82815db37540c3187bbb8477836405fbb1e4003ba8b685cc6ff192ecc597fcf9656818bee431f95223133fa3891b9bbc8d4c223a2f8ae90d8c086ffea40bef8b7d388c61aa7d0889c29ff187e60936e3ad55e8c847f494d0e4937fe3cef07f9767c18e0d7a94c2766bc9e4102c6648c8c746a3b94374b98fccc5561f780b21ca0ba1a6f0d97421ba237832f07a0cc6d478e5e37201ff3ef9d8063ae7996bc2fdb211f993bf53bb91532c00ede2e548f7188fe01efb2576483e4b1d7e4925c7f8cb612c7428471cb281a066ed4e15e9969f37c753de3e9dc5151d490ecfe7360449da29351f7cf029d251260681829819ce77421712c39ca8f8f7b805254a7e7c1c765260cde624ad3ea4b18ee92608a8253ca50747518a377765b0564532e1bef7e117def0369c96a1dd4beae8d60f99d077c56b1c02dcc84cab3524ed7389fa484f92dc7d9700fc8f27777c0324444932b06b71fd6aae119b4343505bb97cd29fb6b78f7ac1ad0ae745c5029a9d283c1daf7a7f8d2a6c15ae4e5db0fd7cce28fe371aab8eae4fefc8d42c9c4a7a7a624905b4eebb850c7b61909614bd7a57dd99a23070a28b4c1c789b6204fafc89c3dc6537a4e9cfa9de984328692566da67dd9cfce2d864259241f105a930d292b8b2c4cc84f6f78de5022934746e2060fbe624e65cdeb378429ccac53b14366a7566c7ddcb0c4be3b5b4e483d8136b47dd2fc19bc85560bab0006b5272774a0f99831c87b499030bd92f50b63c25a3b2b60dae22037e06ae7d50bfdb8f8a71e0b6f1c239372b2db057d3b6ca10e1c3cb3c6f74949e5ba5ab59d56a956c23e52e9d86cf0e9f0bdf48799c9f1de6521c16bc9555de963bba1440d0fdb6002e65c135bd00566369a759188ed0e58b9d4622f357b4f4e1f3376f3681afd8b4c85b2201f7c0b3a44868b653d9f8af0f26967616bdc00cbaa22986b2f50c752aff908d6d36d70b568904c4c90826e3aa94c3fa88be51d4e0956baf5ca0a08e15aa5843751e42c6e26af39379cb3f68e853c3eb1ffe69ae66c829ea04f0eab7be2b13124129cd144ac002dcbe6e710680e8ab7f9aa01bdfd259e181a1897c52efc264bc5fdefdbaed994ebdb2a4fb7a5c99d59f76d2eeebdaf553485757336e640286780541aa10783b17f0e14b4e501de07716207eb95d93c6d48cda633195a03bf61031dd5de69b7b9eb5093479fef62404920b8ab110a48421cb2b2b51f4eba1d32ab11cea93de0f724dbb1a9b9c5730dafc695b499551d6e997b0748ee1056f82b9422fe69c02b28a35fe79ef8c682c74e05f7bc0126ecce4af6fe89d3e20cb6a1524dc28b991dd383bc031ed6cbb47c90e3bdb4b9f149ffed1b17f055ba508a2077ecfe2efe7cea2df61a9d8c2504aa739dba4d3906789a7039546790d7213b82040c4feae956bfcbc0b1a8e2b52f487c73681d73ce99c9339e02905cff3bcd74c40741778b56f4539be0921b2c02fae2f08c032621ed43c3017d794f42b5e54c7cf13dc8108733f85e3cd8a1e176f90be152cb049633119bce09b9ff35b4e533b47889c79c57cfc7ee09ed19ddc2a87513ddabcd865415b41abb297b0027f5fd2f3c3b196b82e5888e9817a5c6e4b22fab716007eba359e7ce411907a9fde78707bb270a083d57494ccf1a1e946bbab3fbf5a0e32333d1a9a596e926ce63e96c07fdabd874ec6c61fa6ec21c11fa2ce6c25283379c5b2eb06eb21a65291a6556e5d01f9653191e92d9fbe58d70d3f66a381c4f0ba8cdc5af34a19951f8ad259a9a8dd1deb7f7d48f5945b261b0307b173f017688910e491b654d03b2014fac11c7ba40d05d03b243ada7809234accd328a8159a17be7a2739aa25be74607511b7361deeb91d36b61d8c9c36d38b77dee26c640292e7259ac11d4f496f553740dc0e7f541d2fc2c9160c4096f87a8c4bce36d08f32e51fac8231b2bdf7ec8403fea35513215283626ac02497393b3562422747b10f8a33875412af2a49139fd63f3653bb23cc8d0066cf61ad27e16a3d85c496d1221d604d484f4","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"1978680f3fc044aae91b74cb041b4e1f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
