<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"2c791f0f0ea9ee66f6d12cd521260471c8067ca77c886310201a0f6a264c5114860af4420c04c04a391857923d5bb69e330b2a72b118aeb7dfc3b642071522781c909053f2041309a5d17ce2b925d2d547b86d6d3c35f47acd3dc1231755ae9e03d36663f5c4c25d12672e15ec15b691a6d774b162ccb9e0eed498d4caa89e20a4867479acbe2d9cfb51122f3430c73f7c7e533358f7b0812aec698b417c402ab3b73b6bac1e905ceb21b8706ed293027a8613ea026f1c3c0fc9b066076fbefad993a79670debb0688a1d7652dce6871378dab7695fbed7de8b4fd7a380db15823d9d3dbe2834c5afae7a51f646d24e2bf8d5217cfdc6a7ee68412790503910632bf3a22b84e6353185b89139b4556526b11dde6864917fbbfdfed403d9566f804518f89c7d9840848ab5b2d9210d93b9acbe1260f9509a20c88a33c7d2df468d451ef48cc718e889d03d08506b4822c7d69bfffe06949c57136ee81a5893a31a359c04895940cbf2646596220eff750891eb4db8f702a8d52c21fd8693a62b56c28d6eab5bc5c111cf4fa9daa2ab4f5ea0e5d1b03196cf5ab0a5eb4f0c6d930dcdcf54e09c0f935c9637e27e43f52b14d51d8042d070168d8b7e43bee27d16854d9a1e7f9a11bd4f7323b6a268fcac052f1a1266a1295a66cb602ca391a5712c60b5d8ac04694943bd882ebc4993f69f520891f29aa5fbca3e658a66af147c6b56bbc1cd23d59de54ff7f88c96130bf2886edbb8f63ee26d16f2db5fa74318f039f1f5f8e9690851041d132baa6af3f45021932330184e1cc75a1674bb29b18c765f120aa77c7ce57baaa85c694b666c3ac7a4d62cb78a2000f5f357c4f7473d8563313db47d5fb1fd6f296d2976449b5bed41bb5f87af3663f9d459057601d4d8d4a2d822983fd6ddf52aed8dc7a91f765a01a4bec48af045f14bdb71228ca2c9c966582914c70a818d65c33f143bc0fa8a41c41ee0a8816d044e15862d22e1eac65b9d050baf922151482b2f849bbf657b563f10b5b6b797e7ff4641f3d46c96db2c86e5c4e22fbb87fa311cd3dda3cb308fc974bcf0a7602f09c8d4a303f859ee26bf24559d60e2bdac9b2a402f6794dc25da66f04607be2514ac02dd366c6a10d1645d323411c2a90ee22fd96da9429b8f178014497da17d02d4487cbf2a47056a79846676532681c90b1a9f7d6d2fa1294f79b109126367ef812953879040ce8856dd11f6ab360b7b565e15e01b2aa8899930e4abd47c497d1d9231916c57affbb1f3bb084f7ba8118e1a0b0234bee742a008b608606a2ee8136e64af0a9a9e015892fe48df18b2ea00744b22649ce56db8ef88817cf567ba6928ad07f6aa2a8f7664ef1d540d827bbec34d4b2b29a980a789d0f3f6d852fdc30f5cb8eccfd6876b3c65d50908fc9fd2e8f277fb7392df140ac845797ad4e061ce034a1de561df0dddd7612b0095f714d1472a7ecd12721b1f3fbf50ea0a593104c9bfc0e97fe747deb34842a642278cf13dd293e65afe242f6d5854b0d664d610f16c7eb14074773291031ff872d0919e528c3ea12cb7783a733f4b0fdfe104e8002dba0f28436513d8c24073ff5b691e7bcc7b5b6e579f332e2594ab18b019be94587d3b29df1c94cf9092dee26e7001974831e38a97e964a47e031721cbb477b2df4f77583d81b48cf07967c013bf67df6f2a2b1878dff4ddd24df11dbb73ea0e20c68402cb3f1aed75712c661be2e1def41b141a0668baa45e517e33f53c32b4022132468e593568940f1683b8895600d65557cd42c4861de1a4e37d3a7fe6d6feb95cf65380dff63b050be7bdbe0c2955977e69c08870075c04b9f6e97b3d8bdc32e558018524f7d4a7c35ccf73f679e6bf257c8ca15a1dd871090935bbf797be481f5db91cae8e09071be238d5a70f2694b3ab07deed3590992457cc24159a8ea2dd06b1d41e5e27906de89721dfa10fa41a55804c124a9ef3eac6b61d446ed94d1e4cb00ee5f16fe840191d4ca924b8b281418968d7563bf343e4a8bf252e7b97d464d93c75e8e073a5518bee87ec40b113f5daad34c9f3a751c782686644b188f6ece7aecdb8f1654c87e059e517d60dad96771ef531624f6f8f09d7263738510524cf467886f3898b6c24a703fea450a3fc1d64471dd59cd9d722a93bbf3363f0990a14cd8cd2d31fcd08d49fd62e8ffa74725be63afe38a3285d97ec7a636073cc9fa7eb486ee81291e7b896822651b5ca7a121d86db25c040d47b807350bc06a687183598b953cd77d44e7051fdff757821e8db33187ea77b43563b15d226b1275354394642f0698b13e2fe6350c1c2cebad96142cc9258845ffcca718c12085f85fb7d39aedce81f8e46c5edb9e4df73c2ad56707173c26e9d8eaf1c13f0892dda7bbcc5851d30e0c0fc416b4ebd6f012cdb701ee2e08f9e6f45b1987d40dd92af5cc1a99918951b3ae6c747c2d67185bfe95f009b67ade9598a5ccd1bad303e7572b5f52d7ebda6f09544b35ae374bfd3ba55a82b7b2257ba573a51d31fcbb7332ca5609b9bc2b37e6093da702ff9df66c4fbbde68003e6aa4cdec5fe56151f9a4b3e65f2392d45b4ae5f42844c95234c2a6bb3e334dd3e6fbe4023a097ac00014d33a57edfd859b73750a1d4fc19d772570b6305f6a6ce98d75d387c86c1d5d9c6332fab675ba2aec50f04aeca21f1ed0894e5ad890d5c65a005ba3fe1a3ee7eee30c5892d112345f7148f3c0c86796de631affc26f165178536dcd1870b2d605fa16982c78df41bfdaa99a152b67eac7bf67c4a5b465aafb6817e94e54bbb7a96dbf522150a1b155c5099898bce559267133a9981c73cd05cd37fc7ad7a30f32603c34893866ec16dee5d0ea5bdfc879c59e3f3f5719ea2c261d3c7d4219d440b736d1e18530ea52fab5a65fb579c07cf6e76639607fed0f23afc3f6182dcfc468666c6528d950ced5a831d70d4baec2934b9f03fc4514c9225e355307deb9d572e4cdaaf0e28d9887aa0403f5d40d33b57d1075051888c6fffb73d8c87cded348f065520702a5da454bab9181e3931cba63da482b4312f3a7ed8f5ca54a25c4fde172fb489dc6e2ade98f9690b5664af4a5fe5c70479ff187116632c4b185824626436637e5d92287da9a3e07b20275e896ff8d61daaf81905f2eb4463020da19f67890d2964adeb7b0b629b72e524d4e323756693da3ec175ab8f02936241c34c6f22b3a7f6790333d0b8cd24ac7f3f5034bd3f9043e80bf48fe84505db44c808d4bec273a9aa96ed2cea619caedd10922418bf981d463b05fbaa53ceba6e063185f6b713c9c53ee7775858305c7e5d4161175a967988ac54638e47c8c60b0565ffbf42a72be7b69ead42587a32f89ad4f5b1f5042597a467c2c53e70dcb1309fbc50236ffa4085deb8c0a0a94eb7b8dd0735e65ab842560a0028f4cea337a2be829fe828298e959d3a4ff45d53657ea5faab2f3155a195c171a46c7fd354ddd1a3f29c8a9d098d49afb46961ef91fc3fd618d58d063d1e7e53cff3883bd8c3f9dbbba40797fe787954648b05f4bd8d5fb777c4d391909c9e4524922c4f8e437ffb8c23d1f441c5fb75895c1e6433bb6f08bbcf5e38a34f64a8b85f84e331ef9ffeb34005b90918eb937449c8fda1b66d90e8dc91254fa3b1b157008e59044a83e32f8cb62fcdbd939f1d53eac6e0198e87990426c78ee41ede828fb9bf8f22509441a8df90a6ccef738a583a31b4c4b50b5b3dbdc25a346f651d8e95f7cdd275928504815610d51482797e4155607bd8616b4b1173a24cd4d52d68afff54f2d2884183f1a00da536d2502429d009a2be627611e4165ac6c453e6a558e1190f17a4c69d172431045eeeef3bbf5f153f4ef7ea4aa89289d07271b225c841127e51c2223dc74c156eac82c7000e69b0d53f8c4ae8abf0aa8051b7d6cc012d6555a1873d5d8d15ecf49476168f19085152ec943a1cdc6840bb7f80a2fa00cd78b1c4794b2f86b59901d8ad819db9a056afe686dd0deef8fc058124a4953911e2e6e8cfdee0cd74d69ed685734df33219bcd1d40e2674249b83219a2db0e7c7b64af5e8ab5e63783089a9c14ca405ebe2188bc6c3f71c16ddbfe87734ab4218e04862f8d123a9406fa65196c9fd8352ab20e0f8dd5ff8cb84242e7eccb21495209f497a072be4ca3b3df45059d485b593c60fa15b4bf5f47e8df7af02c0066397a6ec0c8a1e5155488c58ecf438187f9a36c554be6b004b88138c9d8fccdf8f000e3272a9ae25c5ae6a7e2710d5adeac3efd19080ce9571ba607ad15fd10d4ecb1b214e73504a1385d89a36b5139647aa2142cc6bba406067ee3675405a8f8a775af57846caafd43907e39ececed0ddee715d6b005bb820ee67bd0fe5f4706f14419da1d86e27518fa2fa1d76f5b74d96e0be2ae5eba2ae67b4dff4bfc0c75567f3e683d73797c171f61475a0de5b90acda22c4a12022400031e31ae82baa40d36d6954ee267027af918767a41eb147d5858f4cee11d8fc57157339114695e35103f92b5952be127edea9aacc866b3074f0d286ce85f26fc10076eb4c9770c5fcddd175cdc3593e699a758e1e91ebb55475112babd4c2fced393dfc98dda6403bb360516f95c4efedc749251355efe6e651f5c2c8aa8d58fa8690ecc430c17e48f7be965cec894def83cf545c4cf90ad7e1b04f67bf6e702c1dfdf246ca8d9f19b3c9ff2686a7f581da3b8e3d961baa3977c6fa98a60e8ec155ff8592a4cae76985e10613e4dbe03909eeea33c7218b27df998a49076e902058875a447b2f1b4afc86a6bf45a2e81f35950709799d4b3fe2be3055ac9bb7124953feef49cb8c742c9549d5f5af11b36fca4aa147a086d36f88759ca375b55b7e03352567b5478fe40a19c413d977405cce68c914dbd70b7e8f323c3d64c6780e882137e6c71fa4a23a7290f65e6f2a0efa56bde1732f3dbc539374792b9232a062d35687b477b550225aff83048bbf00e480df633c1b1a61556b2976cc2d28afbfa3411cb3a909ba05440a0b3191bcb92ebc36ff02b999b96b9571f0ffbadc367ebba99c4e31898b89c86cee4a0303b5eb9aede794599945bbfb08c660552ee7ca6e29516bdcec34231061ce98deb867cc96c5e5543da32b8b082d6360d42595720b8ec6b2d44fe30d1aa8c07c7bc3a9c00cfdf0676b1df298ed7a845a18cf39dc1bd7f91b128703c36b97364f3a31b2cb320cf45c441fac44e5e39af1f290ec415e40ff66bf11a4eebda992cd0743c4cc60b29cc1db8daae8f37dcc4c90d537848173a489e84acb8055f53764375afa5faa74025bf5cbb094e57d8d5594674df7670b199df6c905637192523da7af655e58a8f60601028ed5bd4e6030dc1bfd3b49c3df51afcda150661ccad2aa6ddd2c4fa48fcb4e28b425bf449766ddfc918b89ab3d6dea12b6a9b52c9c8b37c065e5213b690c25c68f258cb5904d8825dd74055740d7b7da7f5737fcae24817aa095539be2ce7b8d42fd26a5ff324eff36c5863721d2c14f29caeaa10b785f98ca4a72ea10067f6df2263b7e132e3701de2109fb34fd62d70d9f6656671b5b3c87789d0c821c87448be9f49deaa501c8de0fda0f67bb8da8c88b8aef7a032f9b019a84e0273752bd1f8643a3dbd52cf52593d83544220f066aa25b74707d61b2691138eb74491424db5ec01b593a8dd0919bf7ffb565b84feb9badf66eefdbba44692334065b277713103237865a7f85d3e1711ef9c550709da02944e151ae14281ed20a5f1123f52082a49b781c053700d012862cb878e080f185f9b2a8786f6cc69a04bdd0a3c355635b6cb162aaab92402de03ab36b08c99644b77a9729d52be44c7c227f8eebdd48dc2b01d3a89c3c8bd8a4548b56daa5ec3881499e0d12e07c2b66ab0053083a3f722af71ee644064f376639c4099da45bdbd82129d4dc4dd20f11d6d033e23197744aaf388b91d632102f6260ead5017aa832fb2a81d41f649b7d191850bff3741c7279fb5af7f1673033e59890b1258fb29a0cb335d0e577bc636c1b45b925631e4c8a4090d8f229b49e3242ad4f57aaf1d1fea6bdb773e0236a322f248b813ccec6cefa68e823730072ac2f3efdec0dd2827c7db5b04ec6b61d73dc6a3612ea962c5ae6413b388fc6afe8abc0b34268693b0c39275c68a3affe3a1414a23d1e9f80883ac21a91a37b950e9ae5c768410cc82b0ef917210ce915724396a369eb42919c4207d1fceb952679edeb57fbbdc3cd89afb0991c817379e0d089243e86be91a8d8837ce0764dbce58ad041605419bafd61da1f2bf213968fc89f133f0be4f898918f1a170c5592d5889c429646968a540722dcf74beb34813b739670723d0e11e2ffbd6e21c064eecb7762560f28e5966ef219b2dfeb97e9c7b61f264202a74b3eadd4d4f06594996b32f6c0b5a401b9fd3d80f672d0aa4707b1e4a888076206d9cd34c4430a81a40d6ca3e8ad874d98836518e90baf04da172a1ad097c510c15fa554a612992f88b874801932232fa18aca84da798cda6e2bef124268cef2fe3a525ebd81a25bdd3cbd5144c8aaa83573da6136b1b8156496f9de49bbfd468861967eeae0c4e4baeb48c1977aa6e1292f38fe76c6373ba35b9581bc2b0cc7250031cfb457e1710eb76e74520630c0f9bb48cd3aed5c78aafe5359bb029498bed6bfa3677af07bf754ef628f714d197066abde01f5f0bf9bca23054e2349e0ae70ca99f13f46334810d09fb5d8e6b3d1ab91160d8a00fcf365608a196d4801c8ced9aa21f7d123474a7ede2feff7a348ca20613ab9cd0a9599c216170cff470e7b77063f4077e766d3c550b1ad918fda2b10e8941c7c7c0ffbb671d97d47aca386b9ebaee97e1b614852fc4f696c50de8e0a94f3285b7954cd8d6b9138c493ce177374f3e10e99435537be5d7bbfe550fa390bfb285fa49b40d177734d9d20d47c59c65fd546dcaad71cb85e5275e3805b6df982d5c50a619bf04341a3fcb3cb73c60bd90c93fd38ee50c8b378f7bd43c47f938d7c6bc483d7c5b9b05b9b79cd5aca6686a89409dc1eda6e7706a8d1fde45e5bf29bc9a9e41075862c866209223c3b265d081796b9501a388d8edf607fdf5e610879461a11bcd11a7827e8b5f03474df9e8fb0bf576a1edf678ecf58fba6c66f92a7d43621b7bc1dcb59c6e1f3407fc70ffde89478dc8afe7620136d4b16bf9264fddb4243f0dc534ac7a13f6d5a47c82499f84dff705aea95f1ee34aa37cafb167b1b0f3ee16c22645ba9b95c65aed47b05c16c23f548b76801a76f476abbd9ecaedc5dee85118c0c39a71b83a1ef7f90c5437353c7a52408cf5b9e13b3a1fe04f96235d67afd2c1799378e0dfa9efb831dab63f1f4867b355f69adac072ae8671c5ba672fd6465d01bbb49d5a7bb1f801dc0c284370c9422a1b4a555586a424f37413d1e847a3fb4f520f5dd774cd1bace56529df758f427be6bccb24ced272b7caedbec32b9e37883355380efd52da492689961c1483f8fafebcf250e854a456a39f6e9b1a9657e60a8032bb3d9db906e8baef9edfceec8bdc416326b1e0451e895c89eec1201a06c56fa8860ab4eaf260dc11be6205f70d30d0217251463c63398e9f573e2993ec7f06513f2f3c47804617a21b26d1166f86763673061104fd4d9e28b4654675591cf137fa03ebe1a57d8fd7a57a0644c11c62a4969442b22720d4b58e366564e8ffe9e1095579c9bcd1472261753b6a1a6fe7cf3a12ca5d0d4ef59016a62e7eccf03c33f6d522d51b951869e8091391ac4ea7fdbca27b58b0c9b68d06641c8ff88ec94cb2a54a4377d6b9e0f789cdaf3510ae3b8565813aea600377a1a2c953ff1e758e5b7589a927c8c1ffbbe40035e3c828c4168de86bd070bc5aa3e3114b9b4b64dfc06fe54b83de3fd053a5296224c0cad2813412c82b154bff96702ef6435e3688342e2f85a5f8f08f5bd3d72c94d0d9d19250719af81440c29d9ced2420f158a47a1d0f4634ba01965b5a760eb3a422a034ab0121f768aba768323b766f784b0adaa865e2696c16a9ef62a78167bfcc8b027bfc2c2e4b43334aa445fb043375797daeff1e4acaf65731576de9d7f7406b92a1a29bb9f8f4c83daf2c3a34d9f69272c7a67b6f68fb8b17d6e85785d315da6a62034113fda8cbe9bf692b4a5b72ea7b2af677964650916a84804ca60f6b9f3d51e3eb279465824e46a471b2692ed1966b8da4e22e0c7208077564bbb3e3608efef98a15e8491065f538c9458ca66d12c22eee4f9b9f28e748afe85f813b352591955f7a0dd9c3901dc23661e3c8c47ed423f633d0e04a8cd1757dfe622910bf943da979ff046a4093076424d4d0d56201d9cfe0704182bfaa7501d761f3eb248ceb352a81d869261eb2a5321d232c1f1acaea27fd77c357b60a79f5ecabe014fef4f0831053246355450183594e13001ded82ba7d15bf85189505d55fca3d7411462438913d006c21475e88f1ec0c25c39124db326e285f45346d7daa0235978ac329f0a5c55c7faefc9fc2d218fc2c8dde713c4d3417ffdc6218da97791cabbaad9ca5e215a000dc11133ccbab26c1f69d503bff1e2608d8a958b1e63ffc838f9cf8077e1dd0af6c195c3c642337b2fcac805a858da24f4cf14881fb1b518a87a992311d78671bb8af1d9b924c0133254235472064f538b8d0dc642c939db5243a13a3370836bf71788752949188850584c1b85667525a067cd1009876a2572aa783a9d61308f8f063cb040f386366667ee175e1eda0ca0aff0adfe1a5e429312fe4c766bf3bf5d7ce409d359fc593a541b7ca13c7d24f9f2661adf2d779b7f6c32424f3b92b0e1eb010add424113cc68ac6a259c60d2dba90e621d5583731b1c2c366f80cbd99658fe2abb02bd3a53c260c250ba0c385d59e5abe93a401785b72cc0b3c51911df5b6d7ccc1df01991a025dcc8f05714d883e8f7ff41bf2e329e43f2aae907762a4887261a01c544c2d8a9a5d0864e8700bfecc1659660479fb0106b2b65799988547c30c9a6eb1716e6ece14cb7696430704f01f07e3eb8332595e3de63f3be16e2ec57fd356af0597eeed02686ea0784e4e1233a1c55e1d0418d99acc619c6810aa8ba967d54b0bd55af54c48768aacd64f30f2f6853a5c8978cdf65348a830cf61b73a06fd1b1347caf21191eb59076cb441afdc281750cc4db582de27068d24db885531acbe68b4e528834ec45add2dc2d5103230bd580def3524e7df3808281367a88cb333975bb834fac5a488018607a1cfe3468859d9e859729b57a9233ebf684b5624d3acab2b239bee6380cb7a1ee8c9e41d79e23a5ece1f1c6452a7282d6c9ab361ec7fc0ed475f6b385899c10eab05afcc4ba20e7844568f9a41773797867a864d50e66ed8c44b7de66ff9a66615ea453eb384c3c2c112deae5cde22d2390c8ac2886b1a33df0f267205cedbfb18fb47cfc3a7c8bb0bedc853de8007170d5a708a4ff47494293c0c3e010a8ae1c9c254475f8e11564a746af14c74c7f42dc6227c41dd20ab2433fb8b7e569b6f87b72baaf8f1f790aacfecf5e29f174f569076aab906e6f89dae0fcff82c8b4ca6e33d95e929fdee0292513e1085e9fa61e6b4b54ec5aa3854a1d907450e8c102b97a62550044245743ec24d42d1ad25cdbcefef53db730fbf10c11d646491830d7d74b8ff9ad47bdaabf7644ee6ff9417daf6225d6665b8b6823885a9c86eaac80784b5c4f3d92f747ea022d7f6287d55ea540e9e44239866ff7791257878bcbe697552d4cb8954ed9b44563bd1eea2a08b44f4e2117f1d02d45390a7b46725b4380a646f2b2cabafe78c75e76bfe01cd8144817910f70a834f3e32df65d1d20ba6fa223cdacec03214a5a31ece2298a84b972445324b0667725b1ff65b57458b7793e06ac52c5a7c68751d82757d592bfdad6b66e17edf91821d90a8fce16a16922d18777bfb364a1b6b6563b902edc09a1041c87f539da67776ecca7bea9646051cd01efc387dc4f428c9f231bcca927bbcb76e501e053a2ad5b07595112feeb378a93cc6404c25048f2b61460984be865ff69a3f9ae4e0894b8e66cd58c19df286b5d31b7785dc0a7990421b69d7ced62d65844dcc1459476b0bdb11c1c727ae8d7f4366cd2edd026d0fe8a9cfeacfa347dcdfce4c2a20838b3456290678883d28d9cbdc52dd6cfc1bc73058d2ab48922729a9bc773e9d74ff583b4a1bd885bdab196af6e892a0bb6561c28f56f5c20d3ff7af83f7046b660b1e53e80a1423894e3439ea2fa636d9136fa9e443f9deca49272214c5176f893c4268725d6562ad3cc65c35815b7cced6d8b51e9edaed15b6e42527b9627ae7474682139c4ecad40b24c473f91ddea421a1a527df960073374ba84c584328e8c17d4fceb1fb255f61e5c2d5347246a7d3c70ef3c3e5de0398f910bd902451c264dcfe0c4599f012a9513bfb8b4663334c47976dd10cf88a35fe63fb67b26f4760b5075715b0724f56e9d4a802cb56efe34cde42888c1db17cf35ddf3ec7254b49060cdd9658267631b2caecabf788be73a9749e3f169212a1614b8247b795194296c3a9073795218cc94d0fa7c4fed516948ed6d26f0ba6bbb55961dffc5092ea8d43c5e37f469fd68c38d6ce4a492c8f294314f0a230563a93ca6142b60289caafaa1503e04ae3788b6dc6d43697ddc6000a18603debf442123e0d5b5b89cd88cc016e308f60897109cf817ee52910cd2ae38abc5f54c2f47cb196ca97d525de2cba833e60950226dc38d8bdba78731ac7bbbb59038993b143cdf737c4669ca696b91ccd0cc240dfdd5f5b8e2f3b08d77e018b4b53d4867bf44ba47461b41f71bf2460c500e63a2444996d94018309b0fa92c68b57d83d5634dec4e3ec82819ec6b7a82132ef9ce7aafbfe0cd3456e786310a2cf4135bc92551b319bcfe101fd87f83ebf412a63c8ada17a8d5fbef06811fb77f3978be9b78569ddb99d44fe1c4b52c65b3d1264c34cdebe51a18f30e2e2f77564db284caa1b0bd567433775f4ce274a024e60218ab592f020a0e7e3c91c8dded01c5ef87ab82761217cc67b2aeef3bffb5d0ea292f636804dc8d361ca0e5ef4382b5e95160ce151bad680338ebdc9d95c9b7630a877d860ddcf65d11a9018458489e4e3e803e8224e3a1d43da47928dee4ba1b2f8067dbef43e19f0d2b1098157d161e3c07721b126e3ad6f4a8f0e625c32b7f139a4f62edc797021f139fb0dcbdb7daa92885edbc618de5b393937be841c9d6d561320b3b6f4f330ae7f8f8c62f436cbfc91ec8df0c3da63a0e963283f481b6a7196da062b48280f90f75b1556264e6a39eb91b85e49467841755efc1f44586f3fd8cdeb3cf63d695b3f26bbe0cd7e2b5076aa1a23366f580117c8955e686083064c2eb285add1f12b72cd3d562454820695bca480a23e8439a8a99cf6048a2ffd73f02f33bf328abc414ab66cd55041c74c0e5017d564168e02062ec880e156a2541cd2e8147330e2b7cc59ab5b296d161e3c03729640594f84df1db1f80f19274cf7fbf34163bb8c7460a19bda74d48c017ef439a6c0e14efdcd5ad55902be2222f33bcf5b39337765f3c8fec5e4b6ae46e1083c61ffbd5f5dd0cdb99b54ee1a8fb94b084b403adeb3c084a834a6e8b88e8a2d41df41c4d670336a22a4ba8eae56c500e2a308fa8f1b250afd4d07546980d97c015c215d31da8018b5bce3cacc6a68096dc10a08466dc3d3eaac5abfc905836cecc5d079fb898a66c3bc107c217485d1072e32a40ecfcd29fef6f48c1d89a6fa622d33cd017c8a0feeb40059cff61ed740bfa36f429146dda6828feebd34df2dc70ebc41a5803a8290219870c17aa59b8df89019120d0afce89a06281dc0d5e73c2fd34cddf43af96b9eed334c1e5c2713d1d2a7fbfd33e8f9f1c2a3a833ad2666a654273dbe0792479b98af7361f3da41f04dcab1678de1eda9c8eb88edc76705e9280261da67c46ba58a59e0116ea2ae7d77aa86859ed4d54a60756b98091aedafdc6e96201203c92bee85b56267873dde228a5b6f36e56892551d09d95dd56bdb9e8103907127f955d7b5187ee8f66a9d473503635ab2f57b81586f38748eb15e891539abc0fee1448009a80d98f51543150d602d2cb426141c48ac1c46121e47fd0e706324fc2d7ac8b24f4fe573dae80423eb12d6a51735284225d6b2197629d56b78324a4c8d7eb50e1912956d937955687c07259dae8a31357a4b683f90db43abaf1d57465c8ae3231474142c1ee3ce92c29fb8473c25f39e5d7895a397653ea8539bb5eb681be4f8b59360b37b1596f1ec0eadaa4d05739d9ef29df9f190e871e957a02ec5caaa7790ce7c36015355c23fe4c4d7fd497383f4451ddbde55a9220af72fbd02571951f6787cca987d60032938924b831fa8133227b979b34b97d8f4f2eb044b1dfaffe91af12547ba25ad1b6ea8fe7f7ac071fb9b1c8866f58b9b3e642e8e68d86fc03c814bd53dffef6ac82194179ff3165ece6ecf59862b2d12c19e8b6da339a0e16ea18afc68077b4597c84042a92c385ab7f4a23c28cc446ae0fb04d9d215a93173c2102006dcf11051b70c034024f7befe173eea08e093610779b45828df35394659cadb03c13726c8009c548686e2bfef1e34adb7db80d827b1500b3b0271d02384cd91ae66a8bffaf2707cfcbcf0b32872a93682d1fab9662d40ff86487db2ede869b86c871a0e4dee1f4306c5ad963d959b56bff917c71b3eeb0cd309dd651398bda923ae402d06b15618b64cdd9136df1ffe1121bf9ed286a1568f832fcabf8be65775a55d9a0db26886decff35afc55c90e125897c6af6fa01c5bd242a120a8f37fd5d88d9e84efcac9d48cd55cb2143bf346dd8fea7b168af98163f6b76ac89177128641cf7eda3f40b595a443e6d847c87b254bfc668205fd3c433295012506b6c57600728bac29f44fc7b14008ac8af3f3bd4c155549ee0a9d676db8c8ed69d5ec886cf1a50dc3024a72987c1005593b1cdb0b311bba2f1f069f2f46a05cfdd9eb9bd58593f4ad3a02a6e02ccc230b941efd4abaf6581a1c17952d7d049777eb3355147d3d365ee728c432da7a613234ebc9e543a66f56f78d09cd0ff260c68d83c794b8d238c5a7e24c1f7d0bb9e84dcc39d64a4095265567e70acd913c9f1e63ea44c3efe5c5edb14cc71e8a3c916135a05e698adff219f0edddd93ae2d8519033d72aeff5261b8ce2dae6ad801e89482e74d5e3f5b58afe5ddded8ba822493d006c5e982201924ce414ed924eaa975454b0b91b179f456b442d2261b808ac22e61add2f97f978af55c426c1860f4b684f8e60fccb76212abd005d8273e1320e8b2aeb04cb57b8e27697bc69d1a06e51eb17465305fa8ef914557f5570a1aa9471fd22e538c4814575fd881706c6eed3147301b7d8d7512aa7a9e6292f846525d96b2e851832f63cc3c4314805543b18e2e2915fff91fb63a58c10e32679b8aee4b96f1af2bc31969b40f4c3ba83874ea06b244c14d7b1a20008bcb28ffe2cb0804c0a9b8fbb963208863db880dfbcf8f25ec2fcd3f0d3feb392aee01e211b7d06951381a0c3489a3978eb176b047545ec3f614c49edde348834093b7faf2a58aebe37c0071bc7977dee61573237f567caca2a70844abab4c803f80f9a3478784778c5615f566074b829a4aa7dfcb8fbb7c2621820ff2e23235dd8469318ab24b2c0a459a0c07ca98cc4cfd0ae1bb78863244fe3bfac26ab269c1a2e30ba953a9cb77f5dbe34ae71c19e0b2f284a66893d918cef7525a0fac5f093446317d112e3cc7745320ceea23605f56ae4efc9e2238b23291b455a6d7113b518028accacd8d7ed8163b94b6e2d3c9e89fade4823e24a7dce413f9b1d5bd91e4538f39ef6a47cc4eb630d1851765cc8cb6db3941cebebbc071665680526af6345d8855d77ec0abf40807164873b34a94d162d85e452c8447bfdc570a3700ac2209ae3ec81888c2b945fa91a271ac9ad1585a76917292320257860b738134f5caed07bdc0e3040dcbf5d169611db2b82907ed26a87ae6cbc6e55646f34021dd02daf2d8bcf4518c9c97814028c8dfc49004e0dcaebdff66a3d4a845a8189bb2bbff4637fcae1eff1bb8cd0ee2979f2c8d224dd0188b373e1b6f2cef6d7f9fbb9de5ae81f16f41523a2d403c614bc5556c711ea035e634e04221b04963abce508b52cee50d03f06871c5eddff1b49029f3802ab671f2234945870ad2c83a64f9b698de35caaa25b32c1895f835d57b491c195c592b47898187532b5fbea2e59e064f4ae747094223fc8a303cbb5ef83793b5ad726f838f00e1bc47c20fe257aca864cc70b208579eefb14db26e74e4f21550b75fdb7308f9e2274145f51beea070e95b609a8818e4739a172e7ada5584a5c83357acb11459c35946912941cb2aea9f24e9010fc3ca0b68eac62b2df34e5f4f8a3a4a4d4ca4bfa8ead1f6ca814e3bb6aca6a4d5f38dd734c4e1d99236d8b5dd6a79beb52db964fd9c14c099e83c0d19d41db017dfbaa762b48c96e9a7eb28d8e8e6ae021de30a9acfdb5c2d6e1b5a30c3df234a3cec713492cb7befccd67ca733c9e9afc511766d19a380995c061167228aaa7c657e75ef3010463c819d577163326463813d97f12c140351939420af906e52b7603cc792d5f489fa7ea499b64d9e672c53f5cc2aab065a3210cc65566dbd5b35e22099bd89566391f1b67cc6fc6def117cb9d63e33e0de80f28c70336e3819ed8d268983cb45ac5a0cab81e3af3bc24782ecff8fd71531515a5b10f12e1d8a156616dfdf24f274eff5a4e4e175875c1db0a26f7701d03244acd06097054fdc270e1f0da9000903c154ef55dc0e9777519c8c8a264fb1fcca2372cccbb65ad8b229740780515e48273e574b656aedeca295827b1aee27822b7f20e5a1f024ea214180af507b768468df84ad5daf9f3b3a3d511db021bb2b47611151210554a3c0174dff8609e51b13cf876e1157b9b56d26cc8310f1ee6d77094f1b3f87c620b17402ff8d88373f85c6350feb6deba57f3f8b40fa55c32e7df4184b6c9181fc1c110d0f5ef4d17d78e0d71abb61c808c9ef1edb8d83bfc9fe51ff9cfbc9c26ed08c1df2b1189f340079c73812fbccd1c02467df2fe7fc23ec1b0a976cc0854334f174b4e1ddda9ac3662222cd5cdc946f5af5c66638bd2c355cb7d7bdc32b05214a6cee98446430c8ab1c999ce76ed812233b0cbc99f8d50cea090dee34ace65b8c2966ebee4f5441b69ba9607b69e5767cc12bf2b94edd9ca9e4b7f910344407ac977ff7c39820736661887ad2776af16b8385b3461c45bc66d37e061dc1d8889b50eddde5268d5dc4963c4d720c63b921529eaff77a5b5a47892a564fb2a5a79d869c370d8ac7f22d16fe9fa08910d9f9af44928dcdda9fdd903e3f77745657a89b8b0366c25c274a9e415fac77371f8001d14a95f8c4e1f27c7a4f2963745b9f4086c764bf9233867f79814f3b34b1bc8baa286c13e146c9cbc46308df7a4a6fbbe760de765a4a158474ae8d95e5dc6899325cca6564d8776a8126de515827b846568550c3ebace26885f4ad42d84514a7bd63d489e0ea69440cc513189c188304988efb50636194bc223de006bb82b34a8fa47182d8e07c385f62af63d81fdf34c53903b689da12d853442020d4c64aab478ad9a11f9525a1e958cf3d9b0299c7ebff6aa50db3c7525d40b3f5b4227cdfd76e8c51170014134bd6cadff12c39e45212684494a9e3a7c7fe64bb62901d085447acef82baebeb61f9eb7e05af288645a6d96484ba99210bd18b3183469fb7ffa627ecdecf497fdc402f3a7e37f33fb298862e5f3b1bc45159e2f94e36d12c3ff38e12cde1ba7a7fce6bfddced5689995976849f21dc06d8779f9acfb775ecb545856deb0e17578eaef4a4353c4c94fb886f40ab22533384232d7aa03f0de23b63b64d7e99d2fdf18a09c14c24d1e5e3d71a8a34d6d2efc22e7f49da88ac4a619c6b34e2525b010bcb1147daf9a96b7c04edca8622ecf3518cc9cd2fda2a7569113e45348b72034b842aaae8b57225829e66ceedf896cc52aec5f8c2ff7e5615169debf6f2a5b1f4f3273b632af6d7293006e2b51371d3fe0119c565963de063b95cd8e4eef26304bd20efd49ad5a7b3e9eba05b0459fdcd565ad44e5c0e2a139934907db51609c705e8b9b5f103bd60ba18d1e0517593ad71e5ed8191374fa755799f64333db50f4acd86e2514bb3d80c8ddbd8b919b3c0e974be4cecbb268c529ae9fad9ca04b889672b9a7c80e8e4d13bd25e7e9d17b07b3cb594dd9c0c8c1e753d6a7d35ac66c19f085a4d0447c7e1c845d79ff54c146d62672a98ac4ca7633ddb158ec808dc1f220c3371e25ef9f78b6fece5bf347401d762c1ffd174016a14922e5517fbb17cdf957287c3efd192fc8ff1b361f8e161a073923b6d6804f37f277bd77504926efb59618b905c60ee671e3dc0c8cf868e525f5a8ff6bdf8da1e18110dfe53c7022f5414da1a91be46ffb28e061fe011909bc86776816360dd8fce56e0bb471345b469f26582342367c1053032750135cfb2f1d7bc2be3f13874fc3eb515122aaaeb2b1c3cf2d1bebae03e46b20f6dbb5cee53e100a8d65337ce4788f3b399adbdc7443200b9fb97cc15ff36f864ae11821300ff0645ca28b7ce24ec2d502b59a67bf2db2edf41f6557726be7237837074acef0ac55fda8ae9174a9b921247111e797a76be82af4155803e4bb9fb8c72c6b2feb8564b21ae34c1574ccebeef19da9eaf02d8b217fb9601e851863992fbbba987d291e6ecf380b4c2b7252c3a117457b3f98948848a4f3f62f69f1d97b44a0294c840c05b77fed6db3578a51785dc9c5f844b4830a93c64f57f2862ce4cf2e058b227280aa961652810d31da49a1fa7c16dd3f95508fd3e8b4e7b2c0a90012fcf68fd41fc6d719517b3464651797a2dd15ec4e93d09e44e4058616985203b4bef40d2e7c112960f9a1dba86065bfc561bec4f173efce82058181c9c5d2e4122ffd26bd7b374194e6cdd5f87aad370a1c921e9e8fb2c36157216c266bbdefb73e4d3ba60a5978787fa1362f0027f481757ea55444fd02f92ac785c79a5e90754011fc5bbdd9c70692bd74bb85736b4687a6b84a4ebe084ea92bfc113959061f9299ce4c7d3d54376b589ad313f69c589ec65caccd20830e1dbacae224e7f148074719f585e5d55e129618b421dff41bf7caef5420139915ae63eff1120efc0ec4d11ee0f1e8cb7ead2b586ec2e48086a9bda5bcaf0146ce13b8b6cf34e2c09bc74232bd7c29e274a7fb1926748fec62875871dcc4e24b97d9ea52f8a96468f8a21bd061372d6f1d91a3135da7cbeb1de10205c0038e57591c3db4fdd0f07c1a1aeeebda98a194a06a451f5b886763a7d94e438a3bf66fca5c8be1d1e6565012343b5db0f83442da81004e00df8f4ad2e6db6cca4c01d6f037de1757163ed84e2a4073d11d00a2250677ca73bf3466635c15a75bd8f851a7970fa4a04d5a854703e958367491975ab842c0e29d0e067ef81e536b2bd6c0f9ca91c88ed8457eedd7dff3430f8e1f32af7daa19e6185cfe6826d731ed24c62fe1699d0ba1c530fc68a729ce2b91d8dc08944acbe80937293f93b2edab440632abbc249d0eeec928c9cb4d59f1598db3884e2c01138efdd57a3d93e69d5652d8e214ce7c60573b6e651f77d9e0919879b1562e2b646e120ee7be15259e8cb4ce5131ceacd31e34e786d8e4e3cf7983b2aac5b74daf61a121083850b36fa756d24004d77df8effb47e82231698d1816e5fc5692fc3abc6d97a0813cd2a6fd0e555fd129cfa0d38c3c2d0af7b8e0810f8ae2128b8779e6d03e294ef528dc325d137bc5a93bd16f02b136e9a8857cd9be4b0e94535bb4101455d8d3a0c5ba8e9e4d28159c0176357fc0507f9692163d964394fa59435f5e52c0cf7e3644c6559205c621fbd180731cdcce147ba39350be7fd2bfd569cff6889634d254907316d50781bcbdda491b5ba38c84fb3b44c8b0ad747d93e0c05d11e3a9c0daac19dac7a6edc8b3503d6603d5cc80a53b412d11556c6bbc7241ed4ed76d28725658c817bec0aee6ce46ba1dfda3bfca86cec978c2c9a829b1cc7190d537965f09bfd6be858b26f209a42bbe606116babfacf3e92fe4b51f442a4909ce8af976f61c1cc7bfc3f40758cbbbaa810f1044516c7d5e70cc5b86c235a2d1feb70f55719969a15b650aa275ded7d5f1f09045edaf606c02e2bfab751f9a98af1939afa436832395960ce21e5f0b0fc33d3c1b4dcc247f0a73e01e0f2fde8807cca42e3d857dc94aa4e21785bee3adf7e48e081488a6ffad17cb682526c4af8e38c475d2e3181e4cb7f2c7f9b4d9adf7800ede3f72a00e043b7ab5534a0aac75cb01ca43384821c474c7b327d4ba6a3b5f68bbcec92285a91463a6a5885976086f068285a452abb04cb3ba3c63f8ce15d535e744bdb8c23a6e808f7a9c92cc4199207678697d67e692fdf12a2ef6891c7ffcb46d2043bd3ef72d62376707810edc30d7026d41a5cbf244f118125d6dd7cccd4ca65c781c2bbf96bb24aabffe533529da99cebe6a697650ee07bb5eb509f54459627c5507942b8ae435f5e5fb5a50e968a465c89a593d7b63c1d64962ca2a6eee68b052106be1","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"f2df31e09bededbb1bab36778b39b34a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
