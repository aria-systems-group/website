<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"904e7773dc027259d8a0b05a1e93c9e0d9d938dbffb373303e5c26b862c9b17233d2f61ff4c90e0965b638b776a112b8ae7e0dab3e9b8c73e14ffe29e06c4d1d4b74d8561a1984be41e14f4be0ca0dcac551c5e11ff72f7a41938c7d1c605619fc1686d099d4be1ebd7e922cf7a10f807c623537076fd4cc20fe3ecd3f91f25befa1a36bd2e630d145b3b7982ee075fb9a9117a6ec36dae5270908288188ed744184f9fbbf814c8487e0bca6bc1199ab6e2e2aacbb2c1dc21d6a7467a888cd344d6604457cfa37e79cc0ed9d64b54cdd355d0d6b325d7f94641b61677db54456d19627f1c782154f5c7da7144d9adc43f7bf4b46f02d94857c9f04cf067ed90ca0a0c2f2f8e751cedea398f6004fcc40657e8db20625bc750e63f5acb8e6bbf24606a0128ad1c89a4ffb4da8f8d87372a2678ba8ba97dc6cce37b8fe056d87f6382fc1f7c63457b89590774aa9cf075c52a3d8b8a6af585890d24692e5636fa4b8185f44a6055e41e711d8bf50b4b76070cfabc09245c911233c48f716a582712c897782bde1ae31b859e5967acf94e1bf4fb8587705fc5f385a4da189040e0ba7433e51fa69bc22f841e078364e69a312ecb56341e7abade8d04fd73be70868d8e7da3f241f268f8cf3af53ad5588600cc77f81fb48f0c167d74683fa639ae94536325eb726e448918791af10a8d7eee47c28d12df07a3cd7be35b1802a87674bd1e99cb70a20641d5064cfc156a6b0276757bbc84f2867c4ef6ecaefd0b1e8621b013699b9f5bc87fc8404d4fe859c8e0ce7050a1db70fc71caf3b4dfba83125a525158839417970884373207937423f663e4b8dfb2ffc98ca684269a39b1a7792fdb2839a7623b8b2563a3924b6143f6451ae450c6faeedba1c794e2ebb22a695e3a3ab2350729fba9cdaed909e74e8fc504ce166cd2d174bb4c46c187efbc26ddfa742bf3b24fe2a45e2620e944a981158c3f468e1b9fa8d4cdeb4da9e99625344ffe0c377d4452182da2005240daea4e8ef76a53bd92c03b2bb6e4e026a97393fd0be4a4f1494ff6c2f4deb363d6ccf9366f2df28100fcbd2035adacb0e15e8ceaf53e7b2f02a4a91b4cbfce6b3aae329fa9bacd611a684c1fee447a14e529e86511ded27d6b090aba08d3adcaec5165f719c7b0dc40ab84cce295fdf9d73652869ef9c9939dd94dbe2f8cbdd0475ba16179bf9ea3016d52a6b015bbfbe7abad879fccf4419406eb876151d7be2e4d3a3f56abc5b4e1f49d25be66c8362ce5638f3dd26cbf1eb3ace81b27f335da1b687c5a8316570d78e9a50c370a02d96a190b82083c90265453f1ef3a1762dd99a3dcae12c871ca1957494450397183d6ad94782d98ede37d76826b49a491a6fcd62bdc83a75a2be8fe0e5c8d67002042c3a89e349b2945eac3ef043673d9f6374770d5039bdbda3b06ed8cb486a1861a06eed8939f834b50060b4b66761e8e368a64c0c2f58ba55673828cacda0b9b930d56374351e66dec8b333c43778775b3a3d1c8215d93cb79eb2901d2feb30487d59df8a21c208c728869962ee99d3efa2eb12c17f115d90780ac2c4b507efe0c5f5c44977b46fd393c43c1a07712f8d7ac83629b06bbd7bb90df30b78b565aa6dd56a41d2ffea2dd36880aed53ce3fbf1844c3cc2565eacc74b192854408b077cd4c6de6dc58de5d8c7e0ad8c95a4c667f2c9169622df145e896c1f78e8cca9065f6e240b64d2b42600d5844b843338e42b4c9eb1da391d0be5fecc56722a62fea4e93bdb75fe82d190db4b7a046f535b169704becfbf96364266c60416b03fa4c99643e3371e4bb5b7640e8bbf11bea185828b8ec796947f93266fe3cd03eadf9a4d5b340f429925777684721453027dc6d97f24f09f1bee091b996295d09aa9e4e72706ac29b27d3fc7ecb14194a93bb257e3db598c7e9138391229c1fe29144b1fd1d0f3d454f9bba4561f4d9807f222f52c990c1f863f45033c5b2329f8da8dca6eec11de7e55ce7874bb8e0af038fe0de11c930417faaf48c8aa0738dce45d960ea847426fb7cf8684b9728caa1de0582cb284851de1604c726231c346888f9db91be5a2ed25e75a729ea8099a4739534e79801a9518b6b7b0850972713a3a48cc01826f959663c46710435d29ad9be133b4ba60c39000733bc07e19e83677d71fc8252d19cbcde885970cb07b85e00d0b1a837e19c3676620d6d204aabaf4759c8474c4e4473e65e419f4830ff9063a52e7111fb239a6376e9695227e0322acc06e67586b66ff5cf768daaebbc35b30d95deb5e2088e4e9b280d236e8eec39610f5629dceadf959902ea7efe7d9def2e4b2600c37fec0fcdac647f976925f798272f4482885c1c0c9987f69e62a011c0f9554f2d466cea09272f5a26157bdf57d0adca9f9e3886c934eba5e57550bcee2bf0da4bee2fe876a289cca2f63727e89a6d1625d379e52fed30340cd09c0272ac8a9c3deb5f141ae8878cd44b7be7b5d16a4d1e6b6b4891d3a889da3b164fdd9ec7d7871c5b5951672d0165143ee791abc91ad8e0085977558ee49be44c564105626b1ed80ce371c10e7ffb42a5199e27cb85ac5afc044e66a376fcbbac98ff8089c7571b7d848a891ae4bb816cc5478d36feb29522d4dc9721691c8a5965ca2675ac1c0dba3cc25c38093acec6c749adc18e156e3a60402e4cca5accb8e2cda71b0bb9be6ba32304ddf53e149920377c9afcd5d4140de285162f37798ae500e264eee75468bd038ebbe570d0a279c4451330cee32bcd25cf6071bd13a732226e24a8b226b5e3969c4219c34c8827bf8647270f6926106ffd3daedcb379a28aee0ec609f13b65bdfcd633105194af4c6c4d618d9a92cb977532800af15b506abad9170f8d2dfcdcf7bdd58577b8a61025fe093852c51fa97de5168bce580bbb542fafec1ab8b476a83fb0b905cfbeafa98b22d750c7aac8acdbc97eb8214cf82d9764be2575f0ddcaeb043db119f8feb27a0780de8ae4ef1430955fd162b83406124cc7a59e21a4122477ee4d52b52d9addb52df47a87879bdfa0c41f878db4917f53dbfdcd148e14b2336c72e61d40a1ffd4d418ec01105c6c658bfc3e86b69b21e058105de65b1718f44ec2fb8bb407f97d6806cb6ef1cbbf3ff1ed8386f5122645a9e5f789524fa35df9b26c7ed5fa0954dc57f742096385c8bf8d17df0f5425158b053b211c80eb4328ca6ca3bf33b826cd1730331c3e2e667295d1b5982e8d1e44326af9e0ecf0020d3712da0914852dfde6d1c05af37f93fa3c4f305ef7e931aff792d4d93a34476ca8785c30d636aafb166f9ee22b40bca7a833891278ca1153ec8147da92bfe7898dfa4306934899c3a5444f8047a7e42592ed5be8e1887e6f0a6133a4ea928f18ec8e0c3fa57d63f044fa05330b2eb422fdfacfd491dcc9b2878f05341e8a1b4eaf5546993447a36564bb1da5ba6176c9dc7ad03449a2b18ca8d491893a09b2b0a51def9a14f73c53f871c14757c6b3f8003156d2b0292666d6ad1302258941ceb6e0825aaf067ec308317f9886d7eca0959cbb1141980ecaa0cfac4346772313abb90b4e89737685559c86809c913636d6fa4897825ec26f98172858b47806f17dc1a8c3cd982d2c494be2ab0ada23adff60dd36169a60c9f5f2c65c3b0dc5b50d40d46fed5cd945a685fb63bb1f57b15cc563282b008fd9eb904a5b8c162d2debb11965f19ca3562e2dcd540f7ec8eb3afa1d665427cb8278d3e0991522af36c027a7d024cf8957841785d2281ea3fb966602c82fc8e2a3945fef4a1f17b8cf14a4f5c50bf542fe5039016774c3f5ef7d4dd3854700dbf5e0de89255a78138a56d328406593295a027bab94b991e46036926e82db25ea688fa8c287fbe52d542372225ac65b48291fafda299e5976a5bb9f293f4a69ca47e65e5d3600d832a7907b1a5d4441651f092c25602dca7d72da948613cae040cb02d791ba96d063b527f841c925f00151411d4748c31a3691f8da3271b3cb15d431abd523312f79597e255f22ee5e2ac27caa65c1df7c1e6d1f6b30d7cd6da45d61ab3cde21d758060b061a6d571d76b4d89d47455675e4479ecfc44af0b2b0307ac1189608b001ef20b5c219929a56f5310f858e5d645e2779d69c563bf9d512c1c0ab6641d99bb58ab89ef4819fb81aac048257de19256fd9b73a392c77b53c55f5924f1e7253291f8a8db99aedfc034d3c583132a28778bd2c6c70c9b6e8b9e77cb66d2b21bc351c3e22a461eac43b25db3d816da343b61ca4a250363677a64eaa94b99c9fe96f394490056969623bb9b5043c4179c97a1539149528cf9b3f77938b841470d40a6fb440a5d624adb61534acb5e45092c8ffb36656b89380ba9026c18591d79da67b35df587260087242bbb1c14ab8e580534a92fc347437ddf965625dd90cb848df3601f4888e432414f9a8b49a3833550ccbfdb4a63bb97cbc6d17c29d304405cb4c68332d2a0add43faababa21409160c1de8ef753b33b7199960a0a0bf675ba26feb7f14e3a958c588b150499b69460b45b4ef5392acaf287b88dd933bd70626e494a09e63eff18dafad404e1b56f374bc971fca9af9ed2e1f3bedd266c9d217002e02de629147f47ca73103d4d80ff27a3a1895e56313c328ec856634cff8c38c3a0a4c5148b9d32844c60f03ca7500ba43c9a9018bab27504ee6beae3bb19a3713ca0fd8ca9cfbc59d26705089ea46f78ebea924c3e0d1b205db8a5fb890b0a88177d00f090ad32bf1ac4848060da30623b3a99bd36a7231068462084a080a5e1641462748784f40a5f4753081537959d85a48cdd52b63266dde9bbab6fc09f81cf5db4896f91cc6f8b842d64bb058be84349bc0bc265a4ea35393abe9d3602797bd4f16c3f0e9a03b856a2765bb1dc343a200038ccbf4ab3496d8ca09ca0795cd286d86cc76634a509acd77832d9f09d6b16ae0a5465851ac98b86c64c6b8dfc80a2ce5b172b1053e8fb88009ebae4f82f08bbb7fca3fed85aaf91f981893a6d8e7eb8104b62c86cdee3f72d3125512b2f2ae65f3eb5cb1a35873fc183c1ae0fe63f5c28def6a269614fa7dc469687fd3b02a521aa9bf77963287e6b28977fe509988c647ccddff94f496464e5107b19c08aaf9ee6692d132fcb2f5055b290175bc0a02a6ec4fab8b900e07d425d6cc83df8df3a8f984ce340a6df82431cdea8ad6d33edd287c5a1db2fededcc3d30813c543a94a222e535610a5d61ad7f6c2a172f7105bf43158f349042a11acf7343f9c5b2b4b79893dd3e372a34cf66cbd454e6e30eea859be57dc1080374d0a4c65f3f248ae401dd3f51c6d4221b1944238bfd8b4123549cadba7323cdedf617132641f6d3a4a84b02dcc9ddc5ee2bb6593622e89f5ca7a823c8433a591e717fa159cff7dc01ccfb33404776d94d4a4784f1d061e84d4fa55879386f7cecf02ccbdeb9f1dfb6935e12665e7526edeff0a6013d13d2bf17ddef76b01752ba931ee2e83be925b22f02cbd118f3448fac65852c7762901d56c77d4cecb89f887ccd198ebd3cc55fe1555c1979cd6540a2ebb96f273c0af97efc118e884182b05fa26ea1b7987b7f7c3f419100fdcc1e26cd59a4976d4e872b75dcf583c8a952b7cc23872857d8013c943076aeb0f6c0ded17fc31c28fbaed9bc15adefd94a1c84f213c587b820e593bf80692c614f16e9a1d2698a044c83cb0349009ec63c32201c0157baf81ac8ab54894dd1b5dcef283f418b14794edd7a007171ee69390db59448a4c20d0e9cc82531d1bcac5f6c15d21699199608f6b1efdb64746e3776799a88f921b7de32e274d17b8e3f23b1ed58ee5d41e138eef34176d7a8ed89dced9af0a87d14a0506845df3c3e17d372abdd8b82373088799b004ac622d2ac9144c3180114c34ff2119cc9be5183444d41cdbad937646201b84fe1f0694f615088cf24a0019130de1037e8dcb1fa06cf870971d99cbe0b76bdf3ffaeeacddabb5bd5ff86a72f15308b71c93eae97c247bda9224a3cd23df9b761b2997c74db48edbf187d1b3d9b90a5de1101435aa6cd0cb381e903685d7d5f7378683f15414db1c9324fa6809870c5389a49bca07b84083d6595bd5a6a0d16a65b6f75658173f38e3a11b6c4378bd87a2acc9efcc2d6683f34997111673e5f04e04caf63d7a37e7b7d59e77642eb313212c8213f3e9cb6a4253f945c8e553e2117de2a8040c7c0382bd499714878b0e4e12b5bbd5b94fba822441b90b0022acd939a7f6755f56ab7eb841ef29f1bc6eaec503f9718d3774a21249ac33329022719e3c2f0613de825786d1b24040ecff7185790724a41c4243786b94d9554ef4dd5a40046a3c8f124e7db66654af6cc550b7bd34e17b395b64ca6b9ab1ccc3617dfbd7e7044c1dea4220c738413ee35e97d5631a5a37dac425c19f578c3f19ec3074393f2ce0ab8d3194787bf67b5d77250e9f98b598b8eb0bf4699187b3952fea5e2f018708865174cb69299b6670341d04085100ae58e42c3989a52aded4c7f511a8e18ed734951baa5f040201841aca7bcbc4a706fb1653c332c7cc2a51bd6c3b5cca71d8166ffd98b758d18b2f6b32f962e32add11a542f05984b550b3b27c9e53171d7b420c16d1c40fdfb6edeb7dfb816e385c338b22bbea9f7960f2fd13ef0a636fe58f0a2ff49471cd0072ebc172ccd26d213e4a9fc9e3f9a57ae3f6f63853c82f019951aada10ea54f31aa0d5085c9fac1dc3554ee36a14b709f04389c12c972c0bceb6ff842ca56cf49dde20f03d7a1dc69e89f2c6a4a1b0ef0eb402966ae015ff912846a262446eefa3e6a73fd8e80a0ea8e7b1efc9570d470d659b687d1d1b4f89c2b6798113cf4dffcc2bb7dfd4ea566efaa1ac123d3d1c375214cfc8874b545966e7c7f03388cd7df9aff2871a455122b0abb80b71b295cd1a040d1334c5a90319d61b8c95daee7739464c18e513c527d8fdf8cc95492767669aab690bc87e9248875570a64ad419c35f1b65c90ea47bf9bb6fa7eee342b477652db265571e96f4e0eb9da09ff4c8549579742c4ee4a88c5dfd7d0388629df378015bffc4de9098eef6e45f35060af1b8da59c85903b6c0cc5d3f61b87b52833b5d023e1985014a4955f5eb632cde68f5a57c35af7afcc33dc4be361aa6316e7691017eadd88b0ebc59f00b7a1c000193d2556a64a7450c14dbf4a001b8029a566555a691314aed83b3ca3a572856df9fbe4805d71cc4edf5d6e2d38c6620210d151668a0ed47f87469206d278fca7cf0a769fd0bc0f01b90271070094f4972719d577743fbd6b9668c9282eeb767067962cf4f59fa09b84c8c382e88f1e1bd315a35906183b56d17a4e8991235d4f8f4f199a720c7985f7a103c6a1bc4933723e2a451400f29ad9a4d2ac0c9e3e309ca1019f81bc5dc34679b621e60ef63339eea1961660874bb1eac812ab2ab4329f6c120fdda6eb39318fe3de8110c3be0680ecbb4da97f4f7058e32c2b7cc6b91e1c6f35c9ae93a0dbe2e2cd039bfd51cd84adccf9601a76a1411753e8013c6df3b898cff8fa75ab5119dfe81a2e777744c7dd565091ca670969cb363b6ec1a644457d59c87753ce2ad879b216f23a911b1cd517eee68405062dc752568100f71ffa83a14f1dfdb3a2700f303fab4c368299121d7bf7368b76a75ab41d1e4b7170b188be4bb7bed723dd8cb4b2a97a1b69ff44a003daf1430092adb4a235b29c7d1b6122a4114678a3739fe23fa01ca483d7f5781b7a6c0c1f41c098abbd7e19a65b5fd09bbc757e2f916933e8a843c4cb7f580493688e4677fc536c2518b37fb2b5fbb8a8e65276f1cad703692aeb86e931955e79a2e94e4b1bb4ced6ed9c2e31faf78ca7904991bdfc5d5e499b6dfa282a34ed8cbccc84ce9bd3fd1903c056d63bf0a023087b3d4f20bd5677caa34b258e381e01720c21d77a63a8e935fb9c82c5149976940cc773c36ae4707a4b89c1e635e6522aa55cd37728e8880fc1d165ee440956c81ab7e1f26ea21efc10cee844360681c742f510a1ce840a45d38d88f776205db5b24757cb16dded8552c9c804da9e1988c1963d1b56063f8e7ee1ea4e96968334ae3a81db0c2f1dd61e64ee66f0ee04f4e5cc185a9559d04cf7d66357b3aaea8c7300ed84e430170095b96493005166746f73d243dcfc51573c54886879757426a6856e39c92e155a2b537cf5ca0470bec7eb6c970800660793c11b8f4e3ae4a603da6bde003d5caa44781371f2e16caf83ce9e8106ff71a4dccd3257f46bbf5e7dc7c528e3af7607b7eec93504fda44ea0a23b4d9a32b95d4526f6ed4ba3833f206cc8f0248898cffdc3f8bee3000ccce94113b74e73d5b24069a1b5a7ef5b178da14632141970aebeb76b40448bba70561c40cd4c00114210d72d6485602fdc763763935ba772082691776fe4bafb1a93bfb900bbc4e63cc513e2920455b841cff92a474408c1664f825e8f4072f760ac6f0bc8f87da1e797ee3538010da14fdbe547ce3f1df226c41fd35d1906f7f17f256fd47ccd2295dc03147d4e500fc3c6f975c0f2d52233ccfcbd3df31cb1a4f91f07868b9f135a3e2f200d36a3a8239eed60313d082163821794e843217cbe52d02500ecc19b05e407ee8d9696bb85c35ff84d28e563eb69e4396bc345497d0974cbd39fa08cd58a0e054e76758ae98c9e987c9cd3d4871343a8dbcd79d8dbffd8e4ee793bbb36e9427851429ca7241deb1ff0c94d20b4a0bf9c3e8164af97f7b98b494f34843eefcba96581519c861ec4f4bc911e0d6ad452a19a837abdd4ed562fad62fa3fd3f4bbe235ef280ad30d0208ff0eeb90e28b92e30fd7a7855c02ec60cbf57f9bff5989ce6de0aced7b052eb279f1aaa8c5319633d90f26289db0cf9623515091db269aaef82b00c9cd6d0ccebd7f19fdf327a0d977986c1d5d95ee20519bc1fc8cd1813a581edbdc8130c2676451c2637067ee144a2a92d46fffedf001c880fd618d6d45a3a350d180893b4090746f43cd3b0026545d39cee61d6ac9e1124145d8f66f8d914c792462cecc55f6af609709ee633191e0b82b4ab715aafaeaafe50f62b81f350d3a84683468a35ac7e6ff2d9b000351c53cc5bdf18a8747d202024f4590052340550c046e9ab710bf6188d8ad9c54be368ddbed60d3c0c1bed1bb9b57e9889d89645359b0d34b00d755510c24769fcc568d2c2c00fa98750d2a5efebd539613e9d1b8404b7f9a9b0d0732fc6492a43011cf7c2987c732050bcabcb56cee37a663e3c3d8bd6f20f96126417fa73dab627634f20cab473f4abcc060b478cdb25fa39459761e7bc812aaa330b423fc702e59b669eb7aafe2a2c03dd7a47e67a90aa6a45f92f3e3312e877a3a0a631ac5bde34066c66a1f9819872f3c85f33be1dd5c23440af564182f0135c64de3d6954f682d0d9a56b03015cadba6cfdfa870fb738fefd6572b02e2484eb56f023e4c9392941b102a421f5a3076f86d9da2d85485e3112b6482d95a10b00707646fcac263ce84dc124e6b4e2a98d4a1fd0dd2251516befcac6dcd7b1058393e0fa4fb63e14d95af06cbe454fa10d5cf34db650b82f705f3e11b8e1705b25314f2ab9f3fb8672ee4920180bb879991ad0dd8edd1ae70e3645165126f39ba2c6173daf1d79225c9d9a77c7970740b3a36537360d4c45b9d7deafcdcad18485c082094670295f42eea06413160ecdf190ab1e4539a956dc1730b9640fe1f85ac6dadb88c416320d4ef2e08692a32e6e19c89fdcc454325a7d5c599ba5fa15260eaa3dbcddd9d27b090e35d99ba6d172cea0e71d73b767088eb3ee662d8c92168aa5bd45809fe23a8bb7b45c8035a6015032bd90b1a6fb930bd24f85a243a983f6d1794688dc8c2a2a0d58bd7a0bb1fd7be74e346440cadb7b088d606be4200cd0277de8e3ea58d60fe38d9ac17868cabeee1c799c0a710e7c022307cb4bccb232bf3e79f8bd56e9ff996d9590d59ff7c868866f0ed8214c748f7f1d3d12a140056724c582ef03ba1ec9fdab9a6de8c9aa82048f97c8cc41b5ed674b260f63e7c915b08e3306429187cf04aec825b5c3d8529b3946ec13caae97e23bd5b39103a11444e0198086e970e725abf3c9531b88dc01bc606b39b279be79520ea6ab2f78e9772ebb30e985d02954cd1b26e3674a70c4c2dc51f9e1e4de36ee95082662eeae18dc17aeb88849b931beb2182c7a0c646bfd1cdd7759478988bd97e8683f814f967286b9f7b7fe82e3b8f9a6d6a7debeb327594df24862020994672b7aa6c8d022f5ce860b882447e17b1af863c827d42b718b3dc22cdd2518c0af81888bc947150ad97cc0ab41c210ab555234694a6721f357810b7785c1b57d5857ab9febae5117f8f741d630edbd0220cb998ecc768ddce342a38b7feb13a4a4b4c32e02efffc8ccf3e4e102f5cb6cf5e2050683f0e640af8cd0c7edd5a2ae1c3ce22bb5cf9330a85e55743eddf6c61001cb24afa1daa6c299554a1300bb99ae3a0e650765fb1e82fb9ba1da2dce065d69b39e201d4dec8278a088f845eb1e8ce134b23a6a0b4ebc4d018b09d4b61a4b740971a16d180504869b0515982bc5676a9fb8457dd82d0039b7ec15eda3ddf2e8870eee8bc9866bf751169ca24d31187c57e35a4a120c99533dc2f754cc6cf979ff03517376da20c2e3b4b3f2eac3356032d0f430158a1bd6aa116066b97996d77fc8fcdcbdea3d2fa702ce13275f07790073cf739488fe9182d04179d0ec0798b74c5174922741e3b58e3402e5e3a22ba8358fd298f8f67bf6084c0c927da4a58d7204111025356093b7ef224104e1c967dd1ca0555daae99c01158427ee5c667a84f105b5861006021ab2f2ad27d29ad7a43b06cb37696769f4e86bbea1fa3652d37fe79ae2517617c959ad50dcf13cd0d5e3902751cd3eb2ee09d1a910706d1e72b5f1ab8499e62f328db830bfedb181bdd12b0603b3e2858d5221081438262055d27745d785534a2547141ba9fc95dd88a66e94d84aede94ce98bd1147922df2c37f9df76cd05ae4ba59076c433a032450e5ddddfffb24b57b94971aab9f937ebecb40c6aca68edb2c0e063dbb1a185ce04618afaa74bab648502ffa498b5091caa6f88b7ef932fb14cf4367451c380111b425f08e7a31a0e56bda05869a0c2f141c560dab751391fcd31a0b1c66c65e41234039f76b531c75c13f4994b2819dc6234b2316525b8ea86c1c10c950f27da63ec8bd3102f0cd515b4ac06e3d9cb82ab3323bc5d0e506568c60999f0ef25428072b33aba137dcf22a0001eee652fcb891b6260a3bcfb1311ff1a0d19583ceaeef46abcce2aa859d01de1eb88143ace2f903ba6e5f1d2579492cabf71855c2540635f8d2d395bdfb72e146654d9f13b543be544baec723992abfdd22743f48e1d0c1deeffe8797cbe9913ac2a5c386ef73a3d31fd74ca3431439fc10d56e629b9c295927bff502e0cbb757f5c14add282df8f16d0091f439137b97c1fc1c61923a42b146b1a3503e9c24c78e4f9c54d0536433fad7681c2d9b73b1cc880cc930c13f3cffa86b9e485f498009687abeb4ece3feb18d79d6220dbd548b1db0cadf71f61bc80de1084d330c3c0839f6f016a4b2ce63a121a0c619485e2ef6f66820d9a0a92e26ffe82a7ed637af35ad76c822c4e2a1ce5dd218ef3ce1a627e334b43bb865d04a0a3c6abd01023c1774ceb9a8a3c11aa3bc003de259cc2167fa6ed9d2b7bc2ffc04bfe1fbd79260ed78d6e8f3e62c03ffc79a9d019f93b3fa3c2d9eaba55fec09f15fa11e9c1b3b3e97a760bfa600c35f3a078ed858d7cb9b25983a2d58761eaddabeed6824d55a2c033c1b7d74ed0fb3a40a533719383f5694a80436fc241b319aa065574cf0867458ed66e3925b0c829783cf091e2065acad810097a43ff1a395842f862d8d3ac97337a06c28caa8d7a0bb23b9442e744c118c52d8f60a15e9c4d660ad941e952418edee2a09630b358962843e584c87db70c1ceea120cca1242b8c95a47646dc46617e69e68ab27e155ff4c466bd94d7a50fa935af2072a664f51d96dbb49a271c6c4df2aa72e1407fb700f9237a8654c7900e2a99269a4fe1f41efcac7b9b064149ae20cf275d763dcd1e4aa5b3b3d2797d9cab8fa6c7f34e7a2ff895d752ee0ee8afcaa70eae4dcdbcb60457cb14be4409ddb4d616c52ad03f2113eac54be9104d384e6273878647e8059fe8d21d8fef72886cde480e8dbeb6538b4b5e93db0c7814b939c185141c66a41d2cf033eab22cb6cd57a77aa057310f0bc011187b273777a8c4584729baad96bb2618231175d109a1a46f3a9d76864fcf354a477d5473b1942cb75e32449169cd061bcd1243c9b1a9e569fdc98b33ab7c27b74e20449a1c0134077a86186ebe95e165ba14ed118877e9e2c9899dde3f52fa08dc6902ee1737a18a206930afba70b92c2e5999156200705d17de8f3b3151f2fd71c4b110e2d34d6c0ad474ec391ec40c76f6876ec9d273719649888fee7f85255fc35e835da76e1df9aa979b38c55b95bd96e39f115448a065d4e3ff08997a16871896f90f04e8c2c91846f8a8b969b551107616d0caed9aecf3e26bc7d592a6448ab57879fff4d8adedb7fd2f695bd759db955b8f18045282d596e092e95e1dac7a5b779e403c747d12c88340af980cd12a80770115d324d3ae79b39f4801c7a2b84411eaf17373b5db7bd148e1b01408cc5390195437cfbb2924e4c6eebc489484678461df6597d6b1870f98b61d478366cbef8f1c7d20b6d4dac96e35eb3b896a2c940063f1ac8180009d49482021b5e6978fb831176308a5072d59d273139233a72a9620ac9727476528111ca62705b9defe527ca1a9d3b4df44106dac7d9f0f5e0e46e37c6e79b7dc95041743af7837c5e1b83b1d8f8bd3f67a8853ad34cffc421c1bbf885509b34118bed2de83f68f4b74f640ee2d819910e7f9a51379cad5e4e6feab3ffd6685cc61eb0d4ecfb4a03b00ff334baf33666ce975c700656892a1b06cf69c56079eaf1ab2e714c4d84827b5eb4c4ff0d1ae8f78b813f492ccfac00768e08d97b549ca48f5174755e5543e69f629a22817303f2858c0e5f8b05db2d62b6c57b7eabe259bde2b3503dcbf042e35a99c5bac5bd54eb868dc0d6c393232ee1979a0f7d808a221330edf1d2bb5d575f0d35b77273ab68a8bdf1c8c2955ce3a23ca7a1263a7b5424554ae5d6802b8916199270737a7046f7972ea8bdaaf65fc88c662217b0f788ed166ad6e42e4c4eec6fcc9e3c2c0238ffdf7fe9051fa9bc65cf35f2b54b754597cdeef8c3cd6431d7864405a7addd393fc8b41aeb8f61751efcdf15ee75ebe225575ff5d5f0747d465bffab61f2e847ff9e7dc0c71f99aee4cd1d2d1aa4d5624e0a71458ef7b67f742d4cfd5f3ece48c5b5e9aa6cbfd89925d2f4701482d5a2834561ab6199fff98cb9a33403d79aef7490f71b1a7cd2453fca22b2755bd5c003e0912f17805ca78f0ac4888e5438688ddd4cc20810886b28162ef979ff6a10986a7db7ebd4d93b7d467e32a842f0de8695a396048e56e30db7ffc8dcad407e267b51437b502bd0032ffe14702235794be89c48b4dda60ce6ee47e1cbde5f7eda99fa15b9b6de2a2b2df4c95c17ebd825d0dcc5454837534818648786443ab3dfea5ec8b31afe569847636fafbbafacd5c7cf1e7b0b0807e1f9291599c9439db0d97455dfa9667b216fecc1f080cb3cfa72a13554b231bcd150d6822394b9c24d88546d28c0e9b58dc62063100f8f6dac8f4fe0ab5f54194bafd123827e865eb4e08df29449d8d9df04f9a266aeaeb5e44b7c5314b255744c36e6708f00d54dafa95190e64f18e9bb92a45cb4c6775537276d51f99e20211c6c3c3d86ece66175bf80599c1a98f9a37d5403a0d3a5bcd4e8c7492c32f426841e1c1b52930424adf709cef4df6ee44fcbf64f13f8020e06e696055fce3889a0ecb2eaf0a66b98bd539922d85d3b78852fe829b671f6332fb711789162d25c8237b4aabb9dc50cf2bf5cea0f60f9ebdf1306801824268099437d1daae34fd281e31c4d08258717c43f77f6589869555bdedf8f7a8f26da0a3743dc8bf3ee69d9fd821b57c46daf67ea5cae99a39b75c73d6d52ce807ad9c30d21da6383359891a38756ab61ebd3448a85513720d0d4758565277dc7d077ee2bcb6f9a6a3fc4bdc785c37f386c0b14aa4803bd53b5b1a159619644a436ebe945b44ba83f5090f0ed8b082b1caf210ea86ce12f611b1c5519d93e4a7119b4b9222dae18cc346de4b39b4939dc87dc8a3bbcdf7c88e279fafee0f396ca02cb6964ab0d17e5243fce6efe2c19fc269058429991fec01abd18e2e552f1b76116aee00ecd10a35b6b8e72dd3210f1e1a01d4d35bd702f87e9e6f664320aea9a84b20197b8286078867d4bc96f06d3165ddf58562718e979341f14c216e2a762d850155645fe2f61ed8eba1b2557783908865f4504da40d56df73a145c22862052fb58c37c27e170b0552dab42d945145088fda9ad09d07a59193958e32a3a0f643e7098b42f741ac789440e515caf3e79b88c9c5b439b10c623ad34162808d2468c9f6a6d4d4da976ed7b4d3127c19e299506614b38ce8276b09453e6d8370a138b062754a04a0d398d1072b984b8b061984fec4a8db7bd4074f58d97b18352c7bacf868583be1732468e7e72f8b4c4dfb3ab8e076857160c90e9c0fca117f0b2318e444cdec132759f6234f5203907f6515ca17eb1bfa7d212f1105b64e4bc573f6fff6548e9803a6676df3cc7cece92904bbece1cb3f541f140800e2f8e034cd1224104cc06aff1305acd71f3ee45a9aedbf730e927cc4b339a7faee9302ca637e495450da9e1ca6f43e31df451c049c73622717a79752d9b639d78e3413109947e4769a6d1d816648c66a9b0735a74075f67cf08d0018d177386d66366a6acd6d0dde822ec50a3d923d96d6b878e48777b51b4a398ff78f07d409a7609c45a9ff5a381793cbd20a3b8809744df2f795f234ff48d2467432f45323528a51955c8ff62316d109710157950bb092c238098002c12ce7e6c2c1686b8db4bd430cbc5bc2e8072f80efac536e965c95fd267522ecc90a1644c97c334969c0f3d104cb0d4c7fc1b50d3ccbdd15f2f6f67fde8a681c4eb99a8ea15b497c2882ccea595e128986a77594743abeb902a88b87289f81795f3f40c8131e4be7cd16a02ca9c4af60d87cb1becc1dc9acd5385abaad6ff3e0021a628f0f70d3d72caacfd972afcc583ed0682c4f1e84f04f62aab3304e8685d872f59ef98bf002a67ad0a9aae406c191bc5c882e6c914b7e120b845c32d651f06e11db6f03053891a1df1d2e8be86e506241b85f044cee762df354bb74c5eb8620670788b5e812a280f54c79c4c48b552214982958b5c29a9f5eb03d2efcc08fae34357130831cf3ddeb5ce8b245af4291f5506e786a88eda64b156be51376b4e85ccb7b982f6178e03c61de6c3a4655e126f188f4de81c8711776417885128a65ccac5df8efc2f72ac4d3a01fe994f29b86cf4abec65dae656b05213466b4ed403fe1e0b40b06864255d1d2fbbbafb585d071ccce98e297a592a3ce1d06ac6bffb9a82a8d69d621f67b9ac23704f27c95e96d2c2eb7c19b361a1caba16a02335dc639080fc714fd8fe6089749c5292fc94be8dedb3d38aefe06381fa27c28357f0f984a627c0f491a32315b43ff2383af9832647e5e6c088a9ac17d5fa55619bc034dd3d7a450a18f2c32811772f3dd68fd3487f51433dc7f73bd379c7f1e0c070905f9129d64789c6284bf0e13d77aafe4bbdd3bfa8f04d951ad77e3af0ff82380ff373be5d9a190775003dcab40f211cfefdc84d20707b6b2f4117a6a86ca8f5104e0ae56b9ecb4bd1662a1376cbe14e4a5d22a70ed5b7be18bdb76f86fb47352fef2945c25e490927856f1c3c99818d09ec50f323f92d2271ec77f47346951a29fd7d609bb9a3ade8834ee4b272005f139269c5d5a1ed29552d3c250fa14837f1cd0264e6baac6a448a50400ccd6d077ecdbeb6d447f2db647a6278181b1093129c3af165eb824e9f09e700face7495a6c4bf2660dbd657a136164bfb79e2e330e476dec4e029e897cf0dbe389d02a60aae10deede9b67a4b797059a7d2ea5160d138656eed1df39a9666d2cf2c49852c0355c89061d44691801a2d448bb1b255d27314cf569614f88b5ddbfdb785adadee3c0d794f93e3be654055b9edd06ff0d5e470359a8bde47c9ab7a55f79a411f00ee18750ac2a643bf7e71fda798c3f3e581f07937367c44205ff792975a19ac35e7f229de680380894a1c7a7031eec2261a3acb76100f80be482997e400314929481801315e7157250b54ddd29a261e651fe1a95194986554520ef638abd412ef130dcbcf18c17192d61054c46c38fad018f9bcfdf95d5827aae4be387de5a517acaaa4fd274435f12936f74115f974f82ce193127e0021a40b49bb91702945e84fc4983b817528abc881edc7b2bd4ea76df3575c6438ad3a15e6891c6e768feda4b1c96b98c4b203a8945a1a6929b8cef85a7eb4b46a4f395b000cdbe9302783402240dd4ab62a9d32b803179f381611ab9eafa0c4f5d58740ba382caec6c164a330b9e1d1ec68f159b4bdf5dadbc69ff3ca87f523dc097d063a8e206d2028d91f50dba648b4ceaff1744587644a37cbd1de5463f55ece3a1370cb25775c1cdbbaaa4743caa94ff1fb37327be6bf6739294564b1ff0b27ab699be37654e8e2e76e1596ad0bbf05eff44e320abeff398d6890ab034c0c553e78cb957dd03db7e26872deb130acfc96a5788e43b695b7961408a0369ff999b86ac7ea6527e1454b4d50329e901a20c3ea5e8dbe657b47bfc02f538a375d7f4966c78e9ec896f1387dbc20aaf37f669dae8f06adc1adf8a8073b805953e22a2e6ebac50b5a60f460a98252814c2b291613b1400cd5969857a20ebd0b1f2f2d61a9cd509aff5db102e1fa819b19a6efef2f963f1273f05a87b1ec5113dd97ca43c168564356d11ace7ab79d9fb27a2a91f35a1ef66e81ff87615d22b1e5ef635e35edc47c602ab7183ac8c857eddfded5601b2468253f6fae20ee0a8be78716692d317a77c6cdbe79f0e742194603911485816e0e1afaf7021112b730480ca367e1aab7cfa07ec6abef968ba0c44c8c913563b6869bdfef3543f2cc55a18d4981e6fe7ba083e3a6202a69d4b30f214cd337b269c5b344a82a97de49c1d62a81ef5855f2987d21fb9f1cfe7ccf9018a21ae5a09e81641295ff2a1dc3dd2563e015fa09391c14e295ac5041e7c5eb86fd6b356392a38398ef86cbc0fabda24845986634e9cdb445c9ec198b9b768f76fffc2d23a111694f31bcec7930757c7131c7c142a142d5f5057404d25947f2d524fcd80cfd1fce034509aec2500b3eb318f76bb7af1f5b6d939b248aff4e87d1ea87a7fb6d17e44caa57c1df87eefa56966d14ba6abd873a66f3a89dd823feb1777be34bbaba707f397a4336acecb42696c43127731b4cae95993445e2f819fa7fadb8a048bda16407eb413bad614179a11cd989270d2ab5082c2c98de57115a2b4ac1da53e65b12e91c837d57d4f2952dbd144aa46299211f39554b3fce4a41879e0e27d58f8df1113d0bbb9c617006f2f064b60f6814cc199be8fae341c6a20e43413201cc4eac6efe127f0e81628d804cda6dcaa6d81ab08265ab3f191ab647da73dd77e55408b7ece982cb614d1f1271a4681fe5be70af95d798b7085785ec933863d22619829cdda8806aa4337af4d543d9b113644872286730a0069bc7a77926033f7db2406d6aea663da153b0755a629c86370366ace1c20bc180e3243af8589b1c503274b86be91312ef48ea46ce91aa3042e00e9b5dadad3ff0d31eb05c99bb3ca2657593e0dbea7bc1cd5411ce1cd4633e1da271a6e458e172b6de8aeccdd0e404698b4468e0cb1d05804f1db0e9c27effc8a8f10530d77a229e076024425ff6117586de10cb328e3776a3052ba2f577285c2761d4ffa6c341b0abf566139105b228ccfdff99dc24b6484c8a0f3a88bec6a8d616a9c47f532ba9d1bef6e1eabc8867d059d11620bda60e30337e8940ccb5162fd3eca3303fadc61a8697ba3d574e81fd80b496c8c7621003fa3cd17440d5da2e385837bfe6625c0d28cb606de885b5a787d94cb6b6ce636ade2e08c890112e392eaee5a42e4a2d6bae684ce7d29ae0f2ad82ba5df65e88a7d5226f102f8203291cc34cb69c47c7edbafd4b50cc080507239a16278cd5dc0163b50dfb52e96c5108b20051fd147e76440c493340bd4e929a3be30cf11af6b4fc7d04dfb840d7f1b95887d260b518a4f808ccfc83ce2743086aa3540986b1b89e7f8d63003c9303803ba1fc94d64c0cf1291a1026d715e53a1f5d92450d10f313c7c6ade43d8bf7e46088df729c66baccaa228c3ea240d24c84a12004c99db67f1833f5dd397e1e59905d34cb6f951e343db74ea2d9ac39bd37ba838a3fc787884d696d83618406b9bfa20e454a846cd8d4e53b8205a8c3fe210cf3dc82a4c90cbfb9c007e5aa30722ad3d0c02f44c84efea0827b65882b03b9bad5e91622d2de65e20fad85da3eb6e26a85c68f6b16eac9ae0e97acee22894d7e480422310b018f1b66a9f1028e814083c588f94d160f10dba11295","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"0aabac08744f0193aede5089e52de7bb"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
