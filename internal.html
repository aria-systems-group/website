<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"ae36e902d0db00ebdeb6c8cce3664d6429eace6b1633d53abad3063e6ba9f1d1e3178c9c6e8044d486e13b0bf3c18183e5bbf75497f60bea9a59a94cfa8da7f5426bc021760016871f6fde3bad0db358942a28b9c839358454aa42931288e216ac9ebdf9d8487f33f41480a4693a49bab364378eb27fac72f6d49e79fd6befe8adf4fb9a78a9f4b0312b88f6aec2d7dbd8039ac9c31a7c10a2ba49fa4c6cca2fbbcbc80503654c29718b17bc5afd09ea4f04dcfcae26cac35113381fdcf3690e5efc5a49a383d416f780f2f9c2551405a6534b558507f60c6741e0bf80cc83f4829fb724e85857e6658675c9dfd678542fca51a54fcafe804607f2b4257d70a3c1756fb8a63b4d85e704c60cbc82443a942ecd591a13a075321db6f1d851db4b049cae4a63981744f72f3863053b4314ffac3e6d2a478f847c88fd419285653414d81fda3c5fd8bb4bd1f8e9069cff2aea94b6ea8e9d29117b68a07a25bfe215e7b1228e5609109af1ae353769d69b0d7e21896949cc420c78e6cda5da3601e9f266cbce8088fd86e37c234ba2e15809234c42b5015872b50799d7486be13a5cf237c5e96981b21bb7053c334c44168b2560dd02ce991d35f9379c0e579092fd156365500d7cca88eaa8b1b3bde035b1d2665470f80da1ab2e981d239eb5f2bd67a9c7b24e2576f2e39f93c4524c4538b544775d692575b763e6763d53542e61037cb41673f33ddbaffcf1dd5740325765bb26fa17afbb8750d506e21071cd711a01d0718535fe79b4a2d356898c2e8305560f669093c46c76e9056bd0b88006c187f0d53aa2d158b87ac0b0ffec6ee8b05db089eddd31741321cc279b17a48a3976678706cb36d590f6d041045dd07914f477e3758fb44a9b49b1f2d7c692adcbc20479fee30e0bfb0a789162d941b32092b60dbed177febd43ff941a0fd7d8a9cb98b197d83e369e226df9ca3b1a4c441098101de554d667e860c7f91050802ca1bc60fc2f305cb33940a50edf04fe529cca38d357b97d396ab16fb81b784fe6e4f9b88e67076edb96d0293e3abcba614f4c5ecf37217132c7c4f1e2accfb2a6116a1ffff4f01d165d513bb329e41764e1309d2d28515e8e911c9a6fa2a1060fe7782aef82d40f6e3cc9f46b187cf73df9dad7e43343e26339535be75a6ccf3da98ddaf5dd7a3457abc26b0364984ba3495180795e3272574aad761c8e20c2946662343eb0932bff6367f18d060e70e2888d5159e0ea41de3a2fd44f2b6ac184c878faa2d1e74beef6c8b80cb595daef846f61a12580f79d6af8cb36dc1aca4360b962536f6d90f1c7242aa38f1f76317bcfcc03e7f4586367e17f1bc6a00b777fb6a997f2d42f7d86fbd3da3c11089b563e06c3618118676d60573668f1db2055ab6c3585531f4cf1aebf44fef94f717b76ed24e7b24833652548f843681b9d30f90d7b7ff3e75f1a33d00d224d542bdf2e26406111a8c08534160ce6efe6765d3eea3f23e92220e36472f9fc6960f7cfe7386e285746b14fabf5f4e0d7659983a3992961022a9ae088b025196c2f5545aee53e01097cc2c5382f073b9b506a9b00cb36bf3656f5fb924668978b6afb8c28e8240709a5d1eab4f687598ab8c0be1a4458ced0fc068e28b86a87d60d134d87151cfc83b3111b6db0f0b76802c486b5799fdad24d43b1d636e33e1d1297f045ce0336b25fa0c7e6622c8b9c29a26b834d738677d89fee5c506e01c1d92911e03ed84de8cbfca5550ca41c18a11ba9570f36a03df7d3c1de3624334243de9614e0b07d01f9b61b5a53239ec4f37d4c81bedb5d6d21207608bf791ce025e520770ef194db04283e6d6d171b6e85bfad8e92f433045a2b288ac518c170c004017e94e11322d55eb53576a52b0baf20e2106f2b790044aab80b6bca7368dcd4ae39ffee4267382abbcfa5649228fde86ef93c17d8e93c97b9a832df5292f6665f25418c5284091daa4dde50ef4a2c14bb13569022d546401c3bec3020708d201bf425dfcccd91f91fb9d57e626c5ba5f49f8ecd81a652885b552af0d67cdcd163e1f616cb1e589f4d33f6e4184ffe8d1fbb374b85069318842b6c7d2caf79d7ea277fb7dab2c5808bdfd63b5639de2f64cd1e055ddbe00669ad47c03cacc01efb4575f5a5b3de628379d3d3ea5522dd412ff76a991714fd7603c2a90c09858b05b7a175d33f5dda0ed7495fa2eed22e4500ca2f8e1410a47dcb1492e00bb2e153722e53c0b48b26e5f0f215f30984c4c5661b932243b743c6011319e2514cd13a64d056fc5839aabebc5d5b4affa2954a6bc8a2bae5a4e7633f03382ead670b6e94b729b83e4655906579b5f6e33468d7eff5fe8b7f7cb4ff28c3698f25306ddd66cb81da874e44776d9effbf0607178ba226898c3402f3a1ae521c6049483a094e2c18f11c0e61a4c4a31b799c6adb725617b83a1140050ed801803821b95cafdb9a9d915b98578fb7d418ef1eed140381b8f6ba29f9e7caa6b6f036f5e792b610bd57334efaa278aaca493361ebe1130e6c7bff536057e0d6ae786bd0c4f97e5b8be4526ee9ba505fb8b0f8d1114dc30e20cea788c5e1be8038e944eb0babc8efae0f65b20514e842e8c7fa50cc56b622e9e84e0e391b9ced940a9996695487f5e6f5287fa8785b8f37f9f1952d71357bb868698bce5b28a066a5eaac77b007420d50b0057821ecb38c5bc9ef726355b4580ad1534947a0d1ae385ca57845672e95db4a1346a5abdb087344544234158e509f103c067e047f2c28912f9dd999bc00c4306c4d2d5b52fb915aee222cb47b98e25471ec11840e687b3394c26822bf7b746d4bd1417ec3e8aa20dec824331ac4ff0480f1807f638e39f6ccf60711b8a1aa3d423d2e35aa8a9e254b4549a74ef6e6d47e37f1d40deeaa4b08c790882ce48c6e42248ed14bc8bdcd140886f29e7775f9c5585239fd5b73349c9d1b4f71864e4b3e4ea90ede28444cea8dc0374687abe678c208a513dc75ddf4c5ba26f69cc2849ae0bdfd47814875712e558b0b8c7478b1857c0410b46682a31cd1d33e9829d5f7da42b0328c72e7f680b8f56782a86960ba950c3848073a45ccf79bd64ca2e6efbedcd91d909158e8c2c0b9ddff4fb6da5384f7d8001c8fd94bb1020b085b3cde01074c15aa2a71f934473127ec9ce9b38f0b696ac6d4d2b7bf988c2d8238cc4dbe0ca4c7e4de5294de8724cc023f00e288d4bdc03d9741d2a64cedb5d16e285cf60980144ef0b5e59b7873b2dc134446c46147ea4be8e8d4dbaeb8ff0d696454eb1c3db6b1e20dc6c0bd1ad2ba1fdddd939df72ddcb3ef94d6c38fa30cd49cf3ce7a65f837518751556d1147384f1b7727541c35743ede5376fd1c2d6796c64d2073705c7c5ef94e325a6d15746cc69c880c06a345752fd5287096809f991f7226ab44779d941b9d063f54ce1fa1fbc7db8eefe201931907c47a9c41ca8600bb4b88782644febbfcecf47afa2190ddba5b40f9e97534ee72dc24f8a5a70fa2ea531e6fd67f2c68b470d00567169759805aa775243c35eb897743a7af33a70e561f491e39f91d1db6d28a4546b6940636cf1db3871ac191429733eb8ce4829e9d42f05d7400d7d83e48837f9be268ace0d9e113f63cae050442b16e0c1f0f7692a52def2b2c94d38433e96e19d8b21e431083929d474a64ebe5b331d26fa33fb5f5a59072974f38cc8bd0d5f57a1d6ea4110b97c8e98f11d150be3f5b1f42b17b7689044b2b705cb509f69e44d170d3380a9ee0bdd0e0ee1f04e2ad5a4083e33acb405a5cbb6a02a821bcc3425a2c7dd7c2d2219de82a988f8fbe36cd4913f17ca32e380a9feb9ad7a576f8954b8b36c0fbd0aeb9aa0b578804f6cef196313e4304dc1199130d62c1f78bf563afb1a62cd637be3fc73e6cbe3524d4eba1b5c2c4bc60675c31f27d30a38f78812798cd0b651c1a91af714072c0c623c3cc5f87fd5b5efddea9c7297f64993e527bfe6aa060881af9b3b6f237bbd9b6bbf39f639e6b07ac29c0fe027409a816392066c1b584ffce8d952460c465469786c3768a68400af565b564cf53d6398b552aa43def0290c3a71bf7622f4650d33eea884b0771af305a1bbeb2cfef3e4fb434bdd198d9c1c2e710e73a0733df4bac3b4870acb035825829ba5a2aa2163ef8bc07f5fae344e05a8c611ec32af014c5619493d7c80fc9534104b5568cc270c314c3ca5057e8657f73bd5acc4bf68a9c54f2834ecb49d79de8ffefa7b3291eea7710e9ca3a3b27a949bbf8086f0328e50248a879fd62a5a5e7208dddd36b21ede38c73a799b3b165745736c86c3bb366d602340636fd507a347f512d0ae901e4bbc197b2223ca3102453f528d7d730f3ae957b8ce43fe77c82ffef495e88ba4dbeae19d610df9fcd1c0ccbd1f32731783799f026a07590408275ef98384db83ed40697e6d46b1bd924e47246ee630f02b4204c08405b9f7ae11423caad3b82ac9f975338ca936a28fa84ccb8ed0bf163e1d061b60cf07e8e885447a470ebeb4f8ee2bb463d1a98450d6096851e8e09ef20aef2698014cec00765ba00dcd3cd4489d9656e3a1b006f37c20c2f70b0d1181be169fffb7023e7dc6c237eaefcada9691c526cf58feabe51692ab2adfe961a06023e2554d43f12b1549a62b20cdc9d7307a7660de812117b8bb4ba68a1e51843073406f69eda9fda882b8a9e8f0fd791a81f2a5c37c59b6c793cae33d818ee92056068704507c6242ff8da00b54d638bcf33b5d785460d66e105d34fe91eb24bf98bd9be8cc64c4ebd8c9b9ff64ac6729ef0121fff344fbe2b4c3f49185645d28b122eea8ddde9ef0b27e4bb8c12f1ab284895299a9452ada6f57bb55a4d3a48003af0c0f4a40f4085761ce7b7b44a8e1632a99dbaf639ca55e9ad2145ce287bdc0449185efc684df63bb7b1d14e6c4cbe057f610cbd65d3fab703bcca965a7856d01e22aae709bd5dc8a4f2cb942ba1b88743092d0889cd2d833994446058f5954b48d0addc3e6711f8fb22ec5e76b3fd05d1c35fc3f0f458682cc7d065e0b9b90ae5a8f3c9a56fa0eb4a05cf1215c367ec02b02fec4c6ca22e96f42b1b75d0a2fe64458e0490eb1677c00b20a08563ec334598e000ae8b530e4968d865f286142d52f06c22dcb3c085f08f6a166e90c952e345d5ba9db1bcb1781ae61c30890e3f558a7da1f279583fac966d84bef384d2719823d091fdd21506064eb588e8400890ae5dd7e9ed0f00edd6b32e3599036f9c40c9d052aca9a19bd5a8320ba9de969ce67febe367014cbee229d78aca08baa8c2414ed074da00422dfce3ca827b8d95b2303b321ca2ed495ddbd1952ce9640973406333a40ba3b81ee019f9766cd7ae474845cd8588067290f389c57343202484f4a8aafc87f37c53e8a983d7b7c762362765fea530ede73ce62ff2d237c2d7196939cd3c00429354de69a4bbdacbbae14b82fcd54eae97ae14085b254ffa7b73ce73349a183edc3b7894a403e6b09fb4c6094699f5e0aa9ad29cb5ee9f5e8e715d9316c4f2e6bc1f50a6d6bbddcc99f136fdc3cc4c5930ba4554cb0728e0dc2be165ec646f8ab3564b64b0947eb5ac6f1599da9453d65c6cde0d872911a9cf33f86c29c4a48ec40203df8f5a2dbc4e419f185b09a5a4e667d0fd2c52960bf7291f7a38970b1f258bad5db2fbd73acf0504155949ab74525fefda905f236e33b6a76efb0b703b3228592294698aa4bfbea8b9672a7ad43634983a926568954e28b28309a7ba31a508ebd3a06bb3d86bb357d02d543a403d715e15f8e738529d1790df07991aabf67177e5fa2cc6b79542b2de09574dd315acbea1660d9228b56a9d7e5eef8d80d36ed2fab1547f8dbf51e80ca1be7c699006b24ba2c53495f12982cbafe6d016b28dbfd7689dfbf6f1514394c7fb236340f793c526949225ca742dec6ce54815f44b76d07f2c9c17716bed80bf2352e82107f1f699d9158cc3dfcfbe187d65273633a93e07a27806403564038b24546a04f1c4867800784c23bd60a5e272ca98f07d99bc2e34bb0bd327d4280c1489b8f910f568aed4706d13c45dc73fee26ee514930889103e05d511eafcb10c18f8b99f381a44935b2006cb92eb477e80fb367cb6f0a1c8d7445200e5f5c1211bfb033dcc4cbc1b89646fa5e9fc1c470271fa84790e18ef644b4cf8334109589aecccc586c98091ffd43274284ff459de59d9cf6639c179e1d34de3643ea9d0480153e601723de27345c3116bac208130c347e6640d3cdbaaadbb1848f213735b5c8d6a583cc24a687a5e01c56277d3f05e231baf30573dd076ad08bff6a226f5760beac9b22e7114955c92df7e26c5a5fa359eadf1dee230af439d4badf123ca5226496340a4e43a917c935599534a3122f7fd9bfbb85b72ac0456ce442cea462a17b767a20896411dcf1b243d5caa88fe1c84ab144e6f6cd321115b85eb096e60072f5ce43d1f5e782739745e441f5275e624624ff5e04e8c0be6d4bba3868fba1456262b42dc175a8f2118960b61535b4576f33a6a972de06b2a5378bcea0ff084ebd19bca55515d994c3adb8c5344b188e5e4361c362a1258d90dd3fbd9d8f726fa6568633a2d275bed08a6b829b36405cfb0a34194c2d507dbe363e0653246d25c670534afd456a9b9a33f9a449bf11111b0289208208046996573551e31503f1f0c36828a8574dca72f09ef424c9d8d181242f7dcb8e7f06a6525c776528819d1b76f3302e08c7ab3c516f27c93a65b24aad98f838d4ddda3445e1addc9923a325cb25998ec32933d8b03135927ef2509fc9c18fa1c3d220b06878ff8bd4f3d9a422d0af84a7e8afa3d2c59f352bc14fc61c1fa8de2656e18b7ac4ce30736750174683f8372de04c21cc9c9040b2953367bee1f3b2d0bc11107d6d23859a0dfac51ad2c12b978829c1dda70fb5aff9f75b387db1968c3ef82d4d6c0b700e6865860e0313166a94354aa175a8a9ecfe26324d231c1ed74c9038b3f45173b5ed2df46e8feb9e5836ae9e7022835e9e47d8b27423fcb324843aba9893204e25e4df822d716be8fca623bbcc6bb02603f8d6d88afb9212d80d948a79682ade500ce62811fc6be70a69cd4ca4b5c00aedc668fe5416367fb31c1035206298124e23934d6565767ba8d4380caa1df073f44e3f2eed2faa7e976c03ce7a4d68fbed2c95e9a5e308e0f41ad0aeb5707fb853cd0ca5ecda5bdf21e1876faec4ffc5add0ce2d708780f808d1764e9e92673e83d5a1df95b559d100b013c19317017e3006341c4bd7b075af93ba865713480c8f12c65501c8c87935d80485f3d35c62ebeae680f006951374ffa3d34c14c7cf7cafc58a3603456ba1d21d622293703884cd272b9de8628393de9a2bb11a5ce31e0cf1a60d14ddc76e95e0b778efb9f99984c607e2f76ed000e17950a6317ed30871eb2106466008b3237d72c9f25283348e1ade50113c4cbac00208862abd9b78c2d7a3d7c2b8e5277aeea9ea85a8d437f09000c8331644a8e94cb719b85724cbc86438ce6f1a9bd19a66e97ded43c869dcaa875df3bbb95d97e32fbc564618869081a11101960275c845b78f76015dd68abbd61b54f211bd6de71f39d68a268abae330772cd79754c6c38d50bb927f014db0ec041fa9be82f2bcc950dbda21424984351d77cb8af030f3701516051457b2bce5e653c1dd0a162acefe2e96a6fe3cba03ce26f3ab612a68cd7910b6dbe5f0146222df8cade2e38c006870cce6b7f53e6117b0fb9a02761212dc829d9fa2c549d355cb22cc861030193338cb0bd1251403033d5bce6befd7c663a4850c4be33c7bafafd53e930a52c7804dd775213978d3cc7f0a37e6a5eaaf4a64c8111ad97ae4863261fd7051da54f753513b2562002d064d694ce066d2ef5f0b3c62cec563556854cebe6a2ff39dda2f946cdbd81de8f233b12a38ed32b83edb46b3afbcee960cd660ac72970c91daf3692aa9c6b4b3a93b9d134fb9b59ba0111d644239966e683852e55477f3f482d65e48fa00e32308183de59762cb1e30b31d5f0eb97f108c7fe2710f1e70e8579b069fa95ce4d4e66a0e0dc90425fe70e1f6808af3811b27f323f68d9e3f03208ce83f9d71c4b7de301d999284499d5a8f793c596f03ae46a590e7ee25a1503e85fea00ba8025f85177cd33d6e0860755f26a647372079ce6cc3f46f558b2de4933ca66842f3699508a86a2c6e35a826d6159c036981bacccc8fa55728b674f197fdbc6f93660d3c3a1d38abbdc83bcc3d302cdeee748e0efe7495016d6ffd1b256ae57ff7aa535d076015201061fdba51f98c0a440193d036072bd058bdd862da61f855bf6b465e0fce42a102f2ede9f882088b2b7b0c29bf76c13270e29636ecef275da32bdedb804da9ea67ef684ee41bb75ef99b6a765d36712c5b275a7d7f2e6cb1882e3e7b89626589190bad70e3b6e35da38ceb221d01cfaa04893f76939fadd169fafc14b55ecc597252f7aa916230209853125959f577fc31794129390bd8a86320582448f5a5381cbb743d340a9e8fe126b4f61b986a6ea4b133b1d26a2534d56bb39842a0f226650372ac08f4c937ce961150de0761b987d2171f8eff7b8173e1bdff3c850c6e68ead46abc18c06eb014977aebe5a39a107b0f3f4fab7c90a4616aaad1d2462230fc1293cb345698017d91dbd77df5838b4f21a6c89eb6a358cf8b0ee4457337ca04ef025bc7fc81d3356d5ec54ba3130c278d9467d9d14004015dca56ad83b09102b808f62c55583b509f89d27d0cc2bb9e2e07facaefe00cde77e466e338000174cf76ebd9c07f3a38ab494828510ce4ca9f9ece30dcf04438b419639effc83d415a891508528d74e52cb296e99242be66b332180588243dd174414d93bf33e624270c13ad90e624c7bc72da2ce01dea4c155bcd54d42823b3304f5b30704663d44de573981c29a6c56bc8eb5c9d2dec3d11ece4d232c742c540a854bbce04533c34b5471872cd0fbb03fb5169ed9cf6bb72017885f7f0a32899ad47b6fdb179f3af50985e6fc6130007532b54fb554a8b6f1b26a447e40ef16451d8f01729e8172c43869448ea63d312a1a84a591a9081e1dc4a760f55911bf343437108e8dd8769d6d1db12d77c4caec4c8696cf90960eeff4d33aa88bd7c463cf23816aeac7f1a877417b383b05a32ed4c8ba97afe427e201fcab5c0ac9879112c54fe6ea29b9eca259a667b739e0577f5a9ec74b49d8735abe2e04a33e4500956127f220a770d1ec8e149f837d16ccd7a715ce4cec02e56835341de808f2b9cc9730407986c2249bfabdc77d75d4d4553b2c6109aff981b481292d727bda6c47392da194d65186ac7960e6ca4a1edde1cfea333841db4a741f248f892118a0fb8a9b16b763ca77dec9f61030f214b5bb8e09caf62bfe79c2588a27ba4317b47cf9512bb9290943303bef4d53601edd964046e7a90b6e84bb9aa42223c44d5fac4022e7103d05a1a94a5adf363c9c7ff291242baadbd255fb9a3a557203a4a484d03649b559718f48983e8851c3b04185d8e79a9922ae5a28ce97b5139cc518889372da3df395102da255a199870ed94893a482526aa067446e34a7cf46994cf1f15c6805fd99b6d55fd7f461e3064ed96bbd257f07a670b09938ace4837816e1fae47dba90ec31914f7a880ee88d278e777d25950c6ecd1b7d1bc2ee4c10becb0de54765e44a362dba548c797f807e959423e0cd47696bd1df30f6e98632bc666ab4279ebcacb687cd89bad32306893ce9a03e7a026c0e3641c0cc06c151b901b1928de80924dadd318d4c0afd550b558cb93d0dff61616261bbb2f2a6d941227a0108968b8b295834bd115a947446042d5091f868da6f4e18ec6900255209b0ef44419c62da36809d9d211806000282a8a6282daafc5d475d26e83c90bcc12f23c77aa386f38d05ea500f5b700155cfbfde1b630610b7931ca28087a434b454c0449c6c4cad0d34c7675df4b1ad6e47b7f8ca3c0ec3d090655d02694588e64d729ab6f4bf890df3b54914355397df80889c59dbdbe02339cb2fc78270bbd4c3d57e1213d3ec2c808399d42c668b54b06f9dd07fced88bbf52bffb43ab856b21ff4a06e74f764c449dfebd9a30c5bc99c6fc1dc34b79ab646042acd842f950bb55210dd4813df40c43b041df67884c518ab65332059cba343ac424226b89c02597f8555ddf79af9e4e0a91c45dc8b78e1e4b8b5ff19473102f06c1a9a54447dca7a6b552354af00c4aee7e5fc20297e85623c01fb6aa52327731814e37f739c867b3fbca25618edb8f7282418d72f19f5651393382997fd23c5668cfd3ee0a698bf0f160a31b3b1b1cf81233d2344a74bcb019221a3103ae4e0c70a73556e0e513f5c1e664894414bf8679f368bfc9e9575c5b19177cea80a2e56843f4aad661ea26abaedd6b2e9f1d0820bf1ea7e66edd82337455c16c4ad343c2489acf33abd902bd3d6051f53874449199e0303565eed3c455c90f93ea59ca88e853e68391e5deae65ade4a0035eff7be9561bfb2d285c8ce92d70ce448412811b7afc1ae55f52fbee22aa41ce4d44871512de8f5c635e048412eab9d8bf76efcf918eaba3322ccb7f2220669785bbc787cd6ec45334f5a47132614e65281efd03da36861dcd7d7c77173716ac01f390fc9deb73bac4d349ad0bb323e409395d6f691fcb2ab351b70f58110c675fac80e5d5e183567f9cf42cecc2eefdd26f4f70b73333ef0106bf9fe5244e2159d266b9eb534619edbe26f5ef22f6863efa4ebf7207d002eba1eefbe4fd47468b50e0b841dd2de9edd65452215677591042ee1042a872d18efc2f74031731656fc78109dff0655fa39fd51854ee31e67d7b0bdbbf9266508ddbd2886fe53ffab2e8e6dda885da7c2c2e4f60b697fdb863f765a188f8f5c1e0d6f589c48ec1a2bb9dd411a3b892510288a06aaf5ce9e4dc2f5b49ce258b1a6804669b311460315221690e68f1da0144ccefbe3ead5794239581b87c6e5aaa5ca982d73afaa02305370e883fb79847cce7d188c62effcc9869ad22de32643bc157e366af4bf8c72e54e8a8ac378257ae3770daf104edcae511eb449aebb5e033e9ed720057422056305d0ca29e010dd012887728e17139370bd1c8fc84a37713d5aa3ae6a9f7e30bce4299335ef316f4ec8169d29c81b107642960470c11cf5705d06464f0b07a55d20bd5719a5dc2e909acc9236981a1bfce0b4d5546dfc4075ab603f84e11f77b824ff45d7cf3e6d94db540ed23d62e762801ba7334fefc6112274f39d9a0e2a905214271ad95fa1f4c62f425b7f7913dfb33c81d5963c750e8c6ea68c11b18a9e6398e7cba6bdd1c6672e988968a87ba7d76b86ecb0b76d04376a61041702e1a8219836b52dac999f875638340e767d4e35a8fbd0ec3f167fb5b75861f16be4e616b827cd6784f0feb2085d34de8a4a6168d12d015213f0b0b2872d875f20f05ae395f928b2ee011668451ad40ead075546189222d5d4e5445dcad124a0a6a20ab26d44926dbe017662eec8e8c3b9f1691c778db42bd5bfdad0c45f31e17dfdb516e9665a2c67803e90e33e6c30f2cdfb1dbe13f36e5b9e03176e4a876d1d7b674a947bd2b9379e229b79bc7f176a6dc95690b8248e157383f59e6362de1cfb6d7208021bebc323210293f6f62929b6a783fde1d1c25121109f63481658b8a51d680b9c30ee2d346d1f7eca0cdca2ad1dbd721bae52503259f53f82a112e3551a61720897bfc077b255ae5a972f9118a09c0616e15e9dfeca09c4d2b1a2d6d38fa0f9873ac249dd007ed18fb418ff1fb934ec95a9c7bb8bd00fbf746f8e8ed85f6886a1adf3ebf626721e953c94247aefb756f26958f597ffe54d603419da9256c4edf7b7c7fcf78979f9b1aa89f3c7dc4dfe074c3148731f6915e38db174b1264ba25a4f9c3f0df8c5c328ae6131e1eca6134015a345eca8f994df20ca2d62b82ba34d59201763323483f5090b2a07341103df289e29a4765ab46a7985d88252f3bce0b9bd76e0e543a85efb7fb74654b24c87da2602c01a6238411610914e67e92acd92514bde1ea93c3648fa97984ae336b797562a0ecbbbe79c3e626bd2a310f4616d8fda5b1bc94e9887a38d85a5e337f1e4f3cf5dc8f5d66316b51074a3607b792bfb2491f94c605351493dde0921a47692a025a923476a11dc8c2435d03f7a9323cb46317c6fe586642b1b6850940d7c6a8c82b1a963cd1c0c1684340ba5c1200f27b79bdb5d907bb94e0046c789995c410347381e2e75397d5063d73724282a44d290c6c4d690461596cd58d8b5271c9aa6684a5544c9451dd78ee16b612d172c8860cc19912308ca57a62456a710fa073f6d8781cbc6497e77c4bbd5ee565a9bfff62cf488369f28f9fc9efdedb991be8f779acd9c5c1b85370ea9edfcd2f13ee77fd55782f33616ad3252759d57318bdc7b409f66c4860bbe2c10c45e773a58491f8d2d5502c3f321f688419e8761e6869e7453e68c4ae59d511fa64e5ffbfed3542f3b575407f9a61144809f698290b0d44c651a5e10463b5524778a2e6996e96f2a32191074f1066a259241fdec7a5a93f96545523ddbec4964a52706fc7feecb58018418614aacdab215ba1a334065cd308ed067f5a92a6f39ea8177e559c4ff9e19b9677f132bd83ce042893fac424b41575eec210ea8ec75bb38ce15a82748bfa195ecd662b747fb2d8b75cb0eda6c46ab22c73edb0d3ce77a6ba94b25aaefd022a5d2bce0dd6c5adb6b949e77961bc8ba4aa55dd6f9e61d301e8062a5512903ebb173bf995664423e5ff4b226ae02d1dcbf5ed5666135257bbab15fd647345fd832110cdc5700050964344af7e7597010f73a100f00597f74207f33b84d33bcde9afa108c11517436839b58a0cca36deaacef76d8a81130c015ff02d5d6021150e8c007e9f090a5705e91fe7b638dd2b68a6666ee0b1017682ebc6b6f107b9df5ab48ebdb2598d493a6c8ed500a9017ad2dfbb47bdf5a6246d05f09ad8c44b4c13c5c583d2b0ce6f0350f3efe45021d1669acc478dc0f6bd0238abd1b94a75463f19156ade50cd6decad760536316a347698f90254c8c5a72e424f31c76ca1e1c6c3ce4d11db8c09eb2c7e38140e2c98a2c776a35a5a7bbc64b713868b101e104363eddd4d13d028e35f1a83c4e4af1d770f50c7c12e1232fd22dd11f8759a0fee15fff876c0c0629441a5869ccba3d454d58b27ba8556fcb5e1585a9c4d428649c925ed96e41df78837168f068f12dcc1d01a4af892ef015e55405fccfc55bc0024faf8447ab0edaaa3bd677ed5accae647630b5a751e3ab9359c43e7e1c881a7801b62e6d89ab1169eca1e67b6f4564358656dd95097d798c5057f322780c055377f15ffc51188972ffcce15319fc7f5f2f32e6bc9ec267e6af3754579a89d63750396a8a4041f778a96f53e94e837d77f5019f45a5e834433e22bcdd0cb5c6d47b993cebf7eab42215ade78e82b026c517d80bbf1ce91f6c3b0fb6457a8d16c68343979178cc60cd324fbd7ab6007c2ae1603f286eb9a231904e13cc3d37311154525997180a838edb8eab3ea83ef7affbf586e02a1b31530df4da24441d002d0216d11469d363c2fdf215db9911d8eb2b177d24298f47d5c00a6725b06622ae5f5b1d940c25fed12b586200d2caa634d2f24a51dfe2005ab506cae5568fbc6c246487f20a60b6de842006f0fde5cb6ac31d736203cc0715c2395d77a97d203613a8d5bd5cfe0f439a61900a542cc2c9919ecaa5273ed76d8928d3d47078426780f2bb06c63d5499520e868691e19f8a6ad54c4bc2ee4b7576f25c688e1a8c0e5230efd2fc598ccf37cf1d0698a0231535159c3a2073b92640f62cf8456736c988ed8d00ca90035959b7d9e0d89db9f165d91cea26c65f34660b2696d3b652fa4da1e4c7f3e34bbce4e6fe15a1717b79fad15452786ff7260fcc87c0c0e2b73c48174b600de591e49d074e894bda6985fa15b2ef8f8f1b3f27d4fbb713f614ada282bf25b32201b0512ffebabe173b8674fc81589ab9a72a0d92dbf0e917f383329afd03b7c1e8a74c644a8165fd4fb48205c7df4d6b040558ece0ee368f815d2548ee73bc2cdfc20b3fda5abd6852226d0448e8f511edf6e4d2ff91f59e234db792721f9300b081764b04f670d337ffbb33bd1aad0b928c60cba499ccfad3f48a87fe58f750a5eb7eef1e646b27f8e3bf1a4cb0c0ff63c031544882c483207d2700b138a91a417b12f6742dd074233aba48eca2390cd69bb7b3944137cdc7c2316f0051ac8a3e065798d6fdc963a4b84c510b1bcaaa1e621b825cc9211f393d795c4d9204a6255272a36f84080330be4a87a2cc49668985d76e409e039d6ff4da6690df4e23ad1ca6c3040c4f45c78a3944e8a6a8c58ba9e9ef999df3558ff6d34dd1eb98051b4fd0ac48fe35c2508d4ac09f8a299978b8cda0386b6b9e4ad41c1e0ece0aaa60ec1ef9a87eb9dea7e03c3d50641067b2735bbe0642e0ecbd74da77535d0bb22673526f6fa080ffc877b2328924f704e802c59ac49d27e28fa77e7d2d505368cde3f28f64f969f3614a8fdae17fc182f5c701c70dc764bfebe8eb405cf9e9338cde4510838097847b52ac5b4dfb3089e3359b100d1c8d5dc49368f66f16678a8fa77eb5c0ea369956256f993c7d850e2daded300433e9cd65cdc392d6e68cba4b14154b9f8cb25ff50e1fe8a72f9c434b2f4e881e0b5273f3885d71a6d383e3419af3b03cb79482de765135baa207184ef1a3f25f0e67938536ad424fdca708d50bf17c2888229194a274ecad4321843807ceee4e073221b039777a36d8c4111a28816bc09c4e5efcf5a5e76d7c3aeefee5e16719f3321ae7f00ae0015763aafb6542d977dc3bb795ad3d675a55d3e91b3acf69bd09ee352bf79ba1fa28644b6dc089f9c7ed36f25551e0fb959f202979cd754d1bf2e86cfe70f174e3ef7792b9fdcccb80530f9ceb80130cf155ed7b8572dce82516c2268ff264b4baf3099b68507bc728d63cf796e3a69ac106e4894a0144870393f0b14ee9632015d72d020169351abccac1f46aa3109233ec4ff05d907a4227cf35a5368515df89c4bf7eed670fda3718f3ff21de6310f93e6480a8f315a8183c42faa2140de39ed7da666ce77587fff6502e0a7ebcd8f03ac96d811f1d06785a919ac5ef1d244468bf314a9278f71b49f26e2fea6d95d632b32e1dc7dd52650eb28f6e4cd8feec2ab4dfa9ed483bf9f7999eea39782c1447cb6ec5573a102eed1df20dad80e5062db28cf375ad59985dbdc50219c527fcdae6f503f7a1b6b34e8494e2f6dc3e153d667311041bc32798a9fda5ca25f50b7525e82cc716919f20cf6c483007e5e1be5799554c3c46a3dc34b556bbd7805dfdb7d7906a8809b250d1edd67ac480db66be31e3e6daa515de37c9cb79ab5e44f48df25e26bd52ef3c2022010a6612da13701be15e843f8c79872e218e8a9598937a3db00e71ae74c50ec92896e0cbf8512d52c42b45559a2958d5b91e47fb970149989478c7f071ffef85ebf8e3b28c4f1998d9775890cd3ded5fe1c28a00cc7fd827fa04aadb289379b19ae13e4bf3f52847009bb13233738a0515192dce98297fea8182859e5121021765f8cd2c33aadf1aadf0d205dfc58d71cf7e76131a442384fcdc1f27e00750ed3dd39b8275c7e89bd2b62c52a35a9dd86ff32b9f7b5e0af4a7f3d8b20dedbbcb95404edc831447e449abf12be82cff039f993c4ca5a672303188991991d0d94b25dc335e396dfb53731cba2754d6af1167033be50886fcda2121359713f2654cae1af72ecb6cdbe6da9a5859b36163fb63ba1083a6307968954011a46fd9c0c81cacff17f7d7e97e68d112067b3f8857b68712f4d773daec4cf537b70ebcb2e0b395a6fa7cb41055bd7deadc20b9697967d57633528e1157ab0fb9d68cf0494d7a5927a54b513f774cd1e74f0c8734fe00302771a644fa6f2c389250b4951f246e9864a33515e55e82e5f8c775266c7922a212cc42c988baa71d3f29de3fa90034ae3156f26fc6a208d37138db673c7470c949319bbb8ff84b3b276601187db71e7af3b04ebf73a7c6d9883900c76ec2179d9bb146eb5964ce734bdce117ffd0641656b0571f5fab499a989eeae52eb21e82b02abd8c7d32d71e8b4639161695835740e0a13efeb0c9abaeefe5d97df9b6064c3383913a79a68ddc4b736b856ab508ae4af00491077a5cd88135f9e61b75733b30371d6f64c7b469a97e1195ef62937207708a199b6e56479952e936f329f5ecda0c1b9724533930dc07ba29fd49ba69e9cbeafc0d885ae7a2ecf5f43123c72b8251cc8fe1772733226f583886cff4c192fa05fc7ea77ddafd1b01a0ee335af3840b1d3235fe6cb94d1d823ae220ba617341f80c11215692d24a4aeecbda355312338acfca4e8394ee78ac189013a95f8be6c03b6e43ea739b9662f703b9490aa4bf62e557d84e55b48d6381547e81697748c8c24af9d054ee1b8230303f5c7ed4ca140ee4a619511ef35c6c84965f1c19009bcf109b605fc02a46c4fb9eb7c25a51a1e33acde1bf87a38d846f5c06c0758c5bf25a8b8db8489cd346bc99f586efe9c1581c997c687529b7c19e7e6a2879cf97c7f26f6c75a7908e2fbe9b8451b043c53cf323a7bea16198122f12e5ed184b4161891b0a8bfd0ab3114921971e2633163fd7c35d8eacdede529f874853822b9bfd5a44a78e659133495c01e6fc1c243e42ffed6ba4d1024567faae2f295b3c99d1d49983260a4168a890dd08c0c0ee96152a28263b89033d900ecf0fe21821e6cb78f4152f3717bf7fd4de4160f4b40486bae31fd9cd39b7c94b697f73a7b8672013a4e0cb82ba0d1dd6ffea9ef83dd43a9f6d8083f3dcbce22854b1ed90b5fc06cdd99253257e67114bae98b43a5a4d542579b071a584e9d5c6b955c925627297f2df45f3171afbf0ebdbec36d76a85ac2300d61552d313603507e83aa1c12b6f1d11e5fa9b401495ecfa27eb19497a3a1056fd3eb1e2910d1931e4fb7000ffb2f8c2f3457d19b0e403099950e8579fd91c7c64d802f724c6f1562808ab7cdcfecdb1236e82b16e86d047f7ba876bc034e5e12cb3772396e22709a16f8f819ade37ccf471b8cabe2394bd3210339f0acce441f4043bbe447268cf694ba3f70f24bebe185c166907a60157e841ee1e80b98ed2ceb2bf2aef86c5bcb949fb88e76e49fe59d8ece5bc9ad71fe73211c4341556aa08733a416207d1e057ca21567c337b9ddc0b7138269963a05bf43436751376b52687a0098d8009cf4c6b7f1e67bc8a733a5fc1abf29a3f5a88f3b3a17216b5632cd586be82921efb24f86aaa043e7e03ed95989d3101b14c3d91d272072f091eba063f291f2a74090127da6cf6cb7ccbb014018ae3f87084e6414b6c0fd4dfafec5933eb52b8ff4eafa991fead65e127a06284797ceba25a4674152e5ebac1e5cdacd77ceec47542b59b6b89d9a7ede77e4ed94663f434ff1059c82c36bb629502a7691889d02512cf287dfe8bc23e3213240e3d5937979fa37aa6ff3f8ad1e9238bf211adcf4e58a43fd234c1d58733df5a9cce3824fffd464e1230fc8aab1d58c94b4e1feaa44a6cf04389417f9356c045c81fec2e8c9e9e216d73861cf150dcfacf66c82bfd4335f2a54c092d4104706228d4aca2b5786ad852790402e988fddb83dda80e4177800c2860a0472c822cba2dfef6382597b7fecb5eb7ba6a30367a3f15934aebdb871da5f6efe575cbf8f2d471b7dc744ac6d78c99f6b6e48746fcb892de0b1cbbf74039eb7feecb3d4f4e042b142e76058f4c9386a33f997d03f1ab18895cff889313aa1e412394a58de1c0f1e88e1bdb687a48f76cc20018e8870aeb2bfc1b98c4e255460b56c8eeaf8685ebe3e5f68c3055145229fc5a4848cb81c86d7a2f3b3df6660cb6d6996ce8dee00410bbb532b84c9525c47a499ff0d86d152af07cb265f1feba0c71a657ce828e4feb5a6f0cd1ce8d1df31461e1ffe77ba17f2c20ad610db6e73b7f6c59f0e5439861593784b249f7256b70ccab2eb09ab351356c6195ff06d596a5a9a7b1ff4d4f183311927446ca199acad97183e2a135f19194d4e517062fd038b932706af6a432dd0b9613f0d1a16c33f67213b4608c872b384dc31fe2fd81bc0177f7962227c9bac8f54b018d549bb955c1cd6c9847933a5c89e90dc8549de37912aa2b777d555a83474ea9fd04dec811f6c78f10a0594a62318b8e8be7f5bad815321d14d09812588f2b876c22541f6d894db7930147199109f4e6c56d3d7ce6daa8a68ae17028d9355d0f7a12a7599cf53a4f7bf9ed8020e29446ee03a4350df6cb85a523ae9b0246b01c01e5f465e1bd9fc4f92f7421bae2763bcc5b1a1bd9590e4d33e90d41e6233ca7a1429e1e3c5d292d2261166a745ebdf1856d91dc6673116cb6e06eb300f66e8c6ae586ed5b075248787a03f9d136537bfde6f9ad8e04952f59bfd6c878589ae0c6baee004dd2296671ddc180d6ccd9615d0004c753e234e34ca675f34bb0a81c1e4fed080a8f733665043977463f7358c5924c31ce77c9761987f63662b2c2220bfd23a445c59e3290c0dcf3ed48823c70f919df03e4c3e3e690951679f58bdda358cceaf7ff9fbc79a244034455983a25a6854b564cee11febf45693063573baa45199785f352014f8db3d2a535136b64c3cb1e7410faae386eabb3ca226055eee1e1af5ae5b35151ca71bba328d7cc1a15d2994c69a74d8dc225f74a40204f6861d955fd13b3cd29d59fbd5cd498f6c407b78618d7a62587da60d7d26d5ab44388f075a47ea1eb01b84c0a8f062fcced643866373d5f32b9a64bb5d24fe5de35968a1db3af444a003331a4d3f6556ea8aaf517084ac8b622824584ad719776b4aa2fdbd05be71e338402f28fdb874bde8dae7ce82291550b0399952ce7bdf199059b42d8c4d502473c3dd0ecd04969d33d0f43b5fc994e842d7c3b9e6db0130c117701cf9adda5522ca936198c0f99b2058c18a125b630a32b71d38060d98c0f075978b80d690b8d8333d50fdd241c7e6ee07c7e7eb04e2f50ae976710c64b7800148cfa9a519c75f7e269ba8fceb8b79654064a6c5cb7946dbbebd3668c1f9644807c8cfa3188f7c7dae404bfe4533de90209832b6c9b0a81577cce3b74dba973eaf2e8045632aa120f32ed8c11a2281b32466eef2358590132","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"ec1aa025b3a738c6bfeddd06ecb676cd"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
