<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"f25a233fa10715273b56c259f15cd83fce4277fbe9ea7173d84c18e23db58fcbddac67290ad28ca2b10e6b07a8e9a5e9b4ced376a51f9e49dca42b8e87ba24687afc8eb4948dbfc5e2d44ffeb44b8e9b6a62c837d8c05208186a16faed8791d7ebb8996f59c9d866fb4eb296f7311c49c167833242b0dd4e9ec7b5186c150ed1f2f9e3a55f6493a94fe8a4eba09be475caa505301125748ab652415b0fbefe18918e6437303916c4be11f7bf2e27fabcc9d20ddbc7ae6083475e2da935649df84c7d148143eccbf518cd1a1090070a98854dfb17365dd3e0e490663b48c5036fa14d1c92d151354f1e7a53827260845529193e836fbcc3f004ebe645723a974b8d81e9dbc0b2f5dc50da9143f4e34bab815bf82a770d238fa98a741f8f18304c398bf5144a43a9418762291761c32a46d82b411dea872c6dfe1c5261a91a0edde05bdb3dc476e1b493a6dcfe74fbc5be18a9da8266d731e62fde41a40b046d977c576b1c40f71b897bea3140b4ea7aed4bfbacfb4117a66583fdd7107493e78b2b5e69f5bc13ee80d57e5c9d502a0b8919a50cdea6614a7a5fcea2cf2a6195f5a2a9f61316b70082cb8b55b37ea68d533ea796b5d2e1c8bb9d13d5815c1ea4a711ab5735bae1a8edd663404c15c8f244005b38e4b08a44bf2eb47173b72ad395ab73b3dd168b847e1fa73c70ed208834a819cce4d168b30e3e7515cf5f2b14dc4c23773df52070d0aaee79ffcf35bed9007ef6e78bb46cd8a9e02200f4b9c0086e8d7cddefeacfd35c6aa9a7a329bed98fc9d05a0a9a50b70bfbd334321a3f3e0f69e029494ace8c34813f2416a990468eb02219ff25de743c36a24e8ebb79797e0d9cddcb8425d1af65a9cafd9e11c5e93d2cd75ccbd91938b67f1e84bd392b20566802b6ae0bc58e16d6ade0d4c8d9b69ce31f8da512111d1dd2bc74e402c2f080eb513f3451620891b87b26a13637ed71e170d9dc949d2c282d908b2a1d1abdcf2d51110f79bfa6b1135c733c6cc84e5a8b47937252499a88759dd03519d210e433ab7659a70b47b85fcd569fdf62f85fa3e9148a6483751a5ed8ab328443bc02faedb2e45aa019006d28a4bd0788d37fe35f6cfa3617e04c2a917472f70c07e171ab95f23381903a428a236ca75df4cd039e4ea67e63877a02d8ed03a5faaa8a000214731e57f8bce0e3c6e54b35f617a41112a5757a8ac1a0b74d6f12c0bb976a0760a435eea7cfca9155ad1a270e4b1363fd221766e2a710a333edea4240a40b4e99b5f9623085107e0013374fd7638d1cad9e71252402e941264cbebcfe7d2a0eefb36ec7d3c76f8f52a0f2d4f0bef70c370d6eca37a8f0a9a9eb2f2289de491baea4e8b87f91f1380fb975c1243036caba501050b49f57b8ccd39cb14dae5ea4191bc76f7861799dfd5ca556c2690259d140322767110caccea9e704a9356f0a30654be898766ef72d684602597e2f59abacb45f351fd88fc71389ff4f4a5fb35da3cc20ba0a5ccbc757a387b154660f7fe935d7826512d4f3ff545948507e5c507b4d51d560fafd5a32c14fc526ac7fd60f9a611c1d60fccbd9a00281efc85dc24d5ca47506f5d02fb4468c32d911ddc7e8ab83e3448a7409c9c8f9f5914446c5f897412936a1afd8806f005ec9a991be437507fa4a89afc94eefff9f360b5767f048e11f20a61ac798dba4abd3bb499876af94e108459a82ae37228a4e6d7812e78786bb70863c6db84ddfa59a98ff91b0447fbc15e7e12be2ac877fc0510296dbb4ff4944a4a4bd651e928bde9148a3b4f458f31ccc930d2b47ac29bebf54812c3983340e2bb55a0df1bfadb45a93dbd3af378f8a3fe4b12be3a3db2e79668fbcc77487cb043e2e88de72010ac2a630044f096fb23e25ff2322883664f0594627598aea3a96401ca60fdf1dbb290965d1ba216afe96d19c737b90dcd21038087f0be12941d61abf91f379c0e0e62042e0402f3838ba5994e7c67ff68c5f65eb2e5935bfe3b6d2f47ba33164354be65914bde62ec68e6fc202ac9f88a86d2bf8f4c19aaf3252672cd8c78a974a4cc8c17b598997ef86a745c384a0408d05b525b4dd715217ac9adbfc85319c1ceaba5a74bdfbf74d427d974ea4c4746d391bb00d168989e088f320bb25f2fb307908e5e8dcd978c323f03a7d12e39263778f5d684db7e137d1b16d1a33cd552fd812b48b46d27134187c879896a25c9d5efa82ff4bb78dedbcae80a32bc87fe5b96f35e5f5edbd4a382eaba39dcdd09a298229981a9aa33e7d32e5f0addf2261da72da7b4cfc18c58fd92015b35d760c72db724885884f33bde816e3fbbb29f68cc638652f055c2fd4495d0700624b8c943e4632a447985855719271833d1cfbb26ac64a1addf081be50f7b915e93680b832cdd27f8c96c80e5ce514af2fa68e70c79e0cdc20c05071cdb69c36ceefd8032d4ce68b6a3396f742417adbaca68f5d78d7809616119d24342afcd0f36bf9ae50e0777e686eb990c4351469a11387a71ddd8c8788ae47bc81cddf5f09dbb71e52d0dee5da3ff4e90248b03fbfe3da9de61b0ce4e52de1d3e416899206fc0328106e75f5ba437631aaa3354669750a83190f21bf8509a119b5507e6ce00d9fe9be78517a5d7f6829f125a4a00ce00e71367ac8fa9ee795934f664068c38ec493dbb03757c47f58b9cdff0deec16ee6c435ff945052d08225e49cc65272804d9857d967591c2b735820592ba47a18cc6e04f9e7a6451a6ad4a13574c2528166a28d05cf6968d679a3ca83d9f369911f526934580384496a0cd724b468eb0d3f2d2f98b6338c655b5ff68f510d8cdc91b640dc73b0f45ddd0158ed8df9564108c44237183d1170fdd113642c61b91731da31d3a27330bbb4355389ce1e72fdb5d130b21540acb77636873741ee4e7ee000a4c9367eda5aca323baf2df9988406e289a47c4f32bc7657f6c62bdceabb4e42da91fa724e8873352442d403de102fcfb5be3a94b11c2fae7f4e0d55e49145f93541d9d16150c0d83ad781494ce483be6812553786f55573e69e446448d419a2e63dc3f50f281097c227321790aac6936467bfaa82213bf2c5ebb7f1758c3fb44bdf0073376d35fd9fb5d6ce968080a7412fce810f2487bb04c6e435bd68883f30c44e56cdfb85a4431185e1d5a006c0fa56886fd30f73dbe5ce99a28752a893897865871e364d9738c4ff8befb3d3dcbc235e4b6c303ccde6ed3fbdfce54e39f4beeabb4cdc99e1957bcc5d35097fc6c80346988be6c1b121242fd7fa49deff606b2e71316cf0e0269ad15013585c79cda71587c4cecf99c4cb6f862ba487d736eada6b95f0ec5fe328dc3b1c6706726c6aa264604c3c2ebc50fa7904802a3b8f2bafe8dad921e621208d560fa8047129b0fa2ea2ec7ec6c45355fff932ea15eda565e4f3369e3c1dbb0d9d708a3fd5f3fb294f41781016f665a0394d13c5b188944462935f5832a816cb38b2f97bf2d851d3f1d85693ede70e79a049132b77f8db0a0db8fd957193062256e85538eae40ae530e9b786ae702fc51a110a492daa4d616fca8465713df5f464727e8770400d64820931dc7a7b92d202994c7f6e50506af2b3b4f0bef552e938e63586a02d3bcc991bc81fb7b79d0d31e5255266b477dddc6ff67a5332b0dcf7122a1026217243a1c06259bc96a9a185bc93c1ca1ac8a46f5fc33e611e810285e97a40e356642170b536e95a5fb2569f6cd2b5aa3f8949a0b7288174022398cd9122119ad88d3e5d988b1b69f9384738b149f453158631773c3ee117be811f12211a043e5d5823f8e2dfb2efa5297b330e28642188b1f4bf7e7ea1aa5e7d7a6e4f414567f3c5f86011c4a6e09958d881bf0172a50dc2173ce0296aed13822506ec0d470e472ef00dafec1e1787440b8a676103f5c77a3c74ac07df023d8ef64434506225fa53f0ae75eab01dd85ba8a01adab537bf2536da39c39d32d828f7af8c60cf8d69967f1bf90b9d2c80625c28a6dc4a636a820a64522c6fe637cfe2738154263703ed4312a71ca28d56916c2da08c8e9473ea6d3599767bea82c4c34d90d124e3c48fd905252abfb6536dcf1a06562c06e70baa35ec306b3e18425cdf34f86c48d0176d5d0d3e8631638479a8f6dd0f3152cc6d2a5ef465af2c1c27bcbe8659eaf037813e173e66079f4e02de7eb2b12223c3513131c7c00d42e0f609c634c8080087e2283ba718f1e988391243a7880c8e91310b899c4775f542aa471e2282bfaa96ac949842cef8ac87cdf77a35276f4954365e5a619b3cf3fd2ec10d5b6184e28c6690005eebe77b8b711dc86be2c9202cdcd765a49da785c3fc004b167ecb41c72aedda722e9da2cecf3f39727f7ca875c2524a2188bd2321d11d39eb354e8e8d686d72911bd0cf84d2188716fcdbb1a5645b50ab684ad9f3df1a087b395db0e2935a2c837cc17ea0aa0ba74101a9f53828e091e7d8baf87debe00502b5356be53eca0771c4ebd2ac302f9b33c995adde3f6dc837817a9c2ace8f3758803934a3682e3dcb730a9978a20c059673c245cd37f2cd7cf87820ea47f2573e1bb70f7c400de0776c7f3d172a5b52b8d6622dc067124a8fa9f45b4b426578cc505daeb898ac8356cf5687a4e39761ec0d6e0e39f301252040d2d0b138471567d4de394a901eb95b962a1f3cbbe24d495687b2371512633dfe577e7fb34bfa2d2bd24a33eea32a60d9a4d8cdc8c9dbfbf123c118bc859f77a818cb56dda69d6139ede9d79947b90d4908566e78bdb1b1c6419b4fddc7957dab2f2a9b59f965a6dc7ff165b62da7e5b58d04b0ac94e9bfc93085d0db89666eccfafe35223f7f6daa2fb8284c18ed235e4987836ce5f72ccef4d731464511f7da451895bc80b97528bddabba6b5b91dc419aac4182dcd618dc1a94efbd2430ba8d9825a9435ceaece96c1033e0d8311eda2c6d184bf8d8c795f27c559c86eb68418a93115c058001ccd7f157d37cbd7a0b7824b0c1875ddedb17012772206db5f3ebb1d9bbe7d60e8252774d99c6336cf8330959c644e7aff5e3c3e46e52ccee51059b286723708f21f318cc3562460b633a5842960bc4fb96a3881f4c1f45caa6ed4a5c49bd99eaa00d6ad53a03a9660f82d59d039582d698912996792abf40dff427cd8eff88d2cce0b60d01e0e1e00276f2c49388be6917869abacbc9663b635ffefb6624625b77e74fbb54e1af73a2555df5aa1501d333c05514d213cd74da51a68c063918f063db3731a7dffc8ffb7e56a7b17ebca153135192d88490e60e5ba31e4e9502c1c16cd02c6a6deb83ad66527fbfe3e57aa0ce9d9afa633e4374062c87fddda40e30b67f32f5e6cf9d91ef75802fbc8f96dc17a44641a4d3e4267176756160cc05c9e6d95cbe3af451708a370c65e7dc013cc9b26953d2b2822d17ecc4ec9d518255d98d348400bd344ff9c1f1045710b14421f1430f1baed8cdbaccf8288b216769066f4bf8f78e1c1c6f9de9d3101610433d05cb3bb321b0debf6c2358fc385c44a7bc88c5b65e945b025a6344b6c900f379d7fdd34b14c5f0a80f2a6ae782b6bd09b8d89266304a9b801d48afb17146a6170b6f0b86858a32ced0c2b2fc7fc3a1416737214dea0e03ae09a5ae8f7f9749a91bc0d0464b5985756ebbe95b610d0c7689c383faf0d0323f4b2162806a7e4e960c7b1f6375237b2454533c142885af913971a3e6e29fb6c13ed5404a8ce772e409463c91be45fb1a32f99fe5520ac3c547bf02c30c46e98be75bf48a12effc8d84e466622a71ab9c00fa6ab7c0412bd81c5ca70b1ed71dbdcab4f979e450dca923abaa6d4e494c62730fee43d139d09830938b1c505b2065c8e6babc17c6deafae28f53d1283f48dfad9d01e33a59bcc8141a37f362e4fb1255e5d06b29a73b89fa712848a91754b4ed2b9ae824da78ef61ed34c6d31d0ec763a1cf236442430157a315bf2c2f4d7032155cdce33ec9bf7e81b7fe73c7d129989294162d89d23f340e07e1a1abd449a50e7e119ec632f3db0cc1ffafefc0b6abb92fc7ce58f1c8090b463695e9ade2cf1c0bd97ccbddf1b0bfd54656375db2d18961f567fabe5c786c721cbb0b5a7f7ba3c29f22545efdec8747cd1458061bf63d4cde6eb29f8f7f8130fc281b15bdc6757771fe80a96d5494f49cef6e60cf7909009920432efc35eb6cd3c995e409185881cf8d13ec150b5be0938f685738543297063fbe833cf321c77ece6a9a5400e8476ca956c8ff4a083c2c511e4903699272f85637c75e53a6b24475ec5e692e95bdc30f9a7e1be75bbf89a78f1ffc03c9742aa9a24b7b582a214c44205597ac19cc101924e40352ec3dcdd95c015bbcc7ac5e3502e1ae617cd38a1fbe558de4d392eba55b846e878ffeb2314d1ba2a5f6c275dc0d553428ee81439ac8046487fb4de5c3327f8f9b6bf423f64609629fabcec1d18e3783be531d6129d6d5a8bd07623bf31c645801d4e7b69942c214a3129a2d8e11d24fab51cfd7651dafe5792e71bc4de22ead7064d133d92daa258e4dc00aa69810648b32321387a8133f1bbdce9154326f82c1d4d1a719fa77348a02531998fb98b8f84ad52996aa16a0205ba89f42f79707c25f274c6158d1c016f44703670f73f1c2dfed48df813f86f3fa5ec63d72c3e6058cabe2148faab0869d595e741f2c5fccd55776679acc71630f1aed1d8ebb236fd2a250d2a6197aeffbd5c527c348476aff1cf05812dbcd1ce2f4de76be948876230ccdff6b6f0e119e7307c92e6127273ceb944800b4dd9998ec5b3d1eb78d8477d6bf1b064b253addc772488dc747bcaa57ad4c1dc8fb7d15abfc73e17a4049f0f192e425fa306e78dbdd5700ff3b44c9c9e51d4aeb795db1662623ecd739089babfbbf599365ff3ed82c9c3ec5a55a6a55fe215d2ddeff6ea2e4245178eb11a8e3bc50adbf4991d6c00edaa81e11cec4bed6429d3e204ec930e23afb098f4334648d1edbb520ef7b10f749d048877bd29c01bd0f5397e247c07959906363158c7ca8f8a2126ebf821f2b362623abfbb32247b8c68b2daf10abb5ea4d07d0a56a5d68a7a118ca5163dcfdcfd0bacf74eeabf1201007cf2becfbee1f760fb3239695fd4be62ca6afbf4b3e6981118ed58b4290ed5399353c045ed856c0996928bb3fe929927d51918f157925fa74cc6e7a7afe164068de361d9467b21e71a22bb807b84b0ec7f02ec09063239658e4afb7162c300085d80a803a9f953dda7f95f7641db054220ca49bb7dd97a6a9efaa8310fd34f8bc6d495ac14b4e2b79d29d9b5e3e3440670df9b4b7a1725f3fc92bfb03bec5ae4f822a6420f8ad4186437e2364fbcb193069e2c93c965dc2ba55ef18d85edcbee44d1567e9634f4f118f6c4de83dc9fe8276eecdfaf8698038375758fd873d10f35b7309380b9a6d69b01afc0d3d5ca4f03e70f5a8f8e91942aebbe750c4d96830d07b08e63f77adb333faab8031a91309a4d98e7056dce32d024022cbc9630ed2925f5fe77e381981881cc9a4e7470e57b03490d735ff9009d832994a2fd52a0ac4139484634f3963247e4f9c75c8ec8dbaa846db42ddf7affdf486a721e8db5bd0850cceb10b63c97ed02fcf2cdab88a6756c815d732aa47bdca4ed8299f94ae7e4291f4e5b33cc54f5fb08990f183f7199187275d1c94dbd4dadef000e40dba0be586f8784ce45952bbb32ca3baaeebc84cb92e2db34c6eeb68d00df75e059022906222b797e2f8d6537d3bacb5ec88db2a651c13514594983de2043b83916884630bea1ef213a60c542ac58db98a0fda9bd82d81100a8c09413020b1697225e34443795d4e0b426bc10011e897bfb2b1861bac5ee134e08040fb4c6af27bea19c55e7c0c7196b5c55d59d9bf7e7aea5d30c6d262ee8c49a4da31c5f845f583851e3832ee0f442d81b2cf46dc029090a17df9af655393d9d5e782c368b5baf0e82e7b5deee4d14cbb912948c68f48a58e65a340fbfba9ddd6e6c50be6dd0ed7a9f5f881ac24768bc0b8605b93e1cbafe0bd70aca49d1f7c10338e2662528fb3802f9e5ea0794a493073c25465a67d9e5ae0170c986b252db01f2c39655114a0748d4fbe14703373064ebffed45c6ba0ad3a1b0ac758c4290fc6ed042bbb427441f1fe1c42b5f2a86bdae1c57b2925f79f74b95af965bf0ac95b647809077632876c0f2e47fe5e488f39e28614dc0ed1e722ada8b669e16ac7d1a285557a10efc36205f60e7b0997eaf7206979467297d53dad9716de9b18a7271eda094fa47bda0ea2488585d8925b6dbb399aa497fdbac1f77e1e66769f8f8bc26e7b388a1ac112b4da397702db2a4d540997b5f12c9dd71f9929ded47db5b0fcdf30551b31426130ecfc15e78cffb9b67ba4b22cc299902c93fe368463cc04a59aa34416d72f2473788974327dfcaec20e859b8c425b8ea268a58bd95b5a569fd834b445aeef13a96d0e0aaefc224972251dc0bf7f49f871cde720fd6acd2e268f3a82506d72257335248547991309b194603dac0f7aedac104c9fe6a78055eb7a7c65dc1469b85a0352a52be65e1a9ce067a539f4e064bf9a445a3fb81b57ee2c2ec3a6487f9317b7b526ad8dbaa58ca400f650529d1a6083064c361991e0c89365c6c170b08d8059641200f5429beac7d3c2014405b17d0ce1e8df3c55d53b1863ae819883eec6fc2e08ba0bc0d3b5fb018a6e010d9fd9f4da0aff9883db114116da13d46fc1269d41444848e7a061f7cbf4e6dc60a429c083a089c6792d6bedf297e4a4ad67a91aac9325dfa97f50e2412cc82f9eee642bfa9dbcf842b533b9c300c394a0221bea680f539b3b15d5e6ad47696be29c3767e1d5f2e8ec193d8815107a1c1633a411f40635ed30dcce4a721c59d74f9e68a69f4510bc32ed964137a1157668bda116560884c04f0b358d7cffb7ede3fbb5741b436fa7c55488085077ad0f3b82ea25f4b9e3c27ba2270c5786b648f0d37f1cf70dd1954cf550a6a48a1f1fb58778c6bbf5d1c2d21c67ea845a612ac940b0db4825228973e2485b8c63538c9fbcd94311f8ee231a07581845a20b7b53c81df1fa0f0e46f9e9a030875265547eed92621523df17cb57dfc1ebab01ce84531bfeabab8e92ec6975f247f89f3bb2b006294740559d1912b6510d19a3cbab5046db20b38b30996f5baaa47ad509f91f5b6e8c7f858ac7aaeb09fcd69c57cb45f35e2888c05da3d4650a97fccb78811239703249c4482572aaa7cbe14c2d7c1811911167a870566aee32c3e3abc2ab64cd4c7a1f0fe23c1f1d88627274879bf5a6344e72bfd537396ea7e6cd189236a90c9ac3248351374b26884bcedc2295f28436b14c20d5f3d9bef8b35ec2c37991f5cb87bad4f2bb6d69015407c96bbba4f9ac1bac18f6985469828954f9865e2543ac4110fbc973ddc27a3453c6e441ef097b11237488cea7c418ef813cd81cdd69112d374f41a575aa18b235e294689a2dd33a9613a043e8ac438b8bf2dc809c21cc6d82fb2dbf52341abc71bb4bc85f1a86c74c4025eb22a4be8cbf04ca6f0aa76ca148a079d981a2d770850a2bad0bff99f49c98bd6195287fcb81b4aced3d5f8a19dd723b63b077fba90e3952b6e4cd4afc0de1566df3df68d6c58a43793f1159cf0f466c82cf933a48d3c1dd557168ca302c6205e33f89593a354a23af3cdc4cf3eab1b6a44cf74c9a5f1eab0fc4d52e5bd8379fd0287fe1a2c4245ee03de7038f86ac87271d34ef78c60d04ad601cee270438de9b2219761d4808be63c805b418110149560c49de71032642c60f3f7710ef756326771df9cefa52ef6c408e30b323df93ad0bb4792225e8f29d497ce7b7bada4b1d68cbf2073548a3a7eca92b136c80e0cdca3eaeeb6b429f2963c61fafae9dd46df549ac18c3aaec68556441920ded3e529af7cd80937db3fa1a76093f7dc54f65cb67e2b46849bbce6548a9aee80049972d8d9dc25c1493c30b84328958af59089e692c78a6d2d1345bb6156aa85997dbece659820719d391eb825091aca028b7be82aa7a299182bd732b756b85227095ef40c6e71893c3a0ea6892a2f8e8d73c6744aac75df70987f614ff621cd661e065e58f8db70eccee0acb1ac2408fc52cf2c2e0eb66a545f05f86c2c36de25a081b85eeedaaa70aec81dbcd3bd8c472fcbb919d718fdb4654e703f07821d1f8ad300f20d7b7d851e1b5691ed3cda335b4d7d7cee6e978352723c5b00700a94816d77cc52e317f797c85640e607c72fe90f92a9c4af48453bc3e01c80aebcf8da9574bf2e70dc03d5b7b1f23c64c3d96cf4b71cab3bb60bf52c5a61e336521f719bbed559fff4172946737e1d5b428afe21aec7fa60b8b89ac6f8b96960071f15e77890b9c790e867cd670d72886c3ce0fb032e6aa57151429f243243902363d00c76011f13b0b8f95d21f9714a042a914a9107969acdc2c8273994feb7cd5f63657ed436c84228c0420160cda97de44b1ebbff770d3a6900347ddc3ff734115cc5c3e2dfc0369bdbb0c3a3ee0eb7d36040e7d09a2b5f575166b096e4803bcb626cf751eb0916a1122a9c7da14f9892f64ec5c5d6a61ae978650ee3040a14734f9fd743b2be2ad0469a9ddee528121d6fda2eee83ac40b6643cf93ed26f2dc9177044adfd73c898a210cfbc3d74651842218bdc96ed1a683d56c716085c320e9a0c8f63cc0e977ea35e11eb74a5113d015af42851db11c677417f47cfc9582860728fa8d3309eb9ee1c14a5fd42d0dfa12b6d0cbf4fdb352b6e9a549689f66b802e09dabd170163e2182e0f8d6db3c49dd51a03495593571dc4bfbab833279f2382f4eab36738da4321868f7f42069a38fa80c84a7e58e16cf6d26f8007fcff815f6b1b6d0ecc107298647bc1bbc14edd5c24134619edef65883d4b11d9c630aa67ac07f0ecc2b9ad6c81161d0c29bc9ca87cd1793c0b06f70cb626d4a8da50e39bca37e192a34e2bc3584eade28a696f34435a9687dbaba96fe90f9dce5e5377d6c15468c39ca7a03dcb2382e3fd7e72d819a2160cfde09751ce526f27546e597876d584d52fa30a9d012192a1f4175804e225eae3248b3d7266b8ba986481856548b53f30acb7fb262d395094ba3b63fbb686bf81a3754b2e1fee98bbde4d497c9f728324978830a08dbf3f83c0aaad0f916b0891bd773486df9a421631286dd4f0f9eb56ed469a4002b11db65245b5dacf2ee32633a68beaf737d45eb2f4bc0181a97a01bc2eb19dc30768625f5c8779fbd8294feca8cefb6ee0a48fbe4425367ce5424e72acc837e37b1a8f6831aaab211bfe0ddbe3c57600324c62333ee9b8b733bfdf39e97740bab6f087c0bbacfaf0df02ea5aae1b7108b75234e9788a6d5acd36d53b392a8332eb67b1eba446b09711b2d4acc016f16919ddd834bec8c983f29b4f87b6ea4b81d84e6e0ccc99aa73ff0396cf684c744bc0dafcb093d49a727499bfa889b9f470db8a1625094f1f83aa743a77f10c5b84af221cba395616b58e01f1e4246e92dc5cccbe93e1b3dd178d7367ef15529a471586532b19b92f98da9b8b5bc4c98d8bb3db1b6cf13bd3a28eac874e753e8c6a1861d87454f2d957f4c81ef9d0910c39cd7d2e92d241b02fe16eee94a547ac29d4ae2d411d11862aa711c6b802c4bceb31942fdaa7112a3cf70a246f4c76b60a38e2799f0bb8155917d750b45e283ce8689a310737ae036873bcf9ef0630b401537a7c30e51b0376da39e77e2b953b68ebe39d426e8ab52c489d3031726506c9d61869033e7e692a61478137f60a9c5a9c4523c77ceb6fecc4d388e77b809da24434406a1fa2472db880f3a814ef1659afa46ac0fd9960555d9cd086c8f8f59b154af4dc272216282d04f0cac6d78bd081b1df93487947e474c521961c16c62766903cdd097fdc45f3bf7c95c51b147ba0df0ee5e70b720e340857227e538f06d9058f8738693fa2b85e437293b0c6f0bfb6669449d5a293476f114ad5ff91b89404dab325bc735bf14f567c8bef1d306e26c603d83625f9a6f93245ea4e4b0d5175bb57690b4800bd85ace8aba2fce389bc1f63b5888d678b301278f09bd30ce19588fc293451b2cd8a69711db63b5f51164de51d7c39fe70623caf52f713e42579f4220e6eff3d514b04b2a75b70b5640bbc7203c960bd72ae81dd91758bd5d00926e5dd1c236c1c5dbe9fac476b5f16a9ee26f0353143413a0c1aa48afca67e008679d552dc1e935cdac9300416cf0ffbbac47cfa3901c3637dfa286d0d8f89c4faf7f70d7ebad470bdffa0bd973e18c26c3f755fc0148e3ad874a7126df3d88ed97096682d6bfa613425b6019cfdbf5dcd1ff623552b17d40356f4ab43e60b08a7022948cd946faea009806b5152a691f5568346ac311f9b09f2efb665dd1aac986397ff8dde018e13f2a990975fe1050f00ec69a7103f55020077b93914144e45af1a015d7c251800237c9f5aab70cebc6b110ef1f6f7ac0845cc9edde42ce1762643d85f387cab37e318d69b31e2c75b3b4fcec229bd6b7e59def061cf7146940a71742fbbc0d79012762636d3fbd4e69abf26c6b057fbdd2bfd9bdd6408add200872d31647aa42d43e49619f511cc3392c1ec412ef76c5b393ac6c40085bfd95a440e1925a4c5466f4d1c72a0336c25c6df6d89164485d8c0be74a161f07ebf545059df73fac5ce4d1d231f69cc85c5823ea8ef22bc530ba8bfc91359da56c0a468413a47041f2517dcea76cbb3714f98a4877700e359740661d0aea4db6e8397d38380149fe435c0c436beeca2ce6f7d1e7e7ec747a7fbca8e7c7be703dac6055fc767e0ce39db018798bb5c6cefc936c39c9af42573b4b634cc8853d2c25c8eb4ea7d374670d53d869535ac6cbc5421d9704f0e880c04813fd8b8209ae4c9b3dfb86573cf890ba00f5fa49e64a58b2a1436884ce611942cdacb8a524aaa908e33f312fc9fd9f39e8a7f931945eaac6bf6fffe92aea2670892436920e983878803d61098b9682e35794d4b344374d0ba27a6a088f5c587ced6f16e9a50ef0e58b3adc8c7c58077558b1a727c03636901bf22a70a50a5664fcc89034a8af387edea248660f7fcbecc5588d661adbc4bb829a41763e671b0d9637e8af6de965ec5133e31799ada81518084692a3e0768286126b86ef27fea2c1ec0ce5e34b8eb61607285ecbb1d00c6bc2cd68ee5544c0c8c0abbdaa7f241ef9255e79642d08a5607b56d9bc821993d8f51d2bc5676874b033720b9180978225d9bf038f42d5dfb90c24775a62f47c5c3745bef5b3d9fa0f281d9305258c42a43603b38fcc4e1f24e0bab63290a3a3a2b06bb823f4bc953b26743337547011d2602e6ab068d0804ad3257803bfb72beaabf3ce6629fe8b1343d37e934a97853d005eac4ea1e5db73035541a1128023698f5700ee6003536eb79e93f32539ba003e549722fbb5dbc2144cc321b5c4e0e79be1b0f7064cae57d307eb40203b911d5f4c40252a2849861011c5f6596bb6f5dea383a1d62ab2bf1408d0efd0ed0d65dcee0917a18ae89249ade61d8aaa11e3132c5f6d1717c4dbf067da1b52347a887ec78a434a6fa2c3f3508ce30b13ef891061eb24910ecb1c99e576fa191690089c1e7f349ad7bea342086e20999bc00cae6a9b310d006b32137e39e55bd75797715fd391a0a0b4f0c0dc9b5626b20921596c385d9b46457ef77f77796421ade71d5f9edafd15edf9c2e94264fccf20793d0d574338f2e1810fe22e25a543f085c09b78a18c9591e2da4c520085b060ffaa6c057c75aa9f7860fb99a254f81e9a1b5f7cddb11ea2e674a7d8f9034307de48a7059a2d2baf9aa10c438de2e2f41068ad72871d6d70e499be5ad8bd29533c226ded58d5e5cd684c6828598300de4ff1c2e88d817fcc0e45d2be222aa6a4761af5e4072947d3e8d0683092896f15ba54d683fd47c7528b96a4a34dc79b4f5cbae0b71f635009649ae627fdeea26a5ca023116f3faf20dae8828901660def8c5e3a4956b4bb7a8e738c23ea9afeb8f48088177248cea1e93537fb0dbc1931c13277fa2508e023cfdf5e2b0d4a9d4c00f7a9d8a7fcf3593697d158d1d8ebb0c5b43250b53dcac367fd939fcece25818250b7ad7d726ef8834cc6a37e5ed3ba4d323c9ef444a6adf6c405c5de7a9254f398fb1467e605bc4dd541f8a1e9d291d670541b30b2f390c0869c05f239053f06fa54d14c08c4ecb3a89f7e0d0f2c2297dc42dece7ffe370f8689d28f5905aef151e9e6894f6a99113d8603a1f0b252d75ade1aeebf99d1945e6ae4ea5bf5c70762a8c99776cd0fd534b1276250504eb1afe79aeedaf511d451f8558c3120931751fdf0c89becf1ebf66b175f58796327c24a685b61b93a5423301172365f684715b08c206ccc5e8c71c283f3d14af9b26c6ff5c620b96d3721f509a3eebcc436bc938284669232c4d7deb4a29813e25e4777331947579e71e834b7dcc1e40b202bd7b28dd1799ceb916289a8d4a9f79cbe197321345cb11315613b9ac4391a4e6fc9dfe91ab1119c1bd2dce1e6c0ecc62f7d50df86bf068c407396fd632f58b5e0b87390966f9b1498cd24fa713a42308240fb575014ecd92123c76f6f15a58ad426daac46d1f06c3c8d237f6c500dee329cf82a47742a7f5cd5a2befbc0e49d98b406c1cc8e9102d1bc9d04bb5cdf51cfe4a354bb0fb4bc4f6d7ec2c55aa569fc09960ffd5c60e7bd6d1d511c22e8cacfa953b5fbd5e58c4c4a60f16b87647af228c10c5ede3ffff7ee087191a61897747c99c9625ca3a5296071bce2ff91fe5aad5ef78477f9481ae77d39bf26041d5438a7cf98f7903a542114bc859aa3c62bdc5974b1d1497e8b6f9b6e71448dbd10a250ed094f2401997e2512e435af6fd30a348a8d93820c353311aab14a6afcb49fb1a92c02364c37a0ff6de6202ec6b566eb1dcf49391c02a7a3cd651df1b722bd621c9b608480925d2d428f12b7177c2e2a01898a81b45ed604efba5fc57928adc7815b5eb4f3d264b875933b3e6ddcdf99382e8d3e7c1ca7cfcc00225eafbb096e090cec23345370956f822c014479ae04fa309e4f2e6fa0c0492368d9715ab8bb26446985e1f2d75862aa528555868af0cf4577e136e0bcf158db5320aaa8955c28078a14565c9c3f5fae71143313c01ab1bbc77a8032480ca8ae911fc6cf03bb633f1e2cf2f0663075a1ce34f0efe9d5820df16e63c0351dc925bba05beff22e81a3092024b986cf12ced86509384fee64d481d5416038bc2ee9eaac40cf44d7ebb719a834dec62dde193b38aefc1a1cd13fbc714b5a4fe818b92bba8683bcc72296a2a54a5943a135db0230731a0a4edc0374679c24a8110ff4e924f7223a5e3eff2e42ed202057a1f84664661ab21897c2beafb26bb1a588b3b0ab467758b33f093f955cd7e7ca2b35660cf700b5741064ecd2a33771340168ed8c33c40706f724f24f2bc12971cdfc012d91900de7a7b25555258cd2a185f9fd9bd0a9d1d04714e5d4e30a35ab925d5096029bcc4d89ce187ddb29636c56f3c86fae05e491401fa68cdec8e850b116bf3cc8fe5d3a713ea47a7772a03d9914f6e8bb37478c701de238b3e5e319a07197b434ff13142d0ac71eefae7c525ef9be1ee8c68a2308955760f6ce5cd03a674c6b68d79ebeb410faf93af8c44af3403c5788456a4fd56d3c946e36bbb0adb4cab46ef2a88d787d1ba82406c397634371450fda46eef1fc4db8f2d21a511afba4951a24f6617ec9483556f7a0a1564cf4eaa241b7d813afbab88314efa2a7b8a788ac2c32cc698ea48cd62a021b12e2307dde98159fde8365b9774fd975dd2f78bd5df3fcab73318da67f97790fa4ba95552633dd751cad4a4aa07b819bfc8ea5d5384029f985e160dffb8c1741cd39b034f40fc4f8c0d1c6517c9506336d56eee4bfb0329a684299e12d95b3848eb31be9cdf9ee0c9c5a09b46ce41a480afeca6d411affcc689c4e85ffc48d129867c11da0e529aadc3d4f12f8ede5b7edc4a60d8d0e518d12db0b9cdbb93c262dc99d738f1a49908fd9d3287a80b665a6301f16dfe10d6dc41a29f21948b1962aaad2e3d21346489f861447815f77eec0b6f7d86e047c93c8eb4edc55f7bf4b39b4fb0f75e4f98743aabc8dac1229499bbafde631941460972f92e74b96a7383d03f828e2c0b03b773e95693dfff239c913745e57d57d15534895b5a6991b545a68dd2af08c60194a247e0ed52950cc4ea5bdb48f148be657b8e159d98c3062acfdcbe2d4625388480dc94e291da8ed70d45e7c94a2b301627d8a060add4b1171717f094683665c5f0494d0fba93dad7079c8072620dcdaab31c0f91ab42f1025aa2546053766ba82b58c44e891562c636d45f72a698634ced0b0c75cb36a25a98d61df3e055e34ac0f5776c699d114b5c27511cfad044c71178df2bc0a5a7aae5af729c4d600675837cb55836c39d00dc802b4d0372932a01da82db152dc5ac9d8ce1a7a8d1347734526f876d3554d85ff3985092f3cf1892c501d6ab0fb52950a5778e79908bbf22b2f565b340033c2e8a47e1a59c242285bafccf5f5b0578032e7b146cd0c91e7e9b72e7657c9ebfb921696a0843ffd2f21c4f7cb02497b5f675cc5770f6ea9316d8282d7d033c31d01f38ccb64f18790a5f071d7b6f9e7c81302390639dacd138171e9dea8a920630c784de903477819534264099a2df07b556eae3e4306e83c84398641aa111b18f4735a905a1e4a67f992a233bf59cac9f3fba3fe19cb5e841e83d7a078d4b9696b534b54215fef65cf1bc463fe9962c2864ebdd1da0ba7028a06f9f8b278b71111d07f696d56f1a1119d6b95c090523d1a31e336bc080e89520bdabf702bb1deb16f0858a52958e8f5d51f3a72c9915558bce266bed5b895e973df00198321ba2f073ff8ed24a34058b2e11238236d436107d169424a976902d3fa5921c34f72e7efd28a65bb3b7461a73afbfa54cca4c71f9c8bf4cce1a546233cb00ffb95734fc0b58394825d5c39279e4a402dff04e9afcc6e3ae0ebae04d7c0a11f2642efe32572ae6b27172d15be8dbad69f624571dc89c8d787ee84685d2a37ac6d10ff9521ee282cd1b9afa4c74efffa30dc6f63edcc1643b7cb8d61e72780c8aaccb81b9d8ce147b36a530190e127d0acee9547caeec877399781d06db09089d0bd9eeb16dcd2d335c49fa2d1bb43a84c32efb433930626ebb49fd0a10270ced0897d578616a7eeca19bb8cb65be20f9161a715db221af9e8aa17a1e070c7e2932b95903da927548eec99eab802a6102290e181e20f0f6d468a25c7dba4713622500acab99b37650bf89244d7e6ad036ee603a0c12feba71feca8b15e4fa512f4f6d3f70524e2a546af3b27b802c82dec7f0b1352fc690e5cccaa749e6600679ba9e5fb37b3cb10dbd5569561f16a3bd6c5c671ff12f798a5362663ddbf9e41e608d34dd01f478ea97fb68850627be6a716a93c1549950ec5eed926a9840b5125f3a2b84848910be8b7a268d57006fd5e4e9d8441e25b787ec90074c0462ab43d9d40edb94e4addbbb5503c90719ddc495e161e6d80bcc0ec0b3ae7e91e88c36d1ce62936f6483e0cc5ce16daea2da7f575e28c058d9f046ded188f6de2d564deb2229eef90cd43bac3f400cf88a3ce4a74e8ca0dd2c33b807ac3b91e0b0c828f65cf744e8bd78444314f29d017c9ce47996d0ff3a03d1c52551a6ab6e84ba53b6352520a66231fde4ea733e258b19cae883b874a90919bcf6247e18de9f5f48aec2902113b4b622acc50120e066621e8d5d9b6e86c5118cb1a17f69af3bbc7dd5dccb603b88c11b78448b4f022bd1140c4f1027a7d1275f0a38aae9f16a0d5ffb720021810d797d53da31624c2d0bbc8120ef3831a00875e4f134712d509e8576f910853390bb380f4f56d6dd3b56ce5d5036c238f756e3057395b162ddf40b52e10f9cf06933368ad2c16f0afa8ad82365beee5e77a988ce4d9612909b7231b613f08a51a721bc394b106d3bfcb87f68b6a475b62a569da9104aaa045535ee935e748dd550f65d5add5a889630de559f27f3bdd2aaffb919530dec670ec5c738d5bbb82e7fbde2a8e81ec3ee4623f5d5a3db2e6b69948aacbbf7000f31b734f002a669092d111c4efccb26680874b3922d6ccafea0bc2f85d46d6e901da334af1af4437ac927f7092e89f55be561eb285d9aab3d77664408e780eb24cba15a1b96ddf1322e26e34c76270b076eb140ef07335d2c9f51ff552dbdb1a917cb4a24818310ecc1f30eeebfd4197a2572fd15615bf5df94f7b12485426e70cc1f14ed65e8d655155f262e76b5e45f96380f89b287586e864bc9662d917262e81aee02a2063a55f0d8f14727b47da4b29116f1ef7a448ad00f602bc890c84d9c8744c94220ed56b67ab59d8cf609e413ab7538b614bc3120371b3cca3242cf55cee886547653d6e2c5e179bb1722ebbac28b1a16339ad9af14f511826175277c27894210519951e4cfba1147edd4f548a8ea1d1687b07221cb466773e01f4ea8ecd3af74e815156d976c3a841d5dc19cb64edf4dec3a4d9d8f764f0c0937eb8a0bf84e6bfc539411b9c791f15022af3417d00dfb8bb3adc41c84750c266b72bc081444cacb5f8b30905600f965cad85ff50c3db41491d36c180e4ca8b5858e2d14614b6877db7dc3de8365da42384","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"7c90dfa9cf04dd4219dca6a944c82e25"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
