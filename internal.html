<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"9a2207e96b8cea5a823d15eec9615e99f97b84f1f13c27d827a0f599c848dd40bce5d2981316d967bb0f083fa180569673fd7c7c0325d362ae2129c4bf7455e918cac57a5669ea25d352a3731705015aa823cc95c814a95f7587a68a266c0ffb2a15391c8e07cc5866d3aba2bbeab0995ba47724a450900b269b0880d38ab820000aa8affa28c048744f57e6e0aa4288bef291e71479254ce9ce991a53969685c0ea526f56d362fa33db17496959ec0fb99be8f697658294bfa004fceb8cc4c18e674388f3ea74bb05097471d4c483fa307bbd03ee57940bfe18a574417ee40fd8514ec1e66c63a5617a9fe382ff092f43417a35060b22c7faf70ba4aeeb21efbb290f04413fa57922009c3c3d257826b047b0bb18a91affbe9186957adaa257d88da171425740701e650eb83b0d57187485e6476c4e38fa6942f71796f319252ae2320609f67b96a24da415e1b5faddee240118765ec3eae8a3acf40a3f1c66b32c520b47ebb00b33d3fe011ae711cc18ee05dcc83c54df38c6e029ef5d24c6c5f5144696792c6cb1d29f3e1eebd52fc0e9c75306c92aa92c8961ddc8893fc57a3d725936b24448b027eb3da46b53bcee037d44b444f550c93bb240281d4836c5835fea9cc2306ceb20774745344cd2ae3f0b96e6a9b59749a437b535b5db243729281278e83686b871dc59cf589293e87f6c1b6ed0371e8f44c009bacfbf92745a03627d1db9bdb679dd963043d13318adee6a0997574b264aba056f3f19efa604275b3dbbd3de1a4eb30df3832830f73ecaa04be40396c6e561d30636a823c0d990670f9644c16d339d3d012575f9251659bd8700463bcc78884482ae8e6e901e9747a5358b59b635e93202f73d7b8021975b0342a16c2b442539967352bff3a83b3eac18e9a8e5ad9831e4812322968a911435bf57a44d1861f919759af706a74a2f47633d3a75e7f75f8f1f61396385cd825c807c06ec1f596ab95de592c5d650f11fe7a5889e45ead608b9200d0d9f5f2bf433b410ada1dbac4b5546965570de4da90be622456d85d0eb916d8cc07d029abdf8487e2565049f143d70a6f83dac48f71c6c0fa9c8e8c511fc8a977ea76e20d526f1c4ab0287d17e927c9b3ffac69e8692991590e48001aaff68d357e7b4741109bff1b449e7a05b75d4bcc8eeca1c58f92040228eb15530346e89abdc1b13df0c40ad84464ca5f810c4f45b28fd151f76462eedcf34c7ddec91afa0de76d3d2a3c324589bf0d40e31f3c392af70adcdb093f4d6fc7cab1c9e493148abaf3493ede14169a40857188a1688088f15f123ae8bcfd7f8279f5befb5e6f9b5040c6a3bc2ce098fc7c9df356ee16b937fb70cc20652aa62d56f35f4c6de698a5675ea941c3b247cbe566a66dc830ed941fd6b0433bb7194ed80c69170f815016c9a5cd6ac425e81e19a04f7dd53f63730cc4eff94df0a4cd0e15bec93f623f627e5b104d996d3d17f879e4b8a36077e84a04325e9f4788072ebabed04c97ba6e17b8adc92953093daf68657a640addb7c05ac760dc8cb5baeec02a86e57e425b7923d810269f1c2332bb7d9ab4fdc680d9f4efbee8ee2818ff1101f78042218283eda936a8abd08df9643b9cfbb5667910890a2ee358b348f0ae34ef77cb9e96b3d4f2b518251053ae77df17f0e684a97360073c48cbd92f454e0fb41e88113751f3fd7a1121137a2acb970ac76c91dae671e53165dc781949bb0965173d39e9776c4347d9e5e6dd3bc49153567dbc54c123405332818d36d26a806d4a56c963724087e6ab9740b84595c8dd2358eddda6de6901a1a2e33bea5e8578754eb614d7d5dd436800235c3ecefae3047cc98ba79e297402cc700f7855092b4d9375648f7f7e99d3529dd901a6350b5ad93bba905e93abce396101f291eb9c3962408d2ca24429a8fe96f3b0e39db4416ec66ffcb42cda8bc8b1d07e2e452fb62ae40cd5f8b34729327aa4a5f77e308a8c2cb96b563a4ab9f49f9a3cc19eb348ae648659e5d2f6bad221ef3e8e63920cae6ea679436202dca827fb0a17c00a2dff3c41e09d69bf1a3551d8e7bd79f8c3fe35ee84b5bbe1e478f54a9f41cf59a989345459783d35930a86840489faa6dc6cf21d9411007035f55840c4d5fc49fd3553508510d68433f5fdf45516377f4140713ff7dc99eea45ff97dc770973d2c0c8815bc850e3c041af01c6eb372cdd4fe17a449f9b0cfd1462c095b5da5b88c5f8fe8c7c9b2c75510a9fadca69023505eea329ff10fb0cee27024ea68391eb514eb1490d162228de08df9eb6af92e01875648532cdc8928ad1db4342ef62fa26b30d777f82eaae78545091676e7ba79a56fb8c2a5ec9e1abdb44b0863eb200854cc4be1e919c03710f5dd4da832fd104f8e5cbe6a627539424e3415476e79d550bafc4cc6dd35604e0462e6b5eea0491411e7cb95511d14739066f04c4f409fe6e383ef65f823dc141182ed88ae573ca76958b42eccbf271fb9ffedda9c5695bf18d9f5c96e4790f06e2ad63cb099b3d5194ce329df386792514f475f4f952816f495043e9ff6f961bc63eaa85895095ff112cfa757adca3fc15aa313cd755e0a054ed5c632ccc3fe9a1412326d406d4db23a4632356d29e9f32c0feb623d1ba5a2bc585652ceb6f47e5cd20398b821453110dc036e12366923c867c2ffdb6b1c9918cd24efbd8cb5359b982c52ffa84936069e7b02c9e30cdd8165de3973ce62cb50073d3152d70aca32001f4deda7364b424c33ddf5a649726b7ad14dfb1470dda930c7b14d0b6ed90350ec12be8be00b6d226393a4c31631f1da8309af3e1ca0a08661b8267ef1f12da92fa87d7a61a4fc1edc3fe2a90467003f88c86a7037a1ec24e292eedaca47100c49484d3106f52f4e29b46e062044c2e1764ef627fc72037696fdf57ac370a80cc5b2cbe60a4f628fba844aa96a00420e965477d869ae97285dee3402e94250bd736b290c6a6207e909a2376cc77e28fb48af6aa01741722452a6f43bf61f9c098c3a8c2ea60d2f5d5d1c00611931eb72b90068fc6cce919d1d7d5490f05cf6677e5ada30201607d0f0f225ff6e97d2f5bb9cec98ea438d636813c9ece02e6d19e2c8bc3c80d592e5aaa0699319678b6b0b8598a844651dc2b755016656ea5eca326ce7446bec89675341914461f0bf56c55cc940ddab0f343f8730edae2c8526a6621f4aa1377cfd391cab67ab30d5b86e51cc7726d554116819ec1f1d130d0b3c585e392ff0658e8ca548fe1c3ef27ba179ba832d7a387ac361a96c7f12e63ad7ad233ccb21363b36e4eeb65fef2cb78271ecf849335ab86823cc3eae70155a8886f098f91fef2fb43a502f5132a0c88c8493347d4f030b8155456271c48d91399b50b733ed91fe01fff50a6c0b1f8866e4cc685055254a7609fee5f221f9e3ba7990847b69b6e5ca35153083f2114f7498caf75bd2e75f0c331aff5723f60f0248ce2f4e721642c9d40f683302efacb34ca2942a02d5bd30ef017f36a4f23ad9a331275bc7c57581f832728d7dcdc6d891dc46a88da2e193c8e24e023e944f7e3e054ee0ad3803e70ea84753fc7c31e57e1fd92ecb33856d159ff3fb714bfa1c15eb15cf48a08e60aa81732f539ceaace622f5d3f92f0dc9f9b86beeb4859f5092726dff604c588af4c44f5c8e6d1e59d75bb8e1acfea0d41c8be15a084eecbc7688bfc94bd1b735a31d5ed75fbc5ff815fb3ae35b51fb6161ce7fe61c6e554aba0f438d6ae352143cc0ca7191b0adf7b8db97dc2840752560795d295d16f6593592ae5785745170efa23e871181f90357faf160703934ec07a67a2e1660ee922b0a12ecff6428db3bfcf9dd9314d8d3016bf7fa44f615741ae5777f52654526fdd89c81a29594229e86f88cb43a626392b631b686e83b15543e01e1aa6215a2fc68ae26cb26f8831caaf0711096a340d9c36057860974f376daeeff1634e356f1197aacf0a9634ccead79f01d582fa3d338e0b1d6adef3d9af086a0decb42c4f0acd3dc43765d8f15dd3ec3162a2382ae4fed8647b06b84dfa192fc8facb533bc6a35038bf9d24525672646698e36d1e1f71779f35846f751f8f2409cade3ca3bffa41e682dd07d833b935b55b7a7adc80a183b6759fae8f069f536d71373f0ec38a4ad7da7013f1974b7fbfb485f0954988d98d8a4549378cefcff98d58aa6e427e7ced602b46fed3bf698816490db99b3dfc3253e6335e1c760cc4caa8f622f1b67fc88eaec0ad0450df8326fca61d9c78fd395d81677ff0762bd63de535ed94cfcd401e0277ae8ca15f6440139c723fa26cb98a931c4b0ef74f23e42022d48b75b07170c7537ca44798df1f58274c723f47cbb76238161798b97f8954bf924e42417ffb8d48053387228869b037649234f7685305a7b36e8d25fdf4073fb95bc5f32207ac9e9c803f104eea28ba692914bae56e614a8b2928a9cd61c3cbcffbe997c9a12ce27b983b8718906e692fb75d502cd8e7a9c0713fe50d4732b363d2cc3bf94daf79ab22549cce43ea26493690c4fafbb87dea07eec4d6468327019d3217f7d75efc0000ee880a4f8e8cc9ac340d6adf52f5679192407f00555a5595da0333ad3163c02658cdf1721cb1fcf33f2dccf0f0b76ea54c2ef85b859355c775958502f45b45ab32907932f4e8792d5db9b4bca12c83eeaee4999fbef84bd9237af6d35ed0798403ed18fb448c94fd52d93be736ded44ff1a2ecc9362b2a62472e0858ceab3852cb204300857686274cd89ec657feb0ac3cc1e4b7d790ead911f6a10d79eb6fdf361f610997f5ae4d62b578c818d24fddd4d41e59ebd1bca497ef29a800581b8909c4d2ae20edebf52646cd4a3953c5ce41548ae2aa55fe98e5622310f1685fd298855c10c4cbb7da778fdc43af26cb56205bca60542c622f7922e40d3a81a7dfe66c5751d48a1ed55e45ae881ab1614a15201276f3a165a1a3dee68d7c3ee7d41fe9091c8870027af36276a78a56e212772051079a3377001080175402973a14fda046d8b12773b7ea05db56fd7dd4e89682eab5bc8700b2aee570579b6685c3da31d05ca2d4059a81f65210cf932d630f15052f15b2d9e6d6283eea038b3a13b648bb81e88d04ed8bc40580979d3c9a90cf08db09690f06cdbed4ae785536104e5391bb3a00d2effa28a7018925b894d2acc534a1e3b18c292b57f494b947d01ebad024305ef7dd6f0f2cb26c5c3975a74bfe75618fff1b0f7fb6ca9ce4a2899b6ce1038c22063ad20fe07fd2531ad3b79ad203ae6ccea35507842358c1b24db97a4adb5704935561c55eedc27962f368cd9bec97253b396b6925ca909609c68bf4c723ed86174779dcfb16da2783c1c7dd366fa7d92730f016cb37700e98b214d8a488777cf709ff3a5119d922eed25e8fb938a92ea00337e2c54f8d08700b8a393e22491792dd63174b67b7033458da367e560b352a863488195c7b535474507d40b31dfd0700cae76b03f1c4ee4e8aaf5a7f52fa191e28dd2228502adbd00cdcbb50475d4f8feb0005e5cee8be9c8bdc054a545955e28e5b8b58dfd6bd82d870f5568773e6ab340e6b8809b9ef5c83746e928e8623e5586c31e3425b5215da644fcce2bce24c72fa49a2822b5a2b1b4d01e17d5f80a19f340d88203824e0455876e2da0dfbacd6219774e95b1d341a5f345401f2756340855616a2bb704e57843565852ebf56dd8e7088eabfaf40b2d74158278febce8bc5b6fa5f609c38ba7bc700c7101df4b9a02c426bcd859373db9b4f752af60e0a4c34e0ab76ccf835896a30f968ed5ff7e1820fa3939400e03ba8835ec8490f92e7bc0c2d2f13eb276dc4f92f3392ee60ff2bc07a7595bd266e874ba78bcdd132ff4236db959002454d5c006698757e60ba0e6d2b4c5cbcbd72dca056df322ddb396d575fa44b785b517c87c8a8821802751f292369f2c427fa97baeddcba1d68632e86797d4ca96c724dc2020d5e11d8ef9873744d6aa7712166959ff3dd3afcf556556b1f877b68998d71bd6b73d871f18367d137134dfb5b0d5e328b41b8a3fc50d153e836369a8954ee52d5edcc4c8eb3c6e282902cd7ed4a48d0b6aa0118b11398ab91fea8a6985c4559cfc7af5fd2775e35cd8419287e5d2bb8a025af4aae16e4837e81d2c65c65b854a8800fe7732c388348e21b7a612048929270341e6ddd03a33a740a2debdde58095d822d63032fc7d4a549ad36286d4301b715f640bdd3ec43df8e08f9adbc93a0b08877299c72eec1cea41b254c26969917e4ec4d5ce1c45487eedcb27e880017a1f582c327edf1250cceb2ab0dff2008225dc95e2cfd5eb9b288caccde8a921613ece7472b62026c84c778617b16f8241e79175013d2b1517e7abc27c6dbea2ecebb8cf7a57e4816c35d48e8f7f8d5dca4802b63ea26fb6307fa34b15d4b9d9562987787e76dc6c56af49575d5b7e1d7f588af119ca0087265bcd082d18299dfee8ce44492fc08c427723ba1d19a43760514bc5aa6351f59308d38b1eb9e3dad5f016ecb4a6a60fdc9f778c494af3ade131b77a6071f49de251a01806c75ca66c9083dd1d4d05fdc33a4ccd33fb8583a6bccf7d95cd82eda476fbe9a0696642880fc620094c8e0c623fe29cdb3598441b19ce219c007b5866ed4e5be0cd826a4ca7a136642333fa09389958604b7290403133877ee8105de2901d159b71da954e090ec8c070e0d4732e9d49d59e31714e4eae7904c6dacf46f13682da72434b74a31578fe63922969fcad5b3e51f7b0c4557d3bdb5054df67f923035c44c7c0be6aa4690138c908b10c97650f880b5e05a314bd448117b4c53d54972c912785b795593511f757e4c8de1624e18793dde98c89adf140e8e30329aaf1f8cdd5182ef5b6a2ebc8315d8fa26fb6b23ea67bdb13cfc2ac18b538e7555ea29ac1f37c182b214b1079a38c657027d372af1211b4e621324d97d784129a96123e9d4766050c59d3e818620b9e54747b018df4687968cb55c22f510674523d01e57c702a0c0fc335e6f95041c21aac87f948e91c91bcaf195e13b44494e6b75b3e8ef7589183e3d018354ddcd8a4083013093317576855cb8672ee93204d554fb8349fbd0aea3cc919831b209df382aa72479beb96ff1b87ba05856bd4d27bf59c612643769388c8480dfb50a8974e6e3416f63769f10a757c0b9c89dbf41bfab9da7a09de961fc86d9af25ae8fbf1f8990c3ab6eda28c1a00ac962b1955219c4bc323a0cd162f5bc8f1e557a08db38523d96db26b27c97b4e0b346f861ac3280d536212aa201750661f1a0532259faac87819a72ffb45cd85061112136ab199ed367251d833d2ee48e7237d0431bddc3d5c539ccb060391bf190a66f1bee70eda34c2aff48cfa35d2e79798777fa69ae1553b34441083266cb0fa5ee1f3547ce65fad5f6c8bf03bba70cd43870bfb7d55d8899a2fc98edb1d09ee3639d19018dde9dcf0230425a83a4f2739ec0acc43dd5e88888fe617700a5f7876689bf8cd685e863cd1dd8c7493efcae62e40cfc86847518c2197584f2fbf861503784fedf13f73076724e137620d9b723cbdd2e0c38558026c93bb736ced7cca234b4a9c76133ddac68b06a86d4ce408a6bdcd911fa3404615e6c2fd8ceb54e75f68969c2a0a9a6de44f4ee4955e1909f6f9e43277a08c8392341e10cce6f71e8de605e89a2c3008cf392a369f0052052edcfc8fe6f54dae93982471e607bd514fc85ed76a69211101a4fcbcad3a8354e08d5fffc9152865bc9900fea46ace67c756d4defc1dc220310ec06def709d594726012de927ff80aa0f82521cf70a45d802a65b98a8bd51bdbcb81944d99a7a8505a83da187c436e75f682bbcc3b3311a80ecb30d2be555e15d32e312f0c286efd1dee8cf19d7d3a78e6d4e8767a8d83b327b9cbc99725a01030577f15a1692bb82f8c3a090ab5c9865a0362234c5dcfccc93bd78046afefd9fd408c8975fe885b4ee6b5a4942e1abd7c56ab1cbcac1c271af9ecac7793ec49f57f08c6b6ab238c549a5204cf6a554292646335c0d57fd601dcfaa46eae7c2155ce73ef8291fda1fb3826af1910d21fd365b0e3ac7f75109cfcb9cbece76ed7a586c83042beabc3b44271ad17a89539917e56247f4254fd5ddea8118a371a780cb7553f2786510feebf5727f3ee76cd103a956ece9c3ce4fa541636e18ca444203594717bb18cf6d20f52d585aca1e4a79c7081375a4370cf0f5feae4551757c8fd4a542a77af2b563be0d75ea666d6a7186bc5ed735a695331ed54722bfd0a90ca646b14f6f030732bbbdb9c4d595ef3168c9f863261ebc94c8e19af186ae672ff984db305e0249951e6ed461507c5d8dd430bda36cee270751f87bd6c10f35cde53fd2033c379165e68f5a93ce1f110cff85bdb372cbc030ec885b6fa76ff8000d3e20face148a299a41eb6480406abc7d7b26ae9c1df2f7a7997c790806aaa0ff8e400dd94049b60268344a495f37b03133089d35180557d923a8088222060a7728dff4178a1a10b2f8d73bf2ad54fd532c1bdcbde57a7c2239225a32c17e549909181a2d5b6a1bf7910088e374880a334fdf150f13227b49de7a8fb4ecedd2409d25a2072a97e225a32ffbfe64e16a76334986b31bcec69d291053eb57715c1b2422478a5820590692a402ef9c0aac6a2cd9f84dde98a34bba105fd2d2504e2827196fe0f402d974cf70a804a43d2fe813063b1d398731fa2ed12ba67278311bb7e58509d2ea26ae2063773cc3ed30be0029cebd7db81bcf1123c3fa003059aa4c35bcc7dd5ad096650c28e918ae35c6bef36667bd93cf6076fa2c4903e1510b7f8019ba9d402bc93d4da765136dc3c8b808432363d0933a50ee0821b0eff9879072bc50b13cd26e95d01605304cc0fe628dd6632c551e8786901e57f95b4a6bd996f6b3bb3fe7bc86c80df24c19ad52a608e466069dbb7abc5f6f987f0517faa8cdebdeb4f8b45b707c14dce69dffa5e7f4788e2a8e3a4fb726e98e019b38d6188fb6227d7b4165466fdc09cb04599d10d2c51c30bae6935d5735db0b0d52dec1a6e630a38f9997da42d03441d067abcded08c7bde1458a9537f94d6dc71605f419348a5825d73367f06aec8d0ca324c373698be1113e7bfc6a94a2394a074a73dfbc9ed3435e020cd8cab78d39a1a173036a65a241b3785424f9361f5b021c7da2bcd7fb470ff1cb96b12420cf9f75dd8c347a701864914065df4e9f98df47fe5139315efb6269844889824e04c8e0b09cfe3e62ae40b4be062dc0fd55943b7e71393e49c711b7eff1a3c00e6ff99f97e8125b6358d856272162b9f1a2398837a37f4c1ea4e6df692cb193f6fb7b73f24946def0c59db4a900f99b7deec019d5bf78198fdb158c65eedbe4166aad11154d74d99e83e0f72173d777bd94b697c758fd405c42a99d47c9ff263237eeeed416d8a3abd5f3ed4ec2802459fbb733ac45ae61c2b1deed8eb87961ee4a98b1286afeff895136057dcb58b076a7dd8c71687b58879c4313266d8320a13b296f97e4308fafae8a55f0a9fc19380a3ec85e5ba7b808b663773cf1eae5deb45b859fa01df0d6f952b3cc11438cda050d2a7fe173c198da3d2e8f4a781fbb0a992c170eb46bea33c7e5b860592ce5dfd9a96435ac6761809ce26f7465b9e42537ae6e898af4a7d5e921467fb812be799bbfe3139ff9af396630a3bb7906d44db49ead9a68c5e98a43ed66a84f9e3a0f831e614b8d0f3b04d6728f08c5388a73a50273eb231b88330fc9b82afebc0d0125bc6654b2c51d4af6d1e81907957d129fd3267e44032af2184670e20c63e596fcfd1df720e04160e256179571da05d016d4e0a6e124b07bd3497f9a490043c1a13e8616bd0fc495a886875515afedfe9045def5bfd5720323127bb4a4494f9aaa7295201f3274823754f86bdba4b24d115d1410da9e3822001a16d011cde4dd3543c736e3eab1f8fe51a6814e7f9d263e4f30a6fdcf903702518db9d4a3c78f2326333e94bb214dfc1800e7002c72d48eca4298005a104630b9ebb7c54eadad944a56b0ac910ed6f7effbf55e9c1e64e0c84c590af3f873d1f7d40f350497c28b2b9b2f41637d40ee318595697add9ab6d0e573cdede89dc077b09c115f04caa60396a18a0409ae9daada4672fba238b856bee255b9a8fc5af870a21884f64c31491605b7497d895cbc25527b896b540de5ae5ede5374e986671693d2d5f68fbdceafb877fc208d0483a384a4c5aa5eba63a4f9c043264018734605054cf2a3d1d8584846c09bca3a26b7dd0007b484a9baa06939a97e3d2376089212001937d0807b505cb2a2f9607d4fb7310209a1ac0a31e9136d116e3dfcc2c1d2af598e08c980c6e5c07eadc213a4447f3b4d2215087d62689baf6ebd65527fe01a934cb4166987f1b967e25bd96d40f62cdad17208576a35f298c248928665714bc26dd868e03e56b46f9bdcf7574c530b348c990d5b50a3342f25078e9cfcd909e444e55bccdeeb271a2c0be1e9a067060f14a8d06f412b59651e2c5a01674ad4141138d2fbb8915249a7ef9d5647c7c4a0bb6ee7f686b187813080c6d0cddcbefebae046dbc4c291898b38199a87e73f95217a3439451c9a27f7a1f0f581767e2a7550dcd5aa9751543c20e0ec71e278fd90e657fb8160305eed5491ae667d8982dcee7c4213a7d90c0a1ecd23977347d2147b31fcb469b38594813047c5fdf3dfb33dfdfffb5e330c8fde07490461a1cd28d932ec5984157b86713d0adcaacadadd0051fae948a1ed2005553804ae785d83a0f83f07799783f920b12c79852cdd329504b2ef0d441c2add7639868a840e5df4221c10c887f5bdc4a439bdae10cea0e0f125e2c64c38a72a15f65fcff65af92f9b570327d879334df1f80f4c34ce629f43c3ca29ec6736d99e36b8957c5ce64f02a2b7c4e2cc997e67a4004fa42832571c7b50b09b0104d0451a5120c2f82e5470236a4baf3a03b44eaf87bf10c06bd2d66d625caf73c882b661f7ffdf56fef89362131af675ad19ceeab1369605b52afbc2b142d289428d5bac5fdd7edeb3e3ae75473105009254d7713969e623729717e53018584129d009c45386150707c16cd44d218546d895b22aba3883d7b923c9e83098a854bc69ef55328d98bfd46b9cd13336a3be0c3ca96d8ee9cefc7609d1431f443f4822619c28b9a026af03a3d139efb1f809ce9e1aeccf5a1d0321f4536113e6846bd24d1c7196e4054997623e2ec15751627d5969cb4fa1ef7c44e9fc4f2c38cbbacba2c18124e9728fec5ef5c9a868095034f0a9f440530b429b2105e6aeba291a665fc5260aa87eeababdfafd9d4a30130f351620c97332d18cfc60e9ca57fcf153417329323ec3d1e94952de9170bda9d506f6e901c907d7ea22f8af6754abdaa6788c173b5db6a2252faff72320b1f1698b76b1251b33d748b1cf9de7b9fa2ab93f8f3626ba56a5416307279cc9d45c74eeaf8723d39b9b88abbab50fa5b740f66975a445dfa1e8a677765a787b29a5e372f2a7c7cc5062bd4d606080bc9502d97eef531f2c941df61b8bae16f4a0f859e72b1c97cb1533e3dd6ad5612b6a266cb9e0bf121fd6970f8f0c83b515424c2e72d0badf2d614de3a353cf55b6b42753868547dcaf1d1570733aff08983b79e9f0b2024d82e523534f51ccd9976c2ac61f501c4b450f2305c2fd26a1a3c6272dec211eccbd7e41160097bbb4aacd9c4e66919f2846efbc4ef6b789fa940a9b8bf6234059ac28df27c5674c539b1065e3e23e1f4a6d3fcb4f620c3f59b5adc16ef9418915bd0f3f456b4b865adbbd6fea3f7747d7cadf258e174cf701e5b924e9d94570bcc52263ac6dbf3f7393cb38f82659f7e8ba08fa5a90119bc854f5b180324acc1ef5b92d6b75c24ca13ac20b1f5a7def4dbe2887079fdf66574d37041365ce16ebdb5bd082fcd32d08e044d9ca32f653c8babf1bbbc3028a1df8530479ccd408808b078fc90db683e6b0c68ba7350a22f101ceac2732a3d0ca3a93eaae5a2048f3f412e3bf9ea00ed5760ab4e66349996bad0f74d450d211e299eea502a7030eca6c31ea2ae80d40a58cac9619ec0983f8cbcacdb74bf3ff66aa3f12c1a311a3f34a501aeb7de2f40f219491548b613cc237c47a7b5da477a68118a37a2b8533d7a1a09f8f0a07ff03cdc2d008a38843d945e541de78438544d21d3b74133ce9eb7af276a9f99b2dce8d8624cacf0db2acaf0441350b8d57ed379f107244b0f5564d4521935fd941b7a6c3d590952eba3be28b1df2346dca01d8e533754da688a871513e62698ec64406f8eb71b6d1a559dff5af453d60ff6836221e1a7199a7c5084ce3167d8c163ba8959a8caf0304936dba52a0a68a8a33dd93180794e487833b84671971febab8477a56c76b2a6d1c6ef8f80dd1995c2abb14ebc3f7eff580307590c14638aba0de2ce53b4a200a1b94359415712174e9fcc5af50dc7e40337971c1f16d7968df9a3d127c536a6cef1e1366a902da4b85670a01c4b2e6aed26a202997bfd469d1595a0d8b35e7c868af760862b5106542c5c15846d5a56e47429f30210b885416f2be839e9565380d54a625fd9dad9017fd56082c1321d5e1f181133b960d8a14e8a1a5927a1728092c43513c784d14507dbd468c8e5ab74889703c0fea8a5fcc3c80ede44aadbf737967d4e4807706f3308bc94766dd0c16b9495881895fd9803238faddf427bba7a4ef9a7832efc5eb28b67057086d81eddda5380c36dbdbf02b2023f9dd8ddd80e3a3696235bbebea9c244f6167e2f5a17d24b46c2bda21fd0f0d8efcc72ec05a8d68599761b1b27fb2ca4c8c236f1578d83355e7790215dc2c3479998628f8bd1a4811f921a1f798f0a4f2a5621e8df0efe68167fbd73b587639877d2a91ffacba2486b6e64b0bef4284ed1a047dc2628fc2ef32c482abc79ad64d41f8a1e11edcc15d3ee7862e510f0685b4b35678e31b5b94dc45ec74c2de024fa0b95d2a11b6367295a2dd9dfdcb678fb9afeb5c9707fa0f71b3edaff9902d90996ac90bab3d0b35a42d92b0abd15b5c3be74a1eb4b15fd9abe181d467328213f458393281ec5259273ba224f5b46346eae5b632d820d45984887ef727b36963a30abcbe98d32278feca0e30c74be7b07e1c7ea00a164fd2c0b5b21c64289449bec68518b0d2a06c4613b08a5b62f180e5c3dacb946936f7d4bad48d7cf8f8118c31cc28864ec6a1d606926b45f874d0bb9a474152904299d36d00b7e6aa6326f9693b70d48dd9e5b49ca700f7ba1bf197dbeb5b9379dd3f7a29cc4996c7aab4ea5c59f31f614317dbd940ab14ff7504ff547323455dc9d696210d5cf0c1fa15bd535ae653d5d734be8cdf26b9be64c130eccde3e87cec7fc6062a7ba1db7a09e48c37b4fc733954e14eb3bf0eefae1d131a2a96a0343e7d26e0c73ff805fd30dea172e3fa81dd8f887873d6a6ec12fae53ac5e7f5171cebfc3c2a4250267107215cfdd9d4da31e9ee79e87ede1ef06060b1260a37dd77b833cc9671371b2d9368732bbbf27ebe7f9fb196fe26f3ccfe07a89e7ea9fe271d14e930e69c9818f66a36ba6b7939c30812534adde1b1185e4076ff0c406b55126aad6b4e2ae8f0811eeaec2cdd1f727f2d9c9b59b58cfbad87f861a360799f6694654b7ce0dd95a38a65dd95266f049e5a4cbdd4c77bba84bf340f84c2811ab9251af1525b00ea61add456060c95a0c5deffdfeac68bbfe2475227736d1630694243baa13c71252f8f455fe02934650f9f93768a0f2c4e5f625c1856cf64c629c5dd91353870139bae0f726578db0001353891605b5c3c2fa748db9569dce78aadbf646ef1723c8e541ae53860997483d0d68f77a43ade55e1c76ef2446986e5afd175c16af1985dc8ebc5670c5251098d7cd6bdbaba74fb79c88d4ecf2d9f158f9680ac8628aa400914ffa571a0f84c222cfaa33a1df02f9f965233a1e1b82b116d15817cc222f0c3fd96d1c929d73f92e0654174953c2457960e4c284d8dd0cc72cdfaf8f87767e0737c9c418bd49bbe5075266c208664ccceb3ea88295f62b79eb418ae3f06ef22facf76658e1f0545c1894aecd57b9bc9c272ba39ce3819b1930daf6e70d0ba68b58fe70a32ef9daf4c220db86eb52d531a3fdced3413055d66f5ce9c2f21fd0da45618381c90724120ce721c3dac66a6df2412fdfcb42dd02e2b2f01283467197a74fab9cb69ad9e9628967c4fab237c737ccfe9ffc9d2c8d59c8e522010f1a9d0dbbe8b8af93b83541ca61f48fe8f0578db6676f3d82d7f5c29be0a22ffca146bf4f171a498606c3efe0c7beaabf20bb84c3aef686678273791f1b70b79e323ac4891bb6d216c716a65d40e5a86c5eac7d87d1e70c58b00318174c6a66b967a86e0ef9caa739cefc66af4c62031d85366b6ac60d50fa34d29fd27942e7e852d897918ab45be0fa855a044fd484c21869a66c96c2688165a544e7f81a4bdbe256aea5742f49977353a2088cfc91468547659947f325d6f140275c0db451d812aff59edfa6f1dced5a395ef744487eb1eacbf834b929fbc95f7d050231ca8a87c4d59012be756d25ddc769fefdcae4a4b6eecb9edf183bef87b9bf4c26b188926696f79aa4675128ae89b41a3b224cc3294e89a52c1a66c6378c1ce5fc28370c6adc02d5fa87f2c7ed5f9bc374621c95c00d7e0f1ddb4454a4c5a2da35e9dbc5a920a8cca0f19608b30b2a00c9f0500447a370d0157fc4cbf241add29f0bf72a3c9fae116b61593de48d1df107fad657e525ba09a5bd1daea5ac1237321ea156f2ea720e0f20cb7fa7b57849af6996375dfdb4c550573e55028dd410b80ccb601a43fb6f787099626fda72060a216a5a0c42536b855299574e0bca130062afeff04bf9053778068e04ea40b4fe4f7e4357a3367a84d82921af7663703dc72c89188e6049494549922c1008aae6c53bdc485425d2978418767d1a58ddb4423841afc39f9b191f01166ca5f6047a60a51d9cdefe2f085fc7e3ccef97bffa57833af3acdb2866e138c7509b0568d1b42fc942e3ae0bdb3ed2eeeea023283ac3ca49337ceb3e049f03e0b332fd12d15ecd80db79cd115a579420db1416cf73b09b5a2e18b5566d5c4e77b7e4f3c6f41ba3404998a08ff952280a6004635946ed2ee842fc9d30af9bb64a9232c2eb691330009a5de35759928572e63128e1abd46c244a55ee53bb4ce49b0046cc3e18e8cad2e72da24299dac63eec62ba2b3e3be6d899f357d59177d4ff0fcdefb85a7279d9ee335e40a481286b2d1468f9f090eea14e91ec939f19a310163553334b64d77c41df404053207347df175fa1b80db08ce4510978ac457b034495c9ece43355e67e8906b47caf0c6f8eb410bccaf153c382f7e003a85d205f70c957bd85b684d02ef699fabda55239f6d6f538bfa11c943cb7bfa6812226799d8c9dd062fc54039071e3cb1ffa3c8764abbe7e15554f7ac8b3fcef9f8ab77acc4c6bdb12164e8ebdb27d5508e6f6f23c805b495d07485cb782894b294fe66939dabec42a681a637f71c9332d05613434985c11af82d4d26dbf9e5047f76f1cb255854751cb01e25e5108f8380f1146558180ea91242533978d766b8daad267d1870f665022af8f1a9b9a99d0ae5fcc1c72ab1a9ac0a6d11c0938efe0b1d6d93eaab42fdb7391491592110addfef73e31ee8d6666c6e1159e98d6e544b586ada56ca980805bfc3db572e3c3e09cb9476b21b067a8777a7601a6ee8835c39ede528616d2067b7d44a66188845b18c42e74f9beeedd6474c16b00aba82a19f665faa76030607ae2617dabcc4a2ecbc93b93a59aefe15526c10b2c4412f96a51122f608f58b61769d6b7543f98a7ded295ad6bba1c1738963b8e7885de3dbe2919becae3200c45e5e3df570085d49653eae5c9f3535effc5e206096af42b214ab758785a23b491f809cb70e610ce33f4091f4d24faeb7ad5cda18532042bceffa10a37a293e13561ade640f4bc4b926660d320d67c6278c77c8c8b9416a37e29122e879993eeed00e02572a6fbbb699bb3705585cfa3916cd7108c57654eb328c786c9136d0437d43ffd896e42bf83c6a326a5e3ff8238edd6d9b2f7ecd7cd3ed5278970944da56324823284d612632b957efae833df6883919ce4b83fe0c20d0a73091b435f3f52bcb474906adb3380756dfd572350df5c565ba85cddc7e6de5c9077d824f2e8817704d08362bf60063f66f88b0b0ce192012cd45be4881b160e7847625829ee943c4ee5aec6922eab4ed07711d63b0566cc875e570f1d2d49e40ed509f60a35fdbb3b2ee6165fb6f00e130a0cfa7be65efdc213bd88202a170bfd3d5889610c9af6ba547bfd1469fc53c6c6224a8dfdea9601ab199913b3a8f8309f237cce13037e2e6b55f1649cbf68879ff18874dd512a73d981a8b88e8542c048b786b555d7ae4abdb1b7f4ca2be11f3b98552135be63f5f5e2362f87fa7e813eb51732450223d496eae56d14cfb84e2eb3ba3a7737dea96ec7c45639e2e64ff5575ea8f5684794c694cbefc44966b79e99b0b9b36f9e5bd082ed4e9b313c87edb663d10b428f6effce6dfb9689422e52492b88e44cfca1693a9bbc719950fbc47ecad579258b7ac5491c9d12ab3382f44b659d5025700f4a66d286960c9fabc879250731e7c667a222ed2c8daf81d56b0ac30f662c58172dd60e69182075925512d98f2c7f0c05b02810b483f7efa9d1d79c0f31ef2d4e3aaa29e82cd9bd52c88a680d50d803ad4ff30602220327c980522edd027f8fb506590b10923e4033d91f1b4433da5e66af610232609957d06bfdf2ac5e6032565887f9908a58daa93645393895956e84f18bad65dc79530a5d589e95620e5a7fe8fee4773f09c78a808b995ffbeecfa50653c681ccab7e608c026710075f04975adf2ca8735489d16f38396858a01085f69f447c724dce1ed7b4bc6d46cd350621b771b7126f5a812ad530b83cb0fafd8046bba6761315fea3d7c8761a31e4a093143ca1a4af26c4b95ba085bea9fd5ded70694608efc66450fc557e01b1ddfa35c8cdd3d1933ba65b5bc5ba0c88476b2da006c842a6dec1227930e6fbc9f262baff648c6d7a81ad8dc30df81e8d16e08e23aa2f10348d35a4690779a362dbd4ebdffdfe6b87515eeb8b8a38aab7eaf2fbae15fa82ee6f549e4f05fbb8301f9db9e5d8b9ca649c5a067191372c4affc98ea4d0dc97e5632f2637e43e2dacee82ca80e74db983203e73dabf3223e58bdb15263dceafa9df8469892c78bec349ca07a7c1aed2335f7e35ec0a64b7c4d61c684386aea387dfc5ca8b6788efdfd07a0422accb2acb71eb93e8e6413292ca9aceeb7e4f549921d43494641b8861a59fcf52286b1fac75c8a71c64ad22ed29c1ee05de272d10e4579c8c79e80533631b049d6f1b73f119f84d6725243db8ac6b6d166a210af5b72cb563fd7a172c36bb36a6b0b7436884ab822a7d06f12b442862b0ad05d32c0f5ae819b515179e1762372c61f0c62f807de1e2ca54be3bdb2049ddce2977ad12ad8ef8fe558a7bbcc9d01f523512651bb59035d22978532acac8dd33c448b6f38a000f5e570eae90d35b12675d774580c1dbe3ede58db62fb2df965ed0380accd372cce39884d206f183c9babaabef102702299a582fd8e5ed462b9aaca1464fd79c47d1fd693e1ba793b7ff95f08db955e2d4d1bf617cd049ab310b1a813073852db5d207b09953624994cfb3f0ae32154c21410348673f97971a04db0d2277eac4b0c5e63e02fb3f388bc762d255eb813dfe7343affa9577789b56cfc40dff919195872bec46d8a46387ef863a3d9e31fe6f3f5c1051aaaf2fe737b9ea20ae378f5f5852053680141269d78559cbfccd8af72062719883544a897f4f080268bb7b0fb8ea8a436087d58f45120ad5cd4ac63efba2be180b8736d682d5567ae09a137acc4f1e63cbd8d3a6580c01841b385c67d6663a3bdc9e4b8a0b60bb4acff9835cdf196656187f1de1682ea080ec182a759692ae886a0855d8610fad7fb70a4403a93b4a7fb1654d0b004154ed4b3421d04bd29b3f5f86de7b8783b9ab136f13769343e17e988a22c4ec20bf2112403754abfc69369c7ab7cdf3b5333fcaaff4f3748666607d41988911f98291aece828a8c934e9d9b2fb0d52fd4598ea00d9c560ab278f479d7355c5aa06f12e4e1e01c0e315dce9659c9f7c4f77aca22addd61ee9bfca9b725696bddb8a2dd5e84e339f3b42ab02fa2ecb979166fb7c2543cd6c164530c1e399ab1d9f0135c3285542dd68278ea23365cd7f06ee4058e4b9a64054f3fc83da20a68c29278b210cdb3bea5c693073ef2946e60a0ed0a13417e2267e389b8019fc34aaa9807e09ef8b5b43e02bd13ebb139396d20cca53c9215da7b4f758c2e922f16a23914b456fff9c0a705c519b5f0fcc2647a6ccf47607728a46795d7755983f5173630fc0443c0bbe398fddfe626db6fec120d9d8679affecb49a795d71476a74ccca436b347b12487568c8de735312acae2c76065eb6434e42278b43fc760d206ca5002ea44f90f785bd8a95205c0038edf57b82309c563e3116d156d90488e2d24f5fe00e3d833d00cf85c047fbfee94dca9112ddaa2929730a94e5c7d630c84e6b32bc63655097","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"12b6f3e59c0c01b7812becf9c9d57553"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
