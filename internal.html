<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"2bfe7777799eb48d4ee2dd7addf8122a7bb105e17f18726cc093fb537577f2bef6804d68eab2fd2df4e07ca98ce37fb9518b6ba238220911ed950c1115c5f9a6c069bc7aaea66788e7865ba0c8f39187d280fa99c72a3f5c0f1b595e67735e29c3acad9e6a4704e72a006bbb76d915c4817f9bc85215185eee345da21bd72d4413d3814a824ab2f298d11a9f8c19d34639a914e024475b2c48b58f2a70624d79296282bcabbce1c8698b7df36d3e94344edb74404cbfdd30253d0b7864ca3d87426a4433ec1edaecd914d0a216531e75e905efb05fa90bdd0b14f9659d4d74575818536ae56793896f4026180df1a4df2d72596ddcf5b0515d6b4ed9d0f0ffbbbd2d0722a6f21618851846dea9f42211d8faf25787722931ce2d7fdc6c2cae98c44273a84c089f27105543b901fd8ec60944d91c012f1177a2eb1576170220f4318afa7fa68a205760b11edcbb3d5ea861dc081faec0a6a38341d86165f828aba9df30bfbd1812afd73bf7ce4538d16b027b113663c7b03d3d1008c9734c7d33e6eb72120eed2ac32b1ddfabdf8d4797abece8db89dfad7533fd848f6a3cb9bb63acbd2fb22745f4d3fde481a61c507a6fc1e8edc4316fd961bca753e7693e499b4db4417a3ddf20bc05d5ab939695641b54d2edd29717ad54d0a6e445c5ff6d756617e3bcc65c4fa8b49276b2bbd7d39f3f9ebc6fb78aedd500c9a37ff93cd6fd3112ce5b6197f6f8c46741e66bc26e127d1fe21c4faeec89784c80e7e27f2cf43e3b26612951f06a0f7a0bbc4ba539454cbde08d5d9f99e0a8ea6fe06945eab180b3d3f7bdf0f1540840982922533545f6509a1973233048156d0f3b84bc37d2f88b74ac76a9cc0e50cca60664b7e3f35ad6e14b46ef38f613a64c7d64a5b9fbed86a3332ae71cd5ef99f135e28b751ef0dc4688e14e7553ea5ab6efd71bd257c32ed5255e707a4ef38b40adba5c1e5b0432cfb0e81d7f4cdb05df0bd6521ebc59bc4bc5920079ab981fa6392fa60b94cbd0755626ff2e1bb2e7bef44e8c8cc0fdb845b5e35c8e9c3416ddcd5bdc845d7428087640a32ced7d962c16e7095d18dcc2f0c6e71eb7549f5f697d4571df652cb61005c05a5f960c21475fe3858e42bc5d4ce5d9db555b58e4c820dca8d2e8798a4d53c3e75234cabc966cc8cfb8d3ca8e3e4b175860ddfa98d0433cb3d9184a1f3e5930db6fec73391c7fd9704f7eff44a37d0e5bdbf5db88358c3e3d6057a19bfb55900cd566e9eac2e48faa5a9b502c66031112cdbbad522c3dadbb7468bd32f295dbdaf6af969cf00af1488fa31d44b066773392853314ad55db366ae0153c71094e2574318a29f3f7dbd5783332ebdd13d3672122859139351e3043e0d4d54b5637633d0c3a19ea58543d34941e122411f003256390d8becc595f90d9d28509b1e7947371f932b65ac44490c700bc3648b9d95e678dfbddded608c0230c481ba2ab038d3293a81c9d6be7c44a69e115a38ba9408a513f4cc1a3c25809c2d9fc9bb91ba18632706cd2755fc4ba2f5cffe619d3a3155e94af6e7e3ed6788a836e92a43d8f9b98fb76dfe2bbf7eea91fc30f527509e55e31f9c697ff349adda6236be3e90bef29abc0db409d2ec836fc2225e0536dd2526061f5ddc3ff1039b1e543516e7daa11d00636ea4b80d3bf108e187670ebe61572d1bcc904b885475900e40656ca1850c2310d319aaeda851653d6dc2dc1c1fe4ba23bfada98e4d786ce87b83dcfc7738aaf1dff8c5abf66a6767f6d358ce9d3dceeaefdc9f8d938857be07bfc84cb96a8db9c3e305e10ace31f56e4a08cb01274ae0bd3bba2568d932ee6d66dcdd89cd6ba76e6c3afb814d97f1ec06b66ce251d08a3d3a344fa287be7c4f7040641ffbf3b6862c6915492e796fe96b08ce5723427f13804f8587f748e985298f5ef2a61341a0de695b014cd3ae402895e23087b0749d843c2efddc4b6f2d539c8b8a3bde9cf6c7e5f4f79cc646b7f0afc2eb85c17b40be15bb17f1edb5c53cb2c72d9446fe2e533da85f977529b215d99b393e8ba7777bd56664c4227ba3815a93fc5c65ca8d882e8ac531394b44c092addbe40037af68d28a18eb19b2abb7b1e8c329d44348d67b741e70306f4b205250ac1fe0df2193166785d0b17865201b866348152e07650c26d6b9666eb7f46d06203b441e5844a9d77a4c785e29f1357f076ad04b474c84fac77d5f8d33fdffeba1df2e3f385dd236e87d76ecc0d63e551be9425257b71a0017334dac30356e688f2dbaf9f8fda6cd88e69199905959b5fc608240dd9cd296fadc2131ddf8a6867b0721067df62b8bb285c1370e8cbac5bedf8975905bdc4ea6b22ce3dee7fee9420d9bfc84637c0f8f900749939e136fec583ea263c349f47f190cfdb5cac3d8110b5e5823790420680dc7f4876abb10ec7b35c1572588da7d3a240c7707141d0688baee6849e66a1ce9e81a0540f44cc2ac093f6c50c8662c87277720ee6e911d8b0572539bcd444fc67edbbf4af62cb0009ce91a3d543d9967cc8785fcb362c3b9ff54636e16c606fd6618d205eca9fe5c6632ac7fa55b12c5bc2461e0dc1837955f011155eb8e9ae243304c63a34e9365fe6b0c997031e7b95519855eec0aba8f96f2371e17d9afe7730a720dfc977045e5692f993949636b0f04e8ba8d0be49a131f8844bdcb639d785f144c1e53f8a811f5c26c4b43687f86b11646a26ab5eadbc208b975e76a5864d6679d849044991a42a88c42b3397106465f311682f2ccf684f8e4fe5340c1cdb359895615c28e2e2057f54127ddcb44f1cce532676c5eed95011138647947b7ef7895e242792ad547efc5b23765a02ff751aca94ad0dbac5e4405eb8ccc5b51112d4e2ab3ad2b9960cfd9a9978f7a032298947de16ffa629a4d1560cd782ac1738bf397bf250b53c7e3e13f043adbb321a71c68039e532c623909c52b28ce4b6ec5a0cb1204b8818f074b2a7e7969e90f9939df4389a7194c923fe4ad44aab4969ab64334cd4fe72fc1112a26e6178e8cdffbfd076c0fb0ebbc9f8b2a6f3ef44855bc571abfedf7b6661b2b163a20dc131dcc76548567ba20f6eab424e8f0bd04af3e72093ed2ff437648f3453cfd8fb4a5b47cb2f07db710b1f8a9a819d4b1e245c03db2727280b904edaefac65fe2d4fdf62316fbc06368aa4781f581788cc7e1602369823175a4916aeb68b57e2bbce2e19ec05120be8f0a051b9378e2dd1fbfe8dc9b46cc1bae2a4b87a0c75cf0ef915183efe53f8e789d9d45789dc1a68de28db6d37d888aea7289914ecc25178201cdcacacbd7d7de37bbfb7bcd4b3a826b4d32cf208629a06066fea51c9487305d582fe29247832c3ffd5dfdc7dfa704ffc8aa3dd83321485b8e6b9148063676bb9e915c75a12574b22bb914a76029a5dee2490474d233ac5f5457950a8bd626747262b77c1c89ce954c2055963deb6760bf98d8975960ef99bd2951453ed5aa3a84a2cd1ba965b3cb6b652a3314a820f8fc16f01d9fa538197b479bd95caaa167a7ad393a9bffc32823c178b470aaf81cb3094e212ba6a7821f045875c06357a544089bceb726d13f287985ae821f021ede464bdc057a7a3d63799d481a41567df606c2b501461f732f06822c0076ca0737234e797ad850bceef69cd424e93d7f65c25cdc8e0ce98a974653dd94d202a7d7f59e84c100b77a74386305d673982577a511eb1b8f261ffe13d5c0539e089b033b1105ede7388d2e71c19bfae9d775db3789fda521b951027cbd4707c5c5804bc6569246cffc49ae6f2692045c496df979071355658626e023ba21220b36a93c17408bd989e8fa292bddfe581f7e9ad273e3f65a84390214a7deb0fa04a1151942e5613df6eeab49b02a79addfa6c49f0ce39c5cb01f15c9aa055e85f9b793402a6ef83511e9d131aced23debd9b56504773412f64eff8ab41d19aa8134818e1afe1bcbdd069b73937513ba9e9da4fe979c9a3191596987c9ac0fde0c1629b72b4d781d120dc3591ae697d1b11295dd28a278857e69afdea2e0f2e326811fe323fc0c6cfadbc3d25fb062b61f4f42593f30c76ba16d77e7c14f1d798e1302606ed7f0802184c75fab84fe7ca3dde609f15b94584e487294868ce11c643e197eae7b6f3123e1a8621562b3ae0f70e2d57a3260b49ad09cc1a5e39be81e1c9a46a7f664c85a5f873382cb77bf6ff1b61640bf4320b0dd0810f82f21a95a166272f77a44c4eec9fc11c481aa0c70f4a98a341beb2149654e7c0f5b61b2d8c95798652916016c6a2d8749f585836f11e26dda1227b4292e00f2361eb198a8dee890141a1e1550046afdc4f5a92b0823244169649b1c71c06f4958271b439cec49128d1310955d415c347873b86b99c43982accc17e615d94aeff95c878a62cbe1f32693ebf2bef1af7386527cc2f9e6c233f7a01dc3fece38c709aaadf47704b59642509cc69598579e0b5efa75c0c8691f6dd2be2982dbe6c999e359c8076282d98ca60ba183816285c57892b39930590d55a94e03dbc64629b5a07cb1fffc1f68b6cb2907122b662f39429f37cd1ce6bb03cb298d9c43b4e8d70b2212675e3b5fd99f49c462e22fc8305ee6f1b1d4a973042432a90eb0d9749af1feddd8c3acae7d5093f8e0706f6116886a58e38f8fae556df575efd52b2fcb5f15ac201fa7c7b397040e83e19a65c142d8f296bc2e801afff24a000819ebb3c991dea18c032a4d59a4dd90890eef9f51ca5e7545000c8e8a54da70a39f39c137e5835eba366c5f11e842800b9cd0e263cb8087d6aedcf19ceb064e817c6af6c17c9a69009627f87cc46b271b856c215a83284a65aaf4498f7b8a6a170c8f140295d4d3269841784513b8b7b3d38c2e6f8ceb1cf415b9d35ea2f799af713c2db4c5055891eccdff9bc85c370108af2fca47a24edca4587f6ea30d55f47d1c97d089dd0c8e2a7f14a3c09d34149e7e54d908176882edd8d83bd11f564d756e36b2ebd97518cb6770d7320faebd80e9950f3f70b1e17c699f0ff539de2ca8cabdf95be9b54dae613f9bb75d5d8c9df9654fba9dec926b8153476bb113e6f070774cab01081fb5936e74e32f508684fd0e5c14a8717c9f2def52c67a08e480bd8306c84d2b686a8f99f3450781af8e25a17eb9bd795e59d37d47d2079611b4bd2aecc5b3b5cbb892cada131ee941d50a0bd15406c97554abd849d42329da85c0b8779897887df9ad97214a020f6041c17ae86958b738ee87a4258e92e8bf7e0afc410b84f3918dd526334caf9fc9c1a74f611e30743e192297553b29889f948cf7a1595bf3a920a495379aa66d0ca6c0e356dc5550a6f6fed0a6ffb598d0a41cb894b93e8865f1cc1b1829dc4a3d5f1610afd9382668d144d13a10e6ad3e73074dd9fbb0c94ded71c882732308f9d3c5cf0cf4b57ed24f97fc1c6445ddafc44765c5bd04f2f0d04217dc52f2ca5a78df6af44baa2a06d07f153143017f8eb2e559874031f63c54d451122f684e06cde1fd27368f1c470d112ec85c548ac3d5b7824932b84e898bd0d0f910bc88552d077b394ca55abfe574013be0deb6f404b83d813d4134837c55ffc2155ce1b6dbc01419c2b247289788f5d54fbd4cb144a8dca25e5bd6bec402cda702b40fdfda2849ef76d0a7c9aa391ae6b67f18bd51baf3b3417301b7f83a3bd41010d0290c8b98486d600e77d26f826eb122e037f862ca718c8fccbc5179b600291f44ffd236f7f7c30ce9c02d18304403c4c5661bf5956dc4c99617aa4a72a30e35ceb4e8b475b230f01a093be587a2a518599e38d0cf4c5e902ef1dffd3b97693fa32068472b084c99adf8c2c7d586fee67896e3879a11ad4f2a3f6bd53838011a76abdaa5f3bdd44ce0a34f5155da06c491f95cac72d11692a6a8e0027b9cd2bf21d3949fde0e67002bd5143b55799b138e0f59eb75e61da66af75084a7d30a47cbe85ec9f1ffa49e84b4a4bb12e23837100ca26a90ea8f6283541294abc71392b3421d5b6194c2c8545abe9a00919fb92a3e45776cd21e66212662c0cb409ac5e3302692e8a6a54df1a9731e87d87cd743b79db84ca7138a8bb8f3717d8795ac70e8a66c9c343aa79bcb6097e8aaab1c8d0f868f02805d69951312433b13731319615bd538be821153b890cda11e767bb09f09d7fe8af90afa4ba43dc34d4e72c38f2273ed2756757dd6a922e7dcceaee110127a759ceacfaba31f78b910e964cf1ce14359e350ceb941e8863470099c008d3ac1396675e98d6f3e8b0104b4df8295626debc25225c9608a9791b0c222c864f50a10c746e40b8cc24ea9dcbc0ab61e8f19d500a81453850b6a4006ed67ddb8359a827d636638ab1404d04743283d173b35e0e5dde8ba679b1bd81351cbd6acee09d223404a40ba2e719726777bb12047fea3a9df32b55b13679d13bd6277d72244b59bb811e5229310507f5b26b4b3977eec2db2b1ac2f1e8ff75d897b6673cd31a09ea83a4d5a110b1c4ff5dcadab51cc669207a96fbdcdbc551a458a2ab6e0db668d5938ac181f960da93be1841e08a6e3f9b1dc14bfd7c53b6c41fd14c2d06cd7d9bc0c277d4c727066a4569f635fbbc14ac8838cf1d1ccf21b78aa4cda080879f5f492535bb30dd1f3166bb489269ecaf83c301aaec36c2c6a603c6bf00729b1cb8e91b7ffe5da15d42f07e0fdd19fc854e47f98d7c56de39785db9ddc9ca042192cdd63c1087a6d40caf3b51673f9d14e5dd5ac3c5c773eef2aca2f26da5b9e1440826103c96b438aef827178ac52cf5ede3ee7bad03f1ab57f0a4720602a0028e1542c3f0251fefa1d997241127979b9394b0efeac2b076f4fde7305a5c37d1df71a828cddf34bcfab59d97a751484843a44f76414b9c82b8d802ed109b27c8e54f91ba0362d38f7985562513be91f7fb14bf4b18c00b6def4b6b389fde7232c8fb9e23a30cf61070b1814799b889ed8b21870e38594b4e455b6b9ab2211f193d81be1419511987a48334dee35e005bb8b74fe8414882838da563907d0304ca13f40f9cb7a59e3b8a956c72ab9203a98c9e997af96b46a0c7079472db104717903410b86e7f8068bb8afe0bb9a8d16a24ff7ec977019fe61740120d45edb24f360d8e9d9ffa9d6fcd388b3c71782b11e750523a9289bd72967b9cd4ff31c9ddf68fcb4177cdea460894fd6ccaabe987f5add42e07e85e7d13cb47a0314cc6fe3e43fc6f222c32439b2ba7984314edc326ac34b39404f6063506bd74467f37dfd4eb28327acef33de3e6e28eb18c2980684e526b859ff6562a3e85987722efc4829b96229daea295261751e095236c9c30525649ee688dc732e455458bd9025a648ad7a95a3d143e7d05ed16dd4a1f811d2f60e345b180d859744521499a262c22e859d8713a05ab0617071670cf60cc9c56843cdc2611a22399b84fe9296e49d836f66a9830431dbf05406d6e5267ea9974ce553a3c7cb908d9fcc95fb5c0752f0b1139ee332755dec92603a4d0b4a5dfc910065a3c29df970227ee914f683994e9eadcb18d88446b3c9f44b4d4eda08bb561effc207e98078d9515ddfb0d2d64a19f8c3cffec83db63ea609884a5ee14e68bfc5a335ad30b93f03df8bf86822ac8d060d03d97dc881c3ac02d0533142796f29e1b15dff042bebdf5ee5499cfc171f71a307073799b3bcedb091f75b86f30db2e70db5d43f026e29948d72064cbcad001fd9d4d3018ddab33fd6f8d5d66327a3be1b88cb27ff16314640adfc76404fd6f61e4770dbc40ed64f66f0bfe8cd552b8c8daf2c586aff4f976beecd626787dc20083e56ae12f940df60319d22a772d188e9476fcdc3a191ad32079f281d7d2be6ad60a4f597657000e826b75bae0bc9fc92f660f9d4b4a75d834a78137e078a59f54dbd3c202803c59ebf9b37dbb33231e33e8ed70aac4866de3b4e443ab0908bd188d18363a014b96c9104329a7bc3a4c74b41a15c359b775c643824fd3dae515e1628717d022a66258db79368775342ee5e82948276718ba93fdbb086aa39c020f822b27103ed6b8ebe947cc76611e55ba123d4c5a57e323fc00a82df12c6d0c07568796f549e72a465956b2a1881b12901c74568ce40dfb023bf75995ac1378156da7783491629beaab0d9dbd5985979b88f4b05a15d3afc4abe4780236d46e5517cf4e9a83904a4401098ee84f9b8892f284459b6bbfd6f9c90cfa853386c466998b8bcb24cc6b5ce1beeac3323de71b6b9da2b2ca5002fe99a19eff63ea44519692d1e33d3c8d79e68ca674fac71208cfee462d6c1c7319c72a47fb294e60b67466a8cf9faf83541b2862fd12b574b647dec95c7541e1065667826fe0ab3095682bdbb5018d7e8d8a7ccfa56235cb80fe89d3f6972bf2c1b7607dbe4ab68d659c3b82736d249e03655e51fafa85a7e990262c2f6df1a952067fa90db9db5e29d8bc7c37b61daacd59a55bd5a5f156f0859568fc9bbd4f47a605717a9440e20e4456a228219807b57576555cedf6f51c246ddaba2bfaaf11f1a504bbf60cb4a165b345112b19a305e12a4bd56965c45da45fb3c421801a94288bde04fda18401ba7a70be61d815f76515c081178fa45ed93cd0c5271b45e213c861986396490a162ed9d4838e33afb4f3a62f754adf0ba710afdf66a62f7e6f4fa0e9b1371492c18911b00db3f5a40e3a052dfaf3ff7eaae47f984cf6d2b6abc475fd189585fdc209763da3745ac3a82ddcac54e9120d7c058af38e96e11ee64b04b20ac668e22f898ff6a521c1a6454c68bfd1c38c5f17b7c794cea28da61211dfb1848658f7a9db87479d8bbf0fc680d628e57f0a6ce547263b188437c41ca78cfe53817dff670aa6c9a9612256d552ec13d9a48b128a12578571525d8254759cf3ba452ae91d2e6b0558ea7e6e2d4b728edc8b37d234b070bbe5c6dc6414814d77261e6883ce2a4047e6f37b4b341317c24159762cdcfa4c01192e3f151c1bd292b1c7d7d79a2126aaf2208587b185376b4031624f788f3acee8662d10460c03ccdd17043e9152bb21eaa58f6a5fb0f35f3ee7a77923e458b48f6630ea72d4c01f9b4524eb8e04309e5d9bdf7ce78eae0bee40e881513a67347247aea262ac69e49099e2a4042decbd466a629080509c24e45d02cf9680de0582a7d01f47569d30acaa277f0440c815774c7545145cb22b01dedfd40839baaaa4bfaf83da764a14e96d72a285c68e54cd4c5d76e2decf883f1abb6144514bca91f4312a1a8415bd42f653f874eef4c87b360d6b29b43bc6686e2aea1b2515fa0c15c72e051549dc67eb77a6d74d70df96ddd6471ce08a9f0b4df251f21087aac6f77c46f54de0df0b065e76033242c556fd477f19860da210fbaeb7a1b27d5fc7213bb0a081b0a0ab5d5efc84fcda54c8a2dde34b16f2a1cc618f87a1d2abbda11741a88b7b07fa102c9546fc2f8e20d5735ba97e6943ea83f9b423d150b13763dec00ff710ef943b7678c33b65e139e1e027f12d532f35a7ea278d1cfa2c46b05a6c7cabe060c739208ee5e4c5b458b8badda7720892d28160864d9a49bb679a149950e3f8bf84081bc961cbaced19bd6bc18cb4538432a54105b5f6488b601f961faa47777fbe008163c647cc4aeb44b1e5f07efc3ffe217725fefe1dd15a010412d128044ed44008ed39f2d106ed2eb1458fd391802cf0fa699940349eea0344faabb337b19cc3601ceb2394f221a3ef40dcdeecdced4760d68beabd2b37b91ee0cb39ad7ca85de7cff6690c020a28adcbadacd6c8acfd513eabf9e07765d926034e0f8e2b1f3a92720a45c9ca99a414b6c4f6e7e873f3e8cf586d99155c3aae658051408d945d5f5e7dc5cf92b4a9e088f7f92cdf220b79dda38194bb3784a926b6dc22787dbe1b9d55ba0a79c595fb69562adf725a88d7e5bf07d1d9c23ff19eb9d718a0017b5967581604d7b114a4fbd95a9ce70e411244617e0f524d1168b4b2f626df0bb24be42af0b9460961e980728f1378d13fb611e9fdf7a6729affb4bce7cfeb11bbe87867e0ea12c784666960198ec7f6d77b78a922ebc4b72712fd8a1c4ba5e090e34d8dc54c8585693f31a3b66af17f94e72fb318d15518c56bb10fb5a9577aee15af6d8191af39a818166d052efce370fdd4c8628963aeb167146646744f269608e9c03a36fc5a14f74fc6fff43c2dc86f2eb2f83ff03171484ab163eed69302dc07c643718b1fbf7120534b16a98066ead5922846b969c3ba875d266acebe567c9b3615448070bc89dffe1206e63b928982267c8be69c0ad2398696c494c58651f7fa336b4fc035cc98da3ae06d85fe9eaf7e015e2b7b993a2d7fe9a20a8816b4c8286b1b7218512b2f732e6d9e1402743f9f31fb8becda48f6fd995e49581819144e743cf0e7dfa82ccde144d4567d6aa89589ed8a709e995f8df6d9b0cccd2ceff6ad89a7269deb8ae7d457429833881d3cd2c55948af60db5eb14ec4eabfc4bab767fee9eb32dbf5c795b7a77258aaeef37ccae0dba7ddfbc706f5ad78de359df96f51d4b83c6db0aa49c260a129911ddac0a3edc802d16e374284e7798b87bfcb3e4d2fb6dd2db5f15642cf8eeda0815a515ef28961794b8f56fc7d72556375664b2f1e3f99289884a98a73d24ca7b585e3632de4ea1f44a71a3ff83511bd817a8f30e7177133e130c769ac27862b8bdc80616ffc87cd2216df40574b04e023ba7baf9b4d67d73e386bc4e227c781d6be845902dcc0ad780383f74236805d70b1b84232451ccce5385f7cc34f58cb1fcbedda5bb929211d3d013a83027b105d070c64ca7d49a64947076aadfc635c0ba2f94352817ed64e6fc28e34082f26b0690747ba65be1e9cba5256b127b19068d0759eb23e586b1f48de9a7fd361a5a85d8286f203953a67b9eb22247dd635f3fe9f20a959895cd87f342dc134ccfc81d5e385acfc568fab4e87a0f27a395596e63d82ced304b14551a3864fe37c4b8f62a71396c432a55371c057007641c00b54d313d82b4bd0e603e2f2a7dfc8de6d753549775004d17ded0e202dcea515328af79abe23ce21319b7eb7fd236b5a2201938dd0c4e9e322ff198b7701e052e451e6f3047515efe9494b5dcc5922bd428839fa7acdde2b1c33b14013eb6bf33d392a2f666ee8da00bc1526dd5b844c05908a13164b8817f96e90a1cd09e8c4c592e3f03ffd926efba6f1dbde0c2f938bcd980a033ff33f2547735e52864ed75636fe776eab9e3784d4308130a32d3d6f1539602513081fbca0118fc8be88fe426353c6aaab1d8e0858ab14866f9996c27ce5bddcd36895b15357164b8811333995275202e6feca217b0a35ddd1251790988520691e472eeee5f7695257acd3fc64e38287f7be6dcc0a8d41b141505fd6200a6f303bd8a9e339951edcb477b322e2512828534139e3f88b2bbe4fd344577ed50e242f866947ae82e07f21bb8952e46ff1cd9d99cb87a724dda1d9b011e5915cc2675c4d66e259bf5c7d4eea388ee0068d0dda84a561a07a82aea5ef46595f662ec7201af55446d51d8ac01645913252d0f58646c1e323a451a81a270f76d6f2bafbe70d512730c3cfd7d003ab6fd70db632ce6aa3f7187a1337cad6307112bc6a6b4fc98167daf625337c3ee0da1d4e4da2bf4986827364c41dcc0a8f78e8fdeec517198a362da6be0b7ff27b32813df4e2267ee32889bbca207042a90864fe1af1dfe3629acd6034a136d9da30835c870aa5d3c44210eadd6419a6098f2071842d581dfbcb654568ae67eade5fa5af7955c4baaa3462cbb8c9607279833485b6f64b0fe2de38a87ef198d58de0c1e19505c01d040cdfba87c01d4202d03fa5b1ef5ee54780d8de27e20c3027e3ceb56b5cefc8a18b37b3d9f7907dd1a0ebecef54ad07947f3ff401bbd26be7caa9f19b517f11fbc3c5c8f863ad93e3d4a58ac86b4141e143bba172134739a3d4fddcfc3a6d2fc96520ded950ba106774bde229e8836f150d7826afdde0c6a7d73d15bff16f323e4f3024a292d2726cb05ff804c79a1f24eadadbb63e12845865149a9bd11116e68b74c0fd9afb3f20fc19c8e5cdac5a8a4bc8b8ea97f9b2a4dbeb4c085de1c07005a6745f7381093d9cadbbd73479977a57414ef9047154e6b0b77bf34efe0bb7ff0ba965b22301f6ff5cd416efdf50791df3fe76ffc9057b7b35af88c8837fe5deb53476141e8f2f87fd447d321a170a23a7e37f575f8c777852a25ec1d3ffb13370a8e80480f5c92bebab0dc8a87d00ff2362c13f974a22ab3cfca43145360c346ce107e1777e81b9758c09cbad6ae96296171abe152cd7cab33baa25f05c7845d60bb704acb0471f18d02aeeea97067543d3279ed5318896652263b91582b4b4ce118e89fd37d03dd229a2b760da12f202b377bee9d2cdf270348f045ba7cbed2f1fa51209159c4819ad8207a9df8fe0e82018b263215f34492215df2b4974fb64d0dc68c4440c1e27c415f7d717f28d069af46dd262272a4ced726bbaaffff7c280ce9d721f7554bdc05f0c81f52949c1471861825c26edcdda6d09a0b29af2f69ea233f0c584064c7d6e57ecf749ffc39e0a7e6bd3e8ff0a85d5b2fad20272d25ffd6b2a39b0f66be6920c8da78e04912935cfdd19fc902d1db8cce8a31916bd1414ac7c89e0c6a5584b48d6bc727e3fc88df891965407de969f9a4c7200ad8eb5bc7a53cf5ceaa55eb12002e38d1795674ff7cbc42a281ee4f7c1e8a9573d55cd1f480b114bb60dd1f05ad7bc312f28b64c3b67adc34d65969f695295fc0deaa75c655844c3147cde9234b53cb038068d8273caec573746264f2ea5c6ebf985df38964b8da484fc0b1809aa12ebce4cfbfbed2919f4fbce20b9a8b18d5210f5433c9a31a0212ae9be8d07b263015c0d6897ca3b4129e6e1dbf8e419bc52b5022e37c5c38725770aa795ef617d4c27f1f0a7c217c1a7160136bad612167c33ee55765a6ca3a61758c25fb57d7ce358bbc976b3fd59e3fbce4f01900e3bf822863693e452e612cb3b172bbf82418c5c798a254aa3730362aec01b4aa7c60983bb11e5124324d4d0391353333539b1dc4e0340f2165e7298a46efcfe2edfaea1b3af54cbebbeedb9c7e58e05ad66a8dc2690ec606b8d88c3165ea7322ad1c23ee3c49e5864006d104692a742bb912d6aabc0c750616ea1f3d85f6a9493279ff2101b569282322a65afe7c5b5cc95cb38ee55c903884ec3c1e554f8cf41676945b4a6f8fbc187b3963b012723e8c6bcb316cd53ecda6a7915b32f4275d61f086d60a943ca6816e1ca1c60106ac4fe4129f3a57ee727193e1dc935508ade37aeb0fd889190458aab52bc27f2d67d401d83acdc95ee9d6d00edb7a83af6288394d3e468ca401285751b7999fe09951ffb7add40bd7c63fd8e800f22e1893f73df1fe4c24a8bf4ea82d93af984ab12e36a5781569ea394a9c41beee7bedf7c013858f43fba4ad763bf8a49dd4cebcdf6e744e00fe8893ac224c88a2b5add7066d4b1aab5e2a187031c7455017dfd0d19820806464dcb8aacf16503324a384091f85e51a10a41824da1f3e0586518662495917563071fa8a8120c7425604651964c4b19e4112c5a5b7124265f72c9ce4a22c6bf268edd1894157fbaf61826a82bbe3637e3086d7334c35d6fdbd69b68d47d1a8f7fbb065f4f60288f5074ae152d9335cd5b6d2f70e4ca787cb96328fea9335ba9062e18500d4fd6ca5ea73e29c56bc290c21854057f4c61d045fecccd82fb12d4770b3c1205f8303e832179a3caf71d29f84e90c892ce84dff52728fe035b277eca86226aedaead6a310cfe4f72184a783b283413a98da1b64e9bfde155d4cee75863b6cfbfd2c91f996ae954f281f37387fe371c929f5bf3cdf44018f7305357af7454070edd0a1f47d935f281c8ef962a1241ecb640f8829d4c1d6aa632a73302b99bd6593e912fe64a81d236fc16d9ea3f386f5f4eb4bcbdbada1a34a6b4f32d4e2362e2cfdb7b5d413bd59c2c9d15de605259c474f8a861e9b1f77b3afe20c76d5538a21af6646c6ec29046c2f9292a2c3baf99a5446ed1784e788cdc053b21a7fe0828296635a77fdf51d30bf9e2f657084d65fa03fbd0df06461f075f263ffe05bb091702ad74ede029050cad914d4134a377e942aa9dfb035bce8242027b4b30b3e1253a5cbec2caec8f993570d48be0fa4bf344f2cd7531a4a34ef4a944e004df12720d546e8e645f3a0854e64e032662ee8140483a6b8f3691d3962799537a50423b9f2fd8ad0c783ddc1dfc991d28ef49093f89688e68248ed27ea770675fe818ff1de570fdb7563056e125d75d65a0c48dab273b19e08def97699f98ad0257df6fccd73fc39f2b8b0fb0ee6b92ca4c0584888894d448f218c2b58dfca473610fb122f8d9e34ff76f5c2c41cdd14ab3b143a6877acb63043616cad89efa7590dec65c63db2dab0ac9036f32e2d1c8767d153b803d0432ec367899549c3ff72cb2775ea204d107a7a65698f6ca13306dfaf2535e9d1801e54f5a7ce93852f326dfe62ff2968e527781473d50864998b99380c77198b4ef1e12c949d13003f7bc91f4735d8b53dfa38e82d549ad26cb08d350a876c223945e82b9ba33c9cd2a910ad7e88607c542277c1b06e64d5f033ca8f1e204abd24d44d4193e92ba2a6ef2060ae1068c0b4f666d6b2b368a0c6681e57c9bc843938c779bfa99a859c55c5549a90cb887cb211e159ef08350664c95830ab9c51775926922c83c0274c13389175b6a3fadf91371ec870ca1ce00be090ca929a5ddc2c40550fd9849c3ad86267eff2d7e4e1ddfceed3856a7ee2db81302e082abca03fdb92fb687f6590f806db558cbb331f210938d2132d9c1fe1f5d01f8f17790962d086304953bf45693dc024efbb6f08b1d7348b2385813d0a93ad747aae14d0b682d5fd4811a2bd6ebd7f2575aa665e4568c9f5fbaf2e29f57041dfbd736d5f0eed6a6df93dd903ed44847668efbccab556255163297e827b6ffef587aff803da3b302b5e19655cfe1556f6d11e088effc1cf9fd48b26ef0165d1d8306380e351342c0bed2c39d03e900ef354fbec44da5e037a7dfde7948fcc6334bf8d336ba4f17060acc8c4f1fa89022e161d46e3181326eb5b501e35e3ce210fe1a96cce9c0be701a8df20302b419f4c79368447c14dde0629a80b1859344f92bbc61a6f3dfdce4707a9d460f31783dfe52c95d11498f5403b6fe142c0061ff0bb22ccb3017539211831aa11831a3d683b66e7698093406af035ed225fe16fcc87056066723edae3a364d0e955c423b7c80e984ae96a5b96ce80a34592be39ce718fdaefde292c89662a96d462bc3d243753b161c919f2b9e313571a0a71c917ea5ea06e803f7206bdf13d870cfcff17ce45f6284521377d86ff3c716e2f04e9edaf659a180e00e0631f213cd733406c9f4f4732a9a2faba830e963241fc886da0261f30936bc4ae13850821fa6b93efbb30c1bb35ae0ae2cf201e457c8204089eb2abd1f97d3de60a15c14745e63b969707d2530be4b34d15268366eed01346d4f17f4efdff4b5b686f5ac3291ca968575a74eb6358cde572f65a2c8739ea937f82493129cafd8d828ecd29808116c58485c5961431e33603ffd9b2227edf3fd8f8371d05a4e304dc7d4aab055bb2f652bb1c129947de0734f9d3ac609c52b55d4fcb645be01c6892f07026d6016b575aa9e350bc537842a3e0382cdeec69afa5df846ef4578ec46a214e1950e807a12b7bda350449d0f98390d9f947d2717691a63312d77de77ddfc2db8023b2eed6b0bf58bf358b7b91f4bc436c1daa32cf13b7116e0a944d682e5f1ae0138e8ceeb0e687db81800368d50665591e3b6ea0045f7831d8c227c2ee9587bc77a9c8026b4da99d906938a0852e4968527712a758de9cb44973dee03000e1f61b100481f73a7b9cf3f02a5bb0a07d61e97857640bfc7086ae835297e48396e68b81dc2d24d84522efeae26e20118d48a4940147283c0bdfbf4bbb1bf68517372bcffeda9669b3fe3dbbf1bb271ab5efb04a7b36978b85e6e77c57789f5f34e52c070d740b3b52dfb755271f761959b3c8638300210207245398844111b21b684bf03717ce312fb32e0722da8fa22cadfa3f55c5c1a56d96ab44eb36b61a857c8e953ee420278c02e5d27c045dc8f96de1a66d4ccba9ccc5e5705f79c05bafd2d0782c7543a1d484c4aa095efbfc3720131d99059342a308004ed1a940a127418b9b4f62f75040bf64d0204dae48f717cf1d0021ffab267e3cf661e4c0544a48f69407f0df29ea21e34715ac5d6fbd832f8030bad10c2d0d744709e7e534afa534f914c86035fda0ebfdcc4166d786af9b696baf20f5a79ef8c8d96f7a05185df3aad0f9c11747d2544baea2bb89ac44312487a0f865f2d11d14bdb7a3fcc960ae16680a37fe15b0cff8241348adeeced5d39673aade5b307b5a1cf22c612d135227aa3dbefdc1ea47369258944c3f2a2d27443e81acb7ebf89abd66b1c767d8daff754f11ce67d9b53c4d00552ada134471d3667f85fd909fde201a78447715f8c4a2c8a0aaaa569a2293fc73c3725624651b650e851e20b9a2b260e83902d51631fb226b3aaac2fedcf6f847088699d7ccb0194d439d64eaf364d9156723af19d772a99123be416e3945a80323dac679dd6481bf5c3105a76c7b36591de7aa55f5477a20eebe3382409a8d66089c61773fb44c3e6bd620836e2697c86f53bd959b873694bbb572b711d1b99d4c67c71264645ff95691074b1089b65d34602d25423312ad1f940252e5cdf9699d1d32e42a7ca72ca1496fcdc91c2a15d60575d473fa2fe66db7fc894275ec3272c29f15b0538127d655ce227c4ae18931c3c89c2774a86e1b083b9a225f28fdd883ee345a0c0efd9461c258ed49105e8ae4d32fa7aed0edbfde9055cb63bb1f895611b99d0f7175c331e250045bf3886ce0281c9715465dca136c834e058142199fad37787ff326700b413b6ec50f7970ce67466208e72c875bca5f68c4aa51f3c53e312f17709851ee5e2532d39e9c58f58c5b4694bc235c3094e81b5b0c17d7673b9cfe0d69ba68674f25076907c25f6509bc3ba1e563bcf053d0ea89034ceff3d723deeacd436dbe040d1860f05c628a7b7b4dfc16540961bf79019165f424e1ea31a4fe958a2086ce05c35b0e0d501d7f56d2702cb3a07b588702fe690fc761c1c2eb24c76b03c5194111aee2d5f9cda161440033a10c9250f8a43d90fe5fcbdc631477de5d93efdd19ffb751aadcb4c408db4e60eda753783bf3330cce202f2f079107944ee1ffde97c4caefb6dc8b5e116d140c9f9d2f1043af9c340152a828b8001fc8407eec324b2bf8fea577f9e479f5c89cc4c633a445047185f2764a6bdb04d9df8af8225a13a37974e14737ea0e59de496100fed624ee5b212fd949f7a85ce9b5c1d3dd230fe6e67c1c35adb805720e52977581e3944f92f28fff64fdbf3fe944f7fb107efa6669dd8acb38b8408c4da48fa4fa0827c3115e1eb92342477f201b000de43328884905ebe1bfb912b71619771e672abadbd3d5bd57f589cd27885f42f98dcb4252920f4d402686c0d297e52e2bcd193794bc6240d04d97f373f29d26d9663d6e6fd3b5724b3db88b39b1b6699d84d2a3707e01654a9d9fbd260d2547e679f1b7720087f73e1659efb1b2acbaf5325186a335501ba1ccfbd554cf9d1f75907675ff35ef9e57fbeb9d6cc517bf301b50e9368354716008f0ab7570fa1384a78e1b0f0b5331dd8fa2af559548825e444e513f3d68630f469f2dd4f78e41353be100f3e3dfbe51e15e498770df2f57ab35843c9c7de3eec33657ebca9e47e0fab49abe4f21cbcec756e2ee7670a788e0a6c3a5f60b1a4bf688dfe9aea2bbcb45cdbf0e017d1a24fb4d300451ee616f35ec56a4133b1015d6df095bb565f9d81d6b6b3e27d6adcd822848a2b65721cef1de6685f3cb168b7bf8155b610e50150fc2df71f024f454981846d3cfd579e2fee1fcc8361298c8e61abe73d8ce2c398fe638acef9d61e6009f1b5a56793f3b3e129fbf3b7aeab5ab4426c1c67b6b69bfcb96d9dbbe267d52c4dbb61ed65c25492c09d3ea783372e110be0a08b1968873a6680ed6fc9d8cf11cd4a362ef7ca7a9ef75489068a68a6e8e005694133fba4cdd018379a18706e9c4bf9fe9b0e2f6b73630dcee9f69f9c00b3212d2cd1942caa9f68eb5bd58e0bff93d6a74c54c19ec6e06630da812a293f2bda5b0001355e4e17c69c7f79b9c97f029196dcf37cb9f80a5c5892e699b6c34b9733a5f4d9b646abf95ba12373be2dff5f66d49acaae677577e0d68549ccb668c9c6a2364eadfd7529be0ef31bc95cdb25ce23748dc7e7915857341bd7d6d2d304edaf77219fce59c27d1e501f43e4157178499d3f6cf03d56e92d46692a06e40dc0a6d1f60109379de8daf84c32951f6f4ac6e03784debc173ad9c8873830428b527c4b630d9e74c72d6f760dba2b4d19355742b81f9c6f28d8fc733c5c459ecb24536c0b3795b8760178f3a05e140f40b133857768aafe953b9f33b0e446dfad8113a95152f1baab7348a0e70bffd4c09e29f488a56ab2d42f4efceec37e386425fe9bc46df2f27fabff7640e6f233cd663516149e693fbaa91a9f0fad7743b55b8c6ae740521a7afed36d9077746f0","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"442cf83c3e1be2012c52c593cf2e64b7"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
