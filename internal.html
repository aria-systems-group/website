<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0045af85a748c3e777d627d9878460feb42a461436555f24ad9879b9997255fdf9c10d5baf1559dd171f225b205743f484c83b4dc50b9ab2ade886f7da4b6d8238e5d5aa32364d57e3c2b13bd47e8bc16f1f3d9e51979f524e8199d56eb726e95953a12722a4db426946fe81c09733273e2c4316acad9fd2f04f71ee27a486176c9b000ab37350bfda8e69aabbae5a3e6036e2cbe04675d405d12c0188d5d5c7ea0d9ed2d67dea0c6c76672a2c64f1412c2def60b19c0a4fb119e5b06ad2b7f7a64a7a6e6d82eeeee2a6a242e0661acfb8304bb56adf0648778ccf1e6d7406df93359a47ce44de3db4404e925295771226ee7b11cf9bf8bf3512ce29547dde27bdfde1b81ff7fb32f43bc5bd3f4943337071035917010fb0f4a00d791aa3d380fa7875d81e053159aba52b0d1253bb528ea95256ec9c0df5f1080ad947746d4ae9c1b4de8cc3bead55f702d493bb1ca27bee429da7b0bc05d9febeca55b1c74fc3aa8c34279272b98ce2d69abe19b37920a7c84f5fe19ab00e4bded3625f59ca4cf2f0d676f9699f106f51ac982d67dfc29ad14a0cb2ff7168d7adaa5374c5361def9c68dae571b601513fc9d18feb16d10fbe8ccda5ba78a9bd8bd9530219a3dccdf2cfcd0c05737592089ddef9c3b0d1aaeee3eb42674060fed7d5cbf279b56e90edb0ffcb7e1a3b6961da9e5a4488bce5f7b9506290cef725527d0594c07c30119f7138de6e2343afd6e7a93b047249a73c2af17ca9113f6ab9eb3c93f7c88e2218bf641b5c5ce35db0f6e3187e337a08e8f01da04800e74a4dc1522d89047e3cbec3a4031258d6747936dc260632f3b457f84abd0cc11fa65aacf3788a82aa8c053704c1e4b78975f336d1d1ef7eba2bd2526d111a3521b0faf19db4a01f003884240ce1613788a8436812624766329da2779147de2079425801f5bff2bcfe40fd0899413bb9fbd50e956ba12924e0571d9fbe974230f0eb8ba897fc5e66b06b5eff4e4bf2d25e92cd31dd0e6b3b6f6b2575b21b5fcafb2fdd7ac971ceddb5945e503f4ac2c3f77ae05944c62e581e24949339d1e135ae6fbe883d99a8c44b5e4d2b861018f39c5b50d9ca84628359ae4bcb1accfd355f0790a1b62717caa8956661a024e4087285776b92f00ebab3e7af3134cad725241a254c657044fa4467059a36bd5a2be828e1526d66b9c94ef8e4b87fcbd1a9574dbefaec0e0e2ed59e673a072e773176193b0429d0ea29372c834690bda76423a69651b2dd7a8f01586cc9488e5ac0d500657b317f52cdf126dc44519d21a6fa6165e1721c44d7585edc2df5e7b659fecdea92b2c867fc5646c4923e2877123056795efbdae25f9fae9d16975d3f8b0aface4aac18af714f1a51d6a28b32adf797d524f0ac4e82862ae21dc44f5d42bb164e446d45656700d39e28f19cb553a7713b7a9e76ae3a71d9196030a16596ed2b50508bf2d50669deb4126ab98e1631c727e6cb1a4adb62343beea0fed60b59f3b1728bcde542576c10f1bd3174c118ece9bf053b2426af1591f89d0c12eb9287d0f29eba239d00848b2821f9a08237227bf7e44c32c1858ba3f105cda9358a0eac4e04f88aa218bfef4d9e18f3b2fea2b9a5e6aa174ec91123bb588e31fa1fcb6ea319b86884be7aaaa18445144867a4d021b6b3182ddb82b615de0bd94cfd93a582a48d3719802d7eaacb71221cc86ed0a9d1bd2a316f27ebaf054e1476ff06fe34e8e945fd20ee16e935073d5645f19c3ce4c4ce7d4507d358c95d6f96af6144bd50fa431e481edf58777d7aaea3af4c7c281af341ba97565ad9731b515bc2bd30685b216f329979f27b2727c84cc09f2a4a679b7c2636bc4d364363cfcb24edf5ddb4f3e1a178965925bb9a1427ced43b3083634956de005c009cbcdf4f7ace43a892567c4b231c9dcb0402f4cc7b389a594c596eba4da6e3e062a97623d0ba8db6402ecbf210f40a1862f7eac3276130667ee3f6d9d194e9719b4a9e7dfc1cddc43644df702db441db27c492963840690f53096ae77d7aba843d929237e864d60f12dea9b169b009e14374ec23b108da63abecff00fffecad4d368ec40a6d72b69ceaba59afb327b529315d568f44349349d941acd330f24ec286d58f3351fb1a99f5ef6a96bf3eb6d8c0f00bb1d4f123f69ff7062a167a57192d6fafe6d3abb10f9f6598c5c80026d979a8e463d451bf97c859d1bc0374700753779ba7c0f916b5a2017996b37dcfa00fb5a2d564b72ea0a21e1ec3194f09ce416d81971795b4f09fa577b525e060cce60c1794c307623d962b6cadd30c6aaef6bedb4285b185e09f2e8fd4461e0e2a108576a0ba94754e47e41e9a0d0e9953b02d3b084e7fe6d95712ff7c542eb498d0e3a8d6f5f02960eed047ceaef9da916f03e2156d02ec1f1195e934fe3b9149c4b6f31823b16f31fb5c3861c1949ebbfa0cfb49054640787b545c7d0987f037eda04c7c786736e53857d8ebaf678d8dad0b113d02f8df7c3b97d84abcfb267853c540731356f774a4b9561b3d26ba9604c9b7bcbd56b1fc2021d0bb8b61fd3b985c6808dc992981af0dbdc4ee44898d99a5725833dfc1072fc03c44cd7a8a01836e27b7bed9949a558b5d2e335ce03dac28a68a783fa668174e647aa277b155fee5f3b5b548e6b5984bf102539e69f79080995daac91d7c7fff66744cadbd254ea3635ca56e51ecb91b233d14c03258169ae6caf4abcf504a6a5acee8a34d5d0738ccc84a75a5b6bc15134a22a6ea593c5851c7086403357cb985c880ab923db1bf4e5ea544fadebbe9810c53ab549c2d85633119ae0b16d4ca1127d4d377cee5661cf0392fe746d80e482cd4523c204ddceee2eb9e5bbece2374b67556fa3bdecaa5a4742218f684c5bc441b4995ce5963520e26f24fb9312a028f5cac37d27b2dad43937e0f530bb268a6d6899d0a01ce3ef72dbf80381d1089a2a9d6cd1aa39d136f3a2efd11adedd878069776dfa8525c810ef917491c5fc11dda035f874c2e94b8fed158e92baab017c8dabe72c7ed3468903895143fcaec4ed23af3421f3413fb291c0ac19194ed2a84c28867ec4e99323f16d819d4c13da0a65043fa44f6138573b7642af346d73ec2014a155ab6af11d44c5bb0fbb2c3e197553714adbaf393d6457e1ba4e1dd76bdd06bbb7292c636fe1ee2e4c83b0b1ed16bae2b2d48aa0a4a21661b3c0a16d7d67a5f78a44f229e944071521f7bcf048705ff0d6748a27ce4ab9f56f46a385ab2a3ce3740cd797908b3f8d02061c1092386f40e2fa7fa387c2e520c75e3d34555b04cb9791ae0a6b797b5773a066091fbde75132bcca86c10681664a7ea864a8e1085413b348e2840eded0ef9757cd8eae618d6f41593d5974d8d07629a7e747f786d429e88ad18095b7b8078ff8d388d4391cfb617c8a0414993d0f6260c43b9dcab12a2f7d36f032586352841c708e2b442724576e1adc01b9daa86adddcabf764c94839eaf4997f6b848a9b9e6f89505777217a427a4fd8fa1f40e6c74cb1e7e4537d24e941c96fb48b21ca601105f687f0c50244caf48ffd44112e6023b1b9b3a00fae1c3ee5bc84a7d2258a4222c7d6b0a1ea973756ff3aa3c64f867b8153cbe750853227dc9fb2e8c8b21640073c328bf561c8db6211e079d1d1e674c8147fdd946006e2d8f40d5157e44e977d82d1c7d0841e1f651c109cbf6b517b74374b1c8581144745674b819f11e57bb3f9f132c0790ff8240505537e5382e79e1dc1b96c06e915311f2b66f89de7c9076c05d55ca9ae0dd938394295f7ff5c69f0e0153039455a83102cec1d8dbcffcec6cf373795b87cc5d475be0c3b9f68f8512015b983961e71f6133356d4ca90fd62f44b955e96557d3cae85a558fd3b2535aeb39cfe3434f19c2a0c93e6ec9cebab2e150acaf2af225a59595545ef65dc593c71538de1ef9891c085c4a07b135faaa6f14dc22a3f05a9641edd314724ca719d59aea82b62905777bd698a2cb06bd64beb6a598c7adc8f5bef9dba937d80ece696c673971eb543ba1401597cc2aff67e1ea79f2612cd0720007982bf6ddc10ded3f01f619ead84c8b78397a9a79e7bce02fbc0986b74c92c9f177efd35d54f90c744f20dc482bc10ed37fd5e0c3ea61b52723f998098e834f8224b3951ad24656f5c873a3c278a5d5f32588c122e42c3e56d0af51cde3861aea73f149f281588bedd63a0446e8d8467e03d66ac5db4a024e70c6a5ebfa359fa1414a01444eb40dc9b687823eb3e34e16dbc48015ddee75ade52fce8b323a90a619176472e11df227291fc3565d8156e535746f9a0729040ccbee6cca2d963cb2b905b8393dc2a7d427c261f96943dbfd914d8c2505a1ae1868b3afedbc8d50ca26d343ed97fc951eee20488ce230e8fe530500cfba5ab462020ff8e35273d2014300fcf41de1c86e03b5d208fb4a7633c9ef5a645268622ad9871d805f47815935e2b402c8dafcda78f918ca99b1ed0494d0f93e428001cf20281a9a05fdb7c3540dca62a4ca81f295b86f6e1cb7fe551542698725d0bc371e71576ac19e4bc71dac006545699d4e4c4490559b2b13b89e666895e71f61bca6a17fb10a4e5803058a5db6a8574d5a0c4a73c39199c634e9d47132ebfef641fc62d3732ca8ae92ec8e3ca80c2c16ce13167a1a6e887d02862d6933b039cfe6aaa4a4240a8d2dc524b83b3c1d577ac2bbeab2a694ed3bdd2d9ede4093e4aedea408db27a0a36823758f1248fc4646e259526c5a9ef8f1ed20340b04063d5e8b6626f0809dc01e4ae25c165102495cbd0a6103e6a264fc0de30c9a9fc111a4951eadae9ab8c0a5f4c27cd302757c8878e0101ce51875c24184a9b333245c43369586ff02b17cc2a048b193e8a9742d911328ab96f4d4cd06ef8b2de461f0f07634534af6b3916fb51da53245122c7fcb37d51dbc9457998a504a33fa0d5685be12aba64c4756b1d3d3f29e02ab12c12208f1e07770309fd972df9cff8d26d87933cd59fd953baf2d066de154c53502f5a9110c9ca39929c671c28dedebec413500cfe1c3fee0e26d724932e2f1dfeccc7196be9131d4201882b421c4b930419b19a70e43af383ee36ae3c085a842a66461aa4184e7c2259567d6af5f72653cb5a01b695bca47436a061bb09ebd42229bb89d74f011b8668e5a7e80027070855c50bc438b39dc06e6978072a4601537eab47716d39c08289a550b64d42faa034396bb213eb51ca0b368de8b3ad65e5fca360b95c8a365d142a014e776e36ac839a2fa685fd80e273746c1a565e223fb42a8e546b9e625da554f48c7421075e69a5b338ed0190f5b14de57bdbf08d6b3eacf09ce3f8cb00910137632609b367b782d1d0a4ef7f36db60af1203374e22bf427b4661d40f872b936940fa90263f6785b5bf74ec3950ce771c70c249e6df5cd581142be2667915774bd5eb3135ca22fecd77046cccfbf50104f93d78bbf44076eeb442f16fbe539ee8d2b8f90a0035d7d61188a5cb0a4a06187e5910ec5294ac1b2d608cca87c81263cfa891f55d08b8cf38272ada9fe33560dacf55853c13d10f7e13747bf3981c30e93ebaa6988a3f258c5296c03462cdb67a105cd313425893a888b10addc092aabf15e32f698b35a1af35461aac0d296ecb2e1b3b8ec967268a2091ecfbb0b6e03231f5bc1659a59b45faa6f150433f88350a944721610bbb652116ac63bdd15024c2700b331986c8de2d9fd9f9be1ea74ce830153b35963860ac06287d57cb53f0cf0a16c0ddd81efacf0da5f043ab4ec5795434f4d44952b20468341bd70e583542621f86ac6d7d83ef45a74d7b88ac4ca19a030d5feb34598bb10dedb8d32989f9bdbc1c5b7fa5876841b9980688247b994b2a0ccf886f81dc8259409cb7230dfc3c5431052b1fd616fa3ecb7bbf11ead682a5c886f79523c50818eeee74ebdab9e9b882867b1b12caa23c0786e7e267e067a64a6692f28cc13cd60b0ac1d8198e30ebda8d668cca36d39e18b560d5ae9f3cb100985cb4c354d31fc5768f57fdc55d8676f46881757927c96e79f9fcb5b0865caf0e76b9c79086868c590304707fdf4f1ac4379de3c7579a1bd6fadbda29d22e211dbcd227da31b204d3efdb13a773884068f05762ad409e6e6fda9d185b5e52b44c153b58846627bce2d1f8e97c975b8743c8a253bdf3f3a13115b52b7b43f00599e51af714faee6abee34970a7d950499071cab21acb757b96beabf7813d882e3ebe302f31e7e13d9e770dc311c4eb6d2a1e5610a6a66e4df7ac53688a1d3230f685028f4bdf04a73d128dcab7d58ddbbed08db476ac3bf5bc8a40e1186628d1bfbf2a8cc3b5fe9d0ebd4fbecb37c32059249278d327180206f1537f887366ec71856274e96174e093dfbeb191027f465fd5bb9e3fcda4ceaf506a60f00a3b5ada4ca2e2305cc6a50af3d49c32f6f8b6dcc6e2a930263815e2b17acaeae563a2aea876d7902d8fef57b5641750233f5c280a7d7807631a24ada405a1250ca41034f37947668165330b409fb57ea1472df3c2be5e57bb8d5129601ca2e3daf120cc627772c3e179d560b4d1b0f357218dc5a29ed7b7cac71c9676cf883d85960f0ecb86eac24b5dc979625a14ae4eab8b0e53ee042fca007a4b2b5a607938c344fec2884c0cbaf1df2b8a57c54454f3700ab2f8c2b4eba5402b7bcb911e0838c0f04caff31ec2dce3567981bbf182020382e4006895c9d39d354c715eb6a4ac79ffc7abcb06690cbe614f365b7aa80a0b2c3133bdec7834bed7bd0e0ca4f36e3bee7ed532c100b1fdbd8238182aa49ca5c85a98899f17f8a2eb45a54644506dc38cca50882fc79aa7c5a858dab73838a8151e9cf4a614c1e7b664627ac8db9972ee651ba92e44577c9be0440fdfa081d27e6dc12510251c1a02c0adadee69862dba52f06ad5a4c9434d6f9eff9039a8efb140aca0d399e8c6d50947b77ab5168e2c57e622fed1894ade7e7299237bffc3c50f6c0eeddeb2cf164f63bc179936244114ca5327f0702216fbe1ec3683584bcf1663b55c4dc4c5d00aa9f2250dbc22697cf0f0f3c61ae2a2e6b2033e920d0f5173b9e20caa318123d4c4588e66776648120877ec5d29a59af50efb455915d4c8d97a8b045ead5c62a9cc762d0ce36e91ef190c00bdc1a1d3259a772b7f4887d67e440875f01e4701b820ebe26d09dcb3cb92bd493e25e587c3f7fd1231adb28524127b8c8ebd83e17c712c83ce55e4e1a2f6cf8cc7eda40785f2801a336e5739ad22b7fc2d8ee42ffd399d29cf03716bd6c41c230eda5fa65fb5aea67561a1da1a3709b045c63c72e54bf6f6c5ddeb4bc6600ab436fdb7346b5f9ff0f09aaabb0077dcae40c1b5870c38f4ef6849cb2aa7ca13de714af4b08c3e18684c56d935cf22d990b40cafb15f800d509af477f3b677c301aad65fb1751877b4e16a19efef4fdfa995aa09f2e2108dfb3cb0b77740f503b4f853352f094e4686dbe07b2dc57d4b00ddbfe1ecaa46208f58724017bfe3ed303408d8d510308fd69017e77430994162dda140322d2057ab003a21ee2ad62c0d6fd5856ba663fb469f6aa61894b2975685b1ca623e521e70ab6d9f626f6078694b26c021d180a2bac5d46f6a4bb9f00540d45d1c423358a8c20b3655429179a915d6f452164adcf44841f59f425aef7aa9d533ab8c933703e994e4f4a4a0c5dff9feba03677c10e927339c50e27b0f8ceec46697d89cf4af124b5fa797b80d531bce16bfed1e26dd2616577992a916471e7250204b1a77540b594bf2a66cad4364858d2d5d592cb44149cb191753f1e3a752c41472c435ecd59eeb46cb948fc90d53bcbf1d26dc459582d9b1de4263e6a44e55e8323622d1840ba3e8662c4dfbcd0e934539f3dc9f316274f609f16ca3e7fbca1eadaffd0496bebd7829b6554c221b06b4f2501fe929b408b564f21c61322f01668638ce6868860010b9511cfb2c05d01ea61647b6bc26b64537f5e8780d5121f5902dc26940ecac47d09a423bd4c0b3560f07e5d59e28598394ba21de09cf61cda6bcf566a168dde6c14048af8cb41cb7da06b818d9350b2ad077f7500b49ec1ef88fbb3f9813911749c4ad0331630d9ef741bad6042d5b9dd8f8c16c71aad1655223aefde2b831542f447bef519de7ea3c7f25f565732791ad19f1e985be90ff46955430b6f033f7b55900bc89827ab886783047acfc557a2032621c910c9e0e7937a98f0474bfaff86b50da82d54db9f9c1bc81620798beb7e5ee86c599910751e5014862b8c17000c45d5f9fa173879e97c760660329f3a3cb69ad01680eb67c4795b909aa95ceab4450e07a1a34fe9ea3c9829adee76ba3df6569f4cc5622a39c6a76ec83af4b5f7c28f224f37eff21f3c718c13f3bd3a0b7cda418f0d8438940adaf076db9c185da0010c236321454573638e421f0383fdb15877c8e9200aefd0fbf992b6ced59c2645521099db9b35992310f7462e0ed37cd5fc90801e852aa8150b5bb4faa221d249b2cc663d2435f5d48dffc2a8a2956a6e6d1ce6944ed666e4e4580ee8b19f7ac4aee64b004a82c8c89c93633a730497cb0ef8b6553395f712b16b61c7f52ef0d44a6070df9c200c467c02e7b0dee8f014999189854b6af3011f86935094692f0df6274936bd236d06ce6ce677f02a80d3304ce7494c2e00a0f778b998904d1fe3899e7e7dd9f46eb77c7abc1945e6aaa2d8a71befbc5655025de2b6470f1eb3d07945b7f2789c59bd6879716026ff159ecee24cac7b4a07e56c175df36a6dde8f0cae7a3eabcb985d16c65b0889ce46c3a6d20fa1777e7b307a918e616ceec67f1ee57d7b95800dd682684c72d563c6c081a9cf6d4df53e309beb9c7d823102697db2552c6b42bd7f5cbc68904686f5854bfa30555644f208bb22f592092f428fb464a32a0dbde48b7497bc71b24e828bf074868c010245d9bb30ac5a09b506c0582982960ba79deba60b3653c723502f030f9272fb5be360be735381328bc029f3cab6b3fa1638106a7d7ced1f90701197862063e2ffa26f106c9fbfb03136c36f97dc4b4eb051b191d35ce9a853700e89dc290736648470cd588dfa76a1d092edbd4f67625cb0b1c20b1054749bf275b6b57aecfe3be2333b28108e66c2fd0baeb18f86860dc6a77bdb44e45f6f9197e34fe9bb897819acac996aca15074244d653c34fc4b59b2a28de9f480ce2b7495df10fbe3eb8b4a654aea157b3458759654ac30bdaf4b6caa0d5527d40b9f50b85efaefdcb95947005559b4f986c49a4a813f140bbb1795f4a08dc55fbc2ff75f02d61b266fe12f3ce14585a2bd4502e8296db053d148cbd1ff5c7f7762661450852edfa18dd311d581fdad6b4281efd73cccfd17e6ecfe24d1920152e9ace7f0fc7dc318e8dd1d79f7361297ee844ccf1f3ee275fb41e3388c82ea28261444c0e2a7ccccefb89d2031b671c7d3b0936004730f980140294f34649ac32fca29dd48af2abbe3f7faa9d0310133d04a7b4926289750a0164afe98b0cfea738fa20746d15c89126404e4528c919927cebdfbbaa8633364d4888a22b5ffb2aa965c70bc6f672184bce5f59343dd40d8ea8dcdb3aba27fe2d8c2000c4ebec9c071d10ed30680683e145af0cd2cdfa112fc2a78ecf993cdb5b64c878a7f0f20dbefc84c83a54340357e6d2c1c84a2f508fac1cd266fabf1e997737920fafc1a13a2fbd746289946f1102015d3b13dbe1ea5996a9d7079eae1178356c2a16d7ccaf439735a6225bf6934ed0520874b691bdb82052995259c651a10a799550d77ebbaa8de7ad0900ed5f0eb851c840641db0ba08d3a6e694e10c734c6760205cd4f2f48bf32364e281600ab7ee6974a99b495b4b3e1071d08c05f4d613d585e0e33406ea799072940fb6a339f2d8b89b66fdbcaa09a7d65fe0654d495be01b8df0369134b21b01c4a25dd7d7c2ae2eab44871eeff00aceee853a6cf6a9a2980682eb3f665291793832f627d4a41b2b39fe4003e37321fa643b0e9f5a01aa4bfecf1e8da14b13bfe9bec1af0a96d74fd20c3f177d8851ac1585807b75c3f16c7f9efcc7ebf49f8d567e67f7b447cd59c634b8be8dd68d4b69eca2509f0365c22ec2a7e7220d76036d813614fc4a7377d5f15ca73dbf404d1d8f9a935c84dd3b1d2c6c5b2dc3b0312bf3a11697a50ba9877b11a46ff981222d182dc93e9e59f4fb1fef19e95742370464c9f5cc41f79efecb218bcce3a62f5cea9dd8a70b7a33c10235e1701c9314855db08e7d521228ccd0a2d1fa75896202c043d8c0574ea94c38d27d85c614e6973e9bdc7bfb3b7c4bbbaf62d7fd075959e1c15d46da83feea4828a9067042bdd2b0b037b4f5a87f64df98e459fb9ad8bceed951901b7f6193ded850023d1ca2c523417496c618c0d8b5d0e2338cc1ffe2d52902a4c758f45ae3617dd7a4922c4ca6fdc41b1c6b4440d9228dff3eaa7548e43b6b023078ee1324d203c0e677449f486568825aa84e72d6008b56fd4f9f95bd0e4bc55fe6910173295c738310adcbcf9462cb558c28895346b3980c06f5447c53a76f6afa16ef028fcd194ff5862e912fb6aff272198c957b1a190c1bcf9b11d8e663d48da92381782fe699b5c005f4c55b2f5d4ef1dc5b5026a74e8ec7ceb0682d5cc65c5fada5744420acc15124b7f6e541bd46753314bb2276edc86bc008d636b7034061d6889960eaf360a9633bf22d86ae82c4002cdc58fa980cf0f171a740f0901e3e5a0b3d0c77be74a9230664ecbd1fd9dcc3a7f2f7bbf43202c5aba4a625adeb109829fc785cc586837c9f926471f6e0c0eeb3f6ac97608bb6064fa52ece76c0a0c7f6d300b423f7cc9e51da2d7ec943c53e1285a58fa15c33b8d9f125df41ab1c6d80dde8cfffdfb4fc900c391a2b9c12de71d1f7155857ebfdabe4b30bc4d657d6079ade227647ecac9e6b8825b9444210b8b6d0ec2dcd49ba5fe76d2dcd7882515be4277402003ba1258bb005e9aa7628645ad8ea6671cc2988f3e5c57885b94a9b727b696151447bd3b3d24cb9c7fb63951944829824f042e51b41720bfcac54d59ede59d47c90c626807cd5617c3f97a4603e3fc526fd28d41b7d8cc8a67a3a795540394c3565314522a413089f2f1f3e0d76f7558d110ac269019e14db80d5c4b367513fe35ceb2ffd9a0f512557c5b485f4a8bc9d42492f90224bc4ce4fd26891255cfc5dcb2f4950e471cda4e53e47302109ea2ecda93c78f63cdf191b88352a1bde52a8901fff3654297cb2a514b540c7c586b5ff1205835891580a116689691545e33186a318e36b91ac7fce802919932c36e7fde8c3877e6109229acbf7bebab4fdfbddf75309bcf7e286aad69fb06ae12aa7765fb18fb89e06e6ac268bca5b41d9a8be5763fb5dac787652cbddbfa16e75b73f8a63c83713f0ca537aa90c16a3ff952f52a744ed211d0077b096f4c9af0d7d78a32de56fd0544c84dd6e3db110e04160ec191c3493122a918c55c1be02d3f3299642ec3ad39f17b472f646625225682920c271463e1a0db692558649ad6ae2f3b773b128849debfbd9e295aafb583dd9fe0c7b4f30c28fd13085eac002655b43d856857f7cce3939d3ba02128cdb35d91838e764448288d651351301fbe12e7a6fd0f07a2468f02776b470dfb6440f332b85283538f30aa55e3913603a36d146987d36090af0fafddda6617463c470e0fcc9addf68cf98224e1a3d8d99ec51faaa58ed1dd61dee400b52c51ed1576de53fc31174af117de94542bc0667994151deb9a48b5b43c1fc2d23cb9a6fc96dc4e4aae8c2e59a464e8e37622f3895c7ab7d5d0b15e59e9bc6bef060d81f6d1cfff1f288585ee691804a1b0dc064e6199f97553f7f2911f71526b4160cd5bbf3c98c61acdbf3c9f31e711b5abac780ef9115e35a93a4e2c5c22a534aa5e107f388cb20302e2cd08c8994c6fc60a5fa6cc3308a3ac8abcc1d229ff643a92fc4451a63b0f9321ec361311879f9d90d8993077970ec08b5fd6c7e6d2916139592cc137325b660f5907b095f083a3c91fd9a845c469eb6f7e05bf28981d80b8d9a9fc413e1e640ab72e96148e5c9fd9c2c53829b196611de11f8bd8bcbafb45f7c7e5b1a1b5911865510eecaa3588ce8d5ce18eaf9a8c849393f4ce7a88fa946fc3aaa157c2fa102bc7c5451b1ad3624e33535d3376d6d47701f2cecae199b1a3a53bdb2d433a6c9e4dfee447c18926868b0444a41d82eaa6228d8743ea849c8e71f63c6237600f9b9bd829af06acc0d2deab49f76e0758470195b93a25ca2486168d34116cdf632de55e8fbf46aa955ea376173c5b5c9c4fbced177c710d3895f8d2e5eaf9b4296ef4f9a342e28788d7fdad7cda37d60203cc58ba6f262f8d934b23c772dfc2e8fc5df96bc576154267bff5ef2ccab40bf418d66369f826ebeebe1426bf1935d8692c8ec85dcddbe5939e81274975c6c75749a6b1b93152ce3c54168586f00c1943124d0f8f6d6fb5ce94fc445eff66a4ada01eb0e73c3cec3437bf75f9613324f413956c6caa60dc0b350320974cf435f18643b422a3d993a572863398ebcc533c2f5b4d587da9867e8033ef39af8a39a4ad35ae5d087e4520c46a7d5ed452bec12e82be6b15205165bf4fc258f935665190a65d695787740814ab06d6ae3f32f79649b9ed9a4a5f4f6784a7d6ac3d688ce5467a12afc32c16dd6998eb5f4d913f1382c29ed506efee8a2069c984bb8cce0e0356b437962d5ab92033ab66f8bbddfe72c0ccff2e8bb6f24beecc24ac35960afee3118d969a169f428ce564a4d7532b454c77ed387655970cce61a79f615f74655de222d4e92e5c4ce15e8e4cc6f53287a78ed277fccbf6cd6be42e2e437b934febff0131a9db6c1c4729ff9164d07d6c713a7f0074804a983af0fc3d255fed6debef968dcdaba18b785704b4c46e0fa0b6fad9b0d64caa157e90368fe6389511a0ab9b4e810569cc0cb5f41617797074e8b9fad578cea8763f28134612b9f241d922ea93cda336ecab2ca26aa1eb1aa49c86ffc31623a4e9b59ca5538a0aba762f91c67f1db09f40b13a7d528eb645633c1169ae584fbd6984ec6e34e5f694a6f716b6600888d87b28054b28bcd097b77f6e5d2992404c58deaf884756933208d0f88b478c6a156c08fa57f7a082c44ba79d4f7164b6d80c69e3ffd5ba9e26bcf04153b897706ed4fcd958d21158d5a371ffd86d3f7bbfea685ad14153bfccef5a0b94bba10bf7ae07e79369c450e9c6d5f249b7ef4d4d9cf7c27c61bbdb23cc25e80c6cc7c4b7570a4d3ede0f16b441e94b1c7a127a1710a1a47e2544a85117d8a1e17500ce04774b5c8c0712f66b7c789faa88963a140ddbc3b2aa9dec8fd9fb95647cc79d17828692820fa94ebb9437521d4f3f974e218b7ae19f0ebfaa155665777fba1541e52ff2af8e7d788bc5260fdf1dc6a98df9477298de55018f4fc3764176afc2d69c3b072ed4d28c058b412c63e83d73dc9570db98df92aef7c620d722637a8c75b6b54f65133f0d4475689b71c985c7e8d0c2156d94415bf9e258fdc51d307c79239a5bddce0fd7d9439d7a3f102c8f657a5542bfa8f423be5cc0561ea4cc39a76d39423a2f22295a9ac0d1c6798e824e81545d83bf9eba842e3928b9a6ef9aff6da26eec9348628e38522465d684c292991016ebc7cd4399904325dbfe40f8b39185f62f044ea8aaa15fb8e12cbe0ac4db1d1c06600cc1ee2e9b386d4e0a192351a63ca0faa0dc3f575bffdd8cfef78c894c962b18bda20d6f655937fe680b11fb5e7571556f6ca8eb5d8650084077ee7e5669624c12b1eddc72bd8e526bcd8a6a1a9a0f6bf1f746de5547602c490fa2105ecbac000e5ba242beff584e16be14f4c5e301cbdae4ff5119a6415ff2e2bf30598e1e75453c047f36235579098d5beddbac3209d27166ec8347d9004c177deaee5709d653b03eba9a0894dcd58320fb6dceb789b692e863a47772fb918cabeb5780becbc304a25c8901a0981cffd2bee2ccd44a6df61ed1273dca611eac74affc4dd4218954a71f84b3de82b125142114239282e719e7102f5210b92fe99bd4101e126d47533258a949394c059c2078b65318f19376b4544eae9e8daa83496d645371b1af426acd78d6ffcaadcad17f133d0702ac1ae6f75ce25a98637ada3ff914f4d5c3cca64a49b9aa820088ca061af23fc81177f6c3e00b4b12e864e3520b306dbc03261ed5c452c1024f3d44863db3c564f4bb46360fb15e6c44789057dc2d77087f871e7e0fa59511138b83cf6470b90ba31382b427ca95509e6368ef5c4407f4bc189a25490311371b22f7b725bf59b4d1def0ff5560936de6cc6087ddadabcda59bb90ac5b2c1fe3690879a2ffbdf150541b64caeb97f67ae06c08adf956c2f1187cc2db6617c32da78d197b06e6e8454addfbf99b6b7cd54d76ba47a059908700e4e7641da4558c3e9d95c584b9b07d352b17171f2b0199765c4c3c0c95c3279c5a1fa1a813d6ed38b0a71a4e5b140f3515cf1fca5712e8305dd53aebeac9b93f6b2ed40d5fa161cb5c2f5fba6f7c61a373cf57de40830cc00ae485d77dcdec0af074a74224a5c4d6ae94681d5b13d9376acc6157d2ba91daa78514d458a4a94bacd2e832f85413acab3b9fee48e303b147f5cf51d4381c154046f17358d85598ed3c324bcadb247608d06183dc0d9c4e1461223e69a40b37516dd0c4db2f967afd2cc521b7451c90494212a6f8bb166395e0c54cb0cb18bef503c2e71f1bff486cef76c4d53c6bca504a518859e890f36667427fa0479e418e5c966795fc7930b92484157992876e78b1779a97b04773ce7294e90b84c0cbe5c95a89b7457ec8fe4ee4fdab832e8567fe694c86da5d5949ed977fee808dbc0cf497ae03489b98bd1a41b53c16ac30f3685aae54ba3237a9cc0e9c8e61c6b0d68466838f215baf9a00d8c35d96c12cd815a2d78cbe699d2f0193fffb70b66ce751b3cebce3d702eeb8d1f451e80ff9559d9e80f926976ff0610a5b28d939eb805de1115cbfa6027d97252a1698bb7a2004cb3c8ee4efdfabf23cc2d0c34f4a5d504aead7e788b6179ebefdad462793cf99d951399d9f9234046528d6d292a54cee61069e4f840e99ecb6f3156ee79d14ac08a88d5fe82b4375671e702716cefac6eb323fddadd4ec0502b3277213831d1e139dac009dc047ea0068441d34ba6f4bdc7b73194ea7f5f5e9f2c1d90a4518465435aea07a04e0f570a55728d0ecf85871d797d61b07b8f5e395636350f717866548f91ca01e6ff44353160db1cc9afacd8c64cd2c6c0f2a4a2be85701188ca4bff0645b5a23f74701a9d0aacaa23b4f29d85b10ad9be892a41c7f62fede1a91501d48542f8056d4c4c620303624ce7449e0cc99bac75cb8b0bc1f408640f28dc139f396e2dd237dc08de6b3baa2c5f25225ff8b23c76ed4e87f4f07df17dd2e2ea59d493ad3b261f4dd96e60b280fa384a9edce3394dee9f0c2df534829afed4d5d29e5abcbcf3173772af22273bb807264dbf53d8208c42af7c9d2cfca826d68f9e30998060e00a8fccce08b96e4e2d14e5dd5de5ec3839566c9bcd9aceb37e68d531f1af92a62b8760bd469710be437d3761ee4b48a74a0d0b90514a102f5db38b5982b913377ac6e32c82c915db21a77769b62cef42d661c37e54b915ee5c35b14e85797596cca7486b6c1a52ae33e98065b4a479bd411eab2bb79a98c181ad1c154544a7e2d9d6dd17bf639ee8073437593a95ba438b998cb1979387d3305fe533fa1ca39d9c7027ea847c7c26080e8833408bed680af6cbca21aa27ef9e810a430c101dfcd17b9fbe7dcc0a2286d7c701d1c318fff85c0b4d2cc6081ee89c890276e14121008a7c119711fafb0c0dc14cf6c5c73f535eba1625b18bdb792fe5b116f2e16e7776eae7b9fcf4dc6ff37be9f108a7f4970c161b861f3cda289a1aa69780d3a87d904760f8f3d5b84dce89ab2ebd0674a0427bc266e15c48bbdbe195aa0dcf37cbcb71e3708e2ca7c74b2b383c994a95177f8b9a383366bbf6e0af8fc4ceb443450b1e61b4b11c9e8c27235bf7c6431d1532a5b2f11e4464aa7676f3b7d76a4463e054f775bb5fd5c03dae2f910dac0507ce7086b8fc0b8b1196d43fe64b49bbf216b8891c9eece15787c09517de8fb7798a977f8f38500a3efbb46bc98f29d00d1fbcc5e4a117ffef73d25e33da24f8b44dd14648021d482976c4ea3e4a460f2ad38d45af4e12e40aaeaef40b018ff153acd4d261c615cd0ed895b4c77c98443edca8f5bf8489a9713ea0b96ddbbabbdb369b0d284c3fa13b92668846212f4428e4b37c3ecff691830433a4ba0339b40e4ba7f5819dcca40a9bb7eeb2a0d7d7019b24a138d560f89a3d4bb04bd2e74e5548d364dca25f7dd586c6a613521edcbc89574cee073a2721bf93ee4b800bc85fd45d16242ee59c563f4646d474a3275a414fff17acca5e0b96f7cfed909946c48ddb52ddc35d6d15d98ecc569ab7fed0eede71220421488c53753e60f98fe693de0206ff8aca47e42a4b3bc857ca63398eeda3317e8a28a0940f66a97a6f5224f6cc8cb34b211b7c66b43ddf37ea7e0c52b6b232d9462f5dbeaf872e7c85deffc42223e50f2da58407637ee7c2ac2441c6eb9d61e09a071457450bcf62ab4bc6269379a41e618c7e7612c6b746354cb44bf7f80be2f9f6a79cc62457fbf971b919e75b0d99070e4b123947a044adb0bd6a00b4600e9cd533732e3f04b21cfeb5d62da37fa9ca6db2a44bc1607f8feca6805e27e49532dd17b76e303bef848a56cb182c1ec0e8c7c372214c44864cff3beda7b8b7d6990a088c3ddfd1b422809da7b57175c89c2439d1e97ba99dd81db69443697ed27d513b0611bd2f25a9b949fecfd072e06097c1c36c0ce22b198e1f65f698768e3030d53ed1f0fb21920c6ec8cf2fb09166a4f6667f309c413296780fe53676c5062208b0dd2391ac5b94079306ba21d91296756786a28cac408199d30217ee802100e2434a6624b1e19161fe94cbf1edbc2f55fcff306f5a0f54f32a93eeeb1f70ff4af4b77a8104c9a1c45cfa104b67fea18820de88995524fab1aac3097c7dd4defe1358553301b395ead23aa0136b07288b4be753912382e4bea368a451148a8374b194903230b405f1f11117ccc3642003d254b8aef936afb0221eb3bfad4634b509134d80b3376f140b2c076d354a0faee4850573243d17993b5f4e56ea3efb5ae88ca8c65e26241dc7dec32beea21bda6d8dfdc666d709e490cbbaf07c125dbc080090ab72d33efe8239b90809ec69d21eaef7047b4083212c80153c044d6450dd444eb23cf2120899d2f250fbded5450ef98e0362c706e5b041820a1a80acd16a2dbb25818d10cd19c4676a0d2cc585bf86ba2e9b24241348e3de20468e4fbf0d9ee7ca56884866bf0fcd39ab8970fa7100ec6daeecdadf3a66d79cbc7b9be6396586e7d1598a6a343add78e39206711825625f1cd6cf08c218196987ec8dfc9aa027abb8f2189c43c9365d938c3387b64949e17710b014c8e0996662792b2bb3ff797809ea224c2001bac6dae31311f22f95f24448ec738cd00de7c999f0776cd9ad18e6580ee7826edbd93931c9f610b15d92c4a20a764013a36349d39713d87ca7118c5debe54c92b5218b4c279f123e2123e9bde014d40a5fe3bddc61a7791780f4e0ba9eb8277742b40a72785aa186655788d331fb2fd5f581c50934cdfd8a5343a852a88cd3ce1056059467ba618ba2a41495f984cd31914a25b58b093c14c6bcd13e3d4c2c5b8b8bd38592569f4c7a23ba01b15dd1e76ce21c7ff148d05a67587d51d8e18b1ee0f11258345da85a46cad4993d8fff1202beccc4978f829e7581ea4571c3dabefcf17cd00bb189ea153b6f35d54aacdae2f5e467619473718501376f67e92b195675201a22a54da187d5bcdc9457026abc1931540925a239b40817ea45af2b6f79a0bb8c930103ae65499130fda2da9b6723dc67ed7ee4cf9d029ee39ea2565fccd066d439295c824d0750c9ee2f7554f97c45bbbebcdfac9c0780c6f397f704adf7b9ee718964312a1fbc7dc5e3e620ec29b3a6a7d5dbfd5a08245f36e61cdcb79e06c450258325697aa96e2e390dfc49cca5a16941588da61023b5d2ed39fcb95b4ecc1212fbe9cf6f0cb4eadb084c9a36b02b9a4dd10a6167c10596b6c0e1341807e5b43981e1b0922a4cc00f1c4be8007637770426a0b385bfdb537a3bdb8671f527769f36e9bb3bdc62ece96791375746c5cf39af1861d64767be72c44903eef376051a40c2f06a2a43a28673cf1d34e830e3944e9deecdbbd35e748d0cac38dcc0fcc2e7cf9e8fd410a58798c1d6990512d6c22f54834cd956f4c090650208f399fe85266ffdc39d2b4432b9066722d08cd709b84707d6f3e7c9b078aa8bfb8185d4c9955d904c29ca44a3a555e21ab126f74c11bfc54c2d709428cfef6828ede98664656bd2508a65554345c67b67ab2198e886b19d9a3e7852eabbae10c2368054f336b699376701117712b954d43576e01bb87df6387a1fc6c175348291154e69b98c5004bb72328e026bfbb0039406e7b99f0d9127a374a6bdbc5cc6dbcc90a9b8d05056edcdbc257c05a334eb48fed7a4552efbdcc9ff5372d40b2632dab0a87315f6ee96716e1f42a127ebf8f656a0f7d88971a4a2844fe91c02168f277912585bf715e5540f16f4d2c9e37a4d07a403e9d2d0a683c9a9534c366a7789f26f1a2826e5a2f8dd3d2e04a01476bece7f8e3323b6cd0852044f249a7089133b02f22ccb4eb4d9ff03c7f2129c456699d0e9f6973dfa0acb460bc758e093f728e683fbd0f8eaf59dab1e5fe25b2abc0d8929647aa3b999d6aebc8785df4efdebf217c603e6d72e4188c9be317018e8967c7667d686f1bdfb9ff65d3717ce685b759eb965b976b8aadd4228aaa03450c501f2cc8adefa2a0202af9f084c3c32344356bba27b4012b624f96ea331fc5d4c178f00d01f02543dbc6b4dec50d5296eca7f371058b213b41fb0b0ce55dcb970e0a23c1d7414c116586532a41561e81356d4cde1e5d57d84e111b0c1378aa5ffdf8e2b2fb963957fc9d64d78a6f053d51f7e7b0c42d8fc9b0dcfe0bcd359ce255d1983abe712baf180d29d4712954949a5417adcd7e9f02b3b68d1f91ef254ea7a6843a92fc4580b997c8c3a1dc916ac0615c7e400079a3fdd41a0acbf9282568877459bf376bf","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"4ba51029066f1b32d92d38979f95169a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
