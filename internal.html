<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"92ebeb7441800381e78337bdc00856f03d8c09700df407b5892866081869123163cec5f8bb8b22db0b5c6e940c1bb0dc3e7d21f697c99ff4aa221eda4843e2f8c6cadb1cf63b2c8a08d6a3162154ec40c9115da9dd077173137beef019511b84e3eadc16793698a496d0af73e294685490d8d162a297e23310684e0007bb048835496f8feec3446791a2dc51107f3b971898eb1de9a859cbba7c810d5414001c00a00ab885151ce2f94c3161917ecec8d191e75f8468e5d7d5bb06661cfc69ad0c0805834d296f9e3a3496ca988571f724850e8620050e0221e32a9912eb18c4837cc5f50424fe1a02e9c02629f90b110a58e584ee4634f849083a2fe3a8cbc4651efc7e343a0ab4276b6a8f1c8d12e0370265ad55082bb03a7736575cf769f8998781987edabeea972f4080b0cef57dca562a59c14958b1c11f84390a2b226f2a8679ed6209e7b03dfcffdec92b79d1443fbd2eae46b4c4fc4ba02ac8b958589e36479110d0cf899a8cc1b20dd529aef597dd25b02563591e88e09b87c525f1aa62271c7c0e72829f87639d4027141c566ad1308d69287b04d7d55ab530aa7156af23fbe5f39a2e632583e457c0ba3070663b9b5f94c49a1abf51bc1bab6c8348643f9d9e35b23f7db5560651e25b80c47c79f2153deed44c165d77f9a3d33b0ca402e5334888d96bac0562e116678c9127b0e680302289f6433aa1aaa6d33b6e17ceabf3698ee26ece1f5fe3a757e4d9cfe3576cf4df40f112e802741b48b4b11bbfb8fff5c0858b79ffd14aa0874181406f222036a43644b25edcbd595eca51d21661cf6115332eaf7b1140805f6a7537f89810f5cfb59c9298618de21c69ac1ebe92799889730b8ef2bb5de15dec71eaedba45ee258149a650b09f7d540c11c9def49d36027be415fcb327cc1d7306398e64ea68c07a879b529e1df80f7b9cef39d1e2b84b155647613ce885a8d8c6293fa88f0ba4b3d7fbe1875bf451023a04e693238c9db63945f2dbed708f67d22be8d09218587423fcbdef32fd7eb19e661cfa68f938f39ba4e99b91737883a75ff2e61e40eb8f7f90318571277fa6f26fd158f675cbd68d524bf772c36ad2005ddbaf2cc855d8ec2e962c3024baa6937bf355e4c1ebd738aa8287e78ab091d2b99359fa079e5d2aa344d7a897d08fa5c52ea4c845e31f97704647dfb143e860176e92eb69ff3b6e5aef00a49d47df75e6b5693473fbf7bdbf5d5b8a09698ae3af938da7e3c7b61f8ea5531114da53fea4c23c3681d57181bb5e57f8f9031251b76d45e93973bdc410ab87d4681fc5d6dc928ceeb4700c306c8bfef17ab3ecea37269224338edbabf47fc09543653ace961183c079e2414ce0e648e47ab89367538ed444ea034941146a425464ab4740600149e93cfea1d3db38dc0e11949db3f01993617a27e5e228ef660d3513274b05de987371d01faf46669a50d250c1346021d4d2f515ec3d5ed4f4c0df08a68dcc01438f7d95f6ea47175b78b17805151fa1d1fb93314e2d91f036b96098d845cbe4347c028c9e892cdbb4c431401ecb42d5b51b323fad6a48cdc9cdab779a8bee4c650218ab12c75b903ee3f91cd2ce65e778f7749d5d769a87ae126d113ed8173036fbd5b4cc88273a944ed528285332d49c5f035aec5eda2d9de0af52100cb9c27b3d14a98a32893cd760509083a0beaec39bd620ebf3164d5e323b1b98ef1c4de07c8b956b361affc43e71cdab0924ce5663ee8394c8f0997a2b76e8f4914cf58bceac2f74e0dd5ee8ce7b7712688bf1d89f0e59a11c9c5943d6eed91dc7dde53fb9d83f9c062c502a7231567cc880470a10c024de5ea6d5284304a567b4d7befe0b9726c2a2010ac945a2966ff30197f795da1bfb84bd904d962dcd4a686837154994d1ccdf7cee7866687c42365a826926357ec1864b8cef019e0a468483587f73ddc50cac046f49059d103bc17995b9dacc980b5830c004fedee877ed0a4537c5b8b747d1150944ebd35aa1ed48be7c905859f62262f694ed0e14f5ab46643ddb1986c427e8518fa45698b32cf0441a7cfb6ec4d788ececebddaa1775d06cf62550af600d3772666cb4841b9718360e49ba98e54e82f46abc66c672935e91f7f8106757c16893e87a557000cca28071b95acf54157424e249f825e8febfb4c299f6b8d33e567235a497f8e33f7fe173c7a00b1e8fd470da1cd90f9892337ed902be9f2df57e266baed1be83d96085e6ab5a2bd940825ea5e825c5f06c80c1b0450ec23d42bb467a14ae8d61dff6d38ce6f2a22a9e3e84cbe589c4bdc89ef8cae547c08b1eb402cbe61b3d732c0f77efb536f669c30280fd023edb8439f20ec9fee09e5939120fde2d832c364cce9b447d70b0a9321536d070e60057e740747d2389d4fb6e78d34a2e0018fa6d0b087534325f0ca66d74783494420775305c1dbe9f98b6721540278594ac1c01040c5212cb7c090e5579c57a370ba28a77715cc2627efef41d305b74d03bf4b8d6b54f777b2ea733453e4ea26fc4f5d56fca83d252396ae3a153fc5823ecaa3cb3a64569d6f34aacaed695d6535257a929b9c8ba657ca8d09c69a0dc8c6eba081e0ed5ce23b25aa8ec7f11b8070d7ae935f9cfd035b553074bef69c479ae6258132901a263a5206dee3edb3371e4e6da8206c628c741ae089364014e97ab81f3c292f3f0638c27d27349939214326bef44dbf6fb4cad4a4873f4156723fe6946462d0c0729bf3ecd81f34ef91c0b8d440d33d5e6bb7efde51eb7352c787ed7d3faf3f4907f388f41d3a8823016ecf9b8bb58b551d8f916f3d63977e93b24963511f16e3d31b0847582310a5c93356d4dac64bb0d31b53c4637202103d9cc440f84649f84c50b6b5dcb8835a8ca29f89e40ebda20920acfdb908991f85e732bbe7654708e59ea8f7cab1d5ee1e068146d3ee0ac4aa7b6c5fd97ef9e43763d5ddc14db482dc31d66c9de2081850dbca182807dc61dd91b9b9f99e4fce9615e8e9cfd1efba76f091e3a4055c9e9566d666278f6e5cd58c5b73a48cf57b976db9d3719ea110835c9ac4c8d155a6ec6493cd83d98ec6b160bb51c08b453d2ebacf444687abddfef14cf717d334cbcd6c881c702ef29c0cff0274cc1dcfaab5ec4e5732b6b68f9f9832a746670de824f73972cf4ef6de935602604ae15b7add2d59a5c357d8133534f6c72a6f7c1ca2993a5c405e55039b5ff5192183addb67d15b60659e48f46a6d6f8e50307598b2a7757bab9a6fb90d2e32eb9ffd4b11162ed91597921a12f341619ff789c36da27a6e92682d675036d4e8bf10f11ae0868dedc4db8d77ccc35f541f1ef0427c5fc080e5171ca651b19afb62f480eb5b1572955f258df275da5e56875776143ae1919f976f47da5616d424bca2bc21aa8d9a80531be4fd1d2a544547dd0b64494d8272ed6b6e4dd83b89e20eca31edcd61ca3169cc731bcf8d95662ad80e508949ea5c7a224852fc48dbabd8dcec109358818f3c9e65275c0b3095238073bdf512ccb25f10b0be18e0abd202725a3009eb28a2fdc3c58d5e7b73324695ade40f8945023816861a974208fd97e24865f01e680eaa46da00c25e909612313b6546b5e684d23537dede0e49483c1e508906399d6186735e90375ac3d0c03cdf1b8919b8f55e307089e7bdc99a1f024f1c9d3c3c87bcb02fb5bcec6b2e1d7b40e78e099480100bce3e0c8e2809a59b9b5809f4129477a513cdfd3fa914dc1bb5177f50cec024719b8ee3b9755f48131753ab1c28902b66846e7659167d4a3f8f0b86693b6dac7818d695779a6a8a75e486ffb1c0087ca4926c4918b51ec99d1e7eda4289c46cfd373c8b0cd4b20c53ab6cbac5407e3698f55608a92e9c7f3cc56576a17e676abccfb4e3048bfca247cd9e43ace98832a443f7ab2f19bb7926ab1844d8c1e29c9a213c8d011b65bddf5c5d315756d61c1852c71e3243de49532cbc3d5f1748a789310b74b024f88f7ea8315849902f776cf01a6fec1adbf4e0d295bde2c591edff1429bbb63981616342ad4740a42ffd09c133705cee39295e677a67cd2890d1f7917c32cfdaec5894139427669bf390d7703b20aa6165ab9f50150acbc7e491dd71866fc92fa529ea2a2a34c7a4a38ccdce2715bd82ed50449037c51cb0d89727bf1dd7a2b5901a47a65b9ce530320e531af53d35296368a5ef0b94af41d0b3e6f2f42c2fbb538d2684b5f0c2dde5c47bedc8c25fa683f46424feb61f18640e6a752b7896d08c1b989723eda584f6a4922d99443f3188fb75578bbc43f6ed23a0239de12b94f547230a685bc76489168fe1a2f2702eecca5336b0e0872e8e07fa4c96b6ed24f57142370433389bbfc3c3557cfdbb1952613faa0782df54093fc49d232d80a2a46376e8a53cd0b18ec7333da2231770aeb3c41b267e1480951e791f715930032bf58c0e31246aed0a1eebd211b4dfd1665eeb5d520e61d83a03058a21cde9f35ac833988cc7d3dd5c1226c86ad090531b62760a3071825d71d63c5aa5c37110bcfaac9d25616b10de1f0a9add17ddbebb90c5fdd3c4ced0e14c68a855a9c2131a51fd2c0c0097159b5dead94c9e60d44d99981caa10f6abdd450844b213cd6cbea0aa36d5583b657ed40a8bfa98b141682e105615febeb4549fa0945d2db900fd7add7b63c9b8ded5c4454e5473588e780715cfe6795fa1a96e2e3ce1efd72339a52597c09e8d96b1eb3020686b1ba5977a8dd35d1619447b2c17b6f9dbe09cb45b4c9eea17f64d4a6fd56140dc7e4deead6241dd33d3591901da8b04fe28f4f1de3e913003869838680bda5d1ec4516e1aedd095e110e7ab37fc4008c66399d83c8e8e760fd0871f88a57748c1040d1f2da2eafd235a920ca1e9a2008585bf8a584d282ec6b2e382dafbff0881fdc7a348a44e5a1458dcd6e06ab3455da2b2cd93f2b7336344f66e67183b53150f0e32f933d3d4d58538b3fbb3c5ff0028d6e710f51ebb900f32d3e86747a4cd7dd34924c1fc09d2bf8b04454fa644f0b32cf4650a97aa00cde34de7b7ccff675eae8304bf6544c68360060b9fb739aa3a05a0f4f94dc4ab25932e013f1e1560b597d71b9ea083acbd34c5e6962b21b0a0224cc41f5a602e5e14ce84d875bed2102a020b4d268b90b1dee7e030ad902d37a30de77f29f6cbb1be8817f55bcf7cd0d77a9ebda5240062cfb4f90062e4340ce07bc91da2c6f3a616866f660d66ce79b2e6b75bd171ce3a51589b08997bb18b476be8404fc8c44f702dfacf1f40e99d6f29124d63c1fc17f6c44931e56d4087b52a87ce5f70a2c8f6dc359a8c9ec8c3545437c3165454a846b1eb2a4e119cdc47795064b90e7904254ddbfbdb7a62fb5896d889b49f3dda2e66ecb685a5313b2e04e2f3f712022ca70b9e3abf43400fd35720631573561bc6aaad509fee0c0462d0a862252e8969dd2d20a6b30ab9fdf8917ca9577d922795a57f044507bcc461f6430d4d1b93b937a4740a08e06bfb06b6a9de4d3ee5ca77105dd497be7be5882c6ac3a4b5baf51ae66c3813ac0eed227827cd6b4adff30680079ef39e6ef8bd90b8c8b7d702ab2d0ca320c7e7846158d676e3193e903605a0a13aa936263e088636a2f587f2462058fa33f0820b0142c5d86d4c73a4a4ca1e74fa403aea74e54662c8795b655614fcd3221069ce0317d3a27f5f87524d55817f2060c5eb7f92806d02c3b04d9f3b994efea84cc6ff3a3ab818aa3f8c77646341e672137ab2b579722ce1c2f6ff041ee0bc76837320325a84edc347970f4b977c04297d14c3543cd3f05004e367fa2f77a1ab2d95f2c2d864f11d19332262321519aacac3a461f4267a39e99c44177a86082a7f33e71c1062ab7ffaf1daaa2638752fbdcaa3462512193b8b20ae18abe2eefd5aaefe65f9f262dbb0a7d0af5e36e4400e59fe12ced68f3a008b341c1c94cc8347cf0bbcb35c45e5a65a048db6ea644bb77818a7c11e6bf5bff0ba566df6cbe2d6a6700d8c96a01d146724915dd851ef984d90de059ddc4e680b3b7b081d3d81ac29728763047b701176a7d5b16b876e91691d56a56625f9021204ec57ca0d5986b00a2a52eb4a723de35b275dced1bd46c5dae5e4d1249fb9e572ec1e8808404d5483ff7d2183f555e8530a5bc5e006e253e4f93c8fe86d6bfae1cdc9fb6259deb12a7988eafe5b1c182564e34e8ea4e51606346eb69936b07ad1ad95f374cfeebe6ac3857885ad75c0eaf580e631e431a0fce62fe408562fb72e144c470bf459f4078afa0b9e042f708e4411b2a6ce583ce979108400f844f26517675a21e902429ee840061b866f89ed15c4cccc7c13cfa357c70ab2321c55dae9edf3bbe07d647180b873f50cdb748e7eeb314f0a9c91bf3e5d085f16d6d30ec80d9cdae7dfada68aa6407723e574f85b32a49542a577758435aa7ba4915e1cab554c6d241347bc9d80729516c1b962b035bf503436be19cfdc6b3b966bad7e3f5025ba938fc166bb71c5c513bdb5a5bd39f352df5a853a0cb884c328a2f1d2a31efcfbc274801d7d41ad477d9e59d5fdb6dee78dc371e2506dc58896160778e8fb865e9e9cd3830aadd2a9d2c9b82429717103689f5f5e27ed80486475e160d5cbc8bae5668c291f3165da332a57b105d6157b8b4da434f6363231c0d0d34455c9857eb317bfb9189c0c0309b4ddb95171cee6a635e432299d52265eef1fd09de02fbb4500f73bf02d152927a40ccefc362807ea06d79bc2f09d22b9707e9271b724517c545bdb1610f191ac156caf2f7640856313c718f3ff0a032aaa69ce0d3082188d55eb8012f94ee80121cd5955524eabb2ed0a62d70b7fb14917cce2c3d552c35b5aa8f4a675b7bf28a30d8c195a79273ce6a3405955b14e86c8cfd4e98a16932e79f8233643a2dbf19165a70d6f5abab20848dd3fbfa2b031abc163aa7b2eebd4fbb5cf8b185902034937ae4f75067ddada9cac8a89bed5573d3cd210295414ca71faae045c24a1412bb67b8b7f9f468fa71473bd0ddd17fdbe7759e0bbaef9abb6c1a18ff71098636e16a1839e9b675d7eb0009cedcac87d32ca9540e2e457a08e2ef13765adf1c5366d3a124760eb7638e3a907950b1038bfff59ae5e348cd5631c02a92c44b7473233eaec0f1982d76b837fc96a546d4b92cd6784498949a8cf52f8a17361ab9ad7d84f8f26af75e79d816d2b6152f2fd54f8ab026e59fc9d78a1c6193e573a451784fa2ab7ad633827a49811be0ce43d9a2e87884c21df2ccf3318d227ac0dd018c4177eb7dc44a3bec26bd7685400c61b08d68e5c7076116134221505153218ac4cf4bb4780f26677e908419240704d1f36eb34dcf3bbcea6afb2ed5bdbe3862f8a32692acaaae754af8c0a0bbf9ecd4c5a9bdce31db485031d312888f1decf309c3a38113f4c852c15df0ef91d84b97618e11c7a41c16bf9a9bb4546a1c4f105e3949185653ef8cd0ce4f1fc4bd2184720640c65ec31e1de627c49e37100f7371f5a18b35bd55b9164acdc38311a1c51f9c4cf6093ccd008131ed61be27c729b2fb266801546a8d5f5946b1c2bb314c9a8221ed98b2fdae48e20a72ca86ec4fbeddb342b298cf809debf4dffb04112ff7d91e6bcb73283c4acfbe4872d0f9f464cc6672218d517dd2bd3637010eb2e4b05be346f8e3b8b1cf765ac4d34184f2c45490795f22b37f8b3863b4b7077d9c555e720df6182efa114a044a5e048990aa0c4e5c515467b438896517f3c892008c4b893dbfeb7d406db0e621247b97d8fae8356a9ba97602d3066d55a6e4e016ced49bb30017ee7d2ca4f1f8cbb0dc74681603d52bb4d2531c6090d2792602034b9b55763543bf67c370c75cdb3a7d524442f6e1df2196f43268f50e18ef85813c74ac55a18973c9ba803a9da348ec3f1710de4e5de2b574a7ff1154964ae6daed361d426f783c45c2445d1533ea72be80a915a1339a466635f1f25941584b9738106dca13223c9292d885af33cb95c453e0cbff8a732c9d625a88af8bf76a4d7584cf6cb26c5d1ce5dbbeddb42dd44eaacd18c4337269c0553159137d511325700aa2f6b53e043f9e88056337427a51f29dfaddced6f51d19c5e1ac3606fd47ef7f36a438a3b7f8d36353fb4bb80dfc4cfd05dc9caf7e1e1b710b5cff2e2596b06040b8002b54da03b6bdc6e5db0c88a1dd173928e3f7f1b280c68cc2502b40b3b1d53323882d78c3b7568655fdb41113dd5b382bfdd6d71b7eeeb485ef2bd5e203e27823630ee4834b1ba55b8da6981733ce1b1608284deac473585235ea9a42543d47ef5abc6a9d2948cdb39dcd57ea44dbf5fce6d7f0f31880d7d0c7214ee565e18ee5b0a6dcda6ce9aa308125c58678c785f64a00e73e6b092f1c5c552114d5bb50713219631c93e1550bca08833f359418c4449a8bfe003e49cf23a703c61ea853e7d0f0aada5b5f1197bb70555e9f9495f0a3d0e8661ba8b613f61d71c4ace5739b2562178e2cc4c12d778a1638b98d518cc3ab3399ed8232e3bd0cee28fea618b3956e7ec3506f83fc2cf4d38c5d0fecff7c02918a4df53cba4fe470589859f10d421ec414296f5ead210a23b11dcd92b53e872dc0deafa5a7133954ddb87768feb23667b87b7e08c9545e591ac89fb3295ade55eaec0101c84c3c88e2dc394ffdbbb2df1c2a0ed1cd74d9184c3f65e208abc5f6fb51e62414cb2b8a55044f9cdf318c74d3e67c4def676ba3a7e0fec285b6357d0081fa02228d42625bc9b87b64362aefcff8c446e2a7b264c31fe4324b3ea4584cdcbd23fe98b1a9a6e1f5ec613abf07c72214f43ba695f26069cfd9e43f1ee646b435584fa28a2ac699b8f501829f28cebe9f5509ec4db7463d8194d17b1dd31835556a80161f6ce933696a0b5a56f9465a528a9ac82b36156465507b47964c569d67feb251e5bb7e511addeefd07bb23a5d9c9764db19a05839421f4a25c2fe25be81609b3514524aaaedb8d4d836d3d53998d9e988760b9397e5f7233811edf9ded6c418af41189b785dc235ca3cfed0d9058a0f7f1b0fb00e0a3be80c0fa824857579dc9e5eff10f89bf69c8a1bac355e49257bc09c93227579280353697d32efdeebc08bc5aabfa6e0fa35ca0b5e86f355e225d4da6bdb790fa9bda96dbd6751df79602c643f8a8117e2fbbc53869d4974934cdcdb791655cd19011cd4f5729583879bf9a8a8b0bbd920d8c68f28cc6c5783c7ef99e0f21c3d65388c60fbb73d1b0a26f4ba8a619fcbcf517c0c6cf0fc6f826397bd64be663f2a6240aac341b4cceda40eb0d97aead21ef8973f9487c8341eb2ee5b73630f901d117d536088978b0e69a76d4d486948731aeed712621fe235d989311cb12be644ea53c15ae2706c3c74ddcdd4e8ac67514feb9038bb96985d4d05e92b88995a04bca0479007f5cf8cc30ca09e6832c3584ac8a15dc5a7fc842f8568f4bdd7ce9a0c646c62718e02076ef16bf336bc41c1e4f079071fe2cec5155acaabcf701ab74b76ac5608ee3c162404b33e961869d769f25807ae7ed556194d1ba26d230b01b9333b39ec8a48a9ba1ce9e32fdb91f7233fd8f4294074742568e9ecc6faacacb6b71c4dfb119949ad2febd9a7feb24d908f0e110ffdbf7afc80e7a0e103a1b7d55ad42b9f44db835036feb78d96473f70f3c5a1b3f6eca93764161e61fc78cf9e927a46f63643593c570d0f4b07c34e33a2f79d60ba66941923ce8c0237fe74b4ff6e0abc5f4f9db8e773127a3ac9be4fe40276dce7d58cd7e91f985e5b94be401bb1dac172f6a6ef238b947e8f4cde3151d2d8bfaacfb8a9c569287d9d103dc2f27bb833203012c2e279eebdde9c2ce2fb8de965489da1b8845562605938106c42bae901ef9dfcf960ea9e4726689b37ad5d372619e6ca37da150553cd6b4eac877909c36b327328b23ffb79548ee19eeb412682d9e7c2904dd4b77c55576511bd470e1d12283e2d3babc67fcf09fa044b23412cc7a1f3f2cd56baa0c3a1a6cd98a4134c2a2d1049c07d796615fececdd973eaba5aeb36a3891b3cfe38b225e7aab8a1f78b206e64369864018cedef70643a92e316c11c35b58fbcdc32b97306f92ed1d0df1a6cabdef3ee98501d3d4cdb47ac6f7c902035c52e2b2887173694d421fde2c2711cbaab23f101056d34ec79a7e80f9afde0881f4b80b3fa67051c2a4b31438987118e839e78d8e78205373018994d1dd9aa393088499a41a2da4626c605ed1c8489bf2e41d15813e2854693912f68dcbf03a3889dfe419de609ae10a9a6a05e56f2d483cec72e9efb5ad933eafec5dde79bbc7dd04f9eed1399d7443dc2980a7d78c0d0984a47fb4801a7fb492eb34f5ae2f713e57e9da382ea1027e457c77f942395a904f3568c0253fef5509e59bf012a4637cb6c1449cf616e16e7b8e6c0ce2fccea345e5207bf6137f7b4c29ba9fcc816ff2c4c6fedb4eb55f87482a983dbd56be8fc3a06758bd5cea246f5c3111b53af513c654bc87b5ee68139f3527b1b07ec02dc65f1b2292c54eb8124aa8f5663ac776db197966ca56d87a7cb2356d75993383c59e212ab621c48a69949644d8fcd40f1365a997dff565b40299e51facb4d10f690ce7571084174c0736ea3db3d642f7e443969c71148cf297c247f12f33f5d72f51e2452fa7adcc66d06dcbb3f9ceb187c356ad0c373e6030120d232e1b9b16780378cffc8d6a39c9a36e89bc599fec533ae7f612556ba8920c794329dc5026221e28da7addde7aa1f27e63315f3a91ea7600390a4b131617922511abafe49db8b40af08097100241d1a737ddeefe07f720daefe90571170047f97ac0675a11457c292466d4e088718aeb9ac9bbe3d100e4756c096c5432745bd0ea2b2e355c61ea2655b60ba8a8b7328f61371fd460c7ead3a09f2a943d0d13947261656db7589a061dce71fdb2922ba0da6b554a7e1850c6dc486e5b1db775d3b76fd3f611673887e7d50ad52c62011cd48385b37869b3f29a84f9d16b9bc23829ef1c30ce884ac2be07c1be3f2e70e09d940730c1093439f41f2ebf20a412cc33f6a759cae02dec82e2a11795d9f170a857e3528f092cf9444a400706f2f341794fa54426f00c228aa82540f1235f3b19d9065f4daed3bd8febcec673bc3879b0f5efddefdd9095ca26c86348d7af9fbf22b0b947352db8ea56a61dcc24925963ca33669c957f26d9aa3de1dc856929035b2df9491a24bdecbaf1d9e44cbc8cc19566306cc5edcb090bfce060f8655b520bd9fd88ee761501e6a44e6bc8f79d37d381e5d9dec81a8850091f77a91c63079c52e1cc6f8b5a234d4b0c8e9d559fb604b40f53f8053ed8532270bb6951d9fdbef37782a9a964ef259b295e5b8a5747eab6f16491c60f29f53b052bbdcae6cebcc13dcd75cabd8a68fdb4c0b9c8e5d865539d8ccf0e76ba8f7e7315cfc5aca5acae1cb0bb4231784865eeb8ff98ecd5066a5aea9bf1579c0312fdc9edd40687b0533fcc5d655541efa57ca52185253b48b112456aa71aa90fa204386430986f9c6a50e0fd59fca9a6da7f3a4d0bf54d18af3d383bbbfddedaa6b89034574550e714a6835b56a891c2780f8cd54373ff4082dc602904dca7bca956c4df7f4252075c9e54002a6c29a37ac68e93f6933f414f9ad7ff8383163e206d1b94297d49116db83709b3965f7300d8d9b15894fa3f66ac7743bdcd4e731eaa503e8e36df6edb9c98c88a2d7f19405387f3b13433ac5f1161e830d9a3962a49d56eea5f67b30467f8a3cbd22a1539395a0c6f9a1fb345ce4febd889bb2ddeecf579638949e7feca5131fca57a67c5ff6bdf53bc273124e0c21f018adb4acc253c063d34b1393660cfcaf3fe62fa88df948c4d7c46ea8124b1fb96e173e18734f371b0445fdfb8f00de949aa356b4ef69cb13ceb5b756328601f9dd9ed3897717e4da1ec349725023944abf33ebfaad656f7b3a0fd496a13269e8c4e1a3718fa65fc0bfbe903f9c2a5ec57493f2e28dd96d50eddb72a4820f84d0fa0050b3da09e6cff10189b991dc8fa7e047f307bfc199b7360a3b7c13e7e1efb36c1c729ddcb9f74dd1a6631015ccf71ec9d8f827d8ad6e9600d8262be1186a1eb9ceba9f8b39941b2f64dc8cb02557e468ffe0a1575a145a82353926891a67dad3916178f9f296c0271ddf34486aef877cf812888b2046ed6e10096e97685a29458546d6a379007a90fb6ddd9b53e07e20c4c8a95672a5320f3a87135a5ed25f9e52044d34e55b414e53e510f9929ac5b7bf5d3d74757b630beb0dc87ebd5e19001d1607d2c3f5691dd5999d1c889a179153635a5d856fdaa03abe1b33f1b86951ed1af1b2c8dca973daef2789328265b9b85051e85608af297ee8c055bb1860a001e0691615540373befa35a28026d07c976f8b4af905ec04435f1297bcce3051e65b3aec55522c38133d49f345dd2038c81fd0ca87f035dc249dfb609b8d9498bc93b9d1d739b5cee60ba88ccae2d45541ee12434926dde4168503f345997113957f2cf9be48d114f52d886a2713b6bee3bd586fc47de25bbf8700e2bc7244f5beed59c4675a86eeb4c2d6ee148381dcca4bc3bbd0d28ab9177bf276c2bb295eb01f0ed0385ec2f0f5423babd12965bf001bcc38d1a6691a12173f3088e3db569f42896e1f5f9884c6ae3c26f60da1f799e2d7fed1eaa5b062f7fcff2dd7d0ce9ef7854f3851915bb6df9a76b5930547e348c96fa4d5f12a9541be35a1102d3681f3f517e9feb0d31b8ce1a53a51da330a511c7e64a543acd102bf36f8ba206dbbb1867388f5977c81ba591be5200cd37e607556e183c3ca765ac48d42a5c5c426e702cc96251dd2b09e25db06729433ddf325bf77fe9241f4494f6f11c8f0e07049f8f3846043cf469d4c7721cf89493f9fe5cf6cd2a971b5e8fbedf2ab901fd0c9a35a68821c6ce860c708a997aed2a082650efb01d6ef37fd93e2fda7b2198bf19530914b992e7cdfb5eb91d51d4867cf0332cdeece03e5d2e0b6c51d67616cd3e128d8e26c566635bedd7f24e7e4e71d59b86f5d048e92cfd938911b4a30be319712ee3eda61421379e884eba9cc681160ada25d278522611a0ad0713eecace5896e3264b419313e244cea8b41eb25d8948bd1cfa127edb30d116056800039e6b909552e6ad52e46c66b1a16a4c15086455f9e0bb712bf84d4ee7c730cb8b397fa4c29838fa8726b040c59fd6f5e021e8e99ebf2d23fb97e350dba5e9c3a4bece6975efbbf964b8a42b03b17fd47544b0d6cf45ef4fb04bc3a410cf22bb4abbd979ed8e3d863450bc06078a9b9a0166cd08974bdce0ac7093ecc54aa6b830ce8e6a4ae939a167f4ada68f660d9877e65216a531b2fc88c48d024a947ac5713906bf2f47305014d71e5011f157382dcbd27453281575adefc78a943de1b8d7631dee7519aa5ac85731da7b0bf03580927426c7c8bab69c4959b8a610d9d1ad19fb3df20e26a3a023a50e857cbc4d2baf02c5cbdc84e139f8d073e6c9370bb18435e3f89eaa75836bf8f25e6e7f4feeb167e43c7b1861e6eb67291e21e498f07374d13e66ba4324350c933c45ce8685e49583fc5869815c40b3e51eff1c558ff723a87abe9c879110cf0197ba2f3152ccd75af832abde6e950b0c7682637d6ed041d59d97254df0ce798336edbbae912282df3245ba73f7a8680c1ebe0895849b8ecefdd1d4655be97f6564be9ab9a79ed21f5f008d8fe2e22151830a205e3004aec25c2de4c04dcbcd771ac2052f40bdc12f417aeb7271dab544e750774d253336b5c14fbb519f4a65982f5918d19e8e9b52461c2fbd163ad307ba99874845751a059c2574d36d8368ba8a23a6368d686fe68336f4e0f4d409c992f22b43df06b501a9bf4f1018d17a1c467aa4bc281b524d574b8b48665d5275cb91cca35c388100cec17ac8510faa7de9fda98fd1978b5af22216a46153e9bceef695e8316698b276669c8de380ae326c166acde6f6d4e118989f2425aa2d50a7e69d6006fa74928773819cd8262d5bd18cbb9b53a3c8b850152f1d570f9c383647e08d009251af42e8fdbf5160cf414f0a93784034d4f2368d302ad753df963df7becac6f1a9b53192e36ba48435d8306f099d194dfe9962ad721966f826b12bcc4c9fef15bc6d02444652955a0e38a53e7371f15ec9bb917c2735caa1b9a5aaa16c00eec81f51d0bb1b2e3711e1e7a47629174ede4e230ff998ccd91c96dacb5527bca4df2f012f8c4869b476a3c47066f3e9b8578aa361f158768b0a2ac8be309a98bb76096885ad563344e2e0b5e058fa209241496105063cc3e4f125fe4aadd8749a21db8c67cefd666660485125fc1ae651f0f1c4a0117cf0523804be36d7c979563ea9b4fb923ddcddee8bd8597016245d615ef3a127489c8c31f695fcfd7361e7575ecc6cdd95c750fe4f94c07aea84f20b4578fc7130e51a12fcacceb2bf5983194a0689cfd66275a8e4c1fa382f9f9bba5edbd0d001762de66d0c4a68d84d8fa291ffd6a8c85284889bff935316eafb4891f4f1e0f1558c22234533d78c6ca6981b094e5a9a3bfd833a3b6af03b3800818431c1834fd9779fd4756ccd25298ad426fce209eb2cb20a4e217844392c31968a2494cc0f4bdc646ae758194238f2996ece21bd649097a0afab00d6afbd73a90de15a9b0cb4e16c035af96cd4e2a7f64552b35f79cd2c3ef06ee6e5fc301c9c92d0521b54c2a590a2c8dcdd678868ab797e6ccd24a8619ed8a7780be4d5f9d83f4092a3f43f181d1b271c7ccbca85bcd6d7b4895cb979a5c897c85dd1e40fed28601246564eed5bf0e76241a58e8fb75273beb42159c7198505aae67cbf9ff9abc6660c201b4f5e6dfa14be13663f10c3f00a8323979697c580ee4c0569fb838666b301f8086ebdec1c35793abc4dc069d12b260545dcf8b8307bfc754f89e86d7148505f395640a53fb8f801d9e99b0f3c2237f3b41c59e3c02fc5bc2b263f48d6ed26d90fd3b4789475a3a9af82eff3d921bf9074f7ccde7368383301025872e66a4585cd2e7912906faac5398b0a681d9098f380cdc7a14d8e6126e22ef58418f4b649ce11d41e52d16097dbe05ac286cea6e584170253e3efb3f3fbaf7b8c8aa52208a113650bdeb8d42067f3a87b98bbb43e7082c48749ce18b6b91fbbf56f0c2229c4d0b1a031efeba91df0bcfa19e55ad9fda5960cb748eea203cd35a92ca7ce63b7ef2cb2390e003de2f9ef58ea44a300a3adcfe6316e08979285f1d1489cbba8d1be7f077988303630203793a3a3f42530a620c0ced0153b9bb13c369c76433a7c75fb9e604c36acfcd33042b7a44d0cea8f971988c39689a361eba8db139cd31e6b7f40df0887797aa30ea9f31f3742396e539feb928646423db3e19237d0d3df4dd833fdd7f77b660cc825da0df5c4c69f7630e037383638ecca70887bab70a2a22d270dee07af8e787f42a87682d2cdd691beef5f9094abb4bde2db9e5fbdbb9ecd838065bc20bc36572fe14b17e7f6eebf64a562be18ad18ee097c8d28c7e6d33f52de8c587e97299d8af8b1c7f0ebcef93fe78ac013ff64f1e770ad540a3973e792eccb8947b8aae2fe651e5eb1cd5e875964e58b8ec13316d974143060f9c797f1a2b959dce945cd83c56cfa6caf8ccf7082595f2333e7f89e14357ce0f8fb9631aa7981e843cc5380ba1f4b1fd87e6205f938c38a11794e0acb7d41c41b1ffa9683ef04a9fe5ca25b114b7062339ab7d1e6f03ef70e0c922693a6f2259123dbf1a2452685eff1333af2f2a1e7c0e88f778e560684b697e44ff186fb32bba9b72cdaba87030a82f607df17ee71317298efe4af3cf34c3f4515f73d4f45114c30bf72c74a89422f3f1976ebe9c4de3379594f27edb797abf7215fa3807aaff7e531501cdbdc62a34e79270af90e6c436067846c0f704a1015aae1f83a1b911645b6171bfe819c4f824ca143a7e95a276d2e33c8fec52c576e2bccced50fa72852580578dd962d530bc95e05e0d9f46b9e876dba663b4d96a3c5850d050755fd2d49f169f71bdf876c407a895490bf0c4bd8e086329ab673ef1e332b02d20950cb07efeb8fe8c9ff2f85f17dfc1af3709c08b45671a9fb3fa465f5da3c6603ce0e7abbc94a0e4df66b31cc32cdb7dd5ebaeec01967c834bfde525ef1ce10274ff2a7b5e0b6ddfa86b9a9711f04899355b20411368eb6e95429fd380d30730002f4667088fb4994fdf1f95980d58ed4868c6ee8a9bf3fe75c94c84bd0d438967d447421da09e7902169fdffe8b2cc067ab3163541cd53236410b5d60fce2b4f100ba959d4809d781c05265e934a859993f9e30118c7e82efdbe0664b2925e45418bdcefeaa33ed2cb6b0bf850d05004daa8f8a3c69dd64174662cfc2e5d99480e6324de9fd3f0f5e8e04125eaad227b1c98f7239fdf2812214ec88cc030037a8aa83953e858d19121b71a3160fd9dab2cc8be913387aa1345789147d0d854a7df7d63e81610769a6d6a447fbc84d1953c5e6b2c6ab54369dc2754dc00c13cdb52647029553de766683322be40516fdceef0284d917ba583a4c72092a35a5ad5854ad8de39d2ad14e2fdd67316184e88422a37918596e125fa7b8cffbb5b3ff9f0dcfe54f3511873dc749f92b822823865884e820be0ef9797c7970e6bdadc5e19270bb1c3b0dde2f0485424083e53abf8895292298bcad0009f4969d10b8b0c5cd0a9c22bef33c3aa4d49dd629b2793fdc89cb3d2cd81ae19cb9908b8c9423ec8e6f9a67f75cd99ab752facf469c71a66ee9ffad80664ad165862002f84268f160e2ac9611365a1ad74fa3ee21268203f7ec98193d2f43412f4116be04ce8910ea6788facc1448eb77d178c3eae2474ba5fb5f75cc851396687b4570b81f357fbda8666a7efb9b7dbdcfdbdaf0c138156b0fa60ee22e6f8a76d66d889a9e0d13162659e6c7f52f65dbf1d77ea82bd88fb015508567a9065d1bdba6e222c63cdb7b509c9694e199edfc1130eace0bf5a0e2a0384c0b0f403ca86e486b44038aef9b96aa113db592834c45d6bc2ad7736540a83aa5a56e564905d77e9ba7f21e9743d22268d24319b325ac32e4a28f640137e65f897267061a92fd4b618c1d99b7e9a9b5805dee1496866b0f9379d012a194032e0d112439ee6c78ad48989068caff0f3fe2b476bb3387a99ad74c2673a7f2b6c28df7363c1764dc28273cffa5f6becbf74ba0361397004df28bf269c9ff8e8df46b514d86073cc7cd15c28033f614be72b0695ab740266ae2fb55389bcd3fd79933955e220c25d0e190e9dc4522f334d804c7e3f58abd83ff90865cbd66dfaa7444e832691fd230985198fbfd120568a6eaa482052532815087833d7c02b405da52e74457e2170bf6df4d2527ca2fa7ed5383290287d59d80ae63ca3a7532c3025580389045855e6e1eb7c0cf61016435edc9871edd062c42b58273a13f1df16d67868094bb8219d03788f7f5a4d77d1d23933f08db5ebd6586a1697632335380c23cfdda695769875b6160f28ad99fd05808b6b8c483c0e8c3c4a01875d2aecde65e9e29397f436fe0fec3b8740cf7dd90ecff61c12e790480b16280e6a3a4e01d13faede10dc8d4f3cb5aabd26287bd6a7e4eaa9815940d412bf9c3e9b5b9328168f1e61d0dad0004f4b873e9754adaa0dada16a5b90440ec01a1e09fcf81bad918935ea1fa3ccb1915302f5b541fc7b22fb5352a6e5ce206f3df4a9e6fbfe785c9975155f94bbb642eb70d818528a4a81c18c7ebdb253eb1c61c6a79b922cfc809644221d5ba1c662a9a96572a657b81e78eed56a0f1d4c2b42b84b3d25e81c01dadd891514aca3a7577232c23ecc0de9e769235ff1b287530fda6f2841c5478c5d42184af24d0caa79ba2db0abf6550a50fb6ca6553181dd984e10805fa3badcdba8bc5b66cc420548ac72efb96ba11edf47678404478627161481928b86d7cbe36694b6c4d0978461d59804717a675185175f6ca17d15e8b2849b9183783f52b83758d2fcfb63d853451f47b8ef2a7d7bbc51af922b7f628b431b81d299587e1f72c58c17eeaecf265b4037695266ed555fb97bba41f7f93a8f39f829b5e9152fffd49533d5ab665341b4152cd2c8e6134fa04e27662f8afe84c88114373b5b3808dee08bd91d6ab06e7cf9a6abb02f1fcad52abf91cf465f4f1c4f33326d13f16edeb39f28465efb1e60d2885f1e26fcebc5e71b32dc38acaf7e17c9a8ef8a6ed856012800913047cbc2325620fffbb8c5b3c60db976e4296132fce9f5d59233a02a161f7e480e43e4059af131edf78254fe35b8f1638afeca67a89832ebe260b069bd8defbdf294e6345bae62816db3bc1ac30a8548f54e3dc1fcef24cabaa6e81fc1b3b1d3865aa9f1634d72633cae7cdd951574a35d5c764e343e569a96be93f24fd121972e1cef905e62de67a2a1ce72e827340871d8e1173a292877697c6770cd2362f5e46c93b74bcae8c005573bbd97113d07af4dc01ba36b41b72a66905edb5f68af2fe426a849996e35c379a352a1521818d3d787aeaf46915df59e205fa5bb472ec174ff1a2e286a110c580ec2438f50320e3f3c29219483cbc6fd5266890663381088f3df98d6c4d8773ae61e23ada771d8619b79337bb97f3de5dedefdd33e4f8424e2d6e2792a9c827dddda50aa1cb03326997e9cba11ae48bc31451ff788339536c9e902100997ecb77c26c504bfeab1769629b6d50a6da05f9d927a27f7881c64e6594c3fcb4192c6c9df64802fd0a502e2c4c8ed546261ff9c017f3d76e90d8609564c0c1edaa331cdeb1f15f0555154631bb6ce92e74cd743b82dac781aa9afb5c62dc1c10c4f9fab6f8038fab0c3746e48505d7d4fc20feb44267ef4a92ac58e7fd2a4014c20c8c963c781c504c4182172a0446f8172b68c65d6b8718a3acde40ab5413b9dec277af63d0fb12f40ebce048cce30a08fd7fc6a6a3d4e7b179f19c2b041927de476b7ccd94e21fca06124a2c5db05a099c85a46a8ea512b84b39d98385970fd0df8262655a0526c8daca675a186f41f47d4f7a311ab42a6edc14551bcdd42f451fbdc6f1ebe96c5158ca1bf6bd37ac41b7014e6c07efc9cc3aae7cf598356a32b3b3f5c8f0c8953d0994e8a64e9bd302c02e87b9773bf00cb11f7b4720b6c3918a8f577ce96a175dad15e25f043f403dd11ebe6eb0d0fe8b35da71887555fa672454a8ae794befdad60d89205992862ffb002626129be409b49aa308af0fef2abaae5787b28c8f41603f9939d11b76eac413b7b7f9f2edf5763f864e68846b407228b5a86be9d","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"1d853622eb26115c0ad30cfa80469094"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
