<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"8f57543fe2a91151f928eada45c1e6155ab9b5efe425f99310027c62b86287f0535b249daacf07f65e2e939d00264afacf83c7e3fd81c11d72cf85e2c5b91e41ae673ec9870f44c054e0dc09d9eff51cfdb4aae14ca60e774cc37d7f28fe0ed0a40c248e432aa0f51d178572cabc04ecc3bc229d8e06e01aa8aa2d1cb9c80d3014ff41fa80d7726cb2c48d4eb6e3984978667be323e2c0223e2c9cfc357042f66b1722c3696ed1ce93b80e196cb338783e42d53cec4159c565b31351c0239151201f75d3ed1d1d6f0c6ff507005ae2032b674b61439fdac8428742927e37e11a500e6404085b6c35a07fdd5ff966faf76fa91cfca146a2c421ee3c3531e99642825de2f0911d117ce75b1202b36bf9fab55198047fbbdc57bcd97544166daeed4a37a09704692eec20502821f2c5029d96361ac7ebb583cf1602758b24e8bbd53146199dff7e0a28eac11559b140c7edca6a0e0970f12a15a2daddda3610e5cd50d072859ebbeea9eaa1a729464f78ff40e80272c590cd3fae50b62a83a7158ed02962e27ea82d2b14768ed72ec5b6206f3026e0a2d297110ad57c74d1a26b755d4b29d95010fe65c58972e2f8c8f17dffece6e2fb37ce448bbecb14b00b8626f85fd6dcdc34f5b18c95ebb7ac39ecc0d80ecd22fe86f99317a6841b3b17a836193bb86b352ed15065950c77975093e3690c2d9263a449617c72a30f3b6faa51cc97a4266caaad65edb874fb0edcba52bb61271966840e35c5fd65a552822fc1723e0b9973c56d4c1bc78baac6b0a870d37580bc1dcbfb8d5d4bd559eeaa5caee38ec7e6b70bfb3bfe23b558ff7f0b49646fa03950c6a5befcdd82b95e11ae8de2caac0d667626b25a409e98d22a1570973ee937dd3ba58ea88b418dace36149e8e1eac385fcf0be00e10ccfdf6ab9742a05476d2f7a7bf58e55a2990d65394ab6e01707997d66464afaa06b3ec2620062d5b7b344f674bde94deef46539a6f080460cc5c423eba38bdf991b30d2db27cb7a2a9b7b56623a1e81c59245156adad6bcda412bb88bdaf1211b4fec797c0727fd70a295b1613626377ccacef6fc55b60c9e8247edc879f3094da7ffd58557ca58435bf4e1aa35ec9945e8425f30b2c7c6050421d0585da0079d6ec03feac1f75a1be8147b11fdb087d7506ade21b5efb971ba023746f8811a2aecc9ad8642c62ed263d148728790df1ff7887c915343a6e4faa79b720c9c3cefd4752e89e818b8a7cada2e62e95df9d46d58ca83b5dba71e24f3a967a3c64115b2871332e05e0894d0df676333a8c8f0c91f27d2439eaeb229c7dc83300a4c2bfebd5adb2b152157ff0457ede77da9b79263c1d35356b678c089d0e4edd17d92de870df61f64016b2333359e8c6922d9b21f01edec9bda7bde2f296fece15d48d27f2c71648e4bfed29b0412a5d6f0b363e43a40e5a455b4bef1398b8b54f363d2e5352942af461f534809e9d49c8c3005355088985486a11f7e4e77cd47c17207cbd52bc9885a4e6d9335749dd14da889bb1325431eab17c4c50e59be5756ba3d7edf78b9d672f1b923315822f7fea432f4672ce4cf4018eff25758a19be2a79aefda24bc175b733e42122c2baa051e3ae1a3dfcf5501d364d6460454614304510b3cf8fdff975d5ec74d6d6d32ac351b959300aa0a77538c80fa0b9d7806d7d13a0013530eb62a4b78911ce69f03fae22571fc762cfbf34cbe960408cbd1d9c763dd82cc939924e7feeda638977a4b684034e671c25abe02a7c422bab97a858540f6eb538ce83cdb5149173fecdf232d78c85fc71ec2b84df09365b2bb95b2477588aa98ce728e1dcb645c59a6f30687b6924189ceb482269ace5e50ff37ab8ef1d3fd84b0977b157aed6a38bc38c76f10f3586d0d4517d24e8c9b90c4b28ae47dd7480d29b23065a26360b2b99f9a4c5e191b8bf5004c8a84aeb52f8a88cdca403be7bcb746057b4862ada58a9805da3a9cf8ab40596f3b6cd9a9af9ae1b0e75092cd4b2fddc1fbb5e6f7cf5b11ddacdc72d351e633ece125461c86bb1812a8ff5a5ce79963c574d20ebeae505ff8e4ee63e35a55a1020b454cb71b19bf45dedb351a8f805c4b316474c1cc240dbf3ddb45d54997fb2848cc152fa5ad011fd87221acc9cbeaadb551efdc2ebf633aebc071e6055a145c971e8a7f3c100fff5fb90f9d9b42ea158c8fe0b130dc9fd4f76354a11c42defc6fcdbd4b66c9d2d7f197edc141702ade24b7582532f69c61716dc50ef7ac4b4f20579c30035cfb78e96a4ba7a301b4cb4146b44134f5f08a1d3bdee41b62633fa6b38c64a38d84f667a9c60f141cd565fed2995869bbb7c17a2175a13840f273f3be4152c0421b26a6d354cf66563d5c7a6966e5a940d4d4d36e8e1d4d057fffcf0937862d820aacf9917baa8e057022014601f019a803646ae0335acd7595460c8b6b8ce73e68a5ce81225a4ae67038aa60c2ab7365bca6c5225d2efcd23a4315d788f86fa12db29a0d240360111f47acaa441b61946456f5e72ce19905456667267bb26ec049e3de76a2671adb71967a1cb60f5bffd2f4e1927ba141aa57d347e10e83e37c546e1e3844935a149784c205c3462ab3173538e27d4ccc0380661f744c3baeeee724e8522d6afcd5175a718a52aae73c2f0ad855f328e0ed29ad22490888982aa11bde39ca75308b8024c2641bd1d7cd69003b3015aa5321a18fa1692610087398047b2205f66427297c41dbf9902a021e4d650867c9465150090f54501f10b720d213896b1be83a8a729031ea069efa2310a6e90d84a1094bfdc56f34e874ca2dc89218ce3741abcd621c5ac30e66bf1daa39cf8c59b19f103b600ccc94f106ea529989175524ecddbbf995a9aacf6a6cf168d8d94c9a4134999be1fcab8d57104172c2572e9abccca1ebb9d41924a09a5a0c5b35dff7fb1d1827d600e2b76039c560c9699654f9abd4019e6746de9ca0ef1a39d865cc6696dbc4efdecc7ab221c885cc7268dbd75f96631a9a2d71567ada83b6e69d8154de6943d4b542668e55a3e6e6f5a17ffbcb1237d75f901412589aada814bd58a4c29c783ba050a4779ac32d48b1a9d098cdce07a475f9d67122459cbf6a35cc699fe489b73251886f440e954299e3cd36907532173675d41ce659cc3ccc5ea56b78b9dfd9de38eb0d499243701d303ebcd8686b16abb917b989bded9acd821cc10823fe0b7de0c318a8c97ee9ad5d932becd38c3f3f72639661c17dfcf4b39fc0a8d61ac38d0dac92ad30f36f472c0f226b37158ccc525582c3e2ccfb921d0dd85cfd964ff2120f772408aa6990b385b7d4d7719c9f89fb8808bdff075465f51d1b2068f0d1fd1b77f1aeab693575b1d097ca727823f4c0ef0526e4ca251afacf9c36058adbed687acc8e6aa236bab0986be7679cbe4c4fca25971a76c5d47d8af68deb7183df7af0a967af718f2798b216e369c9b689034fd58b589a9ed4d594ceddb74cac48fdfbd56fac02756db52a7084af8977d012f420555370fbbc98b43c8990efe32daf1b90310971780ff9c00f346a74e65d26bb362feb6ae52e40c8ba57d7b2c2b727f84d2b6ffccd84ce8516b618bad6eb34439864b6e4ae1b465fc215cbff6b2834c9c6873184bd4bbe6abf2e519101f48ddc407bac4c963131128da2fc6f5f2032034ea4e8d09ecb00aa4939d9589a5fcf364dd06346ed86ff047a57f7ea43d6d83199d0ad2b3523015fe55825fc6776d6867e40b1948a05ed612bf490fb44cdf4d896971b094027567aa28d1a5d44793390a6f0071e90df77013692504b0ade75113bea2429aa6ed3647a3ff159081b12fa8568c9547ebae3819688f3caff7e1a40415bc378a38ae979a4780f3bd54d3a1cc9c681544547405b3a15a6683f8b6f6b555ec3cb1c13732479ea87e7eb3451085b73714ec1fd605b842ae7290d2fec7989b80251f10af0db57ff2aecc6e9efc98e34f93815b5b23c6d6d0685d277ac8c51e9871db0ee566ac40cb03157b3d320e6a5b32c13ac3d09395bb4a694a1507482d708dd09a0eaf265d83811146d43c444a80685cb364376ef44d0f710195efc50516f9c5c5ee25ead906ec6c8f1e59a0e55ba93733c159b84adac837dcc8e8f4987e7d20b68551109b98fd799367e034dab50ffecdb709a39e93c605875cfbec89049494c78ef3b883ebc79a9c5a6f8da22394bc459a91ca809fa1df3862135fb43083e9a78bdbe1cacd1bcec105c8f5ca68a14a0abea06ce33e74ba9d31d487e60abbb6fb2b56d5a4e9156f766a930b0b822137eec2620ede2f9aca66b367b67a979cbad14a1466b58909cfdd48479ab69d3647af4373cf5ae4999cafe02fe0782fc77be190c960882951287c7c9b6b52f810a03adfa495365a7edf35e26621065c6220757092df404356b2bcc44b0d82e8f1568fda698822ba18aef9316afda701c5f1938c855472af8fed68d78987e41cd94de9f53bac424a4da67cade3466328c44af263e5ea3c2d225b5567b95b00e83995859b92506f7bea20e3798345f770680d206dfde6529aa0a1ccb9e1360340d6f152c324461b79a3c172f7bd342c370f9383ca54b144aefa125e2b369ebdbcb29cd9d0e1da77781100397ee7cf2013b59a60ba47795544e73b15a3b7ff10c4f1718f7f399e228a54d361cbd0012c7a4cf17569e45b0098367508057657c80ea81f2b65841fba6812f92648183d5e602cbd2a32b3ce4d9985280cf1cf42c1ab5bdbd3b23313fc5f84845b81c045f625fa3dc53d48d86d0dc7525fb65b5847c6a1e81339ad3820b4a65cb114c074e7b248ff15caab8ce379491eda3189732f1e501de49c9b20cb2bdca0b9787b890169a1006c3257e5cf54346042a98675cada15624e0f484d30ea9b111e1da4a79e8a8382226d9cf6047c3a069980a3d648334e872ae6ff54c8900974b898ad738a2bf03ec2617446e0d905899db6a3764ef7ac79c9c77c92c0a93bab4917bbc8944b0d3d1ad153ee0f56e9dabdc4ede5e8232fc17257f9d964a5a097b04c900454ed50625f86ed98438287f49b4e0b886a5c48a153ca1ea66599b6f4fc9aaadae236cb1a0927074e6a427ed787c3cd4238b5d8baeebc55f0ed98abf26edb20579998f5414b4b9341cea2dddbf669fd1028c3744b41c91d557d3d6edd31de935017b6474e8cccf2ad26bb20a91cc9a99d926f09182d6126310b738661c76a084791418ac0c29bdacb07bfbd95f01dc41a6e3249d492c8fa785f8eca08a9cf4afb68fa325c3cb5160a4104ffacefd72e92d95b77927c3939ca4ca6dc5f9d084b26882644b2ddc423015fff156bda598ec990db3e2f6143f274f8aca7a6ba0277a3861ce3a6ee57e009b5c7117cbf615df8b517d32bc147e5f429f8144a911e6804380876370a998281b963161cd890bbe791544c594cc4215cea26ce231579e4e3ce25e06c6f9e42814efbf483b8f4b944719dd6d53b88a08867ec0e5780820d26878c9d4db20fef3ab0b6e676c20917681d2f64186d62ec9992a701791aff924c2db0a6074c99b562e66f4205a76d39e64f09f51e1f0fc3a5e9a6c49fbabe38525b30ad928512581cf72a3139f507ea1ae31ddc10fe6399c8a096c713b195e2b77fa7266d5eb8cc543bfb702ea45488836ed894263cc839dab26e6878ef5947d3a5c93463233a3579912f7cdd75b8c712fc1de90fed25e7967aa9edf1620114894a8b0fd3caee0f4979f28b94a641c53b35442881aabdd927f6d1bc3e0732e43e07cc0ddb8cbeb2606966f97fe3e202c50efb1af4e6b169cabf374904620f36393279fa34990e53f4908e8ea1619b3aa81c0b96de94db419327af108c67059e97e94dd7b47fb3733c3450572d7d5ef7b3d977e5c6f76e987729752e4499a25406c297a74ba7cdce4df55a53afcca1539fd31d3a61e61f6cd98efb2a7888e08d1a836e7e4a143106a5d3979ce3f3a88e31f8dcc0fa360cf5161e92c6284ab54f71c891dea475d7437b8c34c680d90b63a9c752fa1b38e915b2563761088da68cc97d7fcddf4a9e42fc3b132ae3331e6d5d1d823df8ece6178174f8d734507de6af58d12ba12807d809852366f71a0da6a889afa1d6f04d15d2026a4dfe1d5dc3894b8847d5a7d5f0de999c60f0c5725b6e085b9b6b954e2928de037105da5ec373be3c94d8eef00fb534f90d4a7267ac1c95d3aeebca2880907482a4945a35aa2c035c16f24b3c48bb6a8a20e2cf792a573e403e3ac73d2d86fc2738035d7ca5c3ba6d3455030ea0973656b200e76ea49e082c434a3781cb2022d04136c344f7c0f3a0e67546472f49f7977ee242612b65fe661b4e4c71d33e7a07a74f32c633b5b9ccc75680d8a000ae34ff656522078913a3a500b5330479d3a61adc2d4f8d21f424e1c8219bb3b474deaddd10292706db39937a7923cc283cf4d2626e9d1e8412839bebbfb8253d6b91df8b79f6c7157bae1c71ad3002fc988e2127180a272557e8c0e5c32deaa01ab2983f9a718e314856cb73aa204cfe1d153e753a7dca6dedc194d5bc1084c71ba0d311d52a2396b08906dab224f8d63f04aeb98b4d3f2c5ed17cc2d44fb3bd6ca4847db45caf11e1daa1a0873a92e4f1143db28f1e4884c21eb98b8130f90d22ac66951c65582b094ba4677571517628993cc8d2de6b4d2ca0c09ce7785a349a5a6ec86e70bb4c25f531cb0bcba8d400fbc633c927c6b044e96d77964754839bce1da998e85d8415fedad106ba739ac1c7f5f1ac8687cc5c4d11cb5cde38b3ca7512e4e5c2bd58106d1b4a955558c9822300d9fc38eaab8fee6c05c056099e5dacbadb325d4c7e520eaf2ff3838410dea16e086baccdca2219d3e0ac481e7ded09e39ab399c0a663a5adbf24e6edcb3aff018ae043df77541c7e0ce0b33898e29f157e93a784472a7c913aed9202a15dcc9f3029c2c18269ecebe5e36f6f804767107ba9af50fbd980114b19808e0cc34f9ac025ae3bd317258e87b4a0136bc4c951045cfb86942ade42276abe817416a6f507209f8f4580b7843638eac625431ea6ff257602c7327fe90a8d410d4ab9261b7166a88c32380169398b3570d45f325c3afe51bef1268a93d6dcb73c5fb9c0a8c4cce49c61b46a9c6cd13eb0021f0ce92a0e11534266eadac7165e6e2533c7447c064d7114237640be79305a9f15774b6fd8121c724e30d2efa638684347c3893df6b59feb875d8e60e5a2f8831ff41d9ff1df218c952061a4713a4d0efa498910395d908c4c44fee323cec5f6acd8840a9d4fb874a2bc83ca5a8e85cdd4edf19e4d3ef3a425cd628c9fa9c4ce6d95f61cc826b74ae12137eb2dff1926e333dcc6b6d11f144d3f364711b4a33f769938ef88da0f03824ae46541362966aada711dc598eef4bca562e1df2d83ffffc9fdc4801a5f923bcc8454d6f6ddb447bb7133edbf7a5bafe96395b6fc0b0d50f6cb938e8c03bcb32ffcbb5c9de6e70f78bc38510888f7106e16b8be603959d4386c85ddde40425eaa64f9a90632896a65e9aa64b9b911f426fbe7ced611ba971940ab738b1fc086f10f77f1e0aef7def6dc2574ef9841480cf078b13a04619ae8e7e8fa7240624b8042b73e780aba39d2aeaa158845e4ca34e7724bc03fc6ff261352fa0f13032916ba7ff76a6da395f4301ff30ec5354f4b9e2063cdd845810dd8c7ae4863a0b2193a204e01abece148faff517d1f65eefb18a4079e311db2e9fa6003caf60fcbc9045111e183e2457c471cea58652a0da8a6de6f7a140935fc3bddc55721ec66562d4698d45e4a6883da2c76d45975e0312ea0c6a6ee95b7515950d2e3642b558e551fc58996b840fc362e28554c235d94c10b105bbd8a37ef88a81225d05a933f92c66613cad0987f0cbcc5eeb266070ca518ae082aed2372e623a233ec85fc0bc041e584b7b319f501647fcccb8e9210ac88dd265653ea7830da738f494f09f1201b446914fedbe23f897a5a97c69492d02c85d43323fd1653aa0ddac2e17628dad51574342dd8585767079dc2c44c7d61edeeb5234cee005480af246c9b5d96a2b5505a041eeaa0794ed6d653549a4c46efbc8fccfa013ee680dc41fbaef36baa37f71ddd1714d6cdd2262058ba4f1d971aca891a20ff64aed1d936e4394d8fc0128fc149e2213d8c70aadecc394eaf372758a66499f144a05267adecf35cc8a2278095c2213c2f45d4be8348be03116e6c29ba26cd5937e67b9f8c922e099e8ad0977205d8f425a1468899940e9f54a1cae2cfb2b34e34dfa5b7f5370a7e40101de5e65e25fd813fc5dca604df0c1e6fe9a5bdb54d907fee1f94c8a57ca4c61f028f0fe0d558aef7a79bb8917562da9b3a2a4b59be489e9a566cbef42ee06432f27f8adb3b93b71a26f2e978ccf8c1cf6b118c652f4bcc87f05ffdf428f75238a25e70a8c7cd9504c1c6a7cbef3e19d233ddc316d66f52076e447a86a901ee88d0ead806f768ebbdd399f00c6db6416b268343f6e1d0ef77ed64f1dcd5e2eaf6f93a730fae177fb326c9495d79f4635d4881932d84a48326e77a91d02f6ddb6c7142f09de22ac773d9b16d95c8e08f50249aeaa7413dd6733351ef267023f5a951123eb37e3e03ab38148d7453ce47649459f0479f2848b41c25726f79304e7cb2044bbd41ff9575cc9c6be2f22d111e937211657c052de1bc536e134d21a798d7b0ff9067affa8cd3edba5e24751c07a431bb9a231ab0e9e5ed3108530ade640fbcdbcbcab660a85ec13588b0443fd60b65f2107e416735cf3557a0bbbb03c6ef4c5f9dfeca7dce3792d8b0bf9f84d5a0fee2ddd5387140f2d6e255ba53b77ca20f1ac85570ffe2af5e693014d2930788f0faef2b75db5cf5b1a380978e5a1615b9f598dc7409aa45b28ac2de748eb17bd52d407c4cb603e22b7aea649ada802d7957d63bea3ad826f303cce9bf0bc485f1f95ede50eb68b6f089242f1791ad5ee9cd7f1755129ce24a999d115d79171446ca253ab05ea397c80b7c04785ad63efd6d34e9754bbc0548019f8962f9faf070a9a9aa5598d2a457ed34fcbcc7d1f378dcef6e4f9bb6cfbea543274cfc0cc9767de3cdbcd9d72d0e1153f62a315f18b8c5d4f6d0942395522e200c45756b470ed00fc71fe5a6305520de534798fd75e99ace473858be3d9b13b983c5ee9399fc6d025bd9ef3488994a3c66d50ebfa58d5d9e5ff8760a45df211034dae71cada6a520a613cfb2f66686da82dcfd21e9f6163ad41cad2927e423ac7583dd79d15e679fff943d2e4d395747a5876726735d299f07635ba18b4ae8654732833fde8455bc49e65db90eccd0b19a6665884c38a177d27099397fd1a7ab427994c40e81445bea5b3f7a2ed305755eae7121b169e4495950b4f2bd4f3c5a760f03f95a6f2a83cf2e573cce4fea9fe3ead193eb1d6b7c5bc20efacd1341e39263e2c87fb722d7daea7b5cd605fca0752838417ad9e46e3a2158ba7d80546c0b2b6d350ff9d7592fccd6ce46ac53e8d57b97c93e19b5a3553b1620355f1039181b084f6b0f5e2b8b074da5f043b1b823b625affba0edd3c5634714e9b7bfd80b7021acd672d02844131d91438c03a5964b7134d008eba4c277807d833aa4809f3de8a3e2dad950f21e755b415030d735f06a7d3e981940538f891f4678b8e30add741d5d1be8d52e5323bdbe6ffc670b3db9a57e1bfbc7038942d179c95f310f86eee27e053576b96d652b493191cf163789901b69756dbd00d9f28a1cdcc474e3a60df21b04b83ea51e2825c3881250a49c8ebec7513b548989b0b4ea8eaefde8a8b803cd355a166b75da1fbb02093ca630b36811e230f02daab3b04f4e50f4890fe6edad28a9c2437586f01442940e52b3fef40f7d37093b9427c6b12b816f518fb96b74a36bf5c059d38a5b9870bc106f5508811faa38af3584196b6ad65c82267e94877566f5118e3a348982d9e0ba1aaa46ff8ea1fd376c9042fc274a04e9602ec38cb8ec8feaa54fcebb1a6db2ef2d4dd860c65826f11167fc66bc9bd170df625cad4a72d2f6c23c869e246140da70b7750da0956464c8b24c2824ece3a9944fcbd31afecffd79e861bb2d108fcee5f3872d3813fc791c1a2984fcc01e4d51794808b1592669299e325757d047dd821034b38396ba0c41a5f5bf528abfd1adbba906cdc42efaba0ab37efe6ffccf4a7f06883a6964c1a30c8da4c8516c3960ae946918e502ac28b7ba7bc065ff011e8ed3355e34a52ab6735eb31fdf5bd5187a4ce07258a3d85bd96d5f48cd3c21e670a388367dca81c967d957b3fea65b8c8628475f82e32c32e325e38cfe558514a0b388ca356ee1dc6b2abfc15effd2b0b1d12ba213e5ae7d18e50ac544ddbe1a6daa00932725b472b9c94f53a4d25162467c3e2713e3fea135bf426cc5e9b1067c19ee284b33218068ec74f57939a6df7dd915766711c626799fb7cdbe063e319e0778f044903796dfad973d707b3a83079202dd9ae8b3599c723b100a6b9aae271610d0d132603f6758e7877309fc092a72fe0ead6e1ea6216f15da4d40670b605180023aab4bb6b504981726176f3b5233b5f5bfe6e043b3acb9b99d8b645a80955cc9d8c2ac9d9f80c8c33c291b7359fc23b48248fcf821ee82f99944522bc8264f1ebe015cb6ebee5f7866d2e829b33c48ad1102148e86338aa390c7e1f015c77464d638cc80daad5a29a40ec08775c8782ba6fc73a396a4f71cd9839ad5d6676957fdf91fd4953285a5652c9aa34853047eb0d534913aabd94744cf86bf3494cbcbb9a732c31645b7b3eac4117ade240c613725a5e8a4bbee07d7e2dcf5e3f2650f5fd37ba1053af907872b288f66d5f51223a32595b790413251456421ab74ed16b833c4eed0453e1cad4ab4c7e81bd6afc01e2508bbb80bf0339c176e965ac1ed645eac560c27015d48ae8b0bfd777a663a9d8ed7047af9c93308864ee48de3c0214bb981ffbde99c89e24a315ee9aaedc4f7572214f781c7e9b495a15b8919c037c1386c8e8a486854f1bc457f6e2fc3e3e3509dd79bc3853b9e680cecbf66d49f0600eb48ca09c018827208af9f4136fee4ffdd4410a13b9d97080e95a067686dc5180a4a66b081d7af08d00a8bee764ff2a1f5588d7a0fedd41fd3f9336e53a40595b6b982a2d1989f34bbc0554c38e396635e084d539f3be89e435facca88e21710f39ebda0fd75ad27d7349a75a8bea50c66350db9a7c17e455619c7459b0346b618356d2eb8c5f6f7e7fab8b25e0cc3d80caa29b0dbef942c2f50170c127d1d578ca5d109b61a88c887723bf171f89e82f531cbda96c3ea0c272371b55958e9b38507fe6f7d99132406bd3acbc685d4e42447b80c5367a3116fc3b9cd9ce7dd9ee6a7257a387eb55d8ee10b8478f0e1f5f05adef3cf3b3b61fe3eb6f5336d537012abe2cc20a8d4b59dc5aa16dc3303eb94531017a3d74080e38ec35e9127480ecce915fafd23f77cda1545a3c7f7085d9b16e86a5c5bbf110d4b7699d46f587113b39f14ce9542041f3c3259de499de5c76c4d1b65cb4c3c861520ab833e75f1730a287036be4eaaffd76d9ade575e58811f98146a8458515a63ac3e128bc857debaac577daf0f5f83a76adf103ba4723e56a924c6d071ce773493f33febfde8cc7980d80943ce3e85f9413d2c23fda6bed2e3652cbf5f112e0b9f39b10770aa5c6464db72a7f25e5fd9034b21a09b0e39a61293cc6ee461adc74395a6234e101c40345a840aece88145aadfc3fb90f4da500bfdc4bda35d97190f79c19c5fe5c9beff0ac8d1e0b950908edf63aa2d4091cce09ce2d3bf13791727a38496c22c76381842a3c77dd54e34b78449eecf245b6b88da3662bd33a0fbc1d2628a8f6c10d905b9c88683b1114f3980ebdf82b47440829685eb8856ee7eeda4daf1211ef59e44a4363e09c8065e3571e14fd93fe79652f36c26f9a1df2e6de9c884d5ab612206dcba0b3d79e2e63baa6bcc5c1a970396d444dd5ef4029422675bd92ee78148226afe22cd1465be2bed5bda4e273ba47be19cc9aa213aaa632c3c63f561523683bd1f1ac411840484a8e8b8589bfeed24cfe03fb7741f11f0d1a5b594618d254a8ecf2dcd532b6c9252304ad19485dc01c0cb6cd7b9d40406a512d08c85127b9cfdf49a43bc466a3f46c53a9f765087de5fc7f453cad8342328d1d6c7e2ffb6e8e922472f12149ecb0c9855d98d220b32dddf24c49e4ae2bee5017c94ef0099f0c6dd080813169e15fc2e33de6a9af88532ff525b925d09321e450d703be9255b99b432f5449b7e8aee04b999e6248468edc434299318c9218d3faf3b25aad6163f65c59396ae5b72375315a09085f223babffdc0e305a21aac89c2bf52c4cdcfa5d3c9910992295b3c3ffec489d8ff05fe79fdee43a342bc1d740717f97721426ba8f812594001be55c158df42bf4df5c6fe4a27f682a31b16584b91f785827ab5ef291ab9c63eda72f5b47c82dd63d0ff90d57b3cf4c9a6f3aa43fd7878f4070919af23a345c10d1ea0a9aa3b6edc5cbc2db67631adf9c189e609114562d4747f283819b44844fda7da0921f7b848b207a07f79ea4b73a095659a7ab2adbfcd038e056091a4a245ed551006e8cea308b99e122d30410ba05684e6f9b1b2979ad5f5dee241a92e7317f7c6c4040b73421398f03ccc199e7f0589cd3a504a90d295ce880559f4da21b45ffdf05dcba1a3a22a74ca2821b7bc0ec124e4ea81ed18f4e241cb5ef55766c5e4156670f51add413c47b23198c8bff0b5a479168a1316e947e013adb9fdbd46cbb99eb3621804bef9fc297118097bb664890f1227f8df5d6ddfd24f561da70fb7251b7b62499d665ae230c7f1f062c9830992df8aade9645097ad5088d4d7069402d73894dc31abad18ef25f6449ccb36439daed6db56eaafb31143f144bfbe5d4d046702aae58732a2aadaafd8d1b8b34d09a792cc4793d7f54ee02e315b1e858d86273062b25f698e2aada41234ffe6803708f838be0b7862f49bc4c0e6ec5579136c2d09b3e02e2f754748d86564fe71c751823ce59484279b5595bc3b039014a441c0f6ccf47e174762851e30fd9a494cae4578523f6837bed5e6d32bd84bc5e5f56548b268d7562f0834accfeb22582090dd8669006d1049fdc763cf78ecf8f741a159d3ac4382425735ab2bfba3b29f5a1bf7dd7ea2fdd968c8b0d4e8c71c49fcb02e1a3302cc3434d6f5a70347ed8138fcc73da7c68f54d8cc8c19fc2109cfdb9fe4bafd6fa3844b63eec423ee890a99002d19521c19f19e899edd3bfe34eabd993e6dab4067233e3a10850ec468eed1402cecef606bbf0fadafb2d6decc48f53ef8ac647eaf35a5f3c7a38bb2ddff4a60b8d76924d8cb0eea67f0ef146feb29aa48d8d2016d50461cb69a9f110fe72f91cf62dafde2268fe166cb3012e29ed6a174f9f904f3233176f2e287dcc97922ef67175fe5865438b4409bfcf85f572854a85af40cfa37a29e72b7c381e8b2fbb0a7def5ee8f6ca981a1cb4a5af9aa1a103f0c4ade2b0a9641bb8c08adc21840fd1213113f7a0c940349ba4aa94ec5a2816319cbb6c33e6f4306d660ff809fd9aeff8f55b4752c409d910b45e24198cc11f8966a264cddd7223e231f9e1781554daafb6ff80a22e33da254a76b747a0a93d5a9ad8352f02f4b836ad01569af358ceedcc230b7d0fa19cd914c78461d32ff9c316759367a51997c8194aba6effbc1bdb38224f5c1d71a579fa52ab198b6619c7cf4f4e83bf977ea07d88de76bc433c991b3b9197e175ef86f6d51a2d7ad0a2cca79b6c57cda1afce515cbde5eef3711d9d192a345beab205db8464db7ec1002dd21d265b3ebe1760c1368764fc4ddbd388a2b2b54743f8b46947c3148efc7d31d1bb4f2f7f709bd896d137bf05c066ffc2767d819745eb3ac370f28183253ec6c027c1a5709ab3c8997a5b49638c067cdebacd72dbc3e2decadfc096b0da64de2e2d611b0d55bfdc40e8464c1c098abd0c2dbf017c6a8bd776ac76873a37a97be54a4b59959dc4ceb10cbb5746eb5afbf1bebd82210d3bb656cfefb6bda222465f77b3d586ecb0c62b7314d0894290b28b8f5fe75f7f0849f46fd9f434007c915f43e3c8f658b010c793c4b54824b66c586cc1dbec1edfa3c49b4c8c6581241f89de87aba323c3844c89f5376588871eba7904cd577bea14314b7eef39a05b981ace0834ce8071854535d0732e00a982f5a669613bd342a7ef05103030369e77ba7b2203566dec90ae69dfdefcf9fc63d1a84a5ef8d3f92bd9dd596f493ac7f6aa4fda4698149d0675862846978e0fe25ff0c22690549c74fe0775c50a32abfc5ba3e825b317078300eedfd37bc6eee93ec0f36911257552982dc16cdc534c66b87a29df08795af0c3370c7d8978b87ad99eb2ae15032262a0a75099ba9760c52b06f88ec38d6023c672a49ddac52dc4d9763d58302597999c3ce23277560b488820f8e308ae2277b4a38c48a22fd53445f4884ad86d7837f24c46719b680129157cb34181a070bf90aadb223edf3b6733f387e61556e7b6243ef730ca6d4f51ae3a8e3c4a0afc867de7e41b0952e4abbc0ba8e2a73a3ae532401058f972dfdb3d8c5b2aedd2e8b07b0bc43249aa76a0ec9e5d7c98a2dfc1c6a4a40c72aeef3204f75a4c59aa1c014fd84fe205f329e4244a33e08fadcdc216f656be7e06c10b81890ea17668bd259aa5837e4d7e8c10662a862019f19835b23a7b12c3904209e24cb7a964d2b88c6880d15e73e4512172a654c1439c436d09f5f103f45ec2dad562ee8bb5564522d33449033061c2466006d3e57262b592bd8ba0bee1b3e9efed377fecb98f62290b8fe8a2f674b3e4b42d0af5470495b95b01998bdfbde9726b309999c00542671acd903d43abf490fdf617fd64baaa5d69d3c01010c19e14e0e8c3495ee01456d219240757a23beda04b51f7b6387c8b6b35b87096f9b31c45669f4cf7d8fc157c3555b2e4a5852f76b2a92449d618ac555994105f1052cecc951aac693d969de37a0cb0340d306559cd1967b32e385320dc01403a697bf0f572712ec5dc8748cb8a273a0b1bb0dc83b4f39983f7b9baf9fedc97b175455b9a022289b53977555197e49fc58de9d305d676d3baa498801b9bf1f0ec70413f0283943e1329af9b4c2540121ce109c3ae7ce3cdd063c9b4aa575581134bfd0111fb7186c979d4a0fa44be1f78a21386fe73753ce9fea735e93a1bd99954223cc0dc5af77fdfe5ccec4c5170fec76164b27fb037921e4d028eef11516157241659e0eee06663973bb4d0a45e2947c0a14d75c8befe2678038a04d311ac224e1128dcf0ee5a5253b44643d8a40a12396efe41d6e4ea32ac061356e9871d933e01547930680d363231fd5006e852367cd40167d82ebec47ae2b2e1233249c7d8c2ac02c8beb3b083197c1ef54e7c998e3c2691fde28afcec10935644fe3b5dc03985dec99cfc336dd1664f67434997acb4abc847183d9efba54c32b09e0f8ef1f67e2798d5c169399ed3e2ccbff238cec1edb6fe516869245b59c29459ec72baf7f013363e0e2a297e67029ec6c9518940ffe39f0d548bdf805cc3c7d4dda9fcd547186ea5a3336d3556b212cc7b98af232b4d8a4e2344a5bc32e6fb30523cef66348efe36e86dc43d8953c5ead4b88625d797077aaebbdeb50e65e192860df8d424bcb341fea80db3a519fbc2e36841d4c151f53034824a343bb5350b1599229606f4ef5bac496279b55ba1fa15192f887cab239a93c2356a42066e02c0819143fdd710cf5b932d2c24377f559e4f1ca6ac62b6bc1ea30a40a60b8d0d1734a65f071e94a78f9d5c687cf5ade082e3f92ca37ca254a2ac2a1ecd1a2e75c254b8371fdd488465ac3896d01ceb4becb33a11de6fba4e6c4e428cf64a764314ccfa4a58681a44509acc1b1f8fdf1bdaa2a6024420c236091c53913c486efe6b0dba14decd620c5c27c980a5c7be80e857cdd52187638b9c17594968723a3414f59cdcf7329582bb7bc7641790119748089da2ef1fb898e41e1f9dffc3e6b894fcc1bc0500c3ba91ec6b0fdb9679e691fc31aa283125651b42dca36443c86196250c00c2018d710ebf6e079fd1fa89966c022bd9688dba7e051a5640efd032957612f9900b6301d769d1c97a01fb958ba71efb92751ac17e3c1c2b352fc08ae9bb6c5be7f1a53bfd879e0c6e95e34b3469b72eccb73085248eff075db6f436d469d18f226f3997fc4cacfdc2fa0891160d3b172ca7a63333efcb57eee5fd850e6d63413ae3d074aed5fd22c06003d10641f76bef44c951472a42ad9abf29cd4ea5d768fdf1706ba1d214975c5e5fbcedcc70d480ed5ff4f22c4f0688c83005e8f771f002d192ee4c7595dc612951b804b8bab1c49c02320867d5ed6f3005b8af9a48bc6d99921e5d5818e0d55ccfb0f0b52e0693d2d104559b888356f5f4e009567c58e2734bf4750f04770752322a490336026f35a0e6b817eb7c592013234d9e468bed7d70ae0aefff1eae824772470a5c04f53d0a3af232214562eefff975512344698da9031e936d6bf3ff1a02721221c9a4357e404bb932dbaed066f8bd5e3a2f55d7f5af5055cdf8780205980dce05be48df3b6df0fd90d18c2c822e9cb447e00fb90d0a0cdaa7f4a119f5760fd591ab35b7b2e099154ee44653c2c591660c7e041b3f6e800e7105215560b51f88ce7598f8c2e1a7fd3d6d2925863fd65aead1197129329bd4b13f8190321466bdfd8bca46457e2f4b576de552a7db3954b7fc062a1278e6d9eb616e35a3e00947137806e7b6ee2d238e7c5938094848f024ebf008b6212b7219e867ecae6df0f3d8076da77e060bde15b9170ace741f98ef0e6a460e63501fa23c1e1778c663f133dcf855331338c83c73fc50dae94576716f22b597e5581c125214f70bd549ec876560a8b9c71771ebf16a3fceb4a7a49d267084f1c64ebc0dad8b82f65dea53ece2667b4f9212a1af2efa6062c490884177981a6dfa87cf420935136f99c81d5390db08bffcf9d5508d74818e28ee682fad4dca7048bc051a4099daad03587b16f12b7a517f677575dda87146e797a3099a75298cbeffd2dccd6fcc3d035cedf94668090dce8ed696935779e7cc498ec2c569411761428146d5543d7b5d8b1f5d976a8aae8ecee9e9dadf61e74caf9134fb29c4f537119c19cf868e140364d558bcb5728090d3e8fc043c486ecffe4034dabd037834a59071bf22ad5e76e5dd4da9082bc0265b610fa06b0e9e740c8b5db577ef1fd57c64517687e47ce445f6c3fe815db9e937125f9cb564550ca7ce36be3dc93d49d6f9cde066e40907572bb7750e15b089221aab9c7d3862b19267553cb70d7d2595f45a4f0333e91cf40c318950d920e99fd10c30490a710b8c50a301eee57f7bae1c2fb1f39599e7ca5b02a79c9cf5bcfbad42bfd757de175a8dd5530f4fba52fe1f8f2d46f6033d713dbe93d980e883bb50fe52e3d8d9d82f55a52085d87d83997ff181023ee5265b622adfd7d02bf3293a57b8160e3ac365e6ded062d0ae7094e9bd79586a6c18e59e04b4dbea2c7e37b3b4ff4b850fc3e07d9bfff44edc5e994f850c8782a84562c46dc39d9222fbb3ba371328aea8c9ed74d1787d88fb9b71c769090715fed00fafc7799a67dd1344ad4b4ff8469d9214721b18e414d3fd8fb2f800e850b0723a3d8fa5f910e43e3f15e1eea8869b3223a9de972e9a41046420a2a092272402373a25f4839296bfcdb39c3851923c44db1a65340ab0de77fb419eff43c6b3d3b4600154a49424488f14a3148af981845f65e26b7d9075662e2fd2a52b765a626d2244e245dbf455803ca4b199854a475c18b1938a3b01411b7dee9c1f85d2dcb783d40392a3e1d0d4062d1028b1c2ddf973b98b018e748d12ce44ab6cd867e45601021e086bf1ed2908952454986e41c57a1906d7eebedf157860f06a8413541f85453178dd20fb6f332e2de40ba0c100d2dcf0dd5f9ee6a723a1329627f37a24f8d07033e5b77ba90da0c4c27b2d42a5714ed9fec2a7c634b083eea0bc3a1b9ef74439c68cecc95c9b6e671b8fae052c95146ef40be423b2e353ba8e85b266fcd62e1afc0307e4460918f4e51a522c09d10392a8f30ee08acf0d59680d7cb73c622fb928826f9800b1e17dae280e9df443bf5255ecbd27a11c9d7989f999f330a4c59f43af18c4c15bb740e48b8a48998a014759ed123d4f4f0ce48fbeb4a5e2b038141f51295052b3fecf40aa08d31a3a1603ed68365a7fb51e2fa8acd74584f71ef59c6f11ef3a3e34a0b634f21848ba2b885df49429562f5b991811b54117498476d441c645aebc94bb63071ef717546af6d884dc3f2061df7297bdedb656635e14a4f0273b13d5b1b09f793bd859df64ce92dd81ca24b3edc7f2214054e2f8971ef508e58304d0f4fffb7f4d0c874dd3c7c2a06b3e291d313de0d6684c69c6e0eaa937fb1b2a7afe80164e134e3a00e8562ebbf54e3e86cdfcc0e4be6e15e70132af01384c7e91a8ce0f375bb8a213a0022a5595ce64eb2e3f7df7d841e9fd7aa51ecd6a5a06a2944af86e75ca69732d5af1c1d4ba08a97094e434bb42c59e3973f52cc146ccf2d2550bf7c3936835c58727b59380fe913057af89745c36f7073d609b17943fc912087e865c412f40bc5adead0c3296ef79cce5dbaea0aa7ee97a2b643022e8fd16a86562a74ef8312fd4c98025c3d96081d98a80e4eddfeeaf0e7f090249b74dc8da84cac8d2c702e3dd5683f2d20d9637ad0927b9f16edeed0c3d360d3e3a79328189b1bfd042f662cfc39a4da29950da3b81b1585157f2f6054087460ceb7ce6014c3857efe66dbfa27a7a074b4f020da5add5092d4787efb2c689ee81fdfdd6c6eed1316398b26562abf002c1999b32415b64664c43196262308c12db3dea47bb8af457739f8fd1848a11f9e689ffe729be050fe02a98dfc89a80b477a3819aaaa55f3f2ead458567b24d408cd85713ef0f01a9800ea08eceade0fbda547b5915f3e71e3d6c667ec49b2182d84a04dccee094135625fbfc311bc3e35710030665779cea54b28c902e89bdff17e77fe9d77bbb6795e1731f2b8e9f153e55d11ec858ec2cc367470755f2e1dd50680f1fa58d12b22bb79f081bf24dbfa3c8ab8ef3c9a09ea0dd3a4963bbca40e9509e8cd57cb3c045ed4ca7489566849fdf5296bc810608be0a93a2983bb6f1aec43ca24d914b7dfd794433b74fcbcbc1f22aad6770681c","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"ad69ea8d37b1e4c5b5077d01a98d4af9"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
