<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"71dd07d7ff94e6d95b112f213375e8bd772e09018dd418dfa9252e40f8c90ebb464bd6c194260e81a81fec8b2210b0224c74021b19f32c799eea8c8d25bb2a91ca748c4cafa1e0ee93dd279e31d7d9c30f1dbfec9c130407da68cc685170a419439013e036077c638c459373ac98f413c87c073ae45670790733db946a6777e909c88afbde3e6dd2892efe456f2464d5012e5146e8db37442bf6488b0dcbac2511bd686f942ee42732ba0185f35b114abfd1df871fcaf203cd86a2753efccfcbcc672ccf783088f64bfe6ab4e936d4980f49b77f9a125706ad72752410aa76c8918f346cbaed6a50ab89e79a1100f28ed884319daf23a3199d4634698f79d89accc2b83cedb7c7f529755ceba472a401add79195de183fa0da9dba49baa88c416507aaf95cb348a3e424ce6b8cd95393308a3b4ccfecd4ec40bfd9cb13a3f220d8db2bb294b54c26a6db789ed5e8970120f1a2ebd4a2820b724439b78ad74b5ffe0e6d79143e36ac1d00765137850811fc22e9f4a76a4d5dcb6f33b549d8d051b10278f2c3315de2d1b78a603ceda0161595efd9340692f2e3ba1398fa626a243e5eb418a3cd19a3fa639e4c136142dafbcf808d28ee3579f3a5a145937cc1e6cb8807f9636b18f32f84ade1fefb1c75b24d4982176492e261680163ad306e985c29eca2d30109af316e08db9ff76e762019270d979a59ca8e4899e0795ae67960e96c3fec561d93d1986cf0807937490707119b52ad16f6b3a3d2f9059fee100a7f749cfb3a91482e39ec6b4558f10387828fc2b9d846daa0816e8a08d64087783e5e88cd0ce92425ad0cb6e79917b5165a953895d0a42b9f9f6469bf3a5f82939e95e3688a219554af9e5f29859fb31deee636425bfe074624885c1b3186832a5b95cca4385c735c67e4da5a6e6b3adfdbdb58cee1dd5e083fa5e2a9515cc588f66f246397dcaacf8981ae1ae68312772c6e72d6d2f0485cd09ddb672bf5d44051a56c20da2c550a99b5e7b8544c35dddf1873c28e85253b5c8d530b1d0758e0fd0a7bc427c5532a9b35c4bd9593c3aa6d2939e5db33d6900f6d8952a4f8a85293b62552245cb0212ff49b3a286b8f1a6b147db8b89c88a50c6ead68091f760571386b9be28a40999f54e0a020352cf0ea8eadac8eb7b28a92e0ad7404206b83a9841d2d63a7d0cef57c1b90a81fc7ed3940f079592df6696ed5b8ed14b586700d81fd2cb82bd8583873253be0f2086b4cd60bc4c1a03e0d57ab9e6b9e8671e6f299ec483a6fc915e25c14ea0f8e5ab31f357bd8aa96f9d3581c2afa41d61e46b6b8c696e011100eddcd6cb460d635d6a7b441e0fcdd4a5e2d669f6e23618e3efb8967ded0e0d032bca87c0680989b5bdd791d1c712a3a27da5817c4c8f0f44e99fd7e0a4c4e51f950461426e07c89183c123666a04f0d7bc3e43d0306a9009e1d388f7cca9dfdbffd220765acdda3991325dd1c0d90860f429db4fcb0a9f8eb8e8f32efdeb64fabd6f9628c8c1a510d880b4f15e63c8df74a0a1b85680995dbd19228cf529e18664bb73310b9554b0b383128957aba1873554f5dfe923d1540e58ef906c919156d8fbf02c2ce127b9c5c042f9b5475d589bd42a638c72650a5e5a25805e16a3bf06ec4bbf6d705e67453c852c3524f9c3335f7c3a5caf038613c849aabae4b5da2d00334b95367ce07bf0a6a3a718ae39a31a82f81e3eee3bb9294e34f693be43585cbf14e5d288e7cb177d1887eb40da588fdb459585b1f9ac8352028641d5fe3062b7d7c17ee5240769f4321c8b1cfef63fd276270e2932acdbdcc6ff4b9b6760d3f7c932d2c72751779160cfde0e71f7c924484939c5718124a64bdb3d18f5b61545454a2c43599b1a84d9e9ed3f38419cfc546ff70e251a4c906477da8e8b51e7aa2c93515a24656a44ec89a6b03c9aa56e2f9b79397acef88457f5b1046c38add485108b0080ec93e771d137399f1534725e054570db23728fc83fa160709e7de7a00481b94e1c6b773908765ceb95e8d061c9679aecc8cca06b12f78a8179925b92c3037d4cd35d04357fa59cd4fabaeb1c4eeceeb43dad605515ff9823dc5846e080b6bfc4fb5254d43a0a759f25a6e86cb2aea59ac8f561d5b0bf7f33021980202c11215378079590c0f79246a1e11e148f922becca7ac4f3722d9bc8815e2d7cefd0ee64f1d1af7c822cd91b9073fc57e46168e201bd9d2387d5f6b6e8e87c505dc7cad4030442017b8cccb066d9a7a97cf0e3ec99ce0201e4c541030c3f33a382d62526274286a3c08683755bbdc85302addcae6ab679af20360f2d857315d4fd2a8876217cc248bd3379eb54b52e9ca88dfedc1557bbf49a1d82d05c4f03e327b148d21127225b27bccaec5011eb1cad9353e26875cad10832393eb05454d1649ec8b3320e2f6ee1e7c220d59871476bb67031e361ac993aa7a0b6fa6cdc87da2db9ba01bd08c49dba6d5538074407141f73c492d172bb22cd159acf43579306456c2e487861ee7817a244ea14f85a5fac0b84f9c42e6896754c52f177fea26dc1c7c391bbafd5330221705cd9f8be4008b8fbf5beb6b25c0e6de6fd89f2f9861bbe81b03b7e2ec223ebb2c3f11db994742036491e79cba264273541a32668f114b04734aaccf3011c0ec5c80a0f983d1027a15fb0ed786d26fbe042c25578a21234dffe4f57db9dff58cf95e56e1f19a1e51fe1dc4a92cf51086a7b3d3b8e60912b9e7c9de0b554461f766a13ae47d577c2429408b639bb1910f55fd2743eccc0dbd571947aacd747ba900b9e0186570e1cf0a2fc7176fd603333780f844729547815a0b6121f5934dc3fd8425d6ef8bfbcb5c54b4b11cb96b2856ab7f5d04c867d42fd94062b14aafad6db09243619088f1cdf1699184362217c290051519ad857567553fdb913c9df8b9a86eacd5b8289e4c077da81188f36a46161ef397d5872436789dbe722f767b5caf7a29d511c79a1261a8efe9154ce1645f0053b1683b26ce6cd5a13c02d5c5e17e3ea9af27bbee2d4225cc1cbb7e0b8adf9b6eca793eccbf039ccb7c617801c987bc341ed14e3277f9eb95d498fedc9c68d102c5a09d5e3aa5944da4a3e2ded0dde1e3526507bfb032010ff6d40b61a7af833ab3269726ab3152be1194888288083e4ae99f2df96bc4984e9e5463ef1b98086ea369b6dd7e1d9d6aef40c0d59c69c91567e8b5582eaa6c34abea5063298f03dba40f70d3f45319b1aab7ff53d020815a195fd64e9c0d8433598eeef967e77565d1d6c717cad9375abc4e7f00070ac1e035f9557fb70fe8fddcbb77aed1902852f6965b17a76f8f1931833d764d2ccd947cd6728d81332c688b6328fe66adfb497958d5ae5e8d4d2729a41c36c54a18cb0dc26e696248156d2a2766ccc245be014e3e410f54cc209bf16ce0cf32b67eb4cc2ba8c1d35ceaaa265fe5b89327b80c453c3c85e61115079fb90fcb30985516f8073e4f1277f7558a481da73f486150c397f37badad2c0a68e31afca9b595e84adbf5cbc2b806fed86f1f2fc2384e8e6b177b68df7d02def65fe551f994fcdc9e78237cc65cf159bddb4049d047a22645117daf0aa873f2d6b66546048beaecda952de5d402e8ba722ddb550b094889f3e6a84433f449352189002219c158ee56f46c3e262e4a5c2da3207665aa9fc090e35fe910b7411ed0d571e70932e0b733c0c9a1b71389de6a82975595cf667a4a7d3a23871933fbd3d2f30cdafb727eb020d2f45d9b1b0e3c8ad698b271d3f126d52e074a8a38d540809bd82e43d9bf53612fc3acf0638f8c3c6e8016a0cf6139c4b12e9835641848d21458ddcd790a10b419d50e165262a7851163a2161a6db6d9b9f2964c0cf4353e6eb7b70168797b98e07494484d4c1a595bf7f038132f5734ee6419e022991e36ddadf4f97adfaeeddb0b9d68d5b6428f8ae6f6d2f0e415fd72086cfd25c76eb34c5f51ac696471742de0d0061cb360186d566ef032f58c603aa479a9a9a1e577a529e6574ec59bea9538db728777cf2139c8c66c6c7ca6711eaa2a06c0256c98654a78f66ec76223e8732b949d7ed43beb8a7e5b78284ffe45c0146425fb825009b4c9ad7e58c7833d390c9772ae83034c45cdc8187d16ecf5fd59e4361d57526ebd1a09fb507bd08c54ea518549f665c06fc6a0cd2eb6f06b2a2b145f0a0d1061cae9170df56134529db547174d0b8036666123f8e544251d6b7cf083af048d717b5b48775fd4d1add8163ea70cd66b51b3d549f617541b95aeefe1b89063116d3b6ca01ec17afa7a963c29a3aac5b8016d71e895c9d06ea44fc844f191ca189e4e76f0c0df19296ba9970f31b3e7b4aa76fd2ad7585d5737f3c99af67b987d406d57bdb61f311b19e16a6ade05d4b8743fb61d04afb2184e43bfb548d255a8760dbb727d61723de480b51120529ce711c2baa4cadd60ddad0fc13a265225206967c73dbc91f018ad7efc8593cfef3a4b9334f93057ea9bc12ec421125f7c21c9992aae74b1f444de5d5614f641f3a6c1af83209ec0aad4b1eaeba2c6729be8f4025eb7a982d596597b8395efe6b7064fda540681d47597eeb5ed807c29086483275d657099fe0d9c26b99f13754ac5f6810884a5490193fe48136875bd8ece0c727bbcb0e582998836829a97511b45086d2e1b67f2515e95b9abe24e70d651d895c458f71d61d4c45933a01236026e9dd871e3503dc376dad4904f2d6da0ec9e2c4de506ab78a8d7be40fe08baa52432f2887dc24b3db096c51e26b184138d959aeabc5d922ab55fd1287377056658b131b13e98214e2c2dec1387c6155614bdc5c3326b05ce7e060615073510d4455276fb06dd6c80b8667a54434abfcb6d9926e315284edb8488882b3cf50344e86a56e8deca9fd3ac09032722d7889d255861067f9e086c7a337788360575ee9ef7b4960f0d1a5cdf39577a1dfde57ab1cc18a0866c3094f07b6140aa6a91f725d6dd3982f673fd1ac0435c2a4bf07d0a868f592d69d1b4aa6642a3fc7797fa74d23ef6871b4732d3a0d5327daa5a487e2ffe9da105669fd65db71b73f27b2190b70fd7377909412d316973b4e293082e722e035fc477bfbc221bd1486d7d5f56088cdf24e94802731ab5905065b9eed9f3b24db6d1ace6bb4c4d16d1d5e4bda8ec610537b24f50294751b7d92787a3234ff4fdc2df08c2fbcf9d6e6654b1a4897840351c9b14522b83adff0ae0cbaecc32d10e49b8dd340542b9bcf1a1cee4e0c1c601c117e696d82838cf7a6d6cd69ad98b190c42cfc6c183760eb628006cf69de9fc50b23cde57b6aa7b4b90ebea7c4ae374586cef5f97ab164a2d1f5ff73b5894713398bf5e96a96c3a823fb1d6a0858439bd0363da4ea2e202d0c1e168c0824a16effd049a1df5376f63d4922a51090ea05521044f621543b06595c85705d64072814574f748087fb549801f3e81a5146b114041515cd46f45b7b6da86ffe75970cdfb3fa88d21e31f2599700027a3c58b9624c0b74d014aa311cf4a6d91b7e150243bc75abe62088c43375e07c5986a9c956aa2092762d6ba9fa6f017a9849f371dafef89ea272f8cf8223c839830e67f586a86612e3a09ddbef2197ee32a17707c6296725eda7e94e437306c151b3dc7d6f425481b016f8cef695659462b5af847afff76d8f47e53849a927e79f10efd196cbcdba68152227c623d38029e7e517a5240f8cb3a64ee5a38c425cc9aa3bfc4cb8265c73fb747ef0a6eea1dd0af976e7e2e88d5fb34a0fef71630f16279a5cae68dda876afbbedafc14efad9e004223a43e5f7b432f55c59458b8a0094879e4d5873d2bf2e1365c0cae829b63da597ec71a8554a116c484177e562320c79c64bae79813b3586f822ad0da63d9eca8c6c5ddefe2965f33faa3bbaa329eb3c3f5a297dd47a61a490b9e7b3beebe3f7fa45a24ab055c83157e14f4cc5d1a279303e321b0e30c96d4a25fd1030a6459fdb444d55072735e551191ec22095b63cead557eeab4ae5cfa2dde3982ef4dd8ce44a1b6cf4febb127a2bbb36d68e746f5122cc909f195db1ff64a998ef862b13dee35f2ef6e1d488f6cfa193e96bbdde06d932e71c4e5a4e4d817b3a399032686519d3fcf8936593b91c0084ce75de40b2b5f6a55a4832de8ca3bda3ac48929caf7a8f12882c37a3d1ad11853ca94e87d3b1c43a77921aa08e6ddcf52ce29f3ce238734e3a0957cc8e7a6abc7e627dd8bd2e4a64c88ff83d20bddccb15ae50f53cb1a531ba4845fc4e7360c9c7a0268daabad5111c17f95daca2391317fde36e1f4190a62c432ec16e4f1a2eec70030188a5c7e7a7f51665de2837b9d97a3f85fbe3a25f57c99ad8983998ee1c3411d1a2a2ab3ce3c6c378d89d7e71fe1d4c5b02850cc31d2851f9d83543213c1b58d817eeda178fef9b38eb58eb02204809a7b929b5e49e52fe2a0bd8eaceaf1bad94981fbe0f3534fec9cd6b9c37763b3d2411c631a34e59b1e0b2e76850d0727f58abe598887ceb1340107ac8615b285e34fcf88d66b1e73d65769ea05add0e7ca8602d8bc51132b003a9ef463c4dddde31f131533dcfe1d8dca8b1a1bc065a60914defac326c9ff25dbba759b70809c07d2cd98d3c7a7ac85b27865814a9b4f3fd8a22ccf709edc00d593d11f7ddcf6d1b0cd21e681a4c53888e0c2768f7eee08b9f8e7ab9a13513e51259db4a6b64c73a065570127dca41641bbf688959523fd093601be96b02b332b6518f218a66c6152fc45031838c6a5d0cd03a3718b7511e9952780dfdad208a122464bd039f3bf2b9a8427a46d767370e4698c2d0a6eb7b3a1f2d42de1df1c60875e4c8dfc7256b735afe9d9ff604181e313d51f299e9ca713df6bee2c6825b0b3ae203fd464f4daeaed62189fdfd9bb144cd2731df7bd735286f160ca59e710ba594fa51ce054c50d01a4c1c878cc4269ce3e3e982bdec43875ebc720ccfbbee2d5ea8e246bf82cdafea0248bbadef20cbd82d15252e4a1a8a850bee065221697983c903088ca07e54b1f7e23e4186e874e57b98d8e6d3b69ac52594e9dd837136d165c6cb3f14448f255fa8ec951a5143117f0d79d2272a0607114c4ee93f3d3da6ff9e967a7369b04018d8330d3bc712870f59bab1015b092e240c0568de4f6b4bb0e145a579cd27e76d8d7c947d993fd6b4aafb0a0b22e2f6f618a0a30b4a480425d26149e6343c0ea6b947886624ab5d387924f0f549bf03db8874a1777ff3a437c0c4d544b778ad36d89d70fba6c8eafd409fbafd4419f112f6ab615960f2a2a13a1e8c59c8f0672840e662b0e55a9a2bceb381331ce2f5135325c47a2ba6629f6c265f19ac2304b0b9ec6313da89c12704ed0880d885a876471bc08626c108fbd89876edf91b04b6bffac5b7f358433aa28198ddadd8499b7d74d2b1339d0f8d2eee3d3335062a5f979e4c05106833ddc17d5a01f43fec7c292734fdeb5bc672ed16a3c1d7f577e96affa5195aa56dbebb9885b8e26fcb6bf294c81aa8c8d31fb287c767b2fc14cd340143c8a0d1321deed16533ba54149dc638eda08357d4b6c403ba346e8a9e2a0bb8f5706d46cbdff9c6539a133b8bd1b4d6de096d5254f30609fff2b3ab931b60151b78b2938028fc2fd8fd0799809b6194ceaf94eef73a65b12baeabd094b7bac522d37e24e187062b9c0183a675719a5bc520006cb0a690c33d796e569f86dd730ecf4fd6284898450d6c6b4adb8607f29a822a89c43f289c3df5f7b9062afaafee2fa6d40d4d18763534956464400ca6217ce54b018535352ddf8c8dfb5a806a7352cf1a3b64f89ad30e7d476b10d2c4bc48a15356a2f8de5394a8d081e87146db4383f19fe84c271cb657d81aa2726eed83a609ebbdf032d7adb5348ff0beeff4673834882e369bd288bd99a75c34563c484c693fa451d858b3dd8820aac73e15b1e480cf36aba6c580e6b0b55c332779dae835beb3af0355421288c5d215e2ca916769989d39be6c0d8c399527ebfce749ed8452647f1e5e012f81fe8dda76e5a98074765446ff740f45157c72933ea85dc5b72e27b243ebd8aff34c53157696f81c80ba5ef8779f9fce336bb43b736e81d11c8e0e94f5fed08e7bcc00b3765cbce2ee32dfdb70da146fd181b019a56e9eaecdaab1f563ef6f6aa8ceb6d947ada17adaf01e8d1cbd028b630fb7435febaa08ae1d243f1697eefbc544831d0109ecd43ea75cd566e98d81a8a96761c7b491b4b8c8dd49c1d4c992c93fdf42502ac370358b36d82e97ad32399855081cb9a53e2d0ce9a6a66676841db3eae703a38d14edf2ee4348a487f3270b5306186f5d6f5d63240acc72582e28118214c1f15c663e5add8677e3ef386cd781687e9400c3fa688880f05fcfbd2af5cafc781e39df2fc1bcf52759074dc8391247dcd8e09cabd90cedd80ba85393aa8cbf44ee066b88fea0c1d6032f874b0906bfc1344135b5bafa416b8f55376aaf2092859edbf41f81268d28fb81111faef80f406f9871fd0e3c8cd89b1782a277e83857119f50816735976dffeb0c362e3d73089eb3c0beb0407325cb4fb0db2558597e9673774c1290a6b36d503367c91b613d21f4f596091477c8357b4dc811355c6f67981ac23186c824b2b7e287510f81618e3be0a2587e8338cbb96cfd6496045aa153496adde7bf55b64a6f8111ff1ca813daf2652c4d631f68c872f4daeb7cf91bf1ea25797669e20ca0897cc5a42cf8d08d116768dc6f7690401b91cd233dfcefbb76cc92301bf4b466a88a2127ba2e5a0b47c076101a647db68970762403938d579369dbbb87ee8d7099e37c34db6ac34d738095cf1266fb7692a2710a87f5c0f5a13d80910ac1d0c2299b944b63d14c59d7015b6d092a56b6db92149ffb6be67454758e57e3b4a057af01b7ca8fe25a86c2222fa300f004fa42949d5c99ea800a70d8a3047ef3c90643710e090ae1250e4d59a3505532a6c7e2250fd858d4e422d22736dfdc9111e8b306c34be1c8b8b36e51827e5a7c50cbb270629011d01086ecc556fe22b49180756ac5ca1a109d37324c44d22cd225acc7e5a434fa9a409acbf91277486a4a356fd92decd7f11914693a4c6fbba553a3a9a28f6fa2c1a48d661c821a0532ed38961feb8f39eec49512ef3767e6d62cf29be11f4dea33d10e44947be0265ae94f04435cb40ba256dc38eaa5dd530248d1eb46f73148e5bc5d80d6c915986d8ca44f4c4a73bf35ad56009ac3d4d7d02956272053095c84bd38b0289b476486ba293420ff7904f12fe3282a2c7c71ee32c0836b092ae992b357042f8270999ea77a9f4c177bb91ef47a125acd9af253e56782eac6aeea9604cdf5966016719a0376cd060f6b647b0098b2c8543f59686e71397cf82e72066c8bcf0b519f696be7f8b33a61cd665ff733613d29dfc3b99d9980b52b0e9d2fbaef8156d482951b9cb4a3c1e72355b183272c9e6a348072634fcb09578906aa0f553f6f45fa01ef4ce1743daadfa35a3c9347b608db0f50375ff1834592c12190b327a770445e5b60b8857689419c55a4a12e47e1318ab407e35e795617d550329a582227304cb9d41e64d5b0408c77be200760de2e99785a42d45f0a8bcf5081a420eb001a772957f45138fc943e95c1addb3eea95346856aafbf7c202a9ed1b02788e706a28171951830956459946cce74403670114edd6dd83bc45a6d85d8aa0ee748206f3baf8df1ccc1a30b2977ff91c31368c05e63b0b5ef0cbeb9485c0a8f502597c3aee36b5b1e88d25a4bec78aea231c6ba601e2b6f54cb469058820817d952b6ade7579029b23a45d34fcd35abb02e5ab8909fd12a7a0fd9ca36d76fd6be7b31dab03a9647fb8f88f6307136a822ba5952b20681b3f3263a3a068b3c37518bed17e0876fae00b288cbc8ddf39760554cb22ad0fc9ea8815375678668b04d38cb4bc5283bc5d0174c30e58d13010ad188126a883e86e0e0881e31d9ceb7d8517eeb96df5e081f9686b7f4eff5c9e3c64d66e366aae78fe2ecadce58bbae92be3b65354f5f9f469377d3fb045a5f71cec557e71359f4578bc454f9d1efc8d09928226511e140f976e61b7cb82cf6fa5965b20853d2acfa14f4b645366d6f0eb2f77727a44e9edd640e8e5082ed744f9622566f7b776c402897d7f70a4240a12ba8c32269a564437ab14d6f0d974187f8b4f1a66477b6aa405cb61759f5e15b20fbd7f290d64afdb44051c0d373641ff0910ab61b80d393136e31537568ed5a8d2d417c0c4ee73af12e618bba758f16f4d3db6c25ef9148adff19c1e4e110d3c944a737c79e4186715ccf2f1721ef73d87418876add3cddd7c62eca0ae96f5789ec3f75c1bd74b51683f553f5000808447eb4f73ef52489e447659c59d61390cdecad2bdbdb1fd56574940043c94733eb1512ada0c287fcaac59b0dde60f6f4c42b2d5589a7ec884c0322d0adc82515f71bcd5a40d4676aca1ac6cadb7ee790fab9a5c269b813313f6b1e7fbdb00f2555b35f307802574c078a189a7a8b2016e58ba03361402eb940592f73e930fc1456ed8faa5dd217d469a4e1cfe6afe5aa56115dbceaa09a0a21e6bb228d3c1c8b3d8c3b070ef5a638038b4edfcf5536ffc0064c41cc73e0f2738809a5453e2aae479fa3e11b920e1f3f29826efdc6eed1f5b445fae81e1ae46200360c37fcca37b5a5ea987baeaeca60f7142bf181b7b65dd9c6ef1695d311c2f919f810de09120b48f0980c5889b3404951ce67b3a53d51821fdf2c9cfc85512f8f3836e0bd14cfcf9d7cdf88eaaa983220d5409bb3d193eb1781fa9b9188d6c1660d0a6a94faa25346f72b32793a6fd3ef7a8ca706b1233ca586c87829f7f7b3d29fcab53adffeee203b56d2934249dc3824a54446fc53418e9332e5f330bbf6613783cc36c8c16ce6ba26d43fc098d5259e315b18c4677cb59165dc7df7d36ab0e25ad3561744e3bd81b6c2de725f14cc11a384f66b074269cbb70cb6d4300dd3ca74ce6f7e93795793f389d40449eacfdf5521c61de85977f3e1d5777db056955e7dcbc2829f4938dabebced4353c385e22da3b9ecf46dc128da7cc836dc96726c8a55d271fafbca1ac09630c550144ee48a5a6f985c9a76d32568c99582f6bed54b3ffc80da8d76434395e4cee56c5e8a211b1fe70c9c9056ec0a226ee41273ae018cbccac6a03fd822f39bc9d4f9c60f702502df1f89b2e9f69db5bbaae9f34ee2ecdc51ae2490009661210c8f80ddf7e8f75717afd801c2e77c7ef68c1cccdd288c382c1859994fe579dc55262ab2394a2bb7e581dd41a18e8ee6f18fb21fd8a1a80355da1e58570e30700470b7729a8105eef30126fd112e35680c49d106a2b97c8b0a8e3b39d4550d19a0004a5ab8f63b6b17759702498618845f63a1ace04bb05b6c8ce28198a92f60081533c2c21d649f4e778325cd0062faffc566d593163d6767e9c84ef130ee8fae61941ec5836ce200b1df34c422e0439203897c488e7df64fa89bdc00f67c751b1d3b496a6a89d8f2002008af8b853baf2a1be215b0d23b96dc14c20306fab2aae52046bf81938580ff82c8cabdd214bc77f763332406c2239bbcf8ec823d3fe835e7228a853678523e2bdc89b61d6c313167fbd748bf17e84526fc3c91389d9368862e0e00c42568891125774a6d4d00e8245a90055715d43b56888c59f4ee07d3e53c892c5e056ff67361531cb604fe2d8e5bd578570a153e5415f4fd7155f28d657898f8cad700065fe2b1991d372a135ba02777ef116e88ac798c51755fdec0fd5cffd13193b2ecaf0544b56f77ef2c7e7e19d5ed410ef49bc532563aa73e5907e1dd3b660710e63fcb19da7c871b6002abd61e0ea1ff345448b2dd8a42bdd8d56921b1476a24a5b767b9286d2fbecd7cd09fb427a79ede043c7bba0f12d61f514d7c99979b8c2f47fe5c272b4976a21506a956956894a1731515713322d41f6119ddb5c931accde1093a00ea925c36bdc1549d16e9b4fed097603d2f261c40e6ed21ba02708abc012205b729e99a7d74cfa01f24cfc1aad5571e00783cf4ccc9db3c0bc2f72561ddaad8e57736255f37993c7d756e682ce06cc631aec34e2c3f3a37f594f15256f801df4f164fb852417182e34e3ed968003f878a6244b8a6c439edee636f8ad1799d22e6b20c28b86d848583af66adbfa677a275f13c1bdf33d88d4f566ded89d7144e5e50d0d99cbf0aa7cda582a5dc3967f980c248e8609cc85f283300f0f72aa2b139b07e715721ad675573c6f1f984a96e9d75d94f3217105881b718b8722fad19f19184c3b15a7209b86e8f2269fecbf11c49f1bb0c00895e99e0a0e5b568244b2bdaf5ac54d00cd74b27539b62c802e68761b621f82bfe6896266ef30981849a1b4a09a9a6d316165099993d3484bb5b9335917c53ae2bd884c572e57bc58d2d08033fe6d3d58d34ccecaef3c13f12581d8b19864a20e75ba6fed9bccc15f97a1e2cc6a2dd985b69117abd713ec1c3f7e580a693180e74017a057b189033fc8a5f0e784e6249f56b853e9d141eefc9a02c88d9fcd18e4a4a17e4622fd53592663400d4769fb53d8d7cd47440b4422ccc099ddc6ad52f72496fd96949f4753fe2063e1b0669f7b89e64b1f79f5dd6c9601fdadfcc6bd55f268cca13459bf838044a03a25f3a016149a86d6b45054f4723814b2ee2f11b4e16465294aca08177a17321c0ecec6189ac21fda2e2983bdc0b2e312f69d0dfa666ef89cfb7451ee5c4751ff553281e0edddc99f7575644c67ba28a0f9fa92e4f1ff8ae7ba9c0fe108f12c467f6a206b73bdfc41b6b97d18de1716c9b10564cb471463148c2a696ad8e89591294a3769047195530146ee17a6dd958d8aab4f46d85642ed7c2305e7f2685f5db640ce481e53b1065ce74b66230c85152a56e8b095ce226730cd94036cc88e266409a09cd942e52847d98e67247e700e6a3f180f14d2e8681e78189bead95e71f310749b871a76aa03940b592bbca76fc5e6a58fa06ec423d110594b1190564bbb48c064c55206eedc300280a5388cb71c18a93df971a8f7ab2b2b7ebb8b9c17df5458c42d8c97cdcf1e6de22e16949690b7315c4d232f70ca704e4de5c3181819dcc5ffda4064284e6e83334604d8fdc07783335f7892efb83916b38464d0db2154ec2a04a9d009b4e51a0779c678f581bbb39926ae18c3427ad62e04ece2a3a9497eb2e17101c1587f56bba2a8646c24a5dc888f198a5246ea078853e7e52a8d83606e8870ba0bfcd1625fc2b91c2944d079af384c00cf10b6689dfb7f6942be7a7aa3abd8ce8acc0bbb01c34836969921f8d2f54e341c2c18037f8ed0997db8b3c09b22a67ccd2f4da76cab01a1e380853b658727cee5e7befa336719f9a80192ff5ff2a14a1df17d61d4c6d8fc0d5c2cf6d49ea31f0692818bba58f23f4f80abdd810d6c7f2be4f2a41a6d9a2062b5145fe51f1073c7b3b32b6b780b0756dfc7420738b251c7df381a237b02a370c7f22bb8debbee4462727f7716201b82bd9fc354163303248575f8a31e0d3fdd404b05dff2e0a88089216078e28ad9824082e3230edf1db52212026ba7353d62725bafa5fcd305f86cb580241701770c32986f4fecdf15234a02c433abe75d2328c84a866fb91d3e17c2bc15a653b4930089e2e70900b580bef2fffff9d3352bd540bec090fee7eb62d4ec8bbe711044f968b78b1a5ad04f6547da325f26621da227623f848429eb515c49438fe3a491908264985039142e7e3777064f8a1041bb6e90fb5d5c46ef1be768110856859782f062dc302808192a385a46426403011fc493cb52d525736fa0228068413c31c64748a82b2d21ed279606a4fafba3ca3ed88a98c8521c0155f9920931130791748e2c2a908acdd3f67e97e6f8e384ec10eb846586a91da3838e05a8459689456c0923faf36c76c0504470f37397c60ddcb4db6d446e5e7e813668299bc9834869342254413daf4d4e91dd71f599c4ed7534538a38ceae36e4caccbde1fce483cbca174e86c5d0592a1edcce78d12f0efc9c5e4e3dfdb7dfc8df7b71af18cdaceb2e10b1b038c6e3f9d402cd362738726d79cf47841ba56885ab91fe8009003c8ce55da1c40c60e265b9fefbf60777de2bd81e3570d487bdd8581c62cceb7176c11876f8667a71e98dc2d870623b6c4cc5bec492749f2885a1a9bc3491f8876d341fdfb78a0c6ea8c199e9f1f8de1f02411f549578bd859397b4630504a09f9999285f9b1a9ee44868a68a5f5ce681f794e40e50bdc192d2559c5b30752de2833656ad388420824fecfcc8f6e6f67961d7fbcb250f508e0b967aa1cb4e10ac47f9624a1702eb13f15e3164c067b71bc5fc62e02d178ee4e32c99a1fb1db48d2d544f9336051b29152926e663016bb06093a861b3bf8639c0dbef6c09a268f5d4db17eef860db4f3e5c1b3d4be562a1be5d5f0ae48159d2980b6681a892d909165904ea451a9d2511c3ed6af5b533cfe0b68b1ef7bdaed2fada2c540cab065ed565ff805fb493fe3ac75df3e2b23d0bfa8f6ce5d30f9f0f49c5fe991fbb28526b51454706088d015eb4f0940ec32790fdb872467232be31a1a527425171d70cdced7baeb7191e7ec1eeae905143a0d61342ade4db22842c1538a886196372600d2d7562945835ef72329e2694d67556db59a4c7ed7af8e79b7770d22b8570164d1a470bfc7f73b0ccbe2402af228eadd1dd99455231a5c89105e2b0c305d69ae0628266bc90ad8564f792991a1b8c6d24aa57c1bbd85b2e71af77066e8ace5e520e2c851c6e42932191a492d0c1016ace18d8005790cc318d9e2b957a3b2218ccb0f700c74efcad86f60497f6fe37d71389605ff2eec0b12086f6f6df42fbaefe40647d59bbd6b409a37934d31c57c8b9a4b41695b6e59ea3594728a5cd80975bee3a283894f4d7ba87721422f7b0552e515616229ede209f33e436904bdf88d7e487694e9e87c9d1f78dee2ead63d9e03d4414599e28cfa99fca291f0de5dac1723673d87cdc9676d049ee7df309eeb139064231fc0264eea6c5110251ed21a5d0bcc4c7bf7b82be575c229a5d1fd43d0626cf359be5fddbb0457d91200ceed7cded15af50df1b3941d25576aa3772d1b64867dc15f24fb2de95387efce1a07ef1a70f71588273298a5d7a099137b17f78928d615b60628f6284ae74bd901f9c15ea50c7e8a60b8b9047e42ce09a9d4267a2724f736d771c216b5c99ff4c4814d40b99d96cca3615993dba74ead8f45b32ff5818f0313a3b93fbd9bb9457f7e54958b4e1927b4e3001ce86d8a09f9abacc566c8f5281e52abd759ef58765cd57be9456ab110b85f2c4851c64353c3065b68a630e3c956a95075c89db9302d82d3f72d78a1b794e383c3cbd0a0db47be3f1dc762108bdab679598c02692a5e48d321edda597ab310d1a6bc165164095d8d7f9b82f12792aaea289263e7b995ad364f613a75425305d1f5f6f46746bccb7b970e7e5db21438cf36eb79fd70565b8e8b43031a29be6da05cb06e5fdbe42ae34f89c6a0179d44753fcf590e2acc3dcff92d2115c4fe7f35b814329b66d6084530ba890b46540d88faa7cc8f9256ac2dd1adc1616609e12a4ef26023abae017e15c5c73b8b47f046b657dde1ca0715c207bb5350a3c2c7354deb7e15cafd64c4189766d49443dfbb61c7d0cd502c4c1f8454e74d9ff1e9ca780a954463688f16fb1949fe7ad6ec50c6b3518c3ab86c484e086bad2d68f880f869d2fc46a971d29d14bd600a0ee356acead7a981c3c539b752271166ee7bf655996ebd734d0a43bf5d75f55bc7092d71d6cc250651060609435d1fae30c62a291168e210742c16c61ec5bb6b21a29dce3003b9ca3b0703ed4b4b72b98cdce50cfe532dd6e0a867ec81b3a7d010b5a5465d6c3822f0bd225121ac5009dbaec520f70aa3fda12e7476555654d6df7a3135d33fee98248a1924dc463b6d4830724ff6e20132746ae94afe055fdbebb0932e2ceecf772ae72537d4b9194309e43f48d76fb4f770f746ffc45cd7f1640cd7544b871f72ac0207d809a5c3f541366a742faa41fd5cfdcd0425c781ab4d0acfcfce4f00e549a36c77b88312f7b8152bcb4c83d1fc5ee09aacab992bef877a2f78f14eb739b3400018e9d58438d82c93b4b9a812789c3048bfbd8235cbfe01e30808dc87db47772339ca05b557f5f883c0ab28dbda78e5aca2fa338cd7c547a2b63a26e45efedb77991ab6054974411a666c532c0e3bbd92cc70a6feb70e6bbedd1632ceda30b95b6e3416a4354f2fc8a8e63ed15dd6ad47d71ca7743c1eb886603a65bf6e506fddbf4e6d6957e443a6d7d18ce149c76e59c2dc9cd4ceb13c215860c9ab725672a5ea57ced93c93780ac8d5c85ff2f013f6458ef141f4cc9391ebc050c90640ff1f8a50e508ae44b42cedeb58c23be23765d2e95eae69c21e62005684bffe8e71a950f4b1ae91756a727bb649d6649a41f129003f81615f622b3bf21c4c8ffff79f3a7dcf42a9c7d559b153ebcfb39c2382a3c68f52c7320e79619499000b92b9fed5a6753f1bd9ac0d78ef5615e326ea6d901c4908f0cc3cb1116f7dd0550637eea6d11d1264327b6f5cfc9a0415f29807dcc0e9b6de1ac01dc3ea5bc80a82f1a1744cba74239b693336847988284343d6010cffb4960fa9b089ddf39a1a22e410888a3af093b22b2e8d06058f580720124e12400d05c23a7aeaa339b5fed010182698d925500b9385b7737b7aa80173ad6bd46fbdaafb25c29878a57b28d060f58509e27c0966a14cc42b8ac622c3b39634b21fc55b3fd28593787d37de352281265c20b6762e86ece1cc546f42388d9bdc60d0250b1643743a5de387e90486e4d5882f6c8e704206e8208b833b9a080e0e5c2888047759d59e210fad15fc4604242c5aa663a2fe35a01a42b14cbffd99e732a411a6d4547264bac122dd439cc75fb1a63d4bcbd6eb306f89d852d93fc7aeb30c8a84fc8c7a1e46d03382755958e3909b246a0465e543769df99c6514f071c7cf373e40a3491ce98874d2c2672eb78f1387a36afaedde104b4ee827279c9ffd32623e07b8e33bf10c62f9630384fc91e46570f393f63d34a88dfbe94bfe29bd13a3ca54e8e7ac20e206c50fdf1995af9d56d55b58b341420e830763e95cec6e1a2e3c602225cca36e7c476ddedaa818ba65311bd7cc0b426025761ebc8c50be8f734d489c2caa6c866371edc76be99e0c55d8ceedd7494e6526ca4edec455549d1db7674682a6a835378590d73ca490db8c8f31a3cad9ac1d7b11ca9eb38e1c897eff19457e34ae6c5b4380eb081eee0db646c380e3889aab3eb55807c2d37ec88605dcc8a3ffe296c671784eea0e8b54e06203ef5c46559a55c1234b723d0c39556481956201ecd111cf5e42310ee86fc241b7eee23560a19cbe7d7fcf072c6378a440cd30d9e545430d2b6bb2c46b6005d75362d1190371a6bcb2b9219122478cff98adb2ddd8fcb762cfbb644911c4750ed567a39638cf8d11c89b42aa718ef4283484dd720357e86a35cc7dd32678a16e2200c2017bffd244e7be76714f6756099c91b4b764869c9cf8cf0102ae9bd157dba3fec99454f63ca91fefaa36e94e39763057600caccf163b34acceaf3d92c4d2c42875eea9f501407a35ef5788301a5ec0ca2d933867e07e0f13794d68a7e15f0d7613455a3089d5dc22f47f5ce07b00284b52edb84a4ebecc673e0ce3221eae2f23491d8dced3da0636d8633a96ba49870fa67db50e1f947010be7a6503c2ca8786c569b1daeae89c97cbc51f2c3f31a0bf52fba296acbcb93193efb60c22bdf96e93ebf24687df6d965ad40863d782facffaa67fffc4898b27998ec0a261a96c7f80a1f7ac6d28d06b0aa7ae2385eadb860ec832be5b023fe2b81b6456de6567cb588796faddb6fec50df810e40f59512a06fdf15bd2c9f2c9dd1c981e9a438b9f08048208b13ed2a7e61c1cb0a6c55bd290804842d4a05ee4cbb2011870769535e9bece0220ceef8d761f8b184b1975bd8767ee1551651bbb7c1d56c2c96da9a867251914e09cc8efb141314869c6f797eb0177e56d3990db39d706c32a4ad091ad1a23ebd5cd2f2944f80dd181c8b63ada8d430373005e41f2c78cfcaf81cefbba5e89b7d27e896a9f5fc24e97536179934909850a3a310210afd837aa80f03a0ebef6266fe515d1248e7f377c0f31f46e5d74514e0449f0b17c6b59c37eb1bba20820b68e5cf43039390f0e172d093a723aaa71f4cf661680824363a84cc1a5928337d3c5bd2f83553f722b98cf7096a95385a8b0dc9fcda048a8b594f0994833b0c84c32253f399bc272b529aaac98d5b4a55ba99371e14cee7b9d20f6fffa6eeb22d7ee85e53114cb6bffc9f424c4f10b3001bf3725fe5d659343d240a4d96205d00abf75c1261005c2519b9de45938c98a12e69f4e9c69280f8b38bc2dfdd8911ebe73498c1bebad1b3cc557c32e0716615a135e54ffe2473b071cb7bca36a183d65d1320dbb4892e2d751251ec3f06d9dc04da0fcaaace489282bd6cf1b6660d514e2dc9d5b1e84dc4c2218a245a294ae4616078c18d8a8564e3b262c8b51f6aa716e2ba3b4b51ce8e92621d49bf2609c57544b7c7231e69275a38ba58724059d518237bead8eb95f8c09e035d309bc007086d8b9cf9011e772cfafebc2d4a721f8876ac40250050569d5422161d6d170c877d6aba675274a427caa2e73ca315c6e965eb3acea7a9f11ed33ae726441da2a8f9484c6e6cfec9f04c73fc889ddb9674301ed245d0c7fa7818933f856d6dac6f3f40bd4f7ece761180047b6ea535eeb7848bb0a1ae7cc73b54bf614071364d346b71667ae48cfabb770a501c5c11866f68d9b77221f83578dd5d173dcf1a59c01e266c9655d4d05113ebbcd7dee1612601f705a19be2a852054fa5e6617371be407cc98568e652255ac313af0c42eef92386ea28ab3c883c756ac7660871a8d252a69881e367db7a4dea0f09bb716e22648ae066c45735f0d758f978b7d577ebe8c4415ec6e7692c2093846e51a34a3921ead9d4d6941286a5b354290be2e5ae796b383fabc192304418ecc092d184fc38504d4d8925c56ded34f0be73a6c1d80d4a549bb9752aec29dda0cc189a24b691fe39cc201aefff073d1ab04bd2c63443c519c65d91aec04af607f4be363b5fe5d12bad3d5d7908679f77edac752c555005511d17cdd32941473ea53ff04cb70f3b4aad4311b250e628e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"89454eb23cf4ab199acc17580fb2e866"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
