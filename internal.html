<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"2db41b307ad1435d1d682bff3122703ec000311355fd4572d9c8c1c769094b1556cd9c0e9d0d3a8c8424e1cd9256ce0b8b3d30d187e94672867d09cf6b703bd2eebcef25826ea43483f00b9e89cc849fc126d941f3515e8f71977113ac48318648e313e6cb9e76ac43d8acb47c3357c0414dcec0e1f906494604947c6cc7c77797e63bfc5bb48154cc5536208384abf3e92dae03974acc9d66139c6b56016b8dabd1146955b91d7b1f4fb27aba708d21066d9a4c21fdf09c4169450c52f97663c2836635f4485be48b28513ec3236a290b881a1469069a8442264cf4df8e5a4793095c13e9e38f88348cddc869e3c10e790de16bb3897b1095095c9af2a7a7e9576ea80af469dbccfc58038e215e235d30fb5caaad87efb8a01ada11db2f998941ca941aba1d16c6aa24171e71b56093b7ed71a5cdfd157fa40a41e8c3a75132eeaf045519b4e40a8f6aa41ab5a9ae560dbb3405639cc445ce0a545bd652ae1cb5e241b4805edc11071b24f9f8e01f3f627a41119e8139df803099ba98bb36302ed68469d53a06f5fcc69200c1d26d7fccb2dff5d1b4f1ac21f7d1c2f9c34e497d5390cdee6198355fc1a4e0aea43f178e10f69f91567d0a871d6c74e6d28415eba4674bcd158afa8bec195a9f9708ec6cedd12bb884db9fc7adcf19e67c9d662526607c69202b7d159ed5a05568e92fbc30a3c02cd8b1024989e443e2ff21b3be1d39b177f7066497a9b7698cbe0bf466ba77652163ffe4c53038fbdeec7237952e24ff6c9e03060828d65087c5f80176902adf02757fcd7988d4326ad4a5c2bf098643fc6ce4014ed20d32a8009dad30630be777a34bed4892f452f599c2e9f9a1f5471f4887f4941aad412afb02a8019cc736065562741de13c905eb01f47d939eca55a5a8e8a03336f8c635cdc19b899828e8e267ee0675e99cef2434bb170a71d92026c854c9e9e3aad0a5a53e6875bf6c7b745da7249bf32b600a8178aedde9f4b24f61b3ac8290b7c949abf1198e7e978ca177db190191ed7fd288c6daec4bd083323f47d2e4120b72998f47900f671ddf02fee06c7716d88525984559c875b643001e4cb68e1084cdbd70796a70ada72bf8f06521f8d88f79eb7627e61123ff23a172515acfac730d87f8fe9228914caf99f20ec1e7348be56b1ff17f15a39cc2d380dd1da2fb664c4354f462fd239bc3f2ecc68b97cafd2934fbeabd51aa5f7312e201d8fe9ba78fb64cfa0b17b11affb0317efe9f34d9df7535c767acc7f3a0044aa3cdac43544641e2d0cff128788209cfa8bb8a080f6354e76dada267eb07de4cf3b96af7119a5af69b58f775440fda2fb82b8031277242be6b436aade759620358305f20fcc570ea0af1969198adb4215ddec4b7c6db340f7836f7e45ed82957a3216b89d618c1a783d92d7b142f97a64983fad13639a5eee3d9a49a7a61c9184696d63bd3343517e91abe5a7ca355a56419f7a8098557d98ea2dd4889f00cb04bcb6f25755d338ee5ab950872acb68348d6df0ba71fc3003868f70aef5f4c575473a7cc972e828da521e44a80d8890837c51a5f4e005aa7042a056511215694308541e6488999d58a2c463c11b3de7c17cb7d4ed0c89ec1538ea7c33dd2c53bed77b465d22504ffe948b0110b66699ce1eefef92e2c1c684ba8ef50d9a7399a05848e463168ed0d7fbb910af6d11764e8c3a3e5ce2589e8de0b5fe31bcfe63f7b7b0557301712c875f80f2f87022b99994d88bf4f9126e759cffd9b4ae79e85538b77901fd947bc4fdc69ff050ec91232d67961ebd04c9e3d4e93c1e9a91e7cc133a4a3575ff4f2724e19c502dda490b39ea9e06823c71a2426d955bc2f095e2fc3691d9a20549b5a25dfcd2ce0a5ed76446052d002bb228606d7a529c853d915b51261b28cea02d2e0597aff06def85b1448a4456de3d1bd90e95619d3ee5abc621f6ecebb3bb98dbd6e268186af001ae4bd6864f6c19ae7f29b4412b008fb0d2d44f96ef1860b96a914643c049665b21ac5f11d6bc1461a59f92764ff7057bf51ed724b80eba98d7631b7d979273ee2ad1c9749377e20a73acf73d671bea3abfd800721320b14d5581d9ad49fc53acb6cb0353ad443104986f59e97b308f12d44a41d0974500f3ef8264478f3db131bc72cdedede613680516590e63164f03cd49eb79f74d775b3abeae33fbf0fa51bd4fe6bcf14fa6232335880a918cc4fb2293ed2a698487378f1f86111bafb8b988ac24bff37faaeff93fb78d8894acf6589a057b5973c2788107c071ec48df4894d4015073773eb2251cd5efccc64ff36288e03ba9058961f693a61eb881dce21b3c85678e89d7254436c5a0a2770a9ca1c8e10dcd363cc7e56249504f6ffcb78184bdb557bc24ba5726f078f1c209fbbc23117cb1a10ec17d9928cbda0c642d9f13bd87b682b2dfb4a92e97e79e0fc6f13881e2440111867117a965cbfd0387a65c1c71a8aee69542c95e9a3968c3c87273e8cef4680018538fae2a97f47f09db05a51ea0b67795ddc9d8fb5b1da0164a146ba7d2660e772d3ca270df70907a8f5ad7c3d9569a1187374ba452cccf51e1d087232584c9c2e9677a9e83af707f8578ac8c58a7b9e57ffe8d8a0b6b8e9de108a37198d8369c003fcaf16adb829fbd8716cd26c7f84cc443fda1d4cc3b2d8e3c0b5f25a1740756275755e133b4d935fc32d6344029ed41ee7c49b9f144b3017cd7adb1f90bc537cbb2cf1ed575ce98346f96441ea1af8abb1e507472d39a414349ce3317c419b056e965fec99b088bf93524731ec1df4136fc3d73a312819c67a56913bbc87770e9bd269dae6cd75edcfd4c376c3db80f7bfcd85644dc4feb9b80789c3ea07826d9f4a7ac49460a4e793733f770d530d812515e000e0810c92207865323710f2d99f75c98c049e5ea53d7e70694e684f22db104dd7e7e54a11339a7dfde4dbbced14cf4ae94120c1c3c33901ae645d155c8bf378993cf3c6decab59a5c9d4c42f3e7ebdfcec32f4df1b495c9ffbf2047e27cf670c9447252da1bc4251731d2df19914c0c7be3e957296507d1aa9d49ab11402fa87b0620809a7f5e2cc0a41ceca2e0ad07f60bd8c8a177230dcd2d5fb6de13afdd7ae1920983224a2bf22531a48d214cf19b32e287cefe3410ff94766cdcc93da4b4fa2aa9bc615ae33733f81472345efd99edf6f93bfb198b6601669501381ed1faaf41daf8be797dba6884d8a1f6399fc3e1159e4e4a04ced5f5f5f93525ce402674941387c91d9f1d179380db008f2de73e40d08819b0d2eff718788081dc4d7925f78c43af0a8486efdec84ac9fa3c6c2138431bce2693fa054ddcf795b6e74820ac3d6fa626bcd71d64bb02fdb06e8f328c76b120edbc3075a99bb0bc329256a5cafede208c12a763f350c19a08ce5d2401da6843d79a326f6227de2d457722aacd53cb7c4fcc8b9e2be684a39f65590c976bc65a658071a8b55febf538ef636d73936f170b45863b084335f3e93127dd17a776a29f9bf2429aca22fda13d5c8d16523a9d26c74c5c82464dc9720f73c076da76f0ec1095a84bfe8e00a79318a38ba67faefa37950f2482b97262491e3f777b8af19d260e136446d625f59a5801e02efa5c8b37cc5269d377df975ed881b530c4fa7851a9adbb1e36ca14ba46bb2161b842e8acd6de54db7b6ec6a89d3887670a29eb31e959b77f704599c64baeea780df0f62fc198ec4a3406d0610efeefc5907b0d8584b34b174c6a30b2eb6644723228300e659751a68d09319713b50b17a072a4fe1eda2199e8d10becef9ab4ae01d989626d797ada1060f5d323f527281f9529f36a045db061d828d46462d0cab1d243dcb2a7c1077cdecedeb01b6dd6a9d1f2894131220adee1db67ac2366673e3926fcff46cc1e11096ba6c07de6a26f19ac2b58905aebba5e0bf8debd7354130b920a413a194eca819dc583d22f1200208a9904235196f8af3fd21f4c9d24ddeb7ace1503e501d70b1a382ca25b04be6a3c5f5cc0c3e6d78fd28022fed4cdf211cca19c55ddc896f7c516b9f78de3f5f3813e0cdaaf9202656b136f4a6698ef6db479b61c3f5896f5a79bff01f7cae780eeb76e835e87d19c967c26bd5b17eb704b31d142c87e658f354b89c624e19271626cf6115614b6b50b0436d9a8ff33856cc4710a7094565b70ef58eb2af468854514f3a3cf9e2fb3e12376e96e7e72df1dd97f3c51f771ecf27c689f3981f7196f285f995e325068a5fcbf5fedb58d1f1aba7fa9a1f9ed0f28461a409f1671a1fd75cdc5d378cd3ea43f19f8d3f6fa944c0e09c5b910ebe23a4dcdf0f1f7803b4962ac975e29d2fc54dd7808149f8e1b1e3345e8bf95ab0cf9789bbb700612968e2294046db0402da9edaefa5dffe12a07a50e87e4a17e1a7e650c17d226f6d5282c2070c13966d3b1ae5c11efce9c8b4c52932e54149d317276b4c46fb4e7fcad74d4a4dd680dd284b4662bc05f61ee6ba136fc9d5c0f882761c71cf8a7c97e26d58dafa62844917bc7be9ead3c06d870d265e484a4ca614ac8a9b43deca4c623094764f65d3aaf55a565dd0794ea64adededc5eaf47ada9020925ed524befeb4d8a4d084f687f2eb7a076d771a2492110321c068639ddea25fb418b744bb6368cb6584c228610e06a4602ad5ed4339ed69d33f4861026863f72fd095a29b654e123292cbe346a1e94b323f8aba49a0b333f882b173569f61e9ed95b381100cdac19182e5a77db90653ba41266c4e57daee726e7333ccdda3170ac47311e8081bb66674e61d26ba196664cf2f386d6beb337146c85d714be0c60842fa2f95e3963d4a90fbde16d88f1cbbcd20adaeb2970cd00ec05e4178fc6a4ff0bab0e99defbaa467690c3612a9a33c210d6d1a8326c859723f33b475b08f72041addd0b41c38e13071110709b6d409ae1dbae88a9c7a4c690ef9c8814c70e27050b0f31fc8edb63140157da1d128668c9a3074716614c78aec6862fae7906f44de480ac46d869f3ebd454292968911e7d978ac50c381dc08d7ac1570275482c0fdfccec453784862ff1a3534c77fdf9f18c1ed34e079be1fac3051566dcf769e97ffbcd4b6101e6557e83c1743fb7870bdb4fbd9a06216f91ab188f97e2b31049af6bce6db12ee0aaacc6a8f728013802f864ff6fb6448dbd4aa5fe6e31e004b90c7f766a8ed4107c89a5e3e6497cf675464a5cdbc316eee5d0e7775b301d4659a01c5af1bc9915a873796919809feaab881c169517a71dddec2e4254851eec073fc89713460ab24bf9a4516bfe7aaa6dbef1cb2e79b47811c904a4dd79adefa1276ca92ad0fd7f5a3e879306418dff33326d6a79dcd215ffd97a32ad5492741b41b473819e02ff48ce6883de17fb558bdfb3318ebd32a2af8e50884fec8a4a6c0bbd8878cdb3229ddb3bc3eecae2e4c3767712f21124393b7dc586e8686dc902184dfe51cf868584bf6d5aaa7eda1d189bc0cd57ae273d834e929315d54e61daba1c2210423c30a2050a081206a98e20cf94ca59b204556fbb0a5467092fe22df682c4233d978e708ef688c0594849c513c63708076175f0dbfa521a7919ecf9eb6d976bc46a28d8aba92359d3499eee490eae6b373a40426789f5f8122257ea530331c906e203be3323d05efdf59344f0caf64589627ed775d96a4cf70a8e10ffbb68e42bd561bb20cb36d68b2a8dbdfe5a6da92b484727dfbb6967c28d07f0789a573c12fc474fb463713e8b3aa98edd0cbd364f5d1a34044a8390dd2482b50579419969ac641771d9d8976f6879159dbc589bec6455fdfabb0423a5da74b8734c36cf0d7d5fdf88c3c4e74abc904def5425ce5de923f836b4e3927681a7aca61f30cd2147a4bc03452c53b9203034512577000e5cbe28f3cc4a2de261ad98681cb63382a688530837874db40be133458bf5ff51a76b8bef89865d56f9edd5f3eb48dcc94a61db95d6d75fe77ca6982d79827dfeccc004321dc4330ef98826401fb22084141336de00ad76d53e8776ade06e8b56e2c57e63dec9f5bef512711c9eafcfdc498f1bcd70e8234410e0d5fde9936d267d2c780a7a3dc57d79796d8a75507b5e655b9600f03d85cbd2891305f6c700eaa8a8ed252ddbeb2b874d06d77e580a388dc1609ecca117eec61cf01bb1400db3984e6fe6f0e50a3e600c94e0dea426e1385d774a2cff03b5e73ee7ace7a6a8b392c5aaf222a16eba9345c1d072d8201a73bd51ce30187f2b4389b408869449ae2993155dc30cd529d2a8a3688e1513e46c6e09cf2739eca001d5820b502b295e15dd4436bd0bb464c27a337df5899dbd9d474c308c793fce5963dabf0807d554a2e2f3e753f9948447e5acb200cf53e9bd42658824699cf76bba91373d8052a4567c436b0fb44d60c1e981b24c21d088b1b969a04d99cb4d4b4039b4ff4189c07e2772f33f69f8e190f8ce2bdf0853c49e207f4155ebf4a69db29ceac2d8ba2e2e68a4c0cc3197769a4f608de847d588a9680fef6465179227c61280d6e92b9ea4e49de3627b05a33c41ce1af2e2e4f49e809053409ac10cf4233e00b3e7cfdf7fdefbfd40ad8b735dbb0cf521be569204ac578bc611dfb9b684f3aa8259d45467e0bbdb6461ae823337e7926a861bfb0d07531b0859994b3174cec972b8e0612cce96c7ddd7959392da39942fbff32b65b0de62a0bbac191664d40ea46933528d1ec9b93c377e3e7574bdae44fb82c18db4b022c0f71c9b801ead65b56da0c0344a085deb32250b89770dcae8d39e14a82ac2e008241ff8a9c3cb07a46a706bc79aa5265fef06f266612fcc597cb25103fdff6ff89b15eed2c8ef001b6eb5d7356ac095a87add8e4ae77b34151846664036760e422c59e006c1bc475f3ebc75d482b89aeecc5a72f45043f81dcf039cf475a7cace334fb36877c5d27fd970ba66f4eed4b6b182fc8d5792a29d997a96bdff92650fa18e7645aa3fc98645ab184725eaa04d9d606567d23cdf1c62b559792afc2aeed8c4cab8b359e6fee709e086315861476a62d1e3336d59e0d64f1cb9314d9640cb19d6ef2bf4c5444008d2b156ae71722f514ce06073f5546386571712630a43a1dce1ad7ec2b8736b172d6fec5f0ea28ffc220b47aa66fa84376a6629497772ede0b51f3d77444bfeb1b8f03cc98f29a1daa17be891b2609379b304ff597d0f72c700edd6e53f1eb35f3cad7f7288dbaf11d15bf66223ed432602f486a737d3211c6c9d61d45ef30ee8a6a159b043e594e3d8abe1e0cd0873307c37b60c78a1e9bbdb855f0349e49153ac9e00ce60daaac6533b9312846ec6e7c58ed1f23f10215daf5949bed56e8828fb86b42a71879061c02c193554aebe30987448d1e26d16d70e4f053fcbe98842ac96b8148e1f6debc505ea4e926095a558178868a6d03f18ff0cd1f279b49d9ef31bab270001c60d76bd06652f90f879ba5ffdfb12011bad22eda1d924305e2259e4eab92effce840e00faf2a7d9ef2f876d3e8296f291102a91e70d31c15fb4ba5b9e5041518d8be8448c16dc7ab3c295c9526e37126d3b0f2c073abc081a88566f81b8138826f99727b2bb225d6f5644418239724507f4e5c46f467b42097736f4ffc816a8ad2ef4ca165c882b35a19c496cf85730b5ea296a1156574b91cb79fae44df26eb9fa728843101d8b606bd86a021595747f9f833f4f1c391fd04357f320eaf8c53f64e38bda5ed51c091055e221b1798543963ebf86b70ffa33c4676be22d61328a41c37f9b45097f493bdc1e76a661d6c0f92bb0d5c1439bab542fb1f5e44b514d7e45636e6757c9e2115ef34a60ffef1c888b432decf21704aa45fd56c17203e210f55323d3fde5f122cdacddecdd24a817cf48130504bff7153f2c7f01bedb0e6458f9d0a92fafcf255c6ae2f0a43c4e028edd7407717039e2c3d169b4eb79f29e23144eb6f6b2e2a3b90450faede88cf0dac57f0c5f4109c233e42a62adda7b935349219f9b48db66fff793dbf034ec1f03f08f8db01e309a6de5ef7c8f3722402b4afc3a28bf5cbc8b63c9f63274edbf4f7a866ac458f37dbc767892c39c625b8e742a4f43afe7498f98bf133e76c8ea5703df40a8d7dbeaf12d4e32576b75f421257aa10c4b8aff49072f03cd5ec174d88f3a3a886dc709ed497185a4336eeb257e9255f51f4e08bc1273b9488b265f2b3b5c91257e1766df1dbc56ee5bb71695177bfdc21c9046fc967d0d8fb5b751eb9fe2b84b735ac28d82b928f0d092a6b05c19854e5c85d2d1ecccda9e8d7dac97eacae67069556f9b4d437bc9195367a39622d4a25d2b1b56ce86e1f017c2cabbc11b9672b27321cfae162960eb85577e8b5dc6e61890e19584b420c637ca07949753706cdc57b2a26b0ec765178ab96cd80f72ff8a0c318d05bba6b960474d1f22b8c101ac79c5ed81ea2d23e2c255acffd3fbed66dfbd6752b00f469308934eaa57ff3148e71c0bcdd1d8046b82bd08d2afc0411a4cbf0fcd41a545941d58b3de9278e676338534e2de59b8801200c69294b59d30beb3f873ccb7869a3241bbba01967527390e1862ec1b3f627817c03f0cc08ba2ed0a30bfd4c68fa2818c755bd86a7bb5549a63cec6b970ced967d73c063cfbf102defb0aca2a720b320d4089e670773d5b893f113d709dd4765237bae54ea862303d63284405b8bdb47b72ed93f87fc56e14c6a363608c812fbd1b0b95c2638b393e2ae9c35d522d79dee6a7e106d1868776ffb5afcf3038b13166a9f7c5de5659c4c065660be15e076b7899dbf4295c916a907431bac010e0e71f6f6504f1360a20e98fe0d786166e870d132f4e27109aed96589441e569b838408dca6befc44118276aa4a6730f5a7b10d28368edfb94a669dc76e819ab7382e391e84f6910fa65a2d0697b495716823aafadc0a163433c3d4c1da063946341875ebf15b9d36991f5b6b020c479ab9886f96a7c3f26d233d4cc3a9d0576f566b63f929d30aa76eb452fee00ced99cfcbf9213f4c3cc1374fe127be76b677a1bf5213436afe37868dcb6dc59d8b8495efa8e38e92f4ebe68cc78d509b404fde2586d0ffbef3f3b02a954c3cb845099c076f86e10b32acf7bb3570c3d1181bcf364a4a27b0c7482eef25df3da1c551221c5ef4f32854b0f73c73d7f1fca59105bb958e3f4d83d0941ae15567ab44ddade12f0fb34c578308132fb19ffd678a717ad716d0217f64700ec1589878ebe8909c1aa1f6874bdcfb60f8afc485511175c1d0ec6851528cc0dda4ff20a2c8fbe382a7508a64b4f8b4b37c23f72b0de1e136d07972a80bb835ed749651c94defa7bc2cfb2ef08e1fbdcd2128fc5444ea41d8a71a6abaa9d1b88064ca1a7b379258b32b2fa1169e44c5675f5839cc44e4e40600f02192d806453d3fe3fa221c8eecf3b43291ef9a29231ee0c4d7aa7ed5a129b17211e22623f489f1a07e5a022728d622f2258db490810fac42a7d51239c88aab954f5adf81061b45077a1d46f55c13f98393814244370ccda13408265e3ba967594fa6d126586dd40b8fdfa2bc84bb7d05d65c3d8e314e5b21436f74f76bc3e7d63f51320ffdf14d344232f7e61fe77bcf0e9e847982c53bc219307069537c5d73f6002b9c150a7f37eab9ddbba5580d04511c2321ca3f22b896a95a3ac395e292a89e39a1ac805e143edaf3256eeb2d455111a36e9a05135411821933967e85cbb9bef88b71c00b94350a56d396e1711ed477bf9d1b77607b67ab8777193d929f3ac22fd19e1fb761e616e69a16472aa822414beff7960f048162b5f35bb6ac6e0d1fd2d32ff41f0f21146f086f2b1e7b207f38a0ceb1db303400999fc3e1a1869a31e1e9f011d72599760535eefd450c6e06d7617154632d20998b070f55db46343e98b115d3569085d113eaa0796a8340b05d2cc15a33bb4c26926c4d22d55345c985669e6e301dae3957e2353ab2ffbe01e59f7e7dd6ba24544cd274bc6d1234a7f1ea3ccc130cfced9b7ad37d8c3347d6f9dd72b9661f6ed2ac3e81fdf334c1734f89bbe0f4f4ef63a49a80d58ca77b88a32b924b066eb094acd4085225a96c19f6e6262fbdd8c629e58e635b554e1eb5cb1eaa39a8323a5351de0c8ccc496679b231575f86458dab631200f8df77f2de31f184e3e336b0a9acfdf305229748acb05b9736e00f4e60ac833fefd1bd2d3597011d8ea2292d0a0be0247b5101b9882d87a0c32e8b6ca220cfee4fe44495611ba65079433f6786ee18af62d5dc4cad80e55bf00ad83143fb29af7d7c75082fa5f8e447cbc0dc7eeda3953f0c7eccc168902524019d01c935e61f7a06a99f323b44429c2856a264efaceae47204ac637585a8f38f756993f29e07e8bfaf7d3aad87d1cee26ec99043c9604afc3460934949a45d0caa9b82fb34fe6579551d685be142ecb16103d301f37ff25e3d7532a03fb4ba4b56542ee9d86992f7b0bd1199d90fa3f6b07d07d2fb7d2dcbaf458ea3a1b90624057f3d50814eb974601db02bbccf91e5dd385865e502c1a89785b12fe3b0c43d93ba3cb7b7286f06ec28c3ab9f8924c567a3444fe3c45667a777e68dee22f5e0b44148bb811f2ac470a4409a03e9dc58bd603ccfb83a7e6feff32b4ebd8d415a505a6c7f99823d3bb4aeea526f210813b8b8ee5be83ba1b14a8a96dcd5afce0d390b7bd74b664ef4a0133839f07421fb225b0dff900a1e7b4e33c863f3822f47ef2e93415721665fcde18b109c4210656d190c66fd89a76c1927178a2ece66d18ca67339358b99ee6b90752894ee47280cc3c1486d17d4837bd096c9eaf4c2a513fa8496566b0adf6374ee0f97c5db5aea6255ec3aae7e05a635ad0658760b9481cf653ac46bcf186cc505b292bc1ca36667a87272612c4cf6740d84c015b0ca95e8c791beea3b20b9ba001684507e88c8506e2ddd8d599ec37ba2a088e85af26291ef33b381107e3f8bcd254b76747bd1576ae5eda26953cde76219a3c08eb7c46567ade8d1b518bb1f7c21872006aecfaf6c09b4d214202fe8a4b98df2307581121cb274b760463109bcce8fe327389c9539361af982f11ce3e5f7077028f390b4f188a5a5072ffcb090dd9a9f9de254065d30b64515d81595aca4d837d146fdb60e5e7ae2e80c5be06559707ad7abf30e52504c732aa05511e63d88178584317a91c62764ba1b1ef460c170786eb409ee0739f140e036483d54717b40feb3dd9b1d84bda1d9d4a25d6fc17064a5b75a190018e33718213219ea0bac56c43cd10a19cda7b66683c3478f72b795ef0d90dc1512ba6a4627ebf9930422cf57d39ea037fec1c91f3dda17b0c50c7e4c9a0057ac45ecae69fa6f1e2109565678a59642dc3b1ba0282a7e7908aa414070064ed0432bab16fff994c1e8194623279024ec5757e9861ca4e2c0259240481d6eaf26c2ccced94b7e7f08aee7902e3846a858538459e11ef02947e08be1ef6c6d943c751ff8413a7b083c76215712d1462cb24d5f2f863678e14197d405011ce371c9176596061cfbb3f1c2c2ce7fb9b84a80ebbcb5bd31b5a30d7d5adfe3c3bc7b176fa762d3e159039dffbdd9662c19ecbfe3b3e20789216649eb3c13c74aee970e87de97e8abb49c89e139d7ac6f1835cf8168943cf4ef1c5559213742c902dfcda71e661f2931f84c3b40ebb03c0a3ac6ba395b24df699e9bc153997511419f483a816ab925104fbfacdbfa6a6c8d9d12ab7d7b456e56343843810aeab575498721ba66ad2f47ee988b3b96c3bf3161f91253aa84afd57b6c2996cb0f6ea6013bbf6a7f2e8d11a7fe15cf47acef0e2e7cfa9ed656d6f5a062a039f70af539cb80b55e30d5777a4c22d1bcb8a778e3923478de25203e36d65ad0f4b530b7f452d533079d1cf234d2be36365e0171e979b0c6b81fb5b47c2ff86fe30e5423d98052c88c9307f6a1be615c1aa9047cf374ab8688c73458de288f3bbad5954a432f24f714077983c53786d8cda76e55da26675cca3edfe588063a65de13a42fd09195abdce2eba8b939ced0a29978e06f0df061faa304c4f2e0273c136752f2023a1a37d06771d803d8329df90f1a2bb432e35ea7c0132d7848093f4200285e6ed37e65339ca3e5730f3ce952d1e8ea82d55e6bfafe87f1891071ea85786e710c36a24373c14df308a054590e3bf3c470cb151f69e1f6376289daa39f5e949d65ffe260d2a924839b99cbaf6357b8f7c3e3b60e38a8b49340576a4ea26170108cb0f3418226fb8add5139e0b95899092bd0bd8aa8aca358a781ce21d88591f984307fa05ed43f426ce5fdb9e437984a111868b16320ab42af0875487dd36113f76f4e6b978c6a9b8574c69874258ed1fbdcefa9838f215fe05c8bcad52c95bf760c4e3801089cc539b31bd4ddf12a3c71117fe95cbf5aeb62677bb9c0b0195bafb972e98e43d1a8d996cae0a1a17b57c134deb25a407fc095a73714688b23da18c37987a9eeea312c4b55f3a17219fad90e23c8aa7cb5e6535e7e2022f82779a3a4e8354d0fdb2fd04bbdc3aa79380ca4b4d8717a8f92ab06800c90369c34763ed70a2eb1a2eceaa96ab8d150d054e983742f0f4b39fa99a3f07865ec4538779a70d1cf6400e317cd2d84537c83b1d7eaa2ad1605aae49f1060984516011bc4424fc5e64fc31c97d355293419396b8bf1cae4442a0e8b5ff2a3cd6c5b2754f561b8f5cff3d02a8d6da092f37f92aef6c103837ffcf27070782a2c1edf26ef457cb0181732bb563415dbbf77497b76b1931127146c74accd988026f70fe00d6bbbff0f518941884be3de22054b5e601667d7d3b5a288a362db05dccf00d57e115271e3b80660f484083f7cd85ad706d213ead2508583d6a1658e3dcfa9ac951582043d04e5edc7de18e7de20f97339f944e7ed968f46cfce094b725727cbc8e54ca61ea3e33c2b27d0c02fa181f6c09429b1db9d54d21177605f2e46aefe26cdae8698690fa3abbbb8cf1a80207333cc951c8dff7d486c5ef48146536fd97c979a993081a365da908e7f7ca589c058a5ae263436e920c88942e05b4354adc12c9190c51b92a06873ee95a0856bdd2bdbc2dc132b5a0e78a4aa2f0187a664983ab19dce01af005cfd962f7247b76157ce926462f40431423f00e3676f46aac364c2e3567f904ed24d2cb48e847fa3ed643ac1d6e6aa91c56220cff83268f1cabc9ae4a4d0e7b3060c2507f33ac7e61ede85f93b659876061c29ded787847fd4637c7cefba9a295b2778cfb4186f23817c3bdd4f7b0c68c24fe2296f8c60b743ed3679b7de91a722cdf28d7870c078e2ba14515db8bbe56c9805d409d7673b405f36c269990aed7d3c209b3775c42157c862fed222e8da705beb64fc7ee50a11bebcd86ed4ff5f1fe6f6519b39e45b3d38afd02c19b7de9a52e525c5e750998a0d829e5728dc9bb5cd680c575102ca104218d8aebe80cecc5064b10d1215c444923508680bd1aa3bfda32fdbbec15ca122b5b1d81f651211c0fbe11a305a2b9ef88a6745b03376bf77eff07ad52561bef8e4299194739c4152aadd40b21a197976120719aeef336afb1ef91e976a152184e4ed198e1cf0bc4710d16695c0e6267dad1c17be97e98dcc52ef885255566b66686d98f562a5fda91cbd2221552bf8c5bf183d4375eae1a630367060fb88e0e35481dcb37f9238a2a6ec2f68197bad35a32407d53145443db9b6f9cfd48635a383dd31c8c1d46836a14f42036a531a59fac0a4dd3307a286db6f64c99799761fb5b9c3e83b599bc69367b195a70f1efcc137e48718b1d5ad36824bb8b3b8c5aa72dd10926b5e3479e81cca214560f3b46a8b7506f5780939cf1751fc239182259e6c9dff02044dc5556c6fd47cb0ea6119526951fa71720443c60a681e1bd5f2bc033d01412c7c93cafd4008d596b5bea216f38147e84f54e87268c5737c38cbf18092704ad9ba35e20373e8496de3473acbe1e1112268b4890932af9b6a76601b0caa7c22a19bea560480cd4a28b74610fc34641aca32d21fdac62c848ff5e94dd5faab0347a15993ff2ead68e8befbbfda68b9ae252b0d9c797f0e47abe1e529b42ef7aaa96a3ba18c8b3fc93447092166ea8003036ff74d69ec3702f8fac133b47b3284f0e54338528029efd1e47d030134470290f2eda483a0384bec5843b1e17d1cd2a8822041e43b28044db5bb1a934747597e890c0027409429b3868317303735bc669b59e877613c2f7ed7bce68c7de6a58e76509f68b4f00b6c57f83c61e4f5178e23fdb973c256bc592ee65b53c9a2f41622d5f6eda6f3ab568bf3ddc779e753440387b8f5453924b6c62e4f7ae6b3ce14bd02f686939e11e5ccbe682c779af57f2dec3724a0f3724cb65f3d217116016494ed6f41fa7016b2bac02ba066641263edf722bfef2b421801976aa1752ce96a521d4a16b328b62784e46bfa772c86826f8e5dc4cd0a1d3f17bb900a90e5435eaed9f52b7e18f0de42f02555da1ee3fa75bc5b0f8eca295749ae9e48aa36b1c672818495de96dcd573611b1e9ae80e5d97012ee42387941390050e2a228fbcce793268df159daf505a42a3644fd54213de0ae424fe0c1c207e9dfb8aa9d8dda1e494abd65f85e918b37e27a291cb2d92b65e7dcffd277d20cc86ac1ffb21d70fc0e15816e161b007d267393283dbbce3c3e9371e743737ce3ec661117e86ce3eece22bed1c83934dd8961f152a247431cb3fd6f9effdc22afb24e4497d394f72c6bbc6cac538025a1e1418e975c1705ab3f28dca7f020cc4aeb3413ee1bdf16e6c10f416548a51f6f1c113402df5cc565bc5caa9dca844b42d52f0fd93d527bd83ba24d6068425bb0922abaf04e4267f050a15cb961bf4923cfa44e260aaa75212a92555f7dc999333a777e8673d4fbe837e08767b965cc4d57e90f90897fcf48baf64774c0bea768d8b54eb216b843fc1b3ac8c6f584cb06a572dd91c162d9c75220812c9f3ca7447b5388549a7c226b77e376eee28e8cf83d20eb1d0cab3ba21b4d81cc4de1a4c4f376ed3055314795da66b9df9224044e413255752d78149c1970bca01bf3a2c91c3778e8f9af86902a0a69abe0897c099b83b75a6b8df42e95063a5156724a642a2509006d6aa0394a4968c8a722e5cf9d97077873c285dd96d291c5d10fb100ab43b7ece97d1f937b843a6570e601c3bf2024002d6b060ee6b0437596e8bc48ce2cba46d938beb963e67ade18fa5c4c0c881b29950a47f28a9df584eec114646e090f8e2e4e8640a5559a29aaa076dc3bff017d812ee51b774730e33025232957a736802c7f3c89c6424338913f9273869a6a21ad7de80a9a07372e8817efb6af5d6ccaccbc10840ebf986ec5c2075ac8a08e93cceb82b9ff1e3c21b23dc6e357f74c4900bd84c942160fed3ddbb826bc536f2c1ac17188d4ec4e025e904af9a14e366bed6448306d52e6737208f50da2ad005a2a8930fee59e6d034dd888a1d17573752c4139a052e77d147ddbf08e852f8245e0528575271ebfa4551796aa991b536e7838e06ed6d5e8eba8d137c3d108c7c546110d6dc79f2814cb26c5817855daf51a34839d93332f80cdafc58148c3a4cc102bf5c2b834654a7d3fdd33011d24adfbc50f25fcee10e705b6faa81df343edf422f4cf6c2d85444fadcb1ab2ce07013ab2c24dd5a42f02123146560b41f57234184127edb7367ad7cfad30bfb30a9f751cf5680a462325efeb4d6cd700b542cb946d2beabdf7896f6ac30d846933b4ba74b9a51dbc14947ed197b671725d8fb7dbd8b6d56f6354fad7365d4101a24952f6852ddf9f235b3981cf4404f92e1a0f82d462458458a92dbe48cd5a237ce7b3e66feb93328efecbde71ba4497d7fad0aa16c5cd760783ca89988c3fe3994af51ae41a8af3c8e5d42c2a67ed635fa3cc5f6c280be11a94fb7478b92d0cc0e60c5bde3b6e2c4a2decf88b256362efecb182c7af6a7d71c4599edf4fb4412d6816d0398540ce6de92ec7927577f2510cf9e1bb77a34f0a64d9e306f04c9eb6a37e3cf54f3878769c5a900f3b41ad18e67cdd7c6a840e14d2b53bb8ee7725bc36c0f45bc2969c0af58c8275f20a91c0f1552db70614acd9d6cce216b085dcebe9ca74549be083bc6ec646a848e25c2b6da92676edd43fae726f27f5cf05059c5938e073b832083015e60cf12a1381acb409a61321472ad5d5d8d77ef2506ce665311cf2c191f5153b0001b753b957023e0f572120b14d66787abef3175898411801a871b5b94cae87a06aa552966d04764c0dc102462085be3788d83af722e560620c36c044815954c4bb2d5bc9efd12da3761f0251bfd12d4a687db7b7fb5e08a597b8781b21b708c9bf1833e663ac584f79131c0e51a857fedf0688c3ad92db29e61176bab411fc886d6fd4439cde8c900d4ec7b63ddcb4b4bc019756a5331c237c958e6585a56ee08f818eddf0a17f64e584627a9123991afdd733200bac8f5d7aa1a9fa8f3201e65b60e36ec7d5015843cc2dfaa2fc8634364390ace7cfb57936fd35ae0b63e10687f4677824163ea733ebfe03b1d81b890d7c6a53aa4e12926861402e1700b5aabb9731181dd8fc6d318df6076b3bfa2fc5c70e53a2e39af77b717c54faee8c68347e5e6e7fad1da95bff5b4ae547aa9fada8dc3eb3c2d256e97c84b4773f56e52c1af700ee033c6b2578a2749d80887eb1bda5952da82a9cbd58f49be3d06415ada62b009820219c6d8602aa312a62b7641831c0a06f60e0381e8d60b9283042aa595e9a2e5fd5a0ce1f96b25267b20df36cbd28c33542ae1b87b8fdad3ca66f85aeadd4c68521265a8d6a9bad6a207d95e3b91c929b50870d97a3ef49724a9e858ba77caad3b42415f4ebd4d65baf10be328dcb1ea68538ee6b667d7580cbeee0c677e4d1a777e5d2db227d453e5d590c9de7a1a10ebed8a3b0a9a06afd6713aa7bd17ec62a15b2385de5a186f8c7a2886e1327877a7a7ecb72f3fe92e3914b24f20d0f8bd037ef2e9b48bd82a8812665230281a54e7ba162470ad8bcbc7c0c6257bf98d9e38f794f3e8663e3703fee89aa42b3a30dde7b80d65d7c8c4a990aca95047d26ebbb44da21d71074ca31ceb2c1d16bedf9c9809aa544a20e7c935b5bd974b55c1e9b040368bfb8bdea6f1f661ab5fdd8da284990dcb8b5fd0ebca75dd8035ea4ce5fc4864391fc00cb49c1f98c76f3a4f7c3a9f82ccc1e1300844c40492baea582494e699e20afb36aa8e37bf423a8d5d0d60e85c679a9e3753e4f66ab0c74eb0eca93a02a07ac63a2e191c5256cc5e259c1726dd59d6413f67d1a8b9375d1d59ea340254de46529a02e95f8886b9ed2b31256ce16d1206daf47b7a8bf80b6f2b337775a4c4b5b42ef0aad0f599bd11edf9fbcd0269039fa9c4cf4cbe11f4ff01e7a321b53ef51a22afde72a9b5d083c2c14256b0dbf3fef2b48c544d4d8d0dabe23304071a718efd0e987c691c67477f3b253cdbb6b5c53d4c5f05c28d7a38dd52d26bc4fbf7f3f8e987718dbb1c3238b07f2a46164c09b5c39762e37b73d1e9a32600d2aa7acd375eb4adcef3d246b5204a6d3c9fcc64c44ff535fd18435fe6124a52b2e9c2f5d33f05d6741619b6807dc7675be0f69e4453f4f3df43b27cc868cd97caf989d851a5d1219093bb8ed90ea89da31681175ca9d39d8d8a40c228d38a64e9304a60609c5c58e7fdd40991685e823d12cc5b4a514f1966f44dfd90aa0261c1be5f2d1b8a0ca3dd874dc0b51f3ca54515ad34aef53708800e9aaa19c2178ec3318c0e6750e31257670b49469f34f88df890a46622166044bc44ddee8c7e8dad8f4443b4e717f050eb38c891ed4ebc48eb1b0a86f99f6a1ec7700522e91c0a19a3b205406cc902f1b0cc3afc0fb5ea6da59d87ea1ecff43e53c33b17810d52eaef1fac34fbd8fbbe4aa959949dcac14caa7fc9afeecac6f3de29d2c84b01114264e1d7afc8650257931c021bcf604a84b143bc22f62d0173f04f01ff278d347c7c2fe4ed1cf44d4b0de039d0fa51e72d44dd0beb693107ff8273e987162318bff9b891d3db0b7963e788b03f553699551659cc7e933e96b30621ba4bcea60ca88aac25bcd6de69743ffa7c8228c7468657bc4f0a381f43fde833398658e5e1f4374f841a69a08b4e53f15498b56090defc0f715452cfe21fc93e98851d13b78c193dbecb0884b3e7f12fa70bc1c51a908e9fa3ba77d4d6fb2004e657bb374d0c1740c97379fea5e3cc2c2a01bd99c0c30b8c943a91b4d5e1d23fe289902d723d019fa4f535f85623e5f571eacd6afb54ab4b8d58679c236db955db71ad0d5dd3afe3be8a3d88a39c8fc852ad73112d580f984f1bcb508484d8fe4f0089fb6e7560b968c95b7c29e487503eb30277f1a10b394b45c7ac54a87e38921d31d98b05b99714cfda5b9ea9f709146e51247a5ae78f116e39d99b2089a8ecf12a66b958a268ae4e57fafba4b63bd6c78c41c5f511da2e45d6591c19ee51fb8301aae1472eeb15431b90c460fd723d7f0b67357d54b6760a06b834d56079fbb1b540e187a827c6e61babcacef899011449d3c25716cdbf08fcb112e3cce9007a80a44700c73f39736113f3b60272e1852eea814316fee77c6cc8172c4f5a18627d23d779db06885f71e9396d95a8b5cc88bfcc134128689c7245665c9f2c4a95b2381e807cc8849d32c23697efa84966ac86e9fbde2224cbc6e170252e6239f465d1c9e7cc5a5d693e1945d2960b9e98c998df5b2e6a730cc8e894900d414469594705de394dfd745f097829e7ee0dc180a5ef179ccf7a6f98ec6c1891b7713e60cb87fe8edc68b2da635469ba800ea0a0997150629fed51a9e801e7ebddbd2f9cc87db7b9b1199da0e007cd7ed83a3ea857fa14468c0a77d120440c648f670bc727d41a3b31467af242e023341be200e7452fbecfd67ac40c0e50e046b486e2d3c734195abb8ba2efcc24c44cde025cb42c1603fc5403564a35b6b91ee395332f32e1c538ccd63e9cc9ec599b89438b5ed47471c226d727e5dca821b0bcf51b9ffc5ce3b6a7827c80e1e7460cd422426131c6f44065cbbfbfb7be6319cc0d3b69c1e11f254272407ae260e86cf54c4066c92573df44dcf1b55d1107265b59721e456de6b811e0dd26402c4db976ef40a86c79ac360019139316c0b3c8a22311e5c094b69977024243911820fccdc50240fa7e9b636b77b5a9c43d5111ac80bdc801baf2bda44ed39e74595e84cf3eba241adf3f7bbbb8f852d8c46e9d90263768c26f8de","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"df60f633e8b7494b56503641804cfd63"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
