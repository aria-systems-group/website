<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"b4f039bccfabd17001383c3cabfee40c8bab4d8ec5e75ca37a8d09ab8b8eea64de928fe9f82681aace835625a9b2e1ec56725413ec133d36b02bc42b080383fff7ca0026c758630d50a844ce08a6e82adee31b0cc614b38331afed7df7f9b4f41890fe73c1bd9325909332dd45d179cefc85a7c5783d12d4bd0376c67198fe653d313ca80c00c735881dafdaa26f8e39e658aca941c525e47842ce9a35080fad04e945f6356cdb74a1f1bc719b4854f60a4898abda94081a49ae37257e970cf094e280a1af995e1768087ed94a4d284594f2466dbdc7bdfbb9ee5e99bcedb7b54f7927734358f285579fbcfa39f680642883f757d0a4256fc5b46eec2823ceb8f5e761f48bc88a0c334e06c42e86bc051bf2fba19afb5d6ffea994930e68e086115ba1f6a6e5af5d787729ccde1c254017de65c1817a809f72d3b0adb237da3765328fb7c884d3366fe53f6c00c931cd34e733fb59cda94fd918e9d66e7e5af882ce52252174eaf43f0b83b609285081766baa18d6f22302b8b64a9b5849e2845fe54d47964597a0219db8d525e31adf4a011fe9c0c1e117c75af01c008f13e0b5732c7fa071aa051be66e6f9816c2ed855c703225fe2251e1cb818249fd4a980a263846d9daa167c264a0f500db1e35a3226b43a48f6b136dbd76f558f92819cc92b2184d2d0d285ea8b86d686293b00860dd5038928d5eb3a4641dc663a574814f66f2c0ced1d32fb8bd127ca23d5dbbb157a965ba5b1cca042e95a8117aaef4c7ab9aae96f0a64703aa29110db20fa2b65e890f8db2b9ebb948182f94866aba3e1302d39c592ecc1867108877873b3e5aa9c4f9f29224cb24b1160abb6fde86967d5250aa8545400de24b414022a3b3e9c1f5722b0946ab9ac382055ef645eb356a7964dadfce7547767642a8a88dff0e112467711d6c4df617be4a81cdd61307b4c062cd60e5b23da6fe88e77f39146068ea43bc63e4a7f27f5d5e47c808934645c0268b57b1da44510c49dedbae04740010b04fa652ffd14e7fbde872b058690206edde759eac72940e000d8801859487ffa410217abe42835db95b0288805a071b595816a890196f8e85db5e9b429b6447aac7e50c0fd3ad55b77c7836811e7ce21256073ac781c2ca9e9b0995861e730779bc24aee756b2d2c9fb139485ba5b1727a81f0a0b89d383c24320f20aafe577500ee0d7a4186969403e5739d5e152bf83bf616f3047caf3f418e4a6490d9a0c91d077892031743824cc0e589ba49e54716f271a503552d6113fc25625cf0b73ef6df4bab0cfa9eb2769254d9832cda7d745a96faa400417f0c986a12e13fcb31e87566cba7dc1df45645e4e676ac51a1252ce2633394844db0310e1c30c16de09259d0e86bde0fefa15a766b25240e83987f030aef99dcc4b4d854fa90993d63aed4ce8d319f3dcd98809a851b79b99633157e1a6cdeee25801e2dcfd95e76a37d93a7fc26f749fb44a6f02d593fb6c1a753876397e533b90f413f538d3b21ba57742564bb53d0c3e157c6e44dd6fd2b1cffee5ff043f8e97e0b1a45de80a9de18a1c7b5163185c058410cc1d1c39c0857c15352c98ac71b572dfe05dc4f46990481ca7179fc2c195e33770a5abe4c79b0810dcd8b022e7068155edd48856be0a3536a00cdaa677d6757a88b67b3a150e9daf998bea585e1e9abfafde5acbfdd8fb152089bb9af0f0f7aafc8c4ee1da3ba24884de886e1c12b51deb2247117db7ecbb902b935980bdab0adec3fab79022331e62f085134a2c57e8d402aa7eef1036e72f22a4f8fb409b2b7194812fd1454b4bd861cd55775d641420f61de6ede25db93891183e65f4bde3aa2177c585ce30df125c11c53890fba3cdb1539cfe40c73c3c3d8dcae68648989fa72cb9145093737cc22f3e9baf1eb526b0f19c3415b8c5bf455e0aeb810ac7e639515a3fd0220b42132c8b303783b92d8b25a1cd5a8cda2d302b73c7f183b095a2492ab3bab520cbfe56c40638baf26b738f8636b10220dedbf44862302250a0ebc644ef960f5d8f3adbf88da9a069b6e880888c3e5ebd3c1c4e55f03627e26b95ad7646782d2e15a8fa68acee7a405dc5976df3c45e707c0bc94f56883ca37baf3c1edc90b80574fce3c3e9fe2a6209ec5f8e64c687c373b4379cbb02b6c470aa462ceb36357f50679e1cb7ad9d8ee4a6273bdf08593bd6fdab045612d578c21f45580d5afcaa2f8d44170b92b15b7508413cfbcbdfcfa6a1c52509458ab4e29df880783274149acc33627b08b015ca813d527e4b15af2d63ab3eee9599ac0e89ea2dcc452715cbb6cde98184027503b098ef351f50285c66690eb80358f07c490e49580a336fe8a5a644223f679014768ee0a7add4c04ff0bc6752bef4836e4291ebf829bd978086a04d9150e135006319b003f8c4558ef6fd2401196f66dbe9dcb635b77b48d49eff735a0b8f0d7eb0fbc48407eeede55d89918c5d4fd542d1f8962810ffa0e9b4f471a258924813632da1e194ebcfdfa195a00412d1c3912059e1e7bad828553e232f6fdf14fec20644501e7cd52bbd106857b69662b4ec325b852e5242eaa198fdbcc080fd66d42619b8fb9142eb3e7a815c5bf4e9f55473e7599cf6bb41db313970b32267961d509007c33af900b777e668139036c499b92aef2aaf85020eaa4d5ccbbb11c67cb5f4730f29913f25e74096fae5aa88f6fef85a5ab152d599a8107ff736575a32037bb5e273b915c3b89af4dcd0e0715125cdc39fa5dad6e295b348fe02cf362a90a22590c7ab983c98c29cca4ea2320666d378418912c8ae8b96fb77721fea92f882d20d3df6d6ce8d097665319fd810242864ae46c18cb82d7338296fbeb8e1c3bba38b633beb74350fc28cce082ef8699f5a1894cc06749d72931ab66cc757c70797e3356041f3634aaa3a3ec7d24478578378bfe2648909479622c183980a4e3842155f3bf3533de76f141abf1482d3c93db78a1935db87e2d369382d4e4675f9e1aaa469829350ab7756d9148f8fea94baa75516f39e32941319857eb63ea0742671a7cd783d5fcfad832475adabfc924bfc5a43a23f182a1a437b208783c374357b29a067f6d19eca7496d2a05aa0dda24cb2b1dd7e5175f30c8065ee56a7637735e39e142d0f836a19814f8efcc1615fb679b810ebda92b1520de9ed5a0e303ec48c22983e71c128617666959e2e6f220bf5498fc4146085afccb2e992fff4ebcf8dfb0820f6ca82f667d4116a4961a40f3e1e2e98fac9d2ad7eece26584defca5be3ea1a092608f8868d4424eb55b2c275d0f264a9a360a9e4d1a89db23abb5d3542ce76d22f64d97e5ece78dd494a5cc2fbe61e0ae4d0c405a99a5c6eb822f4d89bae7f6db7cd6c6867cfb84389ac4fd639bdcd0805112b117ce93a8cc6580556fd3b00530ba31c14394bc04f6f6b59d4803aecbaa6fa01d57e552bdf0b85b39d6c01b423db5966410c6c8f810694b01dbe98d591e0e7ec5775b7900da6edc0de9381de8865f8115c321ce252ef9713ae3e13554c4d59af565fb4bb2718243caa7a8ea229249221a34907cea61798b8fdc9128e483358c94340413d4bcb427e44b18667b19f9b7b98bdcb6d36be2e96aa348c5361f3bc1814d698ce927a1a98676c9ec3bf4309996d569f7e9936045f3c138bd103c3e8e541c69ec04df2c409879cb3f3d5df8090196e089f6bef43bcb0719760d78ae88367289089f1fa8c9e9c3f4ee3b719c491c2d1667307605b78225c78110058446b0f5273a8adc8f7845e69ec81eceaa88caa19cbc70bd7a0f13174295567e224b5773519eef0a0cd879c94b22e5b7d314dee4a42226bb2bf30745bdbdbbba8d4120e4c83a27565420048528e83966818f8d7a95c739d09dffbf3ae507ff489cd30587ce8f905d275a54ebb380dc9ba800848ff3f7af3d1f98b06a9158b6a4e29e65dd7f204253b6fa2a772d2444c29a2202637b733abe7f4e4c5f0ddfb31bd81c877d94ce290e348f070dc31e243f97bc6d50d977f79d3a0246bc0a98ba0430d86f639ecda6d273c51fc4408ef8b63b69e3a4b50aeb5f9c7af580eaa172a108b7db307fe59cb06db7f375c5de224a0bee9856c59f67fd9f4e32878850ebd5ec039622a0b2fe211a24ef6c9905feaf67a1e3f72bf3478c107a42277bf5d5e7ee41e462dc166971ecbf26608b378abe98bae71f30d30a354b3f09975cf3ae25a816cc18f3300eceba4341e2354df67e54fcce3e416ec6bc96f2264726eeeed97e02abe0279372f4ec616ca9d2231b79e757178550f11a9cd239eae7280664707b801a756ea9e92a031d9dafd80327423db398f59b634a4b92a8e6565d6f829151fdab2c912b5b0c1994ee2c25f44e1d178e0fc2a71e8ac25d5a65b1af6bd461455bbef4897db86f0402756d53d636edf645c0d061ec1d4c1586540caac2c6ceed97fb3a6335d5ededf6247cccd1b85bad465cb39fb183d6eb21ea8fba8bdc1b4dcafd9cb4427b218842aeecae21567bfadcc9ccf09be855ac09f9510d36973f48cb28dcf9edc7b93a124e482e4b786f3e8418a49282e7b6495e2a90e3aee633e5ef65209b7f312747225c1de8c455cff8d52b18f158ad4a1fe911810be1a818285d569dc0d22d41f425d4ca3e342f9c4a53bcafcee9eb0a3f597449b9e6227ced6dbe0853752d6fd47fd91cb607100caf1ec525ba5cdc7b8cb2c2a2be7bdef161dcc0517db5de98cea07ecca30618f60c270fe7a70b261a45ee0030c1871392dde519422bca8a2da7b1413e9756390c1efb5ac5664e657f963143c0f658381a4096a1586fdc7ba0f62f4df4c98a4128ddcb1abd0afefe5154a1a4d4c4da7e856fef8afcb5641c74c474ab4c87ae81c8e042b4c01f4399892e1f39a214c73ed38fe4a58c99f86fb12ee0ed9085c3bcccb65dababa8e817e4eb5ea0ec5efe8dca2ee36fdc3526a852d69cb32ed798e4a1526f2f6c2f4b8a03ac00c754427de855c4d9e993c2086bc3e495db10d232652d822506cbf17acc35e06eb388afd43c9b2b779a771f814a81d459260605a43b73e6f3a56a2e6a1a0f665841e5e896d8fc133caf41c8ee1fe3014ca46b898e9e3091631702d2fb65a2e8c344f252d0eba7e9eb9c85750dd3a4f47ed256f8e42482f0f6967cdab03b3713cb87760fae9757e705482a5cf29bceadf5b0dbf7fc1802e29f692cffad687b85116ab3412a3ef4aa1ab3a583eb515af94c8ca9ab5af6642dc911823a0ee37faad8ab19e23659fe54155325679c3feab89b5d04365d2f6b277d3f96bf40a6b874862962888d9ec5754e95552933bc91bcd348d29c1effacfdfff5c1ba023c18fe1248174faff2812d41cc965e7fe4ba09fe5334c2b4e1b903196ff9b6438925d0dd0f9c0b393787e638a8f4c630d7fd625d8ea547a4f513456d62412924743bc75a773aca2c63c85fd45e9b15dba0b845ee53cb504c5bd87333439f575c7d8566bdb68cbe65e969c465d4557ea2a55d91b78d91af1fca5b5c4ce5988ea63895bdce0b89990e6f596f3fece5e4ae4fc6825b7b6947ee9d9808078c39e34b4f5410a902d388ccebf28e0ac3439f42d7ffe81dcf6fcb4d8c447a562820a0192571f97206d84124a3e75c2c2237a6f46f13e9192c3a3a8ac0cb79b0ac00c4b5e290aab83253fcbcc8d09b7c69a89839cdad548838278e2004dbe3342f6ff68d2810ee03a2f280b22bb29687ea5a65a9e7e78f94395537cf429c4de075df640313344815c193bc48acd73b2c4ab1e42a25560d6afdbfb6889dff6379439280bfcfaf2a8ecf432a8bb89328c87ec0b8f8c5a6f33fa5a41ad91c9dc5024781ac37ccaa53b16fa81e47a19e889510c27d21bfaea8fd62d779506ad83f2c4173ee375cfd0b8f1a1a8130a39c8eda830dee4d7d27223fb553e1c03d22dfde951a5ed8a577b0e524daf8f1fc431b71ce37c820cccc30fd91bb4885e7301380f7fca956f2cce82bf061ca77f1f93f96a8c620678be442cf13ebd88f301ebe0f32b5da227e631da41f0409e865ef366250951b071b0b9acdecc4008e5ba367fcb1f784a0a38118e5f36317f2e8f59cb19ef6b57c7b452bd8cecc8e2c76f26522a5ebc2386ee9bb55ee2e8f7389b83bd541bec1cb6dd721d400c7cbc55fce454aef569d7beb9a7b37d11926737a5b32d5512e780b28a82bee46ebcae61475d180391d622ee7250387517959556e64ba642b72c769c646c40f23b34c70cc9ea132460179f71546eb0a1732191047aa7b26e48b1cecdfe1fad790ee2d0c72d8f2f1be6725705fe3c7c020668ce1e4b745df40191418c85c8b008480ca9d7c7f4a3c032dd7da0c46913350c6ab224c29b977107d8476e40efa54cc389e54678759b916bc6db73a5cb38fd84401aeb3021f58935f40bf14cf874d3ea4e7cd4edcac93086f55be93bbc81a1eae6e9593637bfa3a55ebd99c0415271e4171d80da2b2894674e1bdf18d002afe5bb9c3c53ec1fd4c71b52c7e842b25a6cbbb6aa704cac75b1703674869c0239b0701b3b658a939a93dbf1030b5294bfb6833924abae7ee747a86070a2d80e2d6409d95a01fe59cfe41e35e0bfb12e8b65bb1ddaf0fc11166e54ac9e945e351d8f1d9decb916c8506cea500beb06bdb9b91f347c162c2729843d42b655967057c09e18f3d4580c3a40b38935a720f54ca16dd9c49e6dbe41596df5cd19c7009b8a548c8d9df7fe8602e7d6c2f581f76866436446e59d7cb59b67ed29ec465ec89e2520c4f0c72c66d780fcba996b684cbd499559d12f2e4d21b39c8d91b61ceea5cb77bf296111abfeb1ad0025743ca0c85653d23d117542889efc5fa1636821f1f75bf749ba1a8c6df73313a33f2ebcdc7b187578da84633c89532750e95d720059f248753dd3b80e544729381c3eafa43040575c098e87bb0bfac4be323da818cb9a65965f1d4b6ea7ddc8e3979c1be8e394fbaffa5f8c50119a606277228d436df7c1bcdc88ee9c6fa1fbd204fbff630edfbf683afc59268a6ce871520a8746590f0d4ca6167dad902a5489d98ef9b3c85e069f03b37cbdd6d65e5231dfbf2a43484ba75e965d8ee4172fe1783925fb89dd8f733e04b9ecc65360f8185c7b998d62d311d4caf728bd9ca02ee5f998bb2786e9f2acdca2de37f04303168dd848e7d1c0611fddec2aad57d90e1aa1091dbc6f3a2f311feac827f9352d2925a6e8590b43703cd6616189ab12734a4e2ec748e6489ff6f776175f2b8c9556c51d70c28d043d6aba1b8cd0c05b29bcf76419cb76a4fff6f0f194a8efebff26ec78aad5fc7ccea5d4113de81bc3171d2c29d91ea56d8552db8901c6258fbf8988590a82f13a8856131219422b990284ca9f524d68dcbb697b0564f7ed374e75c51ee26bcbc3188e2f2be0e89960d9742e0517123f8746e513a4209fde702f490f7a1bdfbba7c0110bab7537e9dc4eb6fcb091171ca650ae30330d9eb03dbc24a25d0a1cb57f46342d4d72928ac87dd8b0c2bea6a345d0aa7a3102677c16fede9bbd868ba489907a7a31e38b3b270126ed385a7e436a8727c2e43a80a17353c78366a06945ab847032ce0bcedcff0cd756d0a86829cd0d51e75b115f235cd5be6d76d90f8b7f60a90554a1655c07507edde7c55c85311494c25ab5075b3b0112fa820996e2e6b2f8fcedaa11c5ca199dbde1a9e9b490d01e36958f1acf3951f611e9e7244f5d328d685bc2b6fa8dc508a9e96b566329198af89d87454c6599d1745e8650d9a35aa8749d6c8fde6c830cd411c349091ee65b2c3d08c8d61b5433332a29ec6a639ab30f5dea256f30fca98bce761ea4ba4dc5fe4047beb9bad22f2dc24cb90b698ae3d5b675864daa930a96052a44382d4baafda64a8bd01e798edd428fa66c44c9eb2fe3e0884c09b5733c614419a7326f71f50629b2e5385e5f1b4832a8a734ae574dedc50b84c70f44d03bf89371dda62b9de04fb1b91549c8d976a809a1c8cec3c5606057468a7ae3a2a902fda29f9291a38865db8bc5073216e1590e96411c289210fabc6f7a774cea42e23f1ccff84b8bba97a5110b55322914ddb979b5ca54f00c1497268a940533ef7ade13e1bccbf6e2417dcbedbab43d951fecc296d2c81beebde1aade9c86aa70b0ad7e1da322602738d84f296d01c2cf6f43c304e9d2ac9c9ddc02e63ade16f87fea494f379624d0d8c146660ec53f453e6bf038207bd1019b23d97439600c3c2b839a037ea3eda902a5d35934520bf7c7e17e4acade9f7372b5e89fade5754fd7c082f3e3aae329af7e8481595a30ef9ad2a86027c69e0a8f0ecf48591d9d45c4225bde4532d15bdf2b38b19bfb5f2817d2e10b7ae305c1d2def8455d2a7287176b325ed7c18a52a173970bf528fd722466201be94131b73764f36ad2c71e9b2a923c6d336abcd1a59358462f0f3d8d988932e82a3c11a5ab0934f7ee6c814fca84ed088a70515d62ba0b84f4d2fa4070972e4dd097b33ce5d6f6615b7e225c03ff0b42f4f50fb7ca47011cd3b9f35c126bd83f60a7c5f075194189a4dd8b1d87b41f2fae5c924ec2177cdcef7e1c8b8b37985a04037b77bef74656032643af827e6be5d5175ca777a622022643fc1436945b07c0aa194eedb43e0346db3563a60ead2e735199e9e72dccd2447d21475fa3de1c855c8e3847e5b04086be09d554e35c0d7202682554d7ea01a805deec5ed567fd7d244fce9771de0d0711a0b7436c1da8b88216da220be5e18ad628534b47f0a6238f686637b57d97d5c72aa9326bba5d717be23a614e20fc414ffe216ea97052b8c968ca6ecdc4cbd3d2c6417b10914a246920b718de6326071b8a2fbcaaad091f994393d0c16f90a8bf7c508ebdfd9ac004b5896711a3648b80e6f522ba7e59428960904bbda0f42d5666ed63ff4912ced5babce501295e346c43ba9361ee94dfe081f350c5a8873cffc721de962a3394737cb067eb56b9bb106aeba02133badbc3f1c45476cf4c6af1a4487258b1ccdee643c3fe070ca372887066c2f5745cae6a69c6d854029d942d039c5e1bd7e1e92934b4bde7845369937f18523ad95d1e30ec071ce03a028901f161552882affa998e17afc1f9856a7a13c0d923cb9ebb73cf59c7ea1ca1f12c53f7307b7236bd7e38285c240868d63478229c13f60c3fc77a475cf25f1a95098e279e1dc3c5327e56b83b054eaa32cf69df3e8c66e89a86f7e5cb0288f94bf79e21bb6fe7ae1c00a730f673ce5bae66e951d918cd32aeb14af03ee1faad9a39e1e7d7b7c062a0822b41d63719189eb499817c52ee9176ddeb92a0d3b9121110982b432c52adc71856a7d663e0ae0364519c3e1c13731b81e2f7668bee121ea1dab6afcffa0db8ead3534745b59704d7cca61f6995a703b7adbeb78ae6b5ef00aadd38e73c790381d9deb393a132fb4865158a16649e656b4cae2f0d46fde50677d32a73084fe4ca78718315de1b74080a2764616988cf3ff484536bb1a7c9d65f334052195aedd328bc82b53c9f2253a6b572affd7bac959dbfbce70812ba6d0462fb9fd8cffbaa6f04b653fd96a99bbdfd4ab831f1c03b8723ec2786113072930c832688ff4b1ac7e573b3dfd4a09a5df97f17390a5de8f24a1e97c90ce039fd9a9280e5ef50bbd400932a37f47973c2602683248e2097be67318db88a1cbce9e4924b7bdd9e2c9c7471007bf4e8d2ad958bb406860269f897fd7a32c4d195e0cfebebad08a84a85a98876438ebad6d252df273714088305d15938695ebbbd89fdaa6f7abfca573e1e9d1a6644bb1b37b35feef12812bdd31a8bbcac3c196770a68fbb6fe02710c75b6f0b0a92ee89d9e34f584606e8db4c281c3a166e4b2c762dfa20b5c74032605bb635a0c3a28bbce85893e8d6314bd2c5a2253795bf32a9c6f6e508f8f538e637e6e93dba86026612bbadc6be1f9795ba23e54f43233ebbeb699832723789a9d24e79b292e98e689c25ea87de4c3a45632d485336a23d91f0dd8b64793810c221246115e74159f15f2444676be93d00d1888c0a8109579ce0f3a9b0f563e2eafc20f7225329e05bf394c8bb6fc2dadfa315fb49c402cddf782f4834928f544c8e002373fb2c23edc26c6403c475d12d913f000ad72edf3224a385707735d185e7018d6b04988a0ffa101d3da8c0abea8e306c087131670f4bbf5316c0829eb76b16b2a561e7940ed2a7cf80fb923a62cc34ede401581a9421d1710a65411e0f490c37e839ef11eaa2ba27d185a2ffa2c69899f1c6c30966998aeafeca10dcc3a8217a39057d84f876b4609f02b7679b423b4965a10d984110c25fe4cfa8f4b1f4c76e62ad25228cfd6d6f405dd86ec89789dbbd6a3b51728853724ad57c0856a648f4310973396e29618ba94178ba8350f3efa59cff8de5485e700dec270f4f910513afd9f601df29da77144edf7167a0db5fd441126b5e067fcf8341532c8a706c0833a7ebebc908a685c00ab0f60d401998027c580796db4eea659cce206c75d5ab79338400dd77abc633af1d65112065f533eb89ee5e5247a321ad0497c0a458afca5b66e5f7e16049af3c903b1502da8e6ba59efc4665030f2aed58b2e26da95bbb29a5a5a25418403cac8db04b09f22a5f3b14c240ff43b5b8896331d234c715be08c5ca1fae5025a045a23dd967b302dd19cda77601a0bc9b1840634a308c37732ffe054454f145bb7e0c4ebc29cb820169012503410b47c838de962d3b3dc580e49c3e105a3d2c6314b443a3a02cb922314370b00c894a7d711f0208c0a181e95f8d5be556ac501e22a169935bf137c30f9477a354940601e6911c11e6570a7695105e0a971a6b7dcc393cdf682bdc40059fbe9dca8096d1d9c199b499d3acf966a413e25594e7b6219c0d7a6e2b0846c1eef18519e2104b9878ecb11c769bc1ed66280c48f40db9a61d845fd4c590f4b4b5066f9a98d4c895aec84375d3ae252b272d9c90cd23adad0b4f3c410a212b21557b5a0898e31dc0856fb313cdf0e3f68581769df047721ba7b5cf9da1704cddd3c81bfb86b392677b3e40f4cd23424aaacb659fb61e3ef2beb88c34fe900192dd7e3865625cbee2f53226983306800d8d0097a2d2cef4fca114e6b3fb7f94b468d2625d8d40e66a95fd3a96dd248e9812b7eb7b6f7c5f48ffdce1c49349fb71d9793af737bde7e937d827b014d2e316332147b845f8f90756de5f318392adc43ea977447160e72a247868fd935fec8c1a3faa0854fe17dd9fdfb70b2ce81e5aa7ad023b1105669b84848b49ec8753a443f39dba16453bb1c182cac8f866bfd3e2cf0e7cc3d0f99fdf8ca15862a99a9c59e3d4defbaaf525a0328b612b0a88048d9904f5f917da10bfc8558bfe7a11115544437ade1ee237bc15b3b769fc90d91d80fb7b0f4b1334d23cdf0bf225598e8ce968aa03a47748b4fde6b64634058bb0e39139cd98b72dbf4dd3e92489919e3cb26f4fdda2ded479a624822182d4c6d7cf7d70b7a521a37bf8ef1130acc4c1d228f7f8780b854d74746111ce7b277e63e8f3c0fca74e306e8f3d030a1ba1a81d0cc3342d29da55fa75a00569fb38a07a4fd391b0f3e70e76758e0d6786d625cdee9791876bfe7612d2de1edfe64f14b4f0c9cbe1c9e60582ab8705922494a4f86283f60757317d7dbc6e7d587309fbb33eb53bf0ff4a02b255d64ddfa12c29a84c105c17c553e7fff6c5540b696ee8bb207ce99581a0cbad2e761feae6a230067e6bb0f919dddee3238e1830800c729a669d63af771cfd81a3dd35326a4c02d0c8c1a2898c3fa3cd6f96b9f4f7ca5e81c83224f2e678831585299be036a60b7f31886c31716f16c2a38062270e8d2a6750698a458c54dae321e2599fc9b10b31c5f13034e38783278005989c64a78eccd08c76e670642bcf60534556baca27a69d31c6a90ce059afdc9c4b824c92a431c4f91a85448add2b5a678d80dc96f13cf1682020a916bc844b493a9c52a5591573701e5ff828636b0e8b047d100dc6ca9c776e26ae1d3ff4692769a86b2f62091ac187f68284b8308196582f99136da438c75ce912e3a47d621ad347cf5fc5d663bea8c63113c5740e182d42b7f3307978794670806a2e310b6abddda05e086a1a180d5c95d47503708f3ef402bb500fa1475a0ea18e3158a8e47538374969e4f0a1b5066ba16ef13505f4003b100f0d4f1b1272eafe55e26c060576db1c7cebf99c928f82a1945e3602b5853a39bc95182ebc1bd6a1fb2153caec169eb01cbde2f026294d73a1df22ff987f3ac939a0e8cc2841f5f1df8e37919ba12af8005e858be095709bde06af0f6562fa684759cf4f0e3eed5d735f7c75bf5197251ca8d23b2bb238834d89340b0a49bd11faf1696b1078bf1b34407d7a354f76f1e1d21568f0227d048fe3d4185821b2a6318a71017851216fc5866396920ef9fcea15d9d1ec7f099243955f183dbe3afb3fe1a45a8333e5be6a3375bed6d90762c08d300e686e31993e3af08453fb21defb66f2236504455a8da470b43ac930d9f1d5ffb23536baa01996ffc909211674ae9b95084f1d71e7f853e7d1f51555a8fdf19670beef4ab7ff1fd25d2260011fd2bb1b524efaa002acd951d5cbc419d023f2b1c9ead89945938ffba3b1f030a040906fd55a13f2d26596f9a5d40ac463575e7f84c499f0abf5a80795f4bdf7f433a5e5fa29a6069b8947e0c4f4c6ea741794725d64151e674047edbc83437ce7daecd06d148ebd9c11a07a7497393b33cd01063f90e1f08268645645519096934f9ceb9ce3676b5f6c402806f58cc2d9590f25b9edc3fbe688ff74182b85c0c70201c3aff06d19302fadaa7e68787a2d15aeba3903c02f767bfaa7157b6a1484e3584f9131b3f76cd5a0f01003b0e98b1ed9349a5c89120c88c85bec9aa7d94208439ec5256cf1909925077c6914cf8532ed0d00a94d39dac030ebee01e1816e8bf9a58002cd15550edad517897d3687ae0f40c5aca04be994e3c36fa18992b5ecc8f92c256781aa6fb472636e01092fb6d4a3f146801ea88f0c6d739168785c87f60026c6720904229ff459e00083ae552fa765590464abd5af2b10b4741957de3bc639ab1709a3bc2bb21af28d2ec117cee561d715780bea3dbce6b458cf6ae9cf332046de16b923ff8c9e1817d98dab200920d1c6221e4ada58270550bfa6bf0c9177fb8d9e57503550a412fd06931a9ec2b3966ece2b64d86a6161900bf121259cf9e3fd25adf1efeb43d6e44982ff090e2a5f8f1078a01e799319ad20519ee44145e60ade3ca99089cb555a7502fa6b799c573118f8f83d8182688abfa585df577659740da05d5d2a9e823b4de7a9b9671147479003b45df160c6c85f79aef8332a1e4961ad324629fc08b205d37d031282f5a3c168ff112be9d483b4683b8a7056af8d1b7f6e51788cb51ca27d51e2fb2da4308c110b1e7ed9d8e0e099d6a25e1c0ba41196dbb78849d36a614f3108028181dfc27ad93990ddd375dee9808f472ffb4576ce2e3c59e6693132c773795e26a6b4f66e92fd86457a0e25a2e5dfd51338941cbfa6a4b48b7f8123315aa9e3f78cde6f8b110c09dfb02c216625caece00e0fd89a006b68980211fe6bd3a26b6fdac6280f86ae532faa7ae015035d7fddce37fcede8bb0becefff08d7651187ff05fac1906732b70c13b4235f47b674bddafc1eb88db4dc2aa713851ebf4860c58a0d7a150865dc8dade58a98737b516076cf761ba13bfacab37ac977f14b8a5abe7fa3de396f3145bb1156e256e683ad44c7b392cb75ff9412ef52074f48b33c10e527b14d6c514037500fbd0a9399e191e2ddb532b39b8857fd9aebe7598d46ee63769237523210414f93e30d64fd87a5c322fc919a4499f73d1c4166275bce19221b1e706f9a9bd5ba662a2404e9a25fe375c37f7eb6d6166ccc59e95f26973e4b390abd68a0578e9c160e72157959c96766c518bcbd59172f276d204e92f861e3c5661aac38b5b3315088f68a51e83acc0cf29318f0a9e2f2ff478a1e3d19c96ae7f322b89e70f45a8f8e54730e122226743962826f21115c3c1a884e4667af1c5cde78cf3d429c09c4ee6e99973cb81fb7f32dd710d965af251ad83ad8b16711099fbfe7b6d376f9525b76b76b59888cd14885d114796a1ffa725ec87094aee135fdf03f9e9fea80f4eb25745001bab461fe411f51e9f60649fddcec455daa9dff841ab751aaf1060f97b043359f995c9405d14a95658369d2fb692208bfee759c828d3cb6efa9edae6703a2d9d44e05df61d72cebd84ba653804c322603769a07f91ea810d8c1f2149f735db9ccea111b008d9000483b780ed940386b06b440a6179e2f429a4b98fde9ff977eab0636e6c87a9ad9fa05dd94833a7edea5219d29a5a5fc1b12f558504025b882f44b8a2f3dd7c2595440bd215f6e719f46970e4b1fd32580d29c1eed3d1ad4360474047c997a84e66c3a1bcb0a0a8b4f897b5d4dc0590c3e7d38b741babb30c26d0b6e1b0fe07533da037c89f19f80b1ca459268bf48ac2a192960d67789c9caad2ca8f24b2191d32521d76d347b07fb8c0209237cdadc0e996961dee2bf1bd9cf278bdc722296116329677010a58c696b7a8c5e0d240e4c9ed293a8c8b425dd37e1dc8d341d9551cb6159253932e21aa0f5d13ac9c87ac387f3a599f9caa6cefba7d8c4df58b9db3b64cb8f324a6938ae3bcdfb085e9e48896c4dad629935d9fdc9b597a1c0a185f2ba021c86273c6968cb121825af613beb6d278507da2cb76d1fd04b375fc7ce988c99b44ea36aa2a35019c2dc6e41beeb86057515edb306495283f3d8d40859d8fa89a91ecd7f8b1fcb0e371b7cb573d2e4f856e10ab892ddbc41fd93614f5365ee3c09b9de51e83700ec1c92671bc224a9dc1d86a79931fdf4dc3d1168efd3e464d78c20020400fea9199fb6559449108ff2d174d1f6477587f284e9987eb83c719418c818f73f926b670d1edca3308088dbb303fe34b2452ece5372c3e5d36d9f7614b2e1b8590ebcd6c98948310490a8aa249dd17ed65bc7ccfc1dd5ee99d0a32c6d259febd719314828a2f2392f093bdcebc0dfccff9e3d33076154f96459e6fc9e2f99af5ad0475762dec6037104004b0ce3034c9c2d340157ad9e6624cde8006f7c4fe74797271a6f3f704afe93a43579b87fe59f116f10e5105979d529e50ae319a9ddef6e415a9cc544f51b4c68c76a43885d05dcbe7c03d6a46af545c9ed9846b5e8e767c14d4a6203cf874349defb4eaab39240892b6f5acb4f7096f723b68fa410c642a603eaee3ecd36ea5fbf3460147880ab3fffdaadc8a8d29197edb513d89f1f620382a7e287dc9c56d60c0a775ac76dfb33b26e47657e47417b53a0c48624ecdb64f8af20a6610ed648e31c7b9048d8be98d9b5a02f9258e3c1a96fb21da7f1d2648a2703467ac72affa0a9802e1b52b8fa23fc93380ddfef344e9c1ca4e84ddf9fa8bad2792264e4a21234219732e162f08d4a3af492803e349faee2725782c1804aafbeb784362c2aed0d651918a1bfb67037d913bfaa1c4a5451e2afb101b5d187ece35af58b0581e6d8e9296c549c1fe692ee9324b70ab7d51b32172036f918cc8da45d580bb3eda3fdce02a467a70e3a76242c4d2b63de926d54c09092cd0ea565ccb5dba9307d1cf60f2710fc1fe97357a97a76850ae82f3fef65cbd66053ec0414ad9de8e79bee009e1054e13f81cc9996b4feb2abec92e103c77765f7e40fad99eedde47fddb254c75b2221753a51f48e3f60b1cd586d7301321a45588bb302e38cd18e3e87a7b92073da24a41f274891ea496f382a78d6a6276770a123a5274ed453695f5f7ff6c8de1d31c43034d7f2b0caa819fce23f4b1892755ba80484adc1811ab57b6fbc3bade815e3f7a92581976768451395eb7745043e7b7a4e239fb00fad70cfde8307dcfbaaf3ea31f1d55cec41991c708114d5ed639d7033c341e1c089e00bb47f4e57e7d5a07932afb7d8c9e1be01d4278ced51ca6b9884cc7e0a4a58b6098d296698304500c21e3b770febfdd2bbd5992b269349b26423092ad11d726f70d9934ab14c0733cdf64a8646126cab2a88dbc861d04538fb3d779881b484c9239b08c3805af7ee03ed9e6bd7cdcb80ce729ec29d6727632839096f1e47a174b3ba974c7572e1b60ee147789419924868ca3cab8c9c9ee8e1ac3ac09da0d505cc2b82f5da9b99178e57a7b4fc90310ecd3c128ca7ca42442ee54af47aeee7af50e4acc7c89cc95ce454dca78760e39d48b3b8c82ee29a56c7ac4c6ad54bbe96c9829611062850eeec51daf036b91547a96b198d270b70a7fe19c9939d2c0a5324920e98ca01b58768e5837455704a6a1700b6b7b29fe70c8b93871b44343290abad3fab6791d86b3fe88d469a1196327d3517b7815eef54e73837f1fe7e758e7762f1d3995c7ab2a691822b727d38172d96f3fbed942b8bbe01d62f3b82d7d7c02d19f0981800a5753b8d8e74297cc3cec23e9e8319daf4c2dad7023177c943c17208210427cbd9c7b7e8a8d80eb825d66519a24bc18a1fa1776554714173de2115f7d5ba1368e71fe417917213be9e6b970e818d33954e6951d4e211a3444bbd0772c342ce4a566a51200a884e682d53ead4c6000db3dfccff4c338381c1648d15c54cc0732c727bec38a921e014b8d68160dd3eb628173c45e8891990f6c511dd27e3008225b5f0fa0614dc1420466af929b075c311f952798225949ba9be0d993d542ef74f15f2a978f27fc9beda58fd0461be16bdae560cbc7acf3fc8228eca06d5bee46806b8927a029e2d6e9a1ff790678181564994631d136ecb7c8ef1d60a7bb5c23ef094efe30455d372b045e71ec497f634afab8cfccaa225ace8450a354644067e50096e1905582d8acc1dd775e0920b3b3815ca490cfc9972f3243695253f47912e5860721103f3b4711f9ec96a6c4615856e9171000503c24d067fdf0a7b18513afc7c2b47e810240705db0a2dabe6d263890b1ce9bcf4d0bacfae812d9b92d6c973752ca2a1a7df32d3cada55a15cbf653c7c2e89073adab0332f365bbe5786b07afe76521714c6e05d52370b8fd9cfa07c517b92f27867de4c89c9df6991a420f601899749a371d6fc653516cdc68b12590aa042f0efc5beb995925d06d235cfac21361473adfa927acb20ee7fce73f361f1dd496933a736fb8ef9704c16c2d6a849e56abffb726acdb6da03cf111a8771f5b0d88c7f3019b6d3e727f339a9ec7eeeebb102308e1954401945c2f005d381faa9a068ee74d55d0db5a8b844dc7bc2cd92b51568cd7818d4f49eaef0f07c93c717b26a7431e2c47b829eec69f24a132c5980cd9433d44fe70a77a548c852ed04b87d259f40d8b16d399126c144dae3d3044c7d98c1c0b65ad3e0b366802966ab44c26be6092bc8e81f954205230a5a0a90ee720f98e5facd63d78efc94b2361f06e169d2dbf3f4d931fc32d6499d59aa69ee2165dee18660ce8c1873e549d5a14c316879a1304e894e60b4ecd3433407588a7023b44af32b084f9429d376053ba224b3ec57a0909e63a305b9e4d0fff4d350952e50020f3498f502a959c0e31a87659f85ae0f9ff6102cb7ccdb1dadde1b36c881f31f3b74f1475e88c91fe8d0a0c2f26876c534ad5fa03278a9d1b4b3fc9ae31e3b5bfd2ce44c5e4e007bef7f75af41d45d755e7877f2478a2080b7379e493ab2884969bb18683d3eff9a19e060dd9c1a1f155bcfb46134c9b8ee98362f98e1e18da7fdb02d397e580f0beee54b96d183276ad5ea094af1f8ac01139d680a6c0f17ff39529ac908bddad27ebf1b8e3561daa1a9efa5b2dadce26ddee6a2e123496f8d44853e92e87dfda61ba52fc372f0ce0c8a7826a6c89323bb5e4c0fca25e8a06cd8f555bb57a21879545c3eac9bd09244173ae8e173df5ed273c00e942b09b6e73cad48b6f693fc322a6ba0fe06c44c2479ab344b2eff37e7e85aeb28f737e6f2c2340493edcc4588d5f267074e123a4bb18b5f69045a03d5f701df01a2c78570264646fc61a640f7cf4614d98777059f13ba8cc57a6c427b28e9edf6096774667c42d2fe3e73101d6a3daed283509f214b369a934cce807854dabb8134bbe4fd1e449503ffb5577148401b8fc67a2de4b968d70c13fe8ca910ae0c930411c63174a927b329250b560fdddc9879380929f91508b874013e81ec1d9b7df619b34d5b1af6c0d3920fa6f0ae9e72eaca9b23052f3da6fc307e8edef53fd461a1ff82bedd60fa0a4200914f65db05b623a7bfbbec9257eb01daac9d7f9322427daff712fa7cc5d96685ee445ec49166788e5dfb8c5e728dbc182f58079900bf4041a1203085671ac4704db4fc35dd4a208079335b6dd1f51433bc452eda95aad12dc8cefbe31d1a491872a640cf1266c111e42dc8c83e6b880fdf2d333f651bb41d1416b4f9be12ca1302a366ef76d75f2a1de0e17365024e431e2adb1e4004842efd9323fe218ebea6b24e5d1067aae63ea7d5a90496d9ba3c8882e73cb3c896f619b403e679df16c579996db247c27fbb07ccf61e8aecb5ff7c99871c66c2aa9d31e20f1635a556a0b9a176643e212b8c38553470c726678fdb89950aff274b8bda79db999bc7cf02e1896e3c36e0f8bd6f530e156ca9ab4d0d3f1e1d759f9096b7dbd0a8abfddd051fbd06311a2e590edb9026a21ee44","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"c8f827e59e94b0cffd2466b2cbc518aa"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
