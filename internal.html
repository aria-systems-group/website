<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"ff11b5af4acae42ef52be58e83403f3fb525bc4da25523141426a5b9f2963a455d67c89f7f3aec9ead75016b49ddd4165f40761748e8f3580edb8b2f30d20054dec7bf8a804a96b32b4a9c2620a7ad2f1a9c76e6278e5638d7f904a65a033ec13845864cb363c52a81741897b4200cf3af214e3d7db3c2d33ccb61207d868b500c5580a4a007ce4424e428384091b434745e743cedfe2ce25fea04bdf0ee7a6208d3c70a285d4b864f0a431d9f18ddf5fd12b948ec562e4cfbcc1d556d7222536fb3e849a17c1b7b369cccfb79ea1b9288acfc0518b0c01093e8e703f75c91dfea72765aab1e1548750a3cd47a2af7f6ece5a87bb3337721f4ea7e6b7c2ed5a0ef67ad4b70cfbdb3c210561e4208a51de01c7b9b28bd65041d7f1d1dfec8d2fc1f57c97298abe7a882502433e101007588388e7364d16a72c17eb6a8f1920a9388f99f15084a4cc2d1984e6df419343bf9e6dabe57cec680fac1133b38fc9e3cc1611c9d1d2ee2fd20999e2c888cdb1b2261892c9c426bc0fab58381c1fa0f6a7a380b79e5c7d26fd471d4eab099f859f73fec76cabe265b8694342efa5d11808c727874a180904d1578b575b336e9c34d1e90d1c473619350e690092dc2aae2dee2c9b5ccf07ec478dc921ed23268a39b837ec892937e2fc6d278d717a2dc419fd164005bdc6ff158442082874533f5c82a28ab7d18872b9500603ae68fd47649563758bf4d46430d729fa81646d56758018e2829e3b56e7d3acae3723c6cbf43241a9e9bdba9532e60880c26b72136769f51999cafcbc2682795015bb586a708066253e32e2478e3d32badf372273642361277ac878b28ed6e93ffddd1bf2fd4562b5b72a7927000a74be986e971647b9c67c8087405755ae19b49e1cdd596bf40f8dc11a9007815239de6a3cc9043f78a8d78c605619109c37fcfd7e083b137bba0ee2d65e46967a6461c549abf72af6f9c0d89d56182219545bd3f56e38b107256abac1f2552a6fd955147763d8937bc582549cf94909b90964c32911101da97d423ac966bc4fb74dbb84144e877ee519681b1611838a661b1dfb3abb7976b1d4e4a9b818378e11355f61ce3911490721fd3fc30e1eeb8df729b4d7040ae0c81bd0426aabc79143bf4d5d07aef0e82d3549787f1879c0bba8eb356b19936b2cdf46a9c38307922de6edb2fe4815fae918e5d507d46d053ff5729400f2c06918d30dfed675be2f8f3c4a3852aacf55ba865587c29596636e30fe912e6e544dfd7b808fe03c90dd12d04c2dd49712299fae4c7b0486f8c9d4096c58ce7e2d8fab63a6168c43e28f3632420a9c165a0864668b9f12ca4ebce2b2e6392d6b0bafcea97a0f72a78f0b19436721f001782a28a0093f0fd5b6bea1a821d278d6b382008ab0135c2e0a9767cdc162aaa717894d67966cb8c107a536aa3cb7a05d70f74470fc7ae52d49158bc5967418161ecfc44a66cc34dc94f7c999cee04590c973e49911bb96ea8fea7a7c3f56ca654d029f76289b0ee27903f61bbc64c3de60c859b810b107f360c72316a93807f13c3e835bf48a7a4f0b34e5c23179d70e96ea5a38aa929f282b9f3748eeb3b51cb829fbf0696d4cbf940bfa097584a4e6fbf689987b097146a757c7b4bc74b152a10e3c57118fab3304b9bd5e2fa92ac9d0822fabc55bdd19cda0d4efc54523c56ec9450d4e1d583bebd038a35e67b04e28d69616c3bcdda3cd8afbc9ac77fb32eea2d0b4c210bd0a2820a90b3745225d6eb74fdf9c8e845cfe88f47018f647efe4ec22a2bf33061bcdb605a8c6faff68886b0c00966c8a394d340266b68f1312ec00c707868b3eac6b10e3ccef358e688d0ff4b90e3745cc6b86e0da6872e07c3894212188fb94b08d95470cb7b8c0852feb03969183842ef048ed6925653539b6e617d519b4427f8a19bbf08f4c038e7eb56e2919dfb07698062bddd1c77120e323049bc843b8aa9099078afa9451a36c6faa149fe4541bc305c9ff3bf3dae23613011f32b5f22e958e2d78d64df1c5aa83af120fb0ca7a64c9304cd3ebc8e1b917ef009d115299aeb5bf50f6cc828cb5c20a2193e7c1fb3426f22bbab5388ed97d18b251b4f113024e49336922b7f4ae9d9403fe010119eee8008a29c8c3225f087c162af4bd0180bc16f2c863a6edd38da0f82baff1f324df8a2d58e1c745b1eb5a672d073c3cb2ae2dee25d90cc4d2aa2d58c24728377cbae30ce01da0b7502bcebc63bca5772ee76a6647b2149c4a0175c249ff882ca7904d649e88399afccc9538d5fd6789cb5cdbdeb440676938058e690b66022930eecafbc29df8b21f2f9eb91303b141cf784d7b887101fb30e9665e10ab0a97fae4cead137d6f0b03817f40905d9b112bb4c458560db9fb335d94f25c7b8c0adaa0e85cce42ea1246f08fafdb7151df26104a71fb6a15039a4a9cdcf75742ceb30619ce628fec91524d13db1d36751a4367c57e6df93dd4a05f861c78ae07b5d3308acf2891637fa4b2bde860086957e271b261a7adb4c0952e385d672393a084a105b17431027f55915a2091ddbff7887be4c8c8e93f051216de72a40085a5f6274bba56c0753db5ca14dafefc131e2bcfab9403e280b450b63096bae9b5fbedcb8ab411520255c1393c8ca08456208be8ecd8c383a25b09835096db13b4beeaa122ec6e8140764c97c33f7f2dd39083ecc6660fd5a4bd70288b0d37bf1dff7b3f258091e9c7af980b7d0f4503a0d7da0c2ac64a11aa69186f075b5f52a2ea55100ba31d032370fd0d195f16aecd3417030fb3c83249c44d77df770b4440b5da621edd9282399af45c959f4a3a063db8961eae01775db5120240ed44c1a48595a5bf8236888c7619a350016566a81b54440113adfd4a31e18ec4f4086e7f2537397b275a15c520c41a9b8c6119f79f96b093035a1e7e57d7e0057ea109e4415400375cd1e300f961770292e081734a36fcff08ba30a01de7e1b0c911d18592a238c2560dfa75fc5faa01e4d1d57300d1e4383a944ceead05090140fb9fb2ab72420ed20bc4fcb2356699ab49c216b904c505f9dd336d60c596bb46d60a670b21d140cab043c83d6ef8b28d6eff1881015f9328bafb215cd0d18458eff854842043a3ae073bb95fc586d523c368bd6bb9a63d39d57f774ede8efc5cc8b8dd7c7d9ecff8ae2d271355582644449ecbf63352825b37934cd780b5edd0e3371496c4aef49dd21c9bfd738f0710f7500daea145bafe4808711ad06af5f08887ce95a128876fdf2972adb11ed350fb451f679c0ec90783d691175151294c584612c60e0cc05fc5a48a74c9ca33311d0e6b59865e33bc56e4e80bd36e7cce9a3da5e126e23e3f67aa77e7ae2e86153a31a59be0edec3b7a8ed3ae866e5fe8a6b64f1d30a772707897505a34c553fedb67c15f2b7f2a452cfd5ba7f56a49b7fff9091e307be09e478a33064664b9f47f984640c703be62cdbba42a27960cac551463fffa6284af4578b5a0776483d0725e783bdd19d968483e2a3bff6214deedfecc7d9199d7bf93645a5890051aaf52038cf0ca7d0bf00dcbb71e468ad1f42815e182c2fb5948d552fdfb86424d79a61172f9d5eb855fac2a5612d00456b62641239cda24f2a9e0f2874408cfbcc08070bd8c6e61933d7b306d5d410b4479e16f18de82dc8d7392c968e268df46c654467795e29561cecc2667994903227d99d7face4218496d799a574d8fbb9fc54bce874fdd1945ac3636aaba5807e488dbe35a16f211d7c910f2bfc20bfec462e6e657d5c28949156df0698628f83559817af104b2697677c4564f4f56ff461c0c700f27b5890cbf2cdfff9c2e412334e9b82355da0393c3f81636c2f26060b201e01ebc26391c8f205f61ff3b1fa37d61dbf2406a1df0f6a6f3f35946315087e73351796abc8261c0024133e3d651713be5944ff949f79756cfe4a0e305be83582a3907c13a714cfd7ca37627f5a7bed85dbf6681777400d670b61baca5b42767475a76738846989431519c83ce76657a57be8b2372e3bbb23c58e3afee3c4067ffb5a618753b55a7be0146c89b7a1173d1868dbe02b36c1e0720c51bb493fe7fe2f794f76c3a6cef57d7722ea25ec19e92b9d10021eb6a3c27e516b12238f5ac2b66daf915c304bc49001d78e831b11b281e05e997e68861037b053afc40aed9903d1b1466c34e388b43751f272943b2befa857b86223ebe4c5f2663cc3275f69803bee4b713dd623eec51197dcfad6b73e11cc5fd20e8b16efc402b577f5e1610973ccdcdc5d5c3acca787d866c89d37cd5b373db3734e0dd3b0b561ae24cae79c339cf40f045eb4eebbb5206614df3496e502508eab139dbc6571aecb3db0df4e4caea9f7dbd1da21c7206d1a70a12791fa49de1eede2107950c507d4f9ec0b084aff17433ac302ef46970b55cb61aaf6d371a194464f76c5bc3889a6c68a4f09306cfbfd5227f4bcaad4520367e578b288c270014e138ac938e809cf727c35221a3897db85473b0abd7fc51044ac8aafc9a662db42b581bb37a107bb1a4a129b548616c45fea274b7707589e6071d758b79750a52da34fe7496c94e67fb423ef1d77927187a8a3cb9dc5d2554cb5a75ab7dc63475d21fbf92bbea1c444317413120e50647a4cc88f038e5da63df17d43abfa14880c78f12bcf31799a8de206d40f2c1ef4e90b8cf44e77bc0eb7d416b396387c766e8948eae36161793048c267faba2cdf587ce9a008bf1296340aedd51e5ca068222ca5dc80ff3f0df2a0cf1488708beaee8f1909fe064b12d369b185159fd0a9cbd8990dbff058826f39f2bf3972f93a74b1779978de6e5ee4fe64992d5055174e13f52671ace53ab1ceba8a1d5b52a9f0fb80b979a14d0a444e8ff79423b62f2873423701c9a99e9de98c490707ec75c83d64cc15141e800fd988de170d562bed1f38f99e46da106457eee65c9438f0c5ef58b7c9fdd4ca950331ca74b205f365cafbe1e3fffffd9f2c356b6b74699cd12f59dc7faf8bf5fd9144f7c2b31f655b30a9085bcbf9d2f5b411edbdc3fd96676d2d35f8cddb1b1fb7a1cc57299c9d91eba22fc26bed090b95b66c483bd8a6e8f314506128cb5810fc03fbb905ac7bf62cdba9a5f9abd52c65684da200c547bc0077275ef9e66e32d05120f605b36f71e160b8902506872dedbf0cdaaa96cc1db02f648389e23f09d498fce5c8dc7fd87515be083bda9d4e21e8d4f256312f21506e90816e12d9855665238ee2f4a0c95e54cacd3f44fda344c7a85acd5c25215dcba2727b64ed715ad0aec8a61d0d50bb0c28c45ab39c54bd6404b89b43eb3f5f3fadeddaa9c80d31d99f3092a2011321355956e6b861b1cb8276337b66ed3af18ac9cbe950385ba46368f21a50428372579f3b48e2d8ded10d1d5f5279b0ec8552ab6f69f0d42d68062b7dcf6b6d40527e0c10c4403c52fd6b92641bc3e5714cafc3ac495deba15da381b11c7aa15a7b9c5bc83415196e031390f2eff492e9c9d70adf9dc82fd7c342043ba912d4605a51c7d1e961d1cc7b71d87506d48008e8fb0117bb5e6fdfbf0dfe564e0e5b0c3cf89655ef1240476882f3e5344a4e0cab9ff28006a005d1ee3eda2e2623b4987534fb12a1dde772a11e830058b267d6b854027203b2566a7b6f9bf8644bf3e3967a664996d5feeeea491e834869d50214e034a2d211b03ab4d010bb999e03714d347219966ee863135990d2cdbcacaa93748261685086c36440cda299dba2c445d7230860e92d2e6dd96a25673296e25088c39305cec7a3e94915becc3828943b974f7f4874ffb9c82dd1c3939977d826aecba80b802ed8acf9820a1cab8af864c8e26c25a5eddebba18d0e20f50cecc0bc0306585a1b5d85d9d2591a4e8a25700f00ec5b76c47b0249b8ccc73bedb312eb4778b3725457acb70b67a3b691c289bb673efc98d958fde13b75430a1c8aa84fb68a86d2d17b779ac8f6e584ae4adad3bfd28c019a107d1e41e03964e29f044f42a120b7c12551c84115dace4b643111f395fef432c030d2748b7668ce655476cc34e7042c66d243baccccae8c742fcf594653203e3736c5a3ebf88ba8f105f42d74db468a35b82621c8795d2aa5dd38f41cbeb1489abdf02bfe251c62fe90d8190edb57b8b3e08ee0a72311cb6a257d4db8fdc5cdceb59933599da5dbc361ebb19ae5822f8b89e91e5f61d5c5c34ecccbf562fdd76b761538031546062c40627a43a524ae910caba3df1a58898c4578070dbaa4e740f7ea8a20750de46fe639fc0b7cad7ad53b4d02f2cf99d7f28395710544b399fba3ff205b6772df0203b3ddd230883a46b8cedd94f70dd4f800d15e31a660b63c49c2629205e218e432e65f1e26c26e42545dc4a5b7a8df9d891ebdad9665234cae00a370e49abce9a11ac5a7ce138ff02a80303158ce5a10c5027d54561b2e0286be13f42fba3b0f72a43ec8249b0a5446da2f6aa7e21710a23155650cc8dcb12a923ccaba289a5a343ad53cb1dfe9a6bba86961547fc7dc266dd4abfd8a0cf7be3917f36000dd1fcb3bf9f88cf038cb7eb6dff35ead5f7ed4d2163aff6a84dfe7fa81b5e1b58a86d12c8cbab260d0355430c5d54d8e6e083f198191c9e0340c5e73a49be8ce62b401808e4ef288a30462b9f7325f85e31831f219b9043c1b842a7eba5b2178d7d79f5f0503163095855390777c6b6ea5ddd63a82f697700f4f1ceb8edc65962641e2ef63b53c744de7b137be3c069ee83cd406258e001208825c64e6c77dbd8fd755483af00b7b36e28ecf7e7f8f1bcc9e26f1fcbf843d4a2264bc642f5713af4d766720945387a4b02d4eb39272bfaabbd7d956714465de9dec350d380524ec80dfc385b6d57497d5c9a19c95e0f2a7673a1328bb55499338e245ad46c62ea679f715b4593d4d63744598e36bbd61456340c799194a7e29f4f86781f0192fef845413772f2fdbe4076da3f653ad343e4e776244db3650076b80724c0e9465815acc2ff9ba2e86af9fd9578ec0f3ec0aaa3f13ab452ca92d93f292b1554dda29fcef52fef0398fb69d78c0aa41efe30ed00a79a1d5fd7653853d21e3a6a58f82cfc63df2ae5e9280ac6f27039a6c2c10edad0a076ba7fabb0d69d6e5db8a35176d536586c67ae6bc626e806b8e02ef0547cacca7b444571501573bb13494ec1dff0b0bd44577063c7ab1bb9bde068ebe0f027fc3a7dd9b65bc15b2bcb0ff62b4f7fac749de0ba925e45e1d20e4f71b6765bf46bbb1a6f0ee0aaff102c84c719472418ed9b8cc7995b8b051e384c2b909c033bf06098790ded466ec56853aacdb0dea1326ed37cae073bb3c8c75d30922db3505372d46a9fba8f2b8fab0525e89c10631299ae4066404e11e643a43812655feb6623cae0b3dad0b836fe475a1b18c10ddbc806268eca30d41b232e4ff49676cb90854239e93a578baa1487893a895b5dda0fb188cd78da8ffd1328535029c0e0dd4ae056bc80ce49798134fcb48512b169393e99b7dc15cb69e24a3a1a69c5cb36153823358038f7d37316e2d18d0ba0dc5ddafe79e5aa848dc6093608e3821d741b969880bb1b4cce0be945d189435706e30ff97fda45949964e31bff36edc2512e0f7ad99bb46691c35e0f29dc2ffb4b229b1a41ef3a63e3648f54ca04d6fa0760b08134b6668ec40b57ac81cac58aba298844fadb3010348d643ed9ebef9ff52f7fc7d98eebe30115d65bdc0bcf2bdd20350c91355514ef6f1644b9ec2bed734bf09368af83bd4d71d5766630c8400c3babd18fb5651d58a51ba742d1d47490e95415366757b13f2feb4f7b6beea48ce3c3f7b299a4ca8673f4edfd553788ebb57c18216fbef1d14282c70f6e6d1cbb0c4faa1412fe6656df089fe040039cb14270c7fc39448c06b2bcdfe71e476e1e7bc03b25cd662950b6a1403068b2f7ab49fbd7b07c944f0f9bc0f71fd66aaad466ed16606f2b7b59e3342cedfb5525cb2fe53ce16bdbcc9b683ffaf9944ad36f022b8431be100e23cf2e07ad7eda4f8c9048a75aa7eedca78fc403a46a4f531d32f9abf71d20de5a255bca3545cbda5dae0c1cc0a1d1cbfb4742e84024407ee69c85f5b1fbe79e286318f9f193709e66890e3cbec690686fcd7e51bbaf03ef2e093656021b799ee252312c87c5b4ebf148125c90ce363e957d39529c0f3ca390e7c782d215634ac707bf4e3cb687b08ba7bc8485f5db4bbd8396c5fee5e89f15cf6df31651ff900f5d5645ab502ef699fc68bca76bb3547d7c088609385afdff511eb6fea96a33ba702c07e3ba87817c01931b3292b7d244f83b268b448f329ffd6db3e03c93a7389e6d745c74a34507059c5cf5370211704576008b7878c08367fe152fd3075a340022f421e5e1229c5a2e9b1a079c238624f4774dd9ec81872737c33026c52183e07d835299664e2ef7de626e3f25a221a8d57c7f8bc6a511174a51c47dc7a37b26ac1365278538f638aef601b87fedc0e1c19e41fce52e78229d62eb5f9262a92347d51f10e9ada1eb427fb92c7a4beb67abffbbf693f229b2c9592d38e2f63e83e17e5d00c08f6bd7259f1da4884d9c027f5b1f7331f391cf0a10ae6c7e5fae3ec9c4deafc82db1faf458c55cac76a4f03e2c2c485a7bcccb257f774d66988e816a48fa5896fdc8ebff1f7fc73cbf009ed752bbaa607b5c6bd74593008cf710b3d6a8245a29e875e111bd4946f02fa2f795dd3d753a9dbcfe574614ba69c3e8c6d4600d9727fd6864ed2bf838ceb9d2ca0b7ac1227b466136771e8e94153a44686841f30c85582ae7c71cfb10cd363d6ea338c4c6cd428310de0724bae448c6e3618ee5e36baa100371749c0412b34620d3dda2277d7a9a823e4481270b7b5468de8bd220c36cc4927d26eb2f6aa203ddabd310e0f907a95c330f9b865272e2fcdc0ee0d628e6c9347f2ec79906247e2de87c13b03d831cc3b2c48631e60c99d757da9beb0ccae02edc6666f0e6848cad21618cb39b0a2988078154b9e669bf9d60bf380659941b8bb831c8658b3b2e0036a045e9366a8870367910cedc87186feaaa846f4d0a2f7966bb398b10f9a7aefefc6dd4a48f480516f638635d7101816cb42deadc7da3c9631cb6faa6a1132e277ffdc269c7d72ae211080c794e79dcf69553b269d70bd1687226a9fc2691da7a01956c6a004fc3386d43d960a2625161b054891a633a3c936781caf81969dbca739b4904d43f93d87c7388d5e8f5f7da7efa3abc83fbe7b1f577b846f1eaf85421e41be7161d3b67538e36454e932d0acd0aa0bfdd2d7dc0040e50436102d184f5fa4034d67c128be8bfaf954caba39d970ba04d73a55bc7aa6fc2fee0fb0eb3d283b54b4de4da1797a74e1aa00bf82763a7be3291459301abb363110ecebc86e6c667bda9c252dcdd0f007712dfe39b6920ec3fcb1a82b089483ffcc8feb63606b1e59ae1b7b2275c4f3e104e255b0bec568bd665129764fd30c9ee9cf54ec1599a68fc80e2c0636946f5354512f46e9c3184f51efbbb04c904f1a4632a4fadd7dc1f9cb7326d314a7d71c5ef447c2c41e3025ba9bbf5fafbdd4cb11e48448f03e35fa62b0307813bbf53a6fb5af9d738d3e48788f6d84ada1eafd98e62e406ddf853cb0682fa39c529d2c8aa63b05f9a6e59cfbbd32bf9c46b6b1f6c0d043071266b75403897c0bcd1bef728d77b56662d8dfdfc934adf5c880362b43e680ca2697bc10560a221bd6a2951a18dafb65140d88bbf0aa82fef635267df71a642bf1d3f371eb935ce928803c928d716cd3994a535aff894fa97fbac797e223946ed6ec7b6ac1fefcfbbd26209b54804b1843fe28c30a61fd654a8c8bc4fec1b0e82b85191157f71ce47ffaf81859e1d9a022877e37715526676d6b09fc40ebc39058296e3d55bafbe428722b2b0c8843efb3da10e1b8263b8830bad9a9ab116c3334ee02f7284dffaaf28a100bc8c1a5bf08842989277b56a6bf47c0742dbc6a53b78494cadc2cf10ddd50c9d087a0cf3024c3cf2e2f9d804ff46f6bac70de722ab24729a72da1111d33dd59386bfdcc9069179ef04ec0140417a05ab7a96b8651807469317afd6cbb64b7c59fa4ace3a15fbdcd2d6c68fc65cc20913f2c40564c934a3edfc34cb4fa1c8d716f7a6a52b42c3ed7ce591e0b07f363176e532a887be75a826186cdbe6bc0e809038a5ce1e462c1cac9f3372087096613a6ea8499f9f558109c702c83cbd4e096da2114604ae0cbd255266147b95e438ab587d21326e9bfacd96ef533828a1f6c848b7fe1054c84188dc6f1ecd1fd1aff14b7c9ed8250a8c97e9d9f0dbf520540aff5540d74a6cfed49e489aa3375c00d196df4e398f6fd8a68f1ed602e59c90a4c24d87f07d2fe70f67f1f1880a9ce18ab4252c78bc4d9396236258d7d46a13140b26f666c5f06a53b90398a08845ffc872f51384ce1d77a52bb37d766ccae5646b421c54c4acbb13255e8cc9ae82692ab3493b8b3050b069044f20ffec7dd5e1836278fb79c631b2af3458d4491a194aba352529c3dc967e8d1ebe3067e8f72a51d2b9379648f50515bb4137e7a5085bc01a799892bec471e75b8b820d50f1306a157588fb5c801581b4c19aa7a80a9d70a18cac733f8ddd5851d2c70536e9878840880207fad2379a992aef30d7fd3bfa13ab1a67d5f18fb845e4bac3a0dc38876b20ae31b2c8b96255fff52d547cc0b10b78102795af1d28cca06886a9eb4db7b3e807b3da0f4975d2b3493cd078af7e4ca94e7ab6955248f547afb52932b8bf7b24cce9bd662f1f524f82d09261209a965432c3e47fff3c27558e33e2e3dd486c9fbfc5b88007e2ad0428bc7687523ae62f74ab681f43e8182642f76bbb3ccdcb2b99df76451f8fc494acabf48c97e9ad1cd48a555b1d46267188422f09c78335a6c7b83d3ba254e2b9cb2b18bca7d47ca5d37757a56467f0d9fb397e5b536310c4bcc43cd59d8be1896f629019d67ed8696320f53cb06d2f99794e58f010d55c25a56073e6eaafcaed6994c9ad973f1c0a6f3f1713b89e484eaf314882a38ea6c076c107fd33ea6be86e173d56d92cf48a005a76f204799f58a91164112ad1cd3f42dd220d51bd47af0d6344d50bfe5b4988ab4440cf4a979e9e9ba17f1358908f4fcc47f31209c2bf0caf59f12fcd9259dcc0f0dc214d63c112c5339d5167fc15a872aefc8cd826296eca4b5dc18991727a88992a04849cda318e7e812daf67f440c95145a344f3adb847b88f007ce8ea381aff3880ab70752b721762ecaeb2a063472b58b3e0e4ebf1c62c684d370c42dd59ff7e5625d216b43a910881de1a3675e0d74c2de319fe92b7672cf0e5c7010a7afe8ccd0ed3b3dd3edb938873c71c5cb21cfe53d3f55e8c622bc05a0295ae8ac4d6266e50868100de27b3e79a97b58d0ff7fdf4c6d51309a0e28478819c5f6be84ebd6e8127665f74157caa557a71b1d9aca7b035e081f10bdc66c1c2cf0f4c3fbe31b629da302aa239b5b6a6eccabad823623b74757a66662a5f3a47d5e817abdc57ac6943f6003f2dd007bf0b0c7b17ac4352a7bd322b6ce957b6c24c6d2e7cc49032b98ed5ce52000f5fe0851b287d18925830817f0298a995bcffdeaa0236365db11d7774e48565b6fcf00fa4bfbf3db47fdf8596ac882b75ade94ad249297cd1ab92913fb4e0df18f463c020ddb285cabfa25ab5bb39a970d9304b0591f735bb6608d123d35f8d16d23af15548cd2c999542d6730998900a937969f47ed90b8bbc5473a8fb763dae7a0cc19939094f566a6ed0635c4f0c02a7789be28aaf6ca5ae3c43dcdf6315c092d019aa4ea1173b76b4124b159b7483d61d7ea789d109c0fb8b7821c6d75efccc995eda5ba07716a3b7a4bd820eb18af285d681a65cbded73d710fbbd8e378960596feba84dcdf8fa7fa612cb549ddab8298be4beef280dfeed8fb83f6486fbee9d12c978eb1ae9f55aeda1229617ee6db5e0b22b192efc6e57d6cc7323a32530404ae12bd81621c56a0505e20360240edb38bb93a08fb3c3a04c1ff30890236a2dc6ec2c26802a9077113114dd97340cc2e21fc99039bd2fdfb2b35da88a2c797f4fbfecfc13bf05988d4c95f28ffa9219b17d2631da8941727407f0ada8c88dd6c702cffa3a02da97f41c55bd848e273a96fc07212119930b7c132e57a4a482ead7cdd7aba1a46392bf5fd8777fa3b8adc8134f84241017889026a48c114b51dbf9f370b50127e0a49073d4acc685cb56899cb26c08adb3328c8d5231fa4ab30b9b68bca2cac58d54093927944a3f33abe2468eeeb13abf1ca167973a0e34edbb23e274e57302c6bb19f20c0d91515c48e71770c724fdc8ba67dc0b8134713807be354d0852595d304807abf935499e7bf27f1c8f8cc534890910571e50e3b1d0a760d937765aac853c3c21fd6fd73d240d75d67d4dfe1ada1eaa23f7698d6ccf0ba39e06dde98440f779be273b9b8d7a9c619f5a93f9f10927e8ef89004afb8bacae2db96f4de88c55e1b32b75927f7968c277434d91f9cfaf7426c1a2721caac39c0025dbe5db3f15d6f02bc0db3c988b083a546aa8d383a0f8d632cdf9b8e926dab68a2051c809d4f36e3eafcda292efa2565e7a628dcd7e3dba96e338684adefd21cb6930cb6a1315cf544bb55ffacb35e269e6c1354f44f140a912885b22ed6514f4631fec4adfc042f2203fd38711d2bcc97dca52baf0b9d5cbac01a15c1e53670e7709391bb8ded949031c4ddcde8f8c8bc6db7ea5d28a0563fe42615ba7687f319478808ec861521bfd05c38426d613e377a407537eb6d7523dc5f9261ae8bfd00738a5e5d32f5cc7b123c24186bacad5a1da53c326713ee6bd1382f6bc6341bf6d6a7c448d9623486caa961030df387ed0b8cccb74dbbd655452946c056cc7f1c17665c5ab604a124c6f807120b728c5d35f05b2b365e78866691e49cc048ee538bc9e74ab73de76ceb5568ac8fd521cac7268c9424e0503fe0810550f773215715362a061035cc982dd7271ed4426176f155c239ec5a2082f70d9243d5f7d367a1bd95868837ffc37e1d352d015e72adb3f90349f5336a799fc54f835cc3527f75c2001baf150659d6e2b0d4017cbe6c07c87f17690956b80fb3773d0c27de08dffb12b0ddd0f0315a1794fb85193e9089b15c0d64771f425adc9ba6f620c18321aa6b286ca8aa9889013febd6e8704836b8189fa275894e65bdab07b9c0fe44a0f27958f1132f5da5731118e681ea7266fb0f85ffff879a1e404e70a828467e2d6db47a1482b74d4aa22fdb4949163a7fd6b9ec33a67960813b2be3a600b07b2a8e73cefdf6ef190a62c47e94c44eb530165cc8d5adc6db94a06cc6c2668906b3d6b3805aa4aa3383f3ced3811a723e436e56687a2ba303fb9fce8c41ab4b67f6381e7242e5526a636d17c6ceb361d5c7334f97ce2fb880a2ba02d1f58f597d38c33e9c4031bd2a3b679d401a5a195a2f18c5caf4d75dc1dc9a2e5e4cbf8c08b7d53b02fb2af37dbfd72df6e8d5bf443063dc4d50532c26e0aef484ef482ff35ce1fa58d7474add6b1f1c787404d59880fd9bc4bf15ef479cf0ccc790c2fb00190bc61561489541e9a002c785eec602655238783590307a5ffb6be022e0ef85927bdfcf38065edb04925da95d48e5ca3072a14e43104e89ec37bec24ca24d9d4e534070759f2d0a17b9f91d185091a77f8072cb2d8039caa1eb95530e4cc3ef4e2fed765631fb41b1322c9156b3ca01cef5ddda4ba3c2bb896a966223e35d27dcc240392da8e1deed514727ef2be6268386ce7bd7ebf1314a8e987e2f1b69794209c19937a47d224fd4fdd84907cefe8c1d5df4d2c9f97a38476406c04eb0596d6ec682b459434fab4e1db7922a9462946da252fee19a538fd18f07c99d5ed8bf4a34b3a1872b9a37ee09c4a1d83f29f4f0dc1aa1c7f0880a842fa3b0a613eb7f329b50f7e3a630030e50f23e387c318e68cda7c46ddfdef229584997bd6073cc705ac3ce65e0169ccab69cc61cc19772cc89625ac21900cfc9c8b5b2094edc6ed41a13d13fa9a1ce5fc0d78aa9a2fd87aea64f29912d36862d9d97cbecf3d74f89def2bc7f257003a3bb346570ba9cd602a98ef7dd19a86c1ab723871a7bf7079a0b194cb0014e145f42bbebb17c1901a4be510787617e93239760d8a8b0893f1139ad79594eeadd46ed008dba166a2de0b7472c653dcfb03ba1021caf9ebae8d6aa513654813ef8654ccf1788820a75d0f66ae8bee8f76490f08e21875ce82da185f1e81d84d6d88e06ff63b40b34a0ca6d3322e7fb22c2970afba37431b670720af8514cdd814ee72be580da6d0f7fdc8f16465023c60c9724c63f1dee2162d9d1d60746899ce150c02394a912f65ee971c1f979391bf1ba8e0b04bc67e93c67b699e1ddcfe8e627f03a284e8b2f2d450e2689dd359de7928ecd86bbbdb438505d9ff9045fadb04481901828bc5768fdef1df25e8c15b08aa8d5cdba3c1f9f6c117b70aa44b1bedb8b23b7e956abdc6bb4ad06cb90dae8c735e37e9d31b2b09f3c53a17f8f565fe29474d2bda164eccd5c4ed2fcfa3e3e596265e3c0379fb83f57d3466e4eb268f50bae54b27491e6a34b4e8441f92eb324e32060038a51991341f984d26c68515ad0124f5515940ee7538d2f60f0d070f903665cdae504c08a54171e5b2a2f11885bb325b05d4af9df5fcb1e9e3d362c73c97f6c120a45e8944b0b3fccac56129fd02157168fbfa5cb7e426f3ff735606b2d902d7b6fc8e43f8abf126aac7badf9da048ff6b645b9cdfe44ceab9f8336d36022007ad07e8002d5204363fe81c1c2e5b2477a57f9ab87c2bfdd6a3686ac9bf6228d60e1a39b0b700c2463ebb9f3423257a6fe35795c39264c387d5d173453a1c9794583f9e23795dafffcc08c5bc281e1e8ff5fb3c3d56b32021dbc5330d9e1e20097b3af14d891f1ba809dea7bb4e24917ee798d7dff9a3c9e075011237d3fab2438135db39fb1e60c0272bd048f053ac808eec551a57d0457a788462b56923644bd8d62bdb1567aad84d93e0d1323aebcd4601d5bf014c9f739bc6e3d6f2ba1a30609f817c649857bf1c41afa1f1193e9b8b6675779d4291d56548b34e78148afa8e463e3912c002588fdfe1bbaff1f21c2e5219c7a1dada62e0da799bc3844e28368174d46ece6bd88648fdd77db1bcc1eb1a2fa230e9ee46cfb1476b6f8b906bbd4c2be5c0d863eb25797e1f183ff76fe98fb8c664b71985ed615fa4c1ec82adf383a35306f3b03072e302e026de702a69e773b403f86e3573cab39fb5c6b5a8f4d0574649c4429e690ee53dea198167a8961ff2c664685fadf1f5dc6362296a9e1a66542217b5d7760aa46a1264e0e08028b0993aa594a46e8a08cb8b3bb43eb8aff97adb708293af85b3df171904b543eb01c0419f00a23b8666303bf160a71775d9efa8d60a29d0b365c4b5ee28345356d11cddde044685425c0899f620f34c4ad07ee7c459a91846dd9069c901044011a1845c8497cc29a0dce09b90669087027e7ad65a130d746503b98cab21e03cfca880279d91d97df7d112294a8e1cad949fe160c9c3ac20b2717be1a1ae09060d1e3d6dd89e80719a48d5f46cae30d0893f0e5158eea9c0773c299444bd28e8001c37df48ce0b24347f4435bb0aade172051cbc7c60b9e93ca804aef8c01d2099fd02cf4ddbf912389757971185956fc7d1c182de333ad2b050424f5f092318d0a4c9daa9908d08e624934d245267a72f472575dc5c23e5d2bd605dda6639f8761b8fb9760adda1bb897e8dcae58bc98e849e53e27e7a8567e258847df96f5a7acab9a51df44c00a74e1a8a392d4e684d1b54fe43d08cae5a7ec86cf53a8c0a6bd60cf195766d99ce3fe4aea40ab2596590a51efe35cbacacd3811d79ec7d0f3a2367b4882df442a32086ca716c54c7df255597eeb9ca150a7d95552f02374ab84a2dbc29874ea8f5b9f60183b0bb2d281013ccc7079e28523b9b1ed3fc4cafb1c7b7c0dc08a147dceff6efb92d87303bbfaf3460f63d5a1c7f95a5ceb6cfbd59e3b26c87909113f38cde9baff22fefe44271847ac250561cd9b7a86f34c41aaad6c8f9e8bd3cdaecf1e4c450a906a334d8243fe5c1c2a8cdcd2cf4aea66eab10c1b370c4294b4bc9a46f92950953b9a1e6c2435fbf46c1ae864b1d1fcd312fea5a8a09fa5adff8a6e73109e1961bbcd6909e530bd999ea414c590b84fb8256a4658eff66153f9f71fd5a9a46d687618f36251365757258fced51e401503c3bbcaa5fe52d28613569fd01eb6645c5bbc5a0bb3997e77c50e5f5130e55d1b77ea582a97f4e3709daceb8fe6a019a9d15b27cfe09fd171e059c2156259ac51759a1b06a840a9d2c53ea88e1bb60c31bc8bf908ce7328e1a9bf8227aa87ce87355f5980dacb07b719d9c6eb49e6c74e90b425be5f34fff86847653d113f320599a693f98af9cf94f092585ceede504c01df14db6714b1ecf2b888c522204cf83c54a0ce717cc942c8b28f27011943ff1825c6be8feb1a3e34561fc416893eaf6d4c0d6f524171a1a305ae21f4b489ee5bfc99b79beb4a26c00ed50f864e0925e05c90447701972d61e2e2676b9a543bca1a9975801eff5fa66f9fe2c54690154f95f887fe78e9e2bf88ca6882aa007cb94793cfe0fded8c2b8179a63599e0767f543e05823c18314e245f989bfac12e482b588e9b4fb6c9824bc8603dbf078db249594f56efb1c0c66615bad9c5808ce901b2b74dd8ad892bd1e914185a5bea64cf4eaf2a1b1aa7bc1c83b2a161bffcbd15035625c6dd72e4b648cd50bc66c1c1661040baf0e1cb92f28d889dfcf46daa0a439797c8c827305d66541675dc2eec5df5abcb8847c64df5c32af92cd430049bfc2dbb837ebac657ee6e0026c419489c1bd277817eaf6e30df310dff30ff047d806089068bc7d916ab5970e010f8cddefbbc9fd6e104aac3125ebfe39ec27076b53fcbb68d0fe368f71bc112a5ef60ba7eaa692d9b0b8651249df2fe3a25d17954ca1a1ca5634d6b31790b0eb52a237003ed0e707b10ef8231201f2851d2c19d4930b02696d143b27439d620ac092f65b91ab081f38ed3eca3db538479efa3058c9b009536a20570dd6135c21ab5e3597d48b4c56c5d3b47d5b677c94912cca58d081d858d35523bc0d3b72d79316dc6e802ef7c21dca6fd796e77996a54a250a734bd5eba7bb718a075831815d61bf34ea6f24accb2dd77924d45950e41c917beac430153a9102407940d0e5f41ade3871bb6b066e4502660ddbf62fc03672e31a09b3d709ee47b3a975a88319016f0b2cd434b24a5afd12de7d78e524cf98917a3afc97be2fb9e3b867fcd416827171160377d3750d328a28791a3e614ac6efd91bd623786a44489612fc13ed55b63fb73e570c643ff32eb52eda432b65e32336bcc556ee463bc30152961116d8ecb0bfaecf53e7b6c0c4efda927a302726c5812ce3e343b0e6cadc9aa3b9295d460a41f45ccba37034078285d8d098c64d6321241c8bebade43e0ca36ecc1b781641c4e57f9ddfadbd519fc68b97221585833d88a5f7aef6aa11ae84bc59bc9f0ae75d20576d22ee4719cd5b1cdb60fce1048e7253134e9963e938964468ee727e5d270f8b9ec511cef80559cb8862b673f9b737b0c8bb839d621d528619a1f672534c19005eac25d7cbee5d38741c5d3674a21437d8681b4be487081e6008d09c1171a5da34cdeb731e0d5064a3d2bb3981a713f95cb9e7c1da5b2c6660e0a0e7616d6aecdfae18edefaeda9db28661e37f328b39447512c0c9429cb30a46f4d39618ec7234278cb35bd4ffd76d3125ba602576d883cf7d6b400b60f954f723bed72aaf0f127a4d68608ac5292d772c84fa1ddf74b3b5cbfb4ac6e6f40a744d4f43af61ba9e903b9e75b876bfb92cf3c92efc37703aa81f72d50e9950df69f0564791caa8847b098f92aea3f861b5762634fc3e34011cf4f280a67e0a4175f6634369eabeda084f15d72181456db826c3764e5918b7e4260e19d307695632d48bd393212739bc122503bdd1b1c8214e0621ab304eb1b7b7c4d3eb84d9b8a14b02ff0807c48b75a3ef5143d18e655d157c9e2b0d1d81f37abb3adf0f78a0cfd825039f61f577243a8dfcc6d2ea747fd6660dfe59de7a4da4929ee4497528cbef2f199e90b443344813fa10a8fa79858dbf63c1c11cc9a42fe6d9f77eac426abbff9c04f11f2cb23bf8406d6c03a27ec00bd22af896b4936a9d067d04b28a76db4ec86e858e8a4b46533add99f469e1a89be79708b124927424f114c6ef9082f9fd259a9f4632f3d8f91fc342f896db53b53f757ea8241438f574840d08bbd11e8cc39d807b97dd0594baa49524049c3997910f70cd69460af928fad9c8b947f4ac133a061b14556a0cbd50457da8ce6dc20ced45536a86bb625462873ad129dda104f41890f89f54ccefe2b931d3f08dbb27cf1f71e2de8700610af4f6fcac29cbe46df5a85fb90ebe24b30632c6e9833a019e8c2983ffb8e0347ffd67fbcce813406a4382b7e7aea208c3abee617a25592771db0d4e7a8c4a61ff0ceaecf35dbd954ec70b153af3a4462ff089ab21d1a96e24742bb7ba052fa3b8f42aff6c93ab836a369b73c8761a86cd54f0a351458aa80e74112072775b26f8fa5fc817f93e6237801002624bfb5dd4e8119cfcb47656dd97f3c8a9560d46b72a8a4f51a1e1b203746637e8f576eab2b2335fe9f1a3d222aa31cd313ee577ac8433d77f3aa200cec9c924b55f872838322bb1f9405f3baea8395f8d803976c6735b8fb02432109bc4e96b90a40d6496c77ac99e15aab25d2bcc2e240c8b4870436c22134150c10df049a0c26c8dbd9f837cd698ce05a6373281f0eed3d7abd0665beb17be4d3c1ceecd32e533dae7dacad0a6557ee4beb457ca1983437e17330f694ec4e9edf44e5aa6b23c88f4dc24cd16887bbd4d67d79cf4dcf423ee6a683995906de3b7178b8f1c7da7fa198088ec62f3402edcdb86a473ed028286316c7196425da53b8ac97971f23383af761bdba45f861e27cca5c9673955d403a93d8d61fa3014c97315751cf3e80d0ad409d7894d3dce4968d1b77eb493607c072a0738635cc92b728e9e7403dbbcd7a2ba67cad731ed10f7887e64c9c6c2fbd28f0f69dc17c3035a4f3ac9fe729cac16953699fe774e7284f9c4de71773a7c14ba5968858c77e5f595848dc5595a74b3435fe08d5e11c01ab7ee1d67fa27d0f9e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"838c1b028811dc6473b83615f7d3adb4"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
