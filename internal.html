<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"fd9c23d9605a1d1d8fe48b27adac53f4458e0361b59cd4029ae18dd284590b3f4f7783bc35d509a9a842e391ff452972441371ba53cab13ff8b4384c147b57ba300ac9aa086c97947bfc2f3fdc46e74030a6c6d4910f6151e13db9582c01e487ed00c32c8f3a09b2b85b41fe2c1e976c7bfda530e1210b8d783a8b5dc46719c2991bdbc72bf8a8396bdd89eadbaafe1f0f66550b439ace9aa0421fa5456b71b5b85ec668d05550492e0091f958e12a20621cda498f6d49c74056ae1e49a033342a453c987309be04d8320a56e1c7d6c57cec654f15a908f23a6d7955d7ab5a13982d9b4e9cbc2f464623a0378e39faef3f3508ad3aa4d06bafd829e95feba2bc8a487501eeca5721ae3c9eca60d6dee79df68c9c535993f4e5612c38dcccd27efba976d85b94805e5cfeaa1319060b2e81dc175d83d50e589237161a8471e37ffa5166c8c833e8163adba5ea6b73beb295f74c575cf095da28d4508f892de4e5d33ec199bbc6ccfc35457789f990c0964da87bdd8ab5690cf49034e22c60e78138dfdfe98aa41d20a8da5b51b26fa98f39db73832f48b025fe49318fa3e2092542c2b1d2f4542256d51bf940811db35a67b7a36a8c62a161ec0bbdfaa041c574eb34b6d2b417075d1e2466ff384646aead33e40ed3fe34b49659f4a01143cc76b86f9bc4b183d444cbdb3744b67f9e3a8b43bf8ac7a74449d6245c4e4845056ebd4c6ac9494eb4a7276e9e9a38c00370bfdc189dc98d7e50ecf14b5c37ad763926ff2cc2a434e3ea54dd35f655273081d7e6378a623e9555b9d416aa803831e4e01712702e6f97bccd1e8253876ae2785b4187d05c11822c40d5272656ab0ec4a226261bf6499dc0f9631bcf283abcda24350dedd0bc31ee2eef2380ced863ff272e3b06aa6279e890711c769b303991d329a5f46066b420b2c5cd08f907506729a394ee0e78ed23325023df9a83879cca03928e2d38017dc7909414e5ac2ea06ee67501f899ef825b3e5d615257ac46839f7f189a6591135b0da0fc1c8498a08b41fc599ed90219e750001055eb55bd85e3a6f37b3201ce7766e92820894bf7a4e75dbb77893df54db3b38bd93606c3d4611bce7ac95ff95597b3bbed5fa857579467ded067fedf7edfe574f5b3c05f6046846defc6932806eef945312de946645b165053778a814b1ef100ce283c5a65c07aebcca0756cb3b9b134d2c437c792863d7ba3520ae121c34259cc9fa89df645fbabb519a555d943d110e25fd8a829d050b31416f10b4331f654994f8b4d8e0e2907ba04045e7e98069eb2d157d214ce8707e97c585a61e9d838dc567854dea2ae66cd861210f540efd164a2755a9f06c92de701a972ed86d1fd5c3a7c033fd0697953bb643ebf18fd86144fb527101488e0d0055e511fcd7e8f16bd41e226cc57d47eb94cf904b689dbaa7206fede394584a31d38ce49a3b8a0d0a0691015bca30e59bbfe21d37e193e5ffa63f6183904e71df1ca7bf395737f8c407fa8c1ce853cebcb4b58722ee9ab0de878e0ff7f610094bd51b57158dadbe99c313776a70f14b79b293b5c531af9afa911f381b665d79cfe7c922ad12ec358ffa0428d00512621ea11787bb98e6017ea554533f14dcb466f4db4bfa36c5a4aca585754f12e984f2e4c8098dd9e2fe2c1daf296c8dd3ad54fbdf2ab5b581350ba008db9df8fa11262082ebfb282634c6a2dd3e4cc609e2a3756a340d0a2027472317abc994e351b967ed36d7c4bc3539ce72438a23c1cdc2c7ed202e906ec1ff2a07fb35b79e19eb2d5974f181b4a3ac8871610337479633e76deece977851a29e14b9afc3d39d8de8cc299ab9a40ff6618f513006ff667d911bae1301970cdacfbbb0d1041c5f86255cbbecc8d1a85f6bca89c29b32884d9b710b50cad98c2a0b90a563af8ed11c4c8bbf273411745b0c76a130dece5e0d7e656e8787a42e2a954b282c85d65e5ce04bd839a0a4db49fdde48a645001caa3d34eb9e399d0a11b518368c1db2fc093f4c51fa8d3a47f13d89418321e528a1b744f4025812da7e8376e9913c73260040c31ca67adef492616670b06a299fe3163b7be245ff99e687545e97f70bfed8b8679f2f73acba828ee3a7a2298ce96944a4d08f4e7540316342c915c6b22673e5c9d1f8eb92bd962a921ba222497c2eb7219f1d24f016d5ed9c6dfda76d975749e63843c172861c695d28825f53f3797d95ca503f3b1d3811be95553a73b7197987c8a959431de6efbce08ed1f9088353168478ae376acd5b8b741bf4d1793d576b14284ab7f3c95a4acb1a9f1232e4db5e32ca387b5d66914293095d3e70a23c635413abc9695e5272cac9e2dcb3773e655cad3d3dac67d3fcaaf6d371354f94a5bb94c0f7ac8a6a79f1ed5574ff241f9717ef87854c5bcb7a596e495405bffffca0b5cbbf35d6b9b1dea0b2513d61b80e0333cfd254ff370d1791f244d24b8c16c7707863ef4c9ac744608ed5ab3728d3af55cf1935ff448cef14eff5b74f8847ca2fc2cd9125a896998e7ef09d82c426bdf4c5fe270e314ab40b813000a7010f9ec3b63df354aee6d9628e09562010079575661f039f2b4fb50b2ba4c047a60a62fe1320958a7546e584b8d49bca8101a17d22b1995ba4645c8fb2579e1363a91ce874c06882459fbc5a64b7b521a2451959822d73bacd49d00675107a8821fb32ce04b3c75af41b5b7dcbf7774617a78d52e8a8b27f982ec810095b48f5e2a60ca3535560471615e85c45b2737f7cf20fa775d9299d39dd373c7c4b234f00e85d4322e530175957d558b965851d6e22ca6a0673005b4abb24f1339d7c134926dc11bb4b7a3b2ab82256254f62c70ba35d6f06c3fe982213c4507c39df48bd2ec0317412e3d24709d4f5baafb16831c57150ea94d1f9de6721a1f1f0498da292e3b520e5b0dd2ed6e085dffebd68be171f03d3a39792fea9297fdccebeac7c818944249dbbba41bccf9d627cecfe1290a3ab2451e1b7ab7f511e3517a2f8f65d03c1a40171f5f2b41e7f15f51bf21a24f832012707f7820bedccde8b1f0fac21f445192e8b4bd07a6eafc33af38bf96ac5c3603ed724018185c3af24da6dc3464ee43658b27baf6bfeb1865efda337dbdb469066a6f2e09793cfc3c022093a35ed1d14c74af259d77ecef7caf78353879e7510bae7d4928732c1e9f498d97b1c95cab25b8ae63f163d8c4a2ddfd59cdd24dc3b14dbec567f9580d69dfb443dafcfba29c1631f46946b050cc42d2bc2cb26c1139dd69f14e0b0ad29bf1001a3c3f21265856ca4c1203b6a0f0724dbc1d4ad8ea6e6dc6fbe5cae9c099843d6c4fd8ada2065840919363f1d2186c3fc5e35d24bc4098f23fc46ab6786981dfd1985867c412a273657ddc8af6e3457db60c4626401873aa66ed1f706357bcea13fc4ede3fe10db8b8200c794d4c3c34dd4fbdc2b7934786b92fc02c7636cc26394d3f9c90f5c3b2871a61f787b1078e32697406be9b40f6dcfdab227824fca45da178bf6a07ed24258458665b0300ec309a400e4156098893f5d3252e75bd5262203b111496d65ede5eecbbdc75458f1f3b6246e073f5d71b17cadf2a3095b1f857d16f40446771f3292f2bdf8f61c1140bae5649290e4acec84e2b7ef2dab70b8afcfbc7931d6c5904b820db63b559deaef47a8d75a7946a427ac009e3d31e5a43b724f9d57ea07ad8ad76abf0e61c1e8773bd87313f34fa76a13d695e20d33039fca7c9cd3d6f6ffdf8b713d7536e9022f5c8f6e3e3127115db216994cca24ac5efbcc7ff7b6e0a2529f20ab94d21be50379c3a8fe39a6d35d9e2dfb790bd68d4d793d3ede7c42e21ae6a0336aeb444ee91fbec4b538cb3f4ee0b1bceb3cf6bc3cde6ba9c533c832659067fba13b56b0f145bf19157c3d843a2532c3a62b00e215e56e8f18d357f4fe986fec1505436ef044f03adeeb4f8415d7107dd6dce1778128853feb54c35e62f32c16722c66534b0a667fb783008be23e9a497347efe766fdeba42a1d11a0ca2d2ab852e9c31ae92327fa8e02090faa18e7145cd025dad09ffefa6e8319a2c2d2346ae7b14d03204017c9eaa5037cbe875bf582e395c0a9684986c552f29d4f9e410f02523e316d7dad8ab4da32615dd757c6ceadfe07a39cf436e74838dfcf923f0f60e3236d4b7e6b44f1565f60f1607a421f22f53e306d24442da383fa69c245c8e0f80d0493e0765aa5febdc8c3e579b35e7848193c6216e0b46ae01c6ec21e8c360e019f1832b3cb324f9929228417ed76f5f8e3aa62c8cc323bc56b20926e6ede9020e830ba8607587579d66d117c48bd50fbb6391d875654b38f7052b4bf24201d4b191dc8f003bcbdbe19e30e58b603b2158a19f21d642a6f886b683ac20132a9e277313050a4735935deb1c223cc3d9276768124b8675515017e5fd5bfb47369f9d02fd1f1e770a2979f359046aa7c538025dd9fb8a60443d405c22dd6db2e704805bd0d56660fd0951ce9724b410f6b343c13edc9f1688b1c77d30fbb691d1627c495175e900c362a4019dfb97da1308a3650440c8cc537aeffd74586527dd526ada2e087b139d2f61dfc810c63fd6d92a5c1a8fc84b3b0eada0f49cd0d0d7d7451d2adc6a4ad4ab41d3995fd56574236f21bc826d7dd0284ebfcf3a9d8da2f887c837c1ce923fb3d860c7da3b8d4e17caba6e1934a8c55dd6a4556dbecf6d6020aef93c736f2e4c6761817ac2cf43e77f5ff6473c83f96e3709d6d531dc8389655c44472f8c0b0c0d18602b1fdfb4df9d4c0a9e79525f12126e1b408e11b3a3a184325b1a8f5722c0db2e51957247b4e8df9c260c56fab1cbe40068dfd8476ee370c6e75c2a91a20bc94b90c952aa4c71238916f577e3443fce5fbde47868754094e6d8845eb9f69076e7b860d3ecb5513d99770b6bf423ed419d4e16f253bcc3f0cf456123ef1cab7b65484718428f2c3f4b3bdc32ed55d300bb1e0c7a808193333926a0984e39383a5d25110bcb612d1970907b9dd9cae21499387136ef99fbb245612466080253731d58fe7d1161fa24d7f06fa26b61ff654fb811477998663cbe4fd4d3c3c89cb37e61b3c7314e87236801121f49eec28af0942eb4cfebc757dbbbdb8683a85d2c47013f91369302a156781128ce44f20a11e950e220d1f70f674bdfea71d2560c3a041e2676ffa2ee88f7dff274c947d6485e493022675c075bc74bdb7d30e924b477f2615888c3661167b2b60440d94c8cc1656561f66b0d8eaec3eba8db4877d575c76ecc3b373ea63c7007ac528c12ba689f06d38aa412deddd79e7415f24d934cdb58db578867f1e71147c83cdafc488c85d33b51fe8c2972f7db47cdd845a1507ef2d5067a820ed09f63b4cb71d3d1300573e77dbc2b426506dbc1ee39cb6eeeff37775a5fb5d6630a17933aec4adc77ebdf3cd898ba1469955be361957c9e56a335532c2360c127dbd71d5897d3cbf2cd6a2addf2883a6a12e40f380f0f9a6c578508942bbddee1b4ed77e322460c9cfebfa64620e129a6d76f25b25c7d1fef1fc3225bfe03a565fc7267a7622edb9e3fd4851d7bf6b7e23f682c9a35c6dfe2ee032161131a965917913c86be82d4aedd269034d1609bf85d879e846a3e3e5dd7b7791d29b589d8791bf5935c003624b0d14b32c16ba3fbb003698a23df98956a9bdcbc78613b3742ade5d6658bd63e1398daab176887551f9dc645eeaa12bc9bcd0a19ce4b3ac34f78aab7f7364dccfaa77534433a4dd523307e92a21d40065cb80cb6eaf4108161509f0ec563d123dcbbf64828c6d1f1710b30cc6c98a33a9ca6396336732e3cb7de70a4c1aeb1f4a091714d5710993a7533f130e3a16f73bd147324cfdb6caefdb00ec12d9e8e81b71973403b1d096967b3487e31c2c4e47f8d9c3274d851debcf8b172af34d9a2a3f35d7f3c78fd78974f21048946800ac3b55126f1ede39308a86a46f91bb40990f251963dc68a6de2a4a141402549d761ca52637ef5be3610b023f0234ba8ff7dba9304bebc192f7ea4fd48a65ab3429a4e10629efd268f2b6d20202cf47093f8109c71fcd5a23c020d6e299738e1475dbd758299001087c3e91f20af50c902fb51f0b78b033f1e09639774a0af57b737ec46edd3976265351a3d2a01f053c756b3851626924a6bfc688afaa08a1b6e41784d2ba3f3648b0164ef128786bec20d651b076e7aefb4d7a65fdec8dc96d1a5a9d2668e34a7cb872202c49f8ae16c30436e51aa15c99e6f8e90039139c5bd7450234be7a0605334a0fd107b3c68661423a24792dfe9567203e2181c33410d229f2f5344166afe8884bad8db3293a69625ce580228619271222ffd145d8c57adf7bfe9bf98f4f7a75b22c08745578947f47a13193c94a0ac65d4623d51cfd8bfa5bb294cabb04fa628018db9e517085affd3f87baf86c279b04a739b391c6d10362cad98bb28bd2aaa60c98c0e142e50effdef6e6a0ade32ce26f834027de6b59c5e18200b734d19f442dae0fb421de9caa81b71fa520cb29b9e0b61aa6abcbc0c3abca6d8d67fdfe762c72e21d655591386f0773ef4c4a7cf8c8566442c7423c36edd317b3c0bdd072a50e11b698c9b944f783b0abbf31d4c7930096d0cf3192e7e265c97201be8548d81c7e95940ce82a18e60fa7ce1dd30fdd573396662b357a2f48063860d9bb881e405d4790baf1ac908d51b7e393d29a0335c00d51be97303828b3eab5dd290f10ab31f8dd672054f1a450287b0dac8f00a038fc5abb3df4f5fca3dc66e9fb5a1f6b416426a7184c0cdf8007071d46db40c18962e465b81070c5fabb63d241cae853b696e6b5493482a8f72de7bfde2ed0fb820ba976ae1d9992defb9a3023a997bf334eef2909b2b2114a10a84cf2a747aa6dd251484c9df0fcd86a2800b0f6b312b054b451d32b9e825ea0c5a57fc7d761ede709d31c4703015fef1779f95669724525f68dcf69bf802fba7ec9f6d79a5f994268f6c63d2624a3eceb56f7be3fd63c40f3c1d4af74da13b51907a0f0ec66a72082823d5de8e79d2fa31ecac04d276dfe0034891ffe011f0a228abfa5ccef54f2f472a7b030d5d7b93881eac587972ea08c82b4b537ad143ef6e70c870f53f04b0d8ff31d2b84dc9eb94cc3dff5d3f981fb9ae4174ace5864416e7a89b9f9e24f67c67b3c42010ef75ace9bed606fb48639d0608a6252e21fad4666689720969c153057218bbe8d6b0999cff2bcda398045ed6299ff73117be2c9b8954a38943abe110af0a554266893cad0597efa988e400f6c1a23deae46c2ad8e7abddfbbb18ece6565cf12a730c7653434dc12bcbede6038fdaef36592eac4eb8b28d94ec8b6d3d69c14c10871616962224e845113db8827b26dafafc8dec9383b5ef86b48e170410a4b07780a0236d248182bb8ec4d4b477a2133b25f77a93b0e8dd0a7542d1472acfec5b60719851364541d99a8840d7432e42043cf5a0d004ec7c24546db25d4cb44cc70b8e5be8853ba327448fff5e4a93f5d37e696a5f64afe57b178b8f7ce2b365afe08d7219e0fbedfb0c1c49912d5d7a400f8987f48f674d5c97f7f360a103401a77a4e47b375411cd06875a40f4e0ce702e09779e67d3a96f819e0f8cf3a767d041e7dc4ec81863285590910d6bfeef145e7fa707ea1aad0d73b30a147237727b48e56d7f89ff099207b24a4cde3df433a13f9b30da2b91e4c1f2b515bbb52703d6ad29d9932101c67b3134de8db710b41d83d05e0cdf3bd528807dc59b6303c736ecd34c9afae96b62bd5fa8512db130edaffc38fbb5afedaf740cb3891fb1695d23d03a0b375041a7e5a495e5fbb3d336597ede7abad4e8697f1f90eaa327179d632bc50847f66fbab0fa9295883956e25738c371af3ffef42473ea6d5328f078cf70ea6cbd92b381397a4e4c293711dd33c51e9bc38080f0ca953f2d97b5f2c3a1b52dec56285b44e6a869b47cc2f62148fdea29ea53b80b96acac887ebaac37385d37102cb4fdb818971462dd80f59368a188bd9b9025bea9a8dd9ddb925e9a7e984fc7e0ec2f46d6aafc1070945cc182dc62af113fedb41c52cfc02760310027a008f4eccf26a05d39c73029493dcd9d5aae7bf48f6561f3ecd2a999ba307b5e5a48d7e0a2eb947c3191e6353e14482f08ea79c039b5b5c84eae9be7881d6e35228ac522d6bb2f7b0ce6037bd6f07acaff7a4ad0f52ba8c3676d24206ddc866788f27b6beaacf7a62479311ede051b3958546ee7f289180f85707500ff31f301ff2d54d85ea1c0f65f07027e4ad78bddb71d19ecacfcdae86470e928b6525d6af5cef6ebf5dabd67f43ab658268620e1dfd0765a1e5d71712b7a7221d6ecdb63b06e6df45adb57fb75a69236a8160fe08fd5f8c0e750aa4d7807231047c75e6787465504f4f9827d89399e4ec5c9597cbcbddee2cf8088c0b60e7ed6cbddbfc49094d6eb2a7b830f87082aea7ef2d0128aed9aa997ec0c60648d43856098f246cde611f373941b37398d7aad73c12cebe115b75983abbfb791b3efced2a62c51cec8b976724f6a40a50247b9d4477c7ccea08159219cf0cc1b96e6584ed13fdfb6920a181c7a3c9bf933f3701fa4621b7327f0dc4fc23a4a0c5fba9bc40be90752508698a6efd782bd93a14eef0041fc4c7988a8df296ea0f1aac0cd7a4888213e63fd1f5c3b36b2ecaa94292542950d3c513f92fedd6c1761cd9ba1f64e41b342fb2e64d57bcb19d3f9bbdeab9536fdd32a6cb922397947b7c6a21a481d3fee928b3dceb9e614c9a3cda168951fc472b0720f36eb804d5b1aa348911eb8bf9a864ea03b53f9b352fcae3a04fd6ddb8b0da5197219a0337ff406c48b6e2a77915ff3e1862f97e54e6ab6ebd349ba40e3bbaf4c1f7266f7643a5d61f57776006b1f49a30fd75cd7aca94dc12b8670d1602d8184a3f25ea4d08a8172da406229f31eded01b69485ca3613c4c5b435f17b5df38cef49fd81b512aacadd2d2e77b335c861942764d1583cb055eb928963a5f719b37c8afb1232095fa2a01472a1873f3dee553246173a058ac60a4dae855513d9c37dde357ab04489beb76032164afb335241df6d857a9dfd73e93c857c66df8fcfd5d36ab2460365f4e898d03430fe74d4a2dd6bfb13b85db217503e49f6db6577e8064766a254952c8a48320540bced01e7a71e6e8017c5db3703b089eb8d43c04a3463d19613c001d0d52f5721687fa2bda3c095e166cd57cbcc8ac8d830d1f174478afdec6af835c6530574c45450941517b92e7b6410d07b1c31f3a784bae1d6e6ec25854d352021b910b5a23fa3fe438ed99db613f4f136fc32c6dac4474d9b138d6b0853bd13930c5bdea173d01ef5d8f314ccd7dc81150525b4b2891279e2d0d164015540c53dc3c5ec1a8bf698c488aa9791fc9072c49d56c047a4cc3665ba90f7a01fc1737118fe4f46e6a555cb1d6d93b902a805a960af12c61860692f179c5c8dd007106ed8dddbb6b8ed48904d81a2f76abe8515db46dfea0288dfc30901c69e3636238928e7f84861b126dccf804f7910289efd7a043bfd143a50fc077c5ca674ea03636d3d0bc880c407e750159a62be5b41375f689021a5773f700a1355f1fa7ab764138b9c3b16290026ab2200826bd523d67368d79d4accbf3802cb6b98e55e8f3afb15e7b78d8e7fa390dfbded06b4ca941b7358e7b612e6dddb5c14d759cfc85ba25f6d49fe55ce5942c20ffd15ed07fbbdc9530e6924e29fa73a442f2097bc05092492c1d19ead68008a9d4d59066956ba7415d5f3eae3e68b783ffe7ca291e7000e29946c8e053e186adb79c2d10dce9a33955a22de317cf537c850f0491fef6914fae1f5818c25c896c79f42f526404067c49a10b7c7584ffd393d074c6cb6908434e7da047f502e9b78790ff420d691f88b8a215018a5df4a0d8890a1614ec1d3a7e64d50689786363a3e232b144903eb0f29a8a32ba02e59ab136daa328b84e6eca397e89d6df9abc5427fbe9223c9e15d57537440c521f42a932adee65a10fe52b4ecf789ee765a8c9fffff1694c978940941c363d9e6da6e6930d423072839d185710b6b17694652ea7c592744bce6734634a8155539c296500d35ba4c6f134956d423d0bf86103c37f711f71cdaa4d26cf50e1c1d2f230bf9cb769c7742b16e0670dfedbfcfcd797e7310ae8eb8ec85a24118211e54f129b3e5ab79cee4d255934ce766de830752efeb78059ef5a9d592669dc24957f70acc727c6c3abfa2cec866d9e8c1fdcaffc19e0c5a16ada90fe42b86ad5d1e558a7840fe1151702994c5d785bf5ecab388c1ddfe7c0cea538d872479e9184476bc7ee85042a983a884e167fceedafda6dbaae3357afe3292432d4bd6b6741f0dec7dcd2c0691f88a42470b942223b670caa890d684c8d3e6321def4de3f6869335a61886da2fab2d7852a861f901dc0187238e2e45c46f13e3829f224702b388a4435812686899d33c8d00b042a297797864dbe448b65ecd894441e7fc911be356c3934aa6329ca4063dcebaa85623b78eb444ad2f666522cbbac5987a0a0114f30ff0c9def53122f4975b46eb64b2aeeab4f1bff78c5f983c7176781c6756027dd420f59a4a5ac9094cdf7832965d2b617dbfe04d08279c7e96d51b0623e6fc76cd604ba9414189118412779928c253c7928d66d0adf68f9f1e121ab96fe2382b0b794f6920cbbf93706526ceeaa693b7250b0a057601574f5e0089af313fd09b6d3d6e90cc0d2ea52ec7e89c367ea9fb90799cb38e51353fccec5f680cfa0ef7506d722a69b35d51d5339cdd1fbc96179634eebda3cd0220a04ac5f6f0982c6757de69e6221f26b101ddfa33ff6407d4627979a5e5736de2afd84579b726875521bdca11e148e3edd1450fec42dd823831550255b6a1fb1bdbc7b2ba8babeba487a3690312eb99ca0e9aef8506a41f49376ba40d3e798b0df5a9f5b0b99448ca2449748e39ec56907c46f72d94223103771ec1682edbabd332fac19f052b3cc09188fc6545a0cb69820fcbd467adda0e5c6ac3f6a768e845ca35436f85eeaffe22a1beaf66f79ab4c341ec4b6013ef58333fbf023c565df4d71d0f321b8123a973197759dea5377c781cf35bbaf898bc0b8b62bdafc41e571c4cff961ccf2ccc8f478778282176216b90cd0040758a5d5b0aaec181453bbf81b2f1b339dce46f5a1d361eea405e8344b7d66103339f51f85f3c63e5d40ab40a2a2009654fa88eebde97ddee8c1ef1c1fce15685bed658d66de3cb4474ae2d7d469b8e52fd7aada15cfa471f70356b436a178eaa15dc658ba408d6df905fc36cc87b809cd0692b18b348dae9615ddef0cd79b0f2df805a444ae08672b6e82217fe4ecf06d6a6ecdb49dc502627c01c0eb7f6434bae9bf1e7f60d5557c98783371590a1efb93b8167200046a0aa13c99df1df1ffb17f50dfb32bc8ed2b5d2a2235254afbe6d9c8d5c57f6a77efa803edbf20d75d15c176b0645fdd27963019ffdf93996191032a2c32813701bdd3c2abba7fdf608337e19a2eb350e0e69bf381da0eb71439b2868e3d2df6b5f4648594d47754e0108bf090794705c98cafc76aa1146b9cd9322f58e7c85b75f7d0e74018995031ceb37fc2c81bcc618d44801ec98f9e9af36ce69f5b9d10372564c11b4b7bd1e1ce621c87c89a736765be4b2801fe5f65a52580c50f38cd9b83af47bca78fad9b36dd4af5a113590d527c65f92e36fcd5ce2c3393d15491b32dd3f5ca211049d1563731cfbc526c81ec4de6719acfc299ddf2004031e3bd30e94560e1cfd09b01403bdf169fe02e85b2797e7e4532d790b06874a977c8c2b26b614bac83c0c16fb06b4cb1f47e96b1cf855fb13c0f1e52e8dc1c8d73ecb483b0bd57111fcf5be6a737501f8b7382e11522c8c66ba8f11f615d767930764b902946ce76c886c2bbcfc63fa2c1080c37be6d96e346605a146bfd98822467724e51a5d149f643cdefc574838ccc0529b193b16a5610e92308902f2c52a22b53b8e2d33f59fe87afc21b862c4631c41410fdde00ad0417df3ff4ea64ee012a0f440edfdfed7eecf363d9c1782bb04803553721cc125ab1e3834b91092fbd131e004f74f2b36ff2190688e1d7d56d09244cefb1081d6338f8177ff3f3eed09e32368f0f0eebc6345dc89efe4339e042ced4e5c87c267b466d4d46d884fa1b074a19269a3a309f331b11a7fe400fc3a51dcab7053590b06288a3e3d5082f5fb112cddc246830858e64fe62b2edd1344abaac1aae46ee7394347790b21bf7a95df445f95f73965edce76fa2c49b6f021a1333c2d06cfb651b40244af2fddad3a72997d6b345ea1dedf0f5d30a10cfe16318aa3406e89421885258d424d50a57fd675f42b004a369270e6f48849515e35b697ba21a28f65b0e1eda00440756287c94363c3002d62776e2414944d06697a8304d8570a037572c99b6bef5e3dabb1f9547f0a136b568112af127587b2710b3f90a370fb90459ba5ae3451092b831b0c17922849461bb4a8b48827cd5ea0ac41089566f478ca87724fdf29f6bcef4587bacc34ac78e6193bda00795112e0ad9ba4445879866e038b6e3e285bfe9dd7e0f372860f31649a215d65152fecae03627f59f8fe9b255f95a7424265016322e1e7b493800d7254060c4b872d6d375ec30fc0cf6c9dc1988dc0f0dd3b3b168a70e8e092728b98403d8e4c61059374a2f546441b3db20e00ac9b20716e7e61f0a8117a3076e90480d90d0722ebeabacdcc753fdf58a5713b8f1815dff3131c3aa19651a1cf292da5df293d449f2002bde62cf0a1693ac355a40f629c6b0c16fc41c0cf11fbd2de613790871c922326c2bebf0a3182d0ef630da1ec7195b8e46c220a681f935da4bed4e1f3b94b76396f3c043cb2e59862916962f1b2e09661ad980c8993750ee62ffb36fcf84c68720939c65235d212a5c285fb4ced668a38cc1ff2777d23b4401886db79e68e7bbfe71efaacc3e62fc2e8000ef6d6e83bc31517be00c3fc991e6d621f4cea3b98bd0bf6683d55a09bfee2a5141db4ddf977de860ca69f21ee6c868772ce6d38b9744621b294ea8ebe0023773208935f0b616ba5ac94e3045d9c878eff006cdecf3a449a41696ec7e05e08bf939ebb557048f6e698439c3ea224b76a8162fb4210fd52ad6099e8f081d0bf08dfe254dc9c21d9059ccaa14f208a11a472d640b7fdf80b3990bbf527541abafb992887a562ffd83729a05f73d3fcd59c3cd1ab8c7ffe3f150348c7b0deaa4c0c4b206b7716811c1ed8366dba31dbb9ac8322609787a72f390aa5ae6aafa1d9c5208e9cea9ffa5ef0c2954ca4c354dc99140b36c0913f2585b0071c998f6cdff8628a8c1b2179d221ae80d187150cc45960dc6c8189d8c847368e3526f6b9a089f240227af03ef138c5d16e2c1d61f2a3a1b17348868b98f01866d38d052f8a82d67c7411fc1af895384ac8521f44c3a4d9b88dbc13ed4de98d119706b7df8a60eee81cc01cd3a86fb3f0f05d1265490630d6b9c44f3a3b35646d529d8f584d8a45d750598e116e7c1dde73dd34f30fe9104a76ccf72ce0f9886bfe0539f185ee65799aa5f951391a10cd25ebb5fba252424b503c5da489beae5c3b1e9f187441adeda6c9c6c980193c4c5960463ca64566c7cd5cffb6e0a91a7f68ef039736f06beff77d09805a0c4b418e822ef47fc3fb3ea642a64c390c993138efbbe8c1ddcd827e60ee8b773abbf5bd01ef51746fd9e0f0fe374c1ed55845dfa09c8c9fbb836fcda184e5e4f3629e9a7604054072aecdf7d3054a9452876cecd41f9416593b1e93c54b1962c999ccb3314eb37db8b77071528f405a043658d9682a6388648252b43d69edbb6ba22a04e8b0254e5ef0c184f96bf6efcc540605fb94b0f3d3f13f2295ca20c601c4bbf4be62009f73b8b0ab4fad931a299d1d74109e314c0704bc36b3131098f2f6cf5518ef76d3b9dc7fcd715ac4ffbc876b6509e7fc33a17430dbdf64aa43be3976cb788e3f20277dbc7d878f83a947950c312aa20bb3456188256ed7c4252126775581f394043e2a3432fc7112492b362dc0baf26eea3367dd151f2ae1c85cfc4eca6d6e8a1df5b955e9abad7cc5a1b7611d25e855fb3465e81f722d757604c478f17c41d3092894f2551c28c72647b3fbfa4ac7b5998ce2de9271bcd2d8024d0233d16cc72e41c98b7ada2c1cbd5698efc54abf4d9bedc26e9e0017c40d113bc67bd8f942e16acc3c3e4f0c632bc50deec6e49ffb6c955b7cbacc165271638f2b5662161fac03496f8bf496211ba1ec92ca423c5dd256119e81a9ac42d93176218e62be8d17a0fd53356a30d14dbf18e7f1d5a47679aa906da4ebf074ee9996b6ce78d850f43872c55c0682fc92ecf78f92d81b5645358b9e59147c97502fe8a025549b4a1857273a442633ab5c96d429993ad002c2559d4a1a4d38d20211f9445ac665b9d0df87553119fec40f1c6abc8bc1f2923b053a7a31896dc704bbeb10e322f164a69cb882c4ca81eda8366224ba394e3f030fc8a30b7f55919f635ce502658a074956ff5e7d16235d881f54973c61bb036a48fb2083a9bdfae6dd85627fee25376caec99b88ad6de9daed2b0e38e91be2c08d03e61e544d64d80e55afe2af496ce32b8c685ff6f4b2bfe4a5d5568f4a52911011fd56d346dbe85fe57cebb0968427ff4c1f27fe89487136cba5ed8f15347ba83780b1186aa1307af6acb8232b7dffc4a43ab1afb2fcdad842d6ef58d141029493b9e9555bd4c954d07d59767ca6eeb0ec9cadba7d8ed9a8eced2cccb7bca9750fa7414f47c37c78eec5a2f953d7a20c90e06cab3af4c7b4f75ca68b3dcdad531c5ebd0be11662a182bfd528fe5a2d8b5ad0b00f8e64c4a4c2ace22485795266bf86d1eaa8c9211d405b31770b992915ad68b1d56fbb4c429a08115040cd7d2c1df119c2f8d27d7601e7ea61b14f3d00ab406ad1f25f16e954073e5ba0595e1a8b1c3ad2d4c2b19db0be9d65c2dd40f8a62223aab7cf4c63d714393c09999885d7239d9b29679c5a5bb56670601c918a0ca9da952db09c88bbf6b6f41b930f37c46f07160e1eb2d3fbbe3fba3a1cf63406404f46576dd04609a2829cd30fbf90e7998915e042d5ec7965da448e280185ac643f32895a6b4192a02b7ee8a1e2adaad4deb13656d3a2b6a1b87e52e18b4631100e5ee0de29c77e37015a62f50fe74a3943a231a8eadbf4a9cfb23c047e4cb11661a18675baa38dd060cd84d79418538c1d7e2d600c32e2454f5510c4e2094778ba89d904d29d0a440cd88c128347094c1b2bfcff0d4ef8e80f286b4475f21bca381c99729479d378147c014aa2428db1ba9efe2568d4d029567f7fb927b493942c2157eaa95311b9184ee0a25c6d7f9a758372ded314dc2993f70fc0ee7c1a2ab63449ae5a82964b8f614a9cbe683f5416cc5067d165441a90fdf9b3f685e4bdb6d77a5bff1a5e4d1067740afa298ef6ada7d6fb462a4cdd6113ebdacc985574f8cd670af4cf8088b29e2237606d297d9e70b79fd3331c09b18eb6b6c19d2bb1adf07df4e499ecbbe05736752b24d1a6b07af690568d4cd423e5bc2f8caa940d77159a7db7d6810cbefe9b62d01707dbcdee774a5ec6b188d3042d806244a2f186f0aa708b508ef1ffd7806795a9622b214c815b6660a6917481f80bfa6f508b088d85e4ab0439b1a44b76d4f880e789983ba41dad42ac9ffd88f8337646f160bf772d41434f571a63ce84a5261823e99c166c6ed7a989f4aa74006829f7f5026217e81b429827c273faba9d3f601d74e4072dcf500a3217043e2483beece29b204638c7d384b250899549b0028875b21b85c4b496376423071204213f6cc060e6763452c7106b40d76bb9e634a13ce92df514cd952b8c6cf2233e06971d4f00c8858a9ef0a6a033844376b48836c88578d92cb7a3acb9eb3ca4d9ca78ed0f114d94fc7581fd40b934e9e14c89b3cbc095bb66035675fd5e6295a0e3eaf2c3c15ab087e000b96a0ab1bc135e78ee880d35c31737e4804f654cda522782a5f67063ad4303310432217416e233c80ce53a71ebc92b4a6cb23af82767e817ef6ca06e5a4d7f06ea3320b3b2fbe0327cfc2b2515f4a90536cccc7900d9eedf6bccd4f83e4792ecae40c1d5f44506e66ba3db99640442c9a30564451998f6174fecf9203d12352ea57a8a55af76394d3ab3dd5da4eff9490a0c3946a041c6a9cd9eca39e3beaa335cd22b6a994bd267e687ee912b4bc0f8cbc6e1b8715b897ab022d8840fa79f6ab9a693bcb31f74a25256a554ebcc1e91347a1854a3f698507bd38d01ff7c03c21aceccb63f7f8e079c9def5e45f80f3501baded451c81ac64937f521c9d581e4ca851f99df8357e1ffa2a79e95a4d166471b6180a073fda8c86b432add6bb6b35cd382ceb2d75e6e3f8482ebf7e4b83a9988aea0ce7593f8ac709d329e1fdfe3f69ac9c549a9787f9b02ac38accde42d6252cb9187111ec33120745cd412dfff383f0a34dda707be84f000385a54dc6f3b314f375e7a9be79ef9cce2afacdf71f6ca31e37da7615ed1e281181d60f2b29f8595d23786bcc8851437e8f86a27ade157fd98b1acc38f1c7880b3adc5fb0a68d674d18939f685615b8f3d02eebf99dca9acc126d2ab7ef87d1b6740cc17f49274700816e491158eee6d9283d577c8f310b342407edc1b884c6b909e24ea9ed786f489947f07e177d996f68c386c220ec06c66cc82ffc1c54eee03ffbb02f83c52e4c9b00b480d842494e2ec9f9c3b9e444c2d3d1d9970abc60ed18dc09b9c58101ffd96b97e4e222b860225fb45c58cfe93b047db20dbe92ed633cd821af0c2e219bf6f5cbd9526774c30d8b14795b27ee49e129c31b8691522c9f90ad44a013f6549d79548d486a2af006addfc5e66cad033837f3ef65bd9ec76b1e4261634ddef5664a7049137016c5d34a8fe371e5425a7208c3891b86fb8d64a3d737affdf862219bc23c6e9666fe9efeda51e9ad1efa41f80c1f40da42d9249b07bde5683531e56ccb543e29d2fd99253b173291bc0493fb9753ec27623e80ef207705dcd73aa5c2e885271daa83a8b3c8eb493952dd0ab0ee07d42196780f9b2f2d51028742011f618cb9dfae72e692116291883b7a9aa533e3b300c61a3f355628d3efe9bcac4297633d9f2ffb1ee3accb806922d93b55c56b04cee62406d1caab12df89fed3803a4ecd7a370fc9dfc1a518e2be7cdbe3c20ea239dd8c46e5f2a87c87c51e4a91971019bd7361bfaf1c69d58ba29e7a5a1b9941291921b5225b61cf00881a56af91724d713d0664533b94ac2cde0fe9873e419c30031a6fa0d294a4e2b9e1520e373283395b3d629fe719b6d8f2981a32e7b16d643a6dffe3742b93aea098920d9d8d1205e15765452ba2d24cd3f9b456f669b0775631a97befa4696c0c02d2a6bcec997e36f0b6d54d1fdf4eae82ce291a6511a63eb05a48c154e7daf76332cdfff34537c7a540e5e474a268329dd73cdbd0da804d7e2aac6f79938d1ec1af9b5a61627623773834381413386dc516c7e01282a624b6e67607b9333ef67ba10fece31d2a971dd4f72ad0deb5474ec2c9a87e4e172b1d8a7f5ce42c07520f6ee5c46794333531b965f3e46a66b3616e8325812eb2041cc23c5cc248344aa3585c56b354ff254c0678ed7e0908c8e10e31e5d7f130cf70f0dd0c90d47fe0ae7a577755424d820ad18f6ccd5b430ac959731f4443954044549824e11850a626190e7274063c12002153770354a400bcec377734834000baf89ddfd190f6f92911f4f7f29a53115d0ccdfffb3bfb2d29b06d9e379ae2f2c468773ba7c8fcf075148b5263083b52d5a0a1243c43c708cba2b094a2bbc3b3f92a73befd577f633009183bd59b6a6f9dfdd886fe2cac737eda408c39f4dbbcf6313ecb4efc6b4319d296b35eae688c569113c2b875af3f887d257cb8040330c5406a223edb33b6f843b3747fed2c11b23ab41700470650a3884f053b08ca473ecf79ae15bd8b792298b30cd4ee2cdf0eae3985bf4875a1e303d80f4b1a4df1b22b91119c678b36943afcf2dbf74756774f4055498c5f051dfc5e06f89e18f30ffb35c967652c4286be35cdcd868119b052259548dd72b67480e0948b2aa4f5cf88954cf3515e5f21aa1358f1b217bbb113ecc08c23d51bc824705a75b2b1a516a84f6a485dc95bea9b37c8a547aec9572a421b164ff8845025a08dcf447e215e800c62a920c60adaa3469a02258e0453755be0ee91787f1aef6c58d24f9368c0290e7d7ae176b0aec14638ebd55076522348669610b133333ca0c7d7529873a088ea3802deb5a2fba646c5a026d5056a168eab02e7a38bc3631b753f919f251227b1f2b26f9dbd6e5aed4f8e3237167751d96ee546cb7b41895ac3c276bc05ff27a3a596338e521cd8157336c6fb72e2ffce357cb7225d63b3d3ae8c7be6c518799a599003145da3f065f4ef5f294efbc5d0793df98362b0ab350206fcda406ddd954cd752791a6ab9758eceaf12696cfa8cb65285ee9a840a9df54d83e25f22009de8d6f6820ecdf47ea9f32df253b8408f55a6a60fcda4cb604c9ed92e42f0ac2875113dae1cba15beb056f2557456044d15b369a7a63579f5e8ef095b93a8cda405687aa8b70066fd7799672de61fc49e208199c436c9d052eade8bff5aecad79b389f52446ab6cd96ae618dcc96456339ad856e84fdfd8afa39873cf98ac85715b5d0e7a4aa2a37c00b01df5e5d058916bb46eb385848833ab63f5aab9cd0850e71824b76a65123435e899de13174b0626d906a7f172992041be46c2a11fe81f44bd1daae38937f4c2711e98592bf2fb48ae6f9599945be50498435569c31f0e9a5f1c9dac700371fa01c7b6344ed0c5d1996cce431834b185e47929ff0ed02ff4baf7cfde22ca6819c2977b35d9875d203a6be1451185398bc698a9d8a1ed5c64a8a93fb9b817a006621b59014765fc119b1b0ee9288f15cfdf1f6d4f5d81439788833b1c52fc7fdc6943082d9c2633c86e43a2ff8ebb68648067d195637bb3f1a8b2750e12e7a00ada9d0dc74cd0d693aa5c175155bb9dd3707f9a94bc9c695013a5084b71629cfd370cd7e1f4e3036a922d26dc431364996f6dd22b600ad043ad8f3024e1c3d2ead3b63ce0825d5000825897988460b3750c07e17029ba79986c1a5b96f587fd75b7c3827cd5f04fb53d25985780dda277239420b5c2cb211800","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"8f8772f1d548a3c6f0654deee5e52377"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
