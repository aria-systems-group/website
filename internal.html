<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"9b82e0cd388e657492fdb8436a32992bd523b59efd6de5cd6393aa79792dd85c5e4f460236ecf4c81c8309e6f47c579cf4d1cbf80bdc3eaeb454496f986f3845deb49be876d528afaeff99a2c2eaf9b12dce2a68fd446f6f582044aef19cbd090df20ca39dd42baf55b296eb1f233f651c7511ff90ea5b7385d2803a20b5d5032ae5965fc469dfcd93970c919ea43572ed176d94a243c6f8a1941b4181e07e70ffd3f5f40e6d35483c1193b497e7c44563f16d758ad75080bc7eaf0d4140c43bb8e91955d9ca053659f315eaca67d8530a18fcb4b5ace80c379e718f6224d289354144d82c757b56e6a58c64b28f7cdebdc07a1f67e1118265fbe81cc97ebe5c79cef3dc979581656b0cd695778c8e0af9784d7448ea881adba7ad65c53dd2476b12079dbeea69cb9f38b1458bf332b207b91dd753c4c278ca0501db34294c0e2602a56a9091e385ea52faa73c33867ecdebf94160bbf33a96179667ad011affb6695ed517915a4170879d921e7d96c9ec8669a811e8843c59bbb39675077bfa6048dd236b3ce4478c0abe21b9393315b3360eb4efde3ea058cd1cce93897c6c6cf5ab7735da70bcbe6160df617e7e4175f25c260d79b9d0686606c4a2f0629253b081bf3af79a882d8364cece498c47ea1e8950485d7a5d036d48fb94e84ec7630527243e172f36e2ba5ee342b77588ab97cf61e82254d1d66b98461e3d36c703c4318e448d9ec55a45d14b854159ebf55fb21d9d9424e5855324f119120c787e60fc842b69d5286275d176f362c3237f52196dcbc4ed74f944c4dc8a843583d1c71d181b93282a59bf6da70dad7c2aee4274d589cf4afb418743895358eaa05b55417d49829936026c08354b4e476380086f9090328ed4dad5c053a19cb77141ad9f9949207aac70926058ddcf9bc4994099525604124af3bb5c2649aca927abe2672a46d6a6762c9eede77024240e0d234c48ea3c7104417a89d353b18429298d8e38cd6c76a7fe03bb54bef3388f891e47702593b8ef954ad5c46fb1b9f1679c8e7f947dea127c5d96118547e3eb46ef846b7695de713fa8a64a4745d5289acb0dcd601b9420b9b73d1fde3a1f277eae378230304ecc9e9e6e08c7e47f77b9326a8abaf27080bc9e7e9e9c572d4a132b786aeb4856bb93ef0ea70a76227ed3ba995024bd34f3a041d952d1ec66ce20ef07591a8e477923399ad154c1cca3467b24837c96a8391c3a4fe935759ec255e3317c731308d382b865765bf3cdf0559e283c31481618fd304ec816fd1026bbdbf8d181bde6f902dc1414a4ed57f80b422061a6789907df63361d26067cb15a335121823d60d3403a577f944e59418acfd934a2cc6a087b188cbb8dbc95c3c6ab05c42df08f0c0b3fc69159f188d291ea39ed033b53dbd58c3d14fa778a2fc2a5def505479268438623415256703f4300053bab8cce87e5024ef5951473c357579f153a77dbcce3b574416ecef8610f456e024e34c8d36378de2da52d4ba1901e0e0e0f5e90cdf0549765800354e186e53351306f6fec804bf4dde3809b032a128287ad04a81526f7fac24f0bd68631d095326b2adba2d920434f2fe1ccd9fe30517df8ae7e58a4f524be0d490ea7686ae91c922b70055ffa579a7030e6aa31fc4ac302b63e49de5a6bb146a6a8904ce8fa927129972266f5a515f0ca8d77d67fa7968a51dd213dd542daedb4f80ad4f68bdf5bf5957e0de9ec8e6342a4670402b23c4092edb90d11ee16e7331c270b0b68db5e02b344acecaecb71b8fe7a18dcd57d4042e83d3638b7faaeff1f9d92365fb46c2d13271d7150a5851449ded311c9a932468cf3a564119c8693d48a91a3de4f832955703ab03a77edc4a6167aea8dde3ecab79277d12a01af9336e9a829514f6a559154826daeb17b6372905b5e64dbad08a0a7688ef0618292957754aecde4722acec0f68f1fa1b321c4555b12131c0aa2ce6063b687a0b4346bc26c4b9d4c02930212591c1d4b9902dd9f5a0db673fc9940f2280f8dce73a34249cf025be90c20bb8837c6dca37bf980c1a2d3e273809e6d543d17a974b225f3e02734641eeabbbfc6d907647792bd69735c95669d9c0cb9b5cbae47e1b6e7af12f4a46eeba3bf7adc321eb57faa3e7889b97759f4bba6ab9728fee2af22b2bf893699e04b516020d3c4ae954f7825604c07466bc18d3cab68de853415e3ac8615cbe5f92eb8e0335fa7b0268a4cf67f4889c9d38c82c24f89683ad2eb1c8f4b34c1096da8b2e7b574b691d8ee22116492448230c0b9de7cb06c752b6ef73bcca03353f91c5b4b8f814d7e59a2575508adb26e2dce5d2b667993131db746453bc26cae9f9c78b6d2132ff131e64150ce0cc8c4dc43b0357f153297e795a12c3bd4e523458c86a51bde687b68bf6604dcd2f2982f0ebe120a9b5c8bd9c644a825702b6d45d1042af6f7e0577e19d129ba510c8fb7b45ddd9c292a7cb8e67a782687379c99bcfe594149b40f66e188cb4cb9e1caf4bb15ad124824a80722a81fe827aa7d1e5c76328ce78d1b52a6046717a73aeae51eb4ac2c3a3e5c79b8cd5314a9c30309644a30dec963112c69ce6281aeac386491b33fb1986c4f1c9456aad23aa24380b486dd3df0be4b5ad69f9aed446e95444a22b0cd0d856f691205f5ed024324d060b77ae3f61a4abe76dc2e6bf3be6f6780a761d6798a9af332cf5cb4453d96714fd2e7ccaec39b564820b48bfaf14447581dd57c7438d6ee0ce34beed3f122c2f54ea2893e0e0b9056bd8e51ef8c0045528a166b53e05ab5142535c6a4fb699d411eed8f67a4a45636ea7070c464385cdf217af71a64a44f5c27002b102119ba7d541ac660627e20b19c785f6ad168765d2e0c1acac83420c36246d104df424bcb58431d90387ce5af420c2f3855e1a6212fd87db62a596f1138949aaf47cf0d6ceaefca80c5c84f4d6761bc667be225f8b38813915babbec53fbf15c122f8ac482d3e503cbd5e86d188e30203df07e561905d4b2c3dce61f24c14ba11c611289cf4aa8ec413f2b54f87d7c4adac2264cba968ebaa395959eec0bb6a53d2f9d2767060757f7e7c07a2ce40677b104744b1934d760dbe93a3f3edbf62356318ec3450824a3ec1cb7550f1d890b11958d1742f16085460585b49e2230cd36837d7e0215d724cbb9cc48bedfa0837284dd39c67fb79124af412d540904960889ca1db75bcd3c6f440028d24496303cc3e10331f2a231728cf146eb8d656696e29b2cd1cd2e906e5f72751208ad495705de11af406a3d32cfea6e7964481cf4520dd2a43c48d35e574c5952c9875c65f0b70c4f1036db35b38c95afeb27214423371cf4423628236a0ac6beb09cb040507d3a50463aad066cb6d1711d80f57af4dffa8bcf5825e61eb7c72a337447efce2e1996ff2c973971455fc10142077ab908f352ff193b8c87a60029d363409ee56d0d8d7565f88bf4f28ca1ebe302d34765f94593eb4a8a28c4fa9ba03bd6a3bca087f3f4a42f9f4383b14ca368115d70f466223f1f313a1644bfd48f6e5a0928ab2937cdd2648dfd7e75fd09bed913cfd086daca262239a55f2b03aac64599c5ffcb3abefbe122e21aea9f15d0569b150a917dab82f743e51a4acfea66ac5bf0efb8c84ff8bebef7c2e9a2d78f5b6bec57972fec800161d846437618397181f22db3468384ac0f5ac9a552a5eb274acaf92107b946c69b8c81cf1330b3084eeb240f1ce0169e009733230849b42c53ebd0d4c1cb8038d8616362fe2b9f1260083957e70a3cc080902eb0220d04f090bb0e781909d08f34c477f1c92674c514acc2b8256a7949127272daada5bbbfc2c7333bd728fda33905f3daa5777586c4b66e950772931061c4aa57b262c860e399a58c7f6a6234b6a3e7ef1ad90b98a943dc2612e424cc909da7255d21d2d68a1d7b40727a532999c91f09ca2ea250d853ad4938157698bb00b28c89ba70e05c1e0b702f4f26b728b7ecaca4318918bf99ebe0605bcaecde6d35e95c66e61c295400654af90a337c7f0a5909cd559827c8c77610b09ce087b59f2ca86e4a5e7774c3b39c4c5051cac379cb3fdd6076c84e1d299a8df7ae52cda04abb040169b33a73a6462bba41f3667213542749a3f9b2eede154fda72b7ff97f233e3ab6e1038594f7006f97aeef6394d9361c84a0eb7e7fac558c284940d0289f1af0c1d7cd387a1cb808ba48372beb88f596e7cced80da0d17767b7e444e470a6312dfa50bd36aa0e5f516865d0b07b93fb33941743431a3560ed58ad219f10e207896be466282068588356149ae40e5938d8ff237053ee630a41417685f247407a50a5f17bce7a2c740b9daade410820d1881619b0aef2820aa143dadd6b8cf8a3610836083f86d3b73a1ae7a2b1aa0e917bf53b74514f5dcb3d680d4eb81b7faf1aa72b1ca6ad718b6c97659f3b78b4738e23e7be98b7f52aa97e42ea7830c5ac6d31c8dd503730073d27d1e86b0142203b31f9cfa28691a482c1ab060a18a61d1fd610e863e312cdc8b26244e7b2308b67e1a75d015a328e9bc272cb552505eb2dcd4baa96b3c18e4eceadf2f892ed6bb7324577c177ca006558af10a71df615c4a7419810c7ebce3f66d030e192736e15540060067298b4043429a0533199f3a7cfb2fbb5823aa652cccf9d56fef7143bfa9bea8d945a772c1770bc31e36aa92520f990c19a6516ce4689275b83ae7208f744bb510aa133cc9a297ed7173b613e47bf46801891d88b6f49b78d3b893ce0f3299ea8c929da261b08de54651baa208cb845f9101c84320566d2d8c51248cbd1ebab516f5105cf8eecf5af9d5d90fcf3d16a0c92c9a176e05197446036a9d7c53db40eb3ebee89ee4c180b0d9ae656dfaa5bd0555c551c6a22d96002789e377a2cb3ae8eb6afcbac9be6e20d714f0d165b2217f70879d389742ecaf690bcdc30904529b03f77215f1ae3533d7157086133cd2bcfaada8fd08f3dca6af88b9247dd4b7f3c802ae1c9463409cf7918aa44edb6cb6d9d70f1ab564c67d341268c5107167e43f6d9b758f475d2fa56af830867cafa84e1890c85e0b2c6bd9fc5ddbea78c732c5df768adc7631674782ad352805c8aa89dd4a3fb7879c1d231786dea754024f98cd7f18752d19f0669fd7117c0f05c9f4397a9fe9dfb4436809e6f94b4b7ef43db3be7a7071a54b3d4265da6a1ab5aa75a1db519a2c7120932e5feaf2473bcde00fab00d4dc42737f3defcf88423a2a3180018ebfe84e76fbd17e93d41afeab6ea120af6b1c9bbe09304335355d257d4eaf6efb50f571cdad94a1a20eef40f2ece7d7e36bce3ba7fffb58cc5ce089a9aa179506b931e09a76c3cd0bd344496d066296956268b9380b09000de6267220741cb6068a29f455da46c47d1a7257efb34b70758f2b2f760861a3e2cb28a6c0cf81289c90167fc8e84a0f6546f1c13c5698a978fae518564747dc311b2164c661f30045362d0803d37bd940ed35710cb151bcfed64dcd2f08df959b25ecdeea5f36abdb4676e8408fc28305a17a9ae63cd3072bf03241b7a7d0f0101acd11caaa0421c56d3edd722def9d9f09963e2557b08637f9ecee3aa9c6194e189295dd32d4ada690c00fa0033d7d2a273f74ed4c923dcdbdcc9f74873996c703ea4a89f8a0be902f4f478c15e3a5b9fbec4af165e1e3909f0290ff719a17c512642d08459fce54c6252a62f6b9c47d88bb5a00c03c7c230c330fa6b5383ac58999e4222b3f76a722472823ea20954237e84d1b88bb234b5023fee7dc73947d95a98b0642e4f1b5716edd5988625ca75b01204d2e1a056113e848102ef5fc8236108a479068d4e8ef4e9032cf55c5b222f44312879209e6fbe6f0204fbf2bf0f18776d08789918c3daf4325837d550d158f02da3c37432cbfcb67eb8db9350ab95a721f933799b25544ec6a9cd1bdd9f420f8ad2e21a3693ca8d7941cdfffc383c46041f6848fe578189b125a5eb09e4f693ba57ce13fae84e25f60ad10601bc980eefe5d89a274cdd2251181a7ae77e2ffaef534b2b9f2875f9b1ed8cb7daf08829d30a4fa34dd7cbdaa8a2693740a95a10f73e1b2ff8cb8d107dcabf33e868de8d60152f38557b6870fe6235908213a3d351a3acdaff2c2febb3a071bf5c67d17427ec211d152e4dccd779bdf18c3afc41473815c3987e30a1b3be5aebf7a48f35fba5a7ee0ffca31ee80647ae2cfda574091fe499a27f15dff03a0f6f54572e19e20e8f6aaf22410ba533f7342f6ab2936249380530001749473db6e57009fb937cdfbc0a58b68b146fadab0c9724a83a136711a935aa9fed60c33a7486b11d5646137f33b909340bbb06a0e23618956942900c14d0982d7a853fe7a923d6eaa5d10d8210986d055bec62c0e91b3478ecf34902b2e16cf2c142516b56fbf366a6e530ba9461b05bdd5ab94c93ab29cdb21e294b5c44bd36a3213b8a19b0f70fbf42507784e4567f4c2744cd6e00bc181cce4a47e481eda7786ab424ea8f8ac24b11ef480152c4e24119e47a05341528bc3aeedfed2facc73a7cdcd375ccdad1fc1e092813d9ea661ea59d2c8fef8927f269b4cb0ac088383eba3ff5d5cc41adb08f70ac53526d0d4c6056f130b91443fd66e11fbe55ed54f2a5c51ee0926fa6cfaea2db0822db234083310eeb1acd5644bcfc04d114e678c4b68714a2d8697b439d3c1658d2ba14876d9ff5241d364279c992a1ab5313b573a13c370d7666457753b12e5f3a1e598f623a2f7001319a19fda7c301691952a70450de29af86c3c014cb59e6c8d8918c7a793ff2c08b97b2f359e37ba7a333db8ba6bf8ddf26dad27c270e52c6a8762b3db02d9cca6ccb328c357ed1dd2ba8e905c4bf23bc6d65cc0fb251679e011532d229e60327649773316c12cd040f56b4bc70cbe3e49682a68d0b0790f9e49b0133c3de5a4cd9401dba8c53270b749b7749187301be0c7eedb61e14ea135110dd7277cc4edea138730acac31ec79a9bae58d40a4707c5f15d79642adf37f81698dd68fbf3b89e01991993f2262efef91508814fd579a38c382502a2bb0af45e08e721920af7e73cad0a3d148f86374a208c5ec2f05ef598c92b870cedcc264dea09653d00ee5e852fbe3b1539624fafa1bb5c4cd0f6fb7b5d32021825f045764f2211dde286f64a6e611321d632f1e8d6accbb8b4693a28de9fbce747a5fde7a77c584e1ad7ff05b6cf6e778be6466ec4dba95e1f5c558958a61330bede325c00400bb1abf90ad0707df257ebfbadd2130bea23a66bc1aa514dfba6358c36400fe110c33218096ef24ba27149ad99951164b56b73edfdffb5ee97f7f08cd080251856ef4728137c7378eaf6699ead67420566bc4e8b83df39fbdb0d87f03413d382e4c97354e08081a9b90044da2183ee503a757e9f8b715ae2b3d23060f253cdb3187e530c0d94ccb254df6757121fc78280b6e4df6f7bbbb01424e15a641af63550b943f5be8c5197533d700a2a6ecaf05e9cb9162d12b5fa936c072a0af258e273b9c55c8319eb7b46a98463ce55aab1062931401b4d51a6fab150fec85b2b0cfcfa96a6c32c15cdfeec5184cd60e544c60a022e2c6f339aa3cd108a137ef20f6be16c218ee10da472125eb22b1910036b33c3cdc353b468884cda863f1f6a28c02d1a68a5f01935f78838c9f486726c0249e5f4602e6828e80ed2bc96492e004317b197545f84598d1a03953073ba9fc2e3c0d3516f8d41900db1983019a92e68eb7f6f6a468cad72df1b9055259630cb1b27e358e1d79c15bdbeb90d3f49d8fbeb23b1c41dd5f09dadf9d9c79d2a97e40ddbf107d72353ccb8d6979100d77cb83d72af9391fa803611c8aada9dc82cbf8bb109a8fa64543e99b807b2b229a8fbfabb029d8597e03d44ea5f72239e04723056cf913659ab623a87c1af5d2dc7ac952868e8f4d9901aaff519035c0546818429cd9137f177d1a6ee8d6368aab83dbcc7b601decb29ed2bd609bf15b53b7663b1b24d58827335526662b860cd46647db8800b54ded3ace0b37231ca1ddcd168ecb1d67d3c30136a253be4950cea331e876c6e264e654e30c6adf4c036009a6eb89de86992fd3885b3da9a581ff2c824472e8675cd4cd4ade49140d4d4e8ed7bb94dc099c073f3f6f3893ff369520aecb169f985de39085791c0798e8cfd004cddf303e7eb674eb0c26d3df6c9b4b3141b8a10028ea2e4ce5ef40396da7e166271b4bb04734ff570d26d93a168233de04bbdcf6b4ed9b8f0aaa25744ed87436d8b68a32a95bedc4ffdf9869b291f87addf1debdca0ae9a60ce68d7a414787ad0708035bdb1e7de6fd1635e4c2e90f7705ee2398621b5d112b70e518cf05567fa234cc399352b78b64da35aeb1af1a4f031971ff140e0a4afc3a8bfaa4d450a207f12db5119d1a6ae424ab7862a61fa7ec66c36c52fd268b366bbea7838d9f8c68c986dc596433d0bb2021ae1b51760be824afebe0a122003361c19f854c6a7943fe9196ab8155ac71c8447425fb329feeadf78f7c0f11863692044ced71c8e7827bbab054e52b174ce73436ec8c13ea149d88655249de99c749713993d6063c56ca195e937a117b7f8d0da0e34c083119d866cf9ae83ce2016d692d0f966922cd819865fc6469a1e5774f81c96539f2bf32f394b4f28d465ba6044a37b9978368b4a3949dca5b90d226a0c53f9272000583742acd3e805cebf17c795d902182f63c71e537b02ffe403e1207d31fc629c18daebc8cc4397bb579e904184398e210cb69db9852eb062176734846fccc7fcbbfd479287444c984f80f05a1360c75529f09277157dc24a0effef6ec1dad82b47f1941763d41ea050448fd0ae46eeed412f9882f254e0b106777287a9fbe4a9776c8e718f91f83a841a0f69bde2c9ce502e66fe142a783e0da96ccb6accf3cb8b0cf8151adf449e34c6697451438c88f94f959bc308b1921a4c011151d5ca071f885a28a7a17c192bd1bae22d8d9aca031dcaae5ab31b5d495f2eecc17e4f294f93958122d8a0d9b2b22c9118b3c391e3e16b6f9611bdf43556b3807d5e459e4e4a681dfd062bddbe45f0024b58709af2349fd849545da1983f1280110d3cdf50c41e6aec5bb077277f721bc0826770be1373ba904d29aebfc6f28ad7dc3340f0112cbbbc0ff8c10c8c0248f08cfb2343f2aacab2133ebaec027dc8a078e76c5f4421fef33cb20c378304ee0af8e4f7bb47db49f12460c8f503bae77855d3c56a4aca17e7c22d2d84a9cc605f0fc2f09021a95ccc63cfc498519383a3674af7e002341e34784f8d8201a06c41fb408df072940a107aedfab7807204fde5a5d1d0c7fd4cb959989ea6798253c7c75b7e1722ff8f5494dc5a00d6ee62cb4cf5232778a81ae433850d2a5710afd68e631ed6cbfc456ace61bdb2d85ea75febb8e3606d0a540c4d57099bc2c43ea368f7c36705f0bf9c461736dc78371ed72a582db3ed1f2951e100b358316b3404629c622b5483593e11578d739f97d28d447779034243989cbc999559444eb926194706b7e1ff9c64474d7250d3429e532f268d1b431676dfcd63b98021d569221712ef261b6ec4f039bdac48cf3023da3c024933d9416c44059f0bfa2e6229f4e9185b388d64b451fb724c30e8eec27f6993f1e024f0ea2267183af03f4ebf10a4f1a1d066f7c31fb6c9d20e81a4a5b23a00774380232610950dcb5d6ca38dd652d7e674b3bfea5a20172e8bacf96142139b0ffdbd66d976d39ae31d0be173f7ef4e2ea5fc8e7dd8e9a796dd79c9647a78194638cf474c50a1c36ade65906b4eca26f600e3688b6344bc0f1c9c745eeb4216accf56c06b11180273e2b5fa281db3a9b8785c1dcd7c1877c45090712a5d06704a5b945bb6f191424dcc40f19649d7ca3dcd615ff2c2accf02bc3c864811884de0a76e98237891163eacb6f1b76ffb9e55d2b9e743b239fb643913057d4d23f2e37350597d10531600c5a90589429fa66ce69e07f62255ece1cd3840289a33a88c21c4ceb2dcf50272c2baf377ab871f17a92c121ef03b64f577e38a42d7969e6f7cd089b58b145ecef338fa4b4bf78f9a4f2c3b4e7c9aae3525187f6aa4f2ae95cf08a214dfed2cb97effc7bf9a601be4c8b4c9a44580d643886255288f7117f11d44b75cfe87abf0ab3449c09d64b0bd1c59fcc0937ca8bee9f4c9abf89040252dde31173471c0ec2d91be50da9e964b8a1192c76aa9cb632605c837685593de799d8eb74c2adcc278924d1a304c50af8afb9f0f278f577fb69afa193392c6a2a75cb103bab7a9c97059e735b5cac67ca4c4d8d5bd08eb4ff22796aa37c9afb31590b035e59debc12f67da616a2ec78c6ca020ab2996b10f9715d84859f8e64d68ba158dc83092728a354ce3eec43d77f307e44223aa15a485bd6f1288efd1df39f007da61b17bb7b5c0d30c244ca95c23a4a7793794b1a43f5c284f4ff112da3cde7e4b1423aa3b30a53b5820a5adc149a62f002eb3670fddcb8c756cab3c3d2ec2d5a7746a75f9255908eb3ac5f96cacc4b58ebc122b8e70b8f713f5bf565d68053ba0b03883314d9bcf6ce374927ed32dd4570c8cb32379dadd45e7e85f8be55cd0069cd4f22cdf1c2056ef6c6bce6476bd27d1e41fde5c2e9a4bb048bd904ae50ac96195913ca2ed32c22c091bd9e454624966da151a92f4ce3d02d8d08838376cdb47b23d1bb423dab2e39a59cb9af1203c62ccfd7250a869a59b700f33a7dcb9269ae81776fcc3dbeb6679304bd2849550a9088b4020f02ff308d61885d91af5d7c46032fc257995529a9384392b57739e94c1a2fe4932e754f0c2d1558f123e572af7d60155503b15b1c59755d8d0273fc051283250b1b353928cc0caf9b22898e45b0b46f78c89d9aa4bbfc9d9358731a79d25b017bc2b6634a5512c0eb60e6dd3b92d0102306cc6b496beddc88080cca21daa3297807daf643a8bb3e9cea7f179fbd0fe78b32acbe845112f1080f08e8315a7f22dad3f19fa91446330bd55058ca19645bd6be055f97cc439de20c0982bd9fa9bda97873367fbe6a6dd1a4ed5b1b49f3b7bdf28d9fbe34eaa0b142f32836b90440e1668c43ffed15db290426004a882b1d3e7af7a49ad2b36035a3d76a7555ab0b686a499b31df36817cb7ca71020043f900b549550ee107c0eb2130caedb7da87c8909dc731a9bf6162a9bec43fd062f1f6d7163a000858b4984e3538a0e29ced3ce78db17f45a256f69a58245b7fc98ef97d69907b87c933212059e408b4979404078d694799bfb1f0a69b5cf9f89f3dfc5521ad4a707e6aefd1d25ea2f550d91ec02a58908ebc41d4384c672a2c6b5620dc37f03fc8adf3e2069261fc6d8fb7274d309cd90dfe969dcf60018a366207b37a2d39559bec64b5cf54f75524e906b21a472afcd68ff74120ad84ccc469f10900f4de14f0904a0f8ae2aa7169083e7abc15904ead5dbf99878d7b1f1610f7274f84b9697f9e8e53bf03587f789aa8328e4a806e452f15d9f9b5ee155f9cf7b2b6cc2914eb9eea3f88a8d1cffa3c70dc9574de26813e2da25a3fe0cc5f58b02fc0852c9b0fd2fcf56e58cf40cb0d3b83c2063d024cde8f7bc5d805b5ded6ce8e07ea23ba46a730db4a2344593abe91837f9aa06d1a14b88b5993db426ff53f336353e23f0f69fba5787e634268f47e5475e32f3599ed92dd4397211371d734fd18872366f459ce22793dc3ce9393981928cdbb34c7e70ce72f610cf4f341c0e05c309ba6b18d5c89de36d48a9c7e6640fda85c751952aa634f6f20fc28102c99fb7a8fd0b6f96d71f2c42febd74a8366893c704d77b67f25290c81bcb6c48c227fed65f9942ede2525ace2dfafa92f9f213dd5eceda4c961e3ab0f651a46dece62bc9f21c73055aeac4b05da64dc93dd968536088dce4b0a5c0eafbdbbd888689a695c919a3a3cf21c0ae3886ba7ec0ab11664f6dcf17abfa4165b63f656a5e65c5e0c7382dd4f498c3837f80dbefbb192df31e05121e700d04f5eb7c2c0f13a83be0770c38b6e77d07a41396f7bfe4f091a04f34b7a66bcbe8d644df517201e076c72670ae95b46052114676a9a82e6526e0a92dcaac1062073c7c3754aa1c1d37da3d3b8ca070d53cde63d753e0bcdfce9ff32107b3655c6fe3edca1698c1716315077f60fbf1a2600c8aba0723eac089a92af88df745040d05425ebf9f4caef77526b89d3caeb92488050265dd30df77e727e7fce87d164bf8897f8c85748869fb859df1123717fc5d34eacce7ceab92ee22184e085c3642a9b30c45aa99972331b5a539b6202c5bd1662e022307682785cbec4bcab28349071d059b0ae607a2e00a1b5a10210d6d2e6d68a4cea532f02bad3b1c36cb8451a5f78093bf2114a50736046bcbe9506f4f3bfc0c907ad715e246d9cf7ea7b7bc51809c7c54ed5b41b24d161f2fec46d75e62e294764cf2102e98b0646a1f61b8b8bf5ec1858271010c609ff441d87fd99977f6784fc8eade405202317c0a3632c954a16f93311759155490f99c296c328a6740015d65082879ab8c1e347debe104e62678eecd710544c9cfde58e1f04c309c323329f174061ed6bd6488cb06ad3e763502b04f6dfc247f78ce19a7cb76e2a15f7e51634d783c1ab42ae4a33717857edb71103bc2c4af45f6044a2ab7cbd148a27fa7ead5e34ee0f98d965fe68e40e728c33e0ec6d8da5989941534284ac6d27edba70cb6f7c918544a019494c2fd6815d61597523d9b8c3ac07ab1205dd9221059d5a273bdb1f2aef3ebcc090dc7876412b1c7e089944c900a8d033128e4278470cc291121b97c9135540cd6b143de8f062fd41fa8c7bc96a57fd3fe1dd7e5f9bdd4bdd89cdeacaa0acc4eb0b54653caafccbbc06c51b8f5b7efdc615c49759ef1cd0d5e55fcf5b61083c355758a2c32fbc349090de66cdbcd06695a9847fcd2d88d45e5a40248424b15189d6d33ae86a3fe508ef196d092407bfc96947ea2bff44e496f0734fc9347146719d446155f818a44b5a03d97d326cec1835c0a4d0cbf556de5157efc4ebd6bf8026bab087780ef5077298562361f90b428fca6e9f34debce9d73e4233e92435ab4d4f7d43cde76fb167dedf84994d269fac36a1dcc8623501fecf85785150e2937b29d419cf1d5ee240b7652250ccfca05452e9f2610e9df63da1e312854940aa5baad7bbe5ef3a00ef97ee20ffa9f58dfd8aed682595197385a818434cabcfbc174d4314c7085511c0ef040fdbadaa65e50d212b95c9a568361df9251f4e5c72e5abccc73ef6de6054665e8c876daae110a3d8259772bb58ae2ee3cc5c4c3e9a08243474a4c9eac99142b702545e6fabb52238148f32aab02d77b1cb3cdf708f381018d569f0969ac566090c623ba3c8a2d9852a992d89d5edc615025facd595f914e4b5f809ec883c2c71453b6328b6a7e328630178bbc794ceb0a7ff7928c4141a3866186c9208b8a61e80f45b18079fa4e6f01e3ea41de8be0adb7b1f27b1794a2a2569ec057555f9be23b36203622ee65004760f1363bf8c8a1f29f75d86fcd4ce999409f7e91228eef129b4305c218fcebc42c3f5efd61c004d4be9783767f461905fdffd70b0dee4ca52d1d2768c6e0a1e6c71fa5270edb3301e4dd4b6ed58eea12473b334c6418f6e2679aaeb2b9d77f9fe273e7ffa42d292d7ebc7f06a3827ce43c1f5bbc4345e02901bad1b283c7641fa4c83ecf85741fdd7d67421245bb8063b6eb3aae1b6d37a322c3af0c87d0b85b79e8672b2484ac2139d2883f99195d525a27cba82dad126c09012e962771b96953e43ea7a9a58eb46fa3b69b21f5869a3417ebecaa69d69da5252cd3b459ad25a25dee2c6b5db8b6eda3177951d488d4f74238cf5de38534c71f4c46672a16a8fca082c821be7385ddca4da85eafa89d4f081ecc7c5c22aacec5754855c004302be49bcca2d3d8399dee2fbe61b07e17296ae15ca91a33fbdabbbba318b337fb4f1b11806a98c985b2377afc5a5169c55998845f68745d6f69445595d39034a1ac696220a9a30685166b363152f9bb5b93f66d14fb5b704578368a0651292016454f88ecfe3a835eff6fd57e1a13a6b32d0bf7ebcfb8d27ff746cc15ef18016bc79616f4a28b28f771beecdb0b8ca1be7cb59adc98848930cf9f35c0fc625e44add5efe29f535db70131afa058ab12c3f74ab6a995cf9b988d2b96931ea5c3f583d329a74d551d47e04cfde0ab66d2d84d96208284b76c7c88090df8ebcc5b5bf6897ca6fa6a3fe27bbda4f3d2a13a88fa589d3a6f1df57c4aff5d2683e98e16ee61654e7ac716d0b1702fe5dc59a6fbe92c5747dafa79eb4d6a3e3a4b824843b7b5f9d8344871d1dcaa99749664211de5a6c11ef99c5321afde4059f91cb2b8cb3716c51b8adf8a3b2bb7aecf304c38496e16011b815a9ef228ab754f72b8f812d40b56be5f2743f964a0ef3c747cb26036c18c8b62cd8bc1657fa8465593fd2c91c39ae0f7e0c3af0128e93474230c10dae97a1689c7de5a4a78c5615d10c46292e42b2f92c11ff1689440f499d06b63f735d65fd3038f33ff5e218f0801e50364a973688fb9ac9f86fffccd06877f4a6f0a74fdb26607531767960328289f5664010e6a6c2bee8d803b29667caee59bab4378367d8b322579fee383420b90a5945e8320c60e753ef137d4855418af4d0d94179c90bd1e1a7340363ae7bdb5875cc3837ac13b623a5bae2d2291bcec54633c3ecf1f4738bc4c796da6a869a1b8a6457742e65c6445d80fe74a2338097852b1834c11fa0c7371693bc36a88f8ff999899a1784337f06bb6fa9275250869c04b15d50365079f0ea7cf6dbfdfd0fbc36b9ee97804fa984b01b5a3c522de82d717dfdf4d70bfb51a03731e0056cb3566b7f9cd98c7b6b60231c122100ab6738994c1331951669e73ee89261ce016236265fcd27114b2e86fc4ac38549399d84e2d4371a221253a263793700dcaf18a2ec357d1f571486324dd1c031ba17b0d652839a2f6325e45a4b148f220066e840cc4e16aa79a35f943864111c690aff56b1499c87d637a68b386550cd3022bcf6216089ad9461d5ca23c98a344ee11219f3bc437df26ddc38da02c7a1516f221ceebc194a67d0b925ab35d370fc30d736aa217ab6fcf273ae16cc30209d17dc9b2882b30ef85a53326c0cecb6abfc8af5bbc0fb8fba383cded3f50dc04f6e50515967d057d1a414da17ebcc0ada84788584759f285dd340611f109b8fbd05ada74722c4a9d48933b5e576b877f6a82f4d9cf4de22f1ed631fb8472fed806ef64e12b8be96fb587a9e7a9f2fdbae363a5920cc3d05c76e3ba1a7b3fdf7fe49601ff42a045e3a64e8f6bdba62d20e1c744298fe40ee557ddd9cef399a786bb695346bf5b11ccd0d38d50df3416297f5c71077ec8eb7bb26aced00656edbc8abb215e79c97d58cd86475f401f4f61b2b9a0272660d6a70a12f5a6f3fb9211f73a068f959a34d060dbd8cf83ca3bf2ec910a644c6f9141136598bd995afbb4bc067f9ccfbceb1146642c9cc2f6b0b81cd2e1698b466f79f3c66fdcea49e52cf053ddac4c4710b3a233c1e6c368de1086f1af85808eadbc75a55bdbf67804e07c407d4f3cf82478e4fbccca99ee84f44196fff811b55ef4a112be58ec580404674b4ea0207a182191873ae57b42f6a8795ec280e6b4930ad1bc407ecab69b4c95ac75334df592437ace9dc53721c4ca1b627bf3ae9dfff062b23503ec09e602719c791f7f376fc3635f455d0aa12d553e42e8d0f83a2f6c25fc0515cb4ab5edb75d380b8f9f7f9d19b8a6cc68effb99b3fef47933aa943d7ebdb86f8742c14d5f3175a62f9e4ae8b7370518e76b3571ffe6b48bd5971df827ed83f03b95e5c6c004bbeb52256f51f43dea2058ad971cdf4121f454a2d3d7ceaf91af90a46c3e128fcdb6dcd4637e21e2c988314dfaae5a440e65a129a5ecf0b2a438ebbc4810ff312c3edcdd642cd2ea7d9dc8dee82d64039f6f76b7e93abf59402d9c7a52c83c8849e220c4bf4ff09efbae7b524a5d2bd8b6482db965ba605cfe8ff90a8608cd70246f2ca6876f37145c4bd42a5236758774c23e1cc4a4e37c91fc9c70a5dc579679cff5b7df6ae46a47eb216ba229ddc84aacd98c4ce6e5a79e94e4818585b6253f5cf86e288262502b888f7b834acdeb35e0404196787868d016f012364a9616fc35c31db6f8be4ed671fa5b4717772dfac34a8893cdc76a09d017039510e39862d4fd28cca10462e2af085301cbe7be5267fbe399b644d3eb681c5c07f47ba5c86a7cdd34ff0d210f27d072c59418a6d026a11ddd73a11d302635cdf28b9252d07eabe41868128090993b151fd193a47b4c36a7e85ab5498a538fde601f0c86c5b86873ddbe00f7fe2dd44d593eb077c908b1ad02ace172482b94367afaf570149cf0bdec3aa0ba9c8c178767cc9a83d07816a1d49f8fa9954a8e8fb6e177594e601da2c3bd6aa4b8b185d008753818ea55cca3b2c8c84ebab1bf1480eb2c4cb07a2f12028ef0d0f6e552e2f6681502fa05e7535d5530f1137ca14b9c3196300a526a0a55222423b66f8b7bf5243ffdee1d50de98c42f567a5c23e54693bdbd7e630f37c404bfa20f5719914219e5849092584033449b0c357826e3bc7671828812a95b515f08cba36dc8c125429caa5cd7420f785f3f5abccc0729eaf323f75df4408d35c49c1fe8c59561444d86dd4e2b7219cc13d8ca7aab814a76942d38644435232a76625bf9e76f26258736143eec8f92a13f5d249c3f1b0f413a25f85d0d2c618fa115e5c2a690edbc805bfaf3027d7bcbf42f4424e3a6850168772d9e43e53585b3ac4dc0d081a5a53e7ad58d389c32420e412f131a5cc90402c9f93ed86ce7c5cb56278ff8a3540a343d6a0be8cb4200aec5c9e0b839ecb985c82455aae70959810cf5e746dc41dc8cc7918e6549a135312dd9a0c5a5564380227ce118d4abd01e470411d9491cd11e29c74f9be4fbb24c7ad05f513e1dd681bf1437d47595dabe5bc0a614f8c24e5cc3fd3236f299ab0184187455cd4dd304e699c4a1942651cb2ac02963cf1c884c892e0d63ec729e0589658cd886cbcc5f45306dee28ec5054ee71d0850b911dfb74c2f3534d513925fb8d71baa4dfdead612f29d7da52216d35221c1c27898f267e482c9ad47140db54de1af7b0ba7325169de641ca10e4a1077f920e6a5238a49b97dd7fea65f7d52a35530c47db258c18fa1226ab7da63f32fda8c32c497cf0532cdcdee8f01e1ddd8397f994244092c2c2af604f6e8b2fb3aa6d6f641ab531d828fb385cae8c68ce69357f7b45963e5814b7f94d6ac91b757e37845b7ffbc25f1e478b35cbd15e4652c4cbb3819cc7462e3bde5275e437204508f68e1730e8c4f58efd964f477c103ffb9bb8baab5185797dbdb0b63548d0cb7c1a138bcfc540b6315076ecdb5600467e9b6c8425ac5f19035423e461a0a977762428280e2cd6de7e4aeb43abc0a4934ba94ff3f4959e55e83cf7c3bbc97a1c7a1a6be6b6516c934518b702b777fd4891807a9375e742b9ab5c7bd09c0b177cfa480cbf4d30a9be6da4ff4eb8d08a09504f8fc88289ba17b0401378228065b3b4af3a0eef38e2483c9dfbaf62fa1c88ff44ed736458ff16255f3c2b85633ad50ae3ba9c879935e641aae2d47c998b1ae4614e666fb07dd8d34210ccba9be20ac7c43bf1024edcabc3c1459c2976443e4b04801757ac7610bd49695d981502259bd9704d61fb6c9c3a5a5953c3c98da89ccc6b7125005eb532886d189dc35c0a5cf4329b377d5dd060cd076ee71f731bff53f11d5a89ffd999ac01dfd5245a270282777e4667e021d20bf3a5abeec2bd1b51f3e3dcaf2432767cd77a0cc4b3623f2fd660a3fab92f6fded0c1630dfd15dd379a121e120b2caa477b37813b72c070a773c5435b7a004166c9cc188202c201c9e2df3ac233eaa102f4be08e8f009b49999a877703f809c48f325148f97118dc82076d7ed30a99d4ec71cd9a69263b4a4a72fa4cd3d5e3f5984b79de4a7fa18b5b05a1e35f20f592c66b9c8e1fe62b3fcfcb2f3470faaa3616ec419edb544859bde4cac734a0886ec5640cb5912ec29d429dcc82d4765167a1af8a3f8b3c08158d4d7f4ac5203d6311d3a219399e89d183e401656b894996f13dd1bdb300e8252e0252c8f08fefb162abd8f27133af9298c1b07d70f6b5b1e804a61c0fc1e3984bb3e687f4c4f067fd514d062070f6e556b2f2ad5dab930d89a269676e5dbcc21a2e20f9a43702602fd4002104bff4222c772c49c77367b69923cad06dc985680db8146ab8b74cc59216ba54a6a7b1d9fa0cad48a541f6a0bfadb1c1134f71d099c85b91edffb635b30d6dd266b4dbdddbaf34515cacd84486ef2db3e11626022fc0ce90b8a0ab644e464247fff26d87c12277e76aa67fff37308e701652e21d90d0a7834fb449265885050bd58f3b49850afa336e18e2904ffa04b6c2c5ebc72ee068f9355c736eac3462a12f45af072edd3d7478fbca803a1ae79242e5adf0884a3408534ef1a148663ff07e0b2ff4becdba8f3974eaa811ea57c84f8cc14c5f4b38c1e38a40609d2c59efc06cc73a1ea44d8068990e5a209e0b86db558e6fad92b3cc4dd09f0e4b9624b812b54c15961e4dce836f71186bb0b78d242a53b751624cc651e65f063bd8d35ec87909ea3779fbdb8c45255eed70f4eaa02994306b775df5c52e89479366efef9a1ce76528e28df8541c2791ae563aed60f99f97d80fe4e5417d868871aecd82edea70e8fd2d322f84d11b49118505275bf0bcd70a5e7cc654a806ff78ee85da82488ce0787a5670a2b2ecc472d1c78a9a6cbf46ab6aa479c179e77021d573e3081f939fe7b34f9f6747bcdf0e3db011ae4efa6df3acc1aaefaf697a962782703e8e0c14b3b0c7f8eeb516fa529555c3cb0a6c6caf4dd89f288deef37f8693d96480b71617f3da3f2ed82a45e473753bc9a890e146c63ebe61cd066a93adeab190bab1dc1d657a5a6b66444657b78f7cd1e908046406eccc6155c6feb206ce08d5e00012199450bdce404e1f86f796479d8b0eeca91cb82ad186b17a15b87326cf1ac9b11abc96834a9a2da99d3948576ced7dbe8cb46981500a4e57d6975fe75f9b0830a45f44faf99ad532d1ab6c7e5005f34aaaf8715df56a6e7018497a536d5d813a9f46a2e7e87fbdd27df850527776bae959b6925431192fa3985195327ddfb8f79b99e741","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"7d132672890041a6a4a33b49650eeaca"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
