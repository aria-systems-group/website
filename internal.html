<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0d54e14f804430ee4e5233ee259460eb1215456e98343f8c8c9d3d5f431958532aa7dceb4fa881802274f4719a1c2d02f56ea62e234fffaeb925f33fa3157b3dd4328a73f39b337e1eb5e3df65cd2641ee267573e159c0a0fd6e882c11f5b9d9346c5fc968004d3625d7daa7c3192bb8886011dcada83e86aeb7a4e4732c5a1e8981559d1f58403bde9624464ae27f8f737907c2b1c19734cbafff9ae8a32172e838e464455ed8bac58a70b735a6d69eb4c15e6e9e021a1f9f243e231d12d837a1199d914088c86f08c1dc43bcde43600d8d7711928189f6afc9aa316f784f6d92402cfaedb9315d351489762eee3c7646e1e9c4983a1b9b6425b11d24a1c8b61eecd42b814194356bd1c82191587f8a7a72202fa99ca91e3b7e2a683dd6e4ad4cc4d5c4f744ed1b5bdb48b212c808adc6015cbdad29426c5a90c225dad4afae472f43462d838d0f9b7c3ac2c4c978df0bc5133882e69b680c150ed11064e54ba4d66a2803332915ef50888472f7b1292e5313fb9f35ea7559864741cbc10c48d916408bc6e49b00cc68354d304460ebfb89d80495d54636c329f60e9bf36cf2e094050886e382878099d06c6f2ff1ead6a5c462538d077a8fcff8de75ba364c4a8de298ff34ab52c56c51885c16a131fd65d359795d68ddbe49e33f7521ef2c4304fea69c71f3bf921885c2d423ba707b4d363fa0b564d1e856a41ec89e85bd46714d3d8f39d8b61aed79691ad02e0d9e344e140f1b9832556f7cd27d3e118aa0485fa260570c348f454198ac8bf2a65228e29a4954275d571fb8d69b67aa2c77083dfb586c82584b7ef3447aa0076d110d7af19f14ba9a223654ff2648aae4c588e824d431a2c57694d939f821427dc33e3325c834106c7e38a2f6c306acd03b9ed7cb262e13145d0cfff941ae5e71e528653236bb21ce4eb9debba78b93efa93012e3612fb58c87e7746d87b27d44cb1ac223ba428094fe00048cfbf61143ab42f169480f45a16cdb11d34115966e6281329fe7d2e29096818ac49b89b9b1fe930e392f7116fd955fedca1bbab9bdcf13116b9a8701c232c2d133824e14e6a42d4dfb4b6766749dc5f35df441a247b73f84140ff042e2d7a76499759591a57f12ddf7d7a14a447c36616eef148e398d48e747eaabe4626287fd0b76911824034f7965f53c2eda251282fe090935f938d51d8719c5d38fbee1c2c39bfe6e9473d715e06b6b35da1ebdc302674cc7678ed5ce9dbeee95a7b14805c5995873e142c11f294a1e7c07e97307067cf978d2540328263c454a1e31032cd6205030fadcd15251b0528c1000304d2672f35af2c749226c8ccd3363f7801c237da4c10117e2d02523e2cd4213c9e85e7c649006b5a20384273d09218fa36c3f7a2e8b192dcadd4ff21dda9ece9a89db81cd1346f052345cb016ba13cc5cf0a7a2cbde73d6a9f80db82c0e3c54a38b25bb0e85a8339d6716e7de87b2720db0e74ba12df455586dff7c2f3d7cb76904c87a3e8d2e0bc410d487f7bb17914a93ad9d0b5621e84ad7c8b7e77f92390a533dbe470ea31379b5863302699760005acdc494703644629fe6e1644bf758e84f4387d90b9094c012d402d9ebddcef70f97c70ac06226782e33443d4c39fde3386437271af807bf99f2eb075ece1bc8f91ec20b2e80b6ac172a88867741d8ae705ee1b9877515a1da0d7b85ffba49cec12999b29be61a875956af0cb11f4091d7be5e3269a26688166e9a95faa42310fafc7676835b82f1b311c4099ad5a3f2e7dc737ff01c63b97c67ab54486016c5e7687034c7b0aac45f66fdb6c314013d71f0e363fab465cc272e39b14345a195db875d8b4c163a069a71a8e603e7326be0c099e73bbf74c15ab7bd3bc604440cbe70f58d441a1faa39887dd4768466e014f8c1fac3f81332c24eabaaea7e024c7542654cbe883a258aed42eb93dddac268f90a6304187e43fd1c0240129335b1bac95ab68675057d16504c8c206aed990a7c56f27405a2f4425534b5e1758ed9a0fd7881ab63074f5605ddbe11575775fb2f9fb05d411a653ac292eca1190e1d338c02fcf274e8b87ea2af6702832fd66ce42b0b2790ea8bf240d4c65f1510cd62f4239abbec29e9fd5d0673d5e074327bc81758f1ecf7c3b53316c186d7d331c4de81e59c98bccca90abc29eca6453e566dbc204a1e29cb922822af6d47b677dbb89ff8db7dec21fc5cdd8062763c965a45623e2b8796f269d7dc2f131bc0456ceb036e2ee1bef6c2c661316aea749acf307abd61c07ce6d0e35a68de217493fae0c2c36257c7141d82f340246f11db342d64c4fca13bdd837bd123caad82b104990ad6286333f1b593769eba79c56539b66cc11c0476d17c187f3f804e32e7f5a60f3920a20e3b46c1845482a21463b5d80ecf231043a65fa9b0e1a0cb7bb058c5c1b797228ae1ae38f05beaeee730fb530c82cebd6a090e7d87d6aa35e797e370dc719f3fa3c44f0c4863c57fa5b9e5ffd9d13253e7962ac4dbbbaac60a6ac38c9feb3ac00d66e4eda45feea4302d92e523b9dbce6d11df4043af1e7f51f446f6e6f9faaf3bc0cb33170d813fa3352633e9e32d257121fdcdf4c5e39f6e45518023980a5dfa7083ac40b5e471d576040eb118e20b4e4c1ffde857e13315f4e672a819424ad4f2fac4f4a5acf485e0fe387271a234e41b7640a5326fabdc397e32789a63fb76fa7ceb7dfc69634842cd88665307da7c54f82c570bba0c9b2412fba68a9b40d7f2d4bb6f21917ee5afcd088e56ad2e3cce621cbe061045c7bc5e9713ed5bc7d19a2115b445330eff1e637cfa56e6655a3c16f274a78da86c67c29487969881c1d5e95b31f140ba8fa424001157b61b0a59217cce9988a1f8e7e124ae56919032537e0540aef002af5b36f498d84204d6ccda6bbba997fbcad2a36875e333ef75d19f08d27c609b8995758d6cb9d14976c72e60b9ea079bde16fbcd004dcc259712c3b4a15b6a7c1ab1e028c303f3cd6a8c1ffba4e94db845faca5017d844066aea0839c71a5c1f0ba3835ce90ffabc9ff28948f22f8c979eb600dae3a50d380c86db0bdbd4e36996efb3c5c713325424b930e882f6d5fccf7c0ae0bd5a10647f24108f61846ff38cca81203c2f2ec4a81d145702b1c9688749795cde6386c4cc4bb9087af376dae2b1bfa729e0e37105bf02e284a84588725e02d4c0d61f701b82c60cb8baf915b7362abacc432c362b63ba16e8aaa28dec996a8e35b7f5309721c788e11dff9e47446378879703236df03f2c4d2342c3cbcf951c6fa9569bce3d6d4161264034fd7155675096cb7ba4f26fa186fac35a1a9e14fa59bd30d7840769acc0c676846721b07a9574f758613147cc5ef3764afb56bcfa81e2003cb7c8c47bb3bd7889e0a782750b03526f7ff37fb75013b4739a3fbb2d6bc342cc45f39c7003b996c252123089eac1754b0497d54197991c3530818c933d5fc71e0755418c7fc9f23de24b8fd08ced8d113545ab758cab06bf0e679dc99279a157d312f41eefe30fa5c574cfa7eb9a148efdeb1f8a4d16d105b5afbc3bf8e65e3d93135240473378a9783ac304fb242460bb7d641cef2add954bdf61265b2f765840634abfb6a06b461a2756c1eaa13ab37ceab1d3c611ee3994f98ce5da85e0d75bae62d9eeddf5eb8ffb1bb0a6dae0d7da15a25a15a7f6b303804a967553b98a33ea9a8f7529cd5c9928b13de48b4b9f44c8610ea7243a51e5cd5a986a4c1093017193e63211ef0950706670b8b68200619cb06c0ecc5d053da1a53215b2da925c9a4359bd1869aa4971ec611adf8dd8bcb96aaf3c42c2630e38999e6c2f376a6cafcbf924fed50b4bfebbbe93c37215bfab805cbea0c6fbb3db600d86621b999575c952f4ad56f0d2ce6e597aa08854bc4bdb36b67692ee58645db420f3d395b2145781e6c8dc9e03940dcc88730d8cb5139d1b73892f6153cc7e108ff4ab137bec1219262276b2bdf39aad791040aaf2bc1f0c33017c13613e38ca234b3e412b1fe6b89333fdbe6a00610e0f3139a2ee950991e1562b2043dfed70af054ea48071f5f830a265fac390a1a9bb016a360a11a24432430078dc20305cec3143a9f2a5bdeb4ddeda56f7302cc5d46528c8590e5ea48c4e313461ec02a038cf6c27fe2f5f0951c4d1906adddddfb09966ce3b9d1572709ca71cd117537a31d7ea4a889e50c02233862eb481d56896dc24a7f27f14f81e4a12940d9c23ac2ebd57f227db4f6bde3d250967f0c03195812cc1247653f658ef336939a16a02ccf12ed2f96a12fe7dffa5e024cd26500348017ecb8e0be66feddb440a8178e63536274449058835393da607023e285e3e57a5529de6a143daaa9d99f19f438009b50dec50c6f46cad2d5f393b82b02438e8ff964d4f4d117bb42c5cfc8b365ea51978bb98740b701f74029e7858814eca36dd5bdffac178ba1e195cf66cc483eeeb658e7f3e5bc6c8a8c75675599db3261f200ef79a1adcf4c4bde60f52037c5a17df64d4dd3a8fd5c61596626f0c3ae41808cd36ca63ac260067e74d2f68ba6c839263d8644ce29566511e2ef9f4bd23b6030ee840f49386a0e78017e691710495fa2cc8b64ceedabaf8f28d05b0a5392bf15f7256196d616cd2599b93f148432806724990903955f3f169bb63cdf59e1df2b055a989787cf1f0c477de9b9ad226d80ea3b7070d9d12cc2b1abb68871e0298a8247daf384a3c4bff458268b0ed21fb1aa1ab372abf316492db23f8ae14c52343a9a83a2f3a22e74488c90ffde5b86e6d1ed6c7d52052ed76d48b5284a50b8d7869fba9a333a11041099eb662f098ed3ce39514e7b3e1bee4b85c8c23740b081d33fc8a81cb443e17f4758ffbc2a7a87c5c9c6facb8960d826d5f41df7eebfad244698fd1d6330c636624340adfaf394fb6e70c6e1c2487d24eef8d7ba741ac755ae9f4313cbe82c07928e4885ece60b636d8e8d2e409af1cf34cdff9b701039388844cc0b69084cdb138b8974583c5a6761286e3fb70c3a4c24b24c1a2ce238b3266554833e80d6d2082707bccfbaba35230c9f15670bc724e00397510e63438f3db20b75effa9e1d28596be2ab2729beacb680a44950dac864973bee38886702f4056758d20b9bbfc0e79d21942abcdff08377c3dd1d02373867aa06c44fed910502a31e5b1dce460d2eb0824b5e48f3b475da809ce7979dec03f1888b1d60723e1f272d6247f0fafabf3230b9edcbc00a44154387dfe77a54cecfcfd0d50fb25c53cbe432c3349f3b237481bad4683a97474b66ca15477cd0e18667d93050527270f19d9bb7d7c6c1a0945995f7edb0535b7dd238315078e4c228efb77198f6a99584127c264611038de80cb798a11b14e1ce64559cab945ab61ac8fa8c60cf012a89fe610029d8489b2b8a657230ce5cecd14c67618e45b36f8cae4cbab891beca387e7260382643449d6d6718e898288b3237cee4fe8060b907df649c6d0c39b480fd344d041d95c368f227e5d0f51781188656abc45bc9d70b716912ed35b45154a97aced33becea4c276687ae91dd1f400f1a37b49aedfcf82a7d1083efeca133b2f1283bb75ff6fa3bd5dae033ae18f880306af9fb69a9bc595bea7df736706ab89c132644cde4b32a12f616214b47b84cc87a9964e5dd97f4980f9e6167899857646b2731a1dffcab39460761c2754a88fdd7c8ad67207c2b67509edf6fbb4a15ad19fdc0ada00acbfa03fbbd56e790bd627da596c6494ecfca33aec5afa44ec65c36456e44aab7f0e3c34c00ffff97fb59747883c3f77dc1cb01ed4f9069bd39af4eb45de1b36b2fc47fd8b189f76ab10e03910bd95de76932ccd01ac094ff704daba75127ce5a749dee05cf3bf17a6abd5482bb44b0de83d14ecf9a4b4ec82293d086506ffa302f4118dc50b9f46937d60875d767ad92066d1b82478d0840c221514b9892082e76a38abcca2fc1e9728f5e6275c463d0a7ba85b329bd51ee604cc596b5372339fd81f5fbfc88c802539e8707a22ef3b10047dca8008f7bba6cf4bb3b8245a1887fac62aba059895dfd0fa6874bdff9fe53c53ccd3f4452f96f9354f355a3ee1a6f212e33fc776396396398b925305b1abc514bb4860ba67ec95cf1cbbd94942aa90c60909d61a7f580df8836607f2c3d491f9d99a9462d5fbdcb9858f822966208076b0ab60f45bb825d884805bbe02daba9695b8c88b3ea63e21548b3519d128737e4d969ff45a3b1802b298bd07833f9e0a81818b9e6a40b56f636f017e20f47ddecb8010c90e996937fb66698bec86b10f7316c43fa0e9572108aa1807e4b3cc8fb869683b9b25b3d870cfdbfb707c3f05b618ec680df6aa861817e94fd96711140ff2056162593bb05a951aa53e6c74cb1cd90354161ecf595ae0c8b1dbad8e3e0fe5cfa2a81fb2f3f77bd9040ee0977aa56142f6ccb0bc29ecf712c9f7d8c1582a166d211f4fde2c7353298104e5179477973ca2035269ec2b90d83a99725936c11444cdb280d4c6e0d40fe4007bb0ce0a0c4d86022215da559adcf5a7069c7bcff0192123bf93f98634887e6c1c419c86eeb7cb4eb58dee118f6c37298f4603f64643f148cfe7191592b1e047067413584c8a56dc455cc135f824d100be06b9fc7499216b21f6822a2e63136032a59584e3b3f7e28aab901a7bba249a5b5dadc130e8317be82fb7c800fe2d583e3720f280a586780dd4ed021ea8a23bff20b3f936af560f6a34e3f38483bb9b7882eceab88f1dc707218f7ad1b1d812fe100f042d61cff0cad2a036f465c8819a59546dbb35eb5acff62d71dcabccc884742d443bfe8a3ea72ccaa75c2fc4074005aee96e144a581e7d66e9b2f504a402fe6fdd550df422c291c4acc624797b9a871398d59122666108007838e7bb5b60cb990c11efa54878c34591d66909bbd7ac5ae208c0fa92c1283e8199c21fd52d9ff6bd4b2977c1e30931526f78c54891b5e5d872ae8801313c784e7c8c760dd3524dabc1221d9e6a8c1a064b45c1f7945658dd149e47b9e5c24d2caa89e1aa64e711bfbedb913c61e6c59672c9e6a59cada86e943827b2c2c8f6c5c05c30b97a89026d6b6d536bc35b6fa7fb29f7a38d70b3c32f2e4740ea89d61bd4bc9c0954c7a64b1ec4502573594636adf958d69a4d6e10461c5bc5f67ceb4b4c835376dbdde034ebe8cb1c746af643fc6327343c1b4d75e99f97c651061f5c5557ee5e9982c17377422c42f06cc1971e26565e8058936ad97792dd3438dddc5c48c343b282ef204e3d624af64fdbdba196f4c632512727e2d064f43f6c9684e90db2b0dfaf9d2bf155113d666282a9106501565cc17a5880173cc11ea6bce48918c3fff1bfeb52906026b1083ce8867eb39fa943f796090f9f3a5e4c02578eb06ac278d9cda43a7bd9387e8db0909133be13e7dfe4fa0fe3f6c2165758299af10fc910b8e9ca8118a50cfa7e58b75f53d0dfef81e5eee54abd32eca77c0b23fea8aa9b113153ad8eeb3317619a917e4c43dcebdbb96f32ee23343c3ae6050b161aaaf2b578bc96839f549043d92dab8d874c114d5f4a25ea10886c6c634058d80174461b6a2494527a195da2dd94126bb7f4240a58c6f467c88ec705e5e1c108c93a693a04f22023d385454cee00c9d7bf828a923ce1ad315fadc27d65489459dd95e363faf0c828c2a18ad241171b41d5eb7ef0f9f39fdef26276a87d40d6a8520d5c68d56fb5ace05e0b31c6dc5babdfc8bd684633e56f64d24fd57064d86d3be600219bf1032b1e51c96f3864afc3bf33e7211383e6cc60986ed805df1d5e79c482125c46d298ec8f6d10b4befe90916e0281b803327528ef32b6dacd8727857b0053eab18b48f095b3e229f499d8ac5798148667e11ddc2b52417a5a5908760a864afe4ba43e93870aa872743d4679479482caa317fb59e9e787ff17336841c8936d929f795f4ce81a5c73484b2463f3f1e976cbf9d8c63acbf7c9ed57306a05dbc37e0c7df0fdcf63ed8b625aa1c978570331f10765ddcfb0c3dc7e3fdc619f19c5952c12633c47c5abac497ff50ecbffbd4418bf7633797b5540043e52ec7a5b0615ff813e828965f0de3331ceff13bae48210fdf433d6951e5d399e12ada4156ad9aeececf80e041baeb514c5833bcea945f759c3a8e23163fa5cebbdd4b338fc27fc9e913ac4b0a1598bf2b1bb1f63fc44afd93febaa4b84a546264008d01e2aea8f8862debe5d57e84cee10d88502df3cf28b6561d675da79dfcf311b1e8d01d5092caad1013a5c686856b01e08879cc6479107e346851493dd7c2089bc76107e32ca46a1e575163b1d5057b239ac882826f84ba1fd46934c01c86953b2bfeee2f43c51b75bb60ca8202c026b8cf346d554dcf5496cefa2620a86a9c352bebefd773c3ed6e3917d0689515e2fda8a5bc6c14e5d29d855f1bea6b1174beaceb0b723dc88951c1f535de72b918632ba0a27cd7ace94f502fa6fd080dfcf7e99f0b4f6c91fc488e51321434ae66888e19d0c553dbf40cede57a5b063514e86dbe9d7c6ee39be8c724a8d419b38118cfa193a7156446c265e97a3c0f83409b49cfb05ebcd8f47cde6bfd9f28d1b7a60fd6d23c5317b25e99f6553c4ed26457371cf586c43ca1a6079ad2310ffc0d1ce72fb9980492475b52d9218a39b16e12979dd7c723cce7eba008c062cb788b82d4b752fe45b2b77e99740cd66149cf2e383861cea11c8d9326a1343b04097b7e110e4d2a74fa0cf13d94c343aa9300457928f31d70dc050c32bed9e8e3b6645e914d6254b070ecf5cb8e745c3535b77a29737fca702aa2dfab923b315e600f641477246b71db323420d0fab673e9eaf78e0e5ad745c23b6a8462bc0c299f135318bb13d193837666cc73a95359bf41e71e9240e2165f935e5a652ed69550930787bf1c0e68919c0cfa898bc01acafcb88604659a660b8aa39829f61b60b854e499e5a9b0302892c65b16474a18b869f90a3dd97bddd5a653075665baccbda73e971039e1d58cd78abfde79dcd0ced86addbd24d035e5aeec6d26d8d03ca1b11d2298843033d3fdd81cb3cb92943c625b429b901870cc9710a3f15309abdc46177ac0f398da704e567a3c08bc4f34d11282445f8d1b70283e362564c9b04071230f109505633c4ae28d06ec6b05a3d7f6903f7ae0a6d9b330c0629017420ff271d3e621f923096a962bf0d9c2ba8d6ff2e75906636d66e6b515d15dc2c09bcc1d125d91edcd0f56898065a1a2a348bb73b5fae1ed6bd8eb69fec9c2c6ed381530b50416c49710bc367ae0ade8e3b94eb594d17f0e968a3d04c930f5558f8c4eb985e26e14272c0066f0ec517895a42a437ec138382e322d109294276a6ab86f8483b975366fdc29be303408faeda539b9fdfdbba7eb7b8a1c73aeca2d1e2bcdd216d56b377dc64901ab01536e5c373247d6a3cf5648bb243e5c2a4f76c0b59fc2d6d9d31768eb10f9f271890fd7e647622686de1fab8d052abde1cde675ae6b3873e5b86232a1142e42001b6353307a75d875f0f2b9d12e3ae44d3a3b092708cc0d98ad398c748594ff99a8106d7471d3a7c04b88594c9dbdbd09575f3f85424ea372f90d3726af2ad4657c595370433e76b28aadd96ba65d2428e182d833bea4ca448128f927a839b7ce2019e4ae905b80d1a87a3ba17acbbaffef56e4b59a2b7870b2865a872db45440f7cd18abc5245fa27dc0c8410891b436b84769404548710b2b3e936b090e1683bb8f2447d83cb51202b0b7d79369cd1f35cf29a9a60c6c059aa231306e62ad2977e94ae827082cbcdee062a9213c2a4a623d2add7da39660b68dbe02efd6d8af9c52d82637630a6491137d445aea98cc4cef74cb14c0b39e7f202eaf000d2c380fc44c749c491bd7c69f01882aafe960726bbe7ce43d544fe4f04d9c4d66e35e5910ee859f9e4b3150df26a060a43b8381ab4843621076354a6b5581998f73da43f109b6f2b2379eb100ec9c757b51466d57fc1434d32e1bb8865d009693f5be677575effd1175703fb911c691965c740c4a19c0a9fe364a33f81c1bdd0eb99fe99ce26d13574bca3b1480350581a97a462b9fae1d7d062a8adbbf01409970d589e6b45114c56f1e35ae79d59a475a1709e62ce363a1fccf3723e8d1e27c6285350d878856541d3ee5df47d7a655c5e2f20fffd3e7b5df7e6b239e1d0e2cf60397cd0f4337517bfcb5e6b13ee01ffda88bab23b1027f9b80c5416da1fc6bac05d5ead1ed3648b34673e3946d91401d96afb80cd1853b1262189588a0484eedb5461809294a726d7e18b9f2979cba1280eb1f30ac9130296e47c0f898000a268a6e2288cdb6de679c249d36b8c30f8e6e79cfe8b3930bb0d88ddde4a20aeb4f18bc4cb4689de1afdbf4f4eb2ed84d7b60ffef8c551369fe06915b75d8b685ee47bc103e05fad688cb83578d9e3bae4d06c39ea715a8d18e619b0c9a95ac41a0bfef6ff7ad2feca9612c45f4e3c3f2871e217f8866021cab6e1ed2ae7427fcc3736d87278288339de55d6c32550c991ad80df8b05ad99b8390c3820c87acc595a21a269fc2a9422e506df2a05b3158d45eece7daf2de40a10d6733c935de5f71d96e7daab90d390ede1e112b1cbdac5d21cd5f6a3d1bb230bc11635543446b8b634190795fbbb4a7d6e438e52bb9202e8945a5615d9250ca9f0accce8189235724a7ed335f6f2edc27bee637e2d6be4e38dea6fb183a4fce9c99c549474ae4965dd67286de48e8f2710c46d206e333189038e92c7b6d4501f2bc672481cf4fb47d8eef4da3be2aeeb1bd177c19bbfbcb2d885fb5e394471095a1291be92c82a8db3db10fefe7e309106c651eab12f584e0723e07f1ececcd12f7ccf2eb9f981fc87b6c6084890667b376c7cdd92df6ab737b8b1ee250b3db642edc616aebb205ed9a35eaebcfc6f26ad37b630ecabe6e18758473cbfbf1c95ac29914a3bc3d74b5030c4cd49422431f6c48d78d9372810969d3bf4dddd6d577f0766944b1622d22e35362816cbd657c222130e6e2d9a86e420ab84ea022792482f124f7c4340fe949965b3539c519c932d6b3913b572d7491abebd32bcf48c146d36f1557c12fc790535b6b37b6c9aadc06c9ac923d060fd25bebcf99237e0b60ccac6e067e50101b770ebf2f0876a1903ac810c8ecffa216b003a4367a4b6d80a61ba5d39d3661caa317621742fc46b5a9362db632581c89b0e49fd621748f74250364de0bc43b7afb4ac5434b7b5b8ea6fccedb8d4e1b59bfff4a67958227c77cc46e2e5cb17aea29cd8eb8b07a1dd839d680a945c679d8dbbb56c104c63b1733cc263a9ca6f9845ea2f3aa1a83da3b20f4a599e47d4734e5b3bc12141c6a9d882b9ed454889d0720cf1fc4d5530c7e0075047d7b7cf29d27ca5a6f391326b5b05dabe779b09d02a17cd53ff151bf9374884f90131c127114c140a095fdcd74830c20e92a3b7628192f9619f36d81c9b270f8d02e95e99815c1f79b37e8f611dfcb4297adbf36265281b7a653068bf4322717fa0d5be7f4408623030494db4a1e30049d20355bf7c6c7976f4a0723c382ae70c058a4e3844d4965375d6cb19b75899f4666225f62ab46b8e99a4d18d0e9925e8584f121acd668d38aa2cfe218cf7da67346eb6a69919df07a845b2808a2212732d0d502f87990704aabd57639731930388849e9a47f56ba313ce09c0593f44ffc0e51a196130473de2ce225672cd52daf864c2b0139f009564961cdbdde3b6f4038b28c39cecb7160d5eb6c4e69278c7ee54d0a847b07d19c5eb659678c7f28afaf16dd76cb53f064c6a3bf95185309e33e49874b950db5defb68dac67cec6c8721d9531620e41621d18a0cad49b275eb6c94a4ca0170d64062860e94f97b70a243d8fb5267b5a6ec8e1b0c1a735cb83dba9911b105d0232834bb8245f3d0165fd1014d902428f8402885446dd7cdb8099aabf2bdd1a715c3533732530043d478d4f2a5a336fdbb1e04a322960a479657ddea29b01aae6e1b8077bcf1b402d83fc4acfe9919244af868a13905f12b570ea44750171c2fd3ae5eff8d284632bf44a9526d2a6576e210a85bc30cbf16a4e3b86a0b687f66c5b33d1d36e3a5fc3d2d3ac864fb6c33ccf274c0dc46f556473f7f68309492190e61d8a2fba3c1618211571cfcd6debe008100d5fd16c7bd75282c62ebb06438285ca29c670bef6998b3fa8485a4a92d14d26cfc586df651725639f4896bfaf3a7856568d4e8945b654b0957db00771cd98e8a445f1484e35e0bafb73c490aa7ec31bdbc5c61f6bfb168abc2a6035205f1c6b9ed9f2838c73e8f362dbb641339b77bfac00f4a24441714e414ab5f04c3b7317e82a259701148617ed921af0dc06920a82d3dfcf19ab887f76fee062f65346e95abd96c303d527a18557ea342ea04a72120a4d178078e49605952ee0714c7b844f361f3384c37398b350d11166d01131d9a4afb06dce7175f48db34a01048aa4b986e0f0304c3e147d26f0d425728828a349e2049163819fa76e28e94f9f549d0afea435afcb70454f3c4022a5bcd3c9d488e55658a57fee49851f8c2f285b347c7c59c2c05ed5e72469b9423038789adc3e3aee0b2e136685101dc70997a992246e3c844458dd44de0abf736dc721d0e9e7b2ecd38bbdbc9ed8642c39927979b9ddb5b8d227eb471eb48c9ae16645cc2d74eadd6653318733688cb6e927779e578def76e33b62687b5d8e0f858ae9e63d54e4e29f979d14d5e14eb9f7c406a0be98afc2b951b5316e0f55111fe802d07bcfac7369b6774f69b285bc546823105a8684f50d6648961f67bd9466130927bd53dad96787ae91a3ce5457fab759cda197803b6bddddeb4e8ad70e95da2200af4dc378265192eca244c6a46acbf8eb28bf24206f7378933833942b45b3106110130a29b14e1db17706c96e94b7e3c6257527ac9ccd97e20f39ec37d5b497b38f6454ec0536d2f4533307e01f143d302b6321807f34df5cbaf7ceb22e888325962018b1df5e86c5cbbeb389d455fe22590a9425a6b90a3744b20dbe96e118975d9c317de4f937cf0f510e8a04e2fb6c1ef7eda94e88fedd33a70b705c57753b40b8bc7f2fcbd4225c3ec47f9d0ce8782bff802e74ea24c8e317053546173fbac4e2b71918d145e4f506095d9bded531bc1edc120f253a29ac6fac356870520c70761b5dda0ac2bba6a1e43de0d07cdfc8e4e64aec762ab2c407ff60417bc7dc9ab26b7cec98231d9581807aed5842cb12e4769c1f0bd8d55ee62b593e6ecc279894a2b098b4c4ecfb8eb399a1341896ef172d59c0833ae08ae17cdc946ebc745b366556d329345518c9f7d4a9b1194a1d98b486bde7b234687202722fd170ced86b8b6c6ea157a0df9e6ce026ef3fe5705b4231735762fc84c655a882562cf86f5f15f273ab8b296edbfcd272e1dde326d1e200390e41786e805e60b2e3fbc15c37ddf6c651d2f7005ffbfa074a15975429d20df83922b56d4cfe2e8fe726ec95aa07eb5fdfa8b89092bf8592b4a16c034879cf99f0c733f84f9fdd0fd48aba0f6962e1f0f3ad379666a66f2feb41dc2fbfbefcaf3cb7c300868a30b1873447c2da43e937653b3f3a97636278a6246ce318d30f548ffea75d068db13d94f4dbc1b6839112018cb5bc2ce09591e13bcc834e73e6ca922df15d081958802900b3ed7209e827d8d8f853fcd8cb4a4ddf790fc56fdeb8ad10fcea77a4dc441a8c83f731086ba14af53ed8be9e27d7b4bd77f3e5e45d178c9b514cb187ef907e02a1c7bf3a7f816e4772dd8b3a701adcaab85f5bee3a65ba28b4229dd482bfd4c4e3bd12e6692f8dd4c3e275edd50aba7c34ee190be3118a38f4fd6ef386ae67b508db36b52b8c35775f0d43336b5677db8406f4a274ae73e9f50cd5cc632ba50511828c16e192cce368c5d359d8653640871f0a964684f5080e7502cb628c2af10be9a577b95562213b41b72656a6684e930a5f3c889596a5a0b9e0aea84c9f436108f2d3e7268fe0f384d5b6c7d84c5ae2c881e412da10e6dca9133759dc76ec9c0f056718df01ec366756f695204d0a20c5fefc000f0569e94897d08601f6b6c2206d5f978efb6d8466b668686c35b66d0356d20c2ca3bbed9d88a610956b31fe859cfc7da3d522b3ec88f953f6862627947f0dbf37851571947dd137ef460294c8dfcd0d8eba6e02bb9a380c4d0e53eb32fcc4232569300abe1ca8a3ec585be84c095f5f85bc2a8c8379453e742ca97d47b4bb8e0500ba1f1904c41d545fd6fb645746ffb4e3b03dc9e2948969e10e5ce0038fedf335d2ff71b0c8548a63d734fc9a7b2da6ea9e598e90817cb5f645618d7c1a5d5cf1adfdbbd127fb5e9950ff1fdb71a03ee3280982307fea728c8c148858e1be5b2168ed43705330b82e75ec8d4a5292b263391b12c11825cb6e4a93dd433b2377308d34faf18d8bc24c8ea128bba71be9d394616c1ef6efb378cb41f0264346ceb4f644bb784b5ef6b7b774dd10f21f80f475f16c2292132a3d3168c1ba27af85b7ce999b549275d65bd5d1230dce4f021693d0e33549d347cae98804bf7c9c88f332b95329eea809ed06d2ea2154816c9638ecdc84f100d70e79d9b453505cec40dde808c53127e7e21c5f136c4e672237c56c51563a3b16d07e7a9f11a856ce2fd11293a02a1266e352e6e32196e2c57b4c223d251ed7ce8f710583e15d1c9dfd484134659fca9a7ceb972561b2d87039894a3803d5a0a7f7e9de022fc7c392ca65cf7b71a7bfbc36be0bb2e2d6e545858a76cb11fd891f8bc5b7e3f5654c5daf08a2b417a174b167111392358e500ca8ce001d56cb88e4dda3c80c4818a3f5e44cba7c08f0d5077d7a5e42ca54dd19a99413030171c0efc58670270791aba249a24c024ac2e3ab26855a42471ac21f2257e6916fbb34d88f25f02454e9d7e04dde6c4a72d465f8fa7a73516c6865713ed0d3f9af23ffa0bb563f6cff0abfe2443e68755a0c87c8e93bbbdaf4135153f9e686ec90bcac09f3cb7f4b3484ebd7026c3f4b6218fd6f60f2f12c8c3cb6c02c92b034f3e1a89fdd715e01527da43a80f8d0179d73b2f1c09fbe2f44859924e2110209c9a6c3844ee1f4c736f51babc2cc59f7f7837e12d0c6a128a1726769bc53b8dfe1062defab3eb027f7ef055478aad5d7721eb54dfa9465a9e3e0622ace0cc380601608a91e5c753e280894d5dabc2f5c66437173a3246db6b36452def6c6f024098bd065b30b8de5849e0975eab80ef5611c4c59c951b6b764e9046a16acf3d4b62ab2b02bacf4c9370edce3b1b695bf7d97778e64986f2b46b1fafbb3564ab8b41a37f19705afc7f09089a39c119dd1ade7a2ae6e0199482cc27eb2019886eb098ba3281047d043d38ba8b56840e23c02beb59bc051021fd2f40396a348da42a4e3e9c6760c763e093cf3b186eba53b7205ff2904e3e86c30dcf958e92e20dc94b91ee1440bf281e4807ea3c09d0177384d5c4a680ada037ed62b6ec4bcc0ddf4bbe867a5337214fb209ce0833fa689ff5239cf252f9ebee0c48bed5d12347eddc3ab0d08b9a76786560e5c0190f7434dcfb2129876064aeab05e7f71c51b8b9497e762d22878973208064027986a2ac188a6fbe7f5b869a4cb0893be4b8dc8a291beebaa9f5ed4e489026e3962acdaab3c12d0cc1ed7f4e004c581a42c8e288022025bc9f218e60b2cae35150d665470683c3bac1c5925ccb738df02510adadd5649aa4799a08737ebbcdad233101897fa355d39b632c064dc8ef014e5e96b0facbf590e2e565a592049c6caaf8881c5af435ffa307a182264c6b11a4e7f73d89faba4c297ccb293cf6c9b504cd3a336896de4d17ef4b8ad6a94f52cb8fd828085a9bf65ac23f06a1dc6a488b963ebe937f6a310a9709fefe13bd00ec44d95f1b47c386816f99c4fd63ef9572a4de3529421b362c65a843fd7dc059766ff4ba96f2693dd2b44475e8e5128349d7eebd0ad278f8496e98490ff89a9ca0dd86f5ca9e81e1a345638b49e616f505a63ae10322a78ff9889a553ecabd082735c2f0a058f620931621d3441fb24bfcd8cb5d9b52503753984e78f7ff196be3cd1f62382ecba4d85d8db3483049adff2a5dfb5f86dd24fe9c5f9d24360536d3ee2d33cfee9e7179f3d9d1482ee97ad63e40e5bfccf9865d7e7066627b24746d9b74b1ddcb6452e746425ec8afef7037e61c8c74f930f35fb6b9ff73e046c6a81eb694bc9c46325d496478b39d58fb3663592766ddafa993e5c2e634ad640d127f5cd5379d1582c424e83f4e869a27f97a6a056b7aa1ebf3b38a167b4811699a58abef912eddbb109c2717f1786d9225331850cc1c4c0be3d7f6cf86a095119f4238b33c02e95de09eedc17711992046266c71b2a70caf914a34052aa7e53e64748e6b0b8454080c901a0e0321ef1f7e5fe70f0d4c82599412c57cc11b64eadf318dbb17222283a5758022a9cd2f1bb81786c4ae2a76e33f1f66c2dc6a1d0eae4d0cc7cc29b957cdd704b7b13bfecd6cefaffe458472d9b703091b3472fd14cf14fabe2fe47119a86b22a64baa92e343e0e1398e9245ebeaa8099c2d67f1e7f6ac5668bc9eb22bbc23dd57188edbe134cfc90bfac95abc0e4e83500edd866a2c732d3f03662628d6315cac838228323d3b3e80c0edcf7c5cf796a307eec419faa692f5b5136a8031fedae926b67c33669fde158dc306a6fbe1575a2eb49a43542277cda3afe5b97582c915f7845b0386d4363c8bc0f9df8dd20e346a19b3721f9cf73cfc63571dfe268207970bae668f66a95d36b73fff16acef32c6957124dcc517044efbc269865678800bcb7a0c3d363a1f285b3dc0e36b0b51382e31bdf234002989fb125619aef06079b5c2ab3510a39042bb9f86b0d56d4f45faaa0cf37a8885a46090001244750209076b8ff6f13c8b30a5f850ae09a79df40274eb364dced9c7592c17b3d4b0de2a5328873a76d4c7e53c1a98a16376e08092b266fe9d8d7c86ba70e7c6ad6d6fb8741146454e1f12e328532e4fcf460e877fbc4c8416f6e33ba7259c9b4ecaaaddb48cd8bd0722eb8c43cad73fa19719f36b405aad1ec16747c5d7aa9f4e36717c94d99f395708a9f8ef331670db699eb59e0abff04bc14b73fc6eb70409b2190b5ffe59e59a8069d972352e5bac15c298340cf2329594b62fbe40185b8c7b6e098c254bafd5831fc630278c64be167c2751fd016c8f7dbb6180ed4d6fda2ea52f0eadacce862cbff81f63fc0bc0f11805eb87a71af6f80f8f6680fc36c23b689f6ed1b6e15eec178e252be8687932f8ee1e11534dbdc362ec8acd7328fc238373cce2f69e87ea44d5380d539e43e005845ce32f547297f51472bd71d4addbe9ff1317abb2812d07ae05f6a2d4f8c3169887bf686e48a89c6aa78d62d573352b27665309eca3a7c0dc4add2cbae9a7f1e4c995053c2d4a7a7810d463ec853fdace332eb71e193f08847c8dbee457d21f21331ea8a4ff065512dd5f651b0dedf567746f15e13811983f5e0e224db9867d7687a281d696978aa81d5191df1018639d96e685a4084c4e0884c048ebdbabb6611efb3314ced945a913b30ac228c1012fa93c9da649a3897c015ca7de367a1165b69d59781bfa71415620eec870c33b3665ceed0048574d48e56793a730cc7ed409538f68353205f6f8d9458a94db28108e3f3e671acdecd7c399b21bc064a9da89709db95e2eba467227b20b9a6e4df9c180ab48f8083236114b84a7e52d7048072df0aec2a6b2d28ec9724aa9bf4eb87f265431497e78e449a8408c28a59c1758cc06b6c6ca290f3d94b8032c7e11eb19452dc2c1ddfc9e619b436b334a142dc4964b49e555fea5fdea2a58ba336f3af0569e1de6b635e65fdea5908f64896795749d18934d0edd5da0d6ffd4ee30605a68ccc8bfacd552e51168624f97bb31cd6dbf127ede93a69a51dd81c04f48956a3a746eea8fa8d355e4d91e5fe63e2267403d5bd64b2518c28d48f7b4e5bcc77820934acd8004b31c1158f59556b5e91a4a6807d7844c3fa0c63f64ac3f09549fefa4d7082ae241c137a3d29560abbf2de4b1c279ee379ad853b401c772f1edbdf2fecc15f7d3dbb5a81bbe7ab11b81f0ecb49f035c771eb07de0e5db30bc4ccc6a8d023bb13c2ee0c5fb51702343be03781c26a335a454ea8927990680e11d915f6f6c7b332d24901895590fc5bf30ba1337f2465c7ed7a4d50dbc55c7d806443c30d1a9249126dcf2a076310b693ed932224a40959277798957195913f8d0a5689f73a3a0b857d0661a38f27490c97bd1d52b398bb69b63fd96cb28630f3075fa45a5cdfb92469f80446a8cecafcbaeae186cb127f5ef055f70f37b61548be22fd864aad9b20f880e023e06234fe4928205da61bc695b1b8eefd3be17cf557daffb2c19370e64dbd6c7ee8f53d7b5499f2de58add48966e211988aefd4fa22c7baa1963745034f5e5154c9347ff3ee978391634c4fd9c30779a3c4270d6f27faf84c6518d5797dd45231262672ad11813e6fc84f705017faa6fddcbf92eed49401c435b80e8d22832661a46772f38f9401e61ee9938688e1af729d9513070b42008bbaa98193289874673c1651684957f7dde8308797393a4274bd75c001ca90b554726863355d5ea1bae00ece0ecaff4afa06fde26e070fe9c1aed4daec3a2faafea35200244b4a8670ed9911f535f3bc58c500376f55e09daf739a9d25bf21a49667f6b64bb64367ba8f8328913c3d4f7038084a7b15c9c7858f303a8597f2e82547ace74c267e477feaaf1489beceb145f510f5e55586f2b7f35d399a53bd0fe6870bd773153a7b2895b813bbe34332c3411f7376d13b7b34aeade70c611d6bcbe8c219921d0c3bbf7d048dd1675760af0ce06623f305872b8cc5aa9531ef8f344d7abb2bc65c34679e0163ab6b0795e3325dfb3ecce88a4ca7d5096868b61d28568bfb6a7b695ec260917de09af4e23bf19f2c5f4f4756b15a0eeb101944970955fbe857f09a256e4f7cf4c530cecc942d6a3c1afc81348f2b7cf010ed5c8ede5d4d611179cdd6fc873efb14f23e1944d3bfa2e992c92b451ab9d32bf4e4b09541c2448699fd0e45956937dbfcd5e7e601b0b94d2565f396b9418279fcc00abd4ac747967569be723830dcdfddba4585daa79d4015a4ec553582e8d0e93df18f9bf9a1dc3ec7022652403ed1a31af78dc94fda4a4b83fd8680589d0f0c27222da6","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"9acbaa659511a2bb7995d8040a67225a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
