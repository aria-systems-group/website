<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"b898d04dda72b7f4bdb655dcbbc3fecb54916e004912d9c91404b52c86149f4d20c6abcacf98f760b2d6a20ea7c6174a5a1b17078a2901426fd01ce67c679b1704ac2dccacd52c1e24474f462c05bee11dda190d3aa7162d933cb42864e3c464046905dcffdf2fb2b15b2f56aa1aba7c5c90432874dd27f799675d03af01c13bb5079f7056abe3c96cc9959e89a47bad38508192863c2036f4fb5b37844498bad8a410eafc6d8c92a760f157f230cf215f5b62caeab1c27224b7686b2301b5094e565c8312ca3a4924a747918170ef6405d0f3beddf3966878df35e38cd00c41532bfacf69c513cb6fe9c495123ca8225a1d91fa951101dd6a4129e6bdfbca2147dffcdb80b1ef6a6c8b6b56a9ae91689bf31d8d6015c756089f345f9f5e6c19f32e029b22f73c32437aac755e617469207d11159305fcb6d3606cc23cda2ecef007f9d78867069612ceb80bdb24f27314bb3e88a587a1118dd824a1c0a11bb4ace1e837cbcb2fab72bb16d9bfd65b1d34788ac12e923ad04b92ec38c43fce40caa2bf6f71afc0c08553c4f42c36b533a86adc44a0abc0d8d24483a5555986bae326bed515a85b4f4a9e71587c4135f7b7afedb87b14481807c1f04fddcc73b1e740e74377001fd5a2b36031be6d94b232f14d52eafab555d3320ec511b5879d117c95e3521bc6cd8023fd5e71622c34aaabef00718167cf156aff4af1a3c25c8063ba0da8de99102b8c5455578a26255a524cdb9ef92f3ed887488fb4e822ca1f3dbe3aec251cd4d6fdab88e531bfe4dbdb682a7cfd94c8fba4cfb059aea2788c2a9f9b7a32b17c17c4689ff7ef8a66ee428bc0a8e8fb9bc48660638f15d3e0e7b4dd5f233aad41cbef1ee1326844016a7c6ea63da39b148636b4bf861f140d827db9bea6d7574c0e3f872976a44f625bc1a5aa1ab6d51d22dcd993343346f6160036988841231e6c0ab41cdc55c00482ab614a7748a18519003ecbd66274f389361d0787029127e445aa58b41ae857d50c68eb648875572e27731113613652631067255386ad9225f8d725d76f714ee988fc9185d667c2f661d63da3c8a168e54b9acce2130d297ec68c1f06dc73880f499361bef11effdc9ce906688fe2c9109af24b909881af5dff7044cb7c1c72d97cb241480224020a6dbd7dfe4df6a58bf3cbd0c63bc5abf1e104a7a1d1ff129e8d2dfc91e53a5c410e019f7882e6e51903d835bef0ac6ee2d3da59f1df4bb0b2a163c2b9b5cb0dc53b219756be10d4e230010869eaff4e222c2506db2558cf1abfff143c57d22db3f856de3553670d1cad9c29da0e61af7caa56dd5fc5ef3853492ba6328ba5576e538a32ef5a61f27dff4c16ec1b132d3735305f2e412a53704f73d6fd9465e0644dd5373b66faeaa14c2b5c339c3e5ba8e956762fecda309a09fdbb027ce144501d3d2e60e536ee761ccd992f7c402f570c1c4a0dc838a7bc2948efea691b1947ea78eceb12efe6fb5df39d685283e720ea9c8b3950aeb7a33f34d104269acf7b4c47286a69407df2445c5b8c62bd8c63327214a7bce0f5ddd1765e6427ae1487ecfcfdefee5bfd3a3bd8927d55bb7c401b1913f7930e673e939806db8b0326c8ae5f727bd17ab71121cd8309e02f2c8803aefba33d8811c98a399c2b600826e5a6c11b56302bba74a45fa46e9377471c69f8d68c39d194c68e5626b04258d27d25f6709439e9fe5ff37981920d195f498b65431c225f9b67ed75872d1b15aa64ea2ea06c8b1dcf18b5b1887858d34b4cacd549b6063b45f8dee02d99c0e0123e03e44f6a35395994bdb74afa876dcbc5f812e8080599e89b93dd47179bcecf3c67662ea581e35e1476ab94c29aecad74f4c341e655cee18535c3def51125aa58279549c1c467d19722a87e650d470cb1bccecdf7877cb54452a7e65c7573882a774a2bdb7d9a5f1403093a4d702a301fe35fb97bdbcff3a47cfea0264583831c03024e34fb51ff66523d828a805ec42554ddd7eb0ebf519167b6e3c5270805d9d09438471705f044531c22b7f721315e97f0c205daf09c7ea0b6ff5cdbea573a433b468afe6ca7eacaf3c56ff39e57c4e42455c7313a0be06f571a5fae461493c713d13a3553a5b9f896b46cf9f4d0e095cb0669787994c06cde29a455d83850dbe07d16f89e7a7f224efdcdcbe6b41d76dac88131320ebf0650e3a2b562f49135712490517a8a666105bc600ea708d830bf155040ca9c0a82bc6133f40061ab24a3d42b72ec64e3735fff877180c79d6ffe8caf76376368cea7451543ec9cbd8df70b28263b87ed01f8e9284f3d0352b478bce840107505397435beb5b148e10e33f6abaef6308e1e493a2c3db395ff5da265fcaf2c2cd11570aa22c61c98c8b7107f90000275ab9634f616abc3a07f6112c674f032532592c7a9e2a3ff0caee4e13e807cb60d9d4a34363535b4c0f9127273d7b54ec512056998dca12ade7550fee317a91a4c4c356ebaf7eb153ca2ec9f67748fb17d5257a89f0bfc68813eb1a08b3799704b0c44337b42c79dd70ecb5c6c4549cbbdc82742798362c1a3faddb1388f906d1e46f513fdb0748a6b9a0816f17668b25c558e4e2a50d17241dc375e18b1b56f99c6f40c15a1c2206e0443452611de668f4119e1494c62666d2cf05a823051e771ff2ff28cf7aaf35cc91ab57861cceef050df4515f33c1879143b280a74d4e59e0a93491464ed8e7678530926fc392726e06c8988cef920513e8a05f46b800e006b8bbb9742541bf8a44c60a8ff617dc3e7e93717b0c6d9fb8efe8d72e788ba2b41bd845e685728d7805f7906f8305204fd4adc7e6a9a22701697bf9c3fa348c7b9f2da79a2f37278d880e124871fbd7c42ac4aa4a616b164de762f307ca544db00431e48088f408e12a447a75cb44284144707cdec2fef6d386fba8f71230da743f4ee2be6f36612653f42a65dd7f6e39a188f708fcd32cefe2e73b98bd8d811d2bccc4710bce0ada6f5ae5aa89989a90023f1aca17daa8d2ebca7a2942dc24eb0fb8197c111a8c1ea1b90c45814a9071f2762c444f5b265477288a760aed1eadd4cbd0c1c55d8ac537f71b39c65fd4c17d3e4aa11c59ab6b253e02252c049450b3e85b02d76c065914c6cdd0df6600bbb454bcc6fbbee4a6e1890a8451c3c595e4532618ee1a5319d711ee3d20914b583ecb8c589b3213a74d5670783227dac6b9719a72f794300af38c2d79927bd7b751ef9432a22e5666631d33919572c7d304021a58815468e1d62abda8b8c96b347641d2f6401dd6ddeb53e0fe2e633c4bd8038c29d29117417d4e698058c7dc9eeb9645021fc54423e26ca50ffb37fe8d1b2d070447d841ff122a46617c9cbd11fc3f2561a105630dddfb56b39c5a8bbf8adc34d8c6e8646b0d78e75881afc3307c92721f4b2d09319d1d673bde8ea6d323865b9290c427b1daa408559db46b62231fca63ad42cfcaf47a0babb4945be367101a5b501ebeef2c73d423063b2260ac92c51f371f33a0922b056790a21f7850fa4459ecf0fbeef3d2250f6fafa00a1c52a2a85e545dc7a0173fb23e5e004de2f040c23d656dafcfc7e5965d37ea057508f87be2a4ab7c0bc2f9c90dcd72738d5acbe0b512ec503dedbb351d87fd7bb719f3c95dffd0f561ad9b321b99c87341173f38120e71a35fbef77bd7cbacc528019a0efff6903283dece8f90aa00c874abff43533335aebf4773cda82b7d13a2847ab40e959eb68ce4254423293dc49fcf63f3709ece37d678d570e86aad3a900f9ad2bea86c600b6772301a633dde2f02cd71158428a2a07f16515b2b00a99f9420d24afa15d21624035e908f0d5f02a78ac1b2d8df64e0b37946bdff487a43b2cc57bcf4df5acf8fdfed2135e52ca0b3a56032a68447c694ef22effc51cd80cb59751edf9909f07e7c7012dc86f1e16e43df0d2bafca27230ee3a5726f297c4334144c142b03ee918b30db8b51a35f942945c5352bd74c801eed8d63bfa80e0bf4bed980845093e758340fd2938b3e073006dba8212dd3e0c9782cda70b93102404130a980388a154160d6de84055e3d9a050cb79194a0330b2763ae7e062357129799e41211c8370e4be804f2d0954ec15370547c116b7c43ced9a8710e5f76fb33880efeaed556398886d738a68679ce3b8f567785666a9bdad7e88475f0f21fbd4f5dc0c30b8a7a729bdef6ca47fa3b51d5b56c8a255da42046f326bace97aff4f4de544e90f308626d963501447cefdc078b525261f85263216c6231c45b7eee3bdf49690f2d5ca8877748dfb1a9bff15cea10554d48d6d974782bb4369721e2c024fbce6c2ff2cacf7210d3b15cec6a316ab751b8f4202e878176280ec4a865f512f9fdab584baa5804686ea86f34629b014d9c570b9c49d3c509c15962190eaaf3a9d7a8394f53f1372233c763d6d3b322b2a85e24148a9eee1d798b8706d8101b1ea7e180a66ce47a7c64f8fee93ada6d09b93dd0d4fe079cf1a5c1fea8be8f191a26422c7759476dc8b72e6a48c7af86f33e0b5e5e6ae94f0dd180790b08aabbc8c998bf6975f8856338f91b41566b4761a79ddfb9d00859fc70f99fc1e0f5585df7c400e41b6146f44ba5c776a698f8d0fbb3abc3e7dea4455c8ba166f83f94ebf4da6fad73b6419493bcc4438d2b7f301903601e4245cbcda13dfca04f887ee328c0fd5959ecd7b9ab8a19f6565e2911ea0abc0a8e53468aa538ba64e2e043e190e4e6808db5156f36aac6dea42cd2b50b430019c043845317d55d64fb51b0b113c70e0adbc47b607c2c5bad693dc5eeeeeaca020a683be3bf4d14d8f325bcbd64486c17b6bee84ccd194a59af6898cf4605b621db37328e1a3160c0b8f444e06219ac5a30bb7f3804235301aabec52d186e033849e640fbc94614d059d9f136fd35fb82ebebad468c15a3d03b02874873d1332667f3293a49cde0e30d372f9ce241b4ce9f3281c365072f80db6318c9d18121f2582f3a5fa60a29e984d3f12f9e612059c4bf8885f288bb5a4b661eeedf680258752a3298fd9425ddd26d76bf72eea62261d89e94472e5f5c9b6c0d308cbf272d3ac034b31db37fc7b6e9f3f70e7d3178a129ebccd4d9314cccc1d4558a60591c650cd3a8ced53686841c65b133cd1804063a4e9072f1357284069eb2d429d95c3dc5305910fe65184298aad41419167935ba8cfc90f79b9b44966029afafe565e59c71f59302b26edcf3d076e4b42952dea0248a1339279723bc18b1e1e0adb3ccda6557eaf6e2ae751a286a09893510e4cf9737d3b8716168d221a215ed47a7832099a5af4b96439f3a7d9c7576f525bd56e22fa4e321fce6bcb343067e51bb1c01fef0cc1ee873c460b4e95ef034c619ba2f81c267eb34e403aed79fb45fd4af37e168e901e98f8f24930e30e3714cff8ef0539d3eb3d5249bd4da660b96887d3ef400c7b19c3fa3c3f3890abf0863c311a1f4b514fa68d3522a13bed201d93c820beb5a7ccaf70a42d7c5c148792083f8d218ea6397b74cc08a938e41a49c09e2556f37d7b4adcf96a45c2c17f8995882ebfe42c91b9aac29627680ec5358208be2ebf89426915af8eaa431aa2ffa9aef236783f3a6433c4e96583608416b6ed5f6e2a899f55bc9761e43a211c280e26528ffec806cd6c33530e036aacf7f609bf35e37436c7fbbaf85ef0cc6744f03003b2e5c3d59cd77b2f2ebed226c954ae3affa5dd35cc374a47a0bbc9577c0b400d0f201a1970bb9a3de8b66dfbe130df9dac8bd95a4b3960ff7f1e79384a00e6653dfa4d595dfba3bdebd46d8a83807219cf13c8e0be97891717f58d9f840a17596040bf83d24c99f143c11cbb79c25a20d5648e22f6adaa23fdf5288771737c489954c3a75f0d414e504451db7df4e298d7f2109687d802a50488a5a903e2caf78c27d973414ca8d367cafcb1d475e8febdf8f9097131f427892409de86496fafef649bee5e8eb06536163fb4b639127212923e8f20da62bbf4005f1ecebfd590f9cc7441171f4f271acc892d1438de4fdb252302a8d89ffc02879ad76a92942a5982ff949e993f9e4dc8879dd68dc7fc580947d7c034a59103a2956b44e0e367782a0d44275370d13dfe8215e27ff6df28498dd2787c4855af974c5c37006ce79f08ccf93f4bb74b22a3029fe8b893768d35ab0076ffaef03b932ed8129b8bca75f23eb37411abb235d15ca5965371c341b31ee6ccb959c9e2148094b979e70b64ec8bf6b3c338ca545ac47063d7cdcefcfaafd95600bad6960818677eebce909bb54bf1a394daf06fdfa85776d29917305c38b410e039035d1fa4694ca00de349c7ff5d816e9bb7f16cdc83daa0a5d9838c4cf74d222afeffc0d2f71a8b290b581de1d2223cdd889ac65ab17bcc4dd0b4380d1fd01c489eeb9caa39a6d4dcc56a42edb12822b64da3dab22f532be0a261798e9ccd8a5f7282f2822dba24dc9ab6e0d40e67f81d1a203ad3b67500b70ba10aac9590998125cd83ca53e80c6c2a82aff47a9513a906cecb0680fd44cabef2152ae7f487ffc0ee25a535074f6799d1a3023d0627faff15a209eba195b48390a85bb1adfef752dcbe0410a742f0d17ae07d4436efe555a72f6b65a7ebfad76f3ad01134778357ba7df80c42bbbd615a59d13b7d1130038d0ac8b814df86b0fd84d92d3ef8b3f2f1153b14a0706b76701316d8c29897315fa247bab4071bc4ea3857f38463f897bbee65cff28986b3b6133e2ce3771203e3239e5328db3002a0b29891a7da4669c0de779044bfe64bc56097f97b3020e1a9f53a8756768b8556e3ec420bb53aae07dd298f4c2a5e566cc5d1f7b393bf2af42d0400ee5116128621f506b35a4f0a5abd2d51adc93b296fd8f1a2c23a1128727df9c6c1c3de365c3bd43d46d482350a7d4a723771ea3dd0e06456f79672ee32354080e11ae5231157ac99e95dffb269f71219f4068e93ffebd7e824fab110763bb112381402c4d1b80001cc072f300956da6a2e0e79d26551b28745575a92de6879ffc5691aa9c4eb94cba1e316fc663a9928e3755189534f7c6c3dfb0b3733c9b45f360e5cc17b62976bf58ced86ca6437e3c232d65e285c72c623c91509fa7c86075c2560e47d064709d6e10ed741c90fbbcc2dd4a4d9f8e237918f02dbc170c120ddac794cbb6e32e0e20d21dc08fad49bea4bc8748901af7177f68f6dab7d3527d1e482c1f16471b8aba51277b75076e3e8cc15fbbe6d1f88fa24bdb3101b22d977a8ecd1ce3ee284d27a63c33c638afe44ffe93952c152f96f1a9efbf098cccab20afb937449f9268760624925139ad59b344023c00c352f3b1b8b7fb845f649c7945221a9431520e20d5332846cd33d6243c3741266f5f080fd2cc2cef1719a1b117ac8d2ce5fe6bbee068b7600b31fb26192c396a6f9842bf781e0526b21b9128b454bed8eb9ba865ca9f3546bbf694e99e9a3918f84d1e85c7ccec50af12394ff1876126261e9b24db37a719d976d9979abaf183932cf5290f6a5df7fb1414e67a88c78b130b97343735e71f5e8aa34e3ee88e2207ada6a0dfa87d441bde29c9da4aadcdfb8a787feb3adf3f41e5d662ef6be67bee196be3686a6fc495799fc10a2677a92efe4e4929525fe871033c5e098b4f692ab5c75b3b232063afc4aafc4781596a5caea4e6d95a571a3dc34394117764239c49278d6d5cf95213946267f68c2eb78c25ab2644abd9744bf732fd9a6ab1d270c230cd02ba9316814f075e5817e0f666d5cbec427c70310bf1f403242dcefe6613d43c5c81a06417221e9aa47f9e921c2babace257de0fddb9d3149ac6a474619a8ed56c0e8abf4f2653ce4c2605bfe2852473bb58b3e84dd0f96a030e206198ed233a950ebe062eec2b06be4dfa59de80d8a992c26ad31c223d20bb163849ae285019254dbf8d729d7e1404d38fcaa5ea213374f2cb1a038a84358f4f8e4c2a44c6b8838fd3211f17654b4c4a1cc4819edfc61cc5e7bde2cecab5f4c92d3a2b1600fe841cb367579b1c342bbb5666ab101e7b7ded02755bc319a3772e0fff1fc01e34b503c00b551035fde832cabd0e6bb8dfb90581d41000029a25a9f0d1c3d020cde47eb8dc90f6ff3f89fbd3bbdd0cd6e090bf476453f8e7918dfd2ffb41bdde22da8a4f98aaa7eee8172f13cb1b7862ac152149787b8f1af2c231e861f69a1682620e1b174ae6fb6c12235efaadd0f44d26e027860e4f23d2c463ea625c4b18eda64f4b3d042783073819cde746f3535c92da03cb2320715df1ace4fa01ec2f1c5c40729273d2c771b3199c138773ffbca5f98f597061fa541bf2da283397a163d3f248ed2965c4a180dbae215321e9f43e6b61225100ebfc271a4f94886bfd2dfbf2e66c502eb704b6d36fd6f51949180fbf06879fcd6df9a1f76a39680580219181cc42dc3edd6ea8982bc86674705ed000203729efd970993cc37d5debde04dea559a72ba2d47965be293294fc46e3f84d456d208c5051e4c1f7828b595d8868726d1303f064c8ca4a198a4486694cfb139608035d7d63c2cbe5453ef077741487cf9f9bd254730da5cf24edc4ff4efeec66f4f8af2bfe14470ab2461a04ebfcca9d8d403e4a86c18361abb290d61baab1712c45aea2ee7143207c05f84249ed782bd53ce5fd499ff86009189ce432a027c1290b5364a6ef35cde0b9dde4e61872553186a4a718ac312d67d07e4f3cefc68727b31352a56409769f12e169a3a50b875e5331b67ad72b8609736c32ac9e4cd63a39376eb67b0e9e36f28ff89d01ff2b8fe17eb56fa7231392878b0021765d2b4288ca0c861bcfc7e694cd5fbc06e0ec3bd318c4cdf86fa56bb2bf5e707365249440939e4c98fcb02de1eef9544eff27bbcf219f271c23c63da102e559f39b7f6e04f80031857ca73f3b137c72ffa1830a0d64386c0ee4b3abd7f2e5510308edd7a04afb17f59f3fad1bd9bcb0e9eb22e02424b3aa8ab4ac9db3c84d4ce98d761a3cd2742f0cea43e43e85e72a67c389235b5763ef02ea8d2d081f9a050a85d6a57ee2ed2a3726bb8dfe0311baa4d08725bf227f2487c1fa7ae3019049c8ddaea7a3a5625a4a687e16f0aac99b48dd391316ae13de781d4b1559b1cdc4a622bea7b37feaae2b2adb93335ad9b118f9d048480e7d4f7fbe361b884d5a8bede58dac8623b05c167bb61ca08f61448babd282b91e102273ec0fcd854762ab4a947c3c873f41b4ee4bc455f15b7eadb2e5624aee3be824019191771b4f4fefed821874ebbd0eb01b64861749b32f1f7096c79930cb2ac38e365af197a625716c9b05d55e43d07a4992cf0fa043716e7fad6c4eea78ae29301669c77f1811a7cfd8eb0142a33d63dc67d44040dc2c9ec26f8799d2fa0046332e4775cd19281680e4980d4bd771de03feb110e2a5c8c9efde4dedd6336afec19e20198603486c499b873a1231de160c3dc00752ef87701736cfa7085969f572fa344790c6262310c3dd0593a06f9ed27bf492046902d8d17b9ebedb0968006504cd323a4e8b95891191ac0cdfd378b30d29c6992e2ce159a5929997cb557c4d0460112a8eec1722392882a8dff0b7132f34fcd9d008fad859c22cf20525938e6b9ae1a095cf1cf9b68035d0cf237b94db1470a0d1d3cb33293c2a4f1604d6a261f7dc8c03ad0f573a7f75395c5c7cfc0ec086fb2876942cb14cabec36c21bbc08cd54463293852f1e7595d520dd9145802144572845437b0f4a48cca551cf27bb513522aebca522aab8111a5bc69731a83b8bf5089ac40ea6d82c19d65e80a85b530e801188c6692beeccf783f2603d6537d2cbb6bd5b6ef8e431d804c13735198ce881550f3b061797d7008bb51611e4e44010aba1c67f8d3aa72fbe985b01bc9ae5e9bb6edcd539918347142c247dfe7a9ba19f8f2007b5a42c56cc49fc27b875452b88a092415ad593b078e0b0e533338141a68b091a651a317ab8741c11f70ab2a5f59da47a699073855752ae9448bd3c20b20a69a8fc4a9eb2289f02f8a047847dae09a59b24e6b7c2d31f172c699279c356f10efad4d78f860fcce5d842a29fb5f80d53f32a8f55d86f94833bf974fddcfb4f18434f61239f71228d553b0218900d9e7bda44402786069ebb0d12c7d10f419961da8023bf098dc407e15f76c47149e05c413955566451734fcdf096da131d244595d3b5ada9a7a84c4a0a56ec6473f526f8006fc9750429c72ca2d3f37ddeb517df2627f65287c8235536ff402db71caf8f9bf775c5f0f2738e04367d16c38beff0bd41558d45a4bf624e5c1d76938bfff0f688fcd983481985e84472637640db6d9827a3891a361d2c88d7e0422d7518020703c96a5a4dc6e4e89aa8cfa60d2a35658d3f982974aecd9d49b002e23eb5af6c9eedd4f64c8b9c4e32c504aa5c8ec6ca01dbf5d8f10badff1a5358b75dc8904433601822bed2f298958373627527028b4fc53d83e09d1705a9dd20b1a625c4fbad1872e0c8f5ebcb29bb4dd162837a388f9569122160eaaa72e5f49d9759bf4bbaf6face95ad69b9a4e2f87899d41f31be6e5e5c0a527d215a358fd382f919f287facadac7d5c0742b6ce569d40e9345c702c8877fd80808d280bbb88ac31ee21a55fbd278c97758e304b80d35039c9fbfdd1c157315f4b1ec25a72019a80e24380662a163911a1e398a49c7bb90888d1f24d0bd751cbb7fc036804d5eb8c8c3a6b809f9bee2f0550e65d737418fb509ff19dd9c5eb77cca0d17d1546ff483b466560b51dde416a81a3b3e6be0388b966af547d4d2ffd9a2f149800323b3d59f7d5c5928f50dbaa10cc7fb3873bded6a45046283f89b1c4f98acebb8eb8e82e348325642483200839315bd9d1f9a075e5f39754f18fc09fd026775cd811938a289d5add2f5f2546c64c1d6fa49571b7da64b344d98aa8ffc75e25334860224ddc19dc0219726ebb75a89b91c06aeb865b340a1d83727eba4157e03de3efb7d700878473f28ab22a8ac316880e81e41fbbc81704e98b2ace79830a837f44dbeffe1c1600474fd66459724e887ca53a4bf6f524b5a95b9a0e01caff4448621dc52643461dbc21f6008a4d23d2fe54e71f56c3d7f7ea8ed8ebff3e07dd78f247f3315ebfb1f2a1291996149eb9b6a8acda8a51e97f3352ab961492bdf95ce7eb053004dbc9238aea441cf9d44107dd2f23611b74fd3536552473ec52105b4ceb9a8ed0ca7f67bec141f56691aa35cedfdc7ca5f70814a246552039a300246e554d1a32ad6cbf1c70369f9e025dacefa31ca398f9af3ea8c8e8e8804687bf85e41f5e6fca872a1d2d8e33cc2aa4154e04175470ffa9dc76584c16b5074c38b75e2a8ccb17c04b49c85ad4e1c9f156fce21416f3081f2c7ee541f26e4547a54bcadd1f10e05f4c9a2cabfcc2fa829f72b84e8cb0a0861a6c1bef3a4ef506753c06e22a521c37c7c8613b3fdbfd279c55b2d87cc8a707b575e6b1d16cca43b0b175669d863010e44e19d74eaa651482d47c5d4ca561a8b5a2164c7abd90f341ea1cda6c5de1ec2093707bdaf28bc331aeeee50b8135742080230d8c18310121217ee4f9d22050234addf36f357ae89f2d741d4f3c41296d083a9d3fecdc9f9889943129c41326c2023ddc576bd4d02c2954935c799966051a3afb7ecadb4aeeb3ffa79b4b9078a220adc69330e8f23c16ad45de71b09c36f2509feabf299218a83355763686097f08ae4bc60da764dd6f16371005c3eeb8159f5f6257000505912635007033dc7138a09d7e62c259511f6d3cb308dfb794675b7721a8c70c68e1e3f6c4b4b98e8158f5d313ac93ef0fe3509cef9974090ff5a5ae3d9997f0f8f53a70939c32fb88cb49d196a0aeff3bc4c37313ff32c7354f4f5ee23db4db3b1075cbe5f4aec22ede4122b26440026be2dae7fa0950278477033663bc9d44632d21e1a5918ee433bd7b9107b167e2044fcad6a774eb367e7c71c65bb4ed5dc52fa200ce8c630e9c1f9a18625854a133cd64619113cbe932f420599fcdb030b5ba6913278b1bb7c297939d9f1a6864f48b026e0628eb10ebf72409a3978904bf28d2d288a210b270f564fb2b4607158bf1caa486f94cfe957b5e00b99aabd097ae9b3a48ca267c3f301f3d76c92397489ed581374cc13b64554c7815e6bb095d379cce18d7444357b7833b0f90e9b4b8a9430a6f61a2cb4f117de4f9d5021a05ecdefb3eb166345c3cc3625e0787d6c4986945aee0ff17834bc84b71eaef76917ea6b59660010809d230f6ccfcb7fa50df953f7cf82bfed4daa81933a2061313fb439677e97bad803795a77f68d69172c784d39d6503f0073e9930a782fe043e70329ff95d3d62a92ca47588f2bc35fbbf59358dfef2ed885277320584be355cb0e467cffa4b7e78e008d6f4bc174b6595efd89ba6f99aab5e02fd6135758a96b6baa368ce214e3a868a865183841997967c5f080a7e0e01355feb544cd2a2d98e6f083e588a97a9035bbe9d5ba80bb729e039cb0a76c7bbd7168cd59001eab64f205aeedbfe46599009d5a22e7582682de1610b79347baf53c8e32a7cdf8309e0d8b40b788b7c263486676da46dbcacb9955771a1c3c4b07b74685c39ec86327905f95f2db81efe3ef09285ea492bfa665bd2e006049b5f176b0021a7c2f154e0cfdd427dc483b1b790ce18e4611b7a8843f5fe9308a7c52c4fe79e69575fc00314174de0c3920dddb660cfb133ebfb380c8ceab68747244475a456a622df86848d957d7b8fbbd4a8d85b26dce353a3469f4ea57400073c42bddebf4cb162cbab2bd8c544bafe0129efb99abb209e799cfa76d59f4da3a06ab8a6441b96712639f3703216ec70bfb11c090a8ab3328f96036c24551644026988efb7c8e9684ef429683e9faf8f511883b6d9591daf083e67771ce1d50020f93a75684e2e65d1b3e6cd29514b3c91f76b40ec64c44658d7a3f9870b6d24dae568b46f3bda3ae6f7948f1af59c6e7413ba70fa25601e66c43bcdbb738725c6bd94472c88f2cc7ace9fc647bcd8264e0c99688c2852db57d5ca5118dcbdc93fc7cfd29ca004b22dbe7c954028f733bb3c7f98091dddf3d9ff795950616adcc1b509cf3ae202a0006cee3fe6f7e857699baf495acddcb617b748150726ad8306a597530b94e5539494b5672c37bea2a482989c69432626628472e2ecdd57d9d890629c780525bfcb263edcdc4350746f8bcf2587860859a5c95e99b1def3d65d32a82747019b813d79cfa1f9f8d0fbea9ca16b997615fc2c799fce4d9a7c1c94b7ce6e81a83926d109b434a53e95fb0966dfaec2cee2b89d21742259dd78ad948db49b7fe4c6ccfa09656758f245a05f61faaade38619a31cb19a9bae9ee1b9e226dd547fb06ed9f162afa936bd1264b9ed1c58cbe71e604ca3c545ff4d541d68b5a1b4080171d39226c179695b9edda6ecfcda6c902987ea22a469ee4390c0bc76ccd2346a13eb9c8b99635c6a4b511aaa208608d746712a182735f23140ba734eb5908f691160c517a54bf513a2c6b2c80c435f99144b58a2ece570165087d481755801350740715644fd482be468d20f2847e10c4968b2d529bfa846882e7daf8697a3f9484e75c90f33def81cc7d732d712f529f8de630c783d9e262c3dc1301ba320032ecbcfec9bbe2220e5dead74e619373435f37e3c48722581a171465cf187941786988ed6de0a1d478dda8aa344a919be596783ca35fcaff1aa3cd65e72f722f1d2a7b5904f487fc9b5b38d3d62e58594223cc09a9e4387dc741fb92ef836085b0aab089ad32aea453ddb073cc08590c2b249e93334a64f8fdb6af73b0db6fca9c2e263c59f1480f4cbf81cb91b425a40764b80626cadbfe01a85b6e23524b98af9bfe9e95f467bbd675a789013fdf0a4e5747290d5f6a875d9e028511047a3dc1e27dbc017cdcf7f639b171afff9b4cc992c44445b4d1e44c71a770364a870e1a8014aaf1bc3529b787a99369da701b93e02adcf84b1ed261500418d707f60c016202f197484a49a2cfe6f7aa2788444bf0884e62af71d18666ed787a57bf0cdea8fc3042f8696628b5d5fb49aad7c9ebe726d6d2f6e9af1f5380b8bce748d799bf6f432f08fb76e4d3bfdbc98411d9d1950c5d4d3638da0897c718d4eb1d3bba1ac13e4764273e78682e9c282766a0c6bd7985656513764aa7604dc95508a07ce51b9a1be5456be0b1b03ce8a34d06d78a66383ce3cceb2db8518ec3fb0d36ea57376b80999366478308beaed61d478ea1946b2793f2c945b7e362970b5d1474f9af82728754ffd8ee623933e6f445894cc2238cb6700228d428d6148894988e838e8a121717084083d8f1088d8fdd108c74c0eede7103a58d58a8f75fd934cfcc87b38454deca7d43c7b2848709066c880a8c6dd9cecc2d4e2d4e5d0e70606e4f42da54fea70aa30c094ef2f6992782bcd0952ba9c8b2c0269e3e3b4a4fbe2940245f4c74c4528bc8795e673263cf92803d856fae9fe4338cf19442e1d90478780440a504cdc81c82c8cdb1f148124d9bf3da123ecfeccdccf82b117cba11de98e2c57c211775ba73d3358f4b44b8fde8805040c08335af458d7b94bde52b82633bfbd1f18062a1b6d63effd1a10f02bde0e7c920c9199cb7d926296193a96c0ced92c2ab32e427ffe14d904130342be76cb96af77b9d5e80d7576829fc232931be44ea2d4a7fe4eed7c4f6f0ddb768a2583c57498e66d58e3e8dadc240dbb7932d310a6258512d6ab4a5de2ce407b8ee725e4772c87822aeca7aa7cbbb6b4f4a5fedceaaf02249e7a2aff7f5d61005ef093dc149ceadc54c992cbcc4d226b5422d012f0c9fb5163d85dcd26f0d8d0513b235cdcc5238854f13e0f117c9b3f99ffa830bc9dae5dc1b5fe35f7babf3a6617cf99bc742e6859d93951ffc6988f5366bd7a0f8f0e17e5e4af55883f87732cda4266bf693d61da56ea4c91b19c9ebaed8e36e6d3dbd6bc86a55e0e2bc37d2f473596f7f9c3880a2925fd357f19e25c28b67fee5930c0f91b826de8f50f3a46cf05cfcf1b70815c433b1d9d6f9cfcc3340cff82864714496c6225d1dee6e1148e866af97a55c23cbbf6da1bc085149e46d5d4f48c5c5a5434288e0d1dd2c25d1d3b8fa3eb8dafa5868aa414d41b4325739e59e642353a721fae749cb318ea8be3ef2d4bb1e18c318f5d825d62f5c5f1bfc145d04f68259615ecdb18c0420cb4f12625d212f5bde4a5106f4aeec966939b20e0da9532a687736fed454458e041849251e8c5724495015cb8f922f1e2ef93b5a4bf4aeb1834d78c1e73f0b9a562feaffda236fafea01a855c46e8ccc139afd08c80700fbf24368bee460957b9b195972892d39fb70caa718276def7bbc773bac1e3b022cf4cb2e70d426d581ef92c739a7a7f71eed683b90f107a17ad33544bc4b17908f2b9c24851e1ab544b5561b7ce977367ef5dab214a31246366b8c8e531822cf7f3df71cd5416067614fbeced82ff9aea3fe47dfe65dc7502d4dd1972a5aa4f430a73ac458613924c953b42a41074a1fc16e1b0ece0f578fbbeb7ff5398bc238920ff725c22be170c0a1ccdd93bb4332188aa8d9a7e990267b77dd36e70c574e674c73d1ea71247f4ddf3b3634fdc201ffacd1765fec17a9e9fd71160a9fc1ce51c037e347ca6e3f8c0f8f149fee4362abfda98045de47189e0a6b0709f2e9e25b38cbbcbbea4a634d78b93025ef652be5c2c193443b8315fb3efca9fbc8da8c37a798094473474c020b3b1bb94829273ddc5c3a52e293e2e3c1f9f5d4242cf4a8f5dcc87f4bddd4e73c2d850c8afd4c554d5f3fce066daf232b91ed005c4b2a08d58a40b71f5cb735955d47c39c45cd1564954e766883b21a2ffd667468fea306b581db52167e995d1efd20f97dcbbe68942ee297e33214001bf40083745091a62e9d377502a3a5733b5eef3b3e5253ff078557acba8bf42d88b7a8aeec009114bc7f5a83da786e75736e63bb7a6551c8e489e432fa4bd5e2fcaa1002643112b7372ce755315386a144ff0d052245e2a11153e4fdd181b9b9437ce594673b8734b4acb9fcad9782183182995d6597e844ae75107d58dcee6f90480045f4ff8835fdce56304d43c94925123240c8726088b111608dba65d0fa9f86484a9e7aebab487558cc2665e38a42204b08ccc46d173ac02eb22f544560a4b10e244cb92f3cdec8d177a063076a549626ddb6191eb7b5acef61d131d53c75d3ac22cfe6c6485cf7936f001ef4297c83cc028ec47e5823357cb085b062e8eb2aff18db019fcab15fd140a982249dc3c0b975baa3fe730a8c509a295a76a60e4eb4ebacbbe1d41104374a05055fa9df9d8604693c9d8206a8365b0aeba143d6b51af07e1d35cd8c40d7e1ba1ca0499b0ffe2355fae46e5954c2fcb48be4c5e980e371fad1e9fb5de4ea14a758b8748614fb28a6ad6f5a5f7be56cf5881f40b8e2b9032c787a9d3ef8e292f2f6e223da9fcf16ad5b74a6f83abd250d95f7cc2cc53a6ba1e8fe64bdeab763a1b37da73bcd7396215a464838ad0846a0a00086abe95c1e0ed4824327711ab0de1abe34e466cbb87b45aef5181dd61cea7c035339f2a52bc3aa92efc86e017b7d652b80bca951f896b590e15b8314b93c8224bb6f3ac8b462803448cb2dd23056b5ba64514e772f74ce13bf077cc247cb0177b2925c2f35cae9954f7f5ff59940ee1f0f1b8e18a2bc2b5c1faf8765d8cfd44b5a414af8b60742335c2d617c8530f97245e628ec628d70fa951f2f3b8b06cac5030a2f79a9d790f452031e8c7a9f4078ebe65445978c88f6c229ac972cf248010d492ae048e332cf3659efd2305b6dff95f659404367f87d633589ea3cf470f249bb3a91248684527b43e5162c013cd20e8ccf2a8bd59487f9456880a8b70a00132e599bfbe4c6508bacbc4b190f6a17c7783f60e141ae06f2242138433d50ba2a0a0ff80234f838630e127d73c5bb0249dc535ebfb8dcd4a7fff8f7979339488ce0cf4d1e70b18fcab009d501df78e69f8fd1e500286196a46989aa3ab1794f4e19386b29da07a6d1e776e41c0e3a710a0860b7dd830c6b5f37edc77fdbe1708c94888786d6bb1e0e5e2904127c6e7d059870e450bdf729e2376d98117ba88adc16e586703f5b5de5f43268c053f47fc08c968352ab2beb9dcae2aaba2f3f28ff1f4ab8c1452768c7406fd420447161c51c7a1c9e52b06baab5e1f0c4828a4586fff4c1f766e5e0d01777e05a9836b9f602b01a4c031e2e2e649c425b258e404da79955eaa7a82ccaf992b6b12ee37530997d6a2e026296b2c2031e4817a4179d64d0abd64cfefceb51c8dea311426a8e6afd70d7ca01b358010e2e80b2bb0453624fe3cbed57199b91cbc7a9b024366920f5909117137627b83754f2a17e6a0953f98583cc68a46784130a58bfb7c70195c5b81293d8af73ea021fe0036046a1daf17212b25734abc45ead2be932db41547f144bc3f429b9c1db4039cb69da84bc2e4209e7b0ba0858933d771ea1d9955145d596f53acf1195311f251567d37ccdbfdb8d6005d2dafbcb4d4be266369a984eff9b9446d4b348772172945b4683605af4097cfbdf4db22f527e8a6d7474e8c899a4d2422c4243a428918f8dd6b2f1b5e9ab65cfa5c6028e43e88277f8575df134779813ebeb77aca983601023847b6b945c21084ee65673e1635c7b832f2daea35f5715296b2a6ab33ff7585e3ee7d18405673362dc61c9613be6a5c92204c5c8f058020dd4eb9fc46c20f1c19845a4f912e982073580df320c0d38bfcd3bc4b3a25dc89d3563e5291c1898a2a3f173585bbc18566ca8b2647afa09c9e8184334be53b9d316da8fdcd37f32bd329a1ae8a20b60f36e03344142d10a992ca7c56ddc88503860fb462f21d3f3e371f234ff34be1bbe6418e0dd2575a53a09e5b69f594923307aff4b89db95adcd4ceb2cf0d1c29e16bf098419c80802f601a47a8e25682437af7f101f74b3c08b4433429c8397ff64b3e508619419f0d1c392f5f56d520b29840949e0b15d56aa2de7039d1b62ae3a98e563c602e7c9bcd8163e814c85b0505abeacc9675cf5a9b5ca6289b5451af684a9fd273295b392ea4e96fa65863db4293ce9ace459cf631a734d8dea06e8fbdc51afbbc04c1186ebead7e9b2d3b9e46cf4a5d55af21ff651d4ec44356e9784f6ba7d436ca89e34081f8424c898284c60633075a56afab10f1e321a7ff7d074ff26bc43dcbda8135c3ca737737578ee52b02cc5df8d7a01b2043e834fbe0619841ab876b771b067f5a0288f5e0d8042b689d7d2ba9fa2ec8b9d4fae0a07d26d855f55d63da69d1db2bedd72ccff60f59ffb26d48d1fe89bf1a6572bc2ea06ec227269d37e94b74e0cc2e3ee0f3d56c0e674eb18da0c91b5a75243b0cb8e95192791c27551995e12bb9d2869e8944a2943e044a0f80ed9cd733466f5f045dc9b4974d7d67c5280df1b71e27d7f31468379a2fc389f0e60fec46f3b61db51d9ab95f5206b2a4f493796f830f0531549232213306eb8ae905965d77fe07031199f759a738eb45c26b0c143bab2d34c03bed57e745e8bd0cb7603a716ec5d0c6359abc848e19de101cc9e52fee61ef7cde17aa52a87786c391483432fa7bcf1c8d5a2eedd0bb45ac12a4cfcc57f15bb42651908ceeb435380b6d082cee0df7ba8d2be5daf8d5a684fde5aed32b101ad1778b0aa1f04ec7fe5641bd469852c5a35a86cbaf7d877b1a4533eeb4aec0822290089e9ac17b09af8a4a9474955165757376a905544b8e12c951031da0a9082b499bfc1db927377930243b30162bb2a65b128dc694b1dd9d837d8b8ea4a926610f64a00cc0ac6ddf39aeb54fa9a55de2ccb55774c3aaea763c0f1fa25ec5444b8419fae51c7922637f3097ef87bb0c2e8b3f25905ead66b09988b3f87528011e64ef9f02c451a5229d8ee258d0d82b348c9584a42580e5501bb0b6a56676fac8a8d4dd4718c9765220ea228564372ef514a8dedad09fbba9f92af4752bab1913a51974888546e4cf794f17745efa0363df260f6ac5dcf9e5354acf4e876f44b1816ad13d206e73b5adf9af9f66063281ed81cabc69cf562362306a68a02046c01dde0a203404e82856b45dbadace236303c0c9c96282c059496f7f784d12d4eff5a9e746d29c2de027ad988a7b80066c3ea57dc987692911ac2408b7a5b736babffa5e8c8dbcb179f951f272f18b9259684eedd51cccf7709c8960c80f7b105a8908116de6197cc11930d13d1d7af0118cb6f3700bd32c9f849c6c4440dc8b9632c42806270d13e3bc382ef","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"c81dca7eec29c6a49bf3c4ced5e2993a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
