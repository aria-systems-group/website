<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"24a8df77aacce779529a89770bc30f0a0d4e8bf712bc17fea55028e66f124b8382ca9203c29662b44b96ef8119e3a76bed7e063b2b5d73efc190be91477938404e94d8630a8ea5db8a4c703539019e2f50eb006532dbb9f7bdbc1fe6f94de9355fbff6cd1b26598429e33cb9f57e871104308d0b31d0af8b05f6ddf8abafded585eb99c376543920f6fe0d5d99c5f25b2aa6a5f0067c210b7b78cbf685af742de2eab02ceb7f40e56ba531b7653f4800eea4b8334dfcade135a9d22a0eddf118a203961a07fe80c7755259415ea07e5277a34256af3e95a860974c94678cba57100c5231d4304bc7feae065e0ae9f96ab656bb38d4f65667ec78d86ee3995b3a6ec0f7e21f5cd21d5ae371a1f10c07d640f422d005a8160d2eb3579ae94cec42308e5168fb89a7c39f3fe3efdb43f31dc03102afc4b6f14aa0ec9ebb40cd89363a84219d0496d8ca57ed0c78fe9c1058b2fd6838ec4791c71a670b2323526bca20a37d81ff38bf4dc027c9d91368fcb313bb1b60428ae55626c8c32c179e3728148897ccc27072c65b3c05844ffe9d44450735e284b72ab999262023a86e84cc1f7539169fd30919dbdadf839d50faae6f8d1c814e25894b952a75239f43bd43cb081f73eee60336942cfd759a80abc476d812a6b24d5cf29b992ec6827a6b00c828f616288206af8f0d9f19eaf59cfb589e3f741dfb3a7921fa2a9cc3451cf609a71ff371bc9ac6ba1b520acce6487a24f4fcef7bf3873a087312db4406aec2459a8df2aaf230c96ad9fd485575e620b189e7f9e4d226072cc868a1d0d67080670f668b1d05309edc3d211c946c9dbbec6364491004e90c9e11d5836f8c48a2e084d23ecf7bbbbdbdafd6cda10982cd0824f38f4ff975b23a64d86e167423ee31b3f90c09dc08e3a6b382485e7be803b8dc63c09095fec047dde934d2767c160c44ae230b6295452ad488989b0d121d5309cb2e0216d48362a086261c87680761fad5f22a67f0095dc74a550402618abb6df8b1b217b07583dbe7eecb287532890bbe897abfbf854703b1eb170b64e15f3bc58ab1f7e7017ee11736fe0eabfefdf4c020ad5391e5f923a131de93d24a265efde6844f608a541c0f354112fc6cf275b7281adac19973fc2d234798a71b2c0562b5eb30b32f39e4167460d6c783bdc89a5b186eda2003c1fedd32c2e13b45ef027350db130b2759f509127a8ef30becb677859ca95768ac389aa3ccf0af5fc0a59f563bea1e28711ad16596f8fbeb7f91cf4bed6ca8eda3041d521674a9898cc9f2fb33a3e44502b239c1dbb97f7041ac21b8dde59c7407c1b8e381080effcdabc1831c12519984406f17e60eda0aed1029ed0f24f2b5adb7a1e8d9d387b2ec6b891c398c000297a59225ef4f311d3404cee695f8fca35e886990f14abb04b8c4acd19453396baa0799f72cb41dc38836793ab7e085d2cc80906230df789b479eb4bb5f292ce6e82b18c478ae98775318092e27a4301a1caf435d3dfb4b27c5bbe529ed712a1a73d8fc8b3d70a99b01455857199f3c943d6c2fe96febf567764a375357aeac30fdecbfd16f134beab5c064457818a282a5832773052d41e506f5be9e864d66e9622bc7ae1d5996309ddd8d8f1264bcaf2d3433972ecafac2067aa35eb4b5fdb0382b4089d6ba54326af6f287b3986073bc1a2f11bfa48b76e4d9ecae841a217a4ca5a989b6cd531f1d7a044f10d7beefa4f062da9a698a5adfe7442c77a9c5a4422b5b94c11429611e8b4bc226d074edcc463ce6a3ed97f4b12d91f96e532cec64d37c9f6fb169cd9b89b8e173a0008b20b6cdff705b4c704d83aa338dc789384af6a9477dd2dd512221cbd607a41581c2a5fb0782becc2d1f1f9e94be6d8ff5cfa5ea2477efc93cc8ef7be5eb920a59593151e2f3b94b604f4d3f0fa8f4da65301c2f901286e78aede1b50a4ec6e16d6a7e2fd84e8cb21660cdcb322d4818f4f17fb868c56e12790b515afa45e74be6a5d756aef787a423a734b39f96d6a961a59e3906dcc173f1f8d261b9931a58b889697b4adbd78a93ba88ed83eb4b4599fa482038074a9c8804c0a401dd5697df1261358c37dc1ebe7b730ba1b5a49bfe3ae8e32693a81adee1b4c4bdc21f539458cea384bcbee4517d675cbb9bf6f11f3b01be83aec7f5caa5d0896bbd3de7ca5a5585b436b8ff1f1a12fa06118948c35e165900f6732121379561caf0c180f593043b48b4fd5f4d45a0498cae14d450566db8d58701b9deaacb81d2f35c4c16d8af5feb4f263d32203690b15a14fe9c000d44b99f1ab6ba0ed9633f900b10a895b706d1099979762eef837420f5f0e3fbdf516494dde4f7b187f0aa11ea8ebb8bfd4c8ced3a1f1fa599375e1c8d45bd91caccc5bcf2abd012e7c7befcb8583fc128bb94406afa7bc7439f71bb15e0ff0325ec4a5ff76bad39b1e3f4b5bee5e5ef9a5a6022bcb467c1a7cc1a862010313ff16c404bca7f1c66d8944f2f3187eb4b06080a4b57beb55f40642fbda1c72996e414ede2bc36e5c882ebc5a470fd8273f19047c49ea0eab84d2a8f61cc13ff3f7ef719201bd5ebce65ccfe8ae31b07e10470ce56f4d2c41647e6e80943904cf243ce6c98f8094013413d16ea50b15b4744088694ffeb5b2fcaa0370cc88f4d4ca136515f082b959f3dd1001656e4f64f474e2aecfe2f16cb3b81db8e71dff3e7bc6986a628aa035015c319f7ff6c7490e32a704a2610e7f68910838c7823649da5b43d2531edb8f2471e00f157b6482e9466c2e90638a56192300b01b97e066bd3d64f21f8338c83f85088412f5c04e9ce20e1bd1c856d6a5eb330359a64e81ace7c8872fe5b4125a353df2e82eea1be007464285d1e660ac877a55600ad1db8e7781813a837d00655d4b3e95366900dcaa4bd7ee14ad52f0153ab4dd4f0137ec4919298d1d45232921f803bb96ba003ec7b8297d38b7a3cf9f8b6574ae9d776ef8fce8308c1deb8bec65213b93d7b91e454c1b0e1fa9d39b4e3723e9760d4f9d58f9d1a4782d501c573ebe876bcb7d6535a3d2124d95d70f69992b253bee3a3a6ed125791042809c898b53bbd9138eeb233f6cbb6a2bf0efa84fa0d2d3ffc96a6bcbdde4fc072845bcf5c2b68a60f340a04451cee5abb1a31c027fb3684b89c104b1977dd64bbd1724ad17152a54eb47ec25dd8dff51131d33eaec432a33db358821df940856ebd4c44019cf633a8f7485fc92ea6f69dd1e1a9fbace1bd88fc2934f3e20d5971bfdc2ca490fdfc9a17e653c1277ba84c2f20690102ee9bccd31de899f8027c31ad004a24047d401666192009a931e524f076378b98ec45ad6e601694302c11f1bc52aac3d8ff4081e3b24f5af7355a0a5e2fa56fb9713610d25c6405bee43202fdd3bf29f1d838c335030dbfc7121e1b2d97300d874bcbf6928ad91a7eb578b0d02d95551bda589a11c3287208a16ed05ecf86f32d82f8312fb191289c2c0ad0f537eb269c6c9ef77c6472ac1e8b4d9b22b60e0be374fe0506ae9b10fc86200c29c77f3e71ee3c862dec85081d0b9c79eaa1e53228c4f3be54a0c218c3e3b2d31fb1b9b986d7c294247ab1e6313fb0585e0a208e064bccdd03a5b7dd2110903ddd104a92f00531c263bf95f5497b36cad85f959710eeb69876ddc5d1a58f834cd8aeb6aa8cf67e0a0a76a5be8ab135d06af96f176991c4bf244542d00037e85a1f4ac21196a495098a83dced96c13e523929a4d83cb0f0c9eb67d95715ca6336470205bf542b5ec8202982b8c57ced757f24175072927e240bb4734ccdd755d736a9d795d8a50530fcfc8c585fb2994f92b0919aaac5b4fb2d06f5afb35b72b78c3045948c5e211e009e711d61f0de148c74899fee88383237561339b631264cb0820f6a423f0d539ba65c6dc08675911c79849a2fac59d0bca95427e48efc4acaeb20b6df49d0496fceef3b6e10cf28b7905e1f0182df400b16b25f713ffb3505f2da456e6ff220a382df352f1939b9b1581e607cc3d3757210e4f4d7e35c9d8b249be61b8ab0b4bbabab576b680bee027cee954fb2caa1f72ea132d9029a280240a9b25b1496cc0581696477ae09f80d841f1064cb0f952537a2bf652f5144d01e3f89304bccd005d4ec6b41dd27394f4314abed682ce4f64fdcb8076341645f00f12746a42befeb15ef4c708bab3bd5d4884ba3cb931647c65a4331e7e21901dc6a81aff125d2d75ecc5fe78bcdff7a31cef8e9bb9afdd3ec5442e4f6b3dada634a104f45eea0258c2555d8d502bbcb6cb9e3d74fb95ec0d08aa1234c1a127c8b903c0535f12190f1962784e8ed48f443e947c262cb3da8e2ee45ff7717f7abad8502deb6478b9f75a42f797fd938f654f0018e69cca0ec027b8dd8bc281a8ea90cd5efc403013a8f9fbf1f58feb46fcd733a57387973fa53b05b4c19b5b5a8bb43821267ff6924e66102aa2a18129816adaaa8c5860baa0c0c25197c2da22144fd88e013b770f19cf9be7b9d9828dece8e8927030999fc0a5e3d290760b09996418ffaa6baa9f76c31bbfc130144a6022696736e023cfec2e8c01ee81680a3562eb351313a8c601adb438eee9ec4d3991ae5c25c9050cf09afdc6421dc7aa065f6a7bbaf89d1728a775770e63a6888cdec35aae2c7878aab19c8b383ac9a97ad09e041d287df48a9fcd03ce2d339feb03fc5731c8d4fa898fb9f4a76a31eca98311732f2fff12088c00ebc8d6c6e41dc275a2d8716bd0c8fe2f927ca68b5b6e7e0e79dd36590d144d993538da50e94d1b407151cb7001cc747dab6827251f309841758ef070cb99eed06988ad587994eecbc165651cfb3c37fd26c2a9d29a172504bd6d5331dadb09544d0c8265f8a0b9ae6e8358606582d48ba46343f3e06fda32bd3456cf661e1aa250a9e4486f7256b5e6d716b449c513bd946f625a136f291ec47878d4a0979afef7f6a8c8c2a3a8c0ab01d0c26eda26ac8bfd78a21e3f2609644911c18b8a68d01548aac62e01f02682346855131cf35173f173cc687d97edf0aac991abc3b6ea5b06e9b135e9239bbdf5b94417da228a04bd1331b0afc9e6175ec6e91d39527c8bc49c3b3e46f7c6ef6db0156ff6150aaad0b1428270d9d1cdf82ad24d638a1afb28c78d8592025fa998ad5592ab6fd7451380d5cce44d071c12ee46d5c4dee2154642be12c6f000ae916df68994e1e89e98fd7dc195a24df809b079db2892fb0d9251d463f52a08c2122fab608d0a6997b38e5a33b3c273263e99657f50e1096fddb43383d42df0245262e1396fe4a5739b106cd407ef05f99d57a63513990c153ddfa77c6e1fccbc7c327ee5d27864a3ea9172b51c0ea953dc4b5791fb02df82d082b6bcaf42012656faf687a1b33ee3d6d2cd569eab32f911c9338839cf115f4fa27b9712b1cc5b81dbc6fd31c34a83f3e8a4823465f22ee7166a7ea8bc2cfac3b6cf840ec4288aaa23668657e4072242b6f5b857c0cbe0757842e30da34bb4fb3416e0642189e2d35a8ab0a182745560aa339650b73d1cd3b64fb29177bc6de15a05cc40e9945863abfa48d72dceaa6143bde6cfcb147e8ae960f8d7a6b7f2965cf3436e5b5a3558d826876b4e018983458db108423742a8c2fee9bfb7d10d2d913ff60e41c9f88245907bfe988869c4ffe5c40e1e73e3024d53fd123a309dbdefc2a8ead7aa7a06259c185b9651d465f9aa495398d3db008a3e43a246d0ba3c38077e210ee8ac29ca790503c3151b9829e91b61faf89b4a49ae64e9d0e664c05103555c570ba626a5c5bc23aab8113f3ba983933fb3cba69ac1a133f488890d0b5461abcea2a53ab92d8ac1f8e97dc1031f2468d16b3ad12dda3c0697b9a4d763ec4761fd6bab138318f77074dd7c9e41e5c50ef121514cff95d3c577c4e5d7319cce7d28050a10aac2b3d8a2202da9ea673624069da99a224979e5945b47a168947ed38e6531f1cae19786259c74ba72503e3c1de14ece62349e317ba4d78e46fc9ab2c89383ee1c6e9c896b48676d59909488d3eb6c7dfcacc8be2d6b165df74161719d588f9bc2cf264f303dc318a24cd2bca1ac369aac9408f52d27b84cd7f5865490a7d7b5ed8942919f56e32f93b3035eafcb53a8df84b8e0fc1d909c5d06e0489af21b5edb9ee28d94070d84e634b9d2f048d1fecabe72d27b440a2d06deb5a93c1c2acf0a237b12334453328d8c4bd079ff826df1aef814edc382a3bb7f59a9195650c1fbbe9004b1604cb4c083d919ea903edb39ccc1cef704fe45cdd1afc2e026468b505623cfaf2820b44237719c2d6d1f91908317444754da0f369e10810273075311f40050ecc66bed3181944dfbf8ac3c5616c5c362f309bba2a1a31d7c11fe673a975c9a30f1d53c86eab61d553b607d0940baea9ff94bac688d32743425572136b88566252e744d11c1b3c22887e2602297b774ab81a4c8a19f1321dffe88ef5a6f93c602d51a76735ded407a641bbdbac8402fa906217390c6eef1137831d03dc8c2995532427ca487bd1d3b7e2791bed8bc56ef50c65c4a22ea10c3d6e4a9434ccfb0d725a8292e119c55479a6010fa55e0dd64d91f28519c89a64b9b2c6b0d1630000ce98d86b73c6948440ff87b173928ec526664346b8835ba84d101497f29f2f2513017dd7e469b4e9d4b7dc3d71bd85af389ba8c7e0b5ac6ab31aae37fa1e23be44e64f03ccca0af5e15b011a39ac055be85a6720f7131ca2416fff30eeaa2ae2910c40870a8f5428462c64e2f75e32f6cec38bf9c913ba6701c132c75d61f71363391fd2ac7e24dd8e9f5a7a4ac3557562ccacfcf09d873fbfd3030c8fc737da3e2e3cb3f0221f9c798604721ab4c17534a7bfbcf683c71aed1c008fd0794e81549e176fab5953092b8cbe05bde499b447696e3b7d638a48457b84d799295d7d5dc2aae3f0c0be0c4fa44f7783f5afb1a8e2c14862643d1f573496e1da9037a571fb6230af8ed78eb5c07efd896a97728594911a856d44afa66d0dc61022e7f28075bdd1799de1e2f9e0f48bec4ce0077121d7f82e88902bebcf0c8db7797b2f2e19c09ee178ff0fbeff397bcf99c64c95cdc8a817aedf0e1ad83a9cff9639e29456f295b241eee0c0db6bf98865dca8b1913cff4c2f9c66b5fcf36a4a57b25e4fcf7489c787ef65eaa0badaa4a509c777c46c55cae4326278336aa5352b7e15af1bb7df53fb56adb136fcbc2fd76fb489fa4beb21c6efb70be620709f8a2fa33b59c99513ffa1f27d227a9533b8803f8b47c4de9d94d7f21c97c62fee112150ac4fe750f277ee59ed70cbf3db84dc723e6cf832e2b5e36ae67354740ccfa6f833492587e170a393e1c58fbff60f113635df4ff7717c8a184894a843859bb85dc2c1ac6f38e6a240e84b391dae1fe8b27a276290db221c15d5ed505865f3817b868d4314722d1b80de1927742b6cf5c345cf382f2156c31c531d5519d3eb02c175d42c50023eb458acaa7c88d62e94fd0e68165f289a2631b4139014f98c1ad0feee0d194a94c2be9a638890d2b53d691dfce1e92a8e9657c135b21ef865b38262a702181984344eb7d148f07e70f6c399562183c8e71dfe25ef1c9568c8481c2442c93d72c5cabcc3171ed1f64610f39734d43f72150d3e043e1e6797db5d2d9b02d002578a583d929e701732fb6fd2cb1e975d6a2ceff0d84ccb8ecf031a77b88a479d12087dc124ff805646993dcec6c074214b6eb759170163ef2214df0f03a6045572d3874c21ba220b4aa99ddf98055ecfb5f886df99ffa8d5f6d0be6826298c2d448826b6eddf8074167f30171630bd0b6b4b02d21c3527cbf80f951040a79346fed87c467450e05d457456669ee17600d587ccc1ad3d5b167a6be32441e5ce4b04926a365d787f72744bea571313aa733bd56dd11bbb93297d01ad2b1216d9ae165b28857a6b428903b05adad2e589ab3f19da27edc37aaaa3d18c6e1ad42f8ef4a58ff79d0a44da2cbd08e04ac96553b98c5c952b018889fb6b8294aa4a5f620f7be730479af5dad65ee47a2c68e91358c899bd5b740c94e0be9a313679eb3a5e4bd534efaa388ad046ee005eae573cc0a09df55f60cc2e6b748ee75731de36c349a2dc8d0f23330ab3cd5f5c8f52ba2ee9aea9b838fa1049f849d0dc6197e7b6d9dd7b5ab85d5a1404cd180abb5087c9a8aa05c5531ea71cde43acd38eadf0b587d5ac745fba421674a479d14b9bb72b32eeec42c1c01f4155a96a40c66a839c89fff716a907831b0749e641321ffb7591370a7f6582d930cac2bf7c6ec9ecde57fa68039fb80d78a4b446ec74492111c62370ec5af01e1268a0980604c7a982434ca10d597fc04f15cb47b1e1940d5dc6795aa0bed054dbbf934f2d1ff3d316b44590ab4adec723f5d1f7258237ede8dc26b5a811f570634bb62a487d0cee813067eeea592a2cc52de1d57c8a6c9354c7e4da3700639ac85c9a63fab8e4717f25b79ddea6bd68031a5582d23c75035a2136be9aef19a1f05ab3d3449116169bc2c14e82806f4dd4eb32c02867cf80eb81d97042731725c92fbbba61379ffb796b845f1058c5a819d2652633885ef18ab5eafce4a2f2e7c4b715cb021d37ba121dc03028400d1fbad1d2b2f5afe331d7cc6c5b88987040537d3a68686cd478dd329a54d9dd580c0a9129fd4c2db6868ceed1b6b4f3dd376e27eccbc062b0ac465c3100a4df9e302c2353f7680132a899c392080118ab16cfc23a2f06632e0e4251f0b7dce3820feb4f5d04f539e9923ff5926d085f0ed98f8f649e6bad4f73d40412df6a03208d1f44426011fc9204c674bbf1526c04daef010169223dfeddf9ffd0c30219a78e803c19f6c650d2255f7b7079265f2914f9486609d08c89ca6c128a3a10d0337f985fd798404adaf0e170eb787ff0c30ecd4acfa9cb664334ed6fe66b94e8cadb465ce8dff0cd107ab1ea5a9e937c7d98f68c499d49c99d62a67eabf9d4a4be5bc94c61c59b5d7e37bf63385d91afe34dc8781826dc84d60fdd01997bec4d08bf4a5fe802d5fcb01c1a4e7979a6cac8511ab9ebd7ff0a5ae1ee89dbb625a33f103a64010029b7ca065dc483f3b0e865faa4abad808152998e3b0b1b95fa541ae7035a372268a3a5958c0e27e63bb81594f0df9b35bba56018050f80e60221e5d1b00713a032abecf26a51c56ba3151106151f636e143d4692eab9c139b308e78639fa681787005cd30ebd2ed03ab5bb6dc40f0aed94dbde6b3fb7f812a5716753c352439178460186bef152e36ff7c18513b7f64ea29d0af6011e8104e3518c68605b686bf73baca202170646d616acef49d6222ace71fbeb056ce2e8d50e6ad719cbbcba2675bc751d4d77f60936ff7090486d2aea35e8194fe23a3ff2d92d4520b7a7168013637e608827e7c7bc00f3e6e46a4b5696c64f0696700c7f466e37524cd64a9852cbecdf58beac6f1eceb77e7844069d1f73d92e295465e4d5a5425ae6c36a58d08d908f2effc281f47917b12a8737bd738e8e2c397556ae909b5280dd2c9fd03303ebc698b7dff0d94eb77b9aa2fe3de550216767e6a552aefd081de3a312f409fbb14fdb1b50992cd09f5e5b3a329ece8289a9ebf0d833bf32b50f2fc54250a3ec069ea266974ddeb3ba2959dcb32a46175c7e0fdd8abc8d41c03ccd3345fa07f8d1ffc87546aaf2bb19f8c51880fd7400325f9e14a3ef021567a2303a056f2b220e6709afe6689092697a4e2d10d61ce5f21549363d6c3b0ed726ec0de026e295fa19d32b7c8943b1e6fa02756a0ee2720a796730143d1b2a391608e9659492824efa251b2be16ee9a12d9c864b86595774ece9703f71165443cc6e64afbbdcf05addd1d5a8821c92416595fcb1530f67dece5315f93f00b44bd88494f88795f7cdc160d60607a30cf991437d69f4d3af4ac1bd0c3a459a853707571bae83feea99ebf6e1395fa15cb371fa829c937943cf0407ea5c8ad0a0a667a40f7096d4da0f4fc259a8e968acf32c0c74fd4e0b200e050d7ccea373794b5c9a9eb2e24d48c49812e7677ed4ec87d4953d6c5951cacdcc8289c4fa625a5423c8b7ede0db9892cbdea60a4d1ebf7b7f5edbb1fcecb6ce991bbf632e053014063b7a134a6c88fe3620201cb6893eaea71fac43a6e24489a410fa1da1da160fbda9113f71e5808b4409d86320da08d3395fadf1efb34217263d127e271c7b60d4802cec75aff112523eeea601bb9f20f4bb90fd7c5a7565554c54a7dac14461986df04a48e2dfcdb9452345e763506b7d3ab584db8299978f681644af3a06c5b1123d768a945e1d9948d1b77a79f05b5fc84d536c7d3ef416566af74a39c3b03373e99e8ae90c577210bfd6afc7c7db546338f510a6fcdb45966dde8f5522eb67abd34787e0f7ce9685be41ff67aab809d3214f002a55545b3f007039e417360ee159dcf4c72528ef927ec93d4cb7a8265948d0615390e9bfb2be250bbc7619d7531472674cffe49518887acffb336475ff8b6dd26cb87b4112e6bb2ec1546a9c3e258d560491dab9c98dea66f16c744e1099d9d1ccbb6986a8656203d461e51a34239c30ceadcd43d0c62cfe5badb4d420b0474dc9a0ebbb04289f9aa1c50a705dfaaa77fb16aa2b861e768d33746f0a8dabe5184d81f2a5932e4ebf70ff3be1b4ee85eabf1574b473840021208ebd3d0e43c170ccd290c9159ee2aed51965b79d09e43dee8f663d9e00aaad228bea943a61df0c6a9712415de18bdeb5d8ee7c0fde5f40186d0275fd80375e4606990b5c963dc3d680a0a29678b5deae828cbc428a8291f925557e0c639592d511b8a812c06c0d41eca7121c8cce07bd5882b315a03a78887e4b740dec8f4a824ccdfcac4cf45fb299d413892551bd691af70f430e2b3581099ffe25c83f89a75f93ff34a938d1e08edbc031acea2e743f3f8be9ff25f9ebeb612a7693418038a7ec60d9ad2a1df2f3920ebaabce141e35ae43d7ba62394e13d6db3dacfbe31a43b78f2492c27dbe86ef6461597bccf0677007a77eae35c7cc19582dc69204fdf5b5186601cf8c08a095c9dab1570b46b397e5d7736014e7999b66e961f61c339ea324e7f452064a05bcc49d756bb99b49eb2a8d5199922a26e7d2b08cc08f01a36712f9f496f0a7e6179368b87c287b4d5eb63258f841e0e7e7e886191ce926fae172ef90909095a1ce136f1ea9cff3f1f7000b349937e69a01fc6abec0a053e789bb0cd34c5e19d926eed26b4ce444aa65648a4c4bd9eba94e111b8b77012af056ae45a6e3951eb03bb9147820c68f92c75982ecdbf5e0ed0979380355ff2db94097bea4624cabb970b0a4cdb31f50430dc5263b79f068d890c99c34970b3b13fee4c9010275cf446299a143716eeab396ebc4fcd9c508ecdfa4ca868b47a02cf895b5aa7a662bab957aad217b78e8b60ef16594a72527df846204a675f17a864663947d20e26f5f1f0adde16fe14972755d33ec97c9f240f1353d8114740f589c7abb5bb03b637b546f95058c815d769c53597489e63cdc945fa999a6aa7bb3e74d4fd8c958a6b81a06d16f091fe6d726af21d46bf2512560f629ddca9ad673064c244e31073010876bf44e8bd24bcddb061a7452bec51c0a3c79404d0252e40359037631bb4239a5e26660ee5e33bc407b267637411362df211e74a62e425f33a71af10b25d8a2f87aaf3d7c447627ca13a67f4b073b4310ef0109339fb8f19ca5b1884d6dbbc813ef0c81f0994e638e170b1e346feeb5767e4615824c7c194c23be9c38f87abd4764d4dbfc46897e8fd1c51a8b7dc024b2ba9b93f6377c458d39d1aeebecaac5d571dc8b39b0f7f0a8648b049d9eac7a0e741edea71f8822e0cc0d1666bf67babce765b22bfe253c0140099169dbede02b217575bd935c9a460881f00676ed9a8bfea3325e546745c4b5e4e79582af35bad350fcf21df36c443852d0c1a6297c3686414edcc898b518444e86c011262a60f2d7111236412cecbdd4375855bfad244b3ced265079888373f00c5b9fcda3ee0fc1e51dfe4c685c5c71d18badda54597e89c101dc299e4d1a7c9695edb35baee72197c2030979bf3fa2da6f5fc91e39438e9fa3f89a80c6b400cdcc13acfaf0f3473cf86977162c3924d6bb6879cfb52dac0cd8eb6f7e5cfcd2769ed7b703403a91fbacf98fe8c78b50b44f990561c4809a55d0fb85c00eac6891a91e0272bae2aa23fa599ff4a0fb34790638b1e51d4f2fd8879c0fba7e7caaa6c39a1266c3f13fa7b976fb34fc99c1bebf756e43c355425f87d9ea139566ee7e0265fe6222ea337526b269b1a8a862552321eca9b9c41860476fb41342601b57693c134331a2ea695bcf6eabd933485b571f98a6feba7609961e7f89157ec9fb137bbcbf181db6fd2a56cb7bef6806429640a04023e818764eeee8d57ed3bd184d50959c064db1872943f0e33e2b68334d2f7a90cb85ed4e66d1ab70e547761bf49fc5a3c4697a38e52787bbbb62b58d7d46b6c8ec35d99563d513caa3868c4533cec0d43a94e974df69902d0152299c0c9c82a2c997cbb9d4695ab8ae8f4b5a8d27a03c0788c821e2d0836ea76b1c899cbbe45a1486cc90d54d9f3a3df5476723a1ac602391efd8e7e895bc04425cf7505a37b45abeeb0b2204b293aa80930e35dd763880b0f9151cbcec7fd3a087cdad0172471f1c8c59a5999edf69147a0bafc048919d82211fd58994d1cc80118c228f16d8eacbfca8f878073623237633a9970bc82a5967a43b128ec42b2e0744755e9040cfde84d0ce18d216707b13a4f70fd73b5edaffb24c6ae110b071756d1a22c6cf5647dabbfb7c7a0b1aae43270255e47ee5e8d2761120e22374cd5c4ee9d015a1e7e08a9723346785f4719a76009708862602ab8a29c388d3c7f5c882a1a5fa2f223371ac86bbf78cddf34614367dfd7dbc020539618a8fefe06d917566a0e1896ddaa04a70a8213983d84c8419be7e7e2cb8f0a5a4f3afe72953ca525e2ad57475997f40796dc993767b5828df8c3d4168f1b802287b2cc4ba6e6235084117be8d87db2e66eb380d7afb05b76890e1efbf8e0c844e503879a868ca350a47047e220adf25ade7759c703af7973ec6be93d8e4a8b6e84fb6e2bb969048abd3801fc12cef568c92b002881057156574cdb36a0064fc5967af5c7ee2e2925e9eb85d99f9a28635a593b933d49803a7b3a48279b09c13df061169060edf4e73cf7d53632d3bfcd2f2f67c2f53e3c9c5031dc9829f9f8bdd40bba36034c785a1c187b4e790bc935cfe0ef0b174fd7543caef168cd04707f4699a5221863ffbd9ceb1dc2cbbf957aaa880d83644fb008fea30f04d78c572679c5b46560e76cde10e7dde3a4bd657936e0581b965403d53e87492d509492862affe5f9aed41bce4be6e4d6c6e7c94cddb7f8c03dbf8cc2ea638dd111478f4007d294284ee434c1c505be7f4c8539cad0585e5fa15e254596cf6f9776d1dd8ac1f4802015f778054810650bccef6987b4ba75db8084af3dbc3aae5f917fe1394e6dccc5346dfd11d554dedde7fb029815c939d98e01cfb192bdd404f015d1277b31070d3203fa1d76e28eedb4237d0cf3a9644886cdabe86f12164ce5042349777b552c3bdc2c261fa4951d5c3354d3210f38faebc50e899c23cd04de47dc72be67096ac79b74b5c24b421fdd6701a9504d205952c5423e1991fb7333f86b8b87bcc47633519a2e8e67e4c55d0579bd153c3ad8b196d6928807ec8d4ad533355244bb0db0e19cb60536e0b9a5ae98a5b3827b24b878217a3deb7690b73956e8de8c869d4d934346614a8b9300ba68c008bcb17d959257f3c749ec37ce2909fdfdb40cf4d6a00862f0f7ed56be299f9f2027574edff52e9666f44aac8105d8f5a3ee571876f5015e63f1047dffedd17f04753a5bd130bbaa092a8c1f7c1c433337ff5dc21be2a0f4610a3277a7a36fd16b3440b9d2a679b8ac8669f45513107a0a1668ca556c5a049352b9ab8c5d4e70e36d2ed634d9051df6fec6d0bfafbac1a827bb3315dcd6a9ee3a2bfe692ce37083adc37b2afac10f6bdd0f419005347dae7445f776b0c99470edf181d9b211777e369f217423a7500160417b9a3d1b0096c2507e592167c8f8c9a04eb50e365ab067c13bca667303d06a4305c1efce25e47314642ce8906f94b7a674e58cf71adef6da2631c01d792636c41590c152fcbe84b590a8a77377e7f2a5b58a9bccd028491bba8d0ef68a725fe582522710c12af58212ece4bc3192932300c739b57bff0e73256ea2dfd4d5ef0bb6312827ee8a6f81e1da2500039454568ae2a03bbf96694928c1b5ebd7dfb6b48948adbe1bf4d84c00c955868d6dc51d5c799125ca1e6b3bd4069c07c51632d081acd9d56279d675b9522025211ca9ccabdc7412df6599d8aa5288fdfbab491ab6579dead259d74a0256f06402cdf3e65d6aa9622884a723d696490b54419daa3156af1d0d08a19cb89755e4cab775b8ad17b918169e20bc1e1e40ad5438360afa8e310bf41090e9d0b1e58ee4f68bcd783b3373e2d73b13549c9c4ca8c40d16df64f379b9fd151c1eaaad59c26e1fea9c8a5985a842f1416d2c3e4c6012508aaf204f4fa71a8a30e8d14810b734e3636221adbd0863c4f07e5683b30b83315e75d975a6beaa6eb4964be66e9b5c3fefa237903ea46e7782af09a2da254cb2d05d1078e828f2c9d71c8664a431b36c21faf94c9c19532f4030421482b61319f56d7cc743d704543a6e35deffff5e53505bfda414775dcdd5622c9353b4427444325d144b44fd31cc7ce8e7bb59e7c9d9d5d62b213617b6485b0a35c74b4446dd842dfda06ad8a667bf79adee94c015979e75ffc5d385e75c9a813fa971df890dfb8b29f8be5122f15fcdc992b292adf9e7a3ce92968430178896479b8388f46fcc985f1cac327bd3a99721eed039142f11648641e10b2f08328eaf3cf857062694ba99117f9631622818c23d19d05228543a9d1db8de816f2f1fbe54956dfd81ea4d1f9e69af32e73f04c3ed7f13b58f5a4be51904d683495244b64f6363ca82abf75490a2c7471b4a9b9ac8245d58b80d0625521817cc98f21c6f9d6bd5bb9e01c5f5cfbc84b5f3795e80b0d5f572287164cc4a1b2fb12cd06d5f419284602bf869a2f1ff16b0cd965493af29c75c06f9f416b6c69705945979a782777ee3207f5f7d46e4b7c503d2c78a254302021ae478b4495c7edbdd6afcf3f4b248b460f444e7e19a33f7033ff3c118c259c3107598a1be31f8cae3df56f0ccd2b01cf5efd086a3ad7c30057e64bd846b44ae0f1b5f96316893ddb010dd38046977005a57a99efcd599368c4c7533bf90c3a2d8cbf068459604f8507b4924b7da97a3734763b0d50652371e55ca4bed100f3f6cc2403dbfc987fab58ac154cda888a92bfab389401f92464b8b739921dca4fced0a99f14ec634d721bbb8f0d4f02fca70c2f04d32b67b7364f8bd9f4b40d6d32fedcb1dd43678c1d3788707ffe805110d340f5a1bf529d77354976ce10b97f07a2a90e49fb5ff9a7631c3678cb2acacd6b7104db5887121057ffb904f1092dea647ed405e16a6eacfca48be738b4c4de5e065a9d8fc8a513e355b24a2d91bbca9360b8856be7c729d84261537d18bf43f28a302998298d2c2cd96b4c7aa0ebe21ed0fc550a6d7dad368f5a1a4a738b1d96064ba3e1983b74bd8ccd04b093b512a5eda5d8e7e3fe8dfa6c1d4fb72ac96bbb3575f7de71111407ac4124f7ff4200d6e8e812eeefb5a942b7510ade2b1ac07f45fcdf01fedd4021d95b3fd39f213392ba84392c5cc8f2a1fc0a7fb7089020d6cc10741d08379037efe3635dd718ec72597d203ac5799e014523ea22e8f74465b094499ea4b08b2834c3e77cdde7e1ee1bd34ace7a872d79c1c3471a9ce08b92454717592233e59563493f02ddcbad8997487322388ae5ed0a3e6cef513f92f11c49b3f843edfd609598187f98264dd0928e13953f62bc006310b5d24a21a9c13c23463593d178cfe560f8430beb15d537c7c2ed93aa843ce3e66856b95d4884460921ad73be0bc4fa793a2fcdb708b2e5a6af337bff2e4bc529ca96a10ee01d7b58b61c4f29ad585caa188fecacb4ce44fe046d082e6763dae4974a1eae3ca6fbb027c113256dc4eb5e3585f86207d4785635488e0d6b1738fd4a94e1e17a724757d1476480ca880eef847db5fe475d74e68769b4efd9890db463845ff8e2c883f050c836cd4eca7fd1657037ef83b29ca32e7eab348239d4b4fb284c2673feb93e5b51fcc0bdbe231894367528cbfdb14aef62d74c3d94b08632e89a2d2f82371f3932609a59ab7e127d7e1f3956ca5cfe70b80c6f20943d59d7918c852e4066311508bb383d10c6c4381ab075d1cd9b84213437d45952bbb43fedd0d39232c4df9cb8f0f17a0d828f987edcd475d7ffb0baf139b33559c316826d6f82feb14ff4f0da76ee382c1f73042c87e2a1e3f52e78f12551a7f423afb288fde6ae05e1522ce82ff60e53cd9efdac86994d8778d5a85deb78c26b2f2d91f98434eea7777059313b0a855984147ba3f96682da1aea65f9b1f5e475cda302c9d252919df5ff78a5973db709ce15e54afb509497981eb62db32cd3ea34780850703c8df461b59e3eb3ab9da7cb6d5ca3a1612aebf8ff826e5ea33cd9f1a6a829921a725f446d008f681e02e20abbdc78e82338b1e3abf0f54b622a20c465b82b7dc7d0f236efbd8eebfa52ef8ee753fe32659e17b76ef19190ad176ec19052f7f760fe9a5518fb50d00a08240ad6a1a1477eaa67f6944573f4f833c47b26408a8dba15f30df9dd34c1433ee9240e0d96b35e5d3d1d0df8dff669c1507fab7bb65f3382111059d30f5f9bf06e885ec4169b1fda4e281b369e64e89ac42f5c79ddc963365307bfaad027878fc55fbb9870c96de5f54da311b3cabbab323af1aec1ff4fcdd0feedd0b5ab5214ac0d83c69c99a1c0b7c3d8552513018b05ea14fd803f6159962a4a0620912b8bdeb1ff1ad9325196015d244b6ce3f8b550dff7c5876b112e67c3b3e51bc6307657ab0d4e4b5bcb82ec79f08a017d0ed33478018e3b714627af023b58371d1aaf1ad72c087c561c69bf9f7bbdb4ab376653962c0c115dc669e3075c12f829b30b7cff51565711bb75ab2179fc021af5cd960f706a45c869820860754283e0e591b2d8255c5de2c2fb567b91f2d503756b70f5eb5b1f5f3764c760b74bb9b36a5bd6708810f8917e6293799154ce2fc6133071030b33994e406c450797c61666fa2fcf558e5249f93b3c0aed471831cc14132a76c8aa16fb3dc4355010203404f65c02aeb1d7ecc378d48648be6496b88a1e9441001ee48dcb531245f2a500f7d26e82d438b696cb7844381b458cd09119e8eeeab79b4be2214bd42f1c5937443d8748c45ecc08b7dafbf2f1c8224d4c084396d630db0eba8e48c6e5c83770bc7d75fcc182522200d70b82c9e17c8773a1a2985e769f64b34d4e5030360322372c6846a016ca0f89d2eabdbfd0246a05558c9273393356dc719a425f735e8ac17f5c73902c22b1f060103bba4931f8f310f0520b416baf1134ac04758845efd2dff689fd2388a54617477b0de52def799992c2615eaff924a3eb1ef712ef30f982f29ed9adfd3a6fdecd0a5a3aab7c0fed1e3f07f39859196a1b83c413fe2a6b6957c3f256a15324a9afcb54b5d8bfd16513737c79d66a7eabbacd713b47ad375f709409e69be790db07a2da16ad113f133bd7c76d2b3f4d6707205f8f70f760875bec6e309be5374e1b2eaf611648d5abf0aec694d6f0559ed70a2d75de3b2566fad11b432e6236f33bb96057851a6753e9df9babedcd5447cb6f70875be64c8d5bb09bce13da23f4bf34dc48c262cb652ad781aacb2951207ac1d4d041056525c7f98667928ba640d773bc7d0db2578fa3e76aab61bf91fe8482ec2a89b9db54d04dc43751c9b40119e20b3078a3e08d865d4f72f6539cd61a43136ae99580b54361348c93ae72c7574f24791fa360efda47612ab37b656c0bca5aec7db6c8ef2333996aa7793b7f87146428704cc382c9cd41add50da9a57acbda01f504b0c4d60e97ac9c0117984bbd8c34cbbf1eb4a2df5af8a7b26c39da32cc79a4a67b727e4871be5d3b3211fc0769edbbe91a2884be82d05b54a9752c1c2bf0d7ed4c2dd5ea27b7a18d8ad9b1a4d4961b4ea503104b70e72e139acb17f91101bc541c45e1476c7a19196ad96e25f071eecebdedde8b4cd0efdf7e5b3950cc8e13654fb220d7b9f79055a81f80502fd2ec6706cf6ab23becc1da32151037b10998f7643df211d83ecc192c2d1dff20b8be55bd54daa0251dcca8fdbbd0cef61664e277c54134036a4fa418d39e34f2b11813972b796fc2fcc9dc6f46fb724bc70dda1740ddcd2c21338adbbef2a0f8e207f35b1ac82709df2bac98305fa6ffcce956a1adb10c42a8ed2ed62c6ee442245acad21dd5b98f2be53300e7c37e3538045e6a5c96a3e26b17e762faee109181a32ad107d8d2bc9ae9cad4afff26d8674bdf6849cc0a236ccd5015cac5ee8d790f0b486ee5a5aa5de26530793b66da16496747c2a2b332cdd35d1e6902d59795a8f58840996a345ebe42f264c4947e6aafabae1d012560f61ca1f35f073efde22ab918ad68fde2f35735ae793964f75257607233d6e725de6c6ac93b010933","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"e0944dce3680643618d625429fb92890"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
