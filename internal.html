<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"9acb10dcfad6ec6b65a4cd1e602905504de8c878ea4ee6056d1f6064f04a4ec98cdaab5224bdc794a0fb9ec63dec3eb876738658b9c9f9afc3b2de142b2c2f6c56044bc90c82355b6bc8eb64e6c7341d63d21795f3b5ceef1530f2e535e2d6d71a7986ff765502ccd91c7461c8aaa22724ebc8e541a294fdb1bc813f6b154420a979be85120101eff201bcd3cda3b0f28aaef3018d5c31c023c13fe21b4f67d78bd948f5f5a884d348dccce970e86aadfa880d0334c6dfa2365695c1ae5d8b19e32cfc3e13a66fd8755dce878d8648293374694aa9c21085a70b5e081dd5bd535a8dfb755b265be68c2c84b6d9d7fb29f2bfb6fc8832740a5d8919b0bc3d8b32754486c6d6883f12db0bd5f5ee7ce9358c1b1c4143ef5349e9f030d654a830786d93a15510c661a796ae25a868104b2007ecd91c825eb7b206df1d953d45d72048ed7e4bddcc9cf76d91d817fb0fb2fb69cbe60e39eeabc429f22f8775b73fb6b9a732546d8f4fc116436c555c76bdab7e5896dfcde15b47fe3528f362479461e71021420353493b1f48ec6b6dfa190b8f77d6c15672ea4935fc7e3d74b37d142f468004cdd054084959e9d3537bf9926c31888c870cc886aa7d4eaab2a1fb8677c0ab5453e5a2568988c2ccde2db7a783c924fe1869d16dce83c8c474e9859c1a649ab6e9f3124d307a1e586cfce50d113094d31b69a7ed593e3b7b1d91cc71b596373d8d0c90d7526c8e0c31186f6389a5914f84e7941a406bba90d2756807211cf42b76eaaa55480c42458f0874e95d5992a9f3c8f257a696898ee94ff0d2a0d332bbdab6137adfed858d8d697acb194c2183db7fc89fe54a71b3a6c87a9df841944e39b88d8579db226629d48c48196788dfc44ff411d4e1483541ffaa7fc267d820045acea4887263d60a7eb01ac66a05eaf75c477fcb087c697936802ed15be3016742fabd0c7183ef64b61c950df4afcbfb995ef97b11fc5c7277a613579aa4443139e634063d7fccbbf147c300f8062b1d5fa53811de4ef578dd52954066c543c938fca1cd243b7d1116cf0cc4d3ed8b1c4f9364dd8a19d35dd58a897df950156d297aab496a1bc79b9ac3a1f8e2bd4abb1276a79f472e2706d46c95d87eedbf38d2b079eb7ef4dd0af22f622dc32fa3289108cd89ba225b87644ddeadcf874ebbf6b5896e6711d203fbef537803fdc24b9c78175d04a6c6948d942d790cdcc2aee5720100279d3d5658d92f4e66752ed28292cc7f6f97070cf3b96ea09ca579f7b6f5699cfa209bec8f2e56cc9e99dcdbb7ffa88695a07b73941cd3c7fe934b55aef98e403e45a4ebe798aacc6c731edfa21050ab38f84474d5fd0f3d64364b189bb506747d7c5dfeb8db213d6d0354142550d6530e4da87fabb2801596257431a45c0e36ad04427eaff8638e54fdea8e544e85f2a1642b3b5c6abcfbd75bb5669f975e4b47005401c128eab3fd5feb2776e1f11347793b4990f52da4b910c11bcad7d5564fc00d1984759cca6e221391c96b606525355ced5c40af8711b4c80d5d5be8adfd23b094681833d941e12fdbb430ac048fe97d603a029cb1d06314881bc23b895ff0b580a76f8d4c6cf20ee67badfaeb29cd0923a88c4e916ea9df15ed7ec1bcbcaeac875883f77e1f189a73070efb97ab82f0a11bc36d9d8f3f9d5b0aeb28833052814e6f89e182a4a888fe338b744219ba8aa0485f8c22a383b7a2f1d5028ff88b380bbb6e75bdb9f314a34a61b2bd69c3288f868905ea4b77a8ca12ec36ed1fc3ed07be351fcfe52ec92ce451971d048e3f1d15a1b3468b55c84c9eafd2e7b1afc3ae063bc4445faffa331ce2b1e064a79eddd2d00cc6fd345f567579c9fd38a2f3e89c4feafa36365955f7378dcf39880475cbdccedf129f37826384a623b302e877600822cb5b9ea97fed29d8ebe44778d411aa661ab43cbe13cc0fcede1b88a9be4081062cda6058783d5ed50774d17410d10c3806bd979975953247d347be4ca3bda391e10e62f4f3a8ba871063d3ac1cbda4299cf34d32ebf5fa959e4725e970142b63952b0b65195f43633bc34b54e8f42e66f0086930cec79e18b87e4d8f3afddfd31f63da5fd2cd4db4c70fed8acadff6bac87a14b9bce4a2f5092bd9f7f3dd32080198219d11b79cb3b21a6a65da782dbe52ac4d84e04665c76a60bed55406b2ae09baae36820e643f7cab3877e8072370c765d9018fc580ceb95c4de1fb7bdd5dcc779cb6f69c3c8e17ba4e35b2920f6ea49e3f9782cb2659e0ba824d2cf0637f1b1a7106ad21555ef6c4a34f97c9f5b7fb93ef025369fc3596e826c99761ee699df959a60da37aa39d327fc44cbb9772ba85582d0c8b76cc7a293d5510c513d6241db9ae2c6516e56f3c287d960d89dedd06e8feea8020727c4bbe9eb731546f2ea5af6002f1bdb0dfac645ac3e8e5b462d615da41b4fa9a74c935fac1c739051f3c5d1dfa07ef478b8fd1d537415b4a00fc6f7eff7efdeb085d64b6d7155925cae24cd28a5f99c87f7b62d763a1c6d9fc2b3b3005c6885de51b85cc0b3d7bce30829bfdc0c1b2f7e338cba9b71ea3bde8b8a638f1fafe25977740eed5148f1c6e211f588806b918fce3425cd982d8c57eaf4e44b00b2e65850604c2c34f087da6802910a9f0c9423823519286606bb0a19077ed692838b7e8323ba1ae70e97e3e80f8153a100bd6958714e6a9d392a024ed15fdbc636ffdb4397715a3b39b3022acdcc73924267be4913c5c44cb901eca5e66a28522822f1abfdf407b3c12e1cecb3b230ebc87ccde07bca647290d6302a2acb66deb2915f7393adb1d6cb9cacb11b4291fdee98025d0b39bb0e17af20f1ca83d2f45c08236388d8f7af806e56f75d54ada61580bc7860f3e4c6c889878320b7de2acc633801de84bc72070dea3922935078d7eb6243dc51e344746bc68fd01212b29345ee5a02fa28795838087316a51492df53fe4aea9bcab924865e035a8b472b01140dc9b3cd661f28e261328f462d1f7a894813ad28f075df85b2aa3e853bea05e3fd52f95bb253ee3247e2ca9b0ade134dcf7a7d6e52df190c956f4508e03b73b012d0efb2a2305d0c334e879ed970f4c862ea2fb2a91a1e81c4258c0559baf8000e2386486e0fd99d816580d780aba2a0e148007932f035e370cc1ad63fc81ed60a8f48c8427f1cce22d1eb3d567f9b0b79b3e7a94f6ae05826ddab1c620c503584357d848606902a422caf6c5b779da3cc97180c9dd1536559603eee0383fa792096d98e93e0e18e2f9c541018e9baf6ebe9c93e5b6a1c28b52b23daf774522de3939e191adc27087e047fe93e76b7a52b596ee1f73881179c1fcbb565cc93a6f0a8ccfd2c419d309cffd893e0ec372ceb922c1258bfee082caad33f2aaba6dd13c90fbf2767d3ba471263b029d7d8037c2111e7ce4585a9a143b438202c98e55927d4a9a88c1718336782f2413bc41307f467d5833643faefa3698785fdda39e1e21b2f670bc527d7b2ff10f9d1fde51a130e687bfbf9858ed20e661c81ee753c8a7e39ccd29b514b2daf5b27c03cd5a1904621b5936c67cae614de8eb3c4d4987f9507e45ee1160dff0c4392b6e0e35f44ce5da4186b88e3adbd23faf3f6bd2d500ff14829cae18ab4ec4a4d15e44303e7c40bc39071e48e99e886aa9ef02624082fbc59bd39c3e63fbd6db95dc2f16708032bb4e3f7440900edd1e7400348c10282cd3ef5b79f8a8afa0eeca1330e341ce706aaeafe999233c70ae3ca702e6b82d17b6b3d567ca4523e8ab47d7c8168c5822c20b19c2936a5cf84410103f1c6c2b144ac9c886d863712f4baaba4b513a525c97bb160de24e518ea38c61cfcbc5da547aadac30100e265697d2265487a35aafcfbdfeab46cf1f892856f7a88e0133161fef5a6df71739a77177bccac27b49cd1b73c4a76e95a385eab6995e6dbc90691b0c05f869fd8601c75638c56a9a1154437a2ca9cda149b7ac54a8016a733781d07140d441e972c43e0ecfac8bde6407b076b1a836cf388145890911156e5cb63022bc55d81204ec21fdda500047bac46323f0b3a9be628e424372a0c571d3b33295b29860d2f2c1ccb83f0824e0fd7f2e3a29b5025a2a57582bee5ff894b0e825dade8b49efae1b650f4c1250cd3ebda3fbd19a4790a2acc286f7db8399e59c8d57ebecb02a7b3ab3e6c2342992d3c0063262ebee370fe56ec68f4061d89ae055d345e5f9ae74759ac0cb8bbaf257a23d459771ccef96e0d914a8fa3df3019d6d3e56d6ee9e1a479912849d0c78e7d571a3b99a8faac49904cc4ae64e67b7058e3352a6b5d276f7bb6391e5c91a281d9bdb969b0c85a026b901010dd296e1cd331fe35856722434e3f9ab7ead85150cd3bc1025036e2fb2eedc988784859870160d4f90754ed8d6925cfc408b15d54329af2f549e70bf6d0282260ede7f6f4e0e90ad96a385645c1e48154bf7cb866f51f164a788f85993d278aeb953073fe8edc6023f2666970ab4fadb059e20de84f9f3ddd18453c3e0d52f3c1ae8af64e5107196eff0ec5c2c18720980ca5a4f5630ba1c6ae80dc3bc8f2dfd71795c93aa896be43930090d9d7c449ebe1248f34be1c219e060d2dcfe48e2815a2963c61233297008cc66b446d908ecc67750c4fe1a49d353d01f3e3178fa517cde31340ec5d5c12eadfe56fc67915fefbfdba22bab39986bb2e6da84624edd84894a81fb70b7e524189515c479e3f704642c336d716c81e7f545b26919db9f8e29bc25db110651cddf6ec6f6ede2a9db9855d1f053d46c23f5f5809347e99e4bac39530c77d27126d2fded3779c41bfcd05e468df86bcef5b2b6cd77023689fe2ab29db31b7467a44165a37b355fef586f2fa769b3f640997c8784fe507646b30e0f98c57df25dc80f7276eab36f894279c6f5102c601205979b0d11faf00f723749d73aa5a2f41f623f13218d42f59e0d6d695fb489ed666bd7ffa1ba4d1fa9ae94dc2412b254be1c3f5033872d762c66702c4292dcf96087163f79c755e836ef03b65d304d954de617337bd843b9326bea608f83c6a5c2459941169a8823a6f8df60c86c117d611b7145ffe3a055f9134328ee624826526ee8be2d681fd718b7b393cc46215d63fa52dbbfb5b4c136bb02b89665b3afbf77d84a9003caf68f3db223a5ce4c566afbc6dbb95f740c349d2fd647ed2698899b694c04a958eb1025d04c82eca3ad30e7dcc9070cb26c42f5f1f5eefeac2bb814b092612bdaaffe350ea78492dbe45af69ac1acb23d5e2408beb0da6da7aa665b312dc9467303fa2e6328d96edd676d6a13c337917342f804d1a81ce79b0ebe78bb348099efe72cbe852720597509296cd69baa53dc15fbf661534608bbe3e322ddc58baabbbf5374484fa0494290e5c2c8f77014894156a081154ee7ba582895baf5e622628ac4d9cd30f94d4f5453da381311cbd30d4a0258fbda143cf7fa5d20f15feadfe9554ba8526c9debdec811acb98d38140ac4cbf872562b740bc3fabf7fe2eba3b310a3bfd4ea3b6f8b7067ec9ada0f9679673e6ad4ffc45293e66454367df4e42b84b82a41b7be139611d53c2aa387cd67a60968bb509e59e02419b06ee6457ab10633e8862b4e3d538bddf144fb08ff186475749d26304bdb511bdeb1eea2024d509815f3630c8cff672792097c08882df0deff59cbb76916a1c9678e629daa9e2dde75578dbbe66046ade0dbf5f92d7f072edd868b2c45e0c4634be61084f97ce3b193e71c7b62d3466bbc6185c86fabe5200bae0c0ba7107eeaa1b7aedb7abf08e326504364c5d14153bf04d36cb422504244ead4a04d64acbc01440dde8e626912fda3c960c6a2baa439ee88ab67fd2416ceb8e8f0fa36e07067427bb71b2068edf96fc94c384d82f9bfbbb880df4382c22651e54209a9c650fa6832fac641a637fa527d36c4b66978505567aace67532865dbcc3b0f2b91424ca33c172f2dc9b08345c573471f8c9a7ad0b97765b0d6234a5277deae3207a017d68b40e52d1e580f9e64ad808d4f53e324e92a26d3925544c63f4e66a5ba014c884886e04ee90ba1fab94b6befed1262b4dbd8fd67ffb36234cfeca6b9f52cc18b703d3217814f101111bef6ec8a8e8785c635ba254bc370524202d8768acb3940094bf4468bd8174bf67e9f2fbad136af6c70497791337787dd70da0faaaeedc87e21848dcb9e1c60a9304f773fdce4942144d0cf1887e2ec97ef5f252189c086ba56651e41f98f32a2eb83d369ac4afd8c66ea2692c899aa024fe481509d8fe07eb11c666229baa229474187fdade6efa9ee6edf6c8071b95662faee15105a48a9848e2709edfce5ba4d7cbc82311469c2d1be681c7783bb8c679a060a7c31d668db34a7ae668d7d6aa95fdbd676beb82b8aa172ff32249533e974c0647abec09996eb54a2d8463b3107d1afd72fd2e880d90babb4305f1e3f446f622f2b942d2bfd040d1ae45ab45022edfc7893c5b1d47855c74bdf24e9c8fc8a0c113f7efc99caabb08bbad9c51452de7e2904b48a249e63bde646da208b06fef9ad1b26d25e8362db6943561d513d132558acb30e12bfd591ce38e7f9f99c3013c568a4ea1d241e6167e9efeab1e59bab2d71711a9e5c1e86220815f88e6d82fecf17463bf6f0c023e0f2c669692b45ff8e6a07e1c7d2d0451781a551ada39d4e64eb97db198a2b178fa417ee0384135b4a81d4e91e12a023e5df7487ce41173824ffd91033c6d948c6ef66a0ad2d76bbc95a07a388a95453653f4a18dd2daf948168214feedd0e4a94409f5d37b81777fc63289e3f98c7e0bd3fbf89381f3c8f616cb98a93ea835e89cd0b3f49a69bd075cb8227a7897b38a93adca4c642cfedbe2957b7fe8dc60e45225ea07dedc5b5644a3ab3821efbea1a1d822d7cb6ebf2bd2033a86ad97706f84f7c5e1293b7a8e21abedbd51c6c7f6f83cf7b0850ba595a4da28695a0be92336ff094278b9f937d9628375cbba14a3f0ae21a55c325e029e027a12b38624515bc73aaeb240f39fb04827a72287db8abf8cb5338d031caa2329dd7ae5abce9bb3015309eee811ac4db9c8baa71ec2f5b7011391e541418230c48a0dd26a2c053f255b69ea343242748a8bd7b424e29b263afa7082e2fba995c64d1d2984e3e9cc5ef3f29552f08b2b9ead8612c442b2a1c863bccbc0ce03b8265d2063873055065731b37483977b7f53634a766bf17d24e58150cd1a5fbf84e490370af2213e60e413a2844b9ed13506e59559f4f370155ea9089b20e0ccaa82edb1eeeec1a8882247307e678c92c7a6cf33603872537932fe3c6e9275c3e367b678ccd92d2f6681055420bb3e79b4d68dce39d476fb5b5776294d617b9655a25ac832bd9d3dc385e8f1b2f02b0a604da535bce585f1bc82dfd121eda38cc61ec5770012a99a93c32221a348ff19c22a057d11ac180b910160071a58dbd2c1ae7d8e68fb275ea6bf8ee91f2c66deae3ebaad80c86a0f870c52fb25131ef3b4a99006d44fbe52e22b9c2f345ff3275a12a7fe5e9c8662b66fa4beae55f0cc65f4c6a9b39a8ea3b0ef9b8fb37e022dc974f50713fccbe948df39645b4c127acd5b6d51849c9e88ec3dcc33325dd65912ba16176a9ef3165524d6f8bd3f8a63ac0159cbdc5ea76a4cbac9db6934c8899f7b5b27438013a8943a9e53cf1eddec8f09ae240db72747d4f84835b08a5f5aeb7dc6b95bc013bf403b8b13fbc977eb8a285990ccaf081600f6d312109c93e663df80b8688e19d7cbe3b1a9e2c4af46a1e71a34fae3f342e27cfc4fa3e692fab3b72aeb6370faf4aed24af0c5482943336e8c3d37c52afafda56b0c803986b5a0515476c986990ec86b18455a857cb400ddaf5d71cf3af3cad7a19665a159721654b469d71c39ea2f57e613d65042edcadc813b42293ad671734af9838307cd43b31c716bde38360c0e4710f14d34b02c2ce1f2ad0b4e0f73b1ca652f5b692d7aaf3a63cd8f3d75477b326419730a7f9b9c5b38ccf27b461746b36e5af717b83e64a796c25e57634cd6313f037bef23e2803648340be67bff47c835ae25c78a78aa2f6b54b386af2dc203188481e9c7d5fde2ad23658a009a4194a73a01e0c623c34c1af9ba52ed6e66bbae8a6addaf88e5c7865048557b4bb2ae8b46b18dcd877764c781a2e7d01465be3160e53405ce6eca47719c6faea66697f1e258c03d621176e75ad67c0899ae7547fcfe06c1dad3be15a02d8ce7fd7c630b9a44f69141662ccca933861b2541a4898a4aadf01cfecbeb2941598c73dbac829e81d863fef14552cd70184e675b7ef41dc4f54faef059aa6f7ea58f9ab59bc9f53a117ef9743c998443befc020933d858a93795a2e537befd9b7ca2fd34a5bca5416dba0c1692d9e0c35126d76b8317e0b0f53d7057f2cd90b5afa0f451b62bf43f95eab67d5d0b6d27e64bcccf97210c36104cd22c28f6073aad8ef9cfe78401894ff6af3e45c9c9ff38eb68b9904b172cce8ce612f4a33aba4b96e53ecd95177095af872b9483046ed2a6e9b444e2774a25ef176196a5ab76445b4967817cf1f7b5ab39dd93ec0b6cee106022c2b3989220e17c5d46acfbe1a1be59c83a84cd454d4d861327fdae0da0b8d4310051473e273308b492ae5e6f11857bd07fa406952671fb0bcdca1d60adbfa28f82201717f6ceb3a53b5776a4a23444de5b0ef4e165327f7eee7b74b64a58cd8c0323dc972192bfde8f888873ba6d42b246bc733e192c739123835e418383e883bc3662fa69419e34d929dab14553704c8246959cb88d0d1ea3b8845e70baeb9efacc710920a175753f75bc0632b718f918f306125c22cbf57c312a8278297b1e2b6b6622c471a9822cef8e0a7365c88ed65f896f4006cf73dd60751d6befe5258d95b74c6e744f44523db4fd84a96f5ae3dbd76ef643a14d05bf2d980c4b3487c4afe9d499edae3e436281672be2cfb4b6e26417c724105e8a8e03e018dcd8b961f46657cc3dfe76f0f91ccb377fd0ceb8d709bf5540d230dbce7b020b5545676535e0ea7a4c0c0a8fd03455c88eca961ad28c7cd6309e9254e4055e2b27555bdd395f38cbfcb22d8ec051b376cf8f570e354f5965f9c43dcee8f3b8664a620a332e34cac4028187aa394a16f2cb6fbc5a35b972c042ab411e4985f72e442cdfa6bee5b254234796eae05d4b4ad50eafdcce54d0f05ee55139bd5f955613c3d8abecb24a1a902dcdb01d5b8be4db83255964666ea28101a826fcd674f872c0e48c64f73243f4eed311b9db4cb82cdb71bdadfbd6836eb49aa8819aa3b0641aaa37f78b05408a1d7cb8c531d8c72d2c185823ae6870bb36972f11fff5b08a3845b9d530c84d8d7e1c6fdfbc81aeb4c2fa16c88ed343efdafdb05635f5e5c7ac936abaf7257c10119b54826a23d4da2e1e413d9e731932769c926d757cc5f7b818d852651294c9803ed8802678a72720eb89349f5b51be06ba4233bb16cce1a834a193db556ef4a488e2e8de005b27814957632c5798746ef150364b380859844da19f9c3e2e36971d1a70e7bf84b1f0cf784277d570c9014fd79dbcbcd347d1cbe0f3ca08f22776dbca235beadec1c344a3b0be7d30473f1f172af7233dc5463cea54ca1dcccbc8ab784a5a5398bb56bb123d3ef306a8b1b41be154fe14bee6cc53437028023040580ffa7b3e55ed936842c53820598d7aeec22ac7ba30848e6c9debcb2cf20d577c58c967eb525026341ee6dd957c850012b8ae029e0f8fa362f80291f282287ac716ee2e20d706fd36cf82e8ff782da5a7598f0919dd4d4aaabf32a8cfed72e58f6d5be8666caef612c424ee48a22d34d818bd31c670464afddc9c982ee079df608a1868af1ae91310fbe533fceaf3723e7967fa8f6a71eb529a7ce9fa8afc78b9b5c29f46258ca5c5d17ead9f966efd9f8e623a41036a6c4a03adb77680967c267e92d0977c4cd8afe9f43a6b81468e1b22ec47c58250652da1137f11faa0f945d01fb03979521ba32c743f0a990ad1520f525271eaa44ddd8d9b8be1c53c2f4ca8d1b43c4679335d3072f71b407db7b42f0aa8247a53d7f63e234bb69f1b742d63f98ec0602418c1c7d353ed84973b7cebf7316bf9814cb39c2de7a5787687bebff7be0713643a865172f8e61f6b655c41139264ec6890226a636f15ffc787a23034ce792da1d3d45d3974a35b1ed163cae993de7c0be2be4473cc86ae4fe62e7fc6941e49d12fc4f70ecb5e10da22fea5c89cdee1da748b03388b4e4aa393158451697dfaf758d5343c5d93f4e51760295dace79e812418ee24aadb731e6de1cd7eea0b5567389e62ab897f48e352241e61a64c1858ef38ec363e0fa7cecffc8e08e7202dbb3666dd0d0456c17e68eb1902b62dd9e2ee00740f1ae66fda98ecb89b076d0e7e5616a9213fa71b9ff321381b2f49eceed8607d1b0df71481f1135f4007974459889cb7126c6e17ca870df825c5ad2d8bf96b956ee32b233da1cf6f1f821716296c802d3ac5269acf75ae32661ea49be98c285fd837ce7711bb0667a50c80f10e408ba920f09794304b2088665dfba40ea12c9cdcfd195278727b0caa9b73991169d0b83f90baf7a546fdf123cd1456e0c9dcba7791798ca2e5cd334fd8995a6f8e3e0ce095600a8ece85f594d425e715ba0344c151bcf4570fd94100f9517f429aec79d1c6b81224e7c54fa7ac646d75614e77d22ced90e83c6cbd515c1ec0288647c49339a82e52777898d6c951c3ba33f013342b39a873081fec11eebfd685c8f811d90b33129c65792d5eb1ec09782171fe7d0293901ed5d2fab54b8a292037f262fe421bf8bd74ce4d017d0fbb27ee204d5e98b5117a5a150b704660281bd4904f1fb53ee2dfbf2299ed7d501ca929e6b50837687501ad3bd3f3f81e27d611b1137c7a36d4c7da06d3c72419dc7e65cfefd1ef5eb5f7214f4317d44169718a02e68a38eb07ca1285abf941b7585705cbb3b301afc8f0d5593b181d0177f2dea2ecd0e731993589a33d80bf5600abeb37edc8c17197431528da14963ccd04996e0f54c01b074e403d23bb38fbc1e13dc74aeb2468fc3ce712c8449e0718372034692a552d0d1b030edf727b7871c34e9d81c559668791bb27fa83009d98e94682af38c1ffac6cd734c1ed079b7738ff54f01913ef1d42084ecf4c888ead11b5e6b1cec8db665daa0e8f1b4cc2c1eb28ec524ac6d6eff00de926413039ee7cfff7fc05c8d9bddb21ca6d005a1cdb790a18f7dc0ac4f338817e44778e00696101730afcbebf1811e4c6a1933358657f533aec836c14c15830f6a032aebeaf91fab821371cc04328a4e9c5e734ddf358131dafdfb47cb63bd37aa3bd5e9d12601f458871020fafeed1786b1584b68d02397ebaefd9d83b55ad11ad147ec8db447eeda56166b72986c58cdb450efe56481f0bda330fb6228212a630553347618aae83b4fecde9fc63c0bd6b77793386ebbe15749bc50f0ec29c0daa35f561f212007343bd2a539dd870b709c5d2e8d27fc40289400ea642bec9784271fc67dc30f93e3a9478bc93090a84742cab89604b45fd56f50418e917b24fb1c5b15af3f0d45db43c7c2b17af8a3972227dea98118b893c76d6e41a9542b9ded631abdf86bf7443d435acd0a16cfe46aa9de276dd27883801a09fcd51dfbcf7e3dfce8d8a7e1e83fbd7287e8240bbc6e0c83608683a189c148a68ebf9752e7bdd630a5d518ee52e47a30ebb454ee2e265bfa8b812a249ff83a47b117459bde95535e5c607abacc902673c55b7034174a94a3e3bc966af77d57a93848387bc3fc39502b0cec1742834aad4e5af689debdff3fe35ed4555383b9a2e612de73509a42a8303c5bd1f3c55fbe92841be9c8c6c2436950d288e1b92b76688d51ce7e435cb46983525cf7ccaa263d8c8f96fb2a1570a48426467da998e281be68b5419d16eeb81df9050a95fe547f24daeb50344ee8ea14874e8dde79d632deb82d556567e68c37b9ab999c479a6e18f9015dcdcdc1e41d23c2e55979b8f8e8dc9c7ab9311471bb5b11d05e5f798d04567acc56b2c9b3ec87c7c1ee2ccc899eb74202a8d134ddf6488cf4d388a7d188d1e29b8376d00673a2d8892e577f8085869f0e0e348f2c7470652cb33d22ca19e625822e7c28ababd95e7003bc304f2514b6ed5e9f04cb6fef50f19fa9f2c84c9d7979f0a3df2c90baea2b255df334348c424536356d104d7b4e143e3b7f971a8cf4d8591408fa8c0b76d40029447e792c3ea2abe6a7265e4d5e96d1ae0fdf6e345df8bb9977399c0d937cb1ee2fe54f8a6f7d86cda07579d3ffcf332e4ea7eccebefaa1f529e6aadc39bad40decc9882c5b61528bd0be1c974519abd0693861ebf343a64f5dd8f030496bfb9c8404b5b5d4fbacea5dc4b88863469389aa6720001f6fae3ad423d502b4117e065abe31095283876eb8b2ce77ac49bdcb6edb54dd8b0dfb7813699cf994c934174789ff73c4f46cfb69b226f478ead37e002e11471f31f4632c1231ae6377986d7cb1b61230b6cd627e8a9a778d5c48d11665eed9349750e618129ecde2ae07de6f9b99a4d2f8620cb0b2747ba763724f7989545f56d4a35e3be65e68e6083b37cbe926dd3b8434d8f592177f8e2cbe8dcfcfe176f9a5470f593b083c72e038f3950f7f94bc29ebb30d32088b1791ec80141bec90f9c552cd96692e805425db1edf7ef690cf35e09d6e02d94a098cb4bf648149010ba927be462e239a66411adbdd5d296cee62ee2bcb4d7a6769a0e3ce4f57bf2ad3561a55c4127b3b16588ea5a3ab1d3d4a43ca3431fe01d888a0677882e49263f384e3c4f404f28ed1a91890de34c864fb52120bd4cf2f8b9278a12ff8f48580b58991f66c6581fb61d89f26174bcdaf655f74c19fab5aafe066df5050a4d12ab4124fe97bd419c42b6b4b7f4583af682bdd8a64a81f99bc992c4107e761b2e831575a12dfa6171f0626c91fce21bc752687cb3412b0c1494901ad52db899decfcc149a87c568c2afbac2dd7b3645cdaef2aea0de821770fff922f252d1831551900b7d467f4b60c5ba69d4c1966826bc563d537fb05ce2cef708f4c8b92e7c3dadfb77016cc1ef4d216efdd726922a4d719d818b9eb1afd30f7ccc0b2c1aaacc8ba944d2975de789348a59f92b0919d5e1b8b1aac23d8ae3cb590960109c4f4d6f8b3e35b6ddad3b7050b07997f39d3ffc48b0613dc4f35c5b4b97e07779dab177219a42ec1214868e63c2356bab8bd549fc9b4b693613863e98403357b3a90da65bf5e2c68971d0e7957874315520b3520611acb32be79cbdd4bc1cf3cfd06db98d11a28ba42141866664e83b7ec8b5dd933f4bfdaaa32352682bfee91977871f35b4561a6e8b2035246a672d708cd4560f3a753d6c9bac028bad9dcdd39c8151a9c8e36a3a1a414d0d66fddb43bbf192f08eeb672b55190488f864fcb410c61468be620ddbd64a9fd68312608ab6fdb5af8e6979e1440577b1e6bba9b9b28dfc349282288f6058e0e5000bc46e95e2fb9d0bc4a6a45c98136c6b452b365bc273d3c0d2d582a870c2645dac1c8d6aedf49c574135d3b211d4422740e468cf6c64a89a1197b8fd8ee071c7347b13a44dd05034d0358920eac0e0dd378cfcec38cdd62208a9e9f03702d80f316a59e80c41e8191dc8ac3f3418fa017a22d76d58e26447e55e1f8185bf0eb1118bf5637b523f10ae565894427d899bb523a0b6421b601553e96b8107b2f4953ee3bd365b38e1c6346f6dbc3790081cbb5bc8f3786955b3fd834412bc882d1053c0a1226ad78831660f8e31d2b7ca38b3c4f2c1ce7519e6dad7af622373f14d0945c94139a5c5cc77738c60ba0910a39ae98ddabc5bfac7cb9ae0564ab548be4d7d7bce6839163760f1a066a5cb557c232aafb8f60e6a7d6d84c3ad0020bdf9651d33127faf3680798c20f933991f13334028f2852987b7740a528423addf0b389f569de50e52f03b55cf902626c0ed0ede858e6b33cc2c56e1fd14c4763033cc91029b4f2646e54d3991d979b0f72ad98b893f6439eaeaa8a37823cc618171573c9487cabc31e9f820ddb38bd1d7e7612a01f1a4f754c634cb923b379b8f2f451dfbe3511109532acdad0d4c62667361cc671f34085f95be850750d8b55e0fbb0267cb91cb4c733ad2b6ac7b53d02aae5d8e590db10e3b000199edc9d2da29f0d47fd290f8197db16e8ab8510108b1c2977416c48c3449298146afd29fb7dfd06d1638cbef1c6ad9ef768b148093a76731e1e6327c5cc1b5b8b8973f7b3fb404477d906f41f44c9ba6a865fd85a3b3499aece8ab814beb5722e1ea7de7e5475c68a6ec3396f4423807de5e14cf740a8cab90bbe3fccecb7ee400a00f3b5df6b9109e6c83af8028acc03ad9fb5fd7af1b7620f63630f83ecf17add2b4e7c434e5586bd2c2cd44c17e49fbc7aa593100f5f4230e2903a95b332fdafedda3ebf44f8689c0993ba1478250575d92843290d47ecf63fd7afb21512440ea46fb1dad2fe1b6414c21a13a3393355d85f8097214595e5fc4b783ff248d10eb94d60ce3d4e808cd19b4daa894dcfa24a83f9b2e18f6b8a773aadb970b17b61a45f6f613ff280acde1d7ac5592fa95e69a8d3e21f1aacb891cc655798a5a4116575dc1b35367a75345c32c0c592ba2fc8b3088555759eb0d8ee1ba152f497d38e800c993eee4f83135f448ca6f376a56b8bcbe5b060df86e4810d4bf7b5136b860445c104d1b8ad7454be72edcfbda45e9687a2d55345e0d91262a0e84d4aa72d9ef8663579de13d1b941cd0dcb244a4673843b1c0cbdbad4de7043d303b3f682a59876d1a3f93891bbe53ca1f47e81e4748039a1990061e064783b78e79aedbd7b8f2d24dfe8d3a5bb0355068c00c3c32a2726dd769b40a181ed9a68e6ca0406875f7b329dde551bc85039d6f03649b5ca3e2d793604dc597fc4fd926e408fcf8bae3f192ae76fcfd3b9456debad75ce3fba61532bf1dbe077b18eeb118e0f30314bac7d36c3e8346f5ff2cfd21944256ca06baf4821c3969a8bd9e59e303cc8c831f937d74cf20b094d4bc9a9d5227e82616019c5ae1b2e257b0e08030c9618208e864bc046102aba8d6a4453e2a72f19ce313bf3c65aba980eeef3558069576ceb91f9714b5a02646b786a08761e85c1135310967c9e2c45f5ac4125f01bcc461a762d0c784ac56d64ce88c7f3c18188ffb1935363964915dc6f677f43375d48e401e32acc82311adc4f166f035bc58bf1b34a3c4c1f5983cd6d6817fc38322cde9b1bf9299509c35cb51e9ab23a291bce3bcd8faf7fd1a330839def7759dbee7a9011c4d873a31334ba49ad0cddacff47866a8a4dbc943e056ef21c508bbcd1f8e56493a1e9256d31c870cf5a55cee7aac970176e23e2c9bc5be690c299051b01cfdaed5b9d425a2e01cc79eba93ab3a2dcaccb8badae4b0ad651f01a97e7b4b6bf9a4fc288f928aa0e75db5db9ab81e1e4bee7077c32a99b3da40573b9e07ff5250dd73f359f52202a01859a8b32e231f118918ad12e14297dca593c9aa4c4611a37fe426bac91a1eb6f98b0044317e941c19311b9128d9ade1477f016ba4caa23294b501c96ee88d653ea114bc687c4f2081f1f5cfb63b787ee9092671eb25f8ae160ff09fbb48358a46a7a3fa5bbeebc64370996ca74e837d8e2d032f46a9e063e6cdba23fc724cc3f2896966adad5940fb65d2487d0b293884c606957beb1501b0dc85cfbca2365e6813daaf8d416e2c6233309609a7431aa11fec6922a9bb3c5dc7ea2aecb5e68048a14bc8aa20a7ae47fea40146e5e58e7578c30d2a73006731085f81f2f995f7e6c972a1c07f8003c9df08246805ccbbb226de664d0c749668d443249a3966244a378e69f4ceca10e461ce9c4c4e47eae73e7944b2b22680ef168c88cb65f5ac7ba8b2cc8f7142fe974700112202dff572484abf1cfa5142b69de6e2e93d31404040004901a0a0d93544e0b9b68aa6b0a6894394623632b5c00095c48c0be9becf8883b729b430f1a8d4ffdc20a6674f2087f89f56fafa2b3ac8d200fdf7ef131c6a24ec0086b19c98917bdff9273ef6de83b95e619f905c806e3d70cb4dfd64bb48f02fc25800c3aebe72076b93ddf22ff9ffbae8e70cd120330c4da3b81d53bf7f97254c9fa3e6bc8f89754e6f4ab4f171f70b54c5879df1fbcb804f48771df6a65fdc7eb2db6e159339341d172d8e19c3149973a9843cab027aebc2bff04b3c0bb236621f658b41813cf79df4a9caafdbc603090d3490be837a144c14b7a89978cbeea2c6f0750166e2a603b2db37e4a8e35b61d4af6679e46e16b67a2c8cec2b1ac4a352d4d511923e124ea87b05b7190abe7e15645a6cacbcd6c8cff42a0a2ab2571690ef214f53b671c2a42376fc4c2364763144bd026a8d3e57721f05bc45b7ee060b176efa2ce5d067ee6ceb492a75b0591277ba2ea1dd684f9e3c255ea4313e371942ce801497201cbf4a7112330b5c6ca80d44630cadfa2aba9c8df408c9a13186d0aac954eee9f4418cb61778e7bb8aec70592b5293089ce3751771740444408d5b51dfb873e7eab4db4231327560464157ea28fd957b749227fd3cfef025c81f543b3b67250cb1bb576977e3354329bf75d5f0fa237d51255f496b20c4f97e80246017c6741ea282108489688e0bf751ca5176e25117f28f058712762710047f821c71cb750b3c0f12dec616b3ba7a9e98eb118906f8e90f3f2bc6cdd0ee1905e96f956fa9fb08f1025f3dbf8a7dd6c067e9c94cde1acbd46e783671e09ca9f721b75dbf8b1fba60ef732b7e46ef07b942d005dd5ab567987ecc5d05589eb6f26c7995c69906d4a24ff9c36d8e29344c541ae5a9d921191b8b90b304c2dc2b5cf6d8147ef5de8f99fa1db59921792bbaa288ccaac653998f42e66eaf0c6a468d3d07feb20445b3bff7bd575f390d2eab53c07f15fc507813bbc80da15967cb1273aaaad5e97e2921c099c6fffbc88feda6b4fb79482ae38688d2a78220ee1776184f2099452b1447ac4170e6c69da27e0e9b5f11452672f84b22bf27b73a0f6a0ee3a03242cca0e03573de0d40962f052f67c35495c00ebb51c5c26585ca1ab03702397ea8f2168b4a25fa2cd038cc9f5e68b50780c34267950fb0531b43b3a68653928f4f669628b2ee06104ba3e826da2c08a521146da3cf292c56a3bc4dd85bec60852f46c2f294f9da46480a16b05c09c5d7403ff2e6e4cbabdedd81fbd3e659ef1ba9c3cee98d6e8e812f67806fada8548c89918b4a2acd0ecf270a4e6f79edf81fd160d36b1b58ba8dffe0261c7096cef5f85139b7dcdfe9c9517bf47b31102b22b27448ce1f96e1b78083e823cf4324d1eb70d585a714ddc37c4ce5f849448ed88a2b08337840ffb3c9da8e153837c6f839a425ea45fef31c7f8471f97f282a43961ac036e89ebd197654175aa7e026065269fc11eb857234825aea041fe3ddc1d1308cd6cb2fa5f11fb9e45e95f020019341a3eb33a99321a1ea8cd8bd52a9b87f41be7ec7d33e07b8c1019a6d2ed7215ada5cc754d4536f4bc332b85b3311bc903b7bd10bd2ad10b60336918d3aafc963327835de867b3479afab056400f9bd87e2cc2f9690d129738f9137db26fed6034957617572502fac3f89172d9c177d8ba5a8a739e25c7d38018cfe7f22676ff3f18daa61af3e55548b8316e9ccc8f0addf957e5ff689ccbb45dd6f03470406e8239bf4e23b6eb037171b435670064503000489799bcbd1c60793663c52a9dcd72e753c2884e0a26622959909bbc4c5a8d11afa255d82a432a75c382037909c67c2c9fa6e9c46ac3cc55ef28874d39664a4163e96cec217c582732c6aafcb77f2ba4e52455b9580341d31aae6682a3e839eeeaeaf1196f5f14de0ee0968d7a321540f9b7ff7c37dd226876c3cd2365774036d0debf0948ac8c5cd338386ff54922f17d2c7954ad71005a8dfdfe8fd64306ba9fcfb40ac70bb724cfd37e3145f9246125c2bfca068c1a67a936041a1852a7aead7c9de4d1b1a769f2dbbbc4a3bd66eb6ebe68a5696f5c8d1a4d4fa18d443087507a398b807b64e0396dec81ebaf5e6ec841f4cba6f408c00b17cb0f3a675d4fe0fe63a19ef95d374d6140664ba4eba5cc0fccbb0f14b35fdae02b81e6e932c396cf891a3395e8c754ab4eb088e932548018226f08edae3918930f13265b680677726dff983202eff7a47285ba32f1409923ea1b6e087b7ca2c42cdfcc82570da5030ef2a57bbef8ca68b590c581d5f468e213cc474b9d3cdeb7c8cac07d9a04ac949483f43e94d30df281a1cf101b4ae7e6154a4365fabf02c38cf3e283d479bd94cae85ccf3c7445bdc44760f21d86e2ed669f58975863a4d4790f2aa32c33a153153f1905815218341a1c03702abad386ac03de583459ef4378fdff5525d8433456c643ebc59f84d7b2a7dcfd709bb31273cec892357cb1b136e05049f802a1807a0cafe5207819359d4c2b73be64c4c60a1cf24ad2c0a67bb7fc661d6000f45cfcc2399e8cd64ee03cbb25ab0e7f475e848c0cdab5ed8eda6b3e3ca3c19e36121fe7767ae235f3a01ee01cf7bba5ac8f02ff5beee59452f6005963d9ad8bf8569802ab9cbb82860694b03f95f5ad7b7066c7b9cdc7d1cc2ee2ae3172c9ae9459c3a03a643d4a7fdf2f65677cbf09d3","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"d22f26c327052c46c61a555123c3b7e9"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
