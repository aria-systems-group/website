<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"1a8003289b22e975bd4cc38e70391d03f1c798d1de744b974575babd54137eb9371b9cdf886b28414d4955507073ff08360e1afb6ef4eb84bca8a9edf7c010e5b22a3345aa97325a8664fe22bb97bd7d28f54630ff96588fd334752b342e710dbc65a6bdc9021a7d468bb4382a862d15f0ed6ff5d181c41c3d2bf3a41d8d3e3aa2a1acbdb06d8d6db5d1f73d6ce0a9555253eedb6bf814569b97a475a9721af1bf22f60ff1f8df0c7743551b600466ccb4cc54bdd41cd659729f540d93cc6fa69f33b03181f13b4e07e30ccc52edea2a77e996d5cecff5567ca07caa67e305aaaab995fa11f04a37dfd62baa2a73f0be184b5d66846e02f5483c4f117c3193270a19900b044efbdd7db7b03d4372a0ca66bdfbe8d2351eb5ccbaa140d073443a62e3ca39ab62a28e3b55b5028a72d040e741d8d70013a919422a03f3c3cec77ee71285799d5d89ce75323701a92ab806ea6fd625f050bf1bb425faf7fbe39a32935185ac2f43e0128b2b22695232c3dd0c9681a023e3199464ff255093a7f8322b7493db34d0dadef2cdbcfd397523a57e4a97a8e8d55a8cee9b24a503209344afaa8342558684b66d8123008cf9a76f57a043ee2e9fa0f1f12477b92161cbab3d09d3f5b8b22ed407e50129a8edcaf1439c3a2575e700b43aba4eb312ff1132912cc01807336f1d7fe716f5f55c503ffef15b0e5432672dbfb1d3a61041a16f248cd3ff710501c887130650ada2f26b18867a141bd81db4dd029ae42f2bcba853f62ac18407a284d485d99b520b7700e55ebeb6ac134321c4da9f77159c97f6e0f15d7f19e127082482f62b5ed52c3adcbb2e5153ff7c985075b90f79a00b3a37675c67281099c37832b78a3fdd15ef3cfe7f1f50f0d3ff4bd3f06f3d3156573e731cf8a19f8a88cdf3736487848ed28ba6f47d8e8da22b5cd3aec6e8a81610f3284ce072a4ef60b9d3fa15dbdcefb34238fb58c2fb6e1664348d0bc432349f0970379779626a85376d40b154f3040294ff73d13be372cf05ef82f0dfc27630bdb4f638bdec5799ebfe3e2923546c7aa11ae60104e90fb379e3391498bef36c61311b80e55b1c8022a8552d947729eb45d0267637f7372d7cfb452281de1ab4c0d46e6f95d3da7ccad2c5b4ffff0cdd3a027832e6dcdd9697f96e41b5f33cfefe1775049360080cd31a87ff8a6f3133b5cb4d29cdda3d766249b52fa3adfaffe00ae16d2522bfc77db38a84c51101440e766258502c9e9eacb2f67853d49aacd87d832603c7d62608b9799ad35f62748776b712e551978c868750e77e88f3b47c6c99716ad6666381407492a118c8b1ffbb78f4383a03cafd7de9a6d0ea806e9acd9383be342f04de8d75b9eebb32e378df550622c07c38e59d2c1e87aa31e62e38877ca3404cf2d07e16d221cabe50a6dac3902f19969ece90a24cdf9ac34d20c6fe45504cd3c293eafec023ba21d9fc3c54430ef76bfa048fa7abe8326e0af5184016fba3b27e5dd8bf570b5d3278ea7ea20da356bfb837437cd29af513b460e841d89c49315fda8a32e4a65e12246a765359647074b5cb62cb0432f20170d31f2ef44ff4f2db4f7168b5b2fb6b336f906656e0eba139b43b5097f47db2df3502f7a4af76251602eac61186b539e8b0ef5651ce68dacbb549140e9d36816da73529a78e5246abc53dfb34255601531e457ed0681d8479cc432b4a6064217886958706b1fe86ae5ba9bdd2bde36952d725185bc5a29ccf3151bd80e5b73670fd9ce279f55afe8b88efa23a6f03e5012d876596a6c336df7807364976670cbff0426b0ba704f5e2d95ef1f2543bab090a116387697306bad0565f12b2f3785f9792b393ae0036f9d03b26879f61827dd62d303502f480afb1f036f3b899c876127f70c2b05caf0cda830e850abf1897fe9114d3774769f40274cb2c370963028ea1fdd624900ea371dbc475251448ccb36e8d0798b5983603a45bee1ecb972b9b69cedbb43ead85bed45b3afdb28e8f429195421900637b4b108a46621f59e3b5d411d6375a6ca064eb375ea1699aa121a7848bfc2d42cbdde3002eab5689cf3faf421e4bc31a2b02b9b82e20ab931e122f94d10ab0c5a9d99900910f8e795853dd7cb59b5abc5fd567f2b8ea1334265d49d2b0c8886ef02ee888452bacc16034738bef87f84aeffd387df38a9276fc3323176054ccd11aecfce5787fd14e35121930ca2a3812ebc3d9362e251dd8cc2fa493c3a8510a98bc13693dd90c087980ce83a759009fb81555a7080b0fe17db9c180b34377d2f10e871176fc867fb9d8e2491c234e904dcf3d1ff8df297c36a99e4690c1523bf8f9dbfa63d8a105ccbff094ff46010b6f42cc776c17885213b0ca14ae560458b836a1ef293ff207f684feec4f4c09e22cbd4e034c8b5b1fee49d09739a394bc07cd2c42ff7ffd9a51f9f2f73d1246ba66fff9bce9c7f4c45256de2e18aac73e75cf8306de8ef1125eb990a538f778eec6cdafbe78d27e31d11293297871151a5c98a021610ed4d31c2a7a0a5974ad07ae194736b0ff79e3f515e93c3e996652c4aaa3224119ec4ddfe29f6a7a1181afab5256bead3afc946f87024efca7559d37d61aad272513ababfab392748cb51478017056b77823f1daa891c47636893d05a83f9ad9f551fb2b03cc6dd8430560da982526449beae62cdb83627e58b121e07df418430c790d8e240db4b8b7d9898fdf1946b6ba1f1e489716cc827e5d9e659ea3954e7da4b4f232a9def7f91087a605f48a0e54896e47c0606b40ad45bb426b0e1dfc4d249654177ec788829f3ab3ef70e03bbf820148c14fd706f0865b8c2423b67a502a8b3fc469c063c0d565998dd66a6de707d12fc2e2116e82982d1725a37ae548e5c130a2815a1deac312abc96f52b3a4f89de4c0acbfc8ec1bf980b9b412a102abaec096b6d246b4bb90ae7382935d36388c62e3e7897738f2cddad376f5658237e5e79c6394dbae1384c115b4d87580fc411ee5b5cc2847f1249ce40328936e38887fd965e69bb162fccb4c90fa4c4190b39da1f3bd381867f5c5be2a9a8544453aebb9c0a9b837f05d82f63412ee77d0c7cf5ebe11f0eb2df92bf17a6cb49d746c7ba32dd647d9acd3bfe7faa05f5e1765511fb07cbb211bcb04b8075dacceb1cc29d51e71dbd268de2223f25898159f413b161c1a39ce4cf334f53dcc793ba5e50abc679891fae6300343878fd50d1ebbeee958d0eb40d88bf3868aee8cde30091c02b1cad9fcfd1ff2810d94c3324d0bf37fc700066abab9c68d950c78d1397c1afe6e3f59056213127e6d65a0d82dd2b63284485409407a7a6435664a88e72ebc0689e09d653f3116f75d7b644b9e9ecd060ec21701603d4bfb1b58363b4106c0ac6c8e335fce4e88599bbf27733a3dc93a41019b2bd44cf0b58c1a7c36d574264fb98f153cf7f96d7c5dc2741e7d815c3aef144528efd3f2ba66d0b0006317edc7c5c67e8f27565198ca19d242a359a25ea7076a18556405d54847111e355828c07e1fd42bc8839cb1c4ca0dc0b27909a53206cdacd3124b4c60aeb6f2381d8100812a4e4642db7c38b2be0ac6ec0e392586c9e278429817cd29a558f0e03c76b9efc90907c190adb7e9b1dda2c2ef88ac9fbe06a5fb64c76222792749b819f48de3196deb5e851dc85e6c8fe362e196fe3d79432c65ba8396d145414d8f8516d04557291c5f73733cbca9b061f2f209db96042eb02b4760ea9127255e084c1d3d3e93bcbffede797dd08253c6bfe8a111615d838941cb0d095e71ae3aefbc1af80612ec1bc1477c654d1ebaf0ff9ec7459283bed86923ce8769b918eeef6a7a3627842018ad5312e24d10a03c8e58299be4baf3cbe20ad5020f95ffe31e36324a49a8bd4393b28c802182590a56f07df9d7d420ac85f9a70219bdb130c4e2958062581a9ff71922c537a5ef4f063bdbc2b029c41a86242963452817b75223e05f1188814d84174bf0e74a6533372fc468787b6fbe3b67ce4a8facf5de6655cdf8a5fdb97bde13c4092234a568a0eef31e6c0f04e3f1f58f755bc7b7f65497c4d6d4594987a13bcf6090f7000554fab210a5756bb4b3bb7875bc8c6b81fa07506dbbd676cec42ffc820412cb27de0a889ae2edb2ef612056546a4274c1182156c2e8c777e8c3d1bf0ff121d533f56ee8f2a224bbec1be9b385c4b464f7dc33d74cbdd8552e2b98bfa4f58aa537bcf4c604a193e93eca4f377b74ec37a2dc0a1e479a9b15fb2bf0e3c65af1d23c790256fc5f8fee71067ee37f34635263d45e343db27b7dd9514ae04dcb8e941d9c8a8554a93782796a0c8857c32a95ca49b1e566225ad9e580dcbca185198ea14da869b72c31c81e3090b4e4e3bd3a7525b73da398390503b513f53ff7bf8653e53d06a699992b1e1ac73973b98c10780c707c60471e4f453e38f9b25758b63e255b8669b84723f9087984709a7c2c6eb42146d06785abc5957747431e4cf428d07c8af8adfb9270ca2255d2f0f4977452272042bc47a9ec209ff350b6675b92d5eca5f675f4cafcadde3fd77b3ee9d3696f6b258e9eb4231e548e60b774762a8cdffb6099c94f5b4363d05ab0c128f04bd0a41eec47415955167266e02d52b2786b71d95593df7d1aa3cd8d33227fa784c32bb7ae3c8fb036f2a2d4d81742e8e340029b1a60bd482c7358514c8ddcfa8fe1490edb415fba16eb8b6b1904d20eadd9fbef475498df5c195a3594cd101e4caed47f6383dfa81d7338476a28307dc8ee2c4657b79af700745de2c49dd8006d72c82f42e4b0a13353657489009fbba5dbfc67d095589cc349296fe53b176e87da8d37d9f3fb598f008eabe8269689e0bf057949bce922fc3bb48f37908e4cc197b9090baf33cea47d6e4d1e837af0e08ae4e58b82eda8b5b359f817795de44b6161a9e678ee2e4337e34e036b96a3e95732d74c91fc1cbcbbb67c1197f065902d08daad51ab2e14b117cbc2c4a01c40e9d1d3fb157455264144e3988dd5ff3ab4d333b94073d0ed62bcc4642c64a0f729ce7e997f41730eebdd67a12c92389b73e66b48a019f07d637819e6458c26c65a74c034cd63a3f5a5a9cec5423706fb62c14abe3df4edbc7e13a862620e17ec14c13a2655d59bc8f63332097e20d7812b27e12c5268f74d04fd7639df5c2ee6e442f76e47a69cd4c3a8ecc3504395497c5d5b820679e9fe49a265dfd6f0b2617f86e5b5fcf275ce93689fdfa5afc0aa51097966d776b9c85a17f375c36ec3880e0fd3d1864c61ef2e52be9397db4496e93f1537fc36b7402859e35ec11cd72a5d038303624d1d80df7d3bc76a283c34120af33fea872c558e57679127d7dbb547c28fca08af21e28738acc69953af0736ce0cfd80e971dc9c2b527f08561b33342b6381a791ac5765cb4e5d824538741dcbeb6849d672682e40f8d47070270c5561555d613834a17ab7535b3d7efa8d5e64f5de156029fe3cc9db88ffa06eab0be00cb702a34b5ac9e5a74fdb53a023745c8a866a8da3626a14c4302abdf90bf9a3abde135dc81278d5e87bad5100d5f554555fd66ca05e0f1db60554b0d1898098ef041ca5a4e0273b3d50eea321a3738e70ce7e764eeb8d327fe4f1e89d00236bdebd08ca25199410329b3a8aa7d74298074325a05aff36c918b564ea4152f0cc543034f5fba9ad2b2a407abdaf2b085497db548012534c3859b25bb5618e099ffce30d26ab70853f63cde612bc4ab60e46189082f142e4fc20edc349b46dea3d0f073395f048985f20e94b8ff626413d4b7a9746704b1888944204dd917915150191b68c3f96f37de385467bbd0c3fde7eb8da283378091eae4ac2e59ad2de101fbde93ea92fb85b74c542c4f19939b0a4ddfe907e86aef5d40e1b51547795b2b449f25b29cd9100156ab57f9d6eddc273696900cc2431ec2997cf8dc5e5a856c5a5ebbad226013601a76bf9faa1f381fa2a9816904ff606273eb8cca91994c422e72876946f48332bc4662d3d5d734d14e279e779255083f9268d2368686847a42e8b784a3fc123e5117e95d37d5389f3d1232b8d9b6d4d7d9ae98d5c5e0b702568a5f83b6fff0ebc1c742cffc58601164ab3b32e0c988108489bf20c142e5cc28febec7caa30014ded31536f552cd61c93e984512431d7856df4dd60cad7097fd0703a6a78f34688d70566478a1db25ecd698da28177f5559b18d8ce94ca9a8cd841c81ad4a78be58f310e824908dc7d109940712925b37389ad4ae9f5efe990f0ec8208cda1bdfb9b1204d83b412b6a5ccd22af1808d7cf27f3676d0805a27b7c9f3c46c7d0068d6ad5e3808290a470314a7ab4ded187fbf0ef33c1315efd06b435ec9423e2636dcf2730916649d980e6eb7a966947de28fc2db7be2b39cae4ef95aae147a1d66049be61395cbd00863413165055b51a416082af1e3057931998d7305efa5fe97728e035f0d5483488492ec727d48bf4d2e80990e40170377188649308541f316f0c22db4d232b17e860562c56734297f27c51bce860eeea8bb4dfc9a263307629af0fd8711255e89dfc33f47abab7f74858a5980786d95ac13fa4825cb76ce062114d2dc6bdcb64e27ee4d0f61a5fc05b0d9dd4b5478d3e9d4e5dd1f984c45267728f8f28e83c168b64f2ba8a39570957cedf9c25834f2e0483b17c8d092450c710451b48269c9fe11d8bcfede7b4226cb753b3173b4316661f64803abcc3955141bb72d8a57e0d389557d2a54a84dd664235803c33b622978195e8514d7ef2df83239f12512c2a397e692b66c38cd9ce2ebfae5087b5f20ca54d512005b2e8ef1e9d0d21f2372af07e0b26f33e4e2e35ea1997fc1b6d515cab8c4448d5a45b95a76af621e03f3c60c974dce2c61a9eb9e79f0d647b0bcb334882883b7ef52e85a6c5200afeb9d201173897454fda5bb6466515f8f566b97d825059a67d53b23db5088bc59b088f604863c0bb96c287f2431c0b09e88a8829dd62a26e4e2ceb11136a8287bd1dcebe63968d863061fd2fbcb0b51548a459ccc55d548699d02eb139fee3fd8490136c886f38eebf4a7d5edebb0d9d467103b541f3c3bfc15737c37a123a3289df54f042202e837ab6f8010f1bec4ea0188062599c4ce77b6f1e67d27d3b18e097ad7e920e122f600e9ae591464f74d83387b04fe3cb1c89e209a8860dcc314d7da7ace4fc6dfd82a87199bb60925a41394aeb8cdcf9e40f52c41816a12aef2c95e35330b0ae37e66220efeaa62d18648c9150738fa5eb86b16737e80f4d794bda0e82487b39610373eb197a9634a4bf28082b171bed35484b6b03375b35125e8d513603159b63bf81a37cf45568faaa7921d7092aeb7e3a5996b007645bf724de874007cd133bd4355827e7e038f1ac6ab1fb887e3fb4404793e189787fe8ed3196a03f1ee7f68be2e0b80cd143f396ce6ebc0fb479ccaf021e8c6e7730342d0524bb21fe001458f401e5cf6d0f22d4be7f2cd94dde5990d3c40070dbda5f66cc4a2c1807f99bfa6279c1c44ba2ef2276fc3ee9dc7550af28b096b6acbce9bd0724bf791b1940938d0fb901aecf5b5b96740617ee3c591a2b3bd0035e36ae47c52099e39f385344f07b94f23f733cc6a043c2620b6523701cb3ea45ccc240de21ad2aa5ba0d03568d1626b23d1d8c5d83c3e025f833ffb4926cf9e49e76e9422abe26a5680f3c251c4f9c64197a5f6678e552e2f2abbbb53a0eb9a5d1014770010fcd9a23fd57bb7927186a8e38d66edf6b8e7b1e5f28970ce84ef476ef474f01c7b5eba5b9128cffd84d2ba4a64e82d0ea9293dc0bb1f916f56b24313d0ab1d1dc8e9a80484b1e0ca5a51a2d2e05f697e78a3ca32f1d2d5dbe67f7ada547d6aa6d08986cdb8ff27f552128d3eb62f2ae58c2ef5bbc8874c4a888cd3d35a83a4d91f65d6a1a9dc0883b9a97d06399624e7b810671f196d48365ba2067fc905b3037161a20ce752916236d2deb552501439c16e960720d7268b1367724b1c7de59dd36bfb8f9739b2555c53a1acadf331c5ab5eb8d85c7f0e6cbcbcbcb3988a8d57049b6d482e534b1e1ed9683c966a078db9b699d8870d678053a091701b875db4bc1940df1b166bdc0794d396888ba91612a5c70a0f103f532ff60a323b6d6a8ae352fb6d42da27c2d875ad4bfad6fc33638a76045804ba653654da345288525430f196b1429e4e2ca0c9719e3df8b943121ef583553bf11cc8313ae69dffdfcbf0bf4ec6f9b0f4278c9f4e651251b9e235f52dc05a49a671035bc0570013d289c26507c12505cbafea8c13b927b9974b787045299cf603f89ed4db00d9380c537e680bef9d1c1847246bf9a21c00c9bc7ba8a28c01b47078dd202c28a25316232c8c159aa9ed718b062604ad6db435a289704f4fa1beb39cf57f5db8d542b2c42d9130fa042086e0c2f6cc330ac4d05ace5decd43652a82bf4e101cf9b8538af98b9c9eb08607a6c446cb7a6fd485e333fbb717179e910ea0e861e135f0165074676d0bdb635a3fb9cda60f95343c572260890c5098824dff11dd51a8182a7deaf2d79644f22db06461c44aae4c5ee53923d3416b1188a85d24525e4fc6049aff794038a77ac38e3b2c21d1d2da2bbe42b267cea53d25f7ccb18fa7eb894ed1b56861dc2d2308747e8e7901794571a4a5c3cbc68a603452bbfa526302657e563d2a7b8cf601ecd2eac4fd780b7025205bfc1847bb00140d66c76f05092e3d3bb038f8c9b27cac4556f640e09bf0dfe8cca52f1578fc35ac34132da38409d8778a1143a772a5338ba5d75f3f602a5a34d9cb037202170a4fb4383255ae9f111ed2257882127fadc606c4a23bb7446b4c9acdf14dcf815e98af15d67cedf398cc0396df956dfab60c8ad70d7a09737f79e9509f00f2a951ac2a245b96375d891c0874390fa7d2ea3f46712007e2afbcd233947ecaa5918eefc8d421633ded6dffa6d823037ba27de0085a62066c214d648cbdfc310aa311aff339254c7a26d209c1489c789acf25da7a955e8a5a78653027b92d3d4d4dd429ce2f43d115908e3964361642d4ff4feed93989cef8bd86cf01bd15f3a50a4e5f94bad24f7d9a2c2ddc27a3dc89e06b674ee5766b007fc20232036e7b95831f777ae8b0bf9d188133ead383dcea2a45bce78a687984e6a7d7f00dcb9db59f4923148ec41ec5ebaf9d0eb2c19e58aafe9394d2beabe03a4b1ffc470c926a52a32bde83565e06decdaacf7710350ffae271c26a1db908f219718546dfb5897cd68f3b2577a00c31e708e36ef713c6e9433fc73638521a3cda8a675ef59946d86aba5de14f30d4eb5fad8baf0b2e8ea872eb8b7d45f626039579a809fdb79f53cf52fd23abda378f6476da7d811b866db579fd20e9966fe1b00a09daf1999815ebf5b96b0a503da5608dd07c88585d05235f87aaa225da3401a239373163daf088f2d43e1d5c0616e98dacf82568d8d5d0b48c429916e29740ad1501393adeca0e7816c385dd40faf5ad5c49ee8d97b1eaa38bd5e7b51f784ee61eeffef2815d25b8a471c756c465bdcc90d48272d3ccbc428f0c9ef3adf64f2de491e70f9266fb287956d24a288ebaca09e1a600e89d1edf597e7c5ed7da5a2d0dea52d4e8f00beaf78d86ab5afa609fc6e3cccd6e420cd1b5b278c569f5b9ed20487a05c84afddd78aa4a393c9edff3dc2510dcb5651463e265a94639689fb094bd9a2db6936ab072902f0657b1ad738745d19585209916b83102aea869748291f6fed6cc58a876d846de549b25a06d8e646b36ef8f3f0d9454906fa66ea1a913cfa26505a096f8445ececadd16784391e31962452e6fe7a0b45c04bb4efdf182838613cdf61db52d6ac1bcd6c222aefde9e197916c2d28c655bb2a1ff45a2ce9932e540f7891c731b0dda15b612641870c17e669db99a7b08cfd74ba0f08d632e48cb361bdac45d3f9c04a45947e1b3a3da8d9b3ebd5062e3f09d48c31a823e2099ac39c807ab419fffca1f3826b62028ed6fcfc412863b2f6f1390ac57935bbd0971c4281b4c6cefdf807863126dff7322c2c164ce5e799437a794e1910856184c0486a0347672ba359c3f62f337afb351ff58b3246a1b8ea56c6c5cd120402076e9ef3aca49c6231fda3f96b9593e937b9284c473d180084215759371d0d6e0b5ec27467c841e2416482c36b6cf9b270218530af203cfd7013bfe3bb31ef230fb940804f0c1cbfa0f2bd30a7fb82b65be4e5a6dcbe5c91cbcb83a67133f99f9762309974a2b7cefeb73f9a7d462275f8314cf5dfe94b5d6601add9d73d24c734882c6c17f9b0e549eb3792bb37e5a851028a43d56fd0ed89c57e58efd1865a752170379d7154a220615c8313a5a5f9e2c990f8ebf6122c46916e3063978d241d0ff4ebbe0ebb1b38063f8531535ceffcea21394c8d2b1283993f0ba279811850a28fd734f0914ebac5e45418e9c6946918185551f1fdb001633fef8e9fdcc3b13b2e55dd0c3bb737564030c8f659274604ea98687c7d4b4d382af5b6ddd0e5823c3e1f44074b765a4354ed9660fb87936014b3900762cfedcdf6e7464984a68a64e26e872808b67f4e9a9cc347d0c2869746104d9b6bde11295def259af44a30ed5ffd7c8b37939ac7b74676a19815a85a16c2221f86a022742eb860b09f08f2cf48e54c4e39aaa1c5811ec3963ec800b36c9adb98410dacf9c7e838473d33fa58684da01ee6b49f2732a86172ac599516bf7e8bb9b7b22e89378ef0a9dd1d53be218784a2d3c7db2cb6facdb3866b075353b0c3b81fac5cb35d30165a0ae5164bae4fadbef75382251b3e952e9f923b4df00ccbcf5cec5667c9d3806e02506e91a82f78e1b8772546a49ddd4abb8376027d5746a3368840aa88a21109ba62060b98109197f1535efd81a102652bca1a33acc13f00ead3af0ccc63d3af3fe7cea9aa44aa9b2c1a07487cab636f2c16f7ec8160c55016b35ebd76e3d33998a5fc7ac844c19d2170b7387d886fa2a90bea7c7384898bcf3dfbaf2a725b5366fbce2afe4b5781b31112eb6e8e7118d8b3b32be0c7f2b0098f0195b9cd44dac4b907a620b5d56656e220bba494703f091cf4386389e401d0ae9692b96b7e3ae49e88c5d6522e45d9c2a2540f45d42ac5da5aed8c3c6012feec9635f50bbea42fa26525e48494fde804aa89cdb3e770c985a6be838734e7da36365de8be916f8a6e2ff1172e0bc8b811600cf1c16ce04caaad0a44754b61672b170d85f5ec01e0d65ea8fd83383477e2cb630de50d6fec07a987b27e52f79473b2d29c4d7ffcf3450d6c809390fd1217a581754886433d61b4c158a37849aa03ecea6ecb6eeeac2e6ea5bba1d94faf1d263f80412e523a70da02c2e42993818dfe578354ee8a27b9b9b9e366f5d9ea625350cdf8dc67d886765146f0f94dbcd7e246431ea9c7acfdd2b85f79e83f7036b2c8adf04f744428119578a80eb32492998f19f6dc1ccbf88682ce23bd9490cbb48283e926bc11926aeec51edcab948af1d39ef9252d762ffbb84a14457cc40ef13a8f922505533f101224ba1e9b79bee37ac2d3c734a3ea840ae421250dca49b4cb2ceb1a489b459e92940a485d42e89869f8b83fd0c56be4e2e23c67e5dc2d5c18b075396e6a5f04259ee92f3d8c30b796ed1a96b135d8bf01a9461f6fe8d3ae954fdec3251555119e6b2da2ed2a3c4a9ae08112be7a6bef88029a321cd3d489743b1313eeddc5fad0448b3875c57809ca146d1cce9ab0341ad85c62ada8c535bb2572ce525fe0ef9180340a6a167f43343407ed7825bb1ed16ea4f7854bbefb7f1cb194e35ea73e3da655d98b4d113d239f561414580fe750439d86d651b0f53cb1a4136c0e618f0c4188ed80b6ffa47ff1197064b4cc5e0e8d06b4410f69e3d38d8ad797741a91e7c5fbc5cfadb08a360ac4de0b022afbacc4f6021276271bdc883db97db0e73b55018065b5611e5ce49e68c78f0e14fe27ac7f592c9e0ddf42addb5442ccce3933c1aed7cbc6a0e6d864e8c320f65ab5a63141669abac3693a59a5dcb58f69ad73a67d1e1ee616b08bd5f97db9b2c18ab6b9bf1aff45a9a612c26ab61eede8ec717b4cecc5efa413324e0b0050d9e8981ec68844f961b7d04251a3a05c7517c81979c923d50c42c03226d41aab5f1a1b0699094d24fe784febb0fa00079f6fd86b7bef792be22ce150c53dc61d224abab76a9a018467d1dc5ac530fd937047f493dd7f348117b2d44bfced29dd529d8f3a00b03a97bcdd6148c63789a51ca48715657e0d42043cb4962b69bfdebb0d22659896f78ce70ab2e56db5237ca8e10ccf7614e12887a54f232d9f5bd2f1b06d393affe4d4be8f5a32a4bb5ab719b857efeb15243ab87b3b5c995064d05ffc75ff0d6c0fde78655ba8b8100547a345572590c6416403a0f13077ed7482f2f6d435304ef41475ee7b8cd342b56bf7a4db6cbee2644e38a821309f9a42975f8f3bdd58d0350a5774c6fcfd81f9449b80d2398137b2059833e018b871cf705b84e2d346fd937c654e3bb8dd7fe2ee60a5d8d889c3c524a12f9460cb8520fc17e2c007adf5e0e0906079f3bb1e459d2a4da20e40ae658688e085229527f9bb4a148d00c8fd9df201ed9acb0efdbca71a96813bf1468ce212ce0305fd5a1c3da3b89dd46b6bf4ca94f343d15d7ea5b11e2ea01fc72d74fa9fe1e857f2bc78d4352b054773a81a9c5c91f26fc60c4eda03fe88782ac21b4be51480ab805099a9aa4de42cd69405fbf41324af2a17b78330287f99d40f83e37069f96c81bdebebb22393d1771d48811761d65494614b9571705b4299134021f7d0d12c6238544918baf03f4d66ea7b46a933c97280969494593f588c6940e05f8ead41a44e5cc28c81239f40d40a150e82582fa8571cd42e91f65cf21ac9e919433ea1025c7fdc6b312cb2efe373552da6d51fde482bed8b52fa8131bfc77203ce110088ef86cdbf47346eda36f67550aadc7f7ae48d703769487072c51b2523c5bc12c63807e47abd6a5af8bd94e2dc6f663eb84368539180ae99f03e9bc866764e1114f735a371596b15edd20fcb51240290e0babf4b035237cc549a13bcafb618e465834b32c24757339e9a735c43ec3c56ae3e1831ebc65cc24aaa02a93a00186836aacf98963d045227ce4fdff5efbe2a53afb0613d559ccb58d4395a63b972b14a0b494179bed66c0de6279da19f237a4233e674caf38a27db5bd2b32b6dcc6a4be79a2873ec0305e25e636a8fba459e614ee673151fa69a6d47bd8cf0e362229fc1ea717d83ddb35433dc79c769c9d07d59cf6771a59ee7766d6bea5e019b15a6dc6db612ec74b53375682d43afb1ef2067aa92022a5e49cad4eb63fa629ed0805838c949628442ed9732787e5de30bdf52900fc394d25633dd3a3523c575581142ffc29a21cad52cf14681742151cc248d902014416ab24f793ea4ae3fc167963dc258099069e6a05f8a1106280cb68201aad4ba9cf1c0fb9b243b306590b04437cde952119041ac250869ecdfc24443b30b15d4fa11748af531c08b761a88aff3ff8297a4f680b6b83e2a0dcbf8c9e9d1b4e587b8b3a76e7d773e9fb40a35f8fcb8ff460efa5d1f091197386019994af83e0b2ed12cd656f17ea2d434ecd9ad8f3dc9efe5dae1ce7da3714fdc1501abea470a45374e47e84f479472a8fb6961f7816c529d26de9b222ca1256243ccbb0bfd961ac68684b6a8d3171bd2b680131f7afaa51273e8a8adae642fd084eae9728b7b1c991811049838d33b6d14467d619149fcc4575b8fe7c06fdf07ccca3a2118c77cb3ea0c08ad056f302918e4442efa0fcfc08da331b0f7135c1e5c1bf09a2e157b1ff442cef56bc5738c069c0aecd006444d0af2bf99a1314e9deb55abfc2f98608b84314a07b6dd0a480883ba562dfa06a9484b165f16743d401c63c30167d4a3e3e92bfafb349b689f9a5551b0b2aa8d9321b950f9261887c403d13c40e5536942063d3f37affb614ff2b73d3a6d7f881c65997e94282b4c15d1f33d40608c2cef5fb213e6a8c20a941a809c2f0dbc159e67789f20b563a18c10b1a149bb514e35116e53ea5f1a7ddd381c4690471739cd576028f04c24fbd08c96eb533e3da4a149b804c9cc2063f1d9883378ebe74d36c89aa54d6237da8f42ebd100fb79e8d81228da865d00542a9f88eb3a4e56d107cf68d628961f307170faef119edcc7769ff806437a01d1711fff422d720a5440ecc694e987129b2a689de4ec315651d641352eb071002840f533d5f17c4c76135df5199b05d7bb433267044b79492d07ac96471c7363e9516f92d3e4c1a9a5cd43cb7c2118829a0ba9c542ab5b6e84b5f0ec1579a85a3457cb14219c4d14c8fa9ea91623cd330f014a682f749e1ba3d14d0e494d68eb344501282440ad7d24b42a7aee5ec69325b286340b155cb1b84fc2440de26f3563ae4310e9ed4d864eb1d45dead814e980ce998897062554f15e1514e16141d78177b31b50cfe34b3fefdaedc06a04657416fbfca096f260c8fed5f7d901136017cdd7de8275d3d332fe2c2696e8fb0406fab9d73d64e504d9a9abb3fb755bb7dc9a7a1dc370f526caf10404f136ce9925025a70236b901ebbe668676eeaec41af98c97caaebde960169e6471dde187c15d775225e8e3d8086bf0b162610dc3cee9b006772f5d7375578c8b09dbebb005b8cd41a310de5aaeda394292f6f5faf183c702559acfb58db1b905172056862f4b346df24163b7a462e05e3d5300531fff438f72c084b26cd92e035efef12f9360efd7983a388c2b0534d35c2b5ec3657068309130368d338b858d51ebbe35166d86fb6c04a344d2d60d07bef3ca463f0e79d8e38e0b32281c36e619df10e2f1f4b7522dc2dfd2e9d1ad51fae01e98be7b7d1a03df29af7ba37e1e782fdfe45791be209044ab62cc8e2c62fea9b3a698879664f7384d21008bbb18cdd1b36e68fb439471839f100c7cc23f1818f7a136fe54f5e192e2ba16a6ab9829d5030618ce8e7322b5d96fc0522e4dfe186cc5671ec22d8b205ea8325f28272d140320036a83f589ea2906156a7d67014f10557402e21530bb0702a2443b5d314c5285fecc8f4f8a3112607ba47735acdb6d068ef7d19bb817a819c46f0ac54e92d61ffa37aece4328c4a94688858ab6ee4a13ffbef7c098736cdde1b940d600d843acca88632d359ee2088da1c7dc448ee07e7c303e3a7b804271339094f4c99adc24f12a2a3672eb9c7e9ab0476278d29552b8e19cb6c24ad7c56c45aab9d8955615bb5b9c381a925e41ad59698d76725a97bd28c64e4bdb4a5b50175b26b7b5daa3a9e84e55af7ea5c51b8cbb3f89810a83cbb19e3fe295e1fc71010ef67f261f5a848e241b6d8ef3c815ee3cfcc73cd44207d251a7350d8eb4e7cf5472f464596a6813ebd48847526f1f22b7628e65de0430b2c8a27280111eec05a28f4ecd6e079c35650a29784558a35d9318b4a80b616d8b4fd23eba141984f9cd14dfec41f6f865b29d66b834231fab00e14e9bce41b776eefec208cf43cd5b0098fbe2ff4cc6f1e92bbaeb1a27f9faf25e760b602a6c397652daab508b9b9ee15e1342e23c65b9d21e7c47fce268a98dacd5034e2399530560b6774c7acbc3173a838ffd8b4eefbff91944b8d5564315f596c48325e8ecd14648f467ddc97979f9b2524da09931627fb2609b3c9c35cbd4b156aa03680209d1e4de1aff6ceda9ee350a9a2e8aee74676c8f71a34f87ed14a5d798756638b5b3f29df75afb4531d4694ca9b27ed5f12de766e9d3f7759fb98b7782ceecb50ea68d9fb1c414f9dafb7dc440fd8c8eb11ef6ef4f9138d47155a454e26a37520efadc470cfd8aeae9259387c322ed8154760fde6a5070bf83991f75efafcc7fdb7971c758e42692b62b5922c0df4980d177d629649ea4999355ac7481fde122f9cbb47563f2af29f12b555971b6be419b2cca6a3caf27a7cd5f38c6ccdc7093b5c9ff682b2a35beaa7005c77c118ed121e998bb75aa7d262d5fdf21f20996d4e53d3320899fc15bddccac487b1a63e93b88241f76dc3a04abf06915fcc593ea8f6e3fbc8d4812b09128fe247ab495103cf35300edfab7765f5434f2e2df1bb6157f9959eb1ba6ff1988dc4c6bc2cf90e2ccce0bc2ed4ea67cdbaf4e82c64117a39a85d96c8ef6ace5dab648f8559c937e990a346309ecad921a3145bf4fa451966d07c8232feff3eea1182bd5808ee0f4c7c026080b0c9f1db232df53221525b2f233f4a2676363906a79bc7e97acfe38d84285d9d5fab9d30ceede7f9ab8895c01fb4adc49ee94c95484ac504871481000e081a16e8c5381d2610c965bd6c75c6a2ac01453439da6e51d8a07e52d4cf63978fa317e6fd0762024c173e86d357c8f6d0028adfacd24408ab9a35bc2359ac6a7a4be1ca85bf158383e4a6f9763085e8bf2bab3973baa19a7bfa061bf8ea042c217630432730d09d6d068bf28bbe8d5ac8b621cac8c5ac0eea379aced69b37413571653aa98cef9004fe32bfe8ce6c5f2cdd84ed297260eb282521d8c6e38487c5069357f7c127888f8d5a93a4918ef456b69f61d5dd7d08614f2f79cef38d86cc5332b5fa4438ab0a38a82adb2cc85b70af08291a12b4aebc72869d6671f850a45d10d7ff6bfa52ce52d2cc8eb67b07318805a9a048f0f6cef088b35bcf2a6d3dc60eb86f098f5fe27c3c00be629c20209c4a9d2fc180b0d3493ad928dfcb57a0428b1c03d984ac781c286275ff8891afb93084b4a54c983acec3d62d0663e9f9b2262f64b8b590b2187c1792b4b78143e53f3e4ddae0576358cce3d93cc7c04785688222d8b546597935a8e9987938ba2b730df033394d0d1785880b283889c32519fc81a9fa2752c3ca6518186e47fbd3f32b5733408451064a1dab051075a6a64225f575d6a7b32ee171a3abdb89e50dde846f53b1d0c549b8e72c683dcc50e5d08fe2298611928fce96a16bc13709f94b9138ea1870332b53109cf6b7a8b6b9768a5db4b7b72a6530c7e2967ef053881e749e9d2a943704fc99985d1ba086590d675cd130dd5895817da48cb7d2b3765160f79cb70b312fe644194a25cb2a9d4e469506fa41bff850cf1c4ad45ef03484b56e1c89e3450f1825ec859c291f354f42d169cfa3dd19be6ea1ebd724f30e784d47d1dbc9659737eb1792792757ae25f9d0a48d16dc6d5ba5215fe7da15a57d0150e0bfe5c17385e09d39bde611afb5ac4695d07a82502bd6a77ea1f9286b104c3ae996590fe4ec52529dde6f434ca6162caf7b6dd43c2611f546c3df7c687f91bc562c74584f9dbc3f295734bfb7ea6a03bf94ab6d784bd999a751adff7c44aa34cb8b88af10885874cc02e5abcf91df875da916f511cfeadb10cfa0a9dddf472c035b5ae059cd4e7546a608fde5cd768b5a3acdb1cc1730b7a848a04f652780132b4aff633aa8f940a4cd6f68b869f0acfa1d2643c61baed3db1c7526e7b264f6baf22605da6a34949c9ed2fcf9039958d77940d3c7eb2090af587405eaf00f62cdfe69250e74df27d49f23a3bdbaec8e201429a3cd88d0b29de2eecb8a1ce5ccbfcedd15cf9e8ba410f0323da356c9844f2f43a8ff6d7d7847a07b62cd93f3da83c4f7d8401faf7d820c706784a01517a7e243bea017062eb8f5fb8a4a77ece745d57fd481ac1c588f4c8d0a5b55a8605357bc8871c293d04683037d354b77d7f6d3d271cf34053a972a206ac8254345b4462aae9e6113e83780940f72e5fb575f1528498f11be8920f45bc4c74ced679f7d86e75e732616f2bf41d498126afe7ad486092cf38d8e4b7d73ae12733916a4cf174f65178bb20cab53f5e60298425487caf9e8c671ca260657978a83b06e37660b231146eb70a1662a6d42650a8a7eecc1220270968f412b1932f0e2c25c61e254beb1d71536eca35c432efc0e7b9aab3495bd108c0fd8a139766a85f99ff09b71356c1921ff372d0f2c508cb5fbaef3ab51fefa1fab567f827eadf7f01c4578a4140b394b38b0db738aa2e4ae23f6835de35dd004ec1cfad328a4da3786e7b48c63cd8528ebcd500ad1fc2d9f22f7b78c729eef983c75da8e872684d4652974533307745e4062c1e15fd412a2ddd38c0154a635d0f8a75b47feb5a568d8871d4e7954b9edc4c429ad2940111db4ef6b14c87d52c314b33c38d08054c5e7f1ff7f60dc28de9b3810d417e945e3ee1218113f6c68a47d3ee26f2276a4a1bcd263cde1b3adc33023cd516948875a0504652b9d4374a45aaca48d5abb97b44ffb8c119353c067e67844cb392f42a3c81e9e205f469ff2ef2029f844c9813e67d0ec4ba7e200a6cec5e767f772c74e07b1a549c984241ab42564a774efce4601372ff08af7a1ea7133666458f96846617585df5b279b1929cc51d286d949406c92a6d5be7122bfe99bd6a67c02a4c15f46e9832345d76cb625f082df91ec4744a842045710fd519c1b4f89ebf61a94605d765cd8feed8a8f0d99955555c458b4158c1774397c9786571209d0b85dc166dc4f9c918d8ae56e597057b294db645e99d031406ac714373834f973bfcef39f320e7c9f300c7bb2013e00bf9fe1c4d03eb071a00a8ee5952f0ac7f9e39d798060aaaf6ffe0600f8ff163e75615184ea1a9fe50ce8b4c5bb855cfe044c0d9917ea607202c38ef7412108edf1c1319cd5d5ed2836969e3c96a2d9acab70832c684c24d8d532dacc3993fc301e3e58a14f9bcdda499a2231ff410cbaa1a3011da003c3c1e0c16a5676e76133a35df39c4b30ecc72ac8747db2c35e22ce8c27db46513d5986164bc936080632d013063f6fa1830bdf310ddf7519c9e5991ef5ca9448eaef325aaf98f9357ddcde2c89aa5feb9f84ae761b2ed059a12b1b263432b9b36dc1501bd405a164145eeeff755e5504dd9745a95c769342ba2860dc47ba85ae287253377f80ba34258055eb93d461c8e8a45766bf59227c520f6341acfbc326f6b600ae073449790b4228d8700e01a207d8c8741768d86e9c14533190ac7e0eed59191cad69805278b0e13329fceac42ebfd15568a1dda39af99655e1c4050e4337993c626b4d85b012292f2036d6b2bb1df296ec4f41028196a10b809fff391c051f0225286cff7676e000d21e8dc9155f92e12600eff43700efb421edad360ca1e93d926019e4a0a8dd61e200b0f306d233aa4881b8e2e82c5458c25ea9757d428d2f309ba77cee3bb1a23e10488cdef7ac41c785e5c776736f204cf5df02","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"f16b670bd3841269b1da73a6961707b2"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
