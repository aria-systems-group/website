<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"d9c74576e71ee2042b4d7902c3b9d3bd87cc11a2f6745d5965bb185c90e26df8ffe442fdfe29cf7b9b168e1aad889f6085bac9c2bbf80fe19f427da7c1625fd507b839f1cdf774cb6a5c3fd505b4685ac03949aaad631f191dae3a07b8545b099ed8b7fa21f98386f0464946d66e6d7313ae6ee3edda535aa92bed848bffcdebe97223c7699de46afb11e6ba8a7a7f6b8127d119a439b1f6f93efffa31349f938d4cc8d9cc4c17c3715429ac0c549e9d6a1113a1b727ede00d3bf04218404b6ba2b8e919cc3d050e9e40936896de4e4c7724dd3edc3b6c9ba4db988384e1ddc6ac575e85786b6f33e89fa4e1f324e9528e8ade9d3810ad23048b46274a9516b3f93f207d79e07173d28f766bb39749092387c6e48f4457a7a7c5d5fce2a02792c9041f31d68c0e29c4303e64300205afd1c0b6ab8abdcbf1cce3c4d89d50ae646e7fd488aa8ac8f77206e7b9a6bab084bd63a9a42acb06c733d9fd5c8034588a81c7ae50080eb47ade9b29022bcc0c1f6fe3ea4a1da9cfcb6220997b70289e904003e5dcc5d62a919939144a28023f12065ca73c8af12995e9a16d383645f549ee1a07653af7acf3097fd81412d31d7d831d67644c5f64ee80d2081fec52117e3fed176f0398a1f968ed417035640c5665e62d3dac46f1b7b686901e39429cb1a48866262a36160f78b834eb24d073126cdae9bc0c0cfd5fe097a1d61ce5ee260db99365b8bd431898cf184d688d84359d6d8c2047990660ee77e554ef943c03c81b846c8d2cbc86b6a9780c27648e1b27576bb061115d45a8ee99932474a181d5274a8253c9bd2dad8d32c294995da1270ba6892b83e36327fdb7304b52d0d43801d1ba72a55a679ba7b869cbaed794a70d58e1e88f4ec23dba599bd44ca52d7624e1d946a4d335586a6c419092c5d2726a119c70671ac911df2774c6f13638e802f94287ba8dd00cb4efbb7fbef6cf35769171a124be10d6f3d5575be691dd91d19a228b9618488aaa5e35cd5d10974c4ed4f1cd567f6ea52317e0b4e6414a91240c8cd0b3ca470544afcd11b4b1278629112770703edc961bd51058dcf28a9ea2664993e6d9a9c8d5ddc0830fb26b346d732a8759200a5459c41390e5466a25dd2917e02f09b611122c11b46ad550e628c3c7d0941ad5698859ab07017886c8bc2e4cdfd58584012e6e22ddadfd23d8a49a58c8cc765b4e2f88b0a72f72bbb226acd065e72b6164d71129e63e5256fb1f0fc76b678c27014e8ff8b7ab61c0841609a6ad194dd596f9a0fd36b5b93d372edb012982c21b256fa33447bd738b9277e0cd96302cd12b921906d477170aafc1b0b157aa018d0ed85f0b17be1b1eee35e5255d1150066642006f6a21cfc9be2ea63b3f10e07874bb4e8375ec573c2edf27fe86f643cec2d7b23a180240f3e6a550b7685ba92915fbe7f5821a4194f14add22e388f785be4b9fa42426351ee985dd8ba2c9cbc40cd49cd65fe87cc06e944b07848920147f26b1471c5e40cf4b0d9319b9a14368dadd78ef0c626d171193ac27e61cd7f6e94e8df74c3214bec34feaaa3b2d6548fceeb3ff402007c65b9705a5d59a95907db4b32f6f4b325b12d337abc420e5552a5d1259ad614f6743eebecd10bf58135ba65717da351ad28583c6f92a63b5e93a551011b3f4a15453ea5b5f031b219a4e1cb9d4a42fa8849155d5dc52a51a15c8a81dec059534aff281cbc4994484d08bbc725e588b1209b9b49b6bd09ecd16b7c6066a884417a4d9b95e382dfe7491e67fbff4afdcfbf14176c7d48c1668d50547434c9dbfd90ebdfa8d01edf913124d8e63ed65e13dc4c3957b3e73e898ee406322e7b7e2c68a39c40ccd7f349031d86d4b0c1b5ba38780de4f9a1c7cc5461b2a5aee090db539e648b2bb83ba7e5c812c3dce17c3e24a395709a9953c98373fe90279aaeed14b026fdbac547671012708a5977f5d73499cfb8512bec46e8b759253bb77210963249b8cbceab77e825ad932ae6d04e03447e8be2e45406bbeab56a0840eddeeab96f1cf1c1e81156769de3f94ecc189c21f6bcd8c133a224944fd9ece302e305042d0d9187bfc53c48025c671300fcb1e3e5e761dbd252ba853a5a566aeaa5dd2253fd0987c98754a30328307f20736501a9066d901e7aedaafe81939c96a3e570185fe472e603f24dfee6ee5b2bb727a0f5f2c79a635f2435ffac8678ba140407ccec5e13e5d29db68a403f669d94ce208cbf02cf7a291c00ee900a82065be36923b0c181b4c25d58bf1cfd9785efa6388ed3b08baf1faa6727a95b479bef768195251202ec89c0f268b7e163c0135f4be4d7f8251f55a850a7f86db6b675d730c7f9ccabe1ffde9a46c55391fcb81ffe296d926f8f122a073f94175bc322d92233128f38174c9cf856d4d8306fa04fc91720f5e7e9a35e6397c26edf37d1fa649a011b28b9355727d937ae960543644c8df3f204c641bb13cb09c360a8a162b600e10f9b9fc7b5164d475f59a371d0f02aa51e96467a0cb5c27abe17e20f1cce34014f234b82787344a35727f2173f40ea4e279a3cbeae090b6d9add1d7ea5da76be6b18c8ae87f9d8f76cf64b10d9c0a4ecd2769e0d2a8e6d78838fb8de8ddf5d22775e2c12536fce6159a0614607d8218998fd1fb02dd30ddcc97d8bb3ae100fe74382930808fbc7360cdc4a050baea41ffaba3a1e01d6f8d17faa53b81a6fedf256302b515d69e98aebc5de9f08208b30aa4319c9552960a28ae1094af5afc27f0d05eb72e12fcb27c1fddf5ee2a23628d4b5da53a718d5486d1dc8219df36b0dea2ce6ee27c5df764d7be6b596afd211bd32ef46c476b27edd0935b430a6720ad9821a8215393e0975e0ddfa8a9ef8f93a971c57072153a908fe6e94ed7405a2849706b1076ee10fa869660de97a73d518a61f389d7b9a822243a6d37aaf547672d77a968a7fc3a45e081d98f23417623adb7a4fda8c1cf6c49a8bae7c207b2771af5f4b1c043825fc81f62046ec2a355ee1b10001c86f914c438e47255ae50c67427d05afc1f8d9804c2b38bc74325f34ffcfc28f4c1970a44f4c454b940528966349cd9aa4783e471f79c186fab446587d50a5a25bc6988f2b9ab925ac447fb9e01104a41e0491d91a9dc64907aa10049f7c6294631bf09da3b9006198fbe8d8b5e0e7a91f975dd6544463b435131771768615c8a599ef518044809d52a58101139c4ad18f8145fe50aab100fe91c39e3ec7bf0dafc0baebaaf407c74fa9b791666cfe8a468def1163125e3490bd29dd52bbd207c7737530a1dbdf0652bdbb3d9f60b3e5465e6154021ba2600a9b06621a69fbfb8099cf3dadf5f828d7582655f5eab07e59c25f40b6aa0d0dceb2d751a8c72017830bd660516a6a0b371a50dfbde80b5d08d4b12da7d6d8ce11f3bc53cd4767715588456aade39cb4859b519afae9c668c970d11820a0de7f9c4c5e1c12beb2780fc923ca4828cf72623bc7d5412685030a2ed79ca67615ad2ab186ab33ff9873f9f0de4b8609a7311f772144765f0885c43cb522fff53485a5c5d8e25935cb42fa251b9b158e2e79d8265af7190d4258d8ae4e5350377915cbd547a3c056934472502926186bfe9c532177ada6ec027dc5eb36f5f0cf0da1d142e603cc0ed2394e1ad80b9c77ff75e80c9814891016c5b344392c2c8fae191cd78581b3d020b2d3d3b7325e023929ceb7c83a2a5b97d583a09f6455d90471cda1c5b5e169f946820bd02d8258b0fa0cd44e7f4ed96dd454bd77a008469a22a8d6c2adf1b06780efa4eade8872140a6af2f6493dc2c25600d3abbad4fb1b1bd6a6075ba4eeb260cf2262c65df1e060d4ce3540a77b91b577190b14268ce3d1383a118c6dd74f23e4c922318add28dcc907f79c17159d7a6fff312870768f3fb7e7b09a2c60ecf686b1763921cce4c380e76bac3352cc0d85dd011a9e8b12e4acba7a32f69a4fc327273f4c5de2a5eacfe6c78ae3b89ec39da12aec2d9a3eca7620582529b28ef47e97cc725ff86a24ba64bc9d0d0454cb1778688f158cb9ed3207e8ed092de5bd47963febb70d0829f5a4167a6d42b41ee5d81577d87fbd806c3c38955b17b69da328c7cd0d475c3b704776fdc7d5327533a8f40c83a5999fc24ed18b67ea19a0b16c5e2e79db3748f7d9141de3569cba7c67bb903ae6affbfbf66251f613bfb28f4d3e2ca528bf3b3917b94fb72dbfd44bdb75dae03ecb0d442194a078b069af021e709f55a79192cb74d153767d4d1dd3c762b916c15ac6420e74553aee38877b7290a03a7901f0b4d2435c95800ca437e997bee65ebdf4c0cb95f314b3714104f5be44e94480eb06bd0c641d17dd092e3615a8f465a59c2b877a2ebc17719d23aed890c5115215330143f92af33e3431a9dcc6441d13e52dc2b52bb41341cc6ef9da88cab502ee5033730315734872edb28d6445e003ca7b75a27c9e440166b2cb4efe67db324947c38d576e87d8df76b6877b482df14de3df3a5cac80da880fafd9c535c6b741fc096caf1725e7469795be7a90e67205fb147b7c091824416d13b8809a3144e57265cb033da4bf06341dd4b8dde6e69702587da2a717958be370b168c240e9ed1c6a21a0b2197a916f28700973cd37aa598d747f672c6700ac19a4cfa848231444866752385bddd82e72b3004bd66b783e828bd47717f66a5f5f82fd7361ac12081f257a9f0bb8936d450375eb4987531ccd397c35496fa07b5b6049fe339d0c9e80dcdb4b7083ce279174bf2155fcea0f1afd382034ecf626b35fd00118b930bc6abd506f1b1963aab07fb8eaa393fff132dff100509d739d63003c891eb51b3ddb66c62f7d36e7e7727facb2d0f480672ae482d2846d6a05eb5685f29c444851caf0b33db32cc1795f6c06d16c80837f2676a3558b1024a16778e973c091a3045e5a1f8d940499b4953deb73ff79c98d7160781ef7d30cdbde8edb1e26405d09ad6777701643ca71d68de448234ca40478ab290144cf0bfb72df73db62bac001e2c033d90d0d2999912f244ee496fbb665a61890efc62c755fb9c88a98ecc9c2f6d717170b7be27a2ff5af14d7b98845b46ff38ae5ec9276d395ca777c6eda6c7b69b992963d3d225e47f557c0ebef0cd2364950e8db1e2e1ec7ca00fe8df73fc2a4f2c4b1494885976df7898ce012edec55e953b5a40458eabba2228a40ae29ad63354b39b8ea68a0c54406b30195ecfe031fb3d5c1b42fec7beaff60c6a4740e4f08ebed3c7274d61ab180c90179d0d7bc40aa4b08604cacf6227fa86a1cde798c5df45662cc60f02cb4f93392b5cbbe6499ef0037a688dfb8bbf42336e414857e49b2ca13bcc89d7885089b2c796e0d062673ae2a13628a051e23cfe7014247c29326ef58b6327e633f9ebfb7b873b7041d4465fcf8e760306d547bce45e25d057854811a0bc01bf4637f4df47527556905e8e6e01e0da5167bd794f8c4c83c551d6f216958adf2ffb5ebb6cfa62b50a7e35a042203e3580f55e01a2f3909fcfed4d15d29ddb22c8903e59ad126232508c5e9627dfe23f33da269806eb5f7bba0a10531d306e2f886c01f80d51aa128200b21900363300f35d0a2cac9f60929505526d36da4b4d5eefe137d91bfb47ff20df0d3e34688ba76dca89b553f7178b6e792f7323bf1b37d8263f3f4cef92f0d4579ff719d9cb4542909308a0eeb1fa3968fc7967a4555b1408669965b98c494dec04ea624c500dae00325a2deaed8ef07611b2e508b218324c2e118797ba51451da7d9ecf5cfc423614a1c5384becf2e6675532b5b35f48aaf8e8ae9be0657448d5d8d479e205f9f86dfe70f4bcf2f135cecd9da029665b0139cd2f6be6222fe1eabd074ce99d02ca1feff87099833748a7892b630a83f7d626a1dbea247477317970a93a4e08482e6cb7962e3280c8af1d7cc6f9ba42e2ff4efcc1e5ce23960d1cae099460f799479e81974ca144801d51a82e5bc54dc3334076adcf36da951f739d4558b755b4a8897e574cad02cf748ca68000001a94f8861243f0bf7b7c6a7854e4ffa64bad323b82a5f88b0e80e0837ea5db234df220f49efaf1dbcbcec3234b7ae4758b4b4b28a26ebb572bb56227000294448cb4d9be566ae5f086e3ef4caf66a0cfa9cdf325d058775ea968708536a8c8d51c0a5e1561f48c0b642d213948a74755f18a4de812ed4edc53cf4725dc6861f0d18cc56a8473f973a316698b2b003008fbc1b7a78c4e8479919289723a0263514ca64d7be66380b91df37ece212d9d5efdfda1150ab46745b58f748cfc3f22757442d8bbc628d93f30473846d0b72b192be6a3d00d0c988235446a8174d38d0db8c0e71debf630f627804a49251dd81225557d14219cfb3c39e8f48092809f87cba5fb640aa4b27968567241b2676cebb61c34c9a3afed88f1a1ae308f7cd2ad618c379cdbce1da1bd47f7033b1042cf06dcfa9e3fe98f37ca67bf43f1e1f0a92333403d5c1ae11e43496f65c737601b8ab66d3bf6591db620133db11d64f79b163dbbb3f124a5d544895bb56140110b99e4418adf20985a264bee08fb12b044cf759b7c59b925e1ac32a2e4700c0ca796d84cd39088f9fdb6af8facc3062710f736331cbe3bd34964670da42d1b3ca5d0059d252d84dfab99214ead54bf1d99bb3f7303ce2d64213e5a35f373c252b34907b9f1b0ddfc6517af5ff50a2c92795cbe36cd5a0f5a001b18ebe6907f40c0032ca82f3bd95352d4c36ce84187bdf8e6427189b7af70871c74b2eb0c6b5e6ffb908d1efc3a6a8710f48b494c214c773eab25ac7469822eff067d27841eba7411ef260e948563bcbdc4692feee5413b9afd3f17b260e39e1b3410b2c149250d84a20bb980ec17a3a49a3650755578827e3b7fecf75990c6df9eda4430c8d03887660a81b4155f2c2151877e0a04cd3dd1a8653edfae95194e7ad69b2d96ad233ffc9637be769549b15a1abe6a3a74137a7010bf7a4b86aa3757ff9bd1c83e6d9241e9e0e07b22990326681d04f709b4366a1934159f86806a5fdb2ccc9b9f8246c7c1c0ebb27d3bd3dff4a8c4fb5a90228ae46a229c72dbda8105c08c28d0fa35f11ee962e9dd3d0994c5167d65312bda6af310a85730b6f787bc752dad2420e43ed2bf5bf4c7a36ee2441f35262575729d0d9d81b2da7b1fc56def0da7181b23ff5c39aa4a21e43a98879aa5188efd4015145a1f2cdafd4ad03f44797399f782e6e1d7353a91d1b27e3193e42ab838ecc47dcd0b2f671dab53c1f371039e658dcafb4d9affc459e4ff402695c6d4a410e1fb996bd32f6698dfd5da9f5efbf8c3129d47ba77e84c4fdb57aa2e52856f9951a0d7dddd8edd70fbb5affbc967de2bdb84646dcc39733a8795dad96e5555257b8d8d689b61552d9bdee27271ec24b1ba55820bf8d395eda684c622dfea6e0a280c4e957a14f2d910bff83f0f16a312daeb4d3f850d7badd5b00f25b9c52848bf3a470209b35d9aecac1ed2164b3ceb7f3ce2e1592021492691112d4dd783aa8c8fa6fa85b89fc94cfa7c89312fd4c13f9f7bfc0fdbc60a64dec1672d03f016be02a53279a2ab27da7b1696aa8d04b02cceb19e94241dcbbaa2fcbbe2b5394f44df58f13585ab2521db87fd5956013cf7123704314d8fcb7ff97ead8243d8224c999ab00a9acd954cfd1356f23e99f10abe3d16b6f50f7dd21e421b5f2fc4bf48d1500f74f1a519966506a967cd7239719a779df8f3ec45c060ab55ebf02a0455d87ecad775dc973cd82cbde70fcb26910f1aa245ca2ad620a09febb14ad749ad6ab3aac3da42d8cc868d717dd60e6430653cab922530f991af0c300f01ad018ed8768fa7a5b2a22f2aa8e14f4c24266ffb073b3c61d119e9e6730d4cc6d7850f4f76bc331148f17d8ad02e7da1d06b662af1a40d833e13d8d0232a9c4ff631b86ea58549bf2851489e3de4bb997c8a8a45b63b9987549ccb5e3e4cffce810cf2b813d92a176581d42ae923c7c7b1189f358299fb08289d90c42a32498409056106509cdae314f175cf38f953cf5f0aa683b71be2f01871058ebfb25bd337c2655e7cfc259f7a8e02d835092623c8ce61f9c7b003d8c6339bd5488f99405e9fc065fe6c63aac279d38fc6833d5d231de432eac808beaa705590e8f04088b90aba790bdb1bc6d3651720088a62c19dad9da1afe997cb39b08c7e3f21ae41210a1ff4d26b109ad569c0c75d7ae79ab0b42f35eac758cb0dd9f63176f8a34be213b582dbe319ce2adf6d9f3afc2159e27d1b09de4323b454705ad5482e2570efa3ad0b3148b8b6f65d08d5ca89e340068f2ef6ea4022c67388a9f60bc7f0540d870b7b0e05267b66a4af373bf566b7d05445ae204551b03ae72b58b9ee83c38b345482fa5aed19c6e670fdc6a8b0df0ea4163664d57dd658de4188127383dc13c3cbe6af0de81681d76ec839b48eac4bad96c968324161fb0c7328bf74314cbcd2247dbab9a5099422aabd4fd23ad6b5d6d5bc5e63ec36e2913b67a649e1885350e1d32dcceaa6769332efc92ae6160393b6fdb3281e8e5562d7aad486eea2d0ee6cd561001c0065425f3783a43665303a12ff303c70deecb181b5a40957dfbb4e8f7aae75cba464b19383b3b33b770686872d0916d866d6cc69f2d758fdcd777ca882510a2a1ad4e0c10c1bdabf1409a1f23d35b53b7c3ec0357e808f7f56a55b017fbb15f50748c094fa494b9dcc9cc4c850bcbe9342965630897aaa2c21deab72d71016d117865a2ae9bd53d0a6d9aeded950848203262613a142694c184b9db8824a0b95837d1d1ff2f0dcc62a2a311263ebb4ac5495b0ae85a9e3d0c3a2140b4f157c07f28ab088113657e0f6f1a968164483237ce02b65c0bdcddef310ba096969cef83043f9787eaa7ecaeb690d5c17911107fe7cb21db490814aa0c43a7827c25632395c3f1e6adde57842d048d3bbfbc63b1aa77d175c02726f629f35db83d626db4354bcd88b533882b69983704ca5323bb9d49fc5881fe2ddb16bcbf737aefd51a0ede4e5f42e2ecb7fc6d575bffadd813f9caeb2865bf35637181123ea76384c7f88e8fd6239d7a0ea4ea92b397e7ef42acf9d82389739a0fe04e7288d5d9f5bbc4eaba573b05b12c57e668cc7ff5f1cf0156f255395d21075b7dd9cf34ad745014f2e8c0775b5f2b069af9a77fe3a967e76f14cdf9cdda511db5955c43079612ea6edd53bb5db8a4a9f874fb8c4dc39ac944c7557702f06a7a91455961c6ca1f6b18ed0a3247318cf58e7a2e7841baa98cd7644a224e706a69a355ca32e4ea47150c4baf44bf82726ddb3e5134252c2935f7abadbe73f8bb906d23d6eeb747cd026259404ed53be8772d6c5df63736fb1306406b5c6581c1263e620727bee0d6bfe439d381ce809cb0a16eb7ded0bd8c510c7e9e644b525b79a4fad9f80a5c7a876feee9ed316e3b6a35c5813122cb3203022c19819b47ca14db2b3e9d055615f8f5c9c33a89771326ef84cf0cf59e39b9f208a5897180073d579413734792cc8c3664d04f76959e4cf9d479293e6bd3f37f127c1e3793a216e5ddc5211c91e2e7bcddaddb76382a04879b20187bd4d823d720561c472c81490b36beac11f6bb801bfec2da52ddb335d8987b8c7df458d4c28a45833d644a03529f86e08ffb7c7c498d5349d7529a3ef0bd4ab04472c0bbb26dba5c98a6192043385ca6dcc2d0e552574a6388f57b9ff5d5a9b248fb6d78001524a540d4b8116effda5c948faaed750c3db4f626ee3f6c8b2b110c955e7e6ce0bb029a22d4e36d5677d2fe5f06afffd11160cc1ae60506b9fb890a2520b68931be0ab2d9576ebbdb95a418db0d019448aeaaaca76817dc4147cf51a7743677730e6b53c803f62355d8b0f047c2bec21036a54ce202299c2f8d16d5d1304363cf23b5d63aeea97ba383429eeef744f2e9aac32e5ef705feca39e7564c5026f08a6a10be1cbe595beb693664b69bf0bb2721d97f225648e6a30e40abc06ed08eac0ce36e0aacef9662663165a8eb2b66fa92bef42bff4f2de03d2e5fbee7a1d87d82016daa0ec4925b6f2a7801032a72c8499eb7ddb359de1689c0d325ce8f7cb67ebaa764a69f0897190938ccbb92654f31e090fb24cd77814f798d9de3393ed9d81a5e395fe9d5016a019286f82225deeebf2ce320220ff6110825a48ab97ed41b8c0194a5117fc651f4c17b5caced67a66e37f3b0ffc1695fa42d8a6d1f12298e81f8295413125bc482e8600dd1e1f420a944025ae64aa47b1384731161005d1a76a8b9bd8a11bc9c085dc8cd4ba82045f2b39fe45a16c9cf2dc2ff0c6e4b4e68d52543fc17762bf46e43bc70c1edddccbe5b74fbdcb690e951299c7fe1e954d19f062e0249f399ae878400c455466352dc158ac3dcb1a801c2d9bfb9a3c574efbb7660ed1408947ab6a9b5a3b2b401c070db1e9c568a080914fc2b1e1ddd0093a5e3ca9a89b78319b274fd5e2452f609e17d76efe9a084c798fa7bbc9e6c2a9a761c9f6484b2c82b1b56d27c030f876531513c92efd5ad0888a31d0d17121ecf3bcc91dffde881a601b8726c68a3eba4f033a7388c38eafe18b9a630cedcea9608015629eb21bf96a3de02a28fcd3d40245cd1d7e77fdeb2c621eac3432aaeed5444dc58695cf3fa24f486d7c0b0beb0d3ecaa0e73feb11e13d886b09b5034cde8c7be2ba20af18aa3b16a0c6bb8e9765433559b2b5cb1e78c203e281cc6358f4867bced4c37bc93fa8b49b336da5a614f6556b861e02cbd458f238058a90f10c882cda0cbadb1385775157b8156705d7bc4bf61ba1083591e51c33566e964401f1466d19e3cc482ca1ecdaff6e4d10555cb7bac3092affeea8bfa7eb26bbad45905febd7be71205e2bf4343a7fe4e45d808f4d76cb48b18d31c7ce99494ed38d02541459d06c0f4c31747838744f0d400e169bc130bcb6e84ef96c6b5519dc666d342bfda85d5a5951bf4e83d3d913c8dadeaba569fb82bc1e5958bdb6159bee46446de874bcfeefaaedc59a901f47c1040250108aac5b76082f0066c46909a64f683ea0652251d6d963112192a9f7998e011592099a007790c072db545bf6aeabe256de31d173955da080a5b6c2947a4e5926386c5b229081ec4036b4cbb00d7d0f4cc99c0105ed962f1f5eb74ed73e18664a02509b6012e64453020ee5cfcfb5880254ace2efdbab0bbb9ae0addf22ea75e4d42c671090693ce5d3fe67b28cea68a6495f27b53e5ca4401271ea41e5439aa5fe93ba6de6ffb70caee8b9153e2a737e5b3cc09ff900a02ecf6704e7a47a5fe530a901d73f3cc3d09c9a2f95d53f5f25fe1ac5825c30b7e7f9d7bd8a295fc53f14f0a75cfcfe0157cfbc3c0d493b2a79a25310b4dc18f6dc96f3d9b1465990af0d8becccfc11bdc7fd92787469a8783988c44c0339b1c39967d3f4cac278e606b92a97983f962dd2a22576936098291b46aa1e34064c3206b859c1dcd6a75f2dbbb421df5e0b53f12cee42aea88c5f94675df2d51ddba5628337e40f0db0fa2d7b4d0a9f28f755df527633ddee57d9c2b02313f2b227a951392684d253f5b8398eecf8fa61c47b8986daad399900204c1b6d78bb1953ffa82ee9e232380c7ba83dab0e7c0a55dda562ca6128288c609f5f1e245c4d20e241341ca1cb429920cc4201a51687551da8abe486f7086a7476f7a9697b9e815af1f0f3a8a214c2b14ed5e368f3691f2f182e401d0391b26ec8742ee761292b2af7729fbb7c4f7ab8d92c70923b4d6372af54cfeaf5a806aa7488e0567f2ad5999c9ea6be773244f4a4b670043d053604d4b917f64852b4ff94f6041e4182638613100935b610e78bfda547b597c7382793260de8d95c8ee7a4cbcc7ccd8f533b8fa35e02aafe9e3b4e61ceb2ec66b6f0689f78f4273a448a23ac533be5357aec6aff379936f75e6529e60c4fbc73c1e042b10e2560cf638f944f74999a19435c546cd96cbcdd2537e30cbfa94f1371a8ae0eadc8785b15b9e7212d1a14da98f696dea7165602b010d1af053003322c4e3cadc79e7b9865b3f8739cba2a04fcda1475ca1b3dd0a25c17ac2428bb0a5c536cfc121515513963a3c18e7e46b2d060a2922dbfe5eb03c471588722ea35a8d24ebebec72a0ab60337d7000f6aa2ea5f8cc3ddeaecd647ae56122c35005c62729523453dbd0043d76fdfc9eb1dde33faf7c179c952c46a604c09ea11803b048b8e43141abc0fca5c288d267e713898d779e6a58c681ee10f36fc0e435024d247de93a67b18500a5d49ed4b86a6a395692ecf684d6d0812d5227ece83e6ba0e930af63bcf7abc8a3ccd0d2fd1df7afb519fba0212272ace8c53808b25e0daa2052742427abdb5b40ee55c5aa1ed7909ebc09c1da3f91601bf5910d23c98bfb0c57b6fd318462674b7acd95d4c2ac265ff7bd311510972f0cc7cf3ab40106262952199288aa523fe2c54466ad83139cacbe83131419af8bd5a9768b0414d93b5b7f88732039c18832f4c152b495232084b2ca5aeca2cf9733df052332a21f48b981846df22bff1fba757966003f8a69e570a314929d10b7437f8979fc9828ff4304b08b46a7a175571c20e7776556b925e2b4c42fa8cc37b3b63e0348699e6ffc77fd7cc919d13e9db7d60dd46218f5ce3ed422c994c208817a71ab6c14d331241a8ee5fed0c07b51d6f99eef00dfff4b223c0e29c9bceff27cac3b86e5648aef5f0dd078c252324ea27115b4044060f903ba6dedaa19d83aa1b36700db51ffce4648e4170bf3ee253d7f8dd0ab3948029685ac6832c25c0513f9c7fcac518274cac67784150af8c3297f589b862c4f27f4ba6578deaeb6353433c01e572f3c99efc6d057a9b01ed0eb3926a2e14863aeb9fbf193a2bcb41ce8a097125b132963dbc90f088eaa0681f0ecb9b612115fffde79cd84462fd6e6c8fa916c9c875d4b8581d25f6a8032ccdbb69b8acf980d0547e3b16b2b11f9e94fe316d32c99add55860995b13c45fd368a3c7337949a28fc1ef9211041dc89d3db8d3648cf1514b8f5530e6f81afa6756479d3aa7dec070a9f80462f52c3c3ec1d45e22dd53985691fd4375081265bee1e338dc5caf7d7f1580160acdb6c12da7c0decd1a31a7857d5b5f53bb40ae6550c31c61112c6229c5f1c2f74ee83c275b68b2d68a05d80b7de35cee62f4523dc8d367955adbe3228e393d9d79aaf93b162de1cc2b6bc90159238af8b4f915faa537bd8f199f4b4e567a354b1280ba3447866191f3606197f5fd161371fd8391b76f9a82fb5af0f9997b04c86797d6c68755a5b457cfa382762742576ee333e6ec110b1951d95fcb4757f058116171a20b89f5fa045fa3a3b61832d7f7cbbe624806597ebff0d20484d448e95649d3c7787b07f637066c3de00db8f9947ec2f1faef3ed8853a46393027f5c1b4851fe0215868bec050bea4e6b48d7b5ae1a59bbdacfe3f114a1d37a1434e298aaf8b84558628634775f892704a18a01eee0a82f32036b2c3a2fafa936fa3f351de54a2f1800279984584470a17ea2830b4aa71fc52c9c7bacc85593bf3c57cc15b3f7852fc5efc5a477f2bb9a5e615ab6b1ede663b8623205060067e67a22649c2f592951f3651ad5608979f7fdb2a8c0e73199c27af19d0916f6342dae57379de439bcd317a4c08ed23fabdb2580661aabef036a4ac29072545c41ad2a6fdae1cf4f4132e43a33a803bd530435d44d461e3de69a54021866643b5a711faba7f78249e26e5d78e9bb96eb0fd4e98454580012e24550a10d2b1cb06d0eac028737f88378852e6c694cdf5a28368703a1ce85a62bac7fd9d078b1c08bf2a35de69b0d67909c699e0c4105890c0fc64526973e014a14af9251f51e73e2dd97f0ee6de17e9380833f246efa5f2d7bf7e83e38854aa16e6ae2be694797a7528998d9e73662a1e110381b25813fede373cbf21e1760d0a31dda6c2f0db9e2add55b28cee88eb156c4522bd318c7399379c064e9a1d93ea12b086a48dec3faa81c4a45a9108b6d568ce2643ba7d67d44057a5088ccb83e0e8617e0183542f50208542cc8111268f42b959c6806e0de908c99ad5af3bb249b0b435220aeba03ea482f090d45fd09302f1e4b406d86a03dcabe497f7493abeaa533072e2139c63948702d668c3313ac291f736ae22bb283fbc72660515edb7abba04b8b100462add5ec6f4131dabbe7b49fa3ea7907da4b87e21f7a63cdd387f9728be45a6b2db7db0732bd37a18ad9b68de9e0c4462f60ae69ae62492d9af8f084ab9146d5fcf39826ece443d37ff12190f55aeacac03df5ed0235b72c66f0e1fc5513dd13c27973a12bd646a5b5cb42bd7f79e4229b36392d10440d89dfa7b41fb2d6ffed173bd5d54d974bac9027a5d4241d4c8db2c6e24a27c6d9cf1f77860c3674d77517319e5653f4333edd9f32e1eb47b401473bfa6a7c925c72ecb7667e6d0fa94d9af99ea95d066d3d965ed0634d0e99435423309689bee54b1568ed4123524b1b36905ea52e8d56bda106d8e6b881c0dee97ff8d3592bfe1c030befe48d89619b42984562e7c1893b652198d572a5054e14a3b8c0d4c4d9e21fec2274746033fafe1bb673a56ca793287855528132bd16888e37ea6eff9f8efa18eacf299411f8035ef7e9105268beebe54203d8b18e52156d86d93329516c1e1cf929e36e6180c27e0aff2e4ca5d7d2bc07efd1a2928fed6ee2dbdd8a59dca365eb7bdccf5b0c429e5a46b48e07b8dbf3bf6f423e9f7b70c4774ea146e8825f856fbb99ca1173c586d199207d30b0920929fc94dadb6d5a68d8257ec6cb5af07ca859cbdbb9c3256e75af0c00b505d8cae10e66bb4d1660bddecae75a71299c4665b2f17aea44068e46c03fad34d3c30682d79ada4ba99713bb85724e9b879034fae22af604fe4fce620d91989f0224f716289be545af4a2933d8f0f0938104b6748e0b4c7a538648f9e006e854a89a8e95ae107590e954087173f24aac4e8e58b862e4f8f954ed865bf5a706399e595f5de4d8a8b187b88a3238907af875f9087b511c90cef54c90c4bedfa9c6065b7a50502c22b115f1d74a5601f83f7ae9ac401bec04b95d0fad6267752e721f535c8b5c710a15eab8ad99219f6c368ffd44095920b2f713ca48ca95c35f1abeb1e8b6e62bce3863be8806073fe9cf4a81bd42a446388b17eb6ba507723b9f180ff7029b1858aee17c206265b31d9b576c54af9bf68806b39a5f8d28b172bf2a94f06e72a9cd9ecb8a67c686ccdee2a4ed63c8c3c0a38db3598ffc0a0471b4d5c715db8e63530a963f86ca97e20744acd1084f4c9789c4767a3410c6ef3fb114e061780b4c942c7b29ca966d6bdb490412071ecd0e83dc993bf83bdd3dc16dd429ecf0037f7b24ab34ec2c8ee962de5f463ff6b8e6f04b3f2f8e89643680740e47e3d073ce3ea2e5a95d952d42737504e2b4214c111771c8e0c20b3619e734210593d80e94f5371040bbe4604f26f17cffb7c4fdfd30509e24ba13a7a52bea8af6cec070ccbc310b94b29d28abc596c7f359df30511e6e57858d7c97361949c18879b4c38c1780de9b519f0bcf39eed8d3981898ade804e0c6dfcac0727fe9416e5a9d8e0094e915b6d79476d25cdc4ddea362a6efe93ec19e7f1287e939fc12d37af702b705a0399bfcd49816a736cc8bc4470ef7e9f49376a6951ad645f61e2f4e8d6a8a14f78bf3242d6f90b6dc70f021095504b86591dc5ae64e4e0e066b9ac9806f4dc662cabc1dd59001f4bfe199e3f9d5124bf4e91e9c03cc3cd134b6ac539a1fb7592eaf906c9454dd9c2eabbbde98a162f915c79fa519252171ac4ee02989e86551b8017b413f64baff288831556af5cf1636a24f0f6ab94eb13324a5d1bbbae8d4f773c4dcc46cbf792344dbe615fb70d66e2b147740c4b3e93d05a7aedddcae7a7ddc3bb56b6cbf3161f79eb6bf1142556d5ffe090381ab47acf59410b126b97f48fea1044aade7a7d2f4cc902fc4947a23697287543e1c2f77ab2c025faaec317727c844f2631ff4135f0d369b7bddab533e019343f4e1be7596abb8abbfbaa38ac33ca07d9b51783623b1324f7e1053c2ff6bc9659f041affbd62641a05aa0bf2f6313ab59416150f6030500dbf66d51c583c6ca5a59a627eff84aa2a2c19a3bdd006a9344b8dc31ec7773a7a29c6b8a1fc94f0ddb570f407a2fcf187f0d5ea4fc0ea20912b03a2d055cdfd3776f06c982623ff004c324d008280d16f86114f1171e1897c2b7dda314be643bfd1b11cf0065263bb624ae5457c9a12304619b7fac81164800d545bc3528ac9571b78fd5e425fa995bbb69e9c2e044999df14a4bd92c6b9691c105cdbf74d870412e059e41253153ec2a4ad87432fb9cfe07896e77192b8b2c75d79a710e70b2a4a0dd58c34731feddc6e644cced3bcc3dc932be23a2e2e696cbd1e402a21273f2d3e3aabf6c92e423f7db7f10c90d47ee3fc3a0b322d35be0acd47f0fcb7ea1ecb3e0ce8a6baedd9fbb22cdc81289f496fd8587fb54fa4cc0cd1fe3efa1017a9aa1fb42174f82a4e5c489ba52bf1f3198e80c817a67f422143a10c4bc7ca5731151e1718c294b649816f6c7eb09a1a14e697db7fc77464a982085685c491f5fdc4c44c3c793999040ed6123162383c9a79991a67d92af717cc8bf45fb95c9887be325a9749d1034ce7f6c18c2a168795a2c05eda99578f7102782da590ca542885769bc5734e9400da5c63f53719b5517fa01af3bf5180d873eb64d5afcf43b28555877699eb01bf1ba097fe6b44aef2e595ab71d13723641678c7aa6ffc9fde5ac6b480486af38f2ece881379c9a7c07cc4fbe4eda07eab3e4019b52dbac4df58c74ec44d403395953cfe305a90dc87146e0d98e514e945a94d3b500e4b65a0b600cfbbad57adf6fbad65cc9af82cb42186103ece7681f051908abbfecc7ce6e49844912efcc980c2bf537c1f6408de19458379444636430a0bae571cb28ac08cfdaf0397ebb75e27d54ea815ed73f2b0d14f65928006e326dd007a5967c45a14082000c2fa2ea2290528b7c250fca08e0550e926724b67a80eda7c75f4fd36173e71e16c43bbb65b348e9ab5996eb21a4866bf9f728d2c3869937142c4a70c29585bac105e33fb6c7974711222a4b45ebf637c5b1e0d05de4e43aaf654f4e652ef990693a76dda2caeaf806ae157df9bde0d498c84dcfc5baad8d9650f923d6904abcde6ca348a871745ca8d6e3f00cc15d2cc7fec6501ab031268c6a7a8992caae136bf4bd9af8a48a7b7abcfee2df0375681f5fdfed50b1a6d7c5c825432a06dc7b3129e77e8ddec59101bebcd75b4abeba4f5a4dfbd6fecec66701eda7251e5699f32c27abedddec56116953c89dbdb90be396694516520ac668e2b7c947835ea3d094b25cea2e2de5919c2aecb1f9fa7748e9db28e16f9b66051ab13db1b0c89bf25494cf0bf2ad3be38fbd9eb77173abfb8bfe7fde4eaf2af4675018f6d6b0b76e631c26eb76d37058057267d03090567b01dc7b794346a02b410c66428f08b157784220a54ca4db46e6e06b58689ab8e611c9098a83e4a1e7402da5dfa0a94b4481fb3716a688022b3b82eadf3b654c156d88bb31549ff0de7fb16f7aec9e7d7a972ecd6bdd41d860fb98c93809655483f13bbf96957e181bd0ff2e93d2b6d2db7dc50a375c24b2b715581d3efd97056a001503f60df466391cb72e3033ab7eed1f4f8d56939bdca385e57da54551bac3f2ba8ee5de1d2695683ce93b242747fab5ea958e9e71cb7c437f9d208fa2f9a05d0a567c62e5603607a6c26c4f9817e02d3b61584ce80d1cc72778b67d2a3c7e1618d9e4524fefedc985e27ea52c6d518c7aadce07689bb04f27ee88f04057f367477c99503cad935fcd84d1a86aa7fe014adb9c484996a4cfad06ec3de1b56620752e66ac8d839b593fec447f7fed7293d7b9986c2b83616152f3de7297850c6e09d455be3270543c9ec400df9442a3b6406786d2b688b7f4b872a9391211e377a92ed37de75c562b633ec2d5cace8b92bfe81e69be7ad78e4b38ae5e9ec4c7b8d626b58a9759a25e9b6c15b3c4dc4a718d3f0720c55009e1e3e5ef5f4ce15dc9b0380c20d3f28eccca5d297fc145b77a5809a2308aa874c7d76258afd553ded1f655a0c20044d49cf43c3cc67045a5230a26201495a29502f0875d35ddb23d4f0258ea4dd799144689d849137566da29f0c87e4148989f93b4839161e63515d24ceb3cfdc76348cd43271fb5a0a24feffbbe4465bc26b423aacc67ac07fe6347ecccc959dde638ba0d91cee2cd17d68b0fbdf4ce43e72fbdc8c69792cc9d377ab45d80f9f4a10dec3707e3692bfde9bceae21e7c00476905243ef7ecadac78aca87db43434e0b61af3d8e6c38c84b6c15ff321319a6619a76bddd728c9beef8b1185abcb5fac1402f349d3f0fcbcd9beaa14ee5f316d263c126122765f8be12a18b371417c46e0c5d8a9452c869c7a35009e4e1c87812ddca5e3abefaed7ff652153e26c49c366d6455a17fc8c3b772f7e51227ad41a4c5e74c650128dce88378fc4bc3789eb49a26951e8490d6d1f67ae223e74157d1a18d30bbc538958cad317f27f27437b44362d85811ba447c64ec59dfa983803618bbcadd61ddd4b7d3d93a1d72266344cd2b35024182139d71f0d5de07cb2e9f427ae0ed6e135af6b25ff06cc","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"f1a75cb52fd7ebbeec83a944f1c82707"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
