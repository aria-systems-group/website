<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"55ce1b30ca0b9ac264037531ea4f273e0851e4133d3c73ba7e27467baabb246bf85dc91412c5d11031adcf85b778a6d68fcb21ffb2d3ff539f38f0b5273125da9f27e51560fb0ab0e0555549dfb27697f25c1a606dc1fd4d4e9fe241f507362028751f4f6a0884b0b3d131204bb67dd041d36944686a541aedc0979e4e32313caf6ddd4c9b85d82b86ae9d97e3401883cc6d34de76d259e0ce46fdb5cd20d8ead08ad8274279041fe00b9f61d961738f46afb1a3a17c3d7c086f8475bb2f1bd087a364d35c2f877910a5c2ac100bb62ed31aa4c6c8d01879e6a26541c3e23e55d28a080e6cbbff9b931f33ef1eba38dbd7b531e61b5b44688408e7c3743e33cd44ac619b45aa51b88cbc83d9f170b2671b054f32db06e2e17cf02806166eedd72fe955672670326053fa479cdd83054e8e3c1489b3e498cd2c4605c2e06b8632367598f54c96bb8bc6b1d434aeb08a2f94391d95246194a5af384f5ecd1847fd4f08d30a06cb1f6bfc67ac00a1ea865bfba9c14162dd58155c000c4ee401ff1611cb32c0e81056042d0e129b4cfd36b21843297ea96265581ad71fa019ee62504a2f4bb2769e473e40061ef101d61fcdccd224e7cee496904a31c98046c497b8cf73eac4a8a958771bad95e9c1fe1ed8c8103eb32a077eda58956560464dd80776616751485af12ee6bb6bb4faba790093ff2f460ef7434e72681293680f66017aeb7cdc307e9330f8b5eee97814bcca3a64bc7dd4e185e688d4203593daf708a15d528c7fc6cdd5d87299b1e31706ef562f402744dcfe0e6bc4654e6aedede4e3eb4e1451bee97976d429d6caa96da32e9366ebe4cf44aa6d391bc0bc33d775a577baa42b3837bbd0c816409cd7c8ad54cdd86d221be14ae633bdb63be9565602254e18fef6a2f11e029c5309716ffcf33f9ef8f6247d2a4c50f5e5d0aceb939e9c0df95aed6f2ef88ae7c5c723ea5d8cb2a949676e603da45c2ccd0ad964f7e27be462bbed90d974b7f9cabc839e94d1c912898c2292d3c5fbf132245b847db27689b83597a72c3f639986bd9ae302334a85cb8d8a5ecd2033edb69955718f2c0e85d87fca8a5db43b6fb3d4e73df0d902165691f239ba48dfb233ba56721a70d3e7729e8f9c97d3e2842d6b3c10d221382a69470451d6a755fb859d5ba3cb26613602c08e85343f8a09cad3e288637b66a1c9a92bc19ceb8e68320488884b6afb31fd0c648cc93e5d6abc35f620f8ffed5aabc2e269182dfa1389e7376a2f0a35ed014dd86a6baf9bcc16c12dcce7aec4fc53f1e416a2b3e0099f70b7e63a10137e65d23af2b4fa7ebb54131d1110ed63f1f5a7998c67c8db79d50cb47f9353fdda2d3f3adb9ea0df61586c5158ff667f7942b40a93999f1d4d21c3c83d5ddb3d2629fd8efa7e4854bfe3baa11a7a5182ad7687bd5b2784ac0bf5dbc75bebe76fe54d4adb0517f4d77b37a66f7a9709553c8cb241e5f25aa14a00737de22e2a7abd237b15c64c992ee6b19be6359ce4cd34f9d7216ad976b5a492b89bf903408a489b2c520d99d7b34aca65454956b01f938a01fc1ff403e9b50ec5c9ab26ee9ac3d9e0e9158dc796aebc5f55280bf2e1fe740be6db4360bc80f859d0802ce80d01c6d2c66fe94d8f326ae80d071691c7efb175808eabb48222fc4b00492c0d1704f417df0277d3c9d0c47c6418dc17ce02891922ddf9d11e9274b3f4a0c979c598b49ff1639f74875d85eef142a40f3fcbf63ec03b0a75d563c58563a3f30f770249a5460b126c872fbdd94b63a00a3ef46ea5d1a9d0285a887a304be4fd50d67a496dea04afb676d2573898ebd421e2f2a11c60b125bc579d2ebd9b194269063fa79c25a00c8e2488c1dff99a6741f64cbf3750df13b4aa6f146b9d82c3f08b9118ea28402cb8fa2e31307e798cd2f0c088be9985bc0baefd36eb6b7639c89fbad2efc6403ed71a70b78e9f6069fa406ae6b49f161d67993bea536d7a8e568acefaf0df991371e4b38f81a6788296501619da830c5044740f8922789f758500a7f503a450ecbc7896b9b2074db1a305b33a3ca90aca38977fcd71c83c1dc907327f736c347de6170f448d1423f542a6dca9f76e0aa1e5fbe952b0dfe4a7a7d85ea139ebd102f8a98cc43df06229d46aadaf7e95e379500bac0a8f05859a3ea03e88163c9bba6703a0792428100fe3a7e62bd3168f80392dabbe7a1c3cd1cf05f67f66257f8015d9c6858f88b56f361a5fa0125dcb49fa6afa2946ae8f0c3613e734ec71b0c48566f89d1bb9947743df9968d6426df2e5b7ac94be61b83a388509537c2807e1980ff1b37890da8eb825addc71389cf22c1d9c8a69a9cff874b8d5da536874c36cd508435700a09a6757f81f6ca1138752a43608bb237f3df21f7b9e5d1721f22b05c2ea011191c025b6cb6d61fd57c2ec69f84c109adfad37c8ce1b939162a3f4c8633f2385d807976d32a8f15f086330be7ce629a54f02b57a29b9eed3bb42b517ddb9b0d4c8897591c26d5b910b4a5ea506729ce882e92665ffec734137b65fa2abd90f6f530cc8ba2926567f7e5241c8663c71edeadd36a91a173cca913a20ab1c35631960a47a8883576ac60d08381ac1b2974bd22c4c84b667ac9939f08fc0dbbe5a0e7f7942817d2951590bee8bd706e5ae82ec9498ce2d1e0f980cd443fe7bfc3d7515522daed3c31e99331c1c3f41baf6d20c391593addb7a601544cefbd5dc89116f5c21178d5ef12e955dcd9e63c2572ad4b38790bfbd5b807b77835cd12d6b7c5de93db552398839db6bbc28793871a873be81899341cfeca3259cd9cf9d07178f0d49ab032f21f709b2de9868ab47a0f56f3526285c4c74c1e75867bdc1b4e1da88dffe3396df7578ed75d4832b7cf8130b8bcb2fbeae0797e46652ff707d994a61d26fe3126d05b64867b47c334f384a36af75b91c5c26ed9e96c72b236732b13c536e7e5341d0dccb8ee70082c84c1bdac7dadbe79d237d2a9d0c155245b8a2ec8565b898fcc8131d3cf5c88975092a72efcf533b58c84cc5491b90d72f5d07d1845e23248937524e0c0ef1b4df24a4d820e9fc615b4b1e2e16ed37b1b65dcfab26de931e54d5aeb21ac7d18b8d165f6a1ef48936ebd353c9c4664eb2a2f0f86db5e46ef015603b6141cfbf961653d11bcfe860a8d4a4bbc338cde8cf868610b87784a9c2fcd9ef0bbec6f59d0ac4f40d2422738c4f3621362307e47199f473a7f83b7a31673b35dcb24738bc4e86f3f80d3cd4a3a5b86849dec1ab513a5799436e39a6fe3a78c16f00770a30e88d4bc8735949a977bbfdf48db1f4b614cfa7fe662b7ba30ec63b138c2d2638200e741f1e604e5b0203dddcf1f40e1f0bd78d219b4801a9059218fddfaaec8d7d69611372ad52559b26cd85eb6eaa611968fd4f4c69be459bad714d3dedb06bae3328cfed4e126dd5a6b3e422464420949319fee2f941d48972559d60044a51337944049ad72213fc7351550da1e84158b13df7fe69fbcdf008d68e569b16a6efdb2fd281281bfed72fbd62763e07adcc691ba604c17a5f82cce32c09f5a05a6670cbfd42c372335a640754e329f86cccecc9cb1c5e4aca9b77d9b18193592144ef0bbb5c4fe51973429adb178bb15cada020851ce52d7f35607ad6e7f66db4eecb0d7edfbf8da18b38be7c936708ef228f96232941588e34854938f1b67e4e5405e116c72bacc1c547ab1a6380f160596862571549fdaf25fb1f7e66938c3488f011eebd15f802df3e8956dd900073f7b4933e60c794f365b02d99360997fe77179a7e6f1e4e1177358b85061f37cc1f5bd6baf1ca8fb43f5597bed733717fc972724d7ff6694a0b9344d6efa06e2c07e9b09204189b0f3efd9c7d616aea9693e760b6b480d98b5fe1525e026493d1b2f8dcefb9078463d0336998171ca91d1e76b81562cb22fd11398b146b6a3a7064c98ebfec1630aab74728a2ad088cdf4195537560b12d3308402f751bd9e13adf298f662dee5dd5714add7c42186e0ef426c62268ea928f305590ba3f3a44e2684c6414e003f71e7f23a9ef1a01086d6c112e4a53e59fe2c0f9ab31b985e4d97b31b8dafd1066de6f8dcae359cc3f2a08832880e1fb0995d54b5953e947e89e4b2fcf6bfc0d0d0daaa6bc490ed862fd2d80c445fd3703fce399b9c7c0d226778af83f3e217198410c02b68acaa23b43f3a89d1be73fc37129a0fe0e681989cf2f90183d1fcc9fe329697798836e5b6b43eff0f108c9fd3da18bb7adf3b48d340dc01ee692a8a457dd3fbaddb4841bc6f02205c605640f5f7586b9f7a65f277a796f3fa6a2d33ad9e48912cc1585370279998cfb38760f7b1ef26b5d7cbe8668e87372d557f57381f01b332edffb915166ef6e52f84adec22e09a224916861741f72b398cd590ba0c2601ace53f85038bc40d1fc63221cbaa66ec85d9aede3d94eec2bc12d73ed49ada0aba06c8540d6a9656b84f5e2be3dfe9b11262f1f157d2a611439aee5bb2d613aed56b25201dc0be639acab08caefcf1ee9f095a0b441a07c5337d18086cc8c02b20783ea3f986183d591a8bdce3d5dd0dad6b895f660df3f9b2324ae0b4591892bad68ea4d552caf56c75152132491e0a19e85e86d4ddeb82d1bbd34a7cfde9fba2b2fdc0c160ed294970106f2d71955f393448bc5f5e89a55aaaef1de93c746fa18341268802e438992da471322f3e947d2948edc928258a96ab99d27ed1e26d2e00719494e7d170e36d66a09a9c277049e83ddcdf84bad58744776f543cce7c0ea8d57790c4fa0485901382ad805330efa6e9c48451fdd2b21e232cc496853b73bfac755a106a5f0af61e83feb82cbfd11a1cd61c6a4f7581a3bf35e2b40a5dbee99dba51a3ae6bdca18e7dc4ecbc29bc67bfe8b34a24584c22da406d1a33df8d4cce1ff9583e3c086fbebe9ee44df7a27caa3f9f172edad977fd14d77ccd1516d658540f4e3fd9f152a1a20d652879fe50764e68e839795dc54f57785529c6883c3198c1eddbe2b6689dd719536b105619931e4035738f4e579a12b1f515955c5f7a080e65e891cdf93fce940108e4e161876ecc5353969cd404687c5fd095ae8dda21fcf1b21001f61df725e22be8413c9189767c8cf1949f9e19b2beb6f49b692a8d0ef63ecf99ae6e8d260d3b92fa16a63c99af31f0034cc56f4984b2f6f1876cd0212cb2f4f450384f402cf4a1e85849d568bbe696c24cb206e2f524437c5e4507e13061ec19a7180cbe818adff6add915032b3f75a38e06c4a7e0f036095f80de30118f223527a73928b211ebf0aeecb747395757f1553f1232ffebc4f96a11756ac696846e3bd3d4ec2c58631c787efe828a937c0eaac25e9e5ac85e4254dfe49e25c6113a92cb3bd72fc88a9694f2c2a7991dd7ed223b1c97373d9b7224dca0008e584c4cf844dd3ff610b510b40c5e4141c5db0f5fda3f3f4ef3f54737176c36f33173571de9520469d3055c230c84505f27ee976c6fb38c47dd3fde33a662703b4c05d83767709a57cebcc314a2198dc608c67d224a0fd6d904135d78accb2fc32ffd0a91d216ba8d2f91aac690a0a5e98225be41d31838a2b9121325d5ddce93a7eb925dbcc378328756faf8863d695011b90d6430d5429e64a57f0152e8e9c19abe0b86bcddc07c64c91c61c4ed7b19460f8447b9ddeec5aafb87d5157eb0dcf077bacbb20110170581e6f5d04581826a6c4c309502f4a965ddcacda2e16d71cc6541b65c5b0211e47a6bfd238d2b371088b833da0d1a2d20a5a1cbdabc8574f66d05c179b6a4dc63493a5c89c2537d2d5f47aed108be89725df03a7a570c4f40ddd67da44dc8cac25094409709283ad0937e7e146b551d0dab46b1e7b0cd92fdbe5d15da13eed67c06143e6a5418b396f65f128bd97185d11daad2620178fde7e7b8062c9621a911e1bdea7d9123c6ac6bdc669325bd21061c03c7ca7a1445fc26e2c12c0466274b47244abf7331a1aeb017e238e67f88a8103f859fb6868927ec34b4f30eeb79ea71546c4d002e92d70a117e534de6716e2891d38ee977c3ff5e762816f996806840490e3f329ab2872b3c8b579cc1c53dac27994ec3c626946ac94403ab7be55aca42669abef9efeda146233d4b4cd8cc53fdac5fa2ead654cf7fcc29c755534a52bfd0094c29f16ef851253899dee3707af993bc6ce4148f28ea2a9c2333dea59f36084aee4ad62d6f28d2a5a901449cd72096e0ebb55beea669497e55b76cc5656fa400a1efe1b690329e170358b94be2e2ae519a43d27969b613e93d2ae24baad1e1d99c56b37bf75eab67f5d9cbfc57db217c75a7d8542bb2cc9908e491793a10ccd775329f0f21adda7567fb87aa07a521ba00a9fe3fda31ff9ef761684c7986118b2ce0ae6c4f6add304a70f735503b01f79a1a462412aef9a657a1ad7122c62f69a062b024fb75a97324892e967bbdc736bb2c83b01001e9358ae1d34ef55db3b15fe19216c628d1f1b82a5ac8d75a6fe78911688f7a4a0433ccde361a6848d774813fe4c608d4721401141791b8ce9ac036102c2ef7eeb5c521b78c83ca01f4a759e695b71c2b24b3fee1480127e83df5571b566686ab3d76c04704bc4ff6d130c325ebd6c827be8f6f834c87ef6dee0e78a8cf66fb355fa03a30a5ad7a3fb05b635553af30b609276d50b2e29301e290064065cc40fdbd7ead5b33ddd3262d615da6ecd52e5bb4fa65db1b257e6c0ee3704810abc001dd628984e8d743d463840465a636d41ee850a177ae1ac137f1750c79655df0e0d0d024c033c19eb1fb7285f6f8d0bf8a1966240a9a18f6f21a1c65d7ffcdaeaece4d344758df3b943d75f4c9603ac2d83e5eb90c929f1427c2c88257fb4219b2a44d5b685cdb1daefbc6d60c480fdff983e86aa13441358843f204b0cc1afa366a1bd62132a7e3f26e2f871db1087e96cc967263e70a33256fe47a1c10c0f689c68633a695da3dca97e75c06091ebb03c970005dad31168830b5829dd1d2c1d155cfda85a2f991f6d6efd10f188415c0b3f384246f87e07665912a54af61e63f472fffb92bcb48b24313f17371f73bca1b68f1ef97b45a2998ca9c1c44653fd211ee6b8765145f712ba7fd9ea7e911a0d4e5c07ed205b08d758be33e8e64bbe9fd46083927898e7e671cdd20123a3fe7d3b08f5a70f2d810d73327944db8a616067ca742d4c92db845e3a1e655a59d2471e88221e4a43243c8585201c8380504e5c5eaec2932fd14652eeb09e65a208ecbd7c1e9bb109a4f64530b1d0b9a69fbade3b010a17f3f4ff28d6baccc37d45f120e9a016bcc347653074bc2ccc34bf37ab976a887725408a3b8f8df871ef703a61dd4051801427dfeb8a5d43fa4fe7f5acaa8365b0aef050b790a29d16fef357f60bc61bc1099c5970ec16d4f3695994522a929d83c90b91d198054c7bdf96bbe519b7afd62b735a256b839e4d6373a005205bea27051a58b7ba74175120837c4c40885aa90fb8641bdc7b4150ed1106ddf429386e687adf69433652ddaf89c3752818413270451463ee569547d48e7b2d7cd0eb7dccdb3b37c860a20b5cc6590e598a5e21b6e7b9ba250378f292812592a9870509d1d5b2b9de0cd714a07ebb260b2c753142e2955171f1feece664b896b863ddcc18977330b79800599a73ad5e9f9cef25de2094350795116422ea2e75f4f26f1406cff9f4eb2f9160566ab9802070cf8b154818ef6258382cec170fbef08564395432030714ac1a1cefdd24b19d034d0b815ab242f63cf59fd85b7a8ae27dad3f42fe939f55267a1a98b5a36c2ca2a9772b3f2ddb9e087431ee73dc42e74cceb416598def1de166e329ec68e4ce06f9d0a4203dac697791796e49f5ec74b28e3a5a410e8b564670afbffda4c9fbbaf6eba20c6fa2286b9dd37a8d4ca6a1ed380692fcff2c9c87e759062677a9a40ce669ab6b510ca3db50907b2c3456cc6e111c92caaba77bb7ba3d9b997cffc40ec6bca1a521dd4732919b8c52e9b423912c2f872dd186d966458b23e6ed9ce1a31b5ec442ba5339183256f53dd393c9be9144b7b2a2c42d92ba29481d25ab887790a5d3e55def1d2d8148b6f16ff75608c8e7e066bc58c83d9bae994f65c7e4dc9a3a33158e0fcde581b11252535ab17ac08da0e669203b06d50534d3f2cdca1603e1ca0cdc3ca83ecf4e55ce0b474f9ea39b9acd5b2776f92b194f6c6a14e6c56bcc70196f2aeecfcc38ce44d6104a289e653d7e545a118a3d37524bdd6d6b102e9e25d8d70a7ebaddfd6d3f0f6ae384e621c3ddfe60a17d6ed0f8def26b1b48c55d53f41e2e26e4a3b90a3002c2c3d70bb1e663adbf0b807d2f16d1863cd9585fb2e5146a15c841ca08636e03924960f466541e0867051b0978ab6e225201f1b6934f821a89930e178bd4a79e6154b93633c34413cde8c8aa746373423fe9d10c68bfbc30e1bb5c8c04a692386183c14e0757b05de1d4385fd42f4a78121ef6896bda69e5f7858a9374c39133fc5919c60ca3e8d594d9a09293fc3feb9365e954c7ca76702a4c18de2648804c09ce825dc1ba8b7f6fe4ba77b17df938fed2834ccea854016881b9c94bb87a7af19ba4fce7a80eac08b295e5fd8cb18a33daff99cde4739a66ff0d711199dc22cf96c9d295e55eb1a68da4bd67060cd2ad24c6e19a1aee7f773c18d9fe39938ef7bde8f45eb373544f9b8b25194870d2805dc58536a4eecd3bbaa11e7fe0908b1e01f7931c4b2e6c2161190c1ad202027a8404be6e6b6fafb153f4c6f9d37ee63b70bf1b56ee2f4d02ced771320219b5924d1ea2cffb38ea8a4c97487b71abe30fa4bd902ad0b54c7b1d3dbfd0c9db5b1e6e6035302fa34e0fa1c603c11d05839ec523f31dd22355b94db1a99b4a33a18fa2c2c5487e39f6db4d2cff48432a91ea92c357b645adbf46f2a2045dbae506d3b4902ecd81c870d6d4a7ff75c5eee6cdabf60771cce939ef4ca454c82f24857284e10db7fddd62c6ecab035063f4b6f493e3fa838bb919fa1d52340b4f4d6fdd44b7bd79a043d19c1c46f967399ec54477a4678c15a52d980ac54e2e8bcd05ddd857a158109d237b8422edd61d6ea463a229fef90b79700618e2079f85522df432ac88c3e20358b44e6971f3c5e19c1c91f034530668d105c070b22ae3d92a91c34368338d01cc160f6b292f9e696b2a2d8a4804d60a4b5f01eade7dba66dde0a800161cb371e8eacd8e2697d26bf9a8b72b6c2da7ab44721754e9e84f1be885bb8b12c4667743300f6506386c93c3627d33d2f71d0f20214a5ab163601f24d2d7ea4effaa9a7aca63924207eeeee38608acc3749ce606e8ec1e91ac95808accf8dec9b55ed2268a26432b13f37e4e782a37907579e931fd227ef62b71361dcaf941ecee5890a817dbac59112acbd6031ea243737f30b76a825abb65f3da18bd61b84f307e606a89b16a32b4c48e733bb54fa350576a05f033b14d9991c3c9bb966da1e9a6645c4d2789c32487444bc140f8127fc85089a795b784ff9ec0ad19974c1002e84fd489de2727268e7606a65f105624a444ea54bbe6dd06c47ea64111e92ed669b3a69e534958afe1b5191faabd987f240f9a41a5d936d117d786053c16b8fb8fc4edfbb880801e6d164ff10e0552da7bb60f22887083f32f71854f71a1eb47f3c94bb9e83053bc947080b4d723ca211e5325b42d33cd399db925135527064453cb865103ab13b0d924b353fcd272317a7fbef53b300af55c2ce54cfd5e7c2758ca06ad74e0920a3046a7d68cc1f667b432790d3015a966d885f885c0deb26f7ee47a832bae788ff4ff7c20028b65929104802cf8bcd5fef55e6b3218ec4ee4b9912e98f9473d387d7e0efac3b5cfdabe58a19b715d7aeecd1d038faffe4e392a01b11035a4a85b9a28aa280a7f6fff7d56fbfbac184e79ec228bdef70c1b23dc2113ec02f9af08e0b1cc6e6def12218d92f93059cdf1af714360090c657724c4914aec75f8c781345841413d6f9eb028d93dbd361142cfcdd1fe5423da65b0af49e8d2aaf3f32b51da1dba6ca6de8d23df1dc0469865b8de55ad277d4f70963db54568629657f30cfe9571ccc0fcf17decd2f9fe8111cb7dd05ab4e10522a042a4c7f424d7e5c56b7ad95982689ec3b8e8615f9b0bf15b4601a56548e4272ff2a03f640275b6178317ad994fe1cc2bf11545389f2933287dcf7bed5c1beefec36cdb19a6d34ff87c430c940701742cfffdbf17771348b665fc61bc370c077995e75bd7f10772c6d74ca3bdeffaa8acdd1c65701a275d99a5411523dfa97dcb88c698ff78f0606a9ede83eceff882f46dd71086641ca956b52c7f04cc9e1495627f526fdfc186760ca14e8b792d8a90efd7b5170d1afc02eca2b1fbd5531ac801c415e3a5731a7d7b35dd4afdf743747b3fc641178a12b1a18f3e3ffdc4a85eee6c3720e089a4dce7817e62eb5443c9b5ea6a50ac56d60c892dd8b384779ff212b9425457ddfd08fbde7d97c276e19d98ffada104b598c105700c1ae0aac4d21c87a73e4c5dfa987879743c896dd71b41a87501f9bc30a5b5b786ca5bb73e7ae1b7977816b57fc64906d561902c014f818fb76e536ccc62c9fe91a1ef9d234481c3fb789790735cf7e1f73c4aa9de6326d7254c9e989e8448d412328600bdbdc24b593b95a3f5eab6a9f020fd3164b3eeb2dbcd243e602e6c237f1b52c3c8b7d271c892ce17a67928cd2a54ad2aa4dc0d74aa7c3d0a450e25e2484f0351ae1aa4f372caba9da8747e4c7851bcfed130a74f6b160d0add36749216cfa3405f5e61cecda6116f47a7407a3939785979d5cf4ff495e1834e0b3ff6308129f7e48fb7ed26ac6bd4d1696ccff9042568df8500c42d8c798faebf4948f486c535bcafd8fb46b5ab8c7cc2b30bf5064def3fb188a62729ab9842c69f3f1183bf143b02bd8266bcd243506faf5fd447a4e74ee18976586b3633e5606cf76e12c4c30978a3215dac08589b930b2cc510ee8ce50086ad94fcbd59e5c6be78ad8dd840420c795b3502067e674e571b40b3819a00a830bd7242ca10b925089dfd1f7fe2fcf7e601ff776bd9fc89be78e95b3215958391d14840a6aeda69b0bae446828948cc6d9e7e28ba80f04047e0e02619a3b4e830936bc3de34c55f47881ed3fd30d91ea688ed77bd95b31cf54b83f548d80234572f8c2816138142d6d37c7bcdea3273b4face87ab96d68fe091535555c6f9ccd0dd94789e37718c729c1e5696ca8b60334b72669f0e09505d2ba4dc0c68acedb18e93ff7ebf72f880be422586ed792da5e0efbed34f928565f5230b3378fcba8edcfbceeecbe561c7de18063e113d7fb0c763c6e1ab51e7c3eed70bc84a50a8f7bef1ca2df003f72cab5e6ced3697bd216a7b3e22d4884bcd54138f2a1c731aa579059ffe9082c20df2bd90d8b24b6f762f1aa3ab1fbe40f7753d05e1e4d387e10afa44a3d0fb827dc91e43ed0238dcf86e903560928f7245e91d4b1ffb1267f7e1a5caf486bfb54f0554e87085a2c7eb8480aed32384481eead797301ee24bcefc82e4077bfc8511c4904433d13dbcf16ee87d9a4ac823f70ab352eb1aa44adab375a2e016958e3e11970762d9172e2bd741dda3ff6f041f72d01226966ccb3f36d9e03a4a8bffb8fa71aa266eb17f377974b7bd07a687138979ecfa790dae813c6d344b1a7a41ea834314411add43a4bd01baf21b08ef6b0e29f1dc315973d08e27f6f889d0f5b90c80c57010b279bcbd411f79e052479716458fb9d140e55421aa31bdebf132e1c94257a9da5f7b60d4778176eb551335d8a2c6be4e08050993b14ae59579689996b8515a98fa5df1ed0e37531ca38c32877291f81d1a42a4f26c1cabf7df53b7f0add09592e22eca5a9fa9b8493efd751c41904a3d088cc6ee44f09cd4765dcbec97ef36d275e2b626930b27fe71ea3d9eb027c043f301926b4f3be36a81ce32d4a5ff4b292d76cd40acc8be84bec0443b53152845adb540aa880146372191b2b0ddbbef575e7f3c6c17fecf908a37a5988710af5623a519d1229b77e03390b42eaa32329cf0bfc50204751882a910901c5d5a7beb25241ba7a5d9bc460930e34f8f2f4f23cdd31d645fa6215644922d9570e54b9d5b5e78c455a4b699d3b7d48a83399d3f5da87be72f1a9762ed2c34ab7a22fa253c1f0144e7ed02141fc2ce819e8b1b0a62019b15cdde8508322893f45f4e6d8115d90c72791ece5e4bdf3ca77ae9501a7054c0e8ee947d92962424b7bdfbfc3eadefe5072318e31db08bea267228ba88387839f0f3ebcf2e7d32141ed4633cb85b08380fe8e9d8f54c1f142f9c7320062afd6c01c469cbb34b943e0008a5c49ad8c5fa283138a3a603b4d8abb7803462201b5cc13d8412f453f7c4a6ef14338ddac06b7b85800874f0ba50958dd710a1af5faca86b48cb2dc74bd7f3c0544c66d3be90f8d37515706f9442c7b97cd17fb3381c210666366c6e8a5279d1ce15bc0e724c9aba06d61816d5c90800dad94da9ac3ce22815c0815e4ea86c28bef8b357a2895dac9724944ba26f6e220200c6b42301df2e48319162d55698d364e67b698d8a957c854ef8c5812e75d97c8419f4a2169d38398b0b4ef7cb54d050ef34b8c0b79e7511c127526cc2b57430f023d91df71eb817236617f4b25372ef04a34afa89ec10194a18f1c59e72bce4bb08e834a1a832dcb98c39ac4a8747ae5af5ec94d43042dbbd4679da1ac8b04e90acab9137746171a2b0f40eb22134ad3341f1a0f6c3f070bc4117231d57e8a8f99a410e4a2853a814867a06a261e895ad0433db6fbe47bbd467eba089732966af26a2934c2ee9e4a23b49e417faec4ab3d3940235c230d1a3d186c938071c72a92297ff1f20f4bd4e48b0007e39c7e38d01df64205286116e84bf568235ed3f8b5df2673b4ee5f1733fe73825858915e5f3dee28fc26e35d427354e4f0987b2b534b2a41d90af47abf8071eb03564acf5a7e0cd69aba9bc0d03bd274716d4948ba0886bf2504aeebbc6d164c26694ccbcc9d1181f27981abd1dd3e7297e58e143d4a1a76175ab10fce8ec88746bdd2dac0f89d2d0ea1eb20fd19c8c369767fe63ed9232d233a7d68a9db93c1d7d1fdc734fbccf0c44b6d247cd0854dcb99932c0b82ed9a467e16c10d40ebfe24e7bad0ec291edc90c1c4ee06afcba4f91a8a1241c65849d7f38bc5b2e18dcd47c7a7d3a711310337c7122bfe493c1489c962b91d21580e3424022f43fb323049fd6972b83665cc91e8bda79ef40b2c92f9227f02b95436a805c4d0d096dd98051b350248e5175e4e29424b218c028cd716750751b5ca9787682f0372178fc5b85164c20f6d89bb725ac19c421e17ad5cac6f63d8e27e76a6be37705ded439571b20c84510c17dc8701be0676506f646bd78db40460aaadfbf63cb402805cd635f8bebb25e46b274aedc03f6003a7a271b6acb5682c7198f600d03da66c790566671f1b01096a6c96f8b8007e344c9e8060acea8845469623f7663fc4a18b869000a1a5e657e9a27c1671b05f5c5fcd2133805e03373bbfaa63e5a5a54156e3457faff89b34a6c351d51ae2a2d459e0b389c3142c69861982b9685697f91a50a59d8c69e031aae9dabf3fb31ac54c727a815a55ebfaad0b5960305ab4c558dfac45d3eb67c0c1ca100c0b6cd601db1aee43ffde3c32e038b73599c559e984504e4c4429ea72a0235570f258bbb3af17d7e07a81681ee008511c43520cdaad806f5fee7b3c792f7ec90d8afe36f9d8bebe72ab8ba9ae37072049668629af922adb3d441ba476aacd3b3d74c9a8293fb4bc0571e86284ed9d9a72045ae933c8ee6da79baacd27bcb5d3ba6ac40b9dfe921ceed97bd56da402cfeb4666a2062cbf99501a8947b3148fdd0709db64b0fa60575f29768d048d2d7af16b8389a46904c3295a91e5f7736e9d8b787b10c509ceed4bd086902e5551e1de342b62fc65e663e52f8c2bfe45bb9af60480869c03778570cd7bd8152e0b5212d62247d4062c87d7f00392cdb3ba57b835f6b4096fcb76b6adfb630d8aa19259f1636932fe1d7abc3dac8e8ec3387c0466bf7d45977cf59c5ecc2c231dfc69a2afa5c6bc3370ea8ebd503be5d2c2a32f214b397d54cf94466def1c438f47ee1bc5c2fcaead854588555f256665a6a76991927691e96be4ead1627ebdd562614d8c0c04e4d919124ab36717c9f8906b9009dc9e4fd670eaa527b4dc884072983fedfececc8ddf888590c46310e60112601834fd4be785edd9703b2a9c8d24536074de5d6e301535a31218a9ca0547b1e1f620443fde12b7dfeb6202910656f2db258c1581b30fe95dfc686f599250d790be3134cf6679aa8ad922a484725ef65a22a3d72165ae8ff29cfcd106d02e8dc01550731f503afd42ca0ad4df4c972925c6109de11442e38379e07d6b2a5d4cacbd3ec1bc165221fe1e34540f0d71d6e1d031c9be0a8bfa8760e8ccd16c8f324ba5408a16c0d0b2637e8711f37aeaab6042960050d18e7c02c9806cc4cb7d8953d71dbfb89bbbca1b9e96dbb10333c5c3d1b738a93eb85b26119bb67d5670171bd95843cbe11d717613e4f90d9f54b276ad5c81851e294afafe3bd252adc28b2b392f603e4e9fc25fd16be43db254fce6faebd17f6bfc18542aab0861d0e0f840c008da87dff7ca0c3bfa4aa7554eba94f4c7b828483f030f6b600c273d9861f9bf052a0fe0a40e0266de3568d6505c4df227256a6d79609c141e1f9c1f77dc2b22497faa5cadb5943d5627f8e7b63e4866ace7d3296b0cc46fe8fa6e29a36f39c4fdb269dfb4ae78a50206293379bc73b7bf98ed0b76de1b8f852d6b95160f20772caf3a4d24a9fc14dece71485e8afc24b51c8b487339a1f7a01cc695eec6b450b8699458705ce1a0f2a3de0595b1ced457fc21909ed53dacf4d2cb13126b0c9cd1ebcf6e84909d3d5060618a63e44992b2517af81d484edadf9bdeac916a6baf7b5a39c2192c8210349a4358d27b9bab3a4fd597b7be8e4b067b8d64d85acf2debcbe1badf5ec1d753ea5bfa4130d61fe82a823b3370d3c3dd55cca53c0a631c773ffc7d7ebfe800952764fabb326b913377d455f4819a40398db0c301cde9ecfd43a5daf7e717d472a7abb8354765b4fe8fd993c3f05342ece4a716057542f3617c79d704c3518978b5f9cbaf802d63c7a7aef485e1ccd25af5ad74af0a4e6bd382fdba761bf73de3d356b2b535332cda706af49e60def61a366b76a947ede5abd1bc3c1a713d1bbd7b4a560671f93f98f6072e92273f1915550a2dcbfb96d1d20c9d6424151913c0ee14467f70a4a2c9c57e5cf6ac530e19d983c829f4dda5a0f277301e136505b277af2d61a8353a141ac62c353c20dbcdf33419817c1964079a742786d1a15be578311b9782c54b47205ed4757ff536c7b27645abc14e5b90fc71220bc0ea59303d36557788ec7d2997db2e61532ecd92e67d448a93d896c44a89c4d036d799075760f16383d41dbfc5451e9a56f4cbbee8d8c00196f862966afc4bc1b314c57c17348abde03c8fc3d6b6ff27582ea66877881d9f5b52755d58039d0ff2c92f02e26744ab2d045722bed63d375549140dab4b87bca842fb9ef6d8c11060aede9d77f7d5cf41770124cdd5564a1bde6e078fda0913a016e1aaff04422b8ce5a1c3f02fda2531ec7b15a7f7f451b46ac7374907fb763fe49239196b62041a73a3a42ef56b641c0cf7f2c6d4288634d760833587648d3700a84794151f562869444074f75e2913c5545903718c8ca56dc11102de5cd9a28bd402fb60a3fb992d3753bb9081b81d80955357f69666f410afd0483c2afbaf7acb85e654e508d39f1bc63157de3bbdb519752c2bad861cc6908d47f742e1253fdf71c94ec007e503d79c61f3dc038e2223e9d5f2d83178f3dff86c72d8c81c4ea8d4d8f8d21d8479961435972f650fbf053c1025fa8db70aa8721744cbee8ecff554d53427a686481a2ee4423ec19424c328e4143f07873bde6d2551e4dbf32992100f964f95bd07efac09ca121e7344917c5e964baa4dc7b4e849cfdb9513515db2b17f54f9049b6c8214831ec8b265b46d06680dca5d7e8676433822d903b55d51b4b0021fab77e6284db6474f250b4f0dc761d3d9386520161b5777f541b55d6d6e023af813196d5bca62d2bc49f336208b1d2c0d61d6dd3c284cb304efb444bd891fb3b2a6c7a287416d79f338d7ba23ad1af93f4b0ee45ba416a967754d4bdc5ccbfaf323cb50d6289a5dbd71f1ef9120e53ac8da1851714c089a6bee8e009fa328d89596b7e8fc0455cce1f724de1323311fd675568c4688245516415d075f9fb0c11518d0bf5530858b285ac01e4505b7973f9b9a4e5640523906a0cdc03a1e0b76b751e7ac9475a5d0b3250254fd9d2bd2db42518d9e9cbc08f1bef075603a69433f76ec0a2911fa37578d93e48d0175b2be6686424f7093f36142f1c65aae272cd18328822e64a852391b3d194688aa7e0dca8a75d8956c0f7c741f4cd6df6c410aabb83cc8ac6fd3b4226ec446853a1c983e5c579a21abf84cd4b250dc6f32d734c3dc672fab7185b2e867de0ff89e2edf60aa32774c749ae7b997fe62b84916540e175ce65e99a41c6d35baca4c631e5d753c58dfe1f51774bf4901e64057242a24faf2d501a7517ec8624eae10532665dad7675e4bf474a6326b8aa3da0b34c0b10e9a691d46789947d650f2c7e6f801881cdde5ac1b879721ba945c94af7f9d73dd0b9175f79b63db2be34f4e832482485ca0db08c507f44744edb84692e3e244d5e9f5fc08124e87f460ed9f7fa0bfe7a7026caf46d53f82f3512ef18cf13749c3f99a6410141e91fa9cad642b3d3deddf442a6fbe535746780b83c59a8dcb2e990cffa90895ba47107a8f30ccb95fb26579f59c426ec540729d141bd803d3b4eb67931a7f91d471f282fad5eee825202ac60e14cb3a7b6f37808df079894a4a454b41e89caa06c78dcbd6fb85387379a43dfd51324fe7099efb67c7cd2d89811428380842f04cf3cad291b7479acd84c755b34f1450d9920464b9f94247694467139f242018094e31bf35f4e48a80e2ad2807d77aa491de4730019e3e51487b8a75ee20976db7f8d47273f8d2adbdfab764c085c40d2ea632a994d942e604aabb7777e5ca1d6bdbc3a0b720cd2c7830595031db0fe45914c7006ac0285c8ae16af86e065b7dbd59757d8c067b039afff72b4c97e799e0c1afe4b006f7c8fa4ccd9113bcb79b2f4083973883b596709c3e47372a6cd75d4b5ad660ef916a362deeadad9e226d17a05207918df39f38614d27997dac4e1860b3a96e76b7105688a8a622b19860eadf29c08ff17b3d33f2759bb7e8cbbddaf518fa62caab3e7342fd431e9489ab07d2d62bd4eade7716d02a4048540a1b94c4d92c2d1ac45c7b671302a4de6bc90fc547656f7eefa3d60ad7bf2498fcb0f623ea4860e160bcababc6e6f0e38682ec319b42b0a9586493e9a15f897e54f93351bfa1b301e7292858220eb5a7c1c6ed128219eb3ebc212ab9dc72dadc21fccfabe5183ad71386a1ccc8e855d3f918030b72101a2446c1f4da9a0073404c0ae7c4a5b7baefe03b6f4824dfc4c20a1945fb60f2a54c1f0ae56c7e9a29b18fc8012b31b3c15a3f6385708f2ee8f8944929575b756414faec83628357fe9d21e9318786c1055443967b43c4753bcf0ff77078451915fdafdeec22990ed82d8d0f434d94e2e00da7e0e6d8d88cb192c27ef64f452c00744ca841b242ca467ebd6056c58a1ded01e398a0894811d3673042048e047fac0abe2cc0fabcfcfad7c040dae5938fa73356eb1b85826a71fdb92c417b361bcf36c575251641c4bac831454c99a549540b40deb1d3fda9c4bd994e53eda2bceeb087dd2b0a1f13123e3adb268e0ef1217f8d9c0a84e069396d7601bb6028a82c127a4de6d215520a22992a8e05aa761d831c71c350a0c356e6581c155b59530f880c264604030f55e436ddf7a3bc7375d644e8e1dcee6df3415e77052b2733b8e69a104faad6f8bf6b6d75cee84f9470d159cdc8567401c64556c6274a2f85b939411089a3525e4f66415382ae37d6b4fd24390202e30957d1c12d81909f9d3743f23b51db7a6cc638d95004c34d31f69162e41f4badb31a48a8e5e917102194cbc8161bafb3d0aed5fc47be6b1ad5c60f11c8310303d0c622e68f22a6105663b167ee230dd16a79d4551c120cc47b7a77165d05f1f36912ea6a3aee4fae16dc057ab6c23af575bbc18091e113cfe2c48d11dc994bd82f0351d55bd9ec7672a9d9c69e53f7202b6ca1f2c0490f19ef4a43fcd2c864dd3c598c3a913bbec630cb70178aaa657177ee7b7c197279b09b72925a6927fec63856a6cd6dd07f31c7f7c779db320b52291884f8a1fe812ade1026551a6ea6303630f6815adeb277ccf1c05225466ecae67d75efc05ef887077ee6fddc2fa59c0ba54651a2dc150f902b5fa8462923bcc462d4c0eae5ab4120cde57420049edfc6f9425feae1dbfb091801d0694a0ac17c461c0b94dc15069a1ac456d1142e636d43e246596253c9bd6d5b1d69d7b51aa8a9d1a081c9137d92fb8cc3726b5338691988c6450df05d015bc765935d8aab4bdbc726fad28109cf058f096aece0ffe4c9eca87f8476e9b64168721fbcc76bf","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"0f64fb5a2ef15875be9d6eb41555262a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
