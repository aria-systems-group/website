<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"4fde3a934fd9c7b376805b4e625d65339f75f3daa8206848b5644900962223ee9b206cf8bd583dbc9bae0fd4182d4f3e8fab6b71892599f8d422fbdb1da1fccdeafc911dfc2912bdaa99c164ed8cfe34ee7da1e142ece7f12800c1f312ceb05d520ecd0b7a9406fbe7c3d580e99896b71942de2b5193079af68747edc9a321e7f4f036fad8190cc8033096b155b12acfe720935a3ecb7b4db4ebcba016bae50199f832b542878a996528531b2906da1a06f1c673aafe508e8aae38b0794c85366de96abb02a43fed80514170ef9fbd074778c0070f49512719d0dbb0d1676a5d6e469051a934425ca361ed3c080ff67487f83b84e22f3b70409556cf89753053a8244c530933c4e315b5abbc30805f40b0c30ddcf41b1f972ee91dfcaaa8d89d8686f990d38f47a241088211b0795163f4ee53ab8cdb125fa361aea1736b4b9df1325fe78e1449d9b22c4b771cc3af833e44d147e8ae3ba0d1f26a4111df990f3f1a9bee0ca949526c4c5b2cdfa5cf61324df8e423f0bd8d6039b9d9d53d4452ae6c1614b9c5002b3c2f3d51a6fa42482ccb8fe01549c94c4fb5b064408e36f227b3fc7c1d7a02f9d0ce2b3b7505ff18a327f0ae2b6c9abb3bec7d77c43b19742d01010ee2f892044ee600d6c0395c9bb4ec2c3167d7c18871d491d40e151da8baa13c66801b27ccc6abd4ac6911fff3025cecd47b4a5e6267fe3394e058b54be1f5c24a04051016d43b69a8485ba86013f839979dd20bf41dc04de91cc7e644b0c2d456bf617c399715d512c2a83dbf1948835a1b63e18a49668e75a44b64c3ac5cb0000e625ef94a8d4f85beb21c122cb02826879257d6086feba74f6afdffd1c31e3d320a93be4d60f5cadb42b7f6b9ec41b64270f0317bd5bfdea9a24b4cb8eabdd87017431cb27d1f95c34bb4be3bfe4cdffe0d3c54a2c2a551548b6d769c690fff27155cb8a01e869a1f665259365f60d2e4c5703ddd0b14c732c78ac24c310823f4e80caf73851d2f8f3818617c34f85224029ba2f081c386d7e8efa014440b545f772162337d2c205569e77d6c4e170f9bde598a168b7b1a61cd17511c58bfb340010103f064bf65aa39e989da5e1c63b52f4e86cda7b2494f93f38590c12a5169fcd5a4d3d7459169208e1b73611c7904e48bd9eae709a468b91d611845d5254e9c7214370057a44247a04517e9e372d37114354bf92a32d86733b7f324a848f7482e21b78243b0febab548e346b08a4e7b455bbdeae1cbeb3c2bcfd684adee9bbc070c431c50d3fc1aafd6ade6bafe519707596d7a7c9eb97a34a1fc0a1b97b6e233c598d91d446bf192d6f3eac8afb4c2500a7d13e6ee1eafd96593173e278d932dab84aaebaaca336307606fca632e58c77a49203b6ff6b71935d5bfd5fe3f3cdae265b12dd352e3cdeaf16e68bb14493e652941eb558a72a3aec4ce2b1939e893af30cc24d556e34eeb21f7b4821a589f13a34b294773f3997bb1649aac4e63c6bc84f376ec6b7d1c03a4bfe409d9137e9347592800c7be951ec9ed6b2048c49bdeabc879955445ac72cb5bae9b6ef847dfdeea0404c5a8179480cd7d368c34cfd0fccb75fd19f5321ef0e6ae9bdabd1285ca08c0ff89cc51376fb8ed37a6204115d34b59002595bee7a90caeb2ce327166bd74512a2a0789c413e28614bbf2149900a0b3f72f16e4b19ae3e465b188be94fe5dada999c7ac4a4f405de02e8a91bc40414b6098d5bd6a4816c7a77701d81d318cff42c07a521fce29a7da25aa826533b823b0bcab8cc36533b2c077b23e6ca492124a5ece0e5a328a5e3763a253e898345a82fa40949126267b5ea25e38b41c069bcc35a5381cd9d147ae717c16d68b0dfe70519d72b781b6b9800a4712787c0928c6a41eed888a40143025fa11cac8c1020c8ff674d625f1085457f27c096c7386055e324b40c6106d643de131baaf8e1c60eb6eb3b2f6fffadab949c207d2b998c01e737cdaee8b01af0f0c1e1bd1357fb0f29a0a47d6c0f16706051310bad65ff29af3ef52ef6add918432b91650fc0dff94b7d1c83f93a2ff86ac44889dd9b437399b4d37534e8818b6eba6aa58e5e28b6a5efb74c7c52455832157ec5cfd4b526df4883adcf003f20927baf941af4bcebdc22fb7522128fcf32ff3fc097680eab2c87d7f9b10f4284dfd070d0c86f8ecb4a9a5624d20e287a1c992687b4c4b04a0d404a1846e17c03d76d94484cd1388043cea5475edee2baf7207bb716c9c965c84b3a6f5d8a7cbe35bd66ba29230d116523e963a975793f6eb4f2466aa33646746fe329f3135be8e4c3aee3d8c02c9acec438ee3aad8e2b461ee2880d88c65a1605dfa63a6f720c135526ffeb8401b756bdbe69ce6f3c5a4442dabcbc3f8878f2caa81b3a9df668d39ab11a0ac8fa864a7046eaab147023acb2461d06837001cc2488bffb78dd0620fe0b353ef6c2ff00973a81c8b45efd67439543f03c204d0e4ac130fa1293845798f59853373088a8504b94557a9501294c5256b2dec934c90c634c42585c9e01d68f1d1ec9214c05dd568a8a9204d3a64888b291229b48d068ec3bec2c95e5a59f58120931a2ba48d65b69ada2775d2933c3ce2f33dab87385d818dc978ad88f7998c2f0307462df58bdf2418088db10d40042cd25b9d0715ff11d422ff9204d285f0c770ffc4e783850e41174ce139941d0108eb1bef4de8d80bc5c9ec56e55206762444225442ff82d61e4877072f0bf096c9ec55ca269caf5edf3d1e8af001754b1c24f88d8ce61ac1474b12aa950da9377a33e05b8cf336d21897e6ad61100d084a1109fdc35b5fc50de3b5c887da8a0002a21ddd293e78e677c95b1c585c585164c6e98ef92431571cf0d9c1b9df011cb7e959acf491003c352a8a906ae2050078d82c20dd7a91bf9bd6c7d88c3e082b596aad42ed02b8f308e02ee456f59db3bd1a3ba46c33f1d1ba32b84e6dcbf8667bf331ea0f341680497a2b337471651d391c10b812c5a1138ad999a7b78ceeb79ac0afdbc3f7ffbefbcfe8c84733b44bdacaa93ba2f87d70abdff3ba6829f293c451e38fac0e4d36b77e4cdeba94032a6b7f5a6c5298bb8776505fd720d712aaceaf521741b879b7277a02b642e2bd8ac9bb6edb8bec6c5334fe870e137085b713642066c0ca1986d4ec002c587530ef688b39e0084a3a9c34bb974d05a889fb03702b5384f15fd4a2c8a02b24612b8c595ab18703c8d6cbc9c289cb2dbe7bc04c1c0ffe989bb609ab461ed3b11b428e930917aaa86638905cf766cca0e5c02caa9956491fb4285c84a3b41d23a67d6932320339bd101147e1cd9629f7f0cabd8cb0a91055606ff0f35bbbab1294d3fd63c9908dead0f250682d87bbfc4054d99a7b42dc408c196aa955826856efbe0e122ea1022f6537339a3410c9b60bd6d5e9eea91fc3ee83c01395aa2bb9a5f856792d07b4285f6c35ae7b59ab69c300da0fadb607a54b4b0dfcd55e3e35ee9ac8365f2bef34be1cef2b8e9ab3689d335ca119cf47add05ebee82c3290f56c7fadf53676c8a12af258c2573f09a7d746f69e4f36b53ffb9f6a7e6e30f22cdbfd2eddc174f446c964c36b5965c7b5ca74cdd6a0551b7242d63f4b65bd40b2ff669fe8349e83644486e34392e9caf44be9ddd37ca5170cf52f61b8fd1fb05a2f3580d663f980d71467c1b56e9f68eaf004f0325bac526c66e9e624e7e5e6f31b73cee39fb53e8d4e73e66b30238076e41d973dacbe1fc98cd035cf08f9ad165bea252590e26ac0d67fbd6134d0efc1c27009782d6e10098211dacce3275c999cb155da580c7d6ae19f2b9e22dc6b531573f254ba5c925ae76243ae76cee5bafb6ab6b5b272569d680d89f27418d8b564396780482ac3e6555a743d2ff5afc48ae9492ec88af3c4d8a2b34b6ec84a7128fd984f88f808a0e826a87087fd32bb396311e87b0ac12d4b4678213bfd8870e8ddf80e8710460cabf20aa3c1fa15a8a42829141c6d80d58349e0d7497c3e6bf1bda9242e3b4946f7a2fd5f533a386e26218fbee8e30d0c7c26bb7236c4197f09cccec76c23b65be5f02442dddbd2eef42b4d36fb3dbabd1727c164238d5cfb4e5efc71364f6bb13f21ca09c88d1a7b05f9b5f7bb4db1419da2c21feca6259bb289272aa1d8495e8e8711d5be017df7d1c022e4438e3d25bf823d9f18fd7d2c0181255fb077544433e297780bcab40bf08b99bdb8b257ecc12995df35391bef0be016d9a6e67a5d21c3164e4989dcb0455ddac967f5a24947bd1ab401239e9143e63d0eb60551338c80391afc5d6b9dda4d566550d89579b5ce36589662a8c6c75ad136facbe829dea63af72702dbf927ea33c44e392c016256f0b347706219d5f065032abd3fda153ef47b05f450e2ec465e3f44e167eb2f07472307220a49242ac72571a9caea1d1958861fa0ff52a88da4844210503878431bae3d8fc795efe3eb89f4da4c992513879d7259320185a90d82331fcd693e9d7edd06cc4e4e4c17b9b2146e7d7f5cb34d2a319d221b8f3b7f5f32071ed5b3c571fd9ba2c9b0fe53794226aa60d9033f7bf7129e44857ef6bdefae0e4c51d244f4fa88b63851872c9c20e86cd59e1e546095566f7793d75bcc9341705354848c432a7b4722946d44ecaa74dd5a30bf7dccb859b3b951614948e23b8935de53d3447c4f44ea85e6b672e12599f7921f7fe7b7c68ec373bc26c166ed54ec5745144eeb8dce18db342211f9f26c25368d82055b2f7024ef90897d62c99df6fae5d94b95251326b481a9dcb8a302893454271cd1f071f6440128bc9c95f3e6552dacc5faac1974840126148b219fd5d098e4e6074e5e28d1ecc4f3a6af8efe726c685b8ac18a24d7a9687f9fbc82119c0df7ff1156e8ccfd003ce5582c342940ed1793f1bfa82b28f9dae0a2b03f802dc5823d25311ba02a98646944082720c0e9791de422ad76e9ca410d294e78073647b2c721bd00dd7390e89abf5956cb93a69223d3929fb152e8a356c8b059fcdd54d22773483021154e2993b84ea42bf3e3e320bccd88baf694df930e7caa49b3250b0c3542fefc412f3e6a306f18e7141cae5d7a2641712d885389496a792284fb2c6735c4a00dce20739089c95547728cf5a1523c225c27202c73cf20d289591e652652a96eb0be0ee16308bb0be6a0284740d5b8cec427bee5c0c31d1a653f7da3adb90db44d49c1ef8f541a38aa1876e4b6871f6262da34db46fcbb0a5b38e625bcb44ebb77d27bac94936f314cf35e09986d541ad136ec98ae40a5b2c1fd6adce9c79e90c5b3a3560152bb62617927a3294fc47f7c2c2d1a6166d75812e6c273794b344dc24bd9b99b2d86923e93c42e743176ae61d743580d6a1be53d76e62d640774432fa5aa61510f533e7500d6c714e875d2e6dd9b829ec08dc8e36b25ca2ee9863cc5d8988689d563993c9a71476b360bd558b764ddcf03c553c11b240af3105fa68ee95ee96b1779698abceb3ea5438203ed4b6befa8faa4de7b510374646f64174b4e0e4add48fc750a9678f25c457c20fad4888c4ec749bca3ced7e78fc66a5b74e5ee318cf5e0bdeabecfb9d294747a04d477f541fbac916b84bb7718b88d3f85bfd509df8527f4dc401f079c27a5018953a7305d06a7b06c9a58a3042da48c3ef45b8cad960c8dfad4abaa1c4b63d0fc3a643c9ba3c390ee2a0f16981d75431b0ef3c0551bafe178817f2860581506bf5fe9a67c4e703ec4cd19dc0452712817f7adcff2f3fae77634fb8f2c920c210e2cc746b05d803bcaf42cef8ce8d30851f6d79741186b3f04491f02e04d66bd89b50d290e8b18bf28dbe7928a5ea0ee98ad6233f7e931447d1ecfedf647e5ade186abe47d182ae45a55efc5da64a004eb37f5eb5ff711abe7070600f77aa82a5c902fbe9447c86e72ba46ace92a4ced09aab7ecc514cc55e2dd98e16288f0d9b2ca4de15a9a93b440dbb8696dff7a58c6fba99bd2543fe36870a9b07b06dfc1253d6b5c277f20105175f0f4d5628deaa697223a26e447c5e4b4690fb5cec1b73da0dce2b63d2ada7d56161d6fecef0eab6cfbf244091849f3d7d60a1973df6152223e95ab7a42cd56c5a70aed5881cdae6dc04c1f95f98c61ac861920518736f827e6d4a7470a5524a75e5d5c20174c0db954e8ac21f8ff06a91b1ad04ebe0399da696c4b07169e714047fe88dc0d3bc940f4f301855b381034ee92ce75acc64e9ab885a512951e255b288e8a900b32b0ba6f167a3e9a03e51caa48306d84f4820bb9b4a4822de34ef3210b2467645f514f1e7f29eb861a501f987d22e9102b82ab862ab11a97f624a17dd2e2231644e6ce258ea0382737e81e12e2b8d00ce7aef0f76d8285d5c21cbd079e5ece8408410a0957db03c306b320edbb074dcf9eaa5655790b9134447c9317739bba8c5ad6c679690d0daaf84433cc237031cc126eb366c375aa5de8fb5196528626b632d996b4b77e829911d5b22d274db8c82f89b0ad14473d3b89a07ce62aa0551af3989811266559284f293fbfa7e4515f724110cdc4ee7346621efcfab2c61c48e3e9e45e9520ede721795e5db337f286f6c6547ff6c904feeb4f37246a69d9dddf5813020d705a8379975b441ade2293cd19d07ca2f2721e52c8dcc795dd764a0aae5ef2660015340299641b2a6e58035d4a44acc45e43e8c790dcb1153d143343b922955cc7b8d8868c343223a9e2562cb9afd748e97cf3d491b35b123d797c9cd0c1619f153ecb06869bc5a4212a09e7a477634b2f452047b97e298ac34797c1b50b6371595605da3b094f17cef436776cf75a5b76484dbd340910facc5d012ed68a2b55555ad70882cb253857fdedec19669ade72436eb9bcdd2e059eb2dafdee23259b1b865e1dda98516af4c814ce4cc052acd1879aa4460313aeaaa6f36dbdc3ac424b5d326f8cc68c06ec46224d0cdfb6cd6c494cb392890f98aee46d0da7de97a60e201a8dbdee1f784449e34bbd6587e63d70c22f05fdf564646a401db6a20e3cb74428b604a07b51b92e0a8a667c06ce3579e6165af54e6909daf326da378313910ab0c4676993001111dfd130dbc77e8238c18a69d1a18cfd57b253922f1f6206040bbbf1a69f9946fb5adb21a825885164673416b92e0fca6538d27c4899a9d6dd1bef2522453792d81100eff8c497d764b66e32ea9687b681c0db73d8fbfc7cbb3fa809cd05aee7dce1277d9895da27896ce70d23419ba7b5e3356cb09f925e19e6dd78b59bcc3c4ce498d640f78f725e5135c3eb2c0551928e870402be32dce887fb89bd706c58952ca7ac8ecdf23a58d6e002e6547ff73b099e53acb8d2d687e9e30c0c85daaa773dd6acf07111530c58f9e176dc01b131d1e9bff45ff0e585b8ce68136a968e2888762bfa06c8094cdd786c0fed32d83adc59afbeb48b477d6a8fbb6ff8e64e426c4c9eba19993845d0489c61fbf41fe1e70602b20b12bd22a59cdbe7949c5eb1acd97db3a52d88799409d7cc3c8b164fa8716dceeb15093667c0326a31b96a0ce025a48f97acfe4787730f9217dcff367921e706c3054b6eb534f09f0ac62c8da1e21b28d03bcc2b977be09db2669d094a6584bf51aa815f4e31739a760e0f81b278a11003483099d137df17a8f76c4e5403bf910c7047232a26bc84b2c861c6e9b718a40b3c5f85f26f2534b87a52d7f96f15cf8a7967b38acac8a6847c31432470b14c5b4c71fbee28e191314a68867afebbc6e386e2585dd0b49c71f0fcdaa127cf6dcbdff26f3f7a8d1deeb4761d02ded290fea8fc11a713cb0b4b862419055f40391d5ee7b7a090e86c33d3aa496bf9e762c7f5c717ea35cbf0286e897e8340a2ed3ecd88350d8b2308b90d7a833c33fa2005c60ccda744ac14daa5005d4446b1558f493c9f2f498065c2d08118763ddf02480207222912d0984d1a8f7b4751c8a2e4b399233fb6a8d2de030a557e7dc2eb8c434896ee3521506f6e50046eb0548218ffc8b0e6deb57ab79bfe2779b0151bc8f269423b14f1e7eccb1a3eceeea32ef29953f9f59005d47017146f8366ffaefd9efe5358586b70fe749be8531aab02f362c69b0d33c413e9b4ecaa3835f33fdcacc35e051942e44d9bd9bcb2ccff8062ae63282d6e8fd179b66f367f991846f5993994e08d828aba835be679a17238fc5ddf4806a10b179b163da51f3b7a8c69db72a4c446a07a099821b3e3d1d8d932054cddbd5b49dbc19f6753bf468be23da4082a3bcbfa5d03c0ec63722e83b69d8ebf2d277c6325c9a1e5b46695b2b43f3e2dd33daf5a5028d2e57c13dff33d45ffe84b51d3fb8e1bdd63d3981c7033af7e92f40193156c6b39c7033fbdd2114ada907f5b45a2f45b24a5dd005a11d328c45eeab73fe5b971df9e9d89ae05b9c93ea29633429ece82ab85ad76ce703a30801420d1bd08c895d65df2b943fb92abab9463ae502341bc55d32446fe7732bf413dc489349564d821a11e7f78b1309d678464c583d4517f6f35704f89bac13115f1c714a7701719340f595dab7c1dcaafcfb306febd1d37b94606e59ff58a792a5c3e3424feea459e2e7968f4ee7abdbf6a2f9958b48061454dd24a5684c0da3ce5e543c15c01f6ed29e9a2cad5691b9d61809574083f1f9469fb5c4e8de675f5990b2def8695a825b7f02d62f1395da77a637cbf2d483fb428cf574d729a1f1fe35040507547ebe5aaf348bbc748e92d2f62bf9c28b1c143f869addb835f6c2e08ad77dbaf9323e5847e75483ff87d452f97e338a42773604a2ee7b26a30f904bb646a27ed16e70521f3c4e96ca4a94a95c016ef0bd22c8a17be2ab4d07e52f6987047ca5572dbaee831579364ad20fb414aa8511f845dcad5eec5669a9ba3cbfe1e0a8fe74ab6a58a0ff561bcf5c2364f0fca52a15b485a2f7bf4a85a7744c72977eba07f8be7ee026cc2f13192ab1e560f14e1affb5001f0312b913b7cf08e6d17bff8af81aaa7623cbcbcb86344f26f1d403d970753b57adef54091a7f0129b3f3d310b3618e419c62a81f2f80930455b8297642b6400f2f14a899e6777083539cbbc02b63f672b00c14beff1356286ccff5dbc4b9352e207f760ac3c40d1e0afce751f5699990719c5822366cd9030166e49481e7414a20afb72123b463cb8a8e546d960c46b3439635b69dd457a43f632d435e4fe0465e58679a8bf31ce69386f17dee55c0b7b017d611211b9f50b8950b3206ff39734dfcc2c70236e95c5c760b22dc713c7397a5a893e991e89d2ebc9861d0728402f807ef2a4d98280db64536565c18a3f9d386b08cfdd134f599d135119d396ca71de4bb4c9ce81542796b622caf09c3e92341efa2300e97e449293869187f6d45951c61e65f4a2b8e5f98b87f120975ba4544f7a80a691a11d6822a54420073f9f13313e695eedffe38367916a6c7feff04e3bd3464ebae6003b2be774efc63849b6d18ee7130bfa3f73ffcaffa9df054910a226a144504fe89d6dc6cf595acf2d9f2ccd3449e275e164d84421d7d06ccfea96f61e6e2c19d4766cdc1a4e017293b7a1272b21a8d50bf77a85c09443cb9014276b7e4ba40b18f1f8dc7ffecc662ba36bd589f3e6b1ad85a62d834e5beac037a0d8e7fbf5f74e2956e5f0f132512889c0f0c48fe5e10a946b2f6ad314ce908a0e7dc095b919b4ae2112de7fda5579f13a7d58f4c76759c6662051384142e80e3705bf0a306a845ff541dba22e714f3a2185b7fdf3edf5aac6cdc76515b7908b51ffc5244ee6f087102238a612c8f23063e99beb189e612c8092bbc8fb2cccf8480b30c62883165160caae4443e7a4a72765c60f79f426cc399815f5c407b7f900358d0451a095187d7f0e6dee49be5668a42bd1dc209951dfba601262f06a3a68786eba03628fbed0665ed16633c24dc48445463cbe4b462348e42e6eb146bc65317ee47a75648ab147c477224df818861d585fa661eb1017a20473735f7d468f337471c8a64e4185d9f2133471dbd339626f46dad987c7d9b602685b70b287aa9cfc6a6784cefb1df0435bfce178b2414e3fa6223762d9981610f3497f97f19bc793ea619a14403f65eda95df7a2c1fac93ec409dbdb8900eb2425cd11b0ba2a79c0ec4c00d518e2b001f69d1c2ced00cec094974e416f9bdfb04805e189e98ed0bca11338d33e3c31aab06e4b063bc86e36a765dc90efc3f503baa104d3165249b7db839ae2b574079cfd0191c783b35b5ded76c65ac3854479b608417db7e647fa20852b2da7d3723e2a0d304f4a3451688eb661233b402bb0d97788c8d8a8be167c18a275b37b0e783766938d3465267364918ac994cdd11143004714b8a72ed249c6d584bea538e729eb893d75b87a05aad9ce0783a29b9aad7f54d93f270b2e0e36eeb83e081e0a7fb5049164a0486483a23b203f073622e64b048a4ca8acf61dad7cdba32f8f9ff317d710f8f79a5c1ab37858be7de7546a4eaf3452cc2cac05d28dc0e011e189f44704dbf187bbb06bb0f9836cbe903bd35a7f5de8492394b1a74580c2f762d7349542384ed4b6110d662e4a3b00777714f42ee1c5013f25d080051a6b0bef9a802fb74e6cb824132498b7e38878afbc13e0b4d388d102b3b11065a18c18646618080d81cbf90da3ba47c341a457b202be184bd8854768c51394fdadeac3988093a7a79209e8f69db0867608a1e4eb2b670ea31b1a2966b9b7e92a38cb49ec21ca91f597148581e8208cd7fd2e22b59564eccac38e5469a04525d427309742f99181e2387029c959100c50cb15690abf865c8a87729944475ef404de24009971eeb92c8d7db66dd4b90843e1f71fb47d326363d4f064444fdc86730804f5db224ce69edd9d90af7168b4315c9b7d4b330eebfce478b3ce59853fab98ee9b78012a170b55d5f7fef35fef98470775f4ef24c0da840dff94bbed7aa7cf984ef15b03f0ece5345e949af74376a7ed390ec9eb503c8ef4ed5edffee980aa9de585f3e4c21758981c62a7f17fde298c4fbeb2f7673a07bf992e43e2f6fe86c3f1fce52d2c83cee0b8d9b470d7ef1533fc78b7049ef0ece9b5b3f753af7c26e4eadb61424537e18315b87b53d2bfe4e8bc8a939a45fb891daae3812ac4cb92b6ae7dfe6a4b7ca24d833cddeaf1b0bd4b7755f16a4ebc15ba4c77bd2cf3c8aa4e6d92ba46d51d1cc785d9db063b34f2ffaff0c8d5c56908eea81282c313cc075e2e81bb40975b73ce2d086eac1c59ef696c96f4209f1af25fde0806dab8976e0b9936f3115d629c258cf3783b6a9366db7ee6e3adc3fcae76eabe4ce918de225c15d558060685b4a87e6205360c64cf19e33951ec4294ca5bbd45d85941ef8887018bb8723de861742191d1833d4e475ef2e0497b72e9c08faf059a21b1c9e4acff100fb3df2db019e6fd4ab7ec4f69423c09d5186a69a4017136a67ceab39e40e5fc996432b21caafb540934d5c4a6d6d8ecfa9d1fba482f34aa4a28ea69a536468820b97040b53a24e28ed15bc42454b75aa9255f7e46d81e6cc9b5abb4cecd80bf57f89329b8b1aaa9b704b4b6de3f3e5014ed1edf70a0633deaaf4b903df5944be5e059d278d323a1b4fe8cde5aec1450103a9cfc71a5ef1250bb0cf913d0faadfaf5e39a9b6911cdee0010c8dd3dd124c834a65d3a725389f71737b216250fc976c700b758b9d3226decdc7c2e5b0ae71a4ab1a5c226a8d2f42721fc1e3d90cf214c796173ba994a86711a776d39e604a32ea652c0926e1d68579ebc9e4da7f323689f3f2157929216ad1e94791ea98457fab43bef89a347adb1ace277b6b66a2579324d9d66b8f68118819f9dfce0fd4922ee6b8fa80146c58de2990edf4eb49234890826fc7c7a124c14cc9d057c1b617641677c8922e76c51df9d011fb522f11fa7f8279e6e8e7afd13a91bd30bd76f04da7b369f7bf7682b5d631d65c6fc21935b3e741cded2ca0a44337a8c86671f8ed2ac567009cd05a767b9a9068cff652dded5b29b6f1f5fefad90a1a50d844d9348e0aa4510876953d7eeadd210e73d4c22d25d31e892806a82c841d011c2182852802c3ec636e5940968ea94f59cfabcfaad6c931f07faf6525423f76d4343d6a5c0af5547bd810a0936c897f95abff4b13f5c1a480ff0f5b11596b1823ca7466ba36c4049317e9e922326dadf2d8b5aab2d00a1c768e50033dd28a47a25e7e81ecb0bc261a109f2138803a1b2326e0d75d0efe8299f83e9017604ba8f00c2ca6549f356ffc1e81eda873dc2942db3d37cf4a812718067865115c0bf8f06646f6bc3c058d4d972f819c9461b2a6f741690a93cb004ea3579c0d3a494a3b8812c8e605948b72299f0d191bc270b352e2301c766f7ffdd54ea4ea429d79aab889c6420e958bb5871b2329e3204be194b2d1d1d0939a45498e8adf88bd016c1df711c768e82c46bda999d38a1ab02d12d678e739d7062736eae3ebf89184a303816461db19b4ead61cb604bf7f806c0ae45efd417510ea0669f81598e0f7ee6fea7c4f2f06de72feb0e51b1fd37c0aa1e7dc1cd1ce086c1e5602259eabfb85fa9be4ef8739cee80d4edefa5b81acaeded21b84edb28557d9615102c374a752e4b8bb4240175645a3401d7dc4410d6e4aac300e3cfa681b889b6f9e33d1d162e7a7d8d5a143f95a85a537677164611dbc615322e2edce804f4fd4c3bd41a7a734a9c224ff4716bd350105d5d8a6152a8afd0ff878a3cef1d6fae43323ca9e2af33653ad67b1ae0ee4ae6a51c363c03140031fe8e33aeff511e73f4651767b2ca8b245c0a1a64a0e663a57d6fdea5763fabecfc051b2bce7ee959d649c74c3e875f5b5b5103af8779dd0046aafeaa87d74636b719baa39f005f1bfcc290c7ddaaaa3f0f921287bb821424fbfe3283b46ab3aeab423eb8b6a96adbcea280268749de7292fb0ac815756de596254d95d24adf1c73243ebe309c8ef4887af959d00a127591ff0763152b2b32bca3252b8628b07015e8dda3787708bfac51cbd2f0464f271cbc36985c8d586cf284986d40fd6acb37487d59c308641cf6607be705de6b3f6b158dc88432cd0fe9223aa0573aba7ccac74f0f690e2579a4700f1b460022fdecf7e3ba8a0437e1961ad9c32173086c14eaf6f8ebc28161989d3c437ab35c4c599a8115f5aae8c3a09b9250bf2dfeca87ffc62ffa21308e645907325a29372d9fa144ffd7d2e20b00872488ddcd662a3dc1f8db25e333f2c432bd7fb813d43a1daaf069ae07b5b676c295c4ede2a0ef017a589485d491a3d41359f317793fb80f230c4852592d06a6b394da09ca6ebf078de1112b6b438fab3a088bb1c5afbaee92b0166bac4d813087cea6cf7774d031604c8ce20b200d8e4171bdf9c5e125b996df57000d75efe338c0fa4f2f85dd5786c7cf09158cf78a2c7d32b36bf08cf18fd0a18e5ed33c84a311c762156d716d961acb3a5dfa699b708fa15ad472de500470fd09c1b4d3b2cea3617acaaaf454f8fe824ec1064836415207956766a7ae7687bdc42b479acee38cdee7118699d2ecd2d8d5d6c6b525bddfa41bace47c415967aea226e1ca83e7d2c22ce9e7ea90117d24a8000ab79c483f57e7d8c9b52874d02e76e71398bd843c0d341378f180f68e0155c0ee9a686a07831bd9accdf11884a5b33c1ed405c9491f5a7623602f7554e72fafce5995656dd829e468a38b48e9d09d5fffd7a72e0d7f9c848c8f69d5a60613b7eeb8d6632370c87239044d6247abf0b41271687ed78210f5c3177daf5dc4674894795a244412a76c844afb52ba66f18d22b905789fb133745013bd7291435f8d71096a1716d50fc3d2f560982e7c778b98baf1175626cc13d62763b856b5a9553d00071c22670ef7501b39d48ef855eb05e88eda9861ec4a79cba00ed9bdf561ba4192a57f590706bdb1fb3a8e0e888906a79e3eceb4da2dd30d8e69a8168c22b309385744c3865082eb9885efc304f28287a49da48eeb3998f59304bd9f1c7db2257d16d4df8613b9a136af3f1ca111d801f8fde32e62269eb6f9b450dbd39503ce6d25cb95eef79e734536f5fb260e4c94fa4d6e3336a4993b224407c8dbfd5705f570c7f0ce603b5c359c46c445f208714e8e61930ce3bf7182680c7824f0b12b7896efee69ad2194ad42f887d8807bc3e0f244499b159e4c0e6982e68ce5962248c3e481b286cc0933c29d36f6360a52e351b25333f65a1172615afb8f163bbc93aec813bfbaab0a1522495788f03beddb257e7ece10697d5a772cb35ad265e2e095c4674c18b6f8fc1aa5efbadab3554acbd80e3143e7a49cd02a08cf39f4f5cd43adfd3b4bb2b3ff9971fa45f07dbbc1f58770591f16814f32bdf4bae9b6bcd2bc9b5e78dd94ccd07a85707e20d4887c8d22836ea5e115213808dfafaa5fc231554eeac05c5cdba7ce9ab974104468bdbd0dc1546f73cac4749e72301c392079f756bba0e2853730b104a2c8271acbc6380868c4cb700ff2f75c6825572edb35c300428a04862718242fb2bb2bf6ee23267d24017d89dc4f547eb328b75de5f419f2ce8d5133a34a8116c8780e4f0d909ef3fe46505377645fc099604b7f3ca56ce69139b6683ded2db04ec2b25fde67f55d69e3d7c5a861ef02b9bb7bb258e624aafdb598a9fc8560b489fe9a1dc25957121c39a8a297ab481239f0fd081de2534d109870b3f9323dfe8bb1d7a39ce2d9d97a68cb872493d78d0a57e320ab612ebb34f31e040090340b203f4f967262704177fecbb8731976b659c156ed3a69bd566ed7ea107b05894320cc5b5e6e1305e9aad2536cd184d8ccb08a344ecb99fa445e4d6d9513db249526cb4e210e3b005524e6bcb115cbe7546a6e9626c9a66e01408e5410338a03100047a8b294c2d35311fb1107b75314635e9e2b16d90c06f6ddf34e1d3e5707f6eabfd01c3d56c8d8034ece9b1816e6a1e380b342d766e61101c0062f6b200f06f535dca84c581e94defa5e0cc161807a3da8a67a62c7734ebfa81144a10b8ad27a5748ab79eea0c41713570174e9e555754f375837ea2d58209ea4d42fe7ef135537fd95dcb0531662bbc7600884b607e9ee7d85ecd032a0fbe65ff2ee0d16375a9d2cc01b6cdc81a7af2f0ee3eed4c2fba951b0b2a51adb97a1db5ee61f8926a5e1810a5987db68db7f20dd757a6a184ddafd5ef38a8ca7583b158fa677aa6bdd0fb63192525344bfeb1043fe30f000d8babbbc4644724471a876290099310c65c544c088a99ef96301d86fa824a46c9008f6f5d75c3d1a6cc2f63954a3f6efa2939570107965aca6e4c3054f01dcfa3dfe8548ad13875b602e73def234e8cd1ef2f6905171b11f32eebbeecfe94284d1687db19e65faaf2317e132b36ce1ac60cc165fb4a9a3cfe86c86522ad7184a02d854233d63491e0c9dd92b2e42c25818da642ff4ec41c50088398138700deadc5c98d871fd4ac8abc18ee26d0330a25ceccd2568f2d4ab0246dc81ce3012e47938dc6c86dec53b56ff7bc7de151b8acfa60f680e2ccaac3b3fdb684c03e507550cbf34f1395807c6f84975fcfa9ba1abd2a52f9b85a8a0f7cd666df17447e0007dd8a914f590864b8342a073c00347e97b7a49c6736d5c38398811c65e5dd42d9c5461e12d7badd7362579f7390f157ab62b0e36bf738afceca22e28fcf87c527cb370f2dd5cc898cf87785bcc1fb46edb27d756e9ccdc3f25207c4f080c157709de999dd74edcfc7aa1cc03e57c75537a76cd90dcee2ff2bb118df62cfcd0510070197e0fdac5f3f0c0b69382961b832a352059f6c7a91480be130a2e4059ed408a4a2bdd266239c1c605c1c43789f04ac9d602ab05f335ab9a637d70e6df31c1315fa21e31cefcd8dbf672d1ba088298d68fdce7e50a9d40f0f8b7615c7c0a47011a63967796514a0963663d8b2e395d9520493cf32b1d99d6081bac35d34a32ec6662bb684b1669552c56860eb80a9f6cab2bed05124b013950417bf755c219d1b783fb86e5de3c69fde856cea549a68c88a349f2d29102f0a002dc8eecaddda5ffd486ae3624ad870fd19099738ab9f8b085b10a39232c50cc5763ba2da80f26ba5e32f45f006ee8f33171f93def550398c880d90345e581d4e8765f7c61df15e494e2467ccb90d97d0d8c56e0118186018ff1712f4872e8bf9670b13a8ebd90b5070898c5b2574e47c0601ce1aac599090aaa23c08a54cd102c01c65bbfe965666dba2827806801563006dcd2d2bd8d09aca2aa6ea16e8440154e4ac33e12f58c8a535e8444d2d5782225cde052d59ba6dc8dfd1adf15deb04565aa19e4f7a4fb1ec12c8197245d32a5580e507f33f0ded4694f16ed983602d4d77855ce2693226b9a6bd5c277ebcf3c76a334acfcdc57f150b358388933cf0632935419ccf27e4c6c6312f1e91d378261fd40cc1c36e65eb241d11ed3a6512e3eb531bcb35d6ace78c314462d413b1341ef4dbdcbb5ee094a3f6030c43bb2b84924e9f865f66538c8504f097109a64c8f69537e01c6bb82ca945d813fa5f87530cc229a42a58bf6c5ac5fffea298d68262b6ca2f4c328940ac89de7c105e58d1461a6e268528c93d4b2c966bc032119f8d9efdb89f2bae150780a8d1e963a5820fc801498878008fac93daacfd6fba11f3c11c1fa1f7eb443a4769725addd24edc70da1255869a77321fee1e2e7bb4f06be9a63142fbedf89ded01b84830cac68512ff2f19ce6200d689227a3908d0406e8b80c81d486baf6620106319e5298d6852a7a48183bb2ea4b7c669238fe98e0b42a6c31cd6103b1b8e5cbdd7ff0786e5757d942866324071541f6c02ba6fbeb0a4a6639f0f9e9172059f1ce952e3802e8ed1f04931dec5e4515f19d185cd31362e6376209320f83c5438db5731e9854f4ad09a0c3f3cf87cda7c7255e24c2df41b43d9cb25f5a5e59353cbcf3d57d14c8778a7bbef8df82a5492fea65dee88cfb46f401d867c64b68a929de06e4fda3d24bd9373123dc7766e737f3d1ac56316cf93dee8d119882c2ccea7b66f1d8318c2c15de784d83fee4c26956d1cad3a1b50ee6a0adae637651951152b704bab8e4d5925ed9cb003a564ca0436df1a4514f433dc887ef5d45cb0b08d188bc96932ff463a7ba648c0bc0f9ed729cbdb5adfbc49570f8d294ca65034130cc4cc7ea8f28635b424aa4f73658fd1a66f9f0d09d47d159d24792936834bdfd1e69b8f586134b8dc03708e82a460a8303bc9fb11686df1a32653b47888c2597a1e1a46b9984adb2e7b81b738f0eb475480bf3e00be7248e38e4359f5937bbfd7b78b179206c0e2f884f096af7b2e4415cd6d85616d51dad9ef8b85321c8c302ffd5509664890cc89d7285ce1a5fe3acd15eb1465e07e83a34cf78632947c21c54c0e710497077432505a7e8e8c8bda8f69e42576fb72005a178c2667e4b42bb8f5bbf613dda95a138794311532e5259ab2731b9ba24fde9e93702a4629cf0f05d0148c24ac59db400901fa13a209149620299ab47f76d4ed1f31a975eba1e28d26470f15e30abb499cf5b386da14d7feb6d84d8556d5b86464edc1d2eb2a5735b2837b7e81614ec41ba5d226722e64cf944aaf9ad63c8782ca23137398cf434189dfd4ca3a6fe7d366fd6047535f6e1cd8c23dc2ab3a9348d577e8b208a4eed895ac7cfdbd4abacbd606b36439a726ff5fca1ebc678be1501728f2c56698f57befd60849d266493091c464afdfc2da3bc54f98868dca1cff3d318754b424551e005d107e3fdae77a245d195a7d6d2053a009735fd95d3fe783be908243f6803b3272a519d31ae7f6df20b65cfc8dfd6796188f36488c823520ae5ebdac53ddc8d2e81e8583b40efb8f571c437cd5ca45100d70cc2bbb3e9b343853559ecc547011e62fc5e333d31a9958356f571119a088d4b21510df4872e3809fa7bdeb557bbfe11efb7a4f1038d0c381e128bd4b6b98be002805520b2eec5f01f8cd228a1ca9951de915229a46424bbd954b41608c4245b6051ed540a8fda69f82ee1c05366fb6d51d30bd0efcf268ac37d4218d6b83c53169a913c2e9c9965b0828123f59445cad57c1129aae6e69e0b8b7377797481a53109a28dc516fc80342ac850bf1a9e63a94046b93320088e391ea2221db6b70e95f0a8d121d7ce57f943ec010f903611c1d3d875904192e192bfa583beeeff1bb4053cca7b618b8638e8972bc09b7cf90049f64886e97b698233abd335861b5af7fca21c82bdc555f8c0e18a252423b29781324668c447a99c63122d915f194929b5f61edbb3a44c5d0be6c5da0614bd298a21fadd27c457723d56eeae2f0c7915175bb2287d701be563fbcad21532a91e866a21376a2f77b4b16b4906876d0e415ebb3715dd92f7e666d665022242a6ae75858515d26b4e7880cd633bf844baa3f77f79931112ad4ac12789100987ff56d017dc45e2bec1659eb6929f741423293eb6c7dc13ff0d675336dd4c81b12d1c8277dcf72f436ffbbcfa898e6b144dde5a94416e6f32c9a70a2527922f62bd9003a0222fada80bd6c012adb2c81682f57f3fb4e834b9dba970052b382bfb19541e4d87ff4c1132920ab5790a665208b2b4d2eb5a146eac27ca382b2f2065ec580d40a734f9186c9e9fa9f7817d011af323fd60efbc1101c8ba0ee20cc1b45bc47fbe67a7105756c388fbdd7f4a1d712763dcbfc5e99fb1603ac2f9a45350b6d1ecb8","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"de1b7ce3a8df12cd29461a52f0cf9b42"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
