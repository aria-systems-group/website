<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0d46bc078fc2c095ac5003fd5b80e80dfc373a28c7091510a1151a8fb0393fddd17a90e369deaf064ddb5b6c0703cb0e634e172f7e9277b92a4952c911328ca1fea5ab3d248894c5c48a100267df477e91128e1534e9d437a8e93c7281340d9ee81188b15e2d81211f549720c491a25b0037931e8e35a8393f643be438126af3819ba30bfcb37e6f42cef3e269e9a19d8027d82f0ed901c7a68eff5230790f1f963c388b04660981e62ce93a6d4b8d1893d0a07a5ff21a67b9327c8563daa7835e54ba1fe47c0907677573a547cc5f9d0808a275d897d1be7dabd20b9fbba9284735d6c2b2c65e7a2e46c0d2dcca74eedb173a3f15dbecac2f8af53240054fb90f3e87cab62febc5cfa0e2ab2059589076253b8db9cfe124b4e45d3a486c65e84135f2dda816dd49944985d650a84e2bf6a3aed6adec00298884b249475bd55cb5b125436aa474cf8350eabcfd5da064a9481d2e1f4025ec4f9f472ea677c3b2c0fe7595cdf70c90a8c58ebf81c9cb77dbf7245c5c52d62deeb69daf341b5d378ce92aed208ccd777eb3dfa6d9aabcf2a8d55775c2105d2c156dcee67ce7ed7ba8847bb54318a2dcb66b12d4a77f0d952667aa712e3c81acef4a0c48ffc05639d84c88e4f2421eeea14b05aee9d7bb70a08171fd02b46d34e7272b4a5d138ab2b477c09c4a93a5181002ec51cda58c598e1411921136c2a0b4692b63f5a99af8478c62adaaf88806caa7aacdba54a14cf765d59edfb1eb88516089913a37cf5dbbfcea74171cefde8f44cfb690a388612567b0231b84d5309964953300f3365d21cfc67cfffafbe41e287633d8e8191d6b71ae2ef17a3435b95d597c3af3f763e40ecd3e13e64945e52bf548e236fe2f0008e11ce84d3ba522e721560e62fcc448181579115f069e86d5bffb78710f16c7666c5a57328e68c32dc1048e84626d9532ff09927de912344c2c1a7b24c2f302f57b4fc6a4caa3f7163214ccc722750c148882a71ca57a4f3fb26943d2599749261e1521b0e4d7ecf59c1df143205822ef3bdaa68eeb0664d6f590e998c38651de709a422376978107d4bd1590cce2e4c58fbe1fff8e2eeb332715df4bfdece2f8b4007fdcb5087653cb18e8e1f0ea6e363ce190acdbdcc3b8da51e5774e909b7411b6304b4d07aa0cd305ca841ed0d9225e34ccd0e06cebf93c9711b88c0dd7c70d6aaf6f9768b33114fa18ca5bfc23df9cd6600a52283e9a296601b2640cfa5399e41b6b618b62ff4a4cb16732b15137eae1932ad6a8e5cc80763ebfa9e44800e35933a7aff8cb62168bea7fe54e796df1f6b101d3c35c2c957978af8fcc89183b7c578de49101f3a96f4ced7d57da81c60a0ddb8ae0e2b74549f7572c113b03bbb5b8f8de2f77cf34045c90e95eb56f6e0829d5b979ca8d1c894b0f036dcf7cec38a2498c42acb13bfd5e44fa668c414c1ffe4d8973321844cdbb77f6f457bde129afa9224fd49fb83972499d5ca0a482aa92bd1e1da0e4f332bfc332b176c9c6e0768a4a5c55e721acf64c26a76ac66b7d7afd5d45c1c2ce31a5588339bfbe9f64f64a53f8cecee6c3653802f7cadb68481ace077fbb01187e39ac119192d8fff6d7fa6769d0497c70035c024e676d50b4ef724b6fce771a1b14ce294838d37119e85d14dd2639d02bf89de4d3b90e8e6f005437e80d6b90aac2a2cf1e465c772c8dcccb33df73bbd5811fcfad7d956c050cc787bc37f14f13470a0e6c27f7c83f9026889069622efd8fe2e91090adbbd826d27054d14bc4304d87e89282e1dd5cb3b0bdd881563642a5f84be0e7e49a176925ab036ee15ed4d9ecb3dce43525e2541ff0d62255e70472d44573795a39b72ecfa0531dc169483d992bf072238c7511176317c2d80625c337e50ed6810d7caf4504b8657ebcba321c2304414e331dfbe0cdac802546450959c7c9756236ef1c04e4308fc2fccf35428d25db9e6b97592dba6256254b789b010175607ddfec336b46a4289fea047092228d9fc16886ab44a1b6a72ad32465f4aee50d7e6d53281c9066bb5ddc16782d11e8776fd93237e02bb90c66005eaa088bc4a0dce31288ad3d634209c1b7db3e0fd2ff8649edce75f9749c3454573bd24562582f11e515db2bb5f40acacabb14db11ad54f590bf5a5ea67890f59db9409c605e27d63801cd4414d14d45778cf2b12fa30c869fdc4fd3dd8d4010a1ebdf1f19567e8ebcf5c6978bfad2b35345e864d614dfe600c9bc487e555af8bc91ee53510d674a183e0bbef793a7d7180bf9a5ca65dd5ffc2588dfaf9fb9048c641182ab8631ba375ae9d989b02f3b03c0958fa886d19b34907bff69f62546d697b2d4e21559e83571746579c623a54cd53ea7002181251036595434c805452a424f42dba4d5768f5bff897999ea669141b839318fd7c2cd78aece80040ca8bd921e2cff515938bff2ec9c17539819d04d3cb299ca2d3547ab906ffd52738d022e83d8421588f2e332f20c01b0b5148406079af2289bca65a13848b6c77a885c9ce6559e1eae594024b85aee3c822d303278e7b10d4a2e7e888c85cd60a6504a4cfdf7a78c66720b3adbb061dce792a8d471f4704b16234bba57d5927e89b4fbf511c370ece1b9bdf2c9d1e6a33f40a65b97268a92a1214f55681654a29fdeb7c907747fcfffd1d20f6510e624e12763a9d4b8ffa59da65d3d00b966ade19beb1f269b92209f32cbcb8a3ec321e2ef04133d7b7802d1ec8afa9f29fd7d6600529a73bc3ad30a0d0a2355a2f02a34fc1c1eeda5d90b4faceccd50764b160128c11e04dce06063608dca0a7c1d275946b6d0555ad832d612ebcb84f77a766f971df25423b88e042486c2ab7f06ceabd717b1b0c052b61683311cc013f2be11d856e3e646deebfc52dcaa7758259b22950211a75b5b05543b9d550f02adf9d60f101a9132774a1baa5aaae995811deb1e63eb40ae2fdda8951a8248dbbc99cde872e37c2fc9170191fc3165024a7949b695d99ce8d2014ebbb818cd5f6234023b2e5d009b72f96c58c95fd0ea764a285fa25f905c249ecf9f05fc17fc81302df0d2c5b1dc14e21e0af1a374d9a46085ec6a71cd6e6bf4e20d4e4646099f06a8fb4b2fa2d73fa0d25af87da0508f2af932dc7a3089396aad4064e3ca95d10f085f8ce2da050f7d18424ad68bc1583710930495a98a8fd79570901c79b0345a4bce5ab46fb134ba9755ae5525d0731f58fb2f285ee2ab56098f81d48f12c0bab4ecdc895a359251bee49cc7330d867c1884bf76dafaf2602d2257732a5853ea44c631ee2ea9bb5cd33e0157c78c7387483b1f66a845b572528724fc57b2c9481f041ec1c2f79a3d0ca01a61476c607eba5c173a33949fd207ebb83f1accf8950b3baef5c82038a8803844d8ba7478db64a8a8019a944c10c5ab7e47d7f67d2107afe62af8b842e33c95e6408371d27189621b0d719ec02d77f0b4bf4c3bf143bb14f60438b9670e16117a168b453f747d7301f28c2547876e282be2de17d820d36acccf7e8a3f84cd41b422c9f4d008f99ee4b3b619f27a9164e0e5e79ab074b853cee2e51a854eec18bfa3c588bf99b2eaea598b746e2fdcaf1e72304626eea42ee8468176cf029e7f76e6c27a08baffc626d7dbf5a7d13dc0b44ec855a54f36face5737e402bea2f646092fb7a08b0eec6e5cb4210cd4f26c7b0dfd8d8af3eaecae0a4cabc5f44b49979ed3d9903aa6c93dd8c557452313e92646fd2cf1e360d85da8dd7f990e1eec477daa0d367fe6040f56957f657001f65ecd0a411597ebe9c178e6139897c23b8a08c4b28b8a8bcef3538a4dbfdab0f46718832a9e8c8de3f7acab387d0036cdb5256b10cd4ca06ae5a546ffdffd16e5ac298222b83f8c8de89f5479f015d4577571bf447390acce13f890e98043536c5a4e9bde25d14f7c252cdfeb513e03c1fdf20ee9fa9e2aa12df6f01cc7761aa9fad3799435764b8010122ca07b683106a178a406576bf2a85c9f9ce2f58d524cedc5575d3c095c476e184c2868d15a4eaa89fcd066c621393cb296af00347ae7da8758c06a4d83ccdf05fe64a1b16bd736d332e6dbe9d365768b11ad23135445e149d0ee37fe97a7f62d6b88971f3a3d9823b34b8f8502fb01292f4d68ba6eb3bc767605809a2a1c7cd9723a4ef1907e49c0c41a224aa3e10097869dcddc77ebc0eb70f0de91cefadccb0ffc67e72a051fc7b770192735850ad18786a6c36ee945e7431d408130ed25de8f024194a7e3f3b5d41934a5b614da29b27e2ef18fa6a13acb8c0bf50b99fcd9203755fc7dc6dcd694f91cb7045c82af5cd7b8729fd0c224f85539f458667ba1fae57ed58222f69d8eed5e445c2f1c89161fab29f6c54bcb4be06490a2b1faeaf9193b050b776e6c8d76f082ccb4eafd735a5cb2e328b5327a40c8a6b471ad68e0228d66db167980ae13aca0319ce8247d6d46c2b66364cff4df94a5218e0ad04b1cf6ed0260572c6b7e4486f5bcb9e92fdf8d17965b8fe9e75b582368c9b8fc1c670549954e8ee6938fe0760b5c6cce62f4ffcebd637d68743962ee63bc005303c881fe9a3cab9940d863c085a75c8610b6f4a09c916ce9a59782a67f7c9e0104eda5ddd72ede753932e090f77def65d64e4b59160441d3c216333d821d0caddaf6722e5320d8243f2f368fc7320d6717716c3f72425a18e8f39f36798df7bb89a385a2877d4e63603a3297c4de45f420ded42cc8dede8ae5e5ae150c4965c880f21a26dd440a54659411a60a3fc80fe2695072a20112fe73332b5a179d9a4bd67c34d57c577987e128f08091fc6b695e61a47044e4a3aed66c7a12cffd90fdd9daf9e836604de0945c38f9891cf3e6011c651d0d4c98cccb31aaff9588e6a7bec82a2a808d464c474d1bdf64477031fd43278c0e19ad850be8919cb52ff6be8e75c0dd1e029bc74b05fcc23c66b66f269e7be1cfe3f8c432cab8201dda13311eb9f3c5fd0d5de5930188b32f0388f35259436ec7095c9731054769ae539758f25e1b9db34d3e595c47e2de9576bd34ca709f6ec46c9fb383af8191a6429efeeafe4959280a7182e433a72d65ab8255eff5106ec57702e3e806d62a2495f4e6487db6816c27358db261351f017999c656dbaf1625883ab31145b0effea51a75ca616b3b5e2b0bbbf70e032760352f4f9bd7e4032ecf854d59082c4f28804395d10ec3d8ed7a83dc82390abc059894bcd87b4b3a5c06f8473db8ca3ba8636d90c7eecb92bba0565c828c86db6295f6c5c3261e81e3e0d994a146a3245e38115bcee3238c075f8ab7283e9739323a009093e995899ee3a0c3c54e8c902ec4baf7254302b01f7f8fc1aa5304b975d46d168fd1624799ce6ae7df00f750462eeaba61d6c1a821468c11aed1e7339f627296cd28e171dfbc4484b2cf026f1f372dc68bf2c9a3b9786ae9aaeafdddb4c96218a5c6bc34bf6545fcccbf9567251e4cd907381a7a72f2fa888e8e3da3520e69421ec055892b7305c302d4e404267fb6bf72bb9ea38fec3363522e77e77f32cec0407b027f84917000c42b67be93e78d58c2a15eb6d71083bbda407ce5bde1376a49d830062a0a256def47bbea1c0cd84c1763ef148041fe1bab8bbe369a432b5663106cde7145cfc2bd70504bd577e8b2b23e0b42417696a70233074bf2d6cbad1ba99fda37afc4d2c555dae4fbe23d141f56e8f51cb91ccfcf9672ba37d53e1e50b48cf70ef8f749dbdbe3b76d0090969c95b2d21c8778f89371e2416c0bf36a6b0f6d7a68c5438be375d952ec8ab2a981fd795967b9b27539565d9b9767909d8160866e9f93a8996f0212d20120e9f9a9e5abaa22c2c2ae7e36b6b16ae4f39a1c7cc4a7d45d4dab75d1dd1433eecf8d54095b93a4f6f7dd49be2974bca9e9ad88e257b75dacf02e5ced52d499a92dbc4c9d2f0e5de558af0d0869ef8f952bb13fea3f2dd95a50547a66486576fba1d75d5af668c868564067ab1d26a895c91ba28ce6c0397496bec924a7dcb9e1b83f71d0183cf1bc5a31870a112a29d4e7eaefba597bab8616528541184895f3e4bf1cfde3dfbb6d82f1561fe305403afa707adb05ebff62047eb8c0aba21afd83b03f2d070d59d7a179a6b2d8b50319d9bb8bacfd7202b4a9d816fb9167a6bdfd5a509e490fae2c1fa487fe04369b8d8b63401632bf307ffc8580f8611db085823c067d9bc645079d8765989b00de4f2ef919d0f52b5f8de7179360c8489ad3f9751b99004c1a2e393a18f2922e535d5880512739985f6cbc82a42fa8089fd1d2368e8dcd219650bf0b7a398f1137589841ef9eafb9a76e8b20dc4516a45ad57c23345a9381415e55a006639126c6476d7b3f2f01b5670ac10fc928f9926b5bbd964ad65a341364b733ae5c7082945273fe70b2e319363fa98c670e93f5a5db7cc96c158397df01ccba7faf2b1f953e5e8d3d7fd0232521eb21fc54b37d81ad1612aee3fc71e5fe9f4b66d570165218c9e5ee69adb2d78dce5360e1875919801501b68a683710e1f2bb860c7c0139a0877431258d2f87c761fac0e0aba0801e2e3d4ca6b81d0645609547390e1d3f188035a5298e503a9b0f8c609946635dd3635079002475157ae16a5eb0b9942b183be6722b848e87f85ec66023f50960f447f43046dbd71a4fa5aa967f8ce36dcdeeca04221e97239ffc7ddbace16db5c634e9a1c35519ff25160525f9a5658db6842da7eff5c43edeb8d46a221907b2cb1aa4452a1099f75c3caeb162beae26f0b2be7ab956c6073b50cc475b9822257ccb3571ab9549b414abe5df6ea287960e4ca719902e114a9db680866ce2104a1c131d74ca54006fe7208aeaa6f0b2d1aa7ff9faa26f70c00279b58dc9f4077b02e8fa15c8ce97f4a6d6ba5709e42ee10ef9ee9f8e466470ffbab87d1cb01d8e3b7088741491fb97b71ad82bcab03c2b627c8354aad6b99c2377b5161b94608b918fe234e3565f14533cf08f72ae1d20c987a0ab6844a36037e5381dca0507fccf675d57f33d397eb320430a6bed3bc491036927faf847b411382310f2715bed89ba7e118267c408c091c1ba1d53e068e46e91dc139e8a5d6316915fca1bc112a5329351afcbb058e9b9b5eea877b16e594137b80bbeb15bbccc456e1b4dd6678b61e3b958732e8bf8c5efdb9e2e35e339a35b807038a233199042f3678679173cf674d77691f0d049a0ac229d88e9f69e62c44f41cd7f345d3b5f095026bd8c3c2124d2938205b5ab4ac993ed3a7e5e21886fae3a657f9d379ce4406e9332641b738f759cd1198b8039f35e64286a18bb049975b40e2d5965b3abfd4410c8da571c4763db1a69a425f554d26727b980ce714ee23531384451a33b3d867c7377bcaa067d0ee230b3cc7a1dacd1ce23ee567a8bfc774c9e93924d6e8cbf1b9f5a8dc06624906eebca58c14d2b8ada04ad4d66c30a960549fa18df312ed784bc29efc680143b490d7e60605d3c549049d45415cc7a2e2efc67a04903816aa2766da8a69d81a42f066a1f510316234144034c16fb8f2311b3ab9d5c9e3385c67170d3396f8788e499848090c2962d14ab8d566dd25282ad0d82bc154da29e1a0c69d5e8578d2649ab34415a24d323d6be7621de4f23639e6804cf2f634be73a9c0baccc82404e99d16f9fcce8d2b079abd4498d6f411d33010ce0e5b51b5df6ff5ced8dd31f02fad1c0c744932f0908e136fc90199d565fdea4ae4a7667bb9357cd34f73a6361d22f8564b914cca671e229383106bf242cc32f2395983034c8e06b9f0fc44b9bf4a6588feb19a6fa1f15efba8d208b99ea897c2d1544f1da640dcd2a0a19d8108378f20995a1d3ae44254d3e826bee93b93f257977ae9c06c168b52353d35bfd4e5234996e45d95f5c360a2c9cdec3cb49ce99df1e2627d534afdcda9ca124b1b836642c3150b656567344b67e82ee91af97c56c34b8b6565a783c4c9ed1fdd149c3a64c5291ea117925089d928bd3df3f9793fd4ecea2447200ec77710c3b880b7d1120054d128414424f3175e66b43690dc944106511112ea9ea17f36bed9c406c9e4473a27477dba88b80f2904239c9efdb143f370b394168d317b0962d808ed6afb448bbd1cabd7eb1a62cfe2cb0cc963b5f20e4312492483530ba26253ba015054ad1cfdd65257ca472c0611150262f35325997c56bcba735bf695bee6c45dc35ad7b17aa4ed4ec38be90d6417bfa7af4440c8359cffca5527bd292c7715f67f21e931c688108db6388e48fe4ff4fc4692a32ceeac6a089e4d87cf7eb45099af1128e701fe8e947a74570f918129bfc1a75adc34de92dba39a761452edba0275d4e526d812950e2357c5130dfb19b0df7abee643a9f1be624317c71a3d04690d81e95eb588a797dd262f8199e6a75a00a15161ba4f3288f35fd3391001c8696e692a2b5a93c94da54b05213c1a68975580691b2f6d32dbd6baa56c4e7d6106b2ad4159319531e0228496163c7caf8bff5f8112b00ab580156126d7c970cd3836001491970f1ec9c4fb50f877740e7411f94a28f6017463a232a491217bcf1bf49b66541a15315a7738b1a50de544fa23e0e32deb7f13e3e0d579af2a37e8a8349d2ae6ce74f7430041b13c6e476522031b114959bbb1176ac97b2aa0f697da1ded547c4c71548834ecf5bb652289b1e7fcda4cb6fb832c53860c1813157a91fcd3edf9a8af0a7325139cb3f3d74fb394e5894b57ed6d37400490b1383a0b656f31080e1e3a3a300742f86c8068686d2cea07bb5add890d5f58488f58e6e1811a1151105cbc0bc1e79e2a72f77ced8c662872c87feba608f0a6227bc986b9adbb8debc596da843022cc93f2b52ffc1ed34b549a9ad8caf607b2294f45db1a2aac6eb8a7d10f53a65808de5e410d68ebc5823eb493937c87f175124588f96022b59d2cb0d891620357dcb4f2e8297fcad3b9503028ccda108f4742920543a3afcc506520c4c4ce5c005a151d57e71b2a1b6b49eadd60c818fd1173f39b3ede72eebe3c148a4f88220f563e9b41b97b301201d080a7e6bcb3eb603f812834f71166503bf155da108aef5a799bf792eab9555f5eab069278700aa3bd8ffe461ea8fc40f56110ce127bdb21ae60a2a1ab85f6a1cf24ed0d071e42adeb81763fc366be3d8747c6d3ead0434f17b6765746dcac6f74a6aef49692c21dacfcc04ef0df9f5fa04d02b54220e6356222dcd8e91484149ac11e7fb382a49b7ffc78de6302785dfdb40bfc78525f5dbe03081549ac8d7a60e5c5d8a4df17c9a468e306b34379c6e3e7b51e4615c7ba4cf461bfa384ec1928e8ad36455008898da1f139a9fb495a2f08a453e5a2b915a1d2d377380746a39bf5c35a01bf9843f4fbd173c37d91618a428c1cbd00873b5c0c379c4bd8bf27576775ffd2e30582710283d233215a3b84ffce79fae315a4707162fae53535cdb28fb0f995bc521709aa971d06b6dd8c15ea8235172dd307e37135137aef676c8142ab23b8b2a58bec6b8cdbdd94b2211ae2c68900c90364d4e3b701c205d6fa5b1759661d184a2f34e1cffbbff85ced409605d3c486682e7fcca4e657558c6f40c07735f5cd256ea9a867bee95e0dbb47d77f309f13b2a80674be4c36e9d197483b52a55e991770d95065521232c31ab85617e81bc47c08bf735acfebb013e1cb2c979724e423c7c58abf35d5e5a5d1db03b6a40811e803ba21dc95894e47d047507cae38fa0331a3da7628c626436d2725e1bc5a75f39e144fb60632c02c69fb369fa9abe12875fdd5990b2766d4a8a9bc3d9f30476bce29b8688e66ee8642466cf1976f455032650beebd410e97f2553e5384824148c0c1bce8db71b1068b934f6bce704e7d58a92ec043600af3bec429b57bef29953bb64c8860960a42c2dddc3ab8ca03f2b1fa74549d0c5c2f5caec92d3834aded2e5dd872025c371f33670286c5444d0d028b059c05746cfb552b3fd486617aea8b4e9e0a07bc7e09fd8ce331f01179ba33ebe3183b3c961dc7b4eb6af0c21b0b8d573a9cb385922f5b377e3602487b70e7b7487270d63bfd6f29e35a3e42fa11c2fca71c49ddb554156bbe861685961202576b262b4b486fdc4c27f4a4436c21259cb4ab3817d5a1a076c72dd17ecb04889435182ca629ce55ef8248b361182588dd82796d9fc5b9506a4f28a05835079a496c939f213d8fa5713e1925311a0b0330dd83b5e051b117a986ada181d245d164edf10f5a87b9fbce6740a2fb4b1d486a0decc05fe8a168b5617d12eca8218c1528566043aaea1542f4fd5e90ba8a96f829c6e10bdf15dc06063a44ee1b4f44856d1827b6cb220dbddb9354baa31bb19be0f527d06afec74e542b4e0e9400a83d72ab148f1d6c4b709dd433cfa54a49e25bd648f30ae1d0c232866e3b241d0dbbef4b708870feba55c3dc8506c2021e8c0ec7dc4411c4212a5873f1cdc8316ece7dc8e6a48a0b81b15aa0d4e5428f3f69a54e17fe5f8b6e3de84b5280e55fd102956d7db54944f99f5c02525c4d31f3ccb6d8cd2704003540070aa5f3840209a261c10fa054c5965cb826995ff024b148df9f7c2ca79c6454a70cf261c8b620eb4cc31f872d482b8a3595d78e1a6c8f9c78a4a5a5f5eed6b99cd903598c35afb6811c77535cad1e8f2a84eaae6c57c8ce72a258240fa9bb543bb5335d62ba86e4c56b3ce01af57ed90c5b48d53e930876decf0da1001d4d9b4d042bdf7543cda8a473ff91ed412d2428533a7ae0814b3187d3ac4d17645683a6536367493c74a47cd6d3703a4fb8ce178bb09f888bb95dd2454f28927826b5b4b44c621409905f9c08a0fafe8aea71240f708e67823c66b40ea90660e6f847dfa144762f5a35a7301cfd794c3d5090e87666a765e068cc8eae3161e86434200354c7cade078828727b6530bfa28a8e31817428d981a66bdaa5389d58a65ff63e435dba15cc2bdeda8f6bad051e1f60e10ef59b8c27d34ee2fbb6c7ebbc227705a119a309c60dea0dc8f7a5b8d5d05de181eb37c02365df048f3c27ca6929ea55f747211c01422fb8a002b1f033340c7a447f52cf79d6d3458d5931c02776888a8f57638468b7ba63c18e7429e6c320c4f3b81c040e2f905ed2d441bf55e637c3ca1a1d38d4cfc12a55cd8498f035dd226fe5f4b2299caae20476caf02f85eeba02d32ed0c035d6be3afddbc33b90143bc5f4130d1dc0ec5995c6b29612f8faf8a0094b99a845a60eb4d8ca5f4cf29b8d091b7df36694f4184f942fea1eef59e0e065745b4ed439d6388502253bd86cbb1f899f00174431d1d905194004b4b530ef90fafa22296ffe3f9dce358f8dc4b963310bd67c3651c851215426ccb2137b57fc75a2d1139cc9f65deb3f955926ecc56903b82979474ac74a72c9773ddcde1b22ea1b77ae6829665733c7b96dd94cded319e94935a175d9c0bf9b9a5e2c7657e1de4efbf586fde85b4bb723b1d6a4e3444e9d61d88e09c8cdc4aefb4cb6f8f89dafc752ecb7d788dc0da69d13cc499b2bb8c5eb3d41e7485c7444f735c28218f6e63272fe9d12425545414589a48f589d13fb7e6ae341726bab1a7a00f339ead6245e8641e8b7934f346ea83457795673e5205273da2baad5bbb8f889c054268e3dd9d77ec5462d593dcecad459d1631e44d3839c4a9f96162e26aa8530a080e64f665a1ef168d08ed4f1493d3f5a4d94876f36a0736de33f000a3a515974aa8cc62fb1dc33f512c01b502cac0d411a382023af590e986829f133a031667001f42ac4806393f7636e6d46115cb059f764408e661f73dc1c372f2f29ed42e5d8614b50823dcdff64e67266ae19fc9e5478e44bea3066a4a7218c1325d310b093ca9a1e357cd96a5abd6e9e4dee9f67ff8e25865b7000843daf2f10b448d2e002a68e1dc88af46e027a5ac8e363d962bbed35a069ad4c04c034b16bee67dbf208ae851b4a7095a63abfa14b2cacb3458259cbadd764d8e48ea51f15c4078ee44d3d51308e2497ce220639f01acd849b68bb6c0f014f598910cdf8e68b17f5d57c71de83f8ebd557ada5c114ff093df6caecf824ac218cf4f2581ae6f7b4c0e6093efd1793cc609bea19f97fb8c6b1350744eb99034ed418519c5d996eae125ce5d0571b083ac6c7bea7a3ae26ec95b9edea360727af309ff4831cfe36752e5fc8b470ce5c4baeaf5980adc108586bf20a3d19a6f4bf170aef9f2fc73e0529b5f2d7dbc696afaef9d01f69fb252ac7830c2760bec128bdc64e522925ad87aab388426965dc3564e6ce468fec6b81bf7e691a7371633b6a1e164f1e3b1b8425fa7a055e5d26b1ee41a6441f42c4d749801912ef5ff01a1dba6ae72ce7216ed16a0f08a3e9317f8861f5958e5755b696c4184437ac83dbdea233e60ba6392053134762f9633ccc8ae502e4730e260023ba7130fb12cfccda6650f931911052399be33a7614da080e5f8e4886ccbe2abe42a128792ca8b7ec37502e561114cfe0320fde6344a01b96562afdc082d390e35ff9134570eca8ddf4d33d4c57c6094aaff991a39917f53a25ae722ecffa64006ac8a503a0bcd2834046230c64510aad8d3c549043ed054af321c4e167d1b00b6d9f52fe775868fb5d632f7635137871059eaddbaee95e02f5d8e0e1685c57ea5c57b812011cd48c5695f78e8358573b3191c7a44100ecaa9c27d775afd7efd71b64df54b7f82d538f1e85b6a480c4039ab68b2c42ba647b88700974698117404a5aee93adbed63a0fe365262d3886b878f7394811844ed43519c91c82e7497d214f44ad27671e87a3b27666219de38410871f2b040869175971d0ba0cf3bb002a92d9a2d34407c4c685e3aa4298f000d57cde4578baf03ec856c30ad2d4dc25dd27e3e7e2e6c85f4999cbcdaeec4106cd7f7580b3600cb66d189700178926adc836ab35f47b90a2aca03c85cce7d7d4770eb15309870c774acd2273b7f2091a2a6b2ab155ddc8bf2605c0686145c78bf7f9d64b6e633b9833335394308b3bb85538e52beb201a4f32d47f056b923acf1d226600723e28ba16f6506e0cb4585767359d8cf7e3ebb95d658d8f4c8fcd2b01be3a506e4c82dfec95f9ae068ff355955e11415c2adae668fac56ed155eb5d72dbfa9cd58af77dd7bdd92ce6c4785f4045d55409b1d838e83dfdf025f26fc5d243864346dd6952fc73c36f9af7ccfe174362143cfb94e485db77195cefa330dfed36ae444537b43adab876b8dce1fafdce5b1b32d5a28ec0f896f841b0e0ceb76d55d90e81d1f53a98e03437453bd34f6d50bc5cba57712edb2101714f67d9d1e13f37e7fbe0dfc502dab16943ea0d2030ec1dc7e38ddcc599b0c4fd82334229a7e68e22216709ab65cf0a469796f4b473d858896d22dee69985be0dee1a48036764971ded29e13a9bf98d23535f9774e73c8e75fcda1c6b804a224253cd76792780d7888e51b7aa9201337dbc2222b69bf40b06957030bd08df1eac7033e4c4ff69029a11d787a6247ab5489d6fb711708614de8437100a218cfb6f460f881634c9bdf5123cc45ecb96dbb65a642126a4a2b546e632f4ddea588cdd1eec2672c5d551d41d8372b5d6770e4376f874e505b8cd5b0f87ba4e42e54914d69d9e9c74cebbb85dac37e19a2b635ccd730d5f1a057f214a166618bd5a4b5a88b243d242281a9afe107377a5131ddc3f3f1ae29b3c5313cd01abc4d197c6676edd8990b702b0bde386959ffe4a8882b425639f3ca755cbd7dfcdeb0ddf152c100c7edc12ce30462d1281f5e05e2c2d62d687852d27d8448ae815820fa6b6158a11e7d4c0e54559e4a1d4408afbff8fe235a5669d7103776e840f00190b89eeccc13cff46879b1bee08a0573844c13ac03d86966360a69883a9e345f1a0c92cb747aa6ec8c7199c94626b6f64760d6d9e6179274b0f48f8fb5d88ed6262ba772f1d7b96acd594c148225e3ac2e95830fe15aa519d46149bea1c116532480d2e6fe78721dd554e93c38aae4ec4d09dcd5675c1c15e50b9c62a14ffad44dca098176bc4b95618558a0f2ec2564e6902592d698d7fee95d5326ac8c9277f8015b4cb32b7d49c6798bd0b25cf2110b4a8dcad6aee56dfd3368772ed0e20463943e8ff6c65a886014978a2d605c06b1c35382019711ea6476ca3e820358e9af6aa69affd3b3c928ce39a80b564ee3a25644e001fb8e9aae81b44e6142f3ecb8d835d91a55dd181c1df0e9cdfdc53f94a92b94770bf7e1b79fc847acb036b2740af3d4848f9bf975cce02a1afcecf7f648e3ba054dceee94197d93506c6439a5e9289608fdc24192565b2cfe8fb68f3d4b1e9b8fe627f3b017a9a9d1efa2050255ae9d690758f0e8880d0898c9ddf96ee58680d3d7282a0eb48cc220f28894d3b6689006f4ff47ec61dde6ae36a344acfe9b0093fe3b0f68c6907e991d10f3439b2476c99cf2734ccdc3e8abc2e5be5209d9761c71f79c36025357db79ddff829dc851e027972b12035745365718bb8de2878dd4dfce07d061b45890c9ca5541ed07c038961f75c59481e60451519953a5bf8e88247ddce4c55934fc3c6efdf71fa7bc36925cc3cea99fb59963e0adb8b8ebdbbe2aadd520478cd126afe611dc2f28930be5d4a766a53c1a6333a537c7c457ac1c1ce64a5a9cbd08daa70f43250fc797652bcedee050f46fb09c1e5306579681b264e70950a0edf971f7fb415bb3498cab057921cdd9f02af8df6813d7df918882ac9c9086be9e77601605f4e6a6ebc053229eaa45189f21ed180cf67b1492710acb6ed05a7e9f4cd5bb522d300543f13b07f21b610f734082e4beffbe4fbb101cc53381d6df964fd0a6c8f6755bf2c728fdd25c7d0703d89c4d1627f9b59ee849202aa7a87bc5202068d49dad78f74a919c4af8afb3c190d5bd533a8be66bdef4a1cdf1722e720fc7a3b933bc2d7f9ec4d43ec3178d504f77886faab5f6011fd4b825840f8e848e33b92d988f659fd5db92f0a640b49074476cdb62aaca442a04d724e1bd1a6f28fdc29dabbe3ae8b5d7b0322c516d36feb2db1351c2f63c8ea7e860791d41b84144f32169086eddc78b63225dcbd99068c7a4d0aafd38fd41fd9560e14a153ab841b8b1da31de8b4984a8246fd2149ded7c64d603f8513f8b14b4c73bb79ca7d7f2e2d4eabd58e9f97a8b1baedb575a4366e0d5c799932e7d4cac7c7ce51d8db3793d8ec3be5cbe362364e01dd7d0ad1aa8d074cd99170117d0377154cc492d422eba8d4f3c87b99ae3d9589ff4b849bb4120469da3aab742f2f89b80313417913a3280f55e45f4e32325fe57769561dca5540ac3470e3b9d6afd1d8295fc9256594989311365701294f91b5169d2f3cecb4ff9e9d8759c539f30488fe759461aaae53e746cef1e126a319827542209d3577d78d2d28e2db4541606a94ca92954d7ee89d80a483f739f71f8f0b709f2dc6fc30a46e021124691a043803b3b0c5ff8cafe2bb4ce6ae713ba55f01fc4c2473c9eb9ae4168001c6552ba3c46303699c5de3ec6c6313c47639a54f5ce41ccaa13fac3c29a28e4c36575715f16a563f18f227ffc44c3643b3457b4f02c039f2b450617e435fb8e1c2869a829eeec365e58e7f9ce0a7c3ebf4d473621de6bb423c6ca1dc7f90d72de6c95f452781393009efc4ac7c6bd1d673c3b903212875fbd7a86e627564e8e0dc568abbfc311a6e58cfa09358be1db5005cf3cb4dcb97ffbc27e5a9e1a71e784d6a057513a4f92e479d73297c0dc2f5f69dbd7ea1ed077f5c52bc501ebee1856c3516d7f4e70785937e9be202b1ed07c60560f2d9278433f2d126785fc63e2fc910e005ea50391e103560ba70bde7aeceaab548682bba7ea9fc5378740526dcf3baf403eaa5c9c8781f199d7bda545a5ad8bf0c54185407cb68de5e74049842e06346c9aa561c52c0ca3cefcdfb5040eab52770516b403b981a83f96ee2bf32f8120a89765256f2c0d3524f8f1adc5f81c3947b72c4dfe6cde6a24f157371731d88b342ac3494a1ae2c343f570d3942f197b0b8dca27e65334811d5c9d32de44c3528a8b5748cdff769f7f7213ace810fa2cfe4a3a393515d3196cff5185d525432d4d26338cda14ad09bfb153428d55b0d2df4aaef4a07a56c1809359c7c9842c16feb397f6520d8317aaa476837e4b8a008e23c58cbe81398a58a11b52d32ad3ac8821543d2376f11f1021e083c58d0c75d86618a152f4fd9fa096b90e8b650138d6708c1ade207ed546bb54f8700913675b3b44217f54bf957cac978c64b0ded0d9b4a743b5becb01df7209894dd0c8449cc0dd32e657277e29e71e280611f086577f7798e7cb6c5724f5f39d46a6fd8af3d40b2e943262607301c80fd55399dd3f8a79ea5f073f371fe49797fff4cc1c3fa7ea19dca5a8060ff880a19a17a205062334e2c6e6710838aa2d24272c5f477a0ae8f9f1f2369903d85bf00004e941e51a3a3ec440b183eeb076147dde60bbd5c1593030d8de1b3fbac01fd82c73e2d598a400c2e785299815841f2e04a5ef0c09e43f2588ed385918c74ceccd701c15677405568374d4acca1234316105578814036369a464fd8d5ff36736f692d64bdcf71746939ee9421ec1574b45f9c59a0d5c08095e999156b59557ffe6f3663052f2886b355b6608eb84237274b99740154652a47357f621b19aef60fb6266f9ee83b16bdccc460490f251491e4d07c8ef002b83155e830d7e041448b6bccdb6d7f3022e10441db786fd724ba53378c5e11f257e6d69e6c7a11ca4ae8a8f79427a856a64b0784fc3e7bb909743a53725baef6207b965485456cbdfbfb94457c447a66b91138bd9575d29a5c4c39b5f3960f169b13c6700c8f6ac841ece4c4984f56c5d6194c31c8c0a87d3c2b82964106da6d1a3f59f4d1ea9c5fe26caf790affdcfe6f1174837c502693c29abe0a6cf378c447bc4723e569f634e1be4ac60c72613c0e945feaeb1706ac4eb72aa8367495ba02a82e14c256b29f2ea38c9a12929c361d71f6428e0cdb1a46bbaddb7ad6468c670fb66351874ee18f387b52e5be7e54dc458bd9f6bbfba47edf7002cef4fa07adb08e1191e9b6e166d3d51cb302dde2b0b6dcd352719f69a17c94da869b0c803a186dff8c50667a4dbb2de0e524fdd96262879c7c4bba5cfc87f9f7ab6052aaf54c14c77dd2a55ce4f7ff59e952e9c5c41dc013164887da17f461912f1e976f3c52d29ebe6924d0e89674dfeb13b26efbf7312c47411087b692b9fc3a4887ae2b1bbfccfe51a02d49afcafe12666e4b6a61d2dbe746cf938bdf14694338f01feb4717e3b71d505e41ba09b6deae0831978c67b0f408bb351a0c0b470bbb0b5f60bae83d3e1c449d6b806189194e8c43daf84ada56efe45b655d0dbcd83b6675a15199db5bcac10af14c24a468a6abd169f03742ae19e3dff0e2931535d039055181938350e3ae370de61032685b67ae65e8d49d21c12ea128487bf1e90a5ecc25c899e16b48319965b762471ea3af125f5b22b3eba8db826701b3e07db1b6634a98efc287253fab160c441efe4daed5b5ece9d7f5c58cf658fff77c87b6ee60e3ec2dd7797805f9e997d05c80d51bc13b5584f3d9745a348043fd43a445d30875f91568f2ccf43c59496621353c1faec2f5fa5004d96d738d2514eeb28e7d4b43a426535a539fa79ec64d0a3a64325dd8bd9ff81beec0bee106d159dce6423d6ba29098540566fce3eead7b3b15f1bc50e196edf1c7579745c118174aaa9a382884e6780d9b5ac9533f5882e7459c6b41528c23f4275d15396d0d4e8fc763cf03965f80203bd24c97ace47a56b6de6608dccf4dc31c29e922b2cc4bd1ab54b44c6960a7330d80f5edcb2f57468cd60695d94e9b86bfa9c03fcfcd24bd0b589fa6825b6bf61e75ff789def20291bb4716a3af7d7e97b6b77c8d10ff56d085218286d190b67d248891c2239ac14ad329028bf72caa6bb62bd643f49763622b52844a0a22492d64df84d9153afd86836b565ec3ff889ea672fdec1809edc89b9748ce407cb44f5f24838057253a96ec0d74f481a5c6bac3859e33b421ca1266e599c6d6c84fb71fff985e4240c0cd76f5d838abaab4b481d920a415089f33c363de372371515ddc28e0523465c51cfa31a094701c0c23ecff8ef74c7aaf38e6793a443c3a68033332d561c4b1a9c41114c8a6f1ef24710aafbbcd93bda3d457cfc49d8a9959ce52d6308794877d820714be6d5dc9855eb1b952b9f758b3fe3ad6b945677617ca327dc0e2bce9cf8fe0a79f8c87368b4264eb7f8aa5e3c6efe65708c6dcb8ba75544dabbc25705edc6cae9f7c7ab1685143f133f2ca830e2d2626af174271451f275c9cf68a6d4e0c8c4945e3a967d5e31e6c2d8e48ea4953809c3d444a029e924d9bace9749760229d40f91a4ae343745e7b67d37734f24ba2c65157b3a4b93cae5fbe4ac0caba5912217beb786d0b8a8dba955d3c7c26a57ee9c7a28bb91cf468575ebf9af818cbc40ab8f8a2baef73077d1a6ee60b9aec56b4dbcec78ecb11c13ef155a23a234071dccc8d8dcb5b08e02251051d4e3d89401496f32c622ec2d6fc693786418dc2978499931f385baca1fd6103a777c0fc44f0b786a69f1e0ea819c053749df1ca2db5a97a6c306cb0c998d73a32f2b4c7da2b3e0fa2c10ca4d47d9d5b5d6c3faec41d321bfb31860d473e9464cb4d0f22de6ef55cee0743fce5e6f00399a26d21ba9ffa006c79171d46495610997610b99793b2d07a5bc07ed9a80ac5c290c3c206a59f1a8463df92dc28b418515e86a0195cbb0ad61d6df1b90c0521aae5bc3acc723c9599e09d382bd767a96c60283e9d1d2dc7ace66fe7056177623d8e6256f43e6c1a295d79840fc1834b2d576c5c196a269975df98fe4d922092d9b24034d789b90b3d0c27c9db8ba6c8ad47b13462fe6dc10d8ff1240a49f665da7816a9d6a87bc0966b08c69f8049d2ceb818e05cd0879bdbda4f1cf91ba9ffca56c7aa776437b2afbd5b6e370593045355db55d79fe0cf54037e62a4bfae4984fe1525518007acc0840bc2ae9304ee265133307b913cabb5c8d090cc1acea04539017a042d7f10d7b49f147ef6c68c2714ee9566a1dbeb29fb82d4c493f739c43e5cf0842e5e63fcc18ee2b37461d32f334bb56126616c46c9f0f9be2c5b2846f7abb60ae0838ee6407dc1e81b35aa66167b3981dac5144a4420a979ca398dc3e93d95ce14582784f453a0bd8af039ee800df734f1523e9a4c022b935e021af5bcbd4b3c8f8d1709e5a0221a5c4d5a0cc6afda98d8579e2444322ca1b72fa8ed8dd6650fee23061b2f254a0ab13ba19b0d946742b243e296a0bfbf7544353851b7492f25bfbb1a1cd37b8c2d22677e352862147fe9dac7d3050dee797e5e0a0bc682e170e83736e6fc0021c8c43606be2ebeb9f2570aced94798002a3fc4371491abba3bfead691c0d36e43f7b97367e75d3a3021578095d27882748ce3e7612fe88338397b83d014740575d689bb557e983ecc70854f5ba7136589680092efb3dc496b7309db152611791d8fbcbc2018d1b9e059c91620f2ac9c24ceb3b4697587e6dd0a89c9c2a3c15b55b12ca96d503b89e3f44b842cb15123f16dea30a289b74a2a98ee616507fe8128e16efc2208dca98e7ab2f96087919dc14b7c2df60add801c45a129fffacb7bc14f442a74036bad3301c9a255f2b1e8bd845bfcee5d89d9bcfeee28b070350b6f3ad8e46","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"37ab98ab042162b9c32bafe20cbe821c"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
