<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"4d767aa375a5b8ecdb919fd43ad5b645ec3eecacc7b7acb27bccc4e9390d8f9cea67d491ee733f3c718fabeb562fc92894304c1ef530ab3c897a63e8518cc5e17a5ebd09d31379d28d076f1f8f266087c2e25330c09298ac0ae1ff610996a0dfe8225974d027f4a841050f15e5801a014b04c8a7327895f43d45f20d854f9aefa6d566dd3a0eb6adb4541837fbb305aa8592832ea78ba18a26674fae317daa7c51af604dfb9d407b112c9682ee526450f741431ad8a79c88701f62a741aea562d95b81e9980f4f3ce7a1ce360f9168ad6de3fa6c8344f057509f6d9022390b8218afa45e537ea03c90e251d70084dedeefd340a4f74067a57eba47a27b08fa184077c3141b296124ec584bacfd6e2a9d2256fd6b3a02ebf73e54fa7f0b5b37d745644f41ee364e5aa1c6d4d88d5a059a69db71b153223e6c126b3cc682ed2349c80b1f3441b32dcf20871655ca4e2bd1cb3120bb1689b5674961d59f9f147927b66ecb1f5ecfd2a2c65ceb14a29ede880a87257b886a8a01d3af465fe0086d4f701c413efedaca4c765e3dd2c4b2ab3be3f61fd268f200f81285b0e8acab1cfbd2bf0da64d36c53764de3686b244f588c824a1ff3510c82edb0e2eb5a5f9c67f99f4d524e39d1d788be243b49e0eff88518975474a5f3fa4990a8aae1e55a6818415beaf27ff9d5c142d4d7b2948fe87c59b12d2e3d9c1d74b288bf86b15e961c967649e010b80e43182eeaddcfc7a9fce2c5c1d8dd665368c6e4f4659121902155ed6b177a85a81dc22bffd5e17445784d59d5260252d453712357a3f394713e33e88428334305074f04e7d18f8a5014cc5abbefadc7eb9a7c2ade9a6db8376ffb8c7868aa4ea035e8be7a0a83cfc1df7205758933731d7c8d32726b8ab7c3a018a45148c02e330b58d824845f6f68ff4bd92d58fed08fd64dc1da776c7d92ee4785802d03c561a7426df56f50b31e59eeb44eac3609fcc189b72cc1d51063c74c7629398b8a4a65ae53a286e34ebf3d1ae88ab8b010099fe69bfd31d7d52be4e5f6c6c9d50c806f3ec58c5d0c085ca785c94a92241d86e3ac7688b1b40297ace0cdacbb08a42cad8d5863f548898c2f3433f6226c6a036c50e6493e2e1119fcc636398c050406b1d5538a6cc5c22a34ec0e35c4fa241fe7771034beeac5e58ff2d55598c8cdfd2bfc99129136029a87ebd94078ac5e78ff90df85fa3798c8a976b17c0688ac7023b4130d93d6d5740e6b4cbbccc0d5c4d3591a908a63eb6beaeef205d29e487c385b8e105cd948379fb2f6081db08035a1082823b3072d866519ae11cd0cac2ee7e36873e3ebaefcbfb74e50c5459a3687b1d90f8b7fbdc508fdfed25b446c786c077527283607dc4ea108fd92967f207361ace0035557dab1463384fd01ba60cb82541f8a163495dfc44618870087cbea2e072d4ccfcd4c24bc259e8d59fc740b36dd5c08a67d5e58afda7a7c3c5e30a1c6dcb368961533994d385a976d1e99c3c38a20f2f9d38ef116ed47f7fc0bad8799d0edfd488eff9be4ccbf46850d62bd3946a823d53fe9441678ada02d67491438d4ef9e7c4337c0e49c7199b7033a69b979e72a8759afd9188041cda501bace0e0e8786123d0f4de50710a395d9af373f31cea4f171f9afcf01ace54699adeeea97d01c3277d751f7e736a381e7d0d72e3d9acd49288f74a846d089367e9327e501a573a69c98def85f977317c91036d8954fdd378336ace920c7af841ba1d2460297ef74957bc8e609c8b1d05b4271d9d074e473a3e4ec132b37a81f50e3c8cef148c80766ccebd08120d0a4f834b207d64387ce0d1f65ea6a8c022bace7d091a4e2d30ee5ce005351b92fa9fd8190049a12a2dfcdd3d42b00cd461257aaba9f07c2347beafdfc7a35f7160428aa194e81c60ff720a6a752fabedc7b86de9fa2e9c98b9a0e2a17355ea33599282cd44627a298015e60b00043e91d4256715aa9021e6ebd2ac3ece9b3411fc3e3d124e94d1896d0b10a4125b28016e36c91ef58da4ba3de1b7f548a08aefb5d98b7983f23a758837415bc3483c6445846214f0b81e93bebe7626cca6315bc2c72d321da175068eb93c2d6de45ae53f922c6ff9dac9b3dd9261855fdb247c58dcd09a27c0d76c6758631f920e06e868cb8b869c51c78f37a2cb9e556fe974c4bf86eefa602de4214dc00b02ae5ea1653eeb2f03e74c860e8d2b9b7e7f1546a07cb07a16b40adb09c09f0eb8f5dbabe5cb535353ad99fe5b3d80e10b3778bc5c77baf1b1a1b1d6eb9e0bdf2c9ec29fc8be49c1ab9b8e43b91ed59c0feb63407ce0562223096218b513c35159a7e852072bf7cac546acaf5acce63ced70b1929dc74e7a74dde00476fc652c35cc9616f4cce614281aaf2670d2a81f2d83feb630d74a683f007a42ac2e79762d6abc88111ad19f3532ca07d2cfcbbf856ef7110e60f642659fac76ae64b19dafe059640534e98750b9e6beedbbd75604283e802a524102ae0a7e6e3b1157abbb88f4ca9e04396fe1e17eb9c4d8e6563109a3c847453702297cfdc4a526d00abd45aafc49729065a4ad79891a4cbabb6ce98fc46db3b4d34a9ee64cc67648501f3d786cda3397f476dbf8a5cd4e28da55a908732f7d29a7909564b019b16062037f9441e396b76bfdbf26b11c3dbda4ea17797f92650d338bde821fe2847238af988f58a6260eb7a20283384f936231792e31c3190620d2fbd036c3cf6320ea75e83272d5281da89a30beca4ec99ec7aa46e5a6316c0c63f9f4067b696504f6c51a8427342049fc0326ba40039350ab1b82186a55a57114b8c62776a026d30c4b7641f6db1ef9b30221f94364219d8ec683ad16bca17d622931afe58c6bad92488549a7ceb1356bea5fceabfc629cb78336045c2a3bd8d4223084acb66937d7b76b279eff27f700c75c4e54ca8c586e951076bbfd791f2c4b84961bc866817fe874f13414dc703c1ea4154807b57aeddfe2679cc6e386c5fbb1b7e244488c4f4dc61f4043f306f15cf0ad0c1952d283870be362738f50e8f7dda362708a535822f3c991f296b9d3cf63abf3d0bb379437b659418264965159e13231c30223ecc5d1594b9f6dd96326a0ea06ec4076b7d5fdc33ee35ac1be896808c5b785b84118f866f80f828816787db6fffe37fe96e526e9d63d7da1841532f61715ff5bd6e2933ee6a443dbf92987a42a9c88d0dba399ad7ef5b404b6ab29bc27eb7ed9b3425511958a8e9119ab165710b705a560c32faef300a7def67f2d14094832270b1a13bcdf19733e8678dc8dd8652b30fdb43fff937818a74b407b219910d3ac6ea56eae2afe8b4ff7206fb71c83d66be90765f1eb3f690468b96f056c42608eed5b5f80fd887476bcf917dbc1d9d9b95591543d1059437ab874cc0c692737eb9ddcf5f122594b0abe5da887728bd7493a2d96d1537843622dab1fb66f2e8f523900316484a536fbf64236ce5b389d7e4ec5ee4a4537a36190729b460dfe3b5d662a679b52d0d4d7a7315209f994b9d6664a05258b59eb0259b1819e92e9d680c54a22a326308e9152bd8e3fc1f0a86ba616c92f9bd387279c80ef7d6a0d0dc396602525567331d52b67f0b87f4f880c49d02a0f81734fb4eb29138f690a240660281489c45440baede458159e6f577134a292271add0c644b1e286026e5a9178c2e82010b847dd970416652e34ac615bb7d7365dff734ea349dbf87f5e1bc10dc2e479ce182d9dbbc82d0b9488a1c8562d5ccd773e18a2fa28c5c6ca89f8c75882aae3c2d3ba6971daa549a91d740f8f04193469cc45cb1d6c40c55e9025974e6ad55ce59f55174073e1de13f0c6cc5d9735a1ef5278099f377ba192425e320c452897c93d1bf5de1f3e66552b77ce41cabcff9d276a2cbcaf15d03ecfe2834facaae7dbc7b41a32a6decee21e15c357987b53ad6d343cf08aba538fb63cc3fbb5b2dcc25bd636d18a532169b612f019499d56a40722a3eefd24420736c76430b187cdefa66de8d2e18df9796851c07d5a80a009fff1cd3da1089a570b7641ea0ea89012affda3869d52f00aedc91a9336e5d66c84c93adbed611971f61761d85b4727105feb9c06b271d89d0abc7def62a4c93014a3de59aa843e33ac55727ed09af1df0fc9ab2fb798c675155fa95014975d8a8f3fa224e7be919bb5c4626a74492b6a0a1c50c999af4913c37326074c02f13832f6b9da5bcaee0ef5c54dc891d5ee8539fc266cc5cb5d78d14aece6d9101dcde87f82249bacee6c8afa2fa03ebcb7ce02d3fcafcd0ae1ceecbf8359a7488029308df67f075364cea39afef1147a7ae47fc2c0ce16d3edfbb83959b4ac5c15af79897f1138123cf6ac1d535d65c106c9abdffd30f5e6cbf92bca65606b2c5a9974e1420ba8eeeaa3ddf03a46682b967e08e5c87783a3fc77c03c3f0fba45cfbe90f7be2633eb833e45f38339b85691f0cb23828fa0ecea794a61af172ad5333f02fcbc31bd6ada17de36e2b365ba30ebbf4c087ea9f6ac8df7b7b303528dff3da94efe8e0b01e02bc4cbe0fc0f0b5209120a990d20d51ac5c061eedb33668090d5a594fa9d826d252d6608e74cbca38a9fe9deb71c572e5e758343f79e72ac0269c54d975bf28a1be9ae38972fe368bdbb340b96588615cbf546a27da6b572f763928dc93c232198bf4fb8530219010033ae6cd4ef783b4dac98792f34e9fe600c7706b5e56ecfe2d5aadf138dacf040c350893e5930bd2621394438f1dff7f586a3d298bedc3e1aa3fee85841f02c6482d26bed346801f062eb5c2b05b921bc132eb14873b77132f15ef3a97af3c1c58d10ce7aa8706a85d31b2a7429bf579cc51e7a0acef3102951274b62e6f3bcfb2a1d65f05aa15dcc257fa6b94417651cc66663e3473e18a5ea8b0197ff2c6f71d2aba974de811f1af9044693e17c45c709c7be182a973e99977670d17f746b1b2d4e58df3b9dc23c4acc00247d30a6e59799b09dacd04d3af1244aaffb0e2d388b9c20f13122bd3398312869892605629a0835151b6070212fa9d54bdf6b26f7437180d8f72dc125d5ce840b4b235d1df5341e1389680f446cbba79c634e8b01775f42fba66124d1e6dc2ec49c37ec1f2b5d9cbfe90fa5e482e40ec189f4991cec4f28a0d5368d680d795c1c5b59209a1c43694a5c538c9293bc9fbc6ebccaae102ad360223333d9c3f03afa18167ff28874ad46eb9d5469537dea908d6a51997d621a6c7581b4843d45a8df71c4270e6ac353238a2cbef91daab526f9fc01297444fd47114c0a888dd2a97f4792632457605b0d37721a3da085d40976a441a21e514c647302fa6fa665c1247cabbadb40122b34f7943df65890cdc785bac431dae6769ab7bf839142f31f1945d61f83df9f6366780faeb25910edd1a87a521e092fb6c40abd44e2f142f195974a58a128e4c522624a22386b2c2116bc6a2984e58d613bb7eab1e7774819901b06730a80bb5513c05094672bb36b2a5b48ba48b57ba6139f18023d412fd62217c71077654386f0e21ab9cdecff390e24da8d98396ecdae4ea64a1dc1a9dec602ca5fab21ff735222a1e4b66a2ffb8aaa756499703c4445a3c206ab6126ea6b88277817a61f9b651dfba333d5d9a498ded51dd6649c488fc19e827f388354d28c681ba9d93947b7a601d3d5d25421ca4c534afa7703105e6bc8e0bb41f711e27fc47dd55f683fab07338ac02b85507583dcdff70e5ae4daa7cfe694623d53b030e9f4484866296ea693a9fb2b1f56fa84e4ce6ccf0556267d8124bc6fd35ef7173319e4ccf78aa5a6dae80e65bc020923836f2ef25713e78eae8fcfe32d80a680be95cdea1836501f3d4c7894332e381e4f40fabaab7ef3d4b0d809c50e6a1bda60dc83d9586851dd7031132163488f33a4378f9c5e30eb347f451d5a27d51e1f338ec10e6c4e0a7eaa8015e3eddcdc2825f84104b578a89240b548dc805a0d3c47ebc0ce2cdb2d9e57cc92543f180b24bf705ef3249d6d6eacd9f6944c481e10fdc070e0292d0d685859ef4e3750ea0d01125585f816d3bc85eab903d8cc19ac636adb9f0b45cf48620c34218932bae3ad2dc63d6ea75a8c7e41acc78e1d5311c6a63a362abe17a1ec638462d67d1f6716e80c8a617824c32c9074580dd6d05e2b2fd1e6d63e4e5ad0db7f1a21d19f5763acd0d106dea8cc196493332f87b4556b39ed9aa696a8ca98fa53a0155ea74c62226aa9001aed28af295d36e5c078d1e50d8437d6a79b93192082c797d3e6a9d0b21952d4614a759f6ae56e56a62406ddcc3ca4c94c2b7a22ef87ebec8aec803fff7ced0c582c5300d2b4beca6bf429335661626f0b1eba71c80350d799fd3b70d3cd9494563a5280ba4e04304ecf7dbe0c47a85774aec4e8e1085ce5ede5baae1cd446e34a2ced89bc90a2d27516e4b87eb8604475bd1a7f3a53171e9e1a0f8727570cc89307f71902daad9d9f9a21f009f4f24604cb152a17fe56744b16b40d8af29019a9be991f6b18d56cee35c81744f478164b4ec206ba713352636b4869789d05037c90f427021a0135dfb06ebd1625db083310e74f7ace99cc36265798b29745b80273568b4bb836ebd508764d2183dc06947d76c87e54b89a46d76cfa620a40ebcc0455c34f46e7c694b55a38f14e0b6ec36184de3680b9e5238e213c8b238f7ea81594a549472bb209e9f90fae747a914b6401fffbce54ab7023665e085530e38bdbf88ae64c8b74f8ce1ee828b48268844597c8de523df045433b17fd28c96c514791ed3bbf896bdf9ca55e73ddf8f4280bba055619ec03cf2277dfeb7c831fe47b26671fa5d505d0b8224a94344827cea8e7dd9cc614b40835199e9f36604d67ca0433d6b80f9732f72e47df46dff415d41cb68ed021fb724a636128369401e57daca2b358b15c22e8a3179ab68bf1e475380a7ba29ace884bf99658773e52034447d74dea7ba65547659f9fe53362a0933f08f251dcbf19075583c37b85fd13a013ef12df589a8d82254351c63dc18b31bdc9e104916b044fa92c3ac53979c05ad14ccbbc1c546c665a86ef6555a10be41d1f601081582c7de97b38725cd9dca1f148cc2b7b4f004938a37d0ee72ae2c01a03534bcedcb902481d6e44fea685c48b8cb1b34f3969061a7b80f33ad41b5146d5b534c347000318a734784eec05431030abcebde95bd349a989c489040e13fe7419a08cbcb3efdbce06db0a86e642ee7d3c2f379426d6857c4951f7086c0c456a838e830279c4af7f748ecbb3f43ea14fe76cee03df8cc62e0a5958a3e31131186e328b16edeb232e701c2217ce9f531c53f3bd0443ab62e45b9c2dc452e33259542e9687533d11cec54d0fc1132233bc9b7e425bc105ffe6b83f92798a22f8d1937001b18cc91e520ccb31036b45f02487dbca4d24b18608b464fa98ab1371b84e2c736b9d9831da1f648331e2ea91d3d443a70f5b8eec044a83d7010246760e1c7f641be6a8e2ffd452bd632558959623f44437259cd5722549e240883c1c9ab0fa5b101f6a409f96f2fae781de0bca1c7922bab605dc532ccd2b070e0ae13b469151f4dae65ae85a443653178cabf74855fcd8cca014aab9ae63e309703d12298802a645f93aea7e9bc9d6a9f08446e2e49ce173fdc15164ef42088f4d84d74f1cf50ebc75ce69b0e4c9795d3d519834a66fe794b8c2581da02a9d80df914d7b63a5c474ab0f5b3055821ff4a7422d1558645d6f79630404156c744d8a2e5b88360d41adae7971cd4658d28cc88a6a00859f73698f8d5b89d38a73b0872762f658a648c1da9106e942651e3de532690c46ad7d07964bd707139a9054a375f8a1ba97e87e5adf902e37b9f46fbb265d67fb6a9b3ac87feef9d19a36b69fa2896f6c94f8ddbad1ffb7e462035fa6c14088719d530e2b96a0de404cea09e41abca0099658259ea0c88fec1f2a4077c1024b209a054eb5452c002cc9a782d897cfa63d0b75e011b9e990f23bde18d2c641980eec4d8f9fdd5ae15a499050f8ae0acbd77a3704c1bd036d1c29d17178a783b7e068f493bc3a6ef8869567a03d56ff131bde5f9a8e802d03e7a9de445cc9077d810dcf857181a3c6c69877da949d30d80b9f982151bd9409dcfd4bdc87cf2973b3734b97997577ed36abfd462310c439cac8ef255538a4fc1521e2aed392efea54f265505799334c6e2882c4a26fb29dbd853db7218a806bd7095694e743fa42c1cf4b574464e521c34a5976e34757e9d6ae30e765304e1decfb6a7c2bd9cfb0752a7da98d89272c5dc0ca49ac6c278259fd53a91da435df6fbdf9bd41bf80e49074aee40acf6a983bd20c1094f15cf003e1daf34e7bd281e2e33d673d2883d0f26fd3df900f655508eaee170b9da03160f73b46641c9cc72574ea4942d1029a3ddccfa6eaf96ebcec93750026d32927fc49661397eda864015cc6811ca56ee21d4815521e5fdda2b6ce4d13b10e33523c28b85418c67f8af5f4d1aeff60858921c55a158f20a9560b2d8e38bb9e74da92ba600de97af4776f30632d5dcf601482192601b2ede7a3b0e217295d0db8987f004d4af6031f20dbbd7e5b5b5b51994aff586e9c9c034e91173c08155f5758a272931e0984e8735bb0d3c1d8131cb312a413eb713b96bdfb299580006603071089bde4648611de6d87fcc133fdd7a6ba5d0d9cd80a1e1ddc572ff1512655987a82d251d03fb49b0ea2b36a30cdbaef4966f409a638c3c77294d24b616ef3d34a68a973e7664cd30bfff3cff3cb8610cdf249e3a906abe2921f21a7f4198be62f12732d7066fdcdde6d1a531d5d66c77b1ba7e51982c702061e766d7bc5272f0bc06ecdf6635c2927a53033ca01e7ed821e6deefd810f8a67b9f9d44a59e183fece3654bb5d0e8964ed689b31505b0d6e35b79adf63187de669e553fd90e801a32b04bdde17c4188d0a3ba3ab08bdb80b83976367e698e3a7c8c43175622c336427e1621f94c39b8d946abec7a547aaea9eda8c88b6c9f4b862175ceda8181d62f0d46930f3aecc7947fc50dc757d7f492bb810f3e2b9944442f1fd57cfe4e0455867f8e0b0b24d4246fd96d13832e26e9316ac0f08a4a95606f8f169ee5ae37d578482e9ecbe1efac65046624aa7cfdfbc20e7490651a2e88605074bc8595d16f3774dbd75186067c3ac5c6c6915995b1dc4c8dcefc6dbabd9f7e7231a4570d158df130c595686e520d31653ec103da6752e27c4241e4c37b73cca92d27821745b27ef66da0a5bdd3107ee4f9ebffaec5212b5905acfa9c26d2f1ce04904ff78eb4c52d30d023d9d6cb50fb94fb8dec3540c13683fa0fbac3973a8ec36f2c84f6fba67c8ca158c502ffbbd2676a7ff603c2700075e0fd23e8eaf17fcc4e255b769dd006bf656ce3ae0babe2ddd9a8c33f6f5167fff157b0ff92b9c26c8fba3f7ae3d123e51c9ca1dffd1b8777688938db06f00f613000dbb840d1f1149ab86a4437bbc2e6ddbcc74f27085a040675861b3b039fa26f3e0b33f660dda567eebd497dfc357c8cba7ff261bb8c5507b60c5362f1ca2134685131c14aa430c3ce13ab17a96abd8fe425fc12624fa3c8b36004a2f455ac5227f0584ae55208a3df6d41e1861ea3f53aa46427a4c7da0123fff08a3199e29d4aa02dc70e7d41c14784487b259084ef5741d7111e117d6267c21d2de0cdea2e4b8af0cbd48772082562d248345d7073d1c46b0214b97b89ab9030d4151b2e513c7387475f590090e31660f621245ae43497d3a290cc828dfdeb196212faf722fbc7cb9114c5b64229a780bfddc8e51497a071456e9fbf74cf579e98c2cf8fde36053008ed7404d634ea41bd457494d94ce31c5a866257fb51262baa2334e93a1e3dd3d1d50f7d084743c7fe25e3805b1b2a9bb38d62f81db53951cbabce1941fcdda7735b7aac90c14a430bb911726a03ea7de2ecec2d521aeafd2cf4a8bb8ed438c240ec82638ea6e204dc2479852ad2bddb328799f09d841a71a81d9fd22f5c54cd5586e5397546c9c91ae8f3cf0de52fbfc4b8f90f58f6742a284895a4c9f01fafd0843f303cdd2622b2678c92b121b61b2f0e6ae638a4c99849a0f44b254b1d6f49e2deb24a0d418248565b522b85a67638282bfb0de2356d4e8aaf24b0b74f4cf407afd5aceadb2d0d52d88e4806e2028d672d990b07fb45fc78a0119d3a29e15e0d721a8c2d5434f9d5a006bd132a7e64930d06847299f963652e7ca1bb3637e63bcb79cdd69ee23024ab829c7ad0c7d0ed06b85fd9d9d363526dd65af3122bacc6f8e762bc9b4b094ba785201bb3545239339a65175a9eb6dccc065070390fddf6660429848f0f318d96917881941dc3248aa56b8826e2f58ddfe8dc1893109c90515db8e721a2d2a3bd4029762d856902b79e3b7890efee20374f94e5ded15b841e0c0eff1a41dfacbe518f592944e97b283204bf07da22e589726ef5f0ddf91d1d33e9a73c34d6a8502b7fc726e51e98461c042e6d98d6667245447fe86a16a0a6d2a35c830ea5876669b611a6fefa909f5b8e29e917c1acdc7978a90a811f6819fd13b94df66e3b2922eef07d5b4e6d59ee622cf88c72a0b1efe7e5da57020ce084d4c5a611da473c760e96fa5fcbdb54ac538ab5b6136ad0df12f4ab15429b49ac94c0a8a4e01fe0b9a8f3607f1448265378d49037bcd81b7b8397543badcf4d2bf5939ebad4afe0fe3962eb23da24181ce0cd2c0b79ced6c15d0fc49491cddf03e974a75f633842707ecd1cdde8c5c7884a1c795d0f7f26c3db82bada4dda690edea3fd7501038d26e31fe302f8870d3b05be05f96649738de3e05e575f57a1c4721d31551b69f256ec900e9f73a31cf889928d035a14861e8775389bc3f0539b4097aa1a19dfe4be2014e9e6f915feac8b678626fd900031a78aa8ec88927c4e8b830afca87b2f05e87103baa97495b20fc3870896974147b0439b744311d4e1ef8aa7a47e3ce7ddc3a8d020f38831a9d48799a8d0546d005ca18000f896ac3bafb2a1cf6e1e07d0b3f02786f046c5519d1e65aa888dbcd0fc8bc0a56df03f7c5d1065b39b54d002d9c129c5686c5cb19c516edd5eb8648e20f64785e3c1f69d81e7526473bef68bf00b8e33f3d01ab1d89e8b89df6b39be20d60a25b336d5aa1e26f71bbf05d2dab6b14cf6b539160e631ec7485b5ac49a62e42a75ae145d25cfc16eba13454a7a3ca6e22566a2e59b9c05b3edf47cddb144c465b239e9fd5d070ba368088295f71d842e62f33cab1dafa321bb57992c4b157b500c1d16e5791efe3f9a81046b570d3e7336101a90ef3b1748349a16dfa874373a4b3ee3cfee169ac57a591b3b1fab493e33727fc2ad4c2fcd47dd996919984a5c67d00c41f6897d452dc093a735a8f0f52bb33f2d862d16cc8801e31af55f73451f43425053ba049909fc0e00ffb951eaee5087d105ebf402b4171259baeba8317934230c8140e8dcf8f77d1f2e423343a45fc4ffd3e3df6c67d273e8569ac0471c4def94aaa6cb3fb0a55278189a0d792ce30864ff098ab2b551f70cf8a98d3f9b5ca45eff09928318b5e29e0895f55350e01b354df922df0e80dd8541f38589a3306c6e9612755c08ed04b7c02e8c01b0872bbdaa460ec6d8b84f7b664cec277074d4f0d1403fb1a0b6e21ee3256c3cc4ccf6677c4650c969edc9428a207df91b4f2ec4886cc79253a7273fcc08eddf0cc1e7f0a1fc846699a82f24560782156c56fd39644695c53829e7d41997fec506fb2c25ce62e9c407a1f72cb263f7444a0da77d28485480ccace6512838fb8dc74d0767f6029a818708119845c5013e2d1e8dc27446eafe47ad4d5cc45e799b4464682c6f0192c057e5ca979a1a74e916e2398d7a5b8639e1c07b7654fe00643a81f07516edd3137877519a91ec3297ec657e5d70041643d55dc707fcdb8dd241de40335b7a8e46c69c3d79f7e6ebd3c0f5fb06bf94aa24bfd82554c7c010ff861ad81d9bc7f551866b350ef690d6a485ea5d4c9259e5ccb8c651f09a2b97adbd22d1dc2b6cc83c8a04d28417421547b3243b3156b06a35a755e64ddc8552d38e0090fde55ead9c8d18867047ec83987ef48b33e69092caff43f975bde99cbc84d4a5024b0dfb57076858286b5e0189b04b5d7acffd4035e5def3bdcf0b7f158b6e148e5488ad54352878b96830cd5d9cac500c106beec257b5b000150f4168a970e1e5b0e56bf240f8517d206b9b1e7544af1753ea4c073e46e4cd6a6984cd081c4a0bfaf8320bc0712cc4896101ee7ffd74b0896cb30ec4d0147672117d24672b2e60290f3a78642a71a02df8b79e9c090c4b2d8ffc95a6db8ba996049b6e6d88e8e4764f3148a64f32e14e42ad19f0a394ee07603d053da9e01d3ebc8c5249564ba60a3ec2d703b0d5fe5b624766c236b7f1f8c149d9b71c6279552a5d574c49f731eeba1eba583333ce79ae31dbd83a34bf90df5d3a994e830f73dcd2bcaa4015b216c5084b28ddb4fc6abea1911382e6305b782f7785deac90d043c3007121f7d4b6560c2cb74b1f2f9f6154b317df600c893ed3db2903552cac6daa311bc033d47588fb3ee416b904e3c7376293c6eaba74acfa871c1b7696ecf948104d37ac87dc51156782ab3a4079380e956e30bd6399198425ce283ab6091ee69894cc3f353e8a54a2409278c496ced37e5ed09f67ee102fceed90d297f8ea7f6076f1513ef4045c22df4f2ee9b84b01ac9759214c69e0c08c371c4fe880667afd67149595fa4d6dbda1de34a4053a7216d837d32b3fdeb58e8f93a539966e0f55e6416d8273811a4c3ba337ef76de0732a7095d84c21147d5410d8a9cce5f0f95e8a9391ffb208d8a44cb5c6fb7db6d800f284c6fafc35aa501e38c24897d9391932fc3da026a5cb953e5b29d89662d6734827810ad94f030916ab95b0913eeb4173bcb2f2641e6d50552ceffe838ee03ac15cd1f4413ba1321aa4739e0ce74c4a6e79dd5418cc926bd9c97ad107dd6439bb590293809add1d7e44a4304061d8862d302fd6407a6ba14805b434f237346c7e6b7658c88cb40745402ab95cbf6698cbba0a60f719a5471f14cf67678ec6995ac6ea41f630ebf6663e94d4ec9f99bbdfc6b273f70340fb89d2be822f36128304bfcddc0402a6a01addb386b8f169753b7eaf04490cc5dd90aeb2b2d1689db2bff8cd421d356669dc5bce32aac0691f83eb091e0d7132d77c7362ec2d4cefc7597d8a471652cbd2c9cfee6f016d4f5f4f11ed9c1cb92aef2eb15fd247b7d47e8285eb2805dffb8af86206c406255384331b125ba7ccc2da6d4aace929392dd94fd6ec6bc27c7e6ecda7195fbcef5479c02dc0ad9b97d0ffa32cea3d897f129c62d28bcca2842592ae1a920ea2be0d208de86c1a927577e8d2c9aeb513e6e0c70b8c6228e5495129ea0cb809a388474568789ef4a12c5b6d79e31da79df7ef1edc7cee06c1456fad30444721f39419008afc1e0ed8b4772505b830eaeeae8ffbc4d97a4f8b98e817949af6d6cd2581e2d73553da6abde9f4a921767d988e38b0aed095f2c59dd1b9f53a0d56acb76ec3bf68b6cc5ea25fbd5924cf3cf50879aa9012882c5ce9301ef4610cc5d72820ec5da5211b451ed3ab2238001b4b7ca0dc2570ba20e50defba55d4ec814c1a8ad62402e2fda5eb9996d92c6969110127ed4cf051aba4ad25b74f7a6eea994ded91d390c1ed3aa68464e183079da5a27307c6a6028cbf395ec9b18fdd657cb584ac770047fcd42e800b28560b4e411714e162bc4362cb6b2fe595aee906012a177ffc418640dfe428cfca1f8beaec328fb5c7d49e0cd617b5f70fb70fade238f516dd3324037b7cb20527d475e6c611907b5f0029de5d1f96cd164b3a672cca56a683870d7db9e03bb43e1dd2552ab2f78349d41e0643187c0f140fa5f3157656049a34cef8db3467574e0744b868653c0c20f14ef2faf81f1829229e4755e737e26932a040fd44030a6240370357cec059d06ca72ff1ad3d2bc6c68e21548450cbded66ea74f795a146e563d277eaf14600509ff193a254541f9d77f7e476734b63c1ea8edcd53efd3157df08037d728d644ea0b03aae04d541ae16dd6a3feddd5cddcf6452bf95ab675e8ba3f47f7e63687175c69938f147fd956b598dee8e460790148a5a79e13aada445946f7b9cf9827b8ebb4de34146091f858a76c4d0188b0c8d7baa9315f60a0e5ca75c4293a31c954dda37f043f346c7b5e2d1ca8b0db9d1c49dc37ed0cb1477038feb5ee436b2a776396846b1280c3a03cc13cac6485e0ee24cfe766be2bfa5c30f0324ea32eb227a027489fc5d1e1e3b14945a1c00be9b223f8e217c92045dbf062fffbba8e73014753f1ec7a9e6ca2677e0085340382510c297bff4d957e7ca62664380ba71f9769558c5a6c344680ad7ec0659e6b5e8c71af965b78ac67d97a2d1b588dff55acae5e52d06cfe4016f3355512f09f4248c84bbd7490d08e6c29bf72b51430da46e54b3b7a756beadf8211ebe5ba4b82fbcf78728d578d83cb261d962819b45d77e1c180d667a39175789c20d43fbbc26fe1e3124dadf6a0dec06ad85d928c755c49a4ae206e436e9a4896a8aeacc343764ac3154e32a6352b52dc9c4ecd6ff2dae50e20f8042d6ac747dff87bc70f9f93c7eba38a6e6e18d39b7064224c8f2189b3fd5f8b622f6ee57ef84923a24a264edbe05c25845709ac851de0b0d44e9fec400eab4ee01d652ab06fe5061328b006deb23f466de421b171a9086b1de63cb4fe2acc75a609053179f92d820645b325492b500a8f81cafa05ed361b165a3590c1f2c1e75279e9bc94adee3462a9724746e5736c9175d8ce8cce284858abb29f6e9c1d20a82718d40639f8cd532a4ee28e526d829b6213d9a0ec96ea48293500bb7535c90e72826918645c1bcb19e2b697f3f3fe96e58b8b27fe46867cf23930c1f0a3960adf181de2da30be92f4c552e190855648677576891e6acb3c96415b2ada056e497a0dcee8eeeab66b54860b0f31486f53d2e848363df16e28f84bfe8f82f422fca618e890bce7322dc19435925ac749baedfccc514fcdc544d7fff17b77fad998479bfaaeb9277a57f34d9b08043a7b07ccba659b046a08fdc585fd3b0919be0d14bf9709c38e4c2cbbaf6f6681045bf42c2fd6f919e080b632db8e0f747aaa74592a73e8deafd3b045f2984b5d844c6300fa50a32e976f4963118914661325a4aa4131129e24a9859c624ae006a4a00ff2b718664555959bfa5bcbe32a0d9733fb1058b79f510460e2f64b0910e2a03a540e2e894d0dc9fa1b00e4f96d11971bb37fb9afbb3f9833612c040f3ed2b3171882a52fc479ab49420ad74ccee2406a667460d6ac7270418e778c2912b95c8aa5e7d94c361b244dd1aae4a28b7a29a26525c700529f615422f9a3d6503a9a51b11cc810278be6610f0fc2c0f3bf545904c7a1da4e62fda06794fac3929a749fac0f8cc9f6b7339391ec81a5287d7dab9a4096b11a5be19005d8d9b84d40236b12dfabc3ae526782040321786faf98ec7564e637fcefe98602f5bbb3ce4a1af29a23161596e9cdec29545c6518eaec4f95b53c34b93da5bd549ca188208f42f9dae6484a4e0d5a5c208a6d2b93faa476e85c592435a28f36eb35cccebfe3a05b86db791de02d39c875ab004b6a02a6744420fad33cd588f6ac57f73c700b36f59d3cf483c25e60b6ae5fcf3a62561ebd86c73a360c0541608db07c541f848fef34bfdb89d151ba3976315e5ae0ef1b0668be5b595c482551cfbe7afddb56f60a204e470c723044ac3b29968bdd63028a03cbc04fabd440ed5202605eede22c775356425a63dc417d7e26186b1f182e1f95f9846dda679a482af9c4975dc0df7cd0db37ff7f978150bf6288aaea2f805ca9e576f32621fed1f51808beee527ea1a0f395c259cdedd985dd65e6dbc82df6665b7b71f7fcd6527ead3669fa516eb8686f30d3401d9616e5642b4182da532df3f863b2edacace4c73566bd394155a75b3961bac41039f9bc7714d21251dcd0ec442cf4d6d2acf867537e49917bd4db01bec59c439286c299c6f55f8ff12a3b6553bcde47b85c0a1cabcbf8f670c308aeda2c253ba0e3d87ebf286cd6af829d5bf210d7d9e84e94b8a69ff21e5ae9fa6b4ac253c5b7b3a1d2c4699aed0bbf1917546d8172581957deeb9fac7e06105e5dd2b91fadab094ebc19cfb00bd9613546c39e1f2740144a2f584d50a10d00c2c2c13518322c69bb7c655091c69719882c571d33946e3bb9937d5fb653be5ad7f854d0adb73d28de01a96bf9a86038ed6e6365342b54ae8e3d60ad20a9aa4abeb1cc70ef66b392ae5c9efc6185c2939647518cb5e8850ee47efd574b6873cb51e9db340602f4c1035a66304033d87085c29518d7b3d5015371f25d89d19dbae3a7d70cf3586c2504fe94250062be90e52b6455b312715bde6e5fb5f9de59f7d66ad0ed39757c5b14497efd9663fb9d7fbea735b1598a452e706c049b255b59f1eb807430493a6aa251c6a9f44fd2f98c08c2cd8361ed74bf9b940b5f05e4b8a4b5e832380c06a9b806bb7fdb4ade60fc6243a79b208f6df0d37013a514c37d7eb4c541f74ded78bbf5012ae36db2ed23965df80ccb2ef31d5e57c1b658965341f813e7c6e073d2f6c4b715c442132e2e89d7f8e8e210d8f8c5d8b1cdc0094517562975bb852753676e0ef460f635f0a6ce190ca00262e60ba40a41e3df39988dca55db2658df33aabce51e3df05d5b04646750767461503091a85a4a2ed4b4d78d19d014f387d00b6b42746d18016f9c5e221ee217f17f47e79ba586eb23a634ceebc29cbc1b9f244c385ff5c10077c5745e35944285941fe429e854361d94cb3aab3eef35c517e65cbc873e3ffa592d19bf12c885b71092668db0af68897a7c467a908155044da7df619b51230b88b01649aea37e20fe378cb3e2dec138f87e779f9d9470e09c5782312708c80266cc5b8bd9600b4d09aac4b193aaf9135e366a38abf5f2136681bb87ba5418472019d516214b2c1e0e38e419e9fb05ba2b8d1237e4f8da52b0ca626e004dbb2a3202f86517a63fb28704bbd4264c644f3d5ba777227ed1c8145e6f662922ccf0481b3feabbeda61e7084f8c70a36b4457d329563b179309a9592b3a5a833e7c5a1061b2b33961dff9eee48f5b63061994dffdb020ec576f68cf6cf57a2a81312937ec334bb2ace0eead318653921488eb49fe00687bbb93153ef4f107b39bf01f98559ae8c158f5f3718b26836c1161ed2edd8a759f24b43ae4e2eb772018e57ee17d6b99562ead525abf8245dda6ad98873c250fae39a3527955c467b0c0d051b729da214ac5c8df40ba7f154f934dd3ccb5b671293d02e6f6f5fa430840175ee992c05d3ec30347064233488df821af5b03baec42d666e8302b142823f6f04457a5acff9d2f916a7ef77a224e7b81c52db62bc50f3a0fbd505cc57f7e66158c010bcfcf606fe5135cb5e57ccedc5de2553fe4833454b597c7183aa96d9fc2e2be2b16b524b15f0267ab701436999a2bc6215564de78c45a5e8ec51843403a5af982151066a8835c01ce8008cc3170ff1c05d8b3fd384d290e8d6ceaf3a551362b08b82fc6047a8b8f41cd5511eabb8f2d57d62e2f63c6fc5427bd6d540056d00b8e4809ae1946f89813ac73cd91da4fa3043a8f6fed4cd01bd48df82c067e475f1d2e99380011660711c7c594ab673fbc703e9a427c9ab6e14599eb9c97c93fcf7738cae89c098f9aed72ef5bbd68c43b5727a5df199d38456840d7ba6401003f1721188bb5d69bcc9bebed83b5ecc6ed67da976d4776bdac92914955270463deff6ca6e7f57b79f79ea8c8500413dba7890f0c7c59258296e0721f00edf7e42eebd5acf1c811a2cf87575d6919d38a595359fce0048eea5239a96f0da224a55b6af8f4da1a284a17fc58578c53e7f465742bb905c68a0d747a8b4b3e0fb6bc2d1c7c08786270f7c55553c29b251f2afd3c9906bf4e0603b00148ee90e491eb8bf4255a0e576d73ed8c9f589e87c2cb2954039bfdc93e75d93a590fe9d77b485a43d1af3adc71eb01aa4e18ad4829ba2ec4e3455d14bc510585b15f18976b78c8b2f6b6481c2d1ec6b071785402e600cab2384d6132c05d8ba8a95b3eff98f5c50724d47f8c8745e6110ad1af9ebe46ff49bcd33a6c558b5de9294fa922293d3008af3bdd704e7760233ab54894248a0a789f5e39b4acc59433b7191d6da953bad5fcdc58dd743a8025c0158511d53012e517045fa267cb7d04ced2e7364612c68af6df4607518425c449aa63ee34edd3538501d608b9eaf9b4dfef4e188e6dc1991d9abd5ae5ecf523419f5e6059b9678a4cfca2679adb88d0cb3994d54655f3f9a0b4715d58f624936aa737798fae90e184549213414ec5d6bc3aca5dbc599fcba10844fa499fa4bdbd272a6dcd87a4c33d610f766d4a525530d57e9490c9e97ce0e4ea1fb362fd7166dae6eef141f4e8938f2598e7aa9e87ef1a6d70bd8ed07fbee5f40a858f25672242388fcfb78f24125b605b3d5a63794de08445f527f56794f299314a1c786e3fd98d4f70faa678a25dbaf4dd85d1fcf3592d18383f27e00b796b40bba8f8b9a46e38e07452630e57098b37eaa9e019b8599139717601df12de2fc29c8f9022c9031727614b08cb4c582ab504e8f7f366bca1b91360aa9c9388e52d1fafbaed47be1f771e57de4ea8159617b62491b83b10f019472e5d8e1510a99b038a205c4794f894cb9a3cc236f6e65bfe271ee59e93820ee505c39cf1d45f14854980c6c4bdd6f9ea5a4ad4b668d311848457e7b90165f6bddc145090a50b8c8ec2151e94e23f2fabbe5ae39e4d1861d44d49eff79bb5054a6af903b1f7a5c5ef456c9ab93f589729a959179958468918447262616fd136095b9140bd96bda1b51cc717b3d74431a89c41a8acace4a6116f00b394b2c89c4e8d753e632a30353704987fd892ed9870785443bfea2df99657262ff62136d9d200738246540169caffecdb91c6e4e46e4d832be810c888cf6df4491c055d299c48417339b0723a5e97c6bfb7aac22999882b27a6cba789206a37371df919d7a4fa85e5a5f164e32a446e2820fbc4c06d707b6acfd54e1382575f36aba9606d5bfe389fa00ed6da08edaca618c25e5f33d5ba4bf175e0c2c8897078fc0d883616591068f031a0582b077be7006792b77da4ff973000f53c33167f605d0e8efc92712c36d781de25e1","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"e5090de1cba4f8ac444d3d58a3abcc56"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
