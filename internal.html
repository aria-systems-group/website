<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"6fdec25e5e288bac8a8487e0a552901bff0beb837d73c228f62a18c43968af91a27f86278ed251fa0d737f4e3c245df4af5f66dfa5ec12b2aa3e627ac3b215841ec7af841188e8ede602ffe5c05883b794c2895326330b5b0d074c8ec92a0fd77b69b41bf03339571b6d1f6d2a7b6265915cdb2f461c677368a64c4c3c4acabc2b9f86fed6452ac57d7cd1b3751bc1c39262987ec191f229fffea2bbacb9ec50c099f9c5730749dc8619f4cd0c2d5f2fd452f47856bb1665bce47443710664d5abea974b67bb99e7b154004dd17dc355fcd065593bd031f762fa8ba5d85039f92d2e0f59ae09fa8ae8373cd3fff6ccf72dfbbb130e6f364b5e9837f1eda3912c1eb46e9522b6eeaca90d4f7075d44cad6551417bdc43ff20b19dcf1a28c363436c00d1f91afb4495a3488189567611a7e923b71a42b1cce289dfcdfadb3557ebfcbb2bd386f4dd9905c0900fdbd0480ce4a49efe4be22c8941309bab200e232539741a4af699917ef3b56ae39df5069331f60d871bd79bef6bb4fe86665fb058e092d1d547917a0fe561af7b6c7c70c4b10cf46b9771c55628471d86a3e2ba934b7bde5dd9c89aa24bc73ada96234c0e78d35ed7f131f09e71d9deb2a6a7cb6458341d972bdcb31d0b39c829e434f75791bee37749696a8eb955f9bbaa3e85d678b8da6513a8e88a7f83a34d815261821bde50a20c595c37a40156f1ffd0a853882ee7341b2985d6286a44f30ac923d85fc88d96b0bfc4824f778e034edc9efcdc01bef2b812faa003a817536ed0d8bb48121d913d97918e005fbe0c3efa1c9171177b6c364d7520f8c381520303673156ef85b509de62297674e91774d293404a30de34f255a194c969dc9f09532bbda2438b9681cd1961f76e051ceb590e6d64cde05b360504bfafeb1b6766946daa197d4e4e7ec1e18772f8f0b86bf10560f7c513b498a8d86103c8d3c83de023304bd978e30f6f0f05e3230ad88125e8f3d486e8ad733ca5f535d902c6c40d49b05de6a67195a7b78233c3756143f2f6e612cb0e317b66b0ffb3ac11494d822304295cd4c900523592e7fb80d14aba2fbaf5b59c509a03c172f86c8256870435689afc9df156aa81992f5ed528aa598d52fe175922d7891dd7d64b4fc7ecd373c011b1e789903d30c50a11148fc93e286835ebd0741d468c29c6e51b82a9abb6a6189c6347b7a7648ee1d8a1a84c58d5fa18e37acd0ca8c462a4bc732d6b011acb739e6847bf35e5fb0fcccfa15aadac259c880c2344f6d4f35404fd6a5c82b45a1a04c485d804d754a1be17ac95a0b0fd15a9f2605eca5db1e888f1928df888c6667ac89734766e29c36f4a673adb32aa736d5468d3c29fe1f2be84fdd112fa7b6d5bf9ef5abbcadf37d471f1ecc834ab0cca43f41e6ce7f7325a5b210a6492b763b2515e81cf45464c5abd270e96e8a44d56eaa36421839e475eded11914033138eef37d08385256b928a819fd70d99c5325e31c059aa9b7631f6f67acf7408a13022cf7b6350c28acb8c1858e6bcda263f60604f661733ff76f0a17e0f1282e986ad9a46aadf5e3baa4eaf90090cfb77eb0c7f2104672262d8026fb72be2bc0ef34a7e08355867b1b4aa687050f1fd609740d74e9c849345654fcfaf60e0716ab31e78abf4d3e79d3a643297d155d835b58f0794cea7b622a0129d7ea92de9367f56361b335a26fc70eca7cfdb7ebfed06d469e9b6204e334b9fc238d95042bdcc64bcfdee26dee6ff079b1e7b007a5a6117c8ada79906fe73218cfb927114db32c092cb5e6f14f729f61d3ee95286d982819670fa1b27b681a8deb1655ede47db96f67f504a6c9b5bf8535f7b6fbd6987ee2eed1986ee45589bf3260fab5392fc0c003d2291742c1502ce08651b0648bf16f8172625a53fb2a72a19478ed4eb22cd4e809c0325ab5c6f150f65525980bd15af6e5a740b3f0279e47adabba262e16880799bfc1e0e6651c3fadc3358e9ba4d049dfa648f9a3aac50f9b2adf7eec060bcdee69bafca21c7f2aab6ad7aa1e9e03d1e9df68382047781bfebf2f4305f5f2713c24e25ebc39e32ef2ada933c3e40865ee5508b22ded6ad799ca2b6572d52dffe25b8a2783e3bfcf64c34b088ba432622f3962e50c4f29156143a8f009f134a0e63e8a66885707dc42a6e0087f05503732ffe07baedd0724f096414c2d3234e3c03153dcf88486009278c6a6aa3e60a36f0b41fa0c2cd34346ba82cd55108a991b074aac907c1c861cbb008d780eb68c1bcace181e7c5040d6783ed25aeb34368a5cc172768466df1e2301f1f44c67adac828d3b68443946abf76f677e6c01b0f363a0990c4e01a7b6241073a191831020848f9ce5e0057585931fe53f70807e39dc23741b43116696c28e6652c3c39a64d9974e9fb8cbd1afac898ea6fbc0479ba5bd0147666d92fa8ac945ed98ee6a4602b87b9e9e9c0fd552086cfcdbd10b6ba0c3393eaca7edaec6693d6c3b26390d4f9e57dc32ce54bb57f330b1cd8f3cbc7badc0c5a8d89e5463d1018690e295390bbe5d3c15043c24bbb1d5454ddf9d287e90ba4e9759495661bdfe4e7aaddeb07507c0eb01d6e3c5dd9e4bd05d75b05f1f88ccc7d16849af500351b1aa9258bacf7b0433a5f6f27e67be1b6fed24f1d4a966aa4670c1f5350be9e65b1154e658b3188d1bb6c33d30da721df2a3c19dadc21379c88f6b8d2012eae9f6fd4b6ecad6b6e056d3e08561fa801f2e852a67a59bb4a3e2ca8df91d74594088f9c1193d9f98591ff6534d794f676d2c13ecc51b90df9e0012a47fc0d2c67147b7e0317e176c57686a53db0b4ecc1dd357e444a9d4e430e4e0b2120895449bf1c8e29ccb024367b3d4dbbd5d10106ccbdfbc92357f3adf9c2b4465e1ec0ca7f7e8f6d7c52c69b68d9557057498983773c8700e600f494f02f302d2f1a1b7de30bcd5ec615d5af654ec4ef2c1ec1100411a0adb7005e37b08ef1e6c6a613e657302d5aff5cdbc41da1d19e788d800b43b4c680a9f5500c78fc6eed2048cdbf9281695f8d33cc2ca03e2189a24a19cbcec4e445694422e056873d783df0fca75f92481d4f2f910b3586ef6529f60431ca769367690425016401e1e504753d8142cf1db73d9589a2356a8d4283ee32a67211f7e6ae2029717de04dde296037e318af2975fdcabad9ed6a01d4d9687c7528fdc88e9c091f790b58bcd9ac69122a315b66ee347e95b2e9d93eb1e00028d70f987f47640ba2f1d7a0eb252a6639fa41b0f0c77fb101c54c6defe2b07e7589361f183f7f4bdd774ee47eeddcba3e5721e39997039893079b0f342ec35c3dcad9689fbf149a2c7258e144ae561d59faaf6284373d62525694e09923b76b05aca887faf9f782f8e10b7553df45eae7a760fb288f5ce81d7b6bc0841f69cd73c49a576cf6847de548c6d9018099edde4c4ef8175e3e6147e29cb58d3e8ffff1b3915d5d0b7bc22952b92c8ad6d7fdeb3260da0120ea4a11ddbc6a6d6474c2dea96f41090e2d8ad9d117349668a92dfad5c52e41cade1e4d146aa3c599023804cedbf53de7d2895a0d902c2101b6c08e9d6ac454a2ec43d925dda002114e4749570abf97c965ae3911361ce117c9439969be9a5f759a34c18da23eb33b47af1986c82349512f56029db0f0c32544922b8a2e441732a206d33d3f020191790430b57d24eb224fff2d6f9941d8846fe081624fc10df02028ee58216db0eaac8fc668e9f3c4c846af1aca4c2f9c19449cc5f16a17ac16b8539e7262e36ba76039cb2454f548ef88e0a6ade3eeec57af1220d9b9aab8b79cfe34d12800cb56b4b40ffaa27535516446587c5710574938bb91602d0d97dba84581d83a116fca7b8b0e1727e0be9a41907757415da612cfba6a0b4878231de6585b742ce4628bf325b9b014e4c77b3092fca7391c553834be4e399c50867669d6cd4e491146130c278187b8f025db6d31c5e6a268e0b4b48ef6531bcff8432e45f02d5368ab542aebf4b88adccb83ead6da2bfa19e2b2fe31f4caa53cc5a37fd7edeae1cc046eb2a07feac6ca079a85cc146b564957c4030ba1e5ebee919247c979adbd89ca3a05d85aa9e72afed4bbc9a341a05e99aa820422004af14a23e0c6b912001e0ebc05bc280dc24ad0737709113526a2b3bd9295225f197b5b6d1ed243fffbc457ae1b06e9bf33ffcfea3573ccbef88d53ad040504303befc9a237443c9f32976a89f21f5593382516cfd8ebf3aae79321f7204c943e21068370c9973fe951500866dad696d609092316fd91e7fac02d346e2264a866fee24efb22c09884eb5ddaa4b75a6b4e13b2f4e434d8b3cf793e99cb26c9d8af9a53c2f74c7224a65791e24062cfc88f6ad3bbf6f84b4d09fb87c9b308f029a4e4a0512d258163a2d7f10a67c6eba015a49bc1093b2526c22b0d146404ea6a204a360fac6613bac5cadfcfb222a6c0e645ea1d38d8714361314dc8da66686ab98a1f88c622dde09bec1d3973a955786808b1372556c7dc643372df09fd610fb53824a36371b963f12f69d2b5ea76fc85cda220aaf06842e5d3d5059ea4dd806742d0d180b158d08e4f695f3e8d07e3c12a83adb57e3f4929ef76621d52d2472eac6f59c00b7094eb675e0dbb7f5dcfd3d96868e5e6b9577d77887982313af215a5ca7f7f683bed7fbe01b0a838ba3f5ba1cdc080deac768f6e565d0a73a6b5a4297ea8cf3a51ccef5cf185c2d91d8a2c0dc2851a70b441ad0c0c4f123ab5cb16cc03c77f1448943c2b0bf5d8ab1cefd18e3c52a4fb67f700edd0511e7f9d4c1264b7effec28ddfac6ce9d708ff73bc81ce5bc656f957c576deec25a351ddc696b3520929fa3a50af29ec9fd6c0a372d5e6bd9931dfcf7e1cba81b51bf2404b838d79b335e516cd63fbbe3e5e1e23babd36aebe4181fed4ec130350b10cb5fcfae5a5a2926fd4c927c723798dd87c7137615d18de6f841622b11e72f8504fd6dbc09824d0590596c8997978a5c38395e1f82ee34fc6ce76024591dd2c041c506ca040cd743dc24073d3635fd7d4eb83305e54b2f0577f960692e3af1d2a75ecb77ad2914ebd0214692616736a86223dff944db299bca43312d415df8321095c13092853d8c4945989f9bc77c8b1276abbab3eac6aa1bf5cb21407b6be9e16b3b8330ba0a767eeb9ccf76d9f5f0420c5d4d83c4b48403bd1fd00f4a6c2cb459e288de6c14ddf6177962a35011143d8da6aa70c1131346b7fe7e1326f6074d173da3b92ea7195cb9bbd274ad2b98587254e8a108d50f77ba25af117899e3c2099b77f47eeca4afc80a4b7c2471cbc0a0e3877a0bb56500bb92b1e9357509f3522f6d7979913fee1fa1ed51e986ed00e3bae879b0e3b96f74b3cf9c7b8358cba614b3731a983034680922f6e8c7d2ab10b2241e11740acbbea72ccaf48ed018c82d55ae0cb1e062f432e5a73291e08408204858108c9fdbbd8c0b9bbc1db73aa74df81e2182a3d332e34ce5e46b5b9934c2d624a0f4761cb8df716ab4cfcf53aef653eb94fa84cb3435ba28c484cf3fe3e884b81c7788dd3fc78135e8254d5ad1b1182a36a35e7f69feab75210052ee02f6605535e5c51131580e9d10cc3681e7e1c9a00fe0d78b456cbeebf02e7cd4f7c09bc9e33b5e5032bb704d072a3761582049a981609576fe89725b50e6c248d26071df3acbd8d19383faee52f03667c2f76f0c7bc21c508ce0256c3dc1410cb820771fa1437fd4172cb4c9b68b8dece00f502aa492214b1ae7fc3eaa28951fb7fa570701fc58ed4ef1b48d11001e2964602e1c8baa510d5df54dd006031a6ad4b20b14f2170b271273224954806bb3bb019145f4f820f9ff75a4f373299f1efbe13c12a7f30d44dfe28bc0c53dde6fe6ff8a2bb0577434a6ccf8f59e8b4eb0de65894cda3b0fc4200bca6a95fa060ca09b366ce66e466984a1b4dd4815c7d83a427c5922422915e8e9a3ba8da2274d8dc43c14e4c37aa2fe9adc633a2b118289564a368e011971968a23b67eb9af7867989123c5e42e46cef83fd399c87422083155aab7a55dc6aecfe481f4ba42b56919e97de611c56e777da283459258a4142e802a9f910e7a2b4102e07585b68e0aab56861e057c39d57f289c7622025f582b803065a79ea6493f238b6cc61c6403cebe754f62c4fb2c61320b0f7da6d5869dcca2de6d6e295847dc400b215ec662aee4b2d3689802888e99e73cf0f800a5458a9ed5b83e943dcd0a917a3e5f24e8823e6a3a3cbbf6873308ef42586bc46efa11320eb46c4e838bd4a805af825d2acc93211d8f27d2dd486edf938bd69b6917788f92c7b693d3dd6fc05d6abfb1871c1c54408d9b1601ae477f7271db0723a840db814e2e4bcfcc00e17b17b207142148795d5fcdcb4def591b450c310cfdc282d1da3298ef7bb1fbf783973ccceb0a8684d3d494235b4d46019507bc59949fdd002d0051a26ce86600a548a35f5a573a3935b4348bbf3f6b0c19421a72d2109808c3069cd0b82e5391e3fa7b4fe4d184d20410521bdf122442ba24ad029cf70dc1a42acedc24b1cc0075d12d4543d806e3935cd4c546b245d566aabc7db0098b1eb4edb79af3e214c15cb112c5fa429500c02fe57c144dcc9dc70eed90eb3bffbd19603638808c676c1e25e1357fc8e273b50d62586f7c187b9ef1b604d97420a3b0d8786494435ec567a87e96b739b3fa7686113f5f3c3192fd7812c17dfc572bb8e0ec36f3cffd9f66339b22f294d95f2adef9a287c0d0ac3f3bab4cc081c155c811cf4ac757814abffcfee649e8b6a40d81891c1caa0d1c89921f9884a6273facaa2eea09c252989676f61b9cbfdbf3f3a09d26428ea855523361d3987c2ad298c6fe88137044c935ba7848eb81f13ea9bf7b5d17d92195d558019f3ebb5ce66c6aabe7873b675259bb6cd63e2a3dc428519252aeac9dd28ee5357b17d980591441f80024e2e3cb9d3e7d419ae5bf64654a5034c781ded740f70498cb5fe1f585ee31af7a75dfc220bc8471498d0b2ab6878e69416b2204aa4c956b0a0f788b09cc67d358d66f6ce73317873e12842fbe4ad6ff86167a10106601ad948ab8e0933e3f6052372c22c4d574eaa3c2f456a4c8a5eb5706db072dfb470a84ac21eb567253cd7cbc13367a490bb6e19b0fea413bcfd23c8c1ed3d3dbd763302270aaa6f8e8db08fc55f531b98e91f6b9b01f6db1e4c5f4beadddea1c1961dff15e1ab0c8759292aa938797997cf19c74b4091b033f112e5d594dadb9335a99894e40c7f026635c69f7947af358e21f64ea2e89c96a9c75416a66e64cc461a752112f65ab1233c9c64b3b833f15afbf1826ee38a4fcf7fd478d22b29ace373e34a13154c9292d7cc61c0ec6165bb65e19e9289b562199a17318b8b671dd3caf2e9afb1ed6190a72b187603d55c38da772dc5323c44abd7f8d6b97f53d60de48c52e942109e60d7d24e993c7b47fb403655c0b1e6b4be692af8a7f32da1b2f4dce083fd9f02190c2c6ccce3051b11d32b9904e8068b21da49808692ec414473feefd646b34284331efe7429d5590c2996337eab539e7867cafea12a560022ece0c0fd1a6e3fd92f4761dcc75c3b38c4c707375026562f06b6e8f9f9b5e0e52457d7cde0e9727cb6d075e5c4545cee38069eef163ef5afd3c65db8f5ff29a8f634dbf2be61f00760f1721643d46045b29f9281bd1df1e8c1ce77ccbc5e1cb99d5b6f6783bfaa767fe59e83d2e71c5f5993e0d602a609a056e2e16e6a864965b1b2672f57d48f3203fec6f055d80e7d331a85a90e2ff685aee5da31b6decf8797322131ab230d4571dc9c2c787334efbd3480bafa48335e889d4f886b3f1a95d0f29cb38c361bf9c7626b236ceb04f4a5c420175870e82dbc6e0a3fccad70fd0a6e0f9931fdb3b82ef344539b2426ee24a6155f66fcbdd592d6eeed5b61ddb1fc5437cfcee87b9bbf06f635a74bfd886e938f806cf744c18fedc6f6b345e2411cca91b7fd886c9a1415756f941be75a3efcf3e12c393d0e974a9032d1443045542ae64389700987b9a20b1328a60862e6fefe19ee50833ca7ed7445c009722e291ef26d76b6be0155b9f8a2239a9c1cb62e374638bf55ed84794a89cd7291017945ddffbd643e25b28a693da9dc4c70e66ce12781aef982fa89fd6041c05907f445f0e3d648ed047f1aa3ec44d36d13428157de1dade8f25f34f5ef7d1d8c0065d58de5fcdcaa7cfa02cdb0def5166e0918e782f4f659c7ef452ebca33ca00cdd157ac34ca03f6330aab0711e3816d89c7813217b36f6652b8527523da5bcd22134a57fe2d0ce6e9697926cacb0a01a42c707b7b6262ea41a8db7a79dbd4eb49b661422b74faeb5a8567b67bc72b1918b39de7f6f7ccd6e288833cc1d1b713781ba4e7c32513f76848ddc9badd9ea1ce163436d57768383dd4cb9df57981c5b7ad153d2ba5fb366dd49d94c5e4c98ea440b7700d400d2afabc51e7b27a0b0167cfa8879437989825d8e30f588dc91bf2e0a7211fe1e28d2ddded6ea13f2c9f60778e36567c60a13b623131d43cd9dd169d1a99225601732f6c4f6f6a7783dcb8cf72dfc47c3200ead17b0d77ffb7f524972ec7b498dcbf704a74eca7bdabec853391551235e44c7d735ea5d7022da7c73330b893dea2c5562aeb3c78ffd20a1f37b5fd81faf0f70130cdf0b0b274a830c21e6d26ae04e70957aa284706ccc3e6c7e8e36147b904249d8d93051e60b35918a7c89fd79849209d3bcda90429b0c3569a41d0cc9e4ec8eb70001a652037560be44b890760e1ce7e0504360cb05a71a7212beddb6e98eb24a0f5e406a3d2edb2a457a3d2a3769d3ac7c147dd138bfe5995b2e0a308936c54b519c3acec67a7fff84193dfef7a63e867c8c989ae0999424489fe83fa6b2340e76bfec5c3a02a8faebe2feaf4538a40017b4d157c7c9ec4d28a57393a1062e1bbe860a1d6109d1643308e507b05bfa4426ddc3a37bc57206a47cccea0f798e4445295d437bc7c8ebbe5fc4fbc287343418828bef9e984c0223922b668484027682afd05b544afe6724fe406371a168e7c9a8d17b87f48fe25369f697fee0790dfe276c47f7324754b8c16a0c203f77f5f6fc739f4d8d97153c74ad718607cbf97a82d4421bbcb181be78a6abb0982bf310432cc2e87999aef9b337f16255bfd4d6321a73cf6f03e3943556a2566758b1c46c0e33ee45faecf4a37cae7dfb77b6a405c1fccfdf4b4da0dc453b2407e1453102ad54183658eba52e2c39ecb5bd849b311a579dd5149ce453c744f99b543c47254b26005b489e737d6b59fd0d253570db60acb9cd1dc7816b3f441949de9e1919530d3d51ddc61d1fa85e089e11f0e9489abe2f455465726cc50f3eee2a17dfe7f15deb7a8149a523d0241833559fb7ac6a53863ccf376b92a8e3db541036e39ddc621f7761176a84073b334e487a35a6e56af87547ec4c3bb167eba85022cf0ccab7e0c98e591eeb6dfc4ee15094fa3095678e87fce02ed1f4aa4e23b12631830d8551c66ae3debe5bf4bd2770cd584070125013c57d2e7f216698cb01c0c64ae0821b4eea2189e46e5031240ca4e94efc44f543e9e0a3bee8c949bc7553575529f0739b8c2063582e3d79cb0b678ad4d105e454defc33d735dda78a344d54de9b075ac58d8c551ee86904e2b211ad04bc99eabf7975ca90459897b3bfd6957f173e864030583dd5696ce99c1a169c94ea233423e4aa2e7c7c488c5b8f2396da77557d4c695b9eb0a89b26318d8522c040a291b04ef3114e44e632885c66cda2cf77d674c69ee42774fef952a07f86f1c8120279a32321f84e45c39600806b1811136d8c61eb7b3ea303becccef2f0c5f44f2a1c4013e5654f73b69456d83dd18c784668d26d8be39133f164bdf53bb615d38294922df401bc49da9f222ce5ca41b17ea4827e805ed2cb492e0b483e2c37261eecc435184c8080caf6a421aaafa1dd71fb62c6bc2cf5c00bf1439b128cf7d997277f8b9715500895ffd9ffc2985682cb37c829041631246eb6d0703a369dc52aae9279968192148157dfbf9d63db1deacfb564a27a308613aebaa11a4abef2e4cb52fb31dc3a88e23ae54f7b305a65d31a787b617a9289755a76a06a45995635f1ed0da4dc5b5b04fe2a8e6696b69fe8f94f021233e344dbc8497fee18873f8da06c706877efc1eb7ddc51392a6b2ef0e9fb30bd19055a17759cc951d2ca49f93a7f2767214d9fe1dde55ec571dc2106a3e40ad65b4fe6cb17bc8761d21133d5455f51fadfa50b072acc4cae9ff85bac1002a55479d05d4e7246b1d22ee7c337306e3b86bd7cd9e4542e95729a4f80b7567140626104da6e573ec1b696cbfacc3a3668dbd6bbba76c26ed0acde69955bdb228824d6a02a578186dcb4e90ab3e60a7b902aa6c1e9a80be6e2e05a5af48534141642e05941a7bbbcbd2b4de4e2e30eac426abb08a877961931946e4194dae1b170adda6f3682da2260134035ff5c055e4acce25f22ab34539f995c4c8911e59c4cd952c37988153e9576f8a057b4d8c41a1880dd27e2247b7a8c0418911eb150aefc4199a777ff5b60b2a1bdba08c3b9b79724cfe036e01252dfdca55664f7b1a3d2d33f8d1ca68c8706987fbd94553c8309f75525e53ee26a234e283ba1f46fd906b06bac6ef22e5f46634818cd95118553054740f86cd35266a4d2b9258f1cf6cc68a564569c4dd22c9c4fbc0eeaa6032213a37cc58239349a8737ee621a6ad2aac36fb6fe6f51ea60dd514861e0f29644b61b6384c66aafbe7af1e67c0d87fd360ffeb567e35d56036397ccb22ed0478788cb21e32e9c9542e37b3b2013f83e5e0085d01a4bbc3e32e4f400fab589e058a6e9ad7a24f5c6dc94fecfef20b90d970bd1e9d36e7c22272f98ff9e6fc689d4ce8aa2d7aeadb5802225b7807acaf8afbbbc4ea2fab8eca9dddd76e99020a6ede6a9febef6fc7eed75f968c696a0bca2ea854ef401bbfc6898a231e23996b87ac51f765b0df873f56d6649740cbc1da3ca34f000f4e63f75adc0cbc2782517c4c8961ea4ffb028896b3f1e0c870b54891a9af0c34abf7472263071cfd6e99643f32ce8e22c743278bbd67c2fdc4fa9430e387d3d6a41847f85f1c3c28af0595f8c9a4116a20cc85398d3adfa9f1fc32ff437ccacf1ddde242eef7de8ed9e0304ad3e8c0fa0035b51ce3ccf1a336d2dbc7d815f9635f08198730ba49a5235308dcf7ac0115a790237827f27a1ba90d33967dce7e99eb9a5f30e4fea8f0176adf3f3e6c1b9e586c3d93a335a52710080d31140fe1c7db70666ceadd117d7d3cf9fa892db05f235d2f575a927bd28c64e240dc576d44d731917ab019aa79150c262d19f7fa337f6f0c8ef13c663ebf6de5ff8e99f8ca6468453c9208a0a7a4ee050bcc66183d7794ef9bc79aaa139202823e0ec1e5a77a85ebc1637fe3de2fc5f6574b19cfdcd6f756b7d200673092a46c2bb357c5ba4ba5c209f7909756fa5d317f02d67ac52c3f3d5dec51c07948c248c238a5b739f64aeff6144834360a27230152d41977d10a379406cfe187ac1aab69e9ad40c6a236f95f61d31a6942b91860716f385ffaa9153c325730a2d175f46d0c89dec231bb49b2d263da01b9d30118902d292d812eb5fb281769784566405bf14a6798dbe43e869b68613bf7db3d16c7e5637716725f7f4aa1e1fd165d53491e66a95b02f2db4c09f956cf9f2120df10c96fc3c57d68cb210cceae7f3adffb72f6c710f7e9c764fd5186fd273ed538764e5b2075a743a2bb4d6aaa74ff75049e21b0d4a1bf64f0aebd592675b73c9154c8e87c51e51210eb29a15f1eb1cd64b6a528d47a894fd0fed97669a23147fde70f2ef68502288422085a869bd9c7a8eb336780cd22fc114543c98f6df025b1586ee31f33ce7acf02a76c221d037cb53809ea5fcf56d1190bb2baf79451d1e17f657770f3486ee4167c073f243b338d6f25d53c6d342296da033c981c9880c9743aa597bef1bca8b43a7b44054bd999d9b687453ec012af0f24d45ab4d953da6fc09b6fc86b8b4ed25d2a3ea8afc696fb7065adb5c76bcf339bb4216b977b46c31d03d51aa47e96ac8969e0f803dbffa325d14705acb40002b038b04467e8440e6c14fba22afa426155d7023182e473001bb2daaf46d548d1dca2ebed6dd286f3369ce04c8cda4f62c890f14ba5cd83352a68bc3becc893f1cff8b640f75590c899d0cec51810b4ae89ed0b5d300cc32cdc316a55f3ca7700045ec77ed154d9dcb99c2bb2d59584f00c3f69e0efc3afbd3d2096544d3cc0a6b46e5c05b1867947b8979bd1ddf2127e1eebe7ba4fdd915e7f154b037a9c04d8dfbb2399f0d63ba339796ae13c6945a3264a0947e90614f2d6b4aace72e1fe632698ef2cd21b9972821f52a6f3bc0585e0efadfa1762d707c1284376f9f8f3e500f28ac249a9ae71b071b16f0a34cc1c5a9036a540fde0568d08395b25688b17a16aade6c7e587bbdf4b196905a47237db465378eaf6e262befd72ba893c359fd4eb20c16713f1a3bb75ee807e386911a136bae0bfb8f8fc7f945fd1b3ed8072390c92bc5ed05fa1bb279efa462e69f7a50c680d9b334a388e3ba902f58386a2ee3013d25d8aa30886e343c333b6c1eadd3ddb085bdfee99466b04c98ed82d585c88d4e92f2188ab55a7da760359a2e2efbad821cb63fed114675e9fdbe1ef8e2536943c5d7dd2057c3abd99d3bedc8957600528d14477a890db34d24bf2540b8cbaf3ffda57fa7d57dec5f685df4d6402d0df7168f2caef0829aaba8221b089d65a4c1231cb0bb4844d589ce3b38b5e993eb3c381ab88adf6a2596e34081fb94a8691d43d2e9ba4eda598613c67bb057894ee2ae76c2418edd47a3c9a94bf17752232dbe6881568777a31f1ad1c23c60fe257be3b2fd3fbcf1f42014638466b119f1d722f68ce4b7f807e47f9aae6300c5a2c57cd63c06dbc689f1f32d8a4dfe7f6af6ba5eb51c3ecf299d60ecbb26571523df96d3522704c0dbb1b751b4402fe67c1a3ad2c64852e710f0516008be08ac9eed3988e54804fb1c41338176fc3170ab4dbfbc6591665e53c07bc1496b5c1281f40f39da0a250adf1f50e1fe1c4b6fe8993518ab0570fed325e0c7898af617a7e3edd7f7e670189da3a06482ac029583b410778351879811acb60b5a0fa2b7427096f63a2651c84f810a6b2c7b7205970d61e2ca6679a9c31c87b45e9ea7eb1a4289b5a7e82d04877a7bf2ab52812643e6bf4cea5c23d47277067f9ea20bd3ae162a6faace0d9fc33f4636c1d91a5fb9a9b89accba4957f42261e084cd8fe6f567187748220d837ab75fee8e0ce84f781ee2f13157245f42420455627d6cdce51006ac381ca5703f5299a91d6a206e23c248f983db0787eaaa157c2f7d6493737ba9b1c18aec7deab60f79a19c598f4912ec280dc0ddef17f6307d27dcea001ca4855a5accdddbde7ab10f0a5761d42ce649263188662a7fb34c4c30ec2e87e7663a0a6ecd9d4e3eb35989069de56418ef90d20c723b324a2b6ee27b202a94ecb579f32ddc61b702c6719eb036284403b56495ec74547724a7739d5ff92a3dbf7037b3a805bd49211f18ca40eda5287916cd6e78f6ee2fbd1655a15d5f9eb5eda3530fde52efc669d8f87c80efce318a8bd6d6c8b146efeff3dc0abc4761acfe8eca75a83c41c4e54da49460a3a4a8d2ad39be4d85710a1fde7d26123060209a1085449e0e2a888503c9d387e978abce72d343d33ea5119edef12808954f12c19e74531a3c1fc92c8c1fa03102eafef17fa1b1057cf59e36adc93cc294fe799d33a94c0049a3ec8fc59cc548ae7a9555758c99023d7b9c62d90e5f36aceec6be3f56347c5d1287e132b3d6338fdb0e15128590d082aa06e1a42f3469aed329b3d20211bd817c52fccdfc27273d88082dd4503d38e7092fb6805cb7a3f4eef01d472a16b830aafee1b14d5f95d772c0fc57e3eab0c74495b9c30e09fcbf870cb090409db2dd6f4245ef1e89f2c94e0658c17d6b4f3da42ac7bfe740498a229fba4f647edc52b287a382887a9c3457de10c968022b72a09dfb3a98ac55062ea3818be6bd6d116c9bd3b2df72c982e0fd5a253c0d79e4ea3d1961549546235824d846d235406ff202713038e6132600213288fbda01cff724b1f5a844274a84e451c658b36d489c897894ff7f844d6cd04c7fe664ab3a741ef6da45e505b8d1666164e699f59453f669655bd26157a5f25471bb71208f7325b03291e274cdecc5b17231b390d9a069d79c6bd208f72a4546ba089e25be2ca624353653620ac495aa89593bdf888cccff11f35069ba2144b8a56dad614a53ce50d2643ed96de529478ab92253208dace5d5f1ea501ec2e4a26d41db502e32a6ce645cb9cece80219c3f2625cebd2de0093916a514e089eaa60392707af2a719c3a3cdd2c4b32c3e7e0f7b4ab17ea59ff14494de5f6945e7d2b97b35d409769c7ecaf08b3084af1b2dc9776101718b564774884d7f41782b0eb4a947c9c0a75cc0520e094f0f274fcb443a47cf171c252b24f77694a5d5335a4cfa3fe3fb78e1675c289be4568dd86007469982d68aa818d2942fd3113ea51ba7847a44402c0530cf9a5e2cdb76ce30bad0c62eef23b1aa045af899f24406c274da32ba554a807f94a3aff221f41f055eab9a7af1da2993e2b52fd4ab5c1f3e22e2928e458eb1556501136fa127ebd043947c2a50ad69dd251c53894fd0f5313223f018754c15db47c78deb26a04f0eaf33ca9c00a0aa1582a4d6641f3f7aded038b213c0174f0c28c33494ed74be352fb0a9a89c61b72448e76b4cdf322e5c5218b3d423955c51b1eba962ba86b354b0857d6f679eaff957fcf0fe4327492599a38a62df0af2aea144436e87550d020e0f199c774e37ef5147a0dbc373938659cce5414e6ab279cd8e8630126007531a5a4de6db0367654586513eec6084a5504523979d11bc3a8dde2f854ba2cd876d4aaf778ff8b53b664e08e346652b5ba5c8272fc3fad04e6a8270c660f07052d904b5ff4526e7da630eef663b3f7275783f213ca6e06d7722b176979cb2c45ba208685884a2060a0ac2cb098fcfb002c539543c17e2b52a4dce8a7bf1676bd80621cd26b076e0638da16785df0f9085af1750000a062b89f0f402e48d3b86630a281dffe62ddda4ff8825c2c902881fa3e62265ad7e1c3cb134b05306eab543544dffa243e8372ed1ae8175a5f4aaad80d033336b0ec0696064ffdc95783d6a1c293382c2fddb5562a150eb2921db4e781ebeba144d77ec9e8d0f94b6f4d920eb7d9b8126925817276fa6045753c1f3025f795d8ee006adbd0f15310563c55e9ad3523b2b4940073e9e92c75f7003897b3c93c7b0f9509db3cfbe6dd6918d1c73bd2007c126b1034f6fbf4067f478d4813a83d95033aab8e5ec5457b4c7fb64faa84d12640b9c6343d7e8edf20910eacbabd689c7e9bea8684945e905eb42128621627264416e43803fe5209856ac7459e028f65e9f40feba545e499aef24aeb336f7f6a4ce17c81909c14c45df2040abd3a5c474213865133c5b9c436e5a3c8f244fd65b203ec82aa86d3a63a2e8c8b787805b6618cd4e6a491588821c315eafe828876a5e317c89dcba6e28ec5b3abde47e5374f071b58997fdff25ad2a2a9fd53d1c8ea16a82daa9f6cf6e8de38a0fd0663ad11e02f730da4066985dc93e9169f018894b6fa869442f60fbe52046d9dac48e3bf5b804dba492f986348e42b354f26292be2bc8be5c694d81e0cabcf2b6e1d1456ca04273c8dce2c6e197171855eed1ef10d866196a852023143833f2a44a004e6867943f4ab35d651a1fb19673aebe004f863914c50e803def80ee23c91723c59210c85d03577e417c5817fbc5f60294fd90ccb3c05e44b33d4774a2682104e9033c6b230c316c5a30dc7addf547a73306d33e6d91a53dca361f23131a67990bb68dd91378e52707314f1f2b4a4699869adcc22339c2a75be998f830ada45329ed0518421d7a37521f54d6d31289a47090bc7f8bd370bff817ed60c9411e85e70b3a6c1aaa9afbab9d048e4054d4c29f69d37e6481d863b2bf8273d39787caa7b405520457635a8e8231b7e96b4a8c41be9188d234763f85a3ecc6414004f1f5804b8bcce949e606ca583392a5e09a3e133502b418693a89406be83f65bf313480c4e666b75c66ebd38d6fc9bd23b7e85f5dda3bc7c9617639a4f9ab9d5103999aadd978b3288ede27b492eb1d2dfd4b33d1cc3fa01c097832632ad5aa6452ad0e972b3a972ac2a45bfc23dbbed61614690face58b25ac3ef1c201f5f29261f321e63f355c36e63e2baf15dda473c7284db4bcc300ec739141937800564a8346c2181c1ccc6960240f8afbe6188f6e60122b013cfac60199ce623b71ae80d1f3e33247193ff09cfd35e2fd27234f99545c0d0407c30d1897c76b2e34360a33369f99cfbf739e78de892549dadc9d7e9f3d7a3d6e4ef433ebd4ba44deb0f2de0208e0c5fb783da1ef53db07095063d132a725f2da41d07db6dcc9a383ae9a6e0bf2a16ab8383a925dd73cc08b1bf19cb4189f31fb2d75631cbf5510aaf14e25b811b118cd08d2a1026efe3c4f2d18507a6db1eedd75092c557918db5ee760814d2f954081c8a1a21587402f3cbf46dc04e0f472d55e21f2158f47ac1bab285721b88acf948086477a8dc8780d4daf1d9a803302eb599065cbfbea2d396c2681cff302e65673b00e3e37a03aef825e443722efce03bfc317a30144657c7bceae16b52154e321efcedd35f301ba2cb0d71a2043bcdb7a761720fb4c8c4a956be16cc385a00f39af756b3a8609b7b520c30a4d6c23e680614a0cb5be3cbb848231c5b7e3939a3950d0dd99ef5f93f71e84eb6ecd9e58136bc2bb1f381c8e61c44127fad82c119f7b7bb8b4a69bead5528e3d741493a7c4b79d806a369379ad940e5baeb52ad4d7f7da00c6e41efd92e1f18c507b127c6b9377fbda7fa745af69e4bd55cc045d4df445615d3612dfa324a950e1aa69e17013821925cf8745690e4f403a1ce25976fdb2949b27ecefc5d8cd0e1e5081b3f5ef788d49f58753634eff556b9a338044c34346d813ffe281fc987f2dbc0f691d055c70a13e5eeb0217a8c6b2c0a1727a10397e7962a5cefc418dbadb88adb140170806066462309ae5b8c5cef312f858d8d87c2c936d01c191a1aec56d0f5c0489146a404ede07844358cfcfb0f9a660ec75385fe3ae4b965c3610e3bba885cd25c58380ec0ca90ad2bba9b0feabb856fe6445d0c7e57a04a839e6124086da98b9407acbe77f9da4c3bde4c7893f081875c8146bcec079c3a141a1f678462b4ddfbc8fcc0767c68f303428cba9233846e36cd42c48f57ee184ccb9c68fd8c5d53e53dd117a0bdca093fbcac7cf9a5b9f161c70a18758c05d5cabfe5f760ade6854eaf0ff9452d0ebb1679b8d618ee36e73169f00305a809b2d616d5b49e98b0c8ca77bb025988ebaca090e7a186790c2f18605ca94428ea9d8e830bb819970a007439de4ba0d6be08c19f87def3a2f9e194812f1fd274c3a1cba28570aa42867ff4c91ddc68cf89b89da4327693cabff02d1ddab1233132d9669065b2fb4ab88fd0f0f94725187408832bf2cee432c25e0392c8d8806a8f5d8b6f4123802b27f2c2dec1bf7f124b897e7ec49bcbc08ffcdfd8c4584da7dacfe1cdb5b9092e26c2b2dd14ea7ffd6e729d480845846369e9dfd78f35d5eee03a29855f280a6ab872a72f3b4aafaf752f6ec6105085f7b8e33cf05b9d81c84bcc2e74c31631f53852ba5b4aed5723ea12c4e4f6c799e0454b4f20a19cecbf06e195fbd794859212e197b0d5394ab1e882ecfebd83a78cfb5d1ec0e1b1e92a0a37eeb8608a033208eafd1b4542fa074bafa5e7d165c16704177d989df4c2ea1a2f2adae35c7cf18c1921ad98b5713be80d2d29ee7d8a9e823364f78099162e7cf1bca2a8f48b0220308eb26e5922c7f2153ded736b39e40ae1132da9b9ddd44adccc34cc5550f4f5597eb7297e5c8457ea6cfe48b6d3b7a4249212f4509fe6d665acffb0cccc9b9c582fcedb0f5b90152e064eba88fa2be8f99e672aba14c6dd8ff1374d3ab1a67dc2b5c5e69867fe285c057f49a76de50d6ab86f30951e3442aa070718e02bc38e086b190b96a2d0128844746715ddbd544772dfc41a67d75b48753fcc40684454d780ba329e6814666c72ebabb289358f2c9b9015760fa8c716ec14700e7d94bbad42ccffe3063468dd56f5139437699ba41bc11ac038df5c6510d18cc00719dbb5c2407a18d058abcab56a3cc52c2d5e953566ad39eaabf248699ff2603a88565ae3eaf6b456583e46a5aac15cdba56bf8ad941d99c92a5f66aabe265ccda7f94ca9f0d23af53e4f977993ac518e5f5194caee8c298e44b2a918791e712f660f7e07e9b255f9fa45cb6a27e1190e0cd6c8341c87c9a63101fb02a5a30f3cfd043e661bb68c1aee23f84b93102000374ceb6657568b78bd1dc9117a2e503b8735633c98d2cffe6748ccb50ee4c96146f0d08fa1c82591994a78ac4677cfee3805fb0928fb448931d397334d4db469ad1168981cc6092b3d49297ffb2a0716cb50b106a587ac3ef02e96ad201f7ca8ae85d65b4f9c236a27b48d42fe9bc9744b8227eb524a120afc9065aee3","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"4a87a0d07d67590cec71147c4b8decdc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
