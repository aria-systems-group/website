<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"76d5df191cc456351654681a40e6b9b28f097dee8f0febf899978a0c5e710b105ca15828ac943bea02ad721f0548e09f0a9644d09b03ab1b818dfbd6f100e2a0fa0c770d148cb5f2e2249824d848050b00b1cee6efbe455f560dca9f775fda71c5c492e033a617c06065ad89608c875d8e61ad7e379e2e5d57370c2110638465f3d894ab443d2683c7778cbb2cabf1ff04b4cec6d8aaa9dd96087788d2feb30a6a3235a64a7b415c42bc68c453ad9da3d45468b77791ef7282a8b09527537dce5a093002fa30a6d1982f37a11cb2ee95cffa13dc07775dc89edbcccb92892ccbacda9b09f2d0309a7ed58b7c3fd5e79c5df382566cc76eaf6693121ecb16c36d19fb806abf68419411847b52636e29e43836cb9453d485d6d21ce37f8a127c83db83ff705b961ced7bd9a4988b8d30f12ea3e394c2902f195da7c2776cfee124d2161680cf9cd51d499b849677b9e35927b25b20ce2e10c608d952f707f012f7f17413a2f562d38258c7455c475fb77abf5ae8a828d89b1f01b3b98805a06a1c3889af65aedd3f785874daa264e482e03a59353ecf665499cbfe793ed08822b04135f0e19027dc4de59b64cf4f7ca1c1dc9096d73cff4766987d121ef1562ff65adf8e03c011d7bc372a1f3a5a1c4a9efba49eee1fa1b26ddf7f344434467f99c0841850a31fee613cf5db757085de5b7fdfcdb96dc4d14192883e0390a30af9100c1fe0c8d7b7e36e03627701305664173e59aed6a9607c3934f10c65d074f01157c5f4ba8777731d6f03be63add6312a86c2d4ab1d57f1d8820e69a84ba7124e7fb57fc650b6a9f33b0e43547f74344625de66919fcc030264fa89ee54f2ef9d690d8f8ae474b7d3179fcff36b06d5d75f18c904cb6fe92ecc8e572908b00f4890e87d735c0ef114d1c210032876bd747ece1a0d3055de84013635c57d995f40aedcaea139fdf37092184f02140ef96d7ab81bceb48caf36aacc2299975becf4fe3999eb5b6e80cade300b5c28a6827788f9771b94580edda96580afa3d646c5a86abb421db4fbe1e4ff03f55d4ad7c3d3f44f9c99bb8ea36e507e9481f1c07dbbe7a78e9363665474eafb62cfa34e4cd5311e737c53ce9cead00fb09612d115286934ebcb52790586a8fa754dc3cd33c0955e1dca24ede54def21f247629f0bede5d79c3804c154fe8b0aab2a3a1885d9407dc86bad2ab5b2e5cfbf442bc3e52335cb7c857eb702417bdec3c4cc56c66b49b9ff62cf42fc3803886c1002f889d66df671ba3cb636ac778426aef42f25149f2a175ff2dca5596f3421077101c444f537555dfa2d0f280816e4f4cb368969afff5ea94d47e05fbb0b1c1def6c61ad812b07e7762e78eb9f2c9fac14860ef2526692d9990463da44bd0e72ec0cac2b1477323e0113490ff1d5f1d1fbe3a6a5c204d71535f0a8d5700b97e11c8ddb7265e69d778345e261a8cc6e2bd27b27aae0f92e0b102e6c637ae26482364db70597ba185e6bd8761d9caa87d8ba91ee94406bfd52059724eceae0707e7d55b88e7418e1dd9fd511c7ba24bea3ed74df23941b9b607cf07db30111b78deb8923b315f4feb466977f0894488dcf3c7d556fd285643fee2275fef8b22aa801785b1031291f9d28c72b8ead43671f1e9936555c9c7e2dcd358aff2a13bf5c0409cc5282bc5b9e32a29704acb3d6999336d7cb8e46b5501801b74c7f27e2b65f2fe0b4d7a42d007469b46a4055c15415cb4873a4e81c3622d407e1408469bb60858bdba18c0e2af6632d6c4f1d2a932d345ab8cc74ec7456080ece1b3e3bb9251cedd6a3f930d9d07434e35e8474583423c0cc1c46238a8f4500714a196d7bc49ff93e53d0ed291aa86100bb9399d312522a69db3253df92dfa8be52c0ad5dc1ca394737ac794722fce205f190db6fd306b7ea45f95f5e5a1573c85192ab835d0a038bc7beb83a42085b8bb42d8e25eb2a25e5792de96de8c302f8f9dd6a940f035900de4019b798d96937d2c7019071e830cff754d129b29b7856af045f2e498b636dc071fa478b03ba8a04d9a32cb0da64264c28e6e9c27fb873a7be695692b51f89650e2adb8371af0a92ed55c29f8e81e89f46cf7320c2989e1a7c22f4b5cec4185abc80915fc89e7fd3b7162c55d1ad42765c03b7f530cb08b84333f9f606531a0ce9b6ed1d42246d4e66171a3eedb78cf847c02faa0ce2bb1a7a0587c02f77432f01e67b4205e15a548aa52546e2eb5779d8d2099287ed5303024b6a9a91566f7e329964d54f867d520e9b1577aa48d6a30c7563713985fdf258dc82f5b48584d1f4d3ac53eee02dfd94e3e996b6bba04fd7dd723d3d2136eeaa235a12f24e79faeffaa4f27a527cf3559884f5fc7b6c6a8694cd22c5bdd810b032e4dadc13de8d90039375ce5de0957925004bb1dcd0c0dfb8ad5ecc7bc639b41b18608416fa9783b1529765a1fcbb18a7264c2d0b64d1c510ef73c6ce26fdc0b37898e49a92edd4d48c7dca88d6c6f8ce4d0cb359faabbc5c425955bed23e04d0701ab95f41d9521b9d727e1da7bf14f8196df1526b30008418112a84e3facde14dc714c501b509d1966c1c1b8285e99df0cfee3a144f029f36f0b40ce27b6e19143d93daceaf6cfcb66aa76ee551f80610b2f4a876002b8a0f4c6ad2139b2cc8cdc622ddb8cc6cecb2a7aea222cc82fd17172a2593d87d9e1ab51ffb35069c2046ed0eb79c2b5219258ca73cfbae0ef28131e65d75ec7efd28a4623bd3fe826c071a6019c7c61484a8c91f296a363b7ec9dc43010d46f15ce1149ccc67c64a26b070fceb32fbce052a1dea0f3e79efa124d9ce6b56ca9dc1571a1411697e3d28c81ce4aa6a8853ee3e12022b5ce2f42c0671453c9fbae5131d3ed7cf55a7409c3984ac76b59cbf741eafcef2eee10b7ae3131a6f16dc9e4eb84893e2b7996091694e7a26308a2c297a9e343ee077628ea470e58a2a3e41babef252da75121f6383129d784b48147525b2e9c318e67b39ab8c4f3b7e1eb9d925fdde10afc280dc713f1574b27c619ec3af7763be004235d59634de9a18fd6dde12f346e6f47a67717481119c1bfa911714daecf5bdbc4fb2472663105979e031e58d8300298392f2cfac60cc4428ec6a79946c81a1857e08da87b4259869df6aef105229cf429697cbd826f4b0a04f9f744d2709762a3e926f53018f95f827ee430c818a3184110db2d98a14026d4cdda29bfb1a83a19a3433beae0a34e86ebceca7f2982f27b0dac3353f98258a650d0333df682342859dc1b0ce86365bfe3e1d8f29a6f23fadccd21fa1c4b4d6c52a62010f550c1c513f2a2e3eb66278d1fee4037122cbad6c34e1b92c733a990b3935f1a5969b341fc6e295d53d4982101effafec093f5db4444e9b8fe747338bc33eaf5e624a8d8be54167ce9afafa0ccbc5a5b6548e04263af80cdd463fb9e8acb660e1d4a2c15b2aa51577e0f25c8cd0d43a6f2d9dbf6a292ca7376c0e386bd68eb6ff89c8f664a3e1b248efe397be79b2f54495dedc6c4da3b80574c09d3909eb5e569ca3ecd2c1ae976c3b62eca683322f90443d9a4d485f98a91a672e19745a6f5acdbca7ce2b014fab941b60437cdedf2c8c8945964dbb997e907d65a1bce3a49dfdcc82ed707e4b6d424dc955f9edba1ec64092892b0b52e78838d30813286847e2e3de6f56fcb26830add3421fbfd82e96d2363c0ff6d8ad407d34e556188ae0db5f1ccc97b8dc854b545c66d74392bf0dd07aabb228db4460b8047bb3e8f07f9af2ae3d3121c50fb5f708608f172bb13821cf384980332d0d03da6ac97970887d39a061bf4e7b7368bc5baf43fa46a2520ce5bb2c7bff64aa49da2b650ad229f573b88be119fad3fc58a10eeffed5ccd59ede55d8dcdcf78addba55f8d7d4c0d5201126dbf72160f968c494ca0d8e9f994c1ca0c3648fc11f59bd2a0c72e34282074b15087c979a94282cf69a4dffa5d68ba714c91fdf273ee31b4b86ed50e0f787b3d40fd7517171f2b8f31a3d2ce9871c8c66cbcdd49ddcfad2a6578e7fa5e4e6703069865e8a894d0296750c820ecb036e949ebea0461ea05e1e3185dd18689f2fc2ba7e2a9b00e4495b073e0d1e6a92e2c015d9d01cadaf213488cdd398d40abc82bcd17519fc0dd8b021ec42b4112e7649030dfabb46902d35fdd2d42c3518739729f97061a0049ee34fadaf32c1593e647e10c78e5b4e3a39cd7370d623c967b095d27395d4320fe86020b8f8ce8942d0aba39412199163ad9754e1aafdea30835107e81aabca140efab0c021b5597dc81486bfad9af2ec0f5e070a6723c4ed4910098422f359727dcbbd71cbd2f30a5a78f00c5772cabf54e549df19502ec22ba49178c4b9f030117ff5a7ca3470a8b1a5705a3d729e97189ebf93f5b8e5bf0124ef05ec771c5f74ea0606ef0913f2d237026cda8d0b61a11a36fb3f70772ab4b2158d0d004474769ec74b87d0621ad3e3726bdfb426b1dd5f4dd97bb886774184109d1ad4a498f0b3a9e6620997947e20d0145cf3789915b2a1b9fd32ff4ff7bee29e2b9b3b2cc94d6df8fdc601f85d40b20d44da99a64c29b43fdc5b6308bc1b9b9a49641fa830c3d333b84c72780242bf44bc6bffe1170909bc1d9d642a42c65fc5ad3fcae0ccafd4cff19a60c9c484e15b52cd84d7727b663b04f01a9d91fe377aadb0ffc3ed5465a6a63d58afa44c67a93a4e20acfd46dcdf0afd34c2c56404d74905906689a4bd264ffcb5cc2c99cc7c8e4c78367a287169b5516bcde98fcabb7f3299563fc776295ed344a3ef7f173b61f1ea35fbf518557ee77ba3f25b2748de13ad5fb39f064f5a7efbc8f249ac5deff1a07a1334df205e5059b60e771e4caa9234d0e048292a11f605eeaa5b44500827656a87fc2196e78a5a94e0727d5c745f4f6625d3c849491abd994a9a9ad9e9b783a4e7ff78ea461b555a8e4ddc4a155a36219aed7a6ca0187bd58d4608392a551e883e958e11cc616bdeab83b6dd071e4160d0fe71968c8d4587155eae531bac74807af20ca161f1b02f348193e5089edaa7d95501a537020cdc1ac0f85948cf0f1d92be0b645f1c5b68bbe162c603d6220c148c9423db9e4a864365372ba775adad277a2012f40ac7f5ff75bad7c02d2405569d37f7bc82cbff5d1984e2e29a8d8312a24b3de7a4876010852e60a93a7fc400832af1504970d123532a2f03651fb11ca3657f13214f6752ff643df4b895f3c74e1e6866b2943f5b85c1b637ec8cea1e2f59d54bb0e336cd91f11a8107fed2775c11f8ed9f3c16a29d5b925f1946043e28cd7161e8b80b7bac5298041069b371e3f7ba3bb4f9e4db0f17085e1775b5aa2a6ee82481c49104bc9492b00a33ebe97ff85309a1782fce859ed01ccc4bef35bbd41e7f778237c7344822b46318f675b2d3f2820085d1d6a3f1ef0f508c7bd519729cfaea2d04aad8d3f6049ce588c41370f384deff94d539ff6fe3998576057c19950b2aafcc6df000cdcb17d0c7cb2928f89e289e854091a4577ea3da5292b4c198a7d8bb972cb336cd92f74dbf8bcefc40d36d70b5cf1c1b338337989146555f3b8c1461a978a9226379c345542557b639c266c184d1ee3aab5a92934978c0e0dfe1cacb122273132cd49da6b1a2522eb9a83acf2e6e63180a0763f6da44b3b03cb2e2811ba52b31722abe117d2156bbe9e2c7e2715cd46a56abe4b1ecfa3236a7ddd08011b311c378fbad949f82c6d13824d69b93d35d9917fd283ccb0ce4590334c85d276b90e17b85fcde48118dbd41524a443b98799909a77fab71afc8ae4ae3a5c434e14ea92b87e226e671c52afefe5728eb2334ab9dfcc08b24c6ca1d957f89d2eadd479a63478712cacee33c9fead120772acf4e7041cea91652ace2af5222524590048311587b0f78522da1058f7e50737badabfb6a887db4821aa60788058e8fe66726c439644a6a4b15823698a46326dbbef9a98d1befdbe0f914ef6fe29ccf61f60b9b2f1dddaae01380e9e85f2e3b77b479cbc671f38f0f461301e79fe186082b01878ed64674dfa025ef35f59a1c17be923eaa99a62a867a31a6d31fd3e07f34665dfe693793ac865100791717d90d21bb4ab7ebaebde4e42206823239f3ebc0f5bd076c0e2cb2f061dde57c8f8fc48202b96e3dee798560944e42572ccdce447c8a1368fcf76217a86ffba22db71ea0c822581d1df134f095d3514f978c7e233fb669c1a4bc864dda1ff49304ff737ae73ca8dbd7602b3a1fa916ca54610a2a2324046b9306bb45fa59ca76f6584492733c9d481b6618f756311be808fbf78aaf6de4ce44ff7b0d3e0f3e018dc4853798f1b286e5505e4de3f71e8a5e66b4e57890b47b2793987be0e43ac21a8abac1f39c89e97352c6a1fc1c51d0b6de086733bd100fbb9d864ff0b8e31d9dad170d65686add9a7016d8e33460c05d492d279bea1e56b5f24d262e146b5f1b16462cec1657c9b7c49a572d014d1a5a27fddb151f2868f087c345544ba6275b318e14d286462d4a38d4022fefa39475f3cfcf081c85cc0a501eaeba12369c95ba2ee7fde8d4f5b60b62f1d80f912929a2553ebc3389ee0f8830b7cf63207262d5e18c3eccc8c56a79cd88675de9f51da15d521fef9af3c46811e6bfbbf2f592281f3d223b7db2a1a6c46828ad029280e3a4ac3695bbc405a72446aa5553457c193c0c4fecf63b848ede15748030791597b4ed27d9cb8b5da692256143e87d9423732928dc7760abbe2f52d09030dc49e217347e526ffb6de48fc8a009e8c8e606253fa11ffeb757563f4c83a9ec7cfb7e831fa5861f1525dcd01005fae9f7c58d3f903fbfcde7a8091a0fc1bbf9ed46f3e04d0674c9ba4663099396e532d4315965aa6bbce6b2cee72733a8f186390a614f20b96dc38a2be87c47821e8ee889696228f90125a6630ed96dbd71dd39ab37ef2b355e937643f66cdabe6d594c8b48b869affb1a67ec2dcddc2c25d6fa0a04ad2719b0c9b4ca84599a590666b5a15efe28fecf3e372d623a47cd3a5f067b81989221d77e7c1faef06445e9fa5b3bb17ad586ea821674fcba16c6f18e5206029de61c6665bfc5227c3a6d98d4d9f1794b3332091da3e35f53fba6ed9ff1c43fa49a050a935780cf28ca46f9999231f8fcc7fe89eabd17e21f23fe72cde74b69469ea5ec40a307425923d9ad2bebabde485411735cc8362a880cafd294901e7c05984b9b601fa903db3804519bf597962b04c48e2066b71a1e4a9c4a86927eaad472a389d41d29c2ca1d5775f0364950bd6258a12720a37cd0ee57ec76533c579eaaaab0aa44aa3a98cde30871ee833f3e4cfa7dd2c9a02c42ee3916b9c7a5bbaf06c14e55b4b63e3514f4101fb4d2237ec7beb6f425208240df38f01abaa388b6adf56489521ee4938442a62ec9836aa1820c1e23c8a7d24c3b74fe3c1dca49c75d161966f047052e7c4240b8687c6da7ca455c97c0aeb8eb8713a58b63f717a76c85fa5daad8b0d86b897c60b5094da0403e00c3959bcf6ccd5b0015d2b5c1963a5f8583aab8762081aae8b5e290a6bf0f0b0f0975bd47481aafe4eab5dc30ef0bf9a77dca3f9fa30c64f2a93091e7fde23142e4e7b6bd469d098dc9f4d94df89594c47574cb37e40544652737b9f21ff79b5bf98c8ddd9c105243c2a200970867caf1ab6923ece3b56248a63107444378be26fd165f58cc835c8c3a4b3fc07809a8201c6efca75be441b19e679a510872d3b54e3ab6958ca469da03047d15190591e0414bfe0a2d2e14b5aee1bdaa5ba97aaf90f5d6dc83ed8424b5ccb7229e21abc72884d01a6d8c94a860aa26c60a792029f12c1f1761a75ac6f7e202e9800373bb9c45d21249bb14602b6d19d49dfcdf13aa2df84cb1fac14f5ab7faad1cd897ca7eeee85b96470f9ac34c078acab5e0e22c8794d5de95cffd57de0a21060e347cc308daa6fb4865428b08af2032446a28e4ea953d238bf4e0f3ed2d011ab87d9594656bd9717bb320423238aea65f486703c913b28f3b3044032a428660e7c9c0221401aae4d2b8ab505498a78e4d05578a8131acc9985e6712e91bf9411ea932f6b77f9a54294eafeca1cad9d803ca2d2f6aa3024d6865c312e12549f5bb28927d2793fc7a6899a666def7df545a42d336c41e6cd8b7ff8ccf9bf7b10f85dd817ed3791f857900c9d68463bbad0a17363311432ac09f92cee9a123fddf8f6283cfaa99f47de81ad36eff7b3345bd46821e6a0334641d16a3bc2cc46f2289c667e962871210dd1ef1fa86ef230adad7e324574fdeaa1545f81886456434db37d02d81a7fb2b6da1c81622e910145b2d745c1b7060b02bb7bb9838e698ee5d37386c5dc1de82a1d0a78938ccd8209eb3507b80c5d1c903fb48b72dd8008e688e1c95707047ec35969f390e5f33e31a82087aef893acfc0d2ba3be3569c418f16814829607b9838ec185cbc5c8d7b386fc50888ba6bc3f1be806b9e5baec0a4bd8caa5220f72cdcd29714ea057505957f810101b5e5bbc8c1932fb065ffa4b224a5ce859e646a71aeca96f637e33f380bc9c1aa99b91bfa4c5e71abb95f41b254be41a8e997f36bbf100677ec688bb4322d096a681d3d306c13aece9a1cb699fd6f9914d2f95e41c0234ddacbd11b28d36ab24d1ffd6f93cee145e7734ad3758aac661fe05cd9bbe6c7c4a00df2ee80d64f9e62c6c5eaf5212b6e557bd084b3823a36d11d1ddd603710e9157111c9ff56b144247681013d243b5d9f080f24a6fd043565c6c59f8b00fbe91e49e3b5bbe2eba99f72ffa0fb1f4184a5dab0f404fba2832c37d8cd3ea56b788892534f76e3c92c77a91b5a1968568217caecae2ad7fd63d3bd9c6232ba1a5aae793859960bf068e7ea66a04ec8dda6ff2f719c0f0dde392b0ae0c6b1b145ec967235d60374c769a5abde46b3e376433c9279592abf57b839ac9a654250b0e5b131b6c4070747f51a5d5c20bc49b51605b0770d0ea6f39a90cf5fdf2584c2fffd687b82b3d8785550da1964bb9edfac1d3ef67a4a0fa9db2740f77f37ffba31ff8ad9a69b3bd036335d3dbf93b2fc0bea0ba1c5b264c46193b832e86945f42ab941c9b584d70c7a368120d2407999475b7b041f5a36303090d614500c4765ea25fb4406e6624aeef4900653e0cedfe47a29eb35ac7b9fb58b0e5392cc2576440ab01d256467fa0f70ea57e4fce62658c870db685a0f3b5dbd565710298ef3a205d6790b992cdc87746ce842fafef65bc2d4aefb02eb04be9b5339a563b7acb5dca8269939a4456109a5631661255b3adb1f69b201d42aa1295bf9e71d360b849c452165f4a4666d610913fd036cfe0eda907b891398f27ecbbf0a338793b7533c8bde5b6bc2e5c2a84988724172aac6ab705e6a38d6cffd216dc4b4cf36373b7ab9392f14956aed3b8da68ef0176df9e65a03060a2f470011a3932f2caba9b28989642ae86ef1384c0ec9c5877c74cfdda1d6afb9283332320b66e2f757a1fa6c835ececb087f472b9daa29075286e2236d2bf9a51ab40f7bd11a9d6c3c0dc91835859b27669215e2a071d272d339ed424625963ba7a9947d2697738f36736ad75e0591996993162b469b5e8792334ccb9e1071f1fbfc660f3d69e74695f1399600d190528bff74bda8e8a9ff2e281f9120baf9f0fe15c5b2c81d6fcae7a6f1d3d20445ba4d88f33a18290fb370b2eebeb043f049a09ece5199dd214841a83898e91740ef250604ac855bbedf20bca2f03038685c76d544c16c382c1d145f5b7595c0e300d81c1a913ff0ead9cb982019b97f62e1265408e91a0f0f4f4af456969d6e4e335f87e79c7998c1588274dbef938e01919d535edffa91d80e59340606b0c468f47c6f8b0b9e39791fde63258682bbec0951f125ba2a3417d69423a297c58cb9bd569b644f971a5de1c768d85283a88f077c608b144abdf933d26b3e4a044ab2fa3bf359284bf8ec448642f9d853db2698512907f8fab161b360dfc4d856711a811c5e4b3905e63bedc3d886bbbcc6431350b096778a57c43a9ef179999078d7a57d2cb4879b9ad3e830976680406016c2e1f1f3446728250110ccb258266d82d4d2fbc195086b24404278fb5ea0acb6b53535ab7a7a1dd71c7c3b8b4bb07dadbcba6ea361724999dbd649c94d258b990222f121707f2f43a218ed7b1689018fb75b933dc55e88cf13f1c4457dead6df1763bb1adad8ed144a0a88205bdf67fac2db189ceb3d68a66cb334ef1d0799a2f0d8930ff3bb2bc9e972080261b71992aba099e3f230bc91cfda812b3880d4591b572bc758624af87fd1e3600b57ab5b25fc1f0f4f678ec12ff761c286c224274b6c75ccbc428b4e251cd8460df336a3ba3f85914bfc94925c92ba91851041a739ff0e05009e1acc6d03734166268c9a0facf39949d0b9f77e43a8bae3d7aaa22856128f5979550787357909d6dab7a1c2f4f5ad90628bed14a8414c7a6e616949d3c166d780fc3c9ccdae30afb18fceb536caad906fa5ef70dd52d1a4055b6eabf4d84b4fbdaa00fb2e06dafbc4fe4ad82fc2509017864d39b4571419033302d3a03ca6f66c373817d7545ec347415118b65d3756b4c84662156aa4b1f5f07287e1b2f1f67e860f662f520d2b26b605d3cc678abea3d0235ef88d37e7f6cad29798d1b4d4f7caa47e69108f59c59d3cb49efc33f45f73e60c6947522c858daacf6a27cfc055c7bfcfacd01edc7395e7cf68abe40d8af3b55efbe537b0fe6a41c3c4e07d491e047a1e7cff9ce953e3da6753ace954cb704c87f65af7f94dbb3ed58f9ca3b5dee9f035bb0ddedb6cf200fe6cc6a5077c5542d62e01f8912f8e9f751bf6753bee895a933f6a5b0e72a2fea783b3489ffee5dda30635644ee0a96775dd454d5db0cd6e11f7cd9f8453632f3755aaa64c0d2a0c0d2fa1c2688acedc5272b3fe09954d0d7748b921d4c6d18ebce050d8a5bc3ab276315c8d198b50ae0d23223f46991a261bf0dd21d2e5113a66f6c9ef975ee7a58024671c3f3642913e2967b98a93481063fde45ec313ae6bb9aca0914a044730208efe81c84739384344b4845491198b386a02adf02f88e14042e2fb56ff0575984994bcf9ef4814d0de1f308d4921cfc3537326f9e7a54f413e0fb7f8e017d29cd4472efbe5bc2c086ca2cb6c0f5b1175650f126aa2120f25a240a6db9d8020aa2b4b97a827e6baeb0cc8af4bd88e6b27b81b644b065e8fbdfd13b890e1df5fb8e5e41ded7f423068eb0e56fe04d1537bafe60da55de581cb1766138f84814c423840aece9f074495f47462288d6b1ed7d1ccb1482acf6bed2f7263fa4ace93b6ec36790beed2f82817f44610ff469bde31d94a2656da47ccf227036e15ebd1675fcfed6db09ac351387fb49e183a29cc4232033ccf448522b65b4398a3d02f13a349c96d1b91359ce518ec718407e58a62b4456a7adeb770cdc59aa13f1cc2474775481a47bdda58ae7e90891a703280c6c141a5319d5831baf4e133ab43d752df4e80b76fd4c5744c34b7a3002cf890146f302b2df5db04b66baca964285de47768c398d5b715fd0d7d2c46834b33acea05db55e706a1ae33ee43251ab120f2889bbcb6c620bdeac3827d64420ba9bf6ba080db7eb5094ef2fbc63b947d7f8b19b646a1e8dabef546aa2ec43a47934088e46199ebdee36ef46caa1b6504b77394d47b9232fb6ca32d55fe29f4949de384a0d579e785f6ba7787eb3fc6579af50eba088e0657f421f37f767413410b510d818c899e348eaefff6cabc130b889756b40104de7911b631e5438f059531e1ce6fbc638bf48746f2e088dcd563da6562520822f39328b9c192788c8e70afb4b3d4c1bee039730753690276a241062048e1e4248ca9ab56ef6dd230ed414748f709042e32ee8ff290ff2ca46c83bbda9d3969f241e902add3444d21b06c06920e7d3c1e08bd1c94a7eb88f520153d792bc691165deb5a93c5373e8c21902456a16f78c823a45c0a67d76e775d408149f8762d8806535c61c0d11c57e8e7d357a2e04eaaa5c93fee6c54772e4163211602ab4a5c87d4609721f6ec8dcf83786427bdf090ca0a409bc2ddfe0a6bfb6a3fea2bd22869327d76f5766b6e6f706ab266eb08cc16033f88d3da658900a20e14defaf2b4810ce05b8cb093348a0f67b9a1af4100114e8a9ece78c5a569e0f6bfec406776577f91cc3ad1b8e7a3fef4db44ad00ed1ff67786de157ce9fa93db63c017c6ffa15afbd2226ad841fd013abd8561148cbdde0975b229d10ea68fae72581bcb3c794fa0f34455358bb902739a0bce550c7aa28f8e2199a743e0e4916b047d3badcb49d9b62bf79d99bd06e3d618238f4776ef79d8eca0138937000ef4a2abda218c8ebdf2cb7d3fdfd61cfbd9b4abee53bc316316358953dd64dfeec59cacffc7962bfeaa771411c45733b860113adef63e38e6248a9bd17b45aba05bb1c4e27a0f9ff171344a92328e4b8cad03b4245f178e6286cbc3feb21a4b03f9c57316a686955754dde6ecc0f1e4eb3e4559d3bccf043d613ce1a55c14f09c519ea19984ff80432515b7621d8d49187812b281b20a149dbf7c480d12ceafad857478c8665254105ede426f54432baef3f26b513ebf2b21f98f866112db57d77b0a44f811a004838e1961b294f05a9f205cf772e8fcd6134981bbc3b2b401d8dd6bf12c896e13984ef5083b6d8f1a372b2f741bc5f4245ce2dacd747266d523a1749283b93722f19e6b86968095a77f46c33ecaa0d15b19e4ac5feb963857edc4ac505cbc7816d1222cd9cc1730cd7b8007e700350087b6723cc348e1f4952bf488593efe08637ea30a8eb0a1cd1a76228b46aebc384178da0a6ad15b31aab33683a69a4afab2606292f1d7b9bf725bc195b88ba88d2a9221e6c35372d0cd64fa68d6edaa8a0e03dba08aa6c27b83b26a129d0ade3f9adf0dd622899ac718e91b8727da9a806052bbb707f56036b6e47bca68721dc47c7b04cffc70faf3f13bcabe8c6fb018501a7dbfe0fce4590e0031376eed94c98c9e5b1431bc0d90a8e8aaf99b3171ee901826e6bfa969123be029b4243233055c67d52c99890b81090adf87648c31e8b79fc5400d74f59b20566cf2380b5463048200fbdecc40fadfaa4d2afffdc66dd49af86e1e51fb97be410c6e8fce3d800b02638b625cd24e7bc7f534dfc81e1acca28a24cf71ff3f3b86ecc8bbfe3aa4451bf15241b667a33fc259b651833c22f1e1427676cb26da41c8c11edf38b428269981f7c5b8c3cc8985f840a0e975684ae8ce5534bdc0aeca708d6e6d45827afc9045b4ade4f70b419edb4539056ef2ab1c2a190d894779ade3eb60898c2d9c907876f4868460b154fc0457fdf5556bdcf6a44f0b642089fe1e12bdf7b16f40c84fb877ab5a0e038988309b595dae5f10b2f6682a511feaab510ec9d85ed48567c4d1677f85b7d980b2f0bd368b0fb4e5868930137a9e044f055c8376b770b3f772e55e5d8a4251d60ed771883edfd9b42fa61464a207e2fe8df89fbc9e41a7b692237de70127d540350b1ea7dad89933f984be8686ac4e818d15d4881c7490f4db906463b5bbc2243d9145061ba04380970f20a63ed14e4c294fd882993221426dca57fd84364071d4e4cc90f9dcdcaae0938747e0abe105cded08df221319ff6dfc2d67831ea3edd0da70ee74cf8656c712480b143ae5d4c3d74db6523058657027a3bafc23b08da7f0d75ce81511187dc3099125ce27bf9997d80e1fb8cff407299da846630f18e40e95dc0b05d6e5821c65fff9fcb8ece39519e9181f896ec94597dc7494a4e26f88dde353dc2d292744d5db4b3006b554820ecff57a3a6420636d0b19586a4db31fcdbb185be40a83ac9ad2f18e1c23989714b73881f641a3092017a6353a1fc1964a2d19315a71723964962ac205c1ae88ee887ac90dbc30bc2a61b049f07d1c7c8cad8a71de9d2bf53a3fca2788b2b6460c3c4f5415fc9fe7f555e199aa56804d81d60832fa3283c359fc20a5a2df314db552e272df84831a262abfaf7b1719cd11843613f3f6844b7caabc15c920c2ceb1419f45550d32cb47e56f55f2b67059c2e73055981a68261b1b66a77c0b0f18c3f016165c762bb283079151b35269aba37ae3355671f5f8ca0af1ca0bca30ac21029bfa90543ece6d0ec617d4d2b9dc7c982701c4c9d116caa7da9409b2795157e02c0481d0f8711075a0472879b25db5ba9d87f88c8576ffad92bffb7564db3a25086ece99bd653cb506154f2ea382526428df78dc90c60fc6e4f88984a3c5ec2c7a3db6a041f2757a7a247a9972f2fdfaaa34ea10829452322f92690f6ddac172605e8924d6029c9c30bdee92934dbe00f7de97389d23449ed296553ce39855e7b768ab9fa4982e711ff600e27dce7bb10e5368a76ad0c245b2caaa460b44937ab1c282ba985a03bd3401d5ad149964c9127f48e7db7f52216b8e4b67081623b6252d1943f1f642890ff0643a6bc146d06e5d9050bc878973cffb7682a2f710c6627fe12e319407099fbafd08cc705a95a1cc0e8ff489cf0accb5cb9b1ea04c32bd2d5f4b9202276e9fbfd2669dc1e5eeb883c908804fe6b1bb7fe71c44468bef505f1ed9f37e0e4f70cb1109c3590c9893dc9feb62ad3219881f763f3c95c60780dfb7105e5558ad042eb94f7f375c24510b23d59e08b446d9562acd91867862b8c4234de68ec57df5fac3752e66b92f41e3303bbb1e1c44dacd3afa5d882afe635f0c8b4cb64f599a6009e5f89500066c6a89b92d19a55e05bf1fff7e292ff9a33160e65a4a5e8fd75ab82b0e155f5b4e356b8268d2dbed1f39693daf8f8ec24f761df7ee24ec98dd7aa8a03fcf7ead84f48561b673fc4f9db8158430f0fb3454c3b15e8b2d0c405572dc21449418521daa27236d784e65960092da04aa79cedf8fc04ec202430181b08b1dcdecfc4fdf6fac72686eb5a8cceee706c8c0e9a01129709ab7d4b1ecc3fb03796a9866d56f39c3222e7145508fed858d9738b28d15063a5013d29f45b706b3e5ae316cf3a015e3bbfa39074bcc8e496332430bb9eff76d358417885c67006ef4c12c2eacc91639a8f3058f482aba3c4773b33191d39dcfeacea2c2bc8de5b4f897c6ad0d5e2e715afbd80750036b13625fd2383221d99646b9b660ffc33cf3f837aeb8fae1d859e605e8530f2526a97ed9d74447833f9eaa077c5869db59df35a0ec4df6037fbace2641f679ab3da53cc0c8536eb6a783bef4e1fd53c13354c41eb24a135079d82fcd02af1e362a5e8589ccb2693624d3c2c464dea4c5631fa7c25ebd1e6674a23baf83ca57c4ac4a21f5bf3b73d6e3c91bb3118527043b3bca043c6fecb42fc35623de9c6bc4d46305a2717c42cc57201e4e4fb275ac01587f381d7409990fcdd263afb2d53ed1d3fef65f9dcc97837fa3dc25ad57cbd0bf8e00ac3344a18c7f6cd83d6a5a97e84046dabda5d4365b785637a6ed4e2c9dc3e42e4a2d8a4425f1ad8a5c929d2df73d6c5faf8178b920d00bd6f5e8aad297c10a58797e2ab986d0523e7f49ea5a3455a93398b672e23c06f671c60d290eb76a534648dfd35e5b8b264f47d5f8b5330fc266607398a1c82dcd10746264141c56b1fcd9931781e11969aaf2d639ca7f1261a905e4a088490f1ac359b2c117438d9125f0fc96e918eeef718e525b11924eeebe079e4d83104aa7f3c5b58cd6f28a35873cdf5c59664fbc4bacf73d93d1eb0ca4078115deb75433879f0cdb13b246e6df3f0f16e51a1ad4de74e2b327b6b145ac54308f94df7a5f6509625c7e7a686f635f3a563a7569fe8ae6109d4281c3f59bb7c56dd39b8a7e60b02993a0ab371b45b883da8c865424d21450b52c16d6910d5436fc2ea5a4bcf093453218fee35853c27edcadc7720838f93184bb5ad96c48cdaaa389f269087718b6f164bf49d53a0fc1bce174196ae5e1af16b78b537f75197377247baf3c8402efc28c49a054f2e3fcb01ce3eedb518e22463e3e23767bcd415ef61e9c107abb2c89a3796dc381835c7bc2208e9f5167ef978a1361e98c73c6ced8f2ccd0d3a3e80716c44f111fee5386af599759e17b28e3f8768da0b94cd974c5315b3cc01ea5b1d15b2699485f4520f86ed1b77d09058beca08976517c741ee7bea1ba08d0629cc191da404e0e828b17188968d971a9d85040840303e2124ccb2367bc2a42a5ae61912c3813e2e2e49417791f826f67e7d8dff83527f8283a7be0625b13ffa1fd237ce5732f0bb0ca16417ac3e03a463628e39498c284b8a8499a9628d7e1ed8dfa4907aff312aa3f6daf5747cdce7b9d4f02295e028059a9a19467c500ce0e2b6e5f1e904c0263c6152e09192d69d170188a8fbc240872d62a80fefabb306be0ecbacaa417ba881f9a37dec6160dae48a7ea9b900cafc7e4f4a94e2425a84a248deb6d73238d592f5ebdab1ccbc0c0aa9aac1fee9bb7fa960948b32460e53e462a21040637a7ec1b3eb570928b103ee2cd2ba91b7b5994ef281c78a1846cc85602dbadee283421073f537a1398bf4d5ccd27d83c4c6fdfa6152d0cb8ef45777a73a97bef686521975f1bf9f6ea27b749837f7bfbfa7b5736a5a15194f656c8a69fd65b2617e9f39cb3d0daa8bc7641560d7c76bba3f91d301f9fc8500224c018ad19b0d46f69ae8d1726bbb9858b6a73b672aacca54ab908b21b7ebde000ecf4759c1cbe01e5d423641cf4a0b1422a32c368f2b3fb0c58a242dc988a7b2726478bb4706948ddfebddc1cfdad5b18fa65e1b0438aca916c4d99c204b3b3b4f7d9e705573d09f4119f4a18c061fcf7daf98cf7ab86fa5c6f33dbd93e14288d0e074a5a8966bcef68907e8aeac5ac5669b6beec76410007fcd306e7f39dd98e4bf64154e75181477b045662720fcfac53f80164b2782d3250480b800e0e4067d94b55c3d4c3b2e6d6d28ae789600125244af95857688eaecb501e291facb3563cf6011dada0c75505608caeaa6ca976712960837b709b60871502b52a9d0c62751d0ddffc6d76b202cfac95d7a56b5f257675bbdbe301765354580597321be052db37a784d9726828e6064cf5a0002f365a55b5bcb7064c7f25c05c2b0daea9e6653e4d3ff1714ed29eb4b94a03fa858c2e0acf144ca1bf2e2baa57712f99911c7bff9ddd509b82b37f04aaaf9cdebce48d696352d079c61351b9ad07cbec158f8cde317ec1de9c295a89c37413eb6415ba28577e6cee8dfdb5ccacb4a207fdb567f2c7a50fd36424f5250345dcc9e2d34da72da9c7847f58d83c645c92d217523fe1b19df63af47b33b7ea00fbde9fd10bd883b88de46c64ab342b284564ca4e96eaea653dc2695089f4cfcffb287400f2f0746ac04acbcd65db55c1567808f0b2b493e0bc1161cb586d4c7c7e5cb425fef68dfe985ea1f7390c43a60910fe9abb74ce0294eeed146b51893a8c405787e6fcc52dfe6df1b25ce9bf35ed7edc361d53e7498759b9fb50fc8f4200064e21d3a0b591e897e87bf4d5dff8b42633ccb52f13a36339ef1d3013e4d1bfbd866a9dbcb24f3fdeaa46cf4f53930f44b8166326959d8844681d6a75ad0b587ccec9be685a05cf84300b31cf3d53fb7cf51345bb5f82b501dfed10026c576a0c67891dd908ef519d6f0d5822b55e7c676863998560fa86dc2194761fe6acb55573c81c7295bb09d0e718661cb9904393c8cd32abde0ef92493f0450ecf3549e3da47841ceb2c5f850d0af4772c7089f9e81f6d1bda209154d62cbceaf4b4a393ea6c19976da10958924db72657accf5284a0abd42a85717baa015e1550d4409bf75ca676fb949163310c28347b7df5882b8d0e808604f7442182ad271d967570a9ee382189791e2124ce77e8c50c42596a8bf67eba3ab04f6ccca0c9d5560e9e4b5cd0f837e137f0dc0773075d343ab3db96f12bd1ebf5b255fc4d70a0f7c08ad5abde666b86f5656d0364ff280a3a792e741f56c2883151ebe251247b48d7d58d299aa4bdd98374b7211534f553ca9f6e6ab29333d03ebb55a88fa351302530c072bacef0ef3c2e12e5009eaea1e7eb3ca9459225b484f88daeac6b0ae7e306521920a580386b08c38e3f1f6fa8b65340e617080026d8a0acac4d5bdc9b97d142aaa5296a692d182e81898cb996e06df2eb8c83e13c1b964e4633c2653c1725e879e698de2215640414610d82604d640f944f23c2a7fdb670750b72d5fce115b13ac2c6a001e3add4df5125c7721adbb87071ce49c60a80a0b1929884ae2a663ad6cf354dff37a4d51c97066fd4b4ea1051d6ca4f085723f4abbfa138a6f51b3f1599bbe6a90d4c9e2a8b0f212bcbca73f19bb7049cfd4f0f61bdca7f263ad83bea8bce7d0e4669a47d432af970141d6a8b32f6b263479708a0dc9df0202232d0c0928d88f7772ba83353bc37db5b0efd4046578d91c43dbba27fda5c6bc57a8a7555ee105d0d84522fe5027bfdfdb722a45318401f43fc25d0bc280f35fe3ecfdbc7df20a37264acfcd32c2873281ad3eaf99f21cb2d3f4ea670939d8e79287749f21bf148ab831340a377ec156dc17af563bd42c53386137246caf2955b035517716e287af9770e2742445b876272e67fce04f933b9fce00c072e1bbb0990fe925293bf0bbcf09929717b59716543dee14c68319a58a09577ba4760b04fdf6ed98887545b6b385b977dcd8679d030f0f03b39fa3eaf168589e5a5200caf8feaa67bf3f062fc330570826f59e8466caf11a715e713a1730f68ad25d743f8ea36b760d064f5a8fc0092709b97a751592772f05dd95b8a36a25ab6d6b97b767c33b55e59c2bc13138760124dbff640b7d165e51f40e35bc869f9b603f6569d81c979dee6c3e22e4d655914d1b0bbd385521c40cb416ef324530682a4326dc136d5848015ed0bca7cb2ff04da791ee4e8cb81574b7f3fdb91168306839b1db1dc4fe816b25c7cbb0a1e82c507c73a59df5c59a99799aa3127f209e761ed244837adc591b8390433acd490869c153730b01b247fdd30f42735bd27c8dee09adc3837f95ddf7d5adacb8f31f5f3325b42e43c893da6b226c49bdc39be288059adc9bade04013ff8c33100ff332f63589310f210f04b66a60614514dfc5a50fc8badc4ba33e39647391681c95b4a55507ee78ad3842df0426de5577b6742b4518e472349622d7eb053ce0a8700d4b432fa798d96e5c8d82dd4aa5a4c23c57c9646f13c58f204ab7e93f7cdfcd44b3e0f5fed9351681cd6f1e934edcf649020c3407c9a6d25","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"6fcc7e1548c3beea4610469ea013ca4a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
