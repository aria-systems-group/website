<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"58a01b6223db504cac98dafa77fd7e67b1cdc7309c7857195858fc9b118aa1243c8682082b83daa03b7187304913286fef5e63296df91ed7f90fe13f2538036aac4abc35624aa69fcbc2e79387bf1f6d18b0ef621ab0cc3636aab2096fe6e6957e3f9b49557d267b5ee667aebcff958ee21604823951ad2eea8743ea32f46f494bea398c24a46889626381ff4164a1411f1f6f92d8e245daa3e026519707438e45eeeab5f230bd56166a97d809175d2503d5f52d67ce1b6f16a9a5023c409244ecea379c9ddcd1781f09a54382ad0ef71d494632c7a2a0701be9e5aa8b38e441a607d30d9e2a77403940d8ef4ffe89bdf5b80f93524101af8dd15ef33ac733260639d68c53e3eb4824c8c39f7830aa25b90923026352e3f8577619b83eaed6ecc3b03c1a43cf0a23ce23919f7114af5e9becc37ee6b7014a476a00d14b509b53d10ab047d0aeeac83efa44a7c02720c393fbcf56b4ff3851ac3cd9548f2e1c2f155346fa77074035c6e8a4b4d12de82269753e230cb1403c440e77bd8cb251a308a63d99f619ea02b37bb2be7e47d730b85445cabc44dd47f9acb939afd3e59097f8ccc6f742383c691f40b412cddf24d93d5a580858652bf8bb32db2d8695408e4b8751ad590ba0c1dc865d65e74b5a02739a89eeb130a7231cd8d05ad977968cddf0c0058fde6d98f5afadb7f4f433295e0cfc22f57c21c2d6b2cd2e48ca1386301d259c3f5a496a5a8a053e4bde6f4c8904b559cd0e81d8062f621ebe1fb39c3a45c1c1f40d574638d46707bb26038914d2352541ccf2fdaa3944666e55019021996599186cfa5a822dcd62e4f7b7e6ec11afc50c0da9bfb4fa381120d4330a38b5ed020cf3751f310b6b623ed8e5c28436607b938478a5c827fe7801a1a3eec007bd0ec7cc719c9869be75978152e5cb364864dea3ee07430aa15d224d384490e70f37966110687747d1ceb17f9c63655f66f85c9ac229491a274f323fd94a7c1b7c2b3de27731a9e1ebd5d35170733f6504551f7136f9e5f9cee29901ae4b35ca71d81a5a82f7b01bbf1326ca6fac7a96282a17018b5bb121a1b0053deb4fe6460b609c0c84cc08e18a0b999580b71981cd63c2b36bb242b68715d83bb6445adac2da84b1bbb2168c5c360056fe50948edb24f2d053cb9f4d462ea8bbf9cd3484e0dafdc756c7294d5e9c4c3fe61ffe60cc79082c1db8a29b5c85924f2eb86b83c4d3a63ef05331b5131c1e758f3d7a430b950a967f19b3dd9179d8c08aedb1ea166ac89d6d37ff94f44fda0530eebdf5a446af71a52d9cfefe8ae829febd68a4fbedab9bd2a8eb76538ed3b067072ac4bdd0a72e6ebb23381d4423ab77912b1d5f8ef9ac4dcf5ebf2e0f28d2d090a68cfcb27627b83f64b22101da78f46b3075fe2598b5d59fd81dd6937e9b989e8be37773882b23109a9d86bccdbb7f68fb963e1df9151a83435a88901fd1118b3c20c7cdf1806e1db22d98528d77eb2ed060ca362809eb0d8545be9e6e42c9eed3e5680a6e46cbfc94eda9cf092625b75ea3513dc8242edfaeb1c74239827ff9293b3790f2db9eb0363cb76254f6667a6fed6a5e34b7197595bfeeca7a6e3344e53d015a686f70f10ac2a5400bb2f115712b514bd87ba7518c17d41238724367ec3c90003202b7e8bc78acd49881b49b86afeaca2618f1338ac5561f807635becbd78fe1ab0cac8da47658c83ba3c3b972d865747402b7065fb306fc3c673744c44b13427e6910d7efa91cd33a81b062ac749a310c5f216790f76e291c0e9de291c6ae2f8aa49706c1208fa605e684c105605ad9948b27a0b3055b605db5c369062287bbad105431a829c91fab0eae7e5b87ea9a807d352bfdea69096df61575b8a4e8f5f07fe96e4d177eea0d54c58329e69b0e9079dc06fb42371f20d630493714eaa2dddb5bbf4cc46e509991408cff1069c1285eee6cbec228c98d09a40c3cd6dbe671462a769ff9284c9c0c8358527978f863d8d958ff532e52dbdd5f45b207f91e8e014b1c8dc05aa2baa94796c924feeb13057e5dec6773231d5930bf7c50eb435f0fa06c4e34add589c08561047a5cbb1559649dd455891f0a7abe363d8432298f15bb97b9354c76f20ac3f68e34803891bee4609c567821d6f75b2043f896b36ec57e712f2e8ce3399ae86e8e4e5ea68bb40d1e9e120261d03a1826cf0807e29f24dcdca902666b096938822d8b9a8b1c19fdc014473ff058aba78b17797476d07f2f1db611dd139b86b4951f8e3a19f998560e1f5b6f98669203a43a7d584529c72268e87a65eb1500329d1cec41b71df08053c0c5d148caf24800bf945c4e6510cb4aa8a839b4f00c436ed42efa5971cbf1df01d4a0f651605e56cbf45b7c78e9cb8da0c72f988ba6ac5197861ca1862fe2fd6764d9e1945f1dd15f030ddf4ff444f2f9fd64f2914cc53dffc26b04f30e399892dd90980e0975272a0708ae60d6ba2dc0d03c1cffbc5a7e816da6e1e95566ee2b20115b81ef05e884c55734320d93b129221741f1acb4d59954393c996f1a8410ac07f5b0890058e23d45d7f244622edb068ceb24cbf32ecd3703bffa456164720e55bd8d2d1901b498b8adaca365e2ccc1f16989cbea6cc1087f33d894c3be417a12526cbecd91adeb7b9647c378aede80cb49653c36090f51974c70059dba6adf379b77a47f4d48a5461fa60bc6f93c2abb791a7a7437c2550ac0f4f7bf390df74d217fd1502c3caaba86be18ca6df97471b27ad0a02c0291a5cdc8281968b3c063dd08a800e73464a0e35b7914f2b6d5e96bde444d768467d036ad0342010c8d92d571fad6f1a9946fe97ab77a4a3e9f3cbc3c39f9b75f841fb19ff43f46216f37c0194cf5d1f084e9d8b7c1dd2788fd358d6ce5edb0c205ddba219ca2f1a56e5495c0d492857ef9d0b61b0c467273757915d6f9b9c44b445cc3a3efe84aa68c67e73fcc1aa38942492baac245e5ce29505dc864adb3a8c655859ca0df554ed2804f2b9e1c9f1decedd3477f39d1f4f766b9d0b926277f9e57018d1e64669a6ac3de81430d9d9237d3c8877c908618e61e57b3c3b42cd65b9678f0908437c072726d947c4a0b65416247c7bfbc764dc56551964c7477623efa0bdcbd2d80f20d23b9e057c9677cf9c598982be24aa7ca35a9afd5042bd75e3d1d010c2f07892fc738c014488c61fc67c8f530ad523b66abc3968da9011679996a7ca6404366870782d0c606c4aac1e4e18628564406b64203f8478355e25870e228a8385bcb83c0639c5783b01c4510e6f0fd07c06351689f8269822014bfd39a3b0b8e564e82c04aeb0f0bba0ebfd45390064478fa6e7538b3cf548363e0a8d1bff54e71175acf4a34dedf9c1ea9a490944e23e71d1b8fc23d9368045f090a67025e6f5ddad77b520b239d37095e7bb0eaf28758fb88fe63d3e34f51727add8c8c456d5054a85b24a930e9d72fac3ad39a04a1de3e2c655e4a1cc463f0ba005992e9b5156eb674fb8680e6384b7ef65ebca7274e675a66ff8dc775f33c16ece6a5f5d18aac97013c2deb9f7199dee2bb7176f3439d33bb55f5e479a1161cd716d301f1292e2d9d6303c5a5d22babeb009c0a14895783a8e1f193ad06c84c1a9d5b088e301b723e628aa90594857f0c232d2e3a7313b3ec519f7f81e6190c7f95b925076438dd4d756ff67d7bbd13a11a90bf405c94c8b79cfe9f703c040e08464a150576b72694bb45e70ce6e8693e6aaff323a07d9354d5278e4c695b796c0ff966e5c72e7b9ca8ac1002278053bbb0a85700911393d487622bff79312992089ffcb967f1c3a52e644d5d427d5a5ee6b4437838997dd1f8b01b5310f5b1c4d2181094c7644fdfb9e214bf20b687cbbff7a69b43d7f7c4915306c8be64a2f62251dc6c1d47950e1f41e02d88b3c040d680991375f63427d870aac2f69c01bbc2bfdb400cc32f6e58c9081953c668d98ef2b7627adf0a9f8c30100fcdd7681163374ea6b0fe9e1ca905edee384197878f984327412cbf3251dcca7489e773e3a2fa04dab4a8987f45119ad30ada912214269718e2c56497aad8906d60b2a9c905df48737a171caa554488e00ad8af2bcc8aa36f92507c7fd772faac43896bbfa96524302962cfa66210e8ee16a5ac32e009e3eddeae3d50cf151e343f93dde39c3663f0ae3747784e712695824f4d087fefc1ead44d39019e6c4420c324481dafcab8188b0f99db3932de71b8e571ca7e3fef6871bccdfd95decf5e0a80479c82ec482bddf9adfa0fc96721ed2f70cfc419d04934356b58deff16b91aa3706e67b711e2859727985aa982c7c92df868a335175e5b4f0431893f336d2d16599fd98349099868aca05eab0ac17da19ca42a19fb20ea021a8170fe40c4912e33b38b4990aab42ed2483b9052a681314d729c107e1f39b6b559bb2daa4cc2ee2c7baf9b2b278dea249a351efbd6488e19ce5259e50e8510d6a26ae97be0c407b6fa85419baad5bb90ec1560786af1be78662b22b4aa701ba6c6b3ce6e173754594f6c713d1a2401d39a691fd905c9b59886c6dd2fac6854e8977038c0c222337d45f7af44ab78554de749db30f2b19b22cc9744a3f2ef429e9edc8532ec79d298f111999cf3aafd320edc7e7cd398a431b19b24728f36693e488fd84139373b4d653888cec2c27a25482fe2e551d9a3a5bf59a0953fa0161010e0c8154f49bc9426be556af733f7874dc22d001f1ebc0c29dfd624ce3811b48d1993c7ef680ea2422b8e9a9357796d84a6243bd58ef3e0ac3e46a10edebd0470f7797e764e489155145ebcc978096b899ff89dd2e7a238e61c583835650a0b38eea428634764d2c2f76ba0cfffc93922d2b7bfb30f4b38b887cc240eb4e01d37701a31153a87947ffdb1d06b5f24e4cabbff1c928b6cf3637b9f411b106a72b02dfbdc1c7e53068ad5480097e9e2aea962246842f33602045a38b2ee4cafd0706561217a9fe86bbba008bede75680be15daaf6999882d5636c84e208b3b13f5a75d66eeb31ffb26c4b2880569287798a884bb7ca8189504ace48626457857fe6953f4e8eb079c36ec6b75b0e158e3338cc7659557691c0559486e77b535a8cf904a699cdfe456b5c1394e2cd6f494d6a4a96a7da57264a6375fd62a61f6f934406914e63eff33b39dd3f7ba5388a9f3f4296c35ea0ad50393087c092c87c9c4ffeb374a6da51d91fad0f8b032dfc265ae6ef9abc65e727365cbec86d2a0e1a71fbbc660f624001f922c26032ae8e1391ceab5f54c619c0e413a563d65169a80b25e389a1de6bb8211c30c73c34d52d08e22a57cf2dcc5149fb08d9adcc1979c7975a75b1e857b5f1aa3ba6bf52e84556d1aa0c9bcc71dbe38442023ba0fecea4b1d26726820f70deb8443f7f688a19098dd3e11882080c2aa633ecc1908d1a7441a06c6ad158429576760b5d70785084e1d8a12ce649d3c9405d6c833026f746c9384332cf7c7647dd254f8d1671e4fa7de587d902b5e82d85467e37d3e7981baf6b0c6dd11f08d03fd4431170195d93acd27b384253d0540747f4530db7a70610a4a82d07fa672318ee0847d093b69cc1589ca1b9262781e5e4b135a9fe54b916f8086e3c272e6f22155e453cdaf60162924b9f37c6cb61eef86926db302024312279af588a4e8e045d81993d8027684031257e187dc2e9fd7e56a2da038a03e071c7ea1b4d286cbbf497646ec6b973471b41e8dc7db7e5e80030b7108f1fc754118e58c601bdc4224fade174997607f09b6aba87d3bb22f6d99b2620018660dd028361032fc41173a329a9a3449306bf73c8bc62ad92cf69d1efac81cda63ba845b8ba015edc86e649e24f5ddb925c6ed0143ddd09ff08a2ea8f61061e877c6ac9dc1950f6f145c0e427298acc39daa8389933402a1f722dd362891f5e806185acb885f5e94361a2da27e91ccd5f696869178f21dd30a869f39509e4f137f45b6f3a8b1661674e5ececc127790f08ca45ead537172bc21bf00559e3675ab128d5889b7790221c42526c8aa0ddecbc62bf43ed72806761eb1806ba98960d51b1a7c826383a091e1e23e39417ebcc6ea7a04ce404ca01ba99d78f437b14fe6eefb7667eca12574065f9b1d013b9eba94946e6aa04cff697fd9980b0c4005f1851825df506f83dc31dcb3f74bdf38bf0ccaf4b481d7420bd3b28af1b0579be7cba5327a8e1115c461a20936a51e05f8d87cd6c42eb5477d8f671884eab94ae0ae419d7c133bda37ef880a6b7340a314bcd1f47ac157013c926b0f2cc15721f79878f568906d11ce7e5d9387ae973c74d9232d706b3a6a063bdb3d7f6854735d2329c2331211c5c4a0b5270ef03dd86cf94b2bd99bfbf8382e74b9a4f4226c7a08f531cb59a3dd74628e135ab227354f799057d74861a8d283923e7e6f4735ca9d2c03ee86bcc4a47245c4fc7dd27e848d5df3109ae24748511409241989d6d077a6ae72fe075e43fd987ea210c0a6e4219aae249cf7ba267ddd7c21a460e80750d801e2203cdbc7b1eb42f137133a9249d7ad927b56f9b056f2a198736deac9d991ccd7feba543fa68d652dd6f7de69f6aac3d7de7af39fd8f7eb24c8fbbdd460bc5700f2769c6f022a2ebeb54947c35c02f42f0f7f474f146e5fee3147ec3c47ee3193e4a68efffba8e6da79f126774724a9491cdc7794ce828d30fdf9ddc29daa42fb090cc8dc014d9eeec75698b8084baa3ad5863335f1e343141b6a019bf9617fedf3d9e73779875020177856b33bcaf56fa2f0ff45952b4e3a4b0d1ab29c7bfc1c4df4b18cf08350b36dbd25cc1bd461b635539c5198335f69b3b55911704f7a420c481c52d6755a97ef3d47b404f06534b1bf4f7731f67b916ce4c90ab76db565facd2fe8f26a84788e487787af67158b5e4a1e1420d0af1a048e9a241f8531cbfaa30bfa567ba00501bb80a53d79f801e89c6a16e3012a27bc9f29d3f0e49d38f63a7c9ee4b64e5deac6739b96adaa0f77ffd828c11cf9d8d18ddad8b264ada4364ad608b95e8dc8468c9a5a8380fa0b8b00bec227894aef8cf15abe670a25d3cab78c89efec39126b1a15cc616add131e245aa5f4da1eee1fee8a7df025f6da14a41d68a5ed2e126c42669affc4673e936df42668b41ba59e75a5b78a45cd0f2e7d7387c44579a0d843c78c3ef2d371fbaeda3bf07251c9c93f6654cfece986632a85fb1c88d7ead5e5a93e47ce2d08efbfb72467c87cf4984708820b5acfba16ea189beea5cf0ee955c96cc7f9902a0790b95cc3752f160629d148d5b9184ed62a7018e9f04833861ad53df75e73a05af60fe075aa2bd01d9f844e2535e9200982c6a3c52587a03ec9cb3b8ef211a192354d703ad93904ec005dfce484a41fc8c2f08c972f83999147e8262a984409166716e6cd45efc4bd5a44073818ebb84bd5636f82f61a694e391cd71fc78f59b62bab86519442498d8680510e3ee1586df746fa9e4a1d1abee73a3cab49b3573607225c816514a74f6270fe6659ebe4821ea892e9a55cfec7d937baf04ed90712b9c42271bb86d281afc338d06fe26b4bc69a4561ccd148e31e3b88f77d41331ca127558a3b7d99bc2350dffe642482575fd9d835bd74f93c39b953fc5c7d756a409e21eb2bf1398b554124e0097e92dc93262b97cd2d1e981c446bfdae0ead54406f01b02d5aedeab1378ea2bf82201cfa2337d1737a87239dc39daad3380172ccf98e2e734b62639c0a0470e77f1557dd8b79c52b33fd321d2ba35b80494699322f96a2e11d15cd7f5ce38717e582e7e0601b0456b3513a22ca232b2e4181239a85eb941e334c0e913ae91481c314e90eade09bd35462e04576232ff6e0d777596c3758fc0eb26d4ca653558ca9e080323f92b34eb5066b43b9cbb809dfa21e92cc7d788845c644ca15c7c5691ed09fa4f8b3c3b8d06c53a3d6b1ce302a18a01b1b2190cd9a46c5fc915863e1bfdb5a340fe93639d778edf6c085b386b68d059ec2ba7ba5d11cc29f6f11e97954ee76be6b41232ee5d285fe0c488f9905115d7a818cb1d48a379ae41db5c7d2b03a473895d7d05131d4c7380311c3aecb264072d6d40bd59016d4d3f222850296b359be6c9248026ba7ba3ba9b189e07715821de5987db2c205d60d091a94e046f41a87861d0708a2b95cc65771ed80cad99c903de8f80cff5ee465a6fb4f7940ce8178e1fb681a22e2c7a0902d6c9030a2fcef1ca484d2f674ce10d838c0c83fe69813d5d2e8c1174df1da56fea060611ba6b802369eb8b94359c3d735d5f27de1f71396d7f51daa7e3e541a66d4726a84d9c4d7f0e9d225d6ec2f0db10fc2040fa9fa91943f209c01470acff986febf724974f867398296580bcf013b5b9f6671a07c7f2f3eff64659c206eaf4058333c531447d5fc015c2ae93ded2fce1bafc41115ad20eb70a57556de53f6c5b10fa776fff08529f1affc951eb2ad61c54161ac8e54a455199cd8dcdb8526b5507eac268333426a2b3a8124bfded40f0dc33ce2f75b3a74b93f74fc0d89a04d49533f6b927a6313d3874d4194ee299daa0779b0ae1c547a487537886e6977b707f7a58d2eeafb40cca76d67a78497be75080c5203b47a3ce73e4bd36781b32b501e7ff9943d1e2b93e8a2d2cf0da71c251072a10cc45d440ae13c7050c6712124965ba38eee990e900bc1b69d97ddb27de358e8adb0afd9883ffc1482818db0a0fc29773e51cbcb724d6a5404d99953c9191b53b00582cdd4b17fcc17b84a492345f1fbbe246f1d537ed6f435af260a68f2ba786e7ede10ad486664ee206f55ba799c6fcbe2cdbcb91efb62285f27fc69fb77c1d7c086cbfeb8a5bf8dcc7bc4006e3090d7a858d468a2112f8544ebb504f0b8416eeb430a60a4d063679423e839c0d2514c8cc4f723bcd39a1b8fe3ab0bbff3579b50b9dfb041adf17a9cc991d894770f6d4ba59598f02d3a561ee315080698912ee9417fe12b9b5d19d0f7846fda852e412cc2ce612198ae4e17bd532fa76b5a26c84d716fc5708e2b917d318859ed72b6a3a67a274d911097e6bbc41609137f5a092d573f09dcb3e0b2f12bf6354898433a0743ee585e058a59c4080099309bfdaedc45beb043cd6c4e068f0e20ad0942c82c92a0b798245d075477995545268c4b75d990d05959c282361a43a64184fc4436519d98629f4553c8e52b0a0dd1cde6b77ad3f5ca4eabe33886253a8b1c190ece1dfae429fc26314be0b113c2c93aea1c25c4d33794c5c4907c524112a98bf8fae54d1575c4e38211e64b37652e0511422f21b4faa7fc127f9b14ecee35ca13689fd450fd3f5d1f324867add94687c7071e68ebc93e7b0c5972328d56e0ded3af65becce12a984b40ef4d2978c969ed03c7001310527377cccd845d46dfe0dcc42dde597455a13b785a98e64a700ea42407befacf2e2c39ca66778993ac81f5d0e12fa22b9c2bf6a40fd8de4c435c1f9a9293c504492e29422e6797969690165db4d499c42c58c7a8e493e86a089d5f15a8df125a73b4f6bf4e5feb8437a695ae8350843df550c033c146baa1335d2ff3c2efe2a9fd52ec5e49965d49128778a7d565cd328a2dc7870cecfd29d08c721fbbb229385a468c921e11be41770055848917e579a41c07287f85588ca91a8fc69dd94df8a3220652913bccfdb9ed22889992640808b8a242b2021eb9515fa653cbc449f730d82a3527690a61016b2c7f633f9c3283c53381d64ac0113b6c8c3ab9292c4719d0ab99a7a672af53afc9b026f4cab8d8babe2a453819c8bddddf7b2654892aa58e82a91104b10c0c2967daa1194b09be466a6338b49f73e573aa60010248a817ab24501475ba266853de383ae868437bf429de45be3d012577ea0995a749f4fbf55de89e89b9707339340a89673abac04d4bfffbe1f15d629bd6eac69524fec2b19bd8851a903733bbb38fd019e6241a8c370d674b745be44b67e33bf7c74b43708ed9f4fef95a7663f3ede69b180adaf9eec5a92e9e0f36afb8cad53a997b2163419ac3a9c2ff9dec6e0ab78bee88b80da451ea71babcb177574c75338728c1a94c536ec19f529346f88ce19230029c46ba6c01c41aeb857fcc3bc8550e18dbeeae828cb17fc65cd0c6c6266b4094b8c2a1ce075a37de437657d804ec8a9bbf56b78b9648773652c8676e1d83528a2e3f52c9c6d6b8669f0313c562101db79cfac1581583bc7af851d59d4fd5cad40f7c93431169187120a92c1b5c1b03578bfe540379f996bf8f904cb96cfe5e7da419c8da300490e6cb2cccf2623cf54992455858bf2e86e1519c5e93fbbe6ecd81654dfd4fe1bf33ce87dc006685ed342fa4883fa6f4e0f7720272ee408d9e8a3dd19bd0930c88c7452713bdca7bcae62e0d06ea756183a8daa64ba4056ea7c018e8fb3cc190dd8d4f4e1191406cfd2498c83fe9320ba57c516436165d40849160fec6cbc9ae510277034425efe4daf262473ee4e83034eedadf8295f1c880edb8a4103eb9dc4018b07f22bb952a06ae4394b0f93544b1cd5299177366d2e35bb37ade870a8868014574c6c189e426703c85ee91b20210e1b05c6feb0699a580c66e9112198b00c18f9e125a3e14b56ac70b537ae71d405e6647665fbfa4c9c5b5cba8ce1fcb9b349f0727b44638e8075ae74f7d69e9e17e6a60183913934947f75bad58e295f2cf439afc60cdb7083f15e1d7fc377a575d22eb1ae4784a25112751837c384f35fac0bcdf4cb4c064146825238f4d5505b9a34e6c0bb2834509c6d7d2f18c61c5b6823c1a52468ddeffdad4150d73df875beae33f5c4b124130ac89127f550f6c954bce6cbcd6a7ed0bcff7dd74f6da26336f2936c7248bb2f67566e3ace4ce0977b74820ebb3fb59f1737e4657173d0ab2f32e079dee42a15e1f9215823af129c072ab8d09ff759b5b0b82a34134f95048316919adf52ad6b3532e3c1ebb77a6683e2e45013d0c34421d74ad6120b112639a0a1ad618d2e3afe92dd6d7567b7ebfd5963dbeb7c13aaba787421a151fdb3aa7ff3bedabc22543c2f1d9d02d2b61e08fd2646b4b316ac3ce36d2d09317f5160f21bcef4d51a22829caa7a7a60d36d5a288a55687e99468f812d19d2897b95c5bf311bd1249de25914d3c32f187ebf424a3e112f9a9949afb101a159cc1ac32364c462fab4ffe3a8d648e4e04695833e64b64cd07ab8e219f5eae839db75c060679102eeb598768ea9e84131dd13d5e0b3784709f680a3946b9f34a6c19f2c92dcb9bd8d88fcbdc248edfdffcd2b64f05ab57d6ed9ddb37b8c01f14b105bba509ebc87bca7245ce7ac18cca735e1eae149305f777ceda44c3a84cbf99696900471ecf353bad7a3c442a0ef716ac6e07e06a1a3b2f410f7dda3c59f6daf1e898557fb3041f386369ba652087718a9c3808f014288af6ca340bb06d36b3c178a51efc9fcc65da390c733e1f62e48de4fcb540541a195cf0af17f163b721227e3ad95fc723ed66539922093558deecda7b6b1691cdf7567718fbdaccc1e69b751eee964cd1befe45c4143228e77f9be207565441f7bdba31d17a8efea2e79ae410d7c50e86c846dbe3ff4430e9b3d0c34007bdc4ee125d46c3742ba5c56c2a7ce162bdf399c53ee9db032444cc903c3c4126cd36e65de7322596577c9c9e79ffa81dcd7e99db34552350b29c162bf81b02523cf4976bc74c42c6f609a9c108671c9861861423839bc267f332e7664d85d76ca0030ea02673238ed2236813e83b0ecab92698400d9ef9fbd1ed6e8f5c153bd496f5ed0301943abb3fc621738bbc519555da6ef5dec6670b228a8e4026fc42c2fb4d5c3eb3cfb6ceeb1cab40adb09da3751f84b80eb452a143b2cb502ea05e01f3e509d6126fc786e2928dc87acbd56e6aaef5ea2f070b4ab95cac009c24f7c5f0d74ce5d9d24bf44c21f98dc8f38e4c176569bd16d411d5d321d72d95b10430819be4d27837d1ca8a99385e98120e771d0044d0eaa087a3e17b0c99fec1b36df64e3bdc28a9aa2b1666a2b73caa6d51be3d802eb14dff7aa56183214b7ed1355cb4de17c154748602e73a587a51e4742f7913b3dad22409e160ea372c3990ffd367c5e13420b76e1b1183356d31af6cbdfe660fb1a68fcf0fdc9b7baf6ef3b47af7663e9cd10db56cc47dc9e9cc00306faa4e356e35d5d585e4fecbe47286bac4423bcfb822efaec0dff47ddaaff0aa532ac021d0c0bd8da6202ee6d87157d95e1b2173fb581fd82e4d2ff48efec341d7ec8d511d3e364a08ec3ac3f791061509fce38d2d899c4aa31422ae4579650c8ce423e8079c5febe8ed900f703728b8206fd7b2c30b9fd8cd369d6667618fde736e2fff4aec88815ad4050fdca5b98401a476169a4fa20a9164bd175017047b975de114043bf7001bce7e1f101987ceb773efdc486b73d9bdcbb8df96990c4c248f90f6eb9b307b3538736278b8c8395b4b27a6df8e8cb118e708967c402a725f5eb135a8221701238cd2ad2285ac55f39a958ab9267a234309753ca7f04bb90238a110ce04fb1ee92f61bf3102a1bf86316182a633ce4b0dfd6dcbd3ce962c5360c8e994f08f1f6f1d8ace763df4942e57049330f0a24232e9d7eef022448815e5ac0f15d9bdd328079e8c085e15884cafdc4dee09852085a59a0250853285b3ed2233a53f31a3a49a3da386f14ea72a136b06c06cf816741bddc01ecc67e6cb55c8ae012f98a71dd7fe0b13829c704e2c70710fe0747979926a1677c381710db3e67903d2b89e1cd4cad12f085d0a7adbcb855b67391052af2664992889b276ee8329dfdc012188db463c20f4ebbf77ad126efe4d69f685000ccfc032878db2c3b582fd839b9dd5619b586fdb56366a827247f1b4792da96f61715beca8ae1336e5694dce9498210ebbbf994f2dbe922b2ac8c1551d0d9fc87a52e0d7201fa27ef46e20cbf359bd1721ae5afc89c3f0d2a76e67275efb1687e81a3f583e69407653e9029482475c4661cdd62f762ecb999d2180fb0993e9e6bb86def68a841bdd641b140465ec5f1aba5ff4b0bf24621781dc827c44e68a24f12a76606993201f769cefd0cf06496eb10aab2cea8a1876a77c737d729a17452a3bc5881e7567ea7b6863a733e641059dbffbea035c6f7994100ef7bd12115768727c8d07d62aaacc51d4293614bcf0b69f99277059d19cd79effea028737deb7fc0d6961bec0a30f3c278196141b73cfed6efe1e51bb6db1d1a75dd2515b580207851c12ae686fa107646a986fffd45f65da8695965a9488e38c7bb12d6ebfd219793c0dee943b3f6b1eefde220e996750dc602907db92cb9b18d7e21b8199128b6c21db44cda7f37e09443b31ef697ba1eda7df5bcd6fb80f026bf2cdbac8e0459ac9e962e8eef08abe1b51361a0fc4f090d1c51b4f3cc80d855394d30348a149ed1fd2e4d82ae7eebc1d047199237e7c22f85683f8beb25e471d39c09d5a9cb0cfc1376b5820923673497f8fbb3d946c5d5580945f23eadedf5a7775e1cbba32d3beb95b4a172445e80f899a774c99d69cd937e6c53c9b11d1aae2a1522f306cfaf865e27c7d22de969197998f68230a4c7815a0a9e4078a825e2458cf5303f1d8a91e52729d9b698e4d83fb5b90ee8df69a61b17730ac59b66793aa66d11dca8b6351e08bd9a0d797cbe70c6268254adab74bb5bf9414e68c2117dcbb7f084a5bdfd4d5a847e49978bae7e364d5828b83d7001345a856e329e564d1602e52f241dec8a5318d6fb45904c6a31f6c597d26a37185b339614734cbc1a4b2e00f6a4a8c2d3e0741788395e876bec9bf7f260cc70100370f7b10c84e1834cd0bea4a5e4f8c9c63303565a4a76381e9874589d0b08b4855849a14ec3b6ecacee7d1f99c71f336b61e261eb47812d3800fd2f50beb6f655014b3332fd01e3a92c0ba24243d6b59910c368d9f9ce14ac292b7a86ab2c18a45c56b6727c3e20d4ad8c35f21c14b4e171bf27b3c929fd2937371bf42fc8ef7d50298c5d32b278656c2607343397b67925fa2786acf5e8933a2b14e66f64f22b1682d1b5c814bb0cdb4c2abd2bcbcd2624da1b780b9e2d259d734d6076aec4059dfd501cf77843c91a01ee81ac9a6faba983f24641c8c2dbcc58cac4e8cd0e6e640b67d00a769feaea318f2387f48eaae8fb5fb1adfd8465b4c63a5f60ba6a6caabbbbc758a37d7f129b66724214368d5d8ec43acecf0d88e0399a020ae4346a2fcb820532fb64aa0472d8fd234cf1e23693b49139b8e09b8f62bca85e80338e33bbe23c096b3f387f606e086fdaa9e9b4ea5a97352a7c25454a91f9e027f1cd18a1e8512aee52d2d75c3b2e6372d5e2a30c7caeb2adee0af5bcfc2aadd35767b37278748550225a2265e173dfd99768198c71a62fa5e8d6b04e09587bdfd2551511f2a9b80820ec6da0b28038e0ff5e99a5dd2a9ba519ce52802187a96e26d2f2bdf9e6070d137db1e82dd35417dafab319a8679233adcdefda42bf2007f24fddb1b2d7883a42f103921e8f3b71234e283fd2a99aee9d027feb261667768744e69d8aa3ffb20cf79e3d7688e22b3ac58b24b4ded4293fe02d1d5c8cc133b525580782c730e4b34f3cd83528e5b6e85461abea3dc79b8850ff3ec70f20566837d1ad438b2808c41f282c12ea92b747fcaddfbf7c66722b37b292f05adbf10a4d251f63814a81d0a0fb6170f7a704b408742a1e25b8863650484231fadbdb5ece023c47e5c18d5a0599037c4e7ed02e1f942fd1d763ad11a87f9dbadb528fa50129900b13a4aafd381e4eb7141ea771c58c427c6d23944fec41936dd62b664e8fe9c4d2e69ee37249235088be06369c97572113ec63601654563c86985fdde505b626e5d8812ea31cb8fd83c56221f71a6db3b692f91ac9ade3c738a8e4003f556b16d488d6c8acef78fb9977ed64195ba7edcdd3c5160dc85fd5f48ed4f2a80fe2a65443a39ae7690cc8c006fb1b9f347d987e9bc89ec9425a6ace0a97124cfd871e93154721ce1c82a2193bc8f3ebbebfb626ae1164f8110cec70bcde5d749171fa1b67735e0d6443a81dc37e1b2cf7943d71fa5086a2a93a879e02b002ffac8375c8b0479e1c34af1f27740818c8b96b8d650534ec3e0e323a60374f59e7ec435bff6f43dbd1f227ecc48486df7d8ff072530935616dc9c3ab8b3ba8b02ffe8b6277f27be722823f0589deff4037195cea82ec873d3216b775fe633f0ce130fa1ee2e421b6f393694aecd36e6c4000f8dea25978cd858628bbc6187565a415c57cd8dd4da5b75afa97e79238958aa42e377a0476ca9d4b597a3c043060da5fa0f70594f2be25500762623a2869819c38e4e69b681780e257d89630eb67a983025c8282da1a4d6ef9bd1882c31ff4e7b91daca529f1d8f57c1ec21e8d1dc057956e4bfca24857258c247ae4e734766007ce2786be7a0a81c6abafac5a3d7b24acdea80bcadaa11b2a04e74b0722ccd3b962017fcc5a43438b8cce9fc13c9a56300401bd952462e17ad7ab47d24950dda75a561e864c6a07320602087c030a469f6f1395314a2acee577e6242f11fdb9cf2df95342e172fcdf942555f1192870269627af16316656ca3edee08a29ff59f052b7eb3a907543b7d04c6a3138695f47288bb896095a66cc9b0294a7d6b56363b376a26ab4cb63b5ba32ac82e86d2f21b1a54adb04759b6892e47e3a83ca51c00ff561062422517caa921bcbd6d2d6cea35d95c373fad940a5f53ae6c21f930278e067a583cfb7d2c90f471abec3f03413a83a754b68e9267182f495022197313fac0b6db58a3be0f355c9486478d16fc32ce28ec5c2fa7dd32c9ae183fd4e93345a0bf0426bf8488e53a1e254fb9256b445572079e191b8098ed24012efa9dde427e5abae114d2c56ce7b397f3db839c587ead554c15e21d2e439ab7c4fc66358324d95aae1a572f64b5ea4b11746f5d9e9e7734f427ddaff0a36716fbdadf8896f4ab5ac04270e33c648b658340c83856e167038042c84f1d3c3810799a607d88cbd5c2ae7920fd7131c8971d19824af20f64d06d25bfe48b16e79e4c33bcd12d8c166b9d140f5acc4c5d5d49f9e5d9c2f5dfbbe3bed54666f2002092b510330559c6a71765b97d551176b11e2c6c027b75a8e45099b9283850703baa2e20f6c24546a24353f9c9281222f77f55003f6325fb7aaef1dbef3b8ce584c4d3acaf78bebe4f7f59f39577309806e462d7e8722d8d065433a8b2055dfc27af0c5cda4a18077121dcf0e6313dd9533c1515db256bed3a56165870de991cca5f9fe1806e8d7bf8be9a85be1f5f2b86d56b07231e4405237939245feabd605405cde491f4031b54e079cdbb151d3570aec45f15ea9f17e83aa763e3c1b71887f6dbdc34513253e0e696828d98e44ab1a858d75c4785bb3ad52851610e88f7316e9f5b4e67396c1ae9b17bf0cae68fa7760ad39da9280ec803fe127772d763004c3f12ff4f12ce44a372df0127b399cc658e022c7382036d3731eae739839af81402f2565251799f53a7967c5cdee67076cb49a04fbb18df509441c14343b0b56eef9a0d5317cf6933ee3cb08a5e21fb6971dbc132cca4acfbb445a93f7595516e9a1fc6eef0f031b0c75fd8370e35f4abc0832fa1373dc401ddb694efe214c9fb1520a007d0093431fcc6a38f66ff7613965cc77874a3029300a9d8c347121b28ce119f7096cba21ba9e4e6212f29c36a7df2b877ec31138813e3151b671232f2020774f52175bb733fcd5d41e4fd9b25e559598346bc73c0d60e82e32045da2a7b5c70444ac1a2f48281cbd83c213285d3fce2e82434fb82ce4d7cf008ab8bd3dbfee7b84a72dcdf9714ed43f96f68ab9cb4d380c9636deec3a95d4d9c32fb4b112a26f0ab8ccc0643227d3f80b66b2dfa278a6581d492bc208c8f69e7e7050d7ba412e2d8418abd72d54faf8607b24883bd6a9e4951c07521466b4955690aacc4a247379f629b3cdb8d70f8981050692a935d8bc574b11566dc49eb5749ad9c801a6a67effd6fa6c803cd501770bf0c4a33db3193560a8e7bda42125dbd9bf760883c05a610cdba6df24dfed7405132cf643de9a51d085d0b04cda70440465bcc2ca2158d01246b5c3b186cc1e78641b76418a56be42f4cdb8ae37ec75a467e56f5fadc6e9d9e13e4ea0ed1334d712ff2ce8f96f2202aa1596bd53d1c3a940c8bb2d0a1d1d3f145fd1d9dfb2f5f90fca3cb80601e2c74d775aeee8bdc620e0877e3aa2ef719bcce0c710e4c97bfc9a8ceb11d61ddbff094873f3594629bcbcc97e4d9be386c6cea63933a99c8a9e7c6dcab864f8c6891417e491c894f81454bad0a94525b02db4790095d575d1d2ea63b90f23367eeb5d8d65c1888362747496b076d6cd24c66eff0d4cd8e980dbe65fd71f9286031c3f2207b40ec95a0d77d1daeaa21bb84530e8e5c95ee169268688e2afa41593fb700d2e29f12f1c0a6127d6b2ecd876d1c73dd53836b1f53a125b9dce1b1f268ab1223624a24be7aec8995503e775be1a41202f7669358a70bb7c2b25cae91f3cc2ba15d2d5b9fb0a62a1de0a204a40dc91244b03eceb94d34ad36321deea08b601ba2836f26db6f6f5dd8a0b0c5345c1d08a7ff2817ea0abcc4c52ecb47a8b42dfa005ee034093443289865d72c3d8c5d0abe465ca235adc033cf300814fb1a8f6f9a0ca8162d0a351af13329b3380e59def002e8941cb4a3fd6a953096c7dae6529d18823a58cc38878bb15700776d3746993d7710482dfc34af24dc9c14db72ce1f79a4d627765b7ac2ef2a6db3f0ca24ebdc22a3d1821af6d922e9e73cc36fe9cd6c6b01637e72878a892498418b7939a5143f3adef2ff4ccf8aff14dd4c68ef35b9bd72c984d70f7a2caff6327086cfbe4efad4621f670ab9b587992821593bc3ff8de64d259def37b3a5bfc43bc667fe66ded79de84d5307eaf1d1d0a8f5a0273d9cc13eb73de5e707969211b54c16abae4bd1e01592528687d251d78c79e31477e2ac40b7cb1dc13a68dfb70ba7ad0ac2ae62ef72eb72edf9536e5cdf5662cbf137c1bc7d0785a6865a866f20489030599a8512ad7d841d6aea9e6f7090e010fb0c612fbb23abf53f1aac6b3e6882ff9fc23d14cc6dd41ce88757d838c437cb9dd32c3615363598483e6a4cc825157b714959561bce5ceaca7abe0dc6508432e0e32ad6fbf5dbbe90e3c969a9c5496ac0e5e0ded1d2e1258fff786da07be8841cfbacad074b7f9f852d5418362c17de0347f8f5f49a6e3fcf34f2ff3bb8cede1d1cdbf6cfe3f2e818e4641a5dfcd59d7827fc759d391f52713953bd337ae774a96cd866fd89d3b6e455bced35747a63394fec5168e76163116030ad8651568ae46660cf490884d536a5dd4b881e7f99254f34cfb7b70025274f545d810ad88aad7ecd1422a7949faf81df8d79296af7cbc4aa85aeb60b606d1d0ff578ccf3e3927a6e7c49a71c76fc7a00535fd6d488e41f997cf9068cdbcedadeac3e841d662edeefc12b5d85bea4a3c998e78a00fcc4700ace122c52ad352a0c40aa31f834e74b1fb45d763fd9f49aabf6a0bee8e5204c76f46a6c99468a60b1d0ba588cbdb0cacf85f25bbc8cff83a30dbb26d92b1c3bb33c3eb79e86e7d0dc2d62ad0d66a623cb6b1317a55ed683d5547e318623e0db8c25ae7ce71936238828d35be650cb8ca60d4dbc9d6e02b174fec8c9744020348a3666261d2210572e236a08be831c4a307d0e6908e3a1e341a03dc11b698beb56f3228393b7596527fe8fd40c2fb8d3ac794aa8c98907e3e34d492cb17f46674fd870586d7c90f00a73b056d70127bb8b3eecd9a1ad81a328a9ebc2090f119d5afbc1e138dc118db461c1c79cd8919fbaddee81d8869f91d1e171cae369bb29c7d4a99e5fec609c494222a0ebe7996c854cafb61e5bc1b78c646e4556dc5fa39ede111ee95bb7eec66d279db466f9531400e5e1c8bef90bd288450abe0c6ed1d43fb7f6f8b3531e4d366d385885173b64d50648e973f12c650d9962e22ef5dc62ef69b3ebfa15c1b336eb04809acc9eb41c01f6d5db11aa63e9bbbcda7be9309bf9437eff2bc75d07f5837d701b67f19493c1bc9ae7186eb77da9c987efb25323930a387b49da184f0e269c0b13215089e3c4da6499ed6f345f6d8002c16a37eba6f4b4d5a0f6c30ea229bf46db753a00ba608799d37a8084acd035c79c4f7945aee832b9a674a7067745ff337fc4524a93ea65a2e1d5b1d9fb90471009f6518a760c4cbccd8eefcf71479af7281f6c5852dd3e14ff","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"cd890f32214c115d8659a1ee690dc950"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
