<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"bad54f7dc0cecf564d96c8931cea84a22a0e97171bcafde0442d3efb285d382b6bd4816b05d4ce4535f8f05409f2a9053040b91d2695833e068d638e6ab00f303135ee74c7213cb5a4f9fd35cbd6a362dc2f74cb9048f1169e17290b368bbc6a7c8d181890b2df7e685310e1065c2d730e2600ef96e2a55ac3fd0f03c00b84dfc63e250fefd1a855ab76cb84c5be99b190fa0a9a695949a5d5b2cb56a5cab4133ebae7b099cecee84824e125df78495d7a08e2eca101ee9a2a41cf132f69e00b2b2a38438bad8437ea19b7454380ad469ea7ec41ba19b30e92afe51eb863c6c6ece5f5886fbbab9d65d2fbad75f52635e008f9122f01ab709a800805a2fef69e895cc775a10459a07d14b1827a14064a99decb17bb637b5194b82e375bff6a780f734d7fda61bc3a3b65a2c3b29b09121fde2639260b994b53dad01ad615d6a91db4b54cc0f68d72a092d88cad0803d348083f343ed6f7493d40cce4e5d3146f17c41b9f8603e3952b7ff792e8ff1eed1b9e165ecf3476ead496699deadfd4b8cc57c0204c5bfb7e2f82112bbdee4946d47d7b7f3a3eff7268dacb6ed604744365a2534b5efc2c1dbca9ab9c85f11bbfd0eb7032353f819b5ad59cf28aea0fe583720b142d7d571fc0d7c0a34dbfaef9934849f67d92f19c2939e023538c06fa221809be48823e3579b8354d38052929821d47980cbf64aa538e28b85a559c0a415c15973eafb66533b21127cb8eb850c5cb8c3571bc99583a45d968ab9680dac4469b602d8792de5bacf10ca74a6e126b55c583b1c21d421a25473c1f6496da676914e072b4f431e38a0852d0e08e29b8b82ff9145f01a7adcfdcf700652104a36b8e2239437f244d5d7da8c75bbd0fb9d8de4d79acca41f4b5fb7f486af50701bd0f126c8e5d0a29145c9853f2f105e173ddc112b2b66d96e977a902cd3e8756b029c909bc2e5f918268b1c915258cfa2faafd1f94a4e2dbc319b16943bf3f1f90c9608c5462657d42b091a7d4086ff30c3acf84dc4a68e64e8d81ca36c11c0bc79534001205c63ab87ef1dc9a48ccf8e7c2f03a17a0922b7606fee2180e69cced57e551d02662ea15b0955544e58eba5995df47dc9372e86bdf263c2a1feb7cfcd6e9f7b585beae1771f0cb917379259fad2366666838375188d860a568c8ea51389e8e61ec4e3c105998379b7a30ed6338c1d4b4af4ceefb056ecd013fe7a2e9b180555ccc94ea053468658dc5c7fbd8651ca9d87df3db78af8a23a5d9fc7f75a0dc287bf41af7b52da90434ca740612fd8addf8f505fd6df7a0ae101af21e187dbe1c50fb1217296d1a873663c773bce81a61762286588495c4978721e05a57a1399e47324fc8913596972d34781da276cf2f1c106210958ac120541c51df967bf38b06ba4b16c888901accd8e4cafdef39b91ef6caae13bf28f35b0f72777dd1e172872005f9caba8311a230a4ad9636e247d57590a576d5a05d4745c69b54478a67b0a2a2b3373828048107c3863efefe7abdfd0a69ccada7b5b016761e53aecca7eacd469c9ddf84ea77c32bfb2c376f3e6738b8d8322c58a3d273eb8138c72227a6ca9f26b164c922a60cee0b10f418ce443cd9274b23144aa474b689a823208977a11ae279af51621e7b80e51357feda21677a4330fe746142cd5b56162e6185739c1ac5f1a6ff67b92273c7549d86ecef3561852fe0cf045c2467ca6969f2ee4df8a8a2177eea2a746b4604c29e3dc3f40704558a22e81eafa664d6f654e059ff204119acb5e1cb7e404edd0a18163b3f851c89c238eadd732b5ad0147d7196dba92f0be2ca6cf7bd9692003fa5e3c52fa0dd90a4fa5d9e50b57ccd553fbb0b0f53278c6f79441e739552c7060f9449e8008175b750f8818e8f134dbb9d2147d5778a266ec144ebaf089baeb98892b640728dbb2ee40ee6ef01d8fec58e068b2ab2a35bd78fbe87c19ac4b2ed0ef150b1123cbd4b91b79231d99c45f4a3398ff72eaebf4c205ac5b02d1e3281b1035e39ad08ef886ffea77e5f6c703f47a398f6bf4bcf44e9e2b758cf4b2c3c43af1670a942b4c8af8ce397110acaee307f791c87962779fbe4dc6477f1965a31e1ae04105d4d986cda6751116bb93b14614a06f673278885951df8c122a143f33aa3a81f56fa5561e9d90a2d4d26a8c835690bb486745e23c9e7f6f62f995a277f566e2d952135b3774a5a9cbdd9db53530ae4e5d35e9ede5f579600653084cf654059032682c993ee044076fd70f9b5a039b8cd592373ae4ab3a2b32a090f627310b9b1ba29fa8d86a9528aa219f144f3c85c8005f39e4c832ed6d3c5888d83f375d87b0c375f07462c41f3d0a2db77cd73d090daa8e37f1e7c64c90f05ff31cdad471c942629a6fdc197e4458fbc70461a630179a1aa264f4d679dea1df91670b51817c6163f1f73189a406375f2d79a4c88890067914c15ea3189c2fb9d4910985ea1bc6acd6967b9e0064804fe8d429a6deca1a5889d5ffef4e083eb38e0253e09f59774d74e1bc48421f2a4095f0969727c91dfcb3fb61033fe3b64e01eae6f6155054004d0f9c5f7e5fab96950b5e0b0032c754d3791c2a6d4b380002632528789628ff80953148d859d14532c437cab551c2e4c04169edc582f346122e8575906bdc887f5868850a4aaaea6ed8aa0b125b32c2410de858d40ad7191cf7925a4bd6b2491e3730d7f97440c13115947e33033656331227223e4ddbd8429a4b127fd14fbf2cd0823cdb77cf517badf4ff5313a1d51828ddfeaee8fdb26a8db008fe878599cdb8f9dac15e88e577bc68e3040861d20ec9df60781459c68dbe490de1a1a09abf11729c2c3660f9e6be74adba6b6a797e4f6aaa5db3999c5092ca8d8e1ea52b35d7d164aba26e7fbc5423502782b5658a788daa92583bd75cb487b88c51bae7c33c7f55a769d5beb44d749899726284a4685d73402e006068f00645f94b9c147a6fe7fff63a8bf39c2893fcafb61c079290546b75f7033025a2091cb7a84d1cd4ac1d314f36098355e12fb7b0364e1c32896504340a789a05021a8bdc6855a2a5c8a89498afd0a06eec0759536a900b5d02a6716b13c5a374caafe957d5286e8e52cb868fb1d5aaa81ead3238a2687c7762a9836049614af5d5f7a70a1eab496edf550ea8b2c9bc679431819f00df1d1da325cfe41498cfbbc4963ee320344e59262fef02bdbc707c601c98b94a621365706893b9f8a2e7c3247af28e4de327fb198133060d03f21d4cadac4f12cc76c8625c28c0fc5287d41382b8df61c9b6d6ddaef96277ca807ac03b201ffaecb275cded8db742d1901bea0e2b8e7c2527b6d254865555bfe0e6e1f21ed6169ca5d3386518550e305286f88e205abd8e964d1b475e9095460652ef03fbd15404199d6915b232d8f25e8018812ce5bd6c1ec61cc67b464fc728a73e97dcf2e90c0c05766fe9742c556eebed71fd007da07ea525584e6a5dcbfe2db6e6a18af32c7fb47b4ebb4400ad369d74de452b12b260dcf636376b4396d554c9beb63a62277cebb267541dcd7cd3b5fe3830b331ccaf5b79ecd666a716127f3e80534a532c7d989942aa478616360a44a12ed290e18cdb19ac96ad7823044e2ed289ec2fc17c9b6e98b6d8e2ca9a954bc9255e3704eeec6f04d4cb3a554f4332519097ebc17dab0b2b36e76efa083350d3f57068e0a885584535bb77e4acda2100287000bd01d02d0e5d211bfea9596f36696b6fff3c6237b429c93c649c20f280c2b89fbd486a3c4285216f5391ddbdb76f7220ef601772ff1af2fe87b740b751a55ea5d32c12578b8141dc8655e9a1f6e9e13c7e039bb3e96173baf9faa319c835633c3939639ca8c0a2b6854f8de4232c2d408413995c30c2f293b299c373e8b8b376f629ca2ae1868713cb59acf92c0ddf9a2ed093ac27f8c9f6650a763e1df846a8f98353f5360a33841154e8bb4f145dc8728c06b6b20f839cd52cef6e1f866a330266e9f5813b18b6c5dbeeb27b470c8a0ae1d82b99922e3c52ed69afaf1ce416b0d8c136cf02054be340a806a51e031a2fc4c2e7976fd12551ecdac86ff5d3c31b19f85be4958988fe931d3fbef135acf79014036faee6d17b795ef09612464c0fd7866771f88c2c4bdd8e2749800212e0be338261aee3f9dfdaf1a81f467b614aec8105f1999fbb6734a08c686be91082ffe6018db7a660113e9a97072c4c174ae2c1ee5b5386ac3e3d24b04bd19434f2e89c7d23d1387c95b41c65f66981c25de852bdfef45ae61c29b6c08132fae130bdab361f1f94ad5e1eb43cd897d0c0bca14134eb2e8a848e290a347aed1020842d473b1dff8ed10edc8e4708a2f07372f59cf63df912ed30751fa0907c47eff6f5608ab623c272b1b927206468454f3f763a21d074e18002dc79f678107b7fdac7c29db727ecbb3b387e22828adbde2256857ea7066e0d83cde8bb2a3560ffc48b34aa50953356eee6bbe018fb21fb8980ee28f203c5c1f77cddda845aa549383ad3467c3f451ae7aa6016690a4d03d63df1c53856aee98fa06c02e8e15e49f989352bfcc51275e6f064f2ef0e8d05404630a330e0075d05e14facc66816431c80486a0bdc6c5deb7335e8cb9b9be39f4bccf56cc98e23a260b74ce9d056ac6de61105152198aa19069ffe84c7d1c254a1304f3b89f5d8e75902e456b83a3a83b1bd77f6ee998bee6c2af3c86e7f2a83724c60d018e0558d6e36923685060b2718547580720ba035c1e1101804ebbb26a286cc08fef32f6906438ad1dd80177327b0c59b18c9d1f5a8f6e5b0550f5e52d817f60976fe59da96e20d3c6ffd1ba592c19f40378b25e61852b34487f3dae007decdb110040c4f6a2eb0ee193903bb1bb5eabfea93433ef98574b13a3ba5eb1bee895b124c5cf68a08dd284f4bc7b5c24762dca118eeaacf3b3ec9df6f479577a081a733b797c77f02c9f2c206cb95ef1507867e55782033b34592883a78da98aa05b077276c6b09bfcf635d76f1e58692b157f9e3801b868016eb39a5fbd30b39e5c041b82a156670ec0e493258e88fc2a265cc0dbc903af7b0148b0ccc909c2eb21eecb24bc808d7046fe7383c60e8080e1695accd45e0b17c3ff017545543fb6ce7cbff6aecccac119dcfe4fb8807f7502842bede003f0a4b66c1585e248a8fed14e0e821f6ab6f66c304390ff62011a479305f1b05d75efefc598844dbf60b22272285027b87110ef4a7413313b519ad92cb9e4ef159c1b93eb8d2e77aaa91bb6c88daff6685679264c2726f4d35f529ea9b2b34340c68d4d832128da8a4761bd65037047da110ae77cd079de01b7ec05229613f5aaa365e4245250f5e77272d6310510c8cb0a34cda9d57e0437602396c381689e7a46d550099c13a3b5da7821ec198a6f9a7c515fc0170d09a514dcd55b2fb35a483ff436653193c409649e84ece5d8daf34f27503fafdf0005bcc620c2a83930ac1f1a60dd3ae05f7ffb9b5ad61c02aef0d0b3a918495cdf03f368c2c996a3bc120587eb3e54a91477c17ac71f62a3ea45af83784c140f7d1ad81f5e27cdbd23265ad3c187e773d31c6eddef1df76ebb4c3f2cb0577173e028c406803f276250c0f9f0b632a753b8b85a9699e31e4f205c6ea0f1c341d5f5fed309634fcfe062d682142424a5f697574db0ce2af54bf605d55e24f61c82ca598c061a659e0bac075301d9d0a3d36dbf9a872619b155d824717de7805c81eeec43ae1f788b63dbaef6e2cb6ec884a3b1c0fcdfa09fa492a856ab9abef55b452809a9e161e11c1ea404b51812d5f7beffad0d1235cf6ee09665888800acb07238e55e65bd6b15386cab1e1fc63ed1b2f54f8c37e26a530e0d14577beefc18ce1ef171b53f9e786a87af014e1dddcad863f3ed78f48a1030b851e22e0d20dafb37849075971c691a298c5e4049b91a007838b47dc9f9adc538556b5a5b4070634e0bd7e83684755d30203388c1447ad3d48f5279e41dfd64b977373b27c5db3961c4455afd3bb2252ed0649582f76d83e32dbf2d5b8602ef104e6b90e9ae79f0ec2cf2f6dac53156aa8381a5a088f63a97ace3af47e7fd05fd20a0c217eaf6b4bd7173b2e5c498aa1a8d7b3e4e40c7f3730634e2667ffc058a0058afbf4934ddf0600569ec4cf650d2f665c678dde84f5faa8e23f907a3cbf2ab633c483bb561cba00aabaa7ea1ceb005c7a77a81ec1b796f53181a4a2b496aeb1360acef88160f05a0b15160746c4cd5b52fdde26d315e655f78d217f70f5deae1be035c470f9a5b3f4ce428a805ba85f071d71d9c91821f75488e817544cf64ee472853d5ae12913813ad7c9e6da44ec381087a2e422e1c63d9e2d6bb7da2e3d3a1727c68f38541c2846be140f50e73ecdfa224c03739fdbfb242079158324bf65d4289d4c26f19b6dfb65941846ea8ad886d4c3aae64af683bcf63cbb5d1cbdb321abdb39fb0087c1f22fab70a4daa13eded8afc98f1918126cab43c0862e352c9864590535367d188778212ba0e9b61ab5ecc1f3e5d63130663a2b001327fdad0857007a18554338db693396fe30c9b3b7c6a19c1813b0786718b13a62adaafa1bb8980348acf6d7e1639e8a8765908695e342a14cb3537556891fdd54ebac7311c211b1b3b7462135a5a29320027a8e5bdfa80bf8b00f8ba53e1df2d786b308a221f9b00a00fbfa39c888b1517a1388b0fc5debb88a76e37be2d21c76fc7164d8fb09ad0eeea0a5fa39d4b52c4d739d3bfe589cde147e0afff061124d8df2c3f8e2b7c7f1e3517ea1b3d799be5274e96814a763632ef4a0e5c48b32f109cdccee4bec3f46ae4cda4263ee3a0f61044c6742cad62c13fc26a8a483599885c5d578910c1f8fd669f7d10a654d13cf7c171fbe90c8c6536fc6a4ed881c9a1ffe124aebe04fbe3d30a3377b063f2f502ce1abee7d79e08b47233f11aa15551ab0e652d8dab2c7f4282ed4245b2b920c6a0021167ded4cd9d157258a2299178a742c6dba5bf1cdf5b1f8be0052980adf44b6b1309d130f3a110f497fd924bcd9176375d20b19e3ada8dacbcc096bf32cd3747da01e903a906f35e58aa9976a6e74e086e6cb74d71618362dde5951499ef76325d6d79d30935e37e668660d8932e7915789244a845e14410e2c8096bfc08273ef5006251a5093610231091578ff69f1e82acfb8a734dfabab327f342d1ef68ddcd8f44009f01b710c9d2a6eec1d258e12ffaa315a385f273ce9fa98039f1fca71b479baa5eb16e81fd918119c71fa39ca60279827e329acaf758a8a7287b6aaae3fa42498efa8169bab38c59355343658b4cdedbdaaee1aa6b2bb60481c35d3d1ae2f7dd88420d647e3d2865060436bb95919602242fea6ab2c904da123e2f0a1bfb6cb7759715e324735d327f08ca621d3f107612d908f0bfeec54c589f402b6eff0e9b4c3e7e6aff398e6fb46c31ecf94892874c7815a5fb5d88d23a6bfbba9a6b803abe20163074d6befa324a6e9f409337c36e66ee5fca445e5602abfc4d6b524a2ecc3b14c2c8f79560f97716e1bb5919b5dd84818770ca6ecd48508734161384ea0bcef55354a7c60e52ed021a73b8ca11312a4973f625b08a758f5df2c3fe737f515a192fea7db62c0223e5cbda715231d405deff3066d1d451acca3cc9b4812ae3805067e4eaa558d3342b5a4798a3282f96f9c9426d0664a10dcf9ee16776be9b3951e29bc5c51762fef18eef06ee99fead3fb57b2dc791ef88a0e3c749aae98c8e17d8e03d79655718f40e16c8065ccd14ceb48322aac66004a96cb4c7a2726bd4dfea2ff1bb1ce9d9176f3e7744f6630c37af47ec008af946e3daa6bbe18de442949c964685a64b7779dd325696967ab2bd099d476e0d59e1d54631ac6cd75dc4bc77a5988b0b65c60bb8dbc6d40dc2a4dae9bf8d4f143a1d18ed25fb7fc52aad54a848c1a8a02ce12683e55a5a73d48ef1b3358e6f6c34825ace1368140b43d6f035011fd5e7b1ee2e2ea560632896fa0fc49f66c5a0f8a10c73bfc98922f0dc7f64b4eb566f77882155701998caa88a521800fd8356e512c938a704d03305b699c10fe7c879a0eff41ca63e4c059d10dfb900f94e82155d540faefa896e8d35d0e0b280aa5b8a6c03a4fe839e7e7300724103342a9550d461794b73eab1486261399968ceb98050870cfb01d8e52468865844942b577c120042c5e687ea3162a82833ff538efebb693b800e2f17b894fe59a8cdbea74c2e72935a890ae8e645254a788cba14308b8457d6e79acf1b76d2bb4b7e4f5c12f54337cb85ec6cc4ccdb5edc458f41b393dd8a8002a54e52d7fc5b9cf4e5db089e5f88af3e2ff632199db6a19c7f54070f7073457d2461008e9d6ffeaf5259f30bbb706b3b2851eb3ac399206d09e9e87bdd0e0dc6d53f1b5419e42f85c74e1568e795c914039b320981cff747e634624461aae6a21b070e7ca8cef654f5565b572b13989bffa4eb93b9dee18c6463edfa4f410685bf60ef5681855c51af0554d089b68567f2860c491c663868272c93a6deb9c6f2350c9a823952e87a33e0f7f27500f082f91c57de2cb9b7a1d52bb549b55c58e81164fd4c35416d451003837337109e6fab8dbd5aa3698398c88e95ee980d59dae25c9d86a318d6c6af12c99a56479716c3504ff6a5faea0b7e0725bc121dc373e7fe47846b5c0003d4a5920e783e0f3b32b4f164033220b1d8d55ab84e50ed48ac7d4c8d217de726d3bdc80cd8b88455caae5a7cf18f49cfc55a32b2554fe3238a2ed99e6c40759e769695106407fef9cb2930bbc82330fd2bf39bfb44cd44d414b90f6b7394b0d304eca971ae4db19c65065671b6e6947793175736de3863a0e5a998e36ca6797598bad1a84f80012e7e1c46e44a36c0b26740b405ed19e98f469658c1e40f856cdbea29f40cdb0c794ccd338ae98ac254d0c56ec971327c04eecb4ff11c28d7f393aeabf9c16c18239f2478a096e55f43c5339d4e0779343c60a2909d2eeb6a4820291179e774f8f9457f8f6974fba96d7885dd1beeee8dd23b8c68205fabcc35f42d8dc9014bc8a17413c6106c78bc632a46a384046a1bf69d7ebde732d488a69229a1c1121fdfcd3c5171fa936bd5f05dd6f11038cd3d0849fc5c60f3ed0f79b736bbcd9c86558aaac123d671de54c23df728362f4e9948250df8734f96d54e959d621acacdf43817943adc267bf42139c6bde97ffba895d3c459f614433c303244078b88f0939c6ef05a0b5bd8440ecadb625e5d7582db0d6c43cdfe2091ef04cfa66ce66fe9a58edadfa5b25beac61c556f86edeac12b8c4d6981380949869fd345a4635f2cd21ff1902e2296b586ff173ad54d5c470a293c1bd80d3cc743cd1d60606244dbfc8e7529ea6ab6ed895d6597d2a659ab425e6e1162f50b215472f605ef9db8f382e9c3b586c9b78411abbd459eef932fff03ddab3b7b05803d64b37e7f44856b81de664606b90df65f448fb1fd72f4baaf72aa777374cb0642f63902e4d5c732e9c2546fcbfffbc2050d6621b9615dfbaf854eec1457e79963995a1b2ade4bedb524a3bd41323f3f6bed3cc1ee8810c084b46c3d4925c671b3287fbdeec891c95046752a040068173433a3b203cba627d1cbb554fa8d5799347ee3e8cac49f409a115a3e84043803166cae18abd9c0976ff0041b334b2a70d5d7ad71ee00a409c38f367e33328c18b49022c35f176ab7e5b7fa83bb6374613960520d31d4f909af332b70eaa50a06cf5a91e8fe7b18b395ad730d51338de93116d53148aaff0088097938c1eb9c191aa428586bb816f0fc4f76bc6f5a8bdad7e3d1828ef536634cbe36d851530b77121449e2148258bbf7e138f57ea07dba7867b6e440862fbadc1b41cb28f4f682c784849d809fbe4b9766d0e15daeedeb1077f8b2563f6711db555ed5112e0474250224264e349073e7283cc1c95975697412b438393aeee06dfa31689233f1622df5745ff6a54b71d8a172821738d155c6959afe85fe49ef129e9259ee55a6d98cbb5a027eaf2bd0dd7d083c0a196a5915362bd367fd50a48c2a8598a33ea978b5651989458dbf9cdfb3faf13d302f28f8240f20b0ea757d5b1df027769354a3db93dc0e3a2c1f0638f763636f1afabbbeafe2454c17e284814c2196fee861afb7a72493728cce346b383bb1392291344d947ea166284f1452b5eece65b70a297b1bdad9c6c0a8fbdffee5368a14000315492ce22e108dd0e5fe072576ff33e4b71ee806f5dda6f68f14bf772749155588b053adb093ecaca39f96694541a096d733a99e3c1f5814dc459bd6df081258fc762cc4a160f4fbaf192ecad9c43cc6d00629c7ffaaee0efaf3f96a29fb1545a6248ac9cc138188ded6ff65074ba26514d211fe7500840f7ef072f6bffb23505e774b56d5d627337bbdb3851717a96f815461960a26e4374d82c3eb91f11887867af024355cc50379a8b7e0f408a27543a7d105d559ffbced40cd7f0718523b7dfdd10ed8b45a5f73725d1d7da2c86cdefb2cf261a5feda2f988e6506b35022696372e6b13ed24f659bde08a9df6befb7899eb7ed6e684aa9459029551c5ba2ba413cccf38d1db9b8cdd0644f12924acec6ff61aa25dfdc2045211526e85d0b899a396d0fdd618dfe2a5dd72463d19bef89d5468741fc4d4916ae2297b6c66d841547083a232da60887aa8ae92553022d1a14211f2fc763d2e399327fcabe23f6026c794cec59c4d80b17fb6938e4e969f033f9beefc0329777da6af69b0a851ef7a64b44fd0a7bee6edd796bb0020c3aa51685de7f0921577e31beaa1388ee7315d7c3a4ba0535a3391fe0409c0ae7de1efd1d30b28258749d86f9facc0c0fb30d68108c36f4138760c6ba0ff7642aff07e614b559daa03b00c11bf9e6ab77b3b815850ace51341d65370e38bccf0e6439fd6084c37cd9f63e9434e83c56e6d96c554b5b4784c20d799b7b5ed836302b7c3c2b953bd11866261b3a57ecf04dd96528674efa3c584abcdc1f9a5b6de5d4a382c7b3e17020fc604c60cc70cff2ab9c8a6fab7c0b5f788ba29e4df2264ecb172603c21d73ff2f7758482b1fe66c77fd80e1f95f34d6114034e990046e7692a7e3f1b23e115cdbd4abe57eda167acaea964733f11484cb2de3a4e50a6081fd7a0ff93b80bd612626bed10d666a9f58d8e2ad1f5a7745e2855a185ca8a2cec6045c4b96dcbb23ec0e0876c5c8afe21a23b8807b6d607f5946e8d9d2c587bac175a5f86415a55c9ae7dfacf25215ba4ade2241d0eba45dabfff4bc2244277da9f707ce954e586c24c275e46b8ed13c40246b0145c7f2bd372212d27ead7d68edacef22646570bf53f12b66c600d85398dbf1b4740c6a36b911430dd6eb42f771c8d621bde8cc2f4d0652596be7dec2fb073c8ffe473a742ce24de286ebfdf8cf72f4236a8e9594736c978a993a73bcce5b231559a5ba737969ed6b7c29874f68849f646d8d4540377c6d10bfc9495f23d9335af5f3356e369243cf03f6d36eb407dad7f33c9e5e188473fe3bd08c101daaf4b3940569aa06e8e79b4e7c5c0305ae394fdf5698a1625ddc071732be7e78b6c87d166bdc3611bdd445e11309da81fbdfdb203e3f02bb4f2fc3efbaba083797b06b18343b214fbc3812e4a7479f0cab17b2827f2780fe1b226c74271a67fea2e90b59ea8d7c96a0139837ad9337af87112a7c6a2c39d7d88ef5f2feb8df204d42ec2ac3b4b2cb6193624f8d6d3966b1c8114bde6499f83861b329d7bb505b4e8b361eb734680284a172e148fd9666f3d4c32d1a11b1ea5f87703bcacfb15d4b69a65f4c40b042e9da7c580a944c7ca726318477598be614af8affa44eb2da81420cdc6b90f14b9191bb51fe325d1a5f76429b4d265c688868143b4b6a6fa1e2736effdb6092a49aa77824687bf4968fa9ca6e9ce7880a997cd69931cc76276894b3302747038e1fb59af1255a4fef384d93d448f2d6e2cd1e0f8f75da9bbab89450c67ee07bfee96b88b2f16aea271f7e91e9b3e2875cb530bea82ddb529c40a3e3ef3163a838339cbc2c9988719efd989d8323fa43d89293a2c9b07ec61dc3a88502a66969b17733631ec87a20df00d41d66bf56f8bba1d641a0331a6f7b34d19bad24c432a93f1b9335054403e7042770504e2ce5509dd21ff86ee1af431796e9858c91fe4fe6f08b8d3c7b80e24ee3bfed969417fa0099e3db3822957307ad3d48ef111ed1d12ed1b6101bb7deab47884659b74ab0eaa34c7e32096383e20ca724d6c50ab49fb9742259e13ff3119c662b45cfb2db766f37dd78aafb5261b9df2744ab26f99f9ecca058081b798410224373e44584d658e9388c7799cef001d838c557c2b6467a8c8c1cb5402c321e2184dc9a4202e556efbdec715063ac02799dd60aaa55e2a0523b81182dc5fc894c47e4c02ce147231f2a42c66347b3396867a9dcef81130cdcacf74b984e72d975f866b5c6ed86e5d982b99fa2df6c4ba070bdabd60199c9a412cd892c0ad4ef639f4fc191f3876543d35e99f7e35efe72e2638efc5df1c08c41b48c3344c9727c0038f8456cc803dbb1b56a8590918c13afd29fbbf29919975761665aab3eb5a83bbe1bd6079d775c8a5a63345c9a5ef5e61371df9b663d55587c095e2560b6d2f9b9f17c38f4fa7c7f9c2f0d70f5406ea47aff86ef096517c0097ff3aa1bee9b1b35630a3b77755ba4fc38571d8093d980186c4545197524a6311d28130b872e98ea470df2c0c76e71386f61bb24771edbe4c0ac6c4ea82ca405d2d831b2068571c402a644270f4ccbbd4d13b2a5b3d4f4aaaa12e9130785a5c122774d70ab5e0e8ae7823fe1d2604c1922caa06fbe2ed43829e67743a25235c905ac53eb8b1ad1ea412841bda72ad59062bff3308cd9863d06a37869c2f9dc7d4a650eb8c4b616018c6d8e0600760cd310d2059b7b9ce27d7030397979c4eeeaa5a268e911cb52482944eaa289c563a94512d83fc3638228d5dd52effc743b61cbae6cec8e2ff851d84bce1c23f420dc6de01fd81f983e0df7c15299fdd3619e5b382fe93d37289678eda78bc6f3f5800a993431bdc63e62d7a2722974117c4e6dd5653c2f094f10734dfc790ab151b6aa57d78e02a63646b2519319cb72ec0af610cb3ec69ae3a557547e8e2c864e794e68b0a7a20200cf4a7d6eb5a8701446a09e3a259d7519ed6667907c02bdc1cb2104af9692951a8b9ac345152b5de71c509b4ed7017a219f9d7ac476ace551a7977114bb2a64c33db39049f706a766af5c26efa90bf45802548759fce96366d4a825e34135bfca9eb61e62d7f7a9ea634ce2732cfea0ebca5c42a89d938fb9a69f8a43ef1c33509de5668b08b1c50ba63c8efc863f351890ad28fbc5bc2274af01b29aac7fa7cce659c9e966ecc01ce62b026e50f572ab3536a243030025ccccaa226233b522f19022dadc155ff6dad6f4113724c4131465b6461b03b177004837eac66a650897f5fe9b7633015fe3cc3192afd87d055b6d430abc7a0063f9185728d0fd865e9106ed8e444ccfbe2ed415f17127c500ca092b648476b222306a215c9e4cdb84593d83dd47a070c7917c326eb538151fa5185b0a2346d078437deba0169013b661ec8a9916be57f1ebfa41968db17c6e2653fba21b23459658830a0d50ee187624d823653060089a04534a1ef934ed95bc624bedb1c7eee73943511fb07dcb8f77587f6ae34975f91e724a51b935c4e3a25b2e3a1a62cb021d92dfab1668e55c15743a3c9a0f0c31eaeaaca0d60c16907f55a3f77318ca6416ea3c12706a8dd17fcf07600bd9f9b78e682a2c272200ed867a203b399ea7f3a1412d1d70b34280058de9b470b32992fcaa2f4db02aa362b952b11c3ca08fe5302bfa91baaf14baca0359899c06882f3aa6cdabdd2d814b8d2b4f294c16ee627653fee2514a995de87c9b86a9eef19488d88be9de9f93ae76d8b3fb0cd292cca76bced78bc12f940962bed3dbdf2fed6f6b6499e814e4c95f38cc154edaab3a8a0409fbd9d80446d671f0d29f04622ab82db975b2caf0c4361f745932f4c8b9fa6547e71ea18951fb6b18c5dbd1a488bb9a9a30e1501e438c537f9121eba3f5f16b42eb7d71899fe1944f64257600b1f83392334e12a59657fc6c67a9e2a6cceff2060caa1ec60a230793129634620fa896b771503929ecce6d4ac8a11b368644284e1f04de29b9a74779748543d98ab4d0cb824ce5b72f72f5c040d86320ea16db1db40868fee67e0a2014423f07a3a980334133a8f6d34e152fe9f0eef3538083a01567e2732f2a7fcf2b33ba567e96f58d765f4a8f9e3567478857de1f57903bf04dfe07e761f4d02c5f220fd69cdd3c82cb4f224576563aa7e48b78a84e874827fd6509b78408a56371546d3c1416aeb97dfcb810c9bce9091186c3924329f467b2bdc2a323482f8619315ef8f04ffa2f7d93613b0b131f7f4d2b694853b9d370de4c84e6a179dceb46fc096c10baabfc260ce5d8bf8b3eea1ba5c77531aa765b5e7ed82b2ac96102ee35bde515fffbc9b0fe54ac2e14de813dc7fa43eceb93e9557d7637a125001b34c1d6c2a44d940f952e3ff5c9e480a5a8419ff556f46c3bd58600e677d877a244cf7d4e5ed95acc9518aceabb0a52b9abcf9f870d9d6d9eb1f3b6da78f769899b5aa17ea720fdda4803984d6fdb6d1d052eb2e1d18e469cea0995d716d43d2f70c4377bf4ab846f056370454b0a59c3dacb96a26cd17dc5714e1245900ab6ce44efcb132283e844e65cd9de5c09b0cd0dd4047d53379e5c56712056744db74c4761c4d2895284ce58aed135761ea208b3d68f64dd2a543d727ce88109bb3949a25f0b5e72a196815bc1fcfb7ee18e697cdccd71854b49f8c105589b581c1a8cb4faef713b23e261da536499e2665d3409549082e596678cf8dca721717e5d5be8295f52714c416f6b76ccd1221b36d4bde4bebac455df48b33b07fe7dd03f7a020f93d538dd6c460c3722ff53c880df47f5112aa18532723b193408af52352060f56b9ac414430e36c61decf15688b48955ca700fff87337ff41b19590628099da74c1a5b1c0e63e37866dabd08b8c24eb98b8441d9d8e125f0f7db28180678a9750979bdf7b90821da39f6b29bc179a4c491903635ac1fe94430abfcb88177e94567b138e160b4ce6fbba2564ca44da48000bb054d3d9d1243ab0db13380065a402ebd8cf19f59ffa7328238d5bafc2130a62de813d72bf86462d21a3823c3ae475674259607a28e6fd066d07d948b255817e3bd8652e18a949b8ce4576544567f4eaa8b45be49dcf9c56290e277487309dc246aec95e3a4b585547c234efbf51d93ba62cf6369a0778f14f340a92aa236995dc9b3c5f641469787fea96edc8b882fd94b3ac309feeea6a31ae6f1b45ac1c829bb7efe66052f7304db5e75eeb9b827b94870f82c22a44d713b779fa006f21108f62eddfb92ce83ee03cb1490ff8ddb4e9238258a2c36b38e1189e31d1390bf0686c71b3513ceb714119e0882ed6cff871fd7bba55eaf3c6b07a3b6b0840de69cc079876dd832ef151c80b3af20743132e7d93b69dd291a00c5f4c2cfb03d7c0d393934db7d12c75b862ac2d8bc280d6e24e93edbfb66f6f6a8ed793e9f24a7a52ee742fc76cd8078f6346e540dfce812824ac8f47c8e9909ef95ab46ac981b343132e8bedcdbc8e88e7fde7675cfee0e8f7f3b18c766a1913f081bf4552c0ff439a2f2fbaa05147da3f3f28d11f2098e26e0277786167370c5261a01162b82ad9ebfd12aaa8a83f1efc970c60a4b2605fe71b7ef7353d5b2be596eb15cff9b5d72def92c6a015b01688f6022ab7af66e26a3cc87a3d7cdad794ffcac4f6a3e0870f6123932e272e5c012ba3dada2418d96357bb04c8741753838966434d5cb42a84a7331fb7786c4f7bf67332ede0153456a13d19eda0e28ac9fa40e6ea69e9f9090d8ffde431c215c2beff7d1e675577054e4e8d039e5f625d4b61103683d6ebdc3900f750f378c441bf5d0ec8ae147b1b7a4e8e60ce58969f40f47a974918860b9bea29e2c438063044987f41f5fbca0350936e5d7cc272bfe7936a66abac1b99ff0dde5acc0833f52e94397d971da77da8722d42ffe9ea900cc81f5c3a50f75070fa2674e9a359d967dd0762e678030046f384c967e8bdffd08e00212b0e4d27576bc2de40025d547436043855ddd0cd8ed364025751884183b382cf585ecd183f7502296351d18f88915ef9fbd785f7d8dae94059fd42a2e4cd6292cabe11caeb02ca9e4a6a343cdb33df3107669c7897ae7d56bd1eef786f2e92c0d98b117f9ad9b61b2d30626f033f2deabce6aaa26014b7eac08013726c42eaadc26974f83f877bd1caef7407e2d4a49be2df291bdc9d24fc96099d3e841554b12f616fbd9c735f3e4d9d169bc6dd84b98981de57219b2c98d2a1d23831db80137b99a3f087e6f0583ae6236b472594349359b5049f985666c482c5faee53ecd61a67124d8ca086dfa7ce51c85fa41ca986dcbd25de20fb7f1e35dccfb01e0da821664d14d87eb3024fbbc2465e2028303c05f0510d2d8dd692902edafa1329cdf3fcae4057d89b103c9ded5239085089bec3507ce1f10bc8543543a0d38a9aad1633b60015ec75beb8c1273283f411fe7559caa2e1693eba4727518bc02c84b5c7f0961049084606d8b267a22df2647687fee04de297998ab6e5d46c46509a7a20f15f7c44a8f6c5a8cfe3cd648e04661c008728cc2716f9a33d09a2ccb675b60333d223c6140902fb872db25d2c67f82f12f12ffe3b89ecaed58a68ed40a25f30f5bb1ec9e7714829d97a46264a739b602cb4e39d5d2e4bb0ac60df0a32c9417ffe70cf2142e1412b1ffa5bf00ee1ca876759addac1a0e7cf667bf39b8586028cbcb10cb34a681dc4bf1376288d166627ce146b35c9a29f6d3e66af6f0d9a39f16da9d01aa9fdbe72dc7129579372d420e239c38130b0f2b79b2c796a6e555a53ce1849e2af049e760bf84263028d3b2c9f5e4da650e1be675d7b9cd6ed434f174b6661185a2b4222d4a91f061a4cfb70171568d0a1368b342518edf115a1ad459af056b58c38bb5e219290237d416240501aae2d2d2773895c23327ac2387bf2ade5c1f4325e9fe29edaa55959d61368d349fa26b64801ebba3820f92db96992998134418392f2c24f6a6c856629ec63e850b0b26cf1f275bbccbb474645d6b43e9362a62be60dde768d46ab3e51f09606efe340de1bf3f81ddb817eb0d7fb4fdb8563164ea7019f463f127f287a4870cef62ecb761aaf2d8a79dcd9bf0974802468dad8cb1eb043da0d805a74dec9adcd1834aeb0ee19267234bb6b76ea65c8af603cdd25a424a4310ed963e3d07630ce07285a528ae5c4fbc6162bade511fafbed084f61d7d5a638e1676eb682adab03ac9fc7351bd8ae0c54ce1923dc187fd954d66076e4e91657fe88ff8205d38414b5f975622f7ce5e1728ae8d46c39f5e1c9c11326b3b06bcf85652aa79d1e2c31bc024209af8b3b37bfa6cb5c3214e1d723a22597517db8bd0c845f87d6ef184483ea77fa771d914ac37213b4ceb8080a332a86a0a61cdd8a80007916ae602fb449f5c17bcebe627778d3e11f9d6af74297ccf985050bec1674aa80a25fc275ba66946345a0677b190b2501685ff9b9d40363ecc842a963568aa83d75389b23f7eaa987f7dedb64d47fac2de6205d1c19d515fa212d36ef12facfe29ca6a391e81d6bcf0670bc856e68ac6a2bd6b14abc2b042dfd2949d72fe24b628aa37273e53439a11000a94f4d0ecb6d487fe4d631909db596740f584492376b5c14164c63df07481b8f7b87063658972c54ed402e458aeaa967c9243093f836ddbdd1b30343c8333c9cd6f8ad6ca882af40ee9dc6dfe16f1f60821e70855a085b9ffcc21a54f48a297c8e90e3e8f1ffe1c81ff3d4fd6670a8714a772ad960c2a4a982912489c2c5a74d3c4b3bb73363577e7040054c4122e06d943dbd325edaad200b54a650553d01b50c06a1dce02068b41ef124bf0ff3a636dfc5ad5a6f173bd584cdff67516e8853b3f44afb6dcce45d2e3221ae9f718d24451c7f498a5f38fdbf64f7f9551a2d00f59b79188afff35d569437a24a60eb2d7a5f3f5ca3ba5f4e59215977032fadb50d48647635498f0c96f1d9065a38e11438a98f830f9c48cbc96e2a19e7c69cf60abcbe488fab6c09a8a0eb6fa0acf678fbffe3a01a94cf7a0d9bbf1711200030cff885687b44c1bc3a1fbea34cc4658441d62d22c43f4178e1a4ada3a4dff66253645e186a044618995a2070e60fff07fa7d576489640303628503183f41840e93199fbfbcc17f78a7837609d4dd402821fff3bd127bd74890179e10e864f52cfc91274ff285f52b7b07061aa0f892da3146439185ad72c236856d72f5969fac227d85a44f4aca60b9629f1300be03a005f67bd7c7ca178242843d0aabc2aca55434b5c1b88806593611eb7afc4fe6242fde8a0c752d4834a3b2bf118a22264be8d67fc1b58478c5466b2a78149067e58d2f6364379bfb6256514d3057e887144e0dceb6bd6fde814fd88de44b3458bf3c06492233e036dc7533e7cd38dded4e790893d4d638d0a948389bcd7f35cb686f8e2c2d2ffd0e7fcd3804856ea7f0151c32ca88bbab929d3afca1d7d74e6e5a8ef1184","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"c4c14c0221370cdb5ec792a5dbd54e11"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
