<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"60385a38a9389a505f04d4f8f19ddae298f20a2d47dfd29b0d85fa4131419ae84a06c58cc6b158153464c151cf00ad81bcf722af2a5cc672bd348c8d6a8f427e51686d78bb0401e28eab5841e16c05df5bc7212adcabd5a377b041fa951206bf041991a5adf87490060b9aeedea3318ec8f6228384b69ac510f2fc79b351d79b62d91349774009f8b5aba5c7b7fad454299325d7f237ee5f1f9294aace17192230a28dc18dfafded72d34c18ba2b7fd3bceaeed8a4fb80d73fd0f567e2f26c38b9ce71a613300840901c493120fa281f8e9ff5daef42ea34fd5ff4bbf94b4b64e9f787ec14ba2126cb84d08a52e3603b10c5aff027f4cef4261052a826302af07e02a047e5265ed8b8e6ecda41531f8f08e519a97757282b8be54dd35b2e62dee29da20e03dd07f145ec907797056c31bd3e9c255cb73ebba67cce0fc30f9e26431b9f96f90dd06069faf3373d8a0ac1bb5c8b051b6f2f396c78f9838eaed543cd599c4f130342b68dc38c2b7cc16b96083357eb9c5f6255baa145edee30a6bc54ae07548c38dff8538ad84e3d8b08ce7af0a43ee93ec22a03dba38af55d8e9f7eb51da1b661105856cf54257c2ed617d7afca74a34044dfecc1bbe8dab943f67ce17343fa2a4742a39af5508774b0018d5d9fc24baca94b5ab5999d737ebd3854037718a8aced01b4a0d4c90ee9d3dd3df23aaba09c51d97ce5b557c84b54b8bc9fd3a4f23403fdb9ba2fd40053cf9850f54f32cd8e4923710ddd5e9642ee8a6310927682c52f0c0e66c51659c3825c96be5f5f4d823d9553f0b4b4267a39e8a8c8d42cdd1c88485b5ad7a1035db0521725ef33d72420b5d8295d234e6581dc74d384090ea39c965229b5b0338c6cbc9dfc2f7da8413803fe3956c4bd1593ecfb94337f97b471e261f1a4cf485d55294028070f403333f195fe550b036bc7796a5bd92bb3d883847bdd813bb2d13a906e9ecef60ea6bc6b50824a4039d13866c279bfd910e22563760e45d7504d9b8cf8cd55ef876974a70802ff748f81fb9ea9303311447cf5c653a7da4e6d49789bd96c916647ecb4c51a428666027f92443bbe4601fbe6bd00d993e5c89645bbad4bd57b6b1a5460882dee70eb65150edc5fb77eb04ba9540b9ad88a1c356a29b3b5f4868e00668cbc5339d1804acf9f2a1f9a93ef187cfea0531d89eb3f796d9a5bbf19c57a3e44874e48b584bfb4cd4510b20cf8af87fd7cb48b175beba31a8964a7d21b8a35a90006d27e55315f2360aa19696f590abdcf57f31386b4114c8adf131719023b4ee83c7a8195d4ab2bb13e5b914ac77264147ac63bca95c75c8b7e37e122e6bb990f1c1e5d31c50c1c3a15e7221d8e19bd7ffae14d15acfa3c512acebdf142fcdfbb67e0a55027b800a4ffa70365243fea720a7e9da56b3c330320a5b492731f09a2b21871ac3df6381c5321163b07c74a5f43e91e7f003b875d07c6003f4b40602a97386789e96f3b8f2e9b7558de4ca18dbf96d99e163c544a859c1e47c5c74e98bad4d85e66e092b272f5c6a793be7eead37f9e3a50d8f7e4d6cd3703bf5257b3345d1d30d848c5355df5261c6e44fe61a8a484186dce96184a9c636a5cc83f4bd48b156e636f073e9b3c9ad2d2b97a7409d8ac95a3a03205e7c32e3466f1c246002ee7ea1810c19a1757e685f325049d74ad929c8f3385181e4cf22ba9dd129830b76dd24ae0ee540ae1d7a753cc1b9669f1780a6167e71eaf260846eb3a2b2856a2f4caaacc728e1d3ad6550df5612adf527ea4717840bd664bdefe74f09794cbf598be4bb3ba6f53a60c371d0349de2563b90a186dd734e4100bf5fa2c925ff6d79e00f02ca30c761c6cbe4d93977fae60be4239e8d9bc70699e569d98a882fd2d5d0e655a3cd227d6e606848d0e43c34b9f4e45c19ac3d14bc8f88b1c1361f0fde50cd6010fa16b25605a37e5e397ec37f02408c4f629ab70a20b6c1d79eb733b50d76eb5788c249a05d7b9e99c484fd5855e3a5f3e404eabb9346933f718c87a2ce92772cdca7637886106b964fe8831a55dde400827f6b6e10bc0b2ea061682f7b6697148fb00e155803122b073f83923d15f6bd7f56d2ad9006730fcd8aba7313acc840cff20779f5ddcc71cb0aa9d424c611f85d66deb93268215ad4fdb58107a922b56da5f7a5c65f9c5ea2fc050a49ce89b3ae494b1dc16f310031fe2dfbb56e3048e77691f8485383155cec9299b32fa98380a27f1c9c1b1f3fdadbcb15b55d262174952d6b7583c4331c196a28774385cfb9aa34712bd1d77b3cf909879609e99e8f3ceb5a663f5a6a4eb98a53f29275d677bc4765c994b9b8cfcf31830efb1fa38664f6074f555a511e9e08d5783dad385f1bda13b759973c2eadd31a05d8264d6e042b165510a21c258a6c81c5939e6eab2b30a834e7bf7f7a079f5db8a581e07af748c0f99db1b57a4996faa1e38ef949344e257541cc2bf665f468dc924edf11554f28c1e729e349e7183c2914072e55e2d383cb05fb716a5d29bb7e883f3480895e6d47b0026b2b3c5e50546a329c1c12cde948e1d5689e4e32fe0f0c8f67b84969fbbf2fb6b716b78db478e9d2a3913294f40517b973552ac650e072c859e234420a3010321a67be7451e6fe2922b0d9e61df3374350682e9850144328ec0544a7ce274d1612e25fb224bb4b3b503e6cf966ef41fc80e064ca674297c018b485561b304d1959e722c5b87eb3b86fcd0d35b1bc281257e64bd8b6cf60bb6cb631355ce6c6ceb798d44ade4aaaaa5aa15ccc16dded70d17ba833f0dc752dd5bfc3d654c6217dca0005d78113326a0087643c80977c43bacaf654fe6459c819cdce74477d4343c1d01e6abe5145e401a09a891bdca951f7805ff34779730acc28ca36403b1cf293ac6fb2ec150ea700ec75bcf257be6aa87061cffb6d194a17c679269e34041d5d9778a8f693964286ec8f52d968a707fb8ebae64951bc39896d945f9e0f1ab0f975d66b10ce43e1b5f9c0644f18e6d9e94c97f1fb0bd575ea4de21e886b00eba17b725f9901c0b4dc2978a48919cf877b3f0345a16656849405adb0f0bf5e452cf776cdbc81a96d34edf7737f3b25d9815d958707e289a9de4acb4293d07292c706adde90f7d525761c13696fbe69f83c4cd2725c35a01391236b335d0d82f870867b066c6fb4e4f1bc283c596cda6d68ae5a8fd27ec604d3399392444e5e58540fe03b482eb4e7ab6fba21186b85f4d838114c731957cc1ce15e3472aace86b0aa01866d02d9a2c0bef33b0ea1c3eac4a30a6820447888eede42340645ed9de6f70a16edaa9c9ae423c6d7f6d9431dac599b4e86927eb0ad5e98cf7cfba82b53ee04a2d9802c8c669ff1946d290013dc70516a0e02a3e0a3653bf96cb99633fe249e16698f44ac16c7f8dcb6fdab6a782376d2d6d5e32ac2e03b92fdaf7b33725dc06adf877e401ddef74e8ab8933f74ebaad89c6f7cbe2844e03202909c29bba558d7752b75f960cdd6eee84632c668589f8a0f76a5db443b066154e51aa57f13c87a672504d33fb4ed8463cf09998968a4b5b28364ff5f6947ae608fa8e267be9e52c1c1f6f58cc1ec97f2bc708cdeb78ac066dfea21bdc6e9995d70c4f76715e1181b47845ffc7ff20049be54199999fb29fc32aa164f752e57abbadd8d97b819f0ca67005df2c65552c66249e205be72cb187a4866144b9244affd8b0e05cbafc409b344feb725b891a6cdb003feb042365d414056d6fd18c228d72648119a492c43b17c3624a20fecfb85e8e270e007d626618b9055c8aa16737ed870e390a86a604bfe9161c6ae600d58b29dfceba22aac38a59aa46e915230a85bef9ca9bae803f5ee55cdd1f3b9081b7639a45c31008e97c03d269fba0f6d9406622d28bbdb8c4ed0f50a1e1df946d114a8819d5c100aaea02e84bbb904e995bdbbc084b0ba29f180ed0caf8191a2ef62077dba93ae5b1fc62bb558701974c31671a2a1ea069c713caa6a86005cc7327c0cdaf194324b34ec5eea325993036fa5292f58560b25952a5d8dee830cbc8c8b0649da9ad9c97b71790ce9eea6fa0e81741587ad227785684f56d3d12b84f161044d1d91d409a0debd8f7a0384bac8bf7760d296d1823b7ad8ecccd5425efede9e311261ca40f5f107e91c8dc62febd9f8c73f76eec3c1a0cc3e651debb8148db989cc34fd6cc45d75fb92ef1c705ae96917d9cd4aa129550f8cd959d785efa17c99d20fed08d09e8f5cab88fd668152842c33686ff7c9f97e1fe760696518404258b455e654b629fcdea4c9b3afc770f6b8764c7c6fb6ea3528643f15a930b33e7fbde77da942176687be48d22cc373909e749c81ef1348479100dd05aa389497a8e0fda2490fa0af8c975ba0830e217d0ec4476b53d08bba1491af090860ae848fff6fc513a83c85d8a0e85e2d5ee8a0359a93dc82c2895343682ab54eeb1920775d08fe5e10a414d05cf63aa5f5416f9762fcb39ea4c84b96448b2f367ee33e4beaf27e6160ce497242658e4ed05782ea0c9a6f54bafb3d5e750f47cf14cb50842f3a0c4d656bf63e023946195f233b58de20f65ac6579ae9f39b60d6f9a72ea36d9080d3d43bf1b430f12d5d20584c553c9b352b2257580bc2969cbd801d716f75ff1d0ce70364f0527f49dabc17f535f3e7433f15a2c4ac06c1bb4238d676ca5826965661f5948776d43546c6f4c77db7d8e6561ab12e342a7be3a508c51f69786c06a44f5902d02ccb759f1e4283ab3d757079a883f6fcb8559bca69b01ecc849734c202d3a31f1aa509562915625fb529f68cf23871a208a7de76058e2db8e39c9d877ddf79d0d563f7ac67557bbcf9bbc801d4db2972df5babc558afb29599d89d79f2f871b5290baa3977ecd535f8667d41781cc8d47e8a27368539fbd5dfe947076a1a39edabe7abd5cf1cd85972e22c68cb2b5dedc67de6b50079be937df2047e91ab8c89ba3266d83e3798693af5c1343104cce8241bb008b3a17bd320b8ef99535733de5aabefb787c5dc0a9f102e8a604979295ad979f850f5875dc22341ec184ac5532eb9dd15ae8bcf23f976b4ade04d048f829440c08495fdca89e792617430961fd59c5f4532542a864b5a33d34d9acf9ca3b49d13ab61f3d8fa6c9aec3e5f76e5358dc73b370c52800aa61a9905f45971778108b5a8ca9585003768122c12a66da21e1f7de25807c7e77cd6bcd972a0e3067b6dc62d584216a91e9e92844bb5bdf61333d650282cf4d91d46a1ed90225c032c8bf437ea3ab435915ce935ddadbde0f390bb91e273ec7444c30e004306c84a17e3c1541f53219bf56887e491b1efe8975cf75c971a3443365cbe8eac6159e660435bcf41a4a6fcee9ebda9d0fd2f23e96a732f6ddec0dedde657afa55f4a7d8a65ef0ed5528119be6126db688fb9426050f0adaf1adc1a0ad60aa5a3a30c21d60410d649a5dc7941283e67da522e29f9d1e00a969aa5d1fadda0b96e6dbdc3afcf672aff60ca64b8517d009b3c07db9da3f5add9701e50e27b0d06a3edd60fff15d9084d8fd44656e418c76a698d56550ddada30738c91872b0b36ee9beb28bf43daf6302d41c2513b2a2f8b28bb91f25976ca899c0e24dfed2d250e86034815574dd85af1ce431b95cd2be61849e79b91048f60a0f23ef5587b825f55733183ac9bc56302f8bcf651c1c84c5151a7a981f5d0addfb6f4d8e57e9301bebca35c95d388a50990597c730fdba103cca38f27171598b11cc00286e50c09d1368c5a61ebd4366df8d23ab2261434962a0b430552383a8412fa19f55aae8e57f00e9396cbf62f7a981ebd08c579da8e0b7fce9075b5dccbf2868ce6b23ee832efb9720abcb7194b5b1c7f876bba6e2fa21f8b31a815cd7f5c4d18c08b6238d6c474e1896a16ca4499475820f27b42f10b992d35b7e88239bf1f537f295dcf3b54cfb71a83580facef27e0f266b92c622cc85d6f8a723c89393badf49398397c71590ffc0e8060a69daac40d64b170da109260f2fa02902c1578451a42af546cb5e8e36574bec8909bddb1b6be6eca2d7d61eaba7d3db382368cf2610a38e7f892ae937d1d02fb5b08b90078817bffbaf4440e9c84edd20e024622f9e5eb53be3d0670868b111b10742f908343015b1720246c8a0447fe8f6b9b2c82f7e5faecbd85492500ea6b90cf0ab9457ddb438b1d5eb70485d8dec132cf02941e8fd728088d4fe105f22039d0a1c5cc9136b93dfb67b0831ad98c6bbf361512b1aa2e8b6720660b433322c15a7dcb2b964fd511e6098f4a169cf5a5d3060d3ca134ed2393a658ab32d7560720ecea8bc1892e30cc20dbd7930941cf9a58ed32dad95d363077fb0a35596a28e7620ab4e905a402ee283e69e32e72560ca45bb8efefa20d9d7d9376b7c0cc936b8a8a8e0a7f8cb82e97092e1ddece77ec77aa16537953ac9fea8606ebfcd8a3cb819dbd1be6b6b295b14c4f8f5a97cafefe6eb04dc973f68487fec564a7f77ee7c4ec21910b43dad37300d201fbef700bb11c8ae4fa39392e26487204197d1abee503239bbf5610d0456e63e98e2bf643c595a461f5d9a8f82bc52cdbb8ca75b25e9259a37184b0123cfb30161b807b99f1cb111e1366220a178ee2e911534e1058238cfe8614840e80cec086d13084e44a23ba50bace39476a16a24ead8f2b8119a7040cb14a351588c0621dcaf2763b091893ad2e44086db1bf2d070acf93f846ac91a8c4ad2609d528400753593d0c7cee1ad06bbb51f2c448f5e8edb734650ba683a72924a97f102c8262dcbfa81c08780aa8b835264baeede88aae2738641328304b135748eb626350bead1d71bb850b986d9b85eff191d6f3d854f5da6658f7dfb9a86fc6c77991f066c1aac76c067dd82b552c4a11a2343875b7a7f99df139070fb4683eae5743cc83a5075de94dfc7cdc6a6348d1b9fe9c6d7d3dea636e33a2537780687a0694dd4f6348da10e559dc51275776a815c8022e93c5c1ebc9c14db15369eb3a2bbe868d34a6179c00f93d2d579604bc12acae6008c0f5af1cb912fd48924d727f0064a889352a101e63fafe67be93ae8ecaac58544720004d585813816d80724271ec10dc409270e1398d1746e4dd4dd7eb3d5b28860bbb20a33dc706bc66ce3ea007268447706744037c6c7638dc0240b4acccce15e28e713f91299d88f3dda7fd87f6a247bf05cabf2576ba325266b40aa706be945725a161ec698efdac189d4d69cc2823fe25a4735e7f28e1a9a6afafe33f467311b757229c2b02fe2c5f2837d759ac8fb8a6687a84fce4357af1266f0a86c474fe2b9f3bb025f15b31fdc55e75c0ae4cbb25399b65e64a0e4976a1d56aa2ab2cc185e0d0aad24457a870e69d65afc44bb551479dee401f92e669791cf65f3595b7851b62060abbec94f37c24508dca8dbcaaa865d8b866e114cbf7afa25f91346048629b84c92f2b77cecc30175eeef173b3c1ceb39004a7e29eaa731607be0201e6c975f41f8f21e97efb58ce10457d66f1896fef30ef4707dd22cbc1fb917c2ff16ccb4fd77ac59aed43f3e63a7d55e33471fbc1da8653133ad73cc2339e25e08a38874a7901f4c46be534c5860c738afba861b26860af0700a1d115e46ec2b4a417fd576f9bdfef59932658d2ef75136dd2865778e0c40f44bbb124f0167427afd615a948dcca556c5253192dabbe8d7bc0b7e6de9dfd54c4ee4d6494834fe1aa281cd759de078edc7682dff56d550542d4be2b5bc092b94b182e2e6acadde510d67e24849117c7581cc7dca747c30ac05354e595a79e59d871bfda1f9da989761f3247f51abe4b89c041c94001020be4b5fc3cb72c2bdb27d13173b7778d8a4489c28b3eeb41ca1009bef7e3b0c0c82e041a3c209e8a78f7d938fcb6da0ffeef8a230d16964483f4ca0d5ab4860fe9938df2b356dfc2b9d0170e319a23837c5d1cdd0e4c9cf194f613804f4b44cf78fcdf211dece2e1d3c6572a5272ea945b64fc2152d0ca5e5a9ebf270e028d34c7766532e630c3310ccd0efaf39efd960df1251ca28bd6cfd09826f5a4bc681b71fd621d7fdb5b05a0633b2e7527cbf5fe9dba7b7bda61109737c4911c7e6b5e878a45b1985e4cde65811bcc9845d257638a83dc12f02861658e8cbd0365f613ccf0948d946815db01b38c3803197e6420694564461342ebbdf4b83afdad6a69bbb1fec2185f451f27f8d942f6417fd33bb1cb7abb3fa611c5df1551846ec9a608db884bfca8109944e175db62a74b887806871a33d80b4af3aff50fda57efcdde369cfef9fbf4b6169b751f487e751bea10eaf3dce69c0a3c5d3454165f925d4afed2438219e22a2ecc77ef2b133cb2930fecdcc73bf4fab057d8dab1e5135206825b5f391fdefbec1e07ece0ac0c261319b44dd040afb6578dc2ebcc91136112b942dc9b099d0030f12165dfe65616a3f5530fac524f05e49b7da89e8730efe5625ce1b3bd19a5b8ba2c08a974a2bd9dcbdc64bc9ec6522acc9216af992c55111cb6bee1cf3ac30beb9bc96d9c33523ae81c152aca99536c7c8c60097c6f3c009e1ae302c653e2ff5d05daaa94983d3c3d1fbed3922a4c91063985722ff4dcac93efcd16fe4b1133e86a3c025786398a84c5601306b2b4ff67e8d38996e9966c6fc90107f4aa32061bf242b0777a34fa166ef431bbe39b04a54858fa413fc7d975132cb823f05bc3b39f2e24a3140ae921e004f69322c522b22c0fba5ca7adde434a1fc165b605de6748f749febfb753b494efcafc1c6686020d7877283964ab4d732e9f9e4e7e7a28d211bfb4efbbb5c078b6eaec3de33546171710232d32840ca08fbfab1d2e315b331d3695f05f1516cc4c5d5bc96436a4a18d81798a3d189ecd9c2f5be32cfadfa902ff936eab2474af587178defe9b5d6fad3184182ae7accc468a1f199827a8a4c4bcfbda3b348bc67385b6398e123939837c6a0d605b91a3f167b4cbebceb7f152a8a3e98717d21144bebdd29fc5a55ad5c0017ea3fdddf80a349701a638f102f9a036a961072603e844c4126d16165dfb6475806dce647657960380fea1aba74dbc2d5b1a2a3653ef5aa397fb45a10631eb209c3072435cd21bc41825d55dc226b92c8657e4b83ceac9a81e0573e050b3ad602f73837f329bd4b25c0dec3fd51a8e2c067d0ffbb1e36ef06dee0a6e99e69d4be0090809848c78953af46fad51ae3b8c2efeea0f725140e84b550503962699247002a55218445dc6d7a802f2b9644f7a6efcf71e036c53dd9d92017a8c980004524c8ecd824e92b1c70b58764231ac98d26df03167b07cdecc05bba9534e284dcafb621b791da8b458614063c6111f84dc23a3543ce9dc1c0be7fab6747b71673639bec509bb1c7aa4c980e4170d912d1267170f40aca30793853b1cae6618607887c5aca9ca55d4fa7a485f6783b0440b21c64845484982c01853134135f151a930b89e4ce124d8df94c5121f13522e0206db903a746ba17b89afbed86f527018def90604785e3cfee5b63bd1631c3dd131e174704367670f619dd1cc64d2d53c4ffd20b70b5a0c2e32b89528081051ffd5bd04bc3629f62bca25dd5f785019f58955617d84befe76e34853701a68f10a155817f21b2d40ddd535585dff848d089e4cba571cc6987bc497ea01c83e38948ee6835088442b190709db21b37174e92aa4db5157fa4082e516db086ea9e57018f4e1ddb6e6c42310766ce719a60f3505ec1408c3a55a7649321f44a17efed2379aabec707492469a6198ef4e228f6044da2ca211896d3f6f6545d745be1899542a2eb33c5d13d510e5c808ad351406ad232e729957c20b240df897af8fc1fd6b93576ed711204631c79e6e8d73a7901abcd01be2bf1ee4df7068ec03be6b2c5008c55171fc8694c683d027e11d0e07e695637e04fa0aa6d9288085804a1899e7d9e17ef7a0ec6b63ac8be5b3015eef5108d1fc03a0263adbb2c82459fa48b794f671af7bf38cacccca3505de35a6372be45b1a35aec0dd460c7428201954432294c5a18332967f28fd2cad161ad2be323eb5d4e5b97b3de2ed378506b82b37d4b07cf0181b19354dbb957e39a3c14160cc3db6cb8ac255418c553702d3538a8bc9c19d9210178e2c155cbbfa2ae59c0e3966a161b32874e4d259198d3fc1c422d5f4cb87599995f9de122021029629a14fd086808a3da1f7b7f47fe738d56c24dd6e733e9e544e3ac479636823a916128b3fca7bfbb762942a83e0686d877e4c07de226386bcba8bfd325d8afa95efca746c36ec2e62484277d1a103d1ed4261eee478615ae898843070ca94ad59f16d76d2aecd578d4585db62e32b46b1e3585a7583bacd82c3d9a4b0c8ad0e9d62d262e8f04ce22bedacc9c7cef16a8574aec846cba61e1f2d44d77a4efc8269e5e309d380375c14e10d6aee1fa5c73bb81b599472ad2aeab2202e49a4b3c67f70ba8bd88c35705f118399ad108c4c8ac1501236952d453262666fe4c9699b18275b8a38c9b10a9b1945c531cebec45759bbdd0849100fe546f32d74e4ae96a90eba2ce93b04f41e8ed96c3f8b4ed985bab289530819e1795754615c67494fee21f72b37af1d7b9dc004ce0fa74a129b0be26868b30f05e92118b842af574534c15e016c98726cc8ec7dc787db1808f7dece557d520bf9e83cef77d4cc72580d650dc3d9924822497fd1aa34b6256ae0e9cc6c63e37baf29321c6fea6e90825b577d385455d3f7e4cb8572a603aff59c3c902bfaef35eeba34c8b89fb8dc5db547855bd5b47ec2a78a038fad4ae3a0cfd372edf0a9ff68e9fcdfd5ebcb84d6748978e46a413a74d6bb425b30b918a162be53f67b7c01ba21cba8d475a2e8426a3d15e7e5e449674799d4e15ef7d6b43f194a852104c30c98dfd81ba582e0c93a817b3644a10c1464d4d4a39ddd25977e334f20e51037f5d5825275c6e7354eb2666f3cacbdb422c38a3ebb41313092426bc1918cd273ead6ae951d9ec85bd53a9fdcbd004bd96cfa838998e3b6bb2e75bbfa3c412e46d3b4f8f798b4c43060a38ed821db06a3ab17db22e15665cfe4c6dc7866ff00c7b85178d89a800e0553d9af489074e3a506d6b24c346f6588eb8be982d5308064c1118054037b9e0789c45cfed4465e9709fd1e1e599421228db49fdfc6e37d7a784ecc3cd8f5f7925433ccaf9218780fba8866af923d90ee2350580dca3f0978ad87dcab7350004c775585127b0a5713f07949d159297ccf8e77342982ba3c4ae10ff36d8d196da3b1dfbde84d686219f1a0a68f84f59f39410d740e4b6d8f541a116d0f163de67564295f542484754998ec29398ef1d8af630f0c9b5fa6e8107604b45f9899443d2ef6013be8bdc1792f93a4440f2b7e6411e0a3e50638fe3398e201cab6ef619104004965aa28767ee62ea3190f8f3b6f494e1745d62e0f19647054d736f424c3c05df1bd845e11ca1ca845bb8ad3ac11c7de0579cc3d92494ee7f22bd5231a0c91569c68ce9bf4bc5c4b75cec2e2b8f4de6496fab065c79c9e012c137ddb7d4ff1dea1af0e292fce05258d5d33b6213c3f84d2a807ad0828a4d85c8162d59e8a3e82cfecf4da4869f71c4a7ecb948d72718c6f22648e6ed672a176280f0705bfb397a92b0dd1883fc83cf345a70ee8f7f31888517dfc026e31e75cd578a33a006591085385badcbb889dbea604107043037b1ffd14f9df7385b7e2c4a50a64f6fdab449300b162bb04f72cf793585f6befcba648c6105828cc577b5f5834b4e5f9abcdf2768e8b524b982968d38c177e199d835a4a6843c92b54e642306fad355fb896f9709446c323190c3c542a6f379589019a928919ed3ecc9c2dd1a9a41074c63d83db1dafced056f6fa8f299a7c6ff62b20a977300d555e4347888f3d5e3271b6eca5ab99d57bafa17f9cead8c8804bc8a68647299e4c7cfebc36b2fed2a8ae226b3192d1bb0620a562b52b3cea775fe869c02cd99cc7283481f0d84cc9c221bf4a4fa457fbd876f70beaf9802c58770e0e81d32c1ef6f17497f6d745d7806c93450ba26e21c6a8895ab55c3ea4c1bd4f805f53f850fccfaff6de028163c66f8333fa883155334ff1f3ae891c912111a0208fc4d7e79a23a9bf554980db84c2b4ed7d402af6a6fdefb2ae1de02ebdbe462d9f453a7074347478610e77aa402d5291c5737b43e12a87c325092bd09c25287f81be391dac7ed3f4846367013479d3f55d85f5b7e5a17e5f7935eb4f2fe32083b155151e22dac873761b9ae18f28258501971f0d7b65ae606c4b2b1ad6142019f3644e15fee6140ac5a42fd36c1ca891607d2b5aac996edd1a2f659ad824458e224f15bccceae5c745beafbd46b7bc97f2ec4c98eb53a4f13b45dbe8ed272f853895663658921e00b2f10c4005400224217a144cc11e6b27038aa8333a3aca29fd3f677a4d0c7d2dc05d29e651a2a706be53fa4c5ff2d9960ed9a15b0f8a2c664ee3b86b2d1a879c6555b7fd34112e69f73d66d510cb796f806a41c168adc3410a04536225dade7d51428b1ef20745d54bcb9c3b0a237c1a3875e54d0ae79e21d4cd3844feda31ef6e70641b3b16934a89b30b6450a6b4962397b0540bb8a3cd403496583ef372880c38e99cdb2ee12fa35e28d4ef804b8bcb529833a47d94618c804ae24bcebbf57e89279f64e67137bed15c3d508f726a6c76597dd1176a03be8479be9bc5d42a67355e1036e266159d5d180027a5844842307ff0c85780f4c6303596e3be5a1f80e09bc31c03231fce606f028128d448d601468818d0f14f6c6382721aa11bf5120acc886f6e247cea5facfcdd44f385ecb70870134680d263efcc00f5de640ee1c29fa8804d6d86471e07f47a1fbb2946d7d2169d70832c1578582c3fc9ea774f314278e88b6d5b100d15935c9525d20b5c72130e73bfbfc90f4641e4cf0c6a63f54b65a1b6621cad2db5fc8397019178e2f97f4e25d6eb6fb57568c266ca22fb6874407e6109d0e9b9cddbf183552d382a587a663e2894427bff3264e970e077c226e027156f7ce6ba07affe6ed95d7493f0cf250b869ffb58cb08e406b10c62e742300f9db87e939d48703200e6fd19b67084cec3d2a5f6a3bd9f8713ef8cc27ca27b6f231ef2f8953151fca71148996e6f76a725678ee2017358e1b91e744a5789199b003c31933c88e2967873e95ab5b231bccbcaf4713d84e6da7c0007451db943cfc05ba5202d3f3d2d7454954bc4b461e3caa075c4505be30bda539a964e3f7a0bdb41bbe88f5261ef9e7e7b6a1c23113111d0e1ed50922cabf4d5364b4612075f50a9c1693e4f63f53dbb041441f9d1c3f7e4bccfcf2f9b86f895f37c2f11758f8e586c0bbb75e8d61b8ad63e0ea119886d576bbfc37718242b631dbe0b9905c11dc093ff02e00d0d019ccf7ac1325dd98e710328ff2ad8938ee4a22d62afa8f7795f396a5760b4b5cafeed4e02b05a9fc1d856ebc9ae8e91037fa6c688440503f54bb44c33bfc221e2f7f3010c4df925e586b2e59584cd8f6cf178aa4179a1c604e4e777d4c8463f5e9e905af3c05536373cd479a4abe7b8448eaa0af707d75a250a34dab7865e07382faed858ca3d034fdaca0e896d856f88a231405a3e3d9023119b0be73793ecacbf8750400fb46ff282797bd3fa23dca17187e332d5ed1210c5c70f961f46aaf451278d248864bae046ef191710e5709d6a04bc7870bead3bcfc3203577b56908dd46c8da82d586663dc4d54f4564fe669d21a2a414cd95fc2563a91c83e60b87e9aece3d3eaa354aeb07fc9f1dc364f2da2ca85ad3698d43cde6ed4762bbd9b6643bed80d9cd37126504ac60bc35adee17f23b278d543f6e7ced9376b76de06ffbd528dae7a556a87f070cf07f2c41a1eb1c24a96373349f509720702cb167269b1b34fedf80976b7dd0d84bd236bdc375578290c711fe1cb7a37962928f3d19084afebed5cb7c84f513c5181363e3cd4403381c6485edfa6672c301181b6bd880533febfaafbf6787e3348e97f43e582f8ba62a471833e5e0eff0cf9daacd3514c630e2faa2ae3551ae598947d7c25ab29914595d00bbe093d3a5339f527484547af7a1a9f0f25b4dcaf87c9b4b188297078eada066e0909498e745ce88bc80529521f06be6d79593af902c8f3be8eb84d43f7ee875c5d8cf29866fb6896523dca145ca1ffc523fdbec25959cf26fea45f0bdda87b149f4b32d768a991c5d25f00cd1eb45a5085b7bb7d97ab913bc1364e3ef9986063f66700b899184ff075c2a747782c8f2b173186e3250e20afacd80763881511ddfeb3c8590f2cf84dbfa6f234886bade8ef93882ed89713cc3426fe0162114abc4d026c0f1b53cc88269f10529f05640aa201f06211f7c576c1d5d258a1b70c8804fc367d6d6579419fceee5892ca9b9da08b68bc0fb0661ce35f5dda80d15e0c24277ed2e9e4eb48960fcae3a1cc84ff72d1324c9c125f35be0ba66fb963ddeb30f8e627b6faeef2c8d4f9116a94be6474f52dba8667aae4bd16873336e1ccca619302d89d6f94590183749abd99ed390ac7c82ad1e1dab319bd71c3caebcbff71821214d2be81a7ae5046e2da9a03e74a974564457a18216cb09e6f3e4157e64309600d125aa99750a16b290eea2f208182586b6519c64c0a86d735e3ec1123380b85fe7b99e6dd3b31be2eeefe5f4b9cddd6f41d7767a62ece9ede1f28cedc5269a7f1c8f6fe5ca69656611500c5517655675dc6e72271d1338fd03f88167039877a59e669b0a681824e4279b289668c6ac4ca11748b49f83c6b22a02abc486be4eb81f50b4febc5e537463ab8c6bc72930c292649aa39e04ce75d2723c10a557bee13508ec061193903d2f18ee876ac786c8bcd744dcf5727ba9dc0944144ea6ce9220f02a8584be81617ea026ccec205857d03232d91944f9ee07af4577ef6569aef11676f1f0725c1ef5abb3b7553b808e7e961dd7b9bd55781f8d314103a531d3fcfe61db41a5a98a7836641ea52691f17c0a3bb219106f3ed8a2d1000cfd51dac61342e8c6b48d31771360e8edfdc3fe0b1e5788844d8f43516a511b40149719b4c69e5508303285f03d61faa8904dd0cbe7d6cacd629ecbaad9bdeaffebfb647d5675326a217c21a1dc5fbf2a8d63ddd299f9489051668e983b864c7bdd1c0de4e883ac6c52e72f5112c559af7e0ee96647a3a9d0fe3246ce3d52337d40b4c4ac8155f4b9795715719843ac1f439f666e8093801aa3831aed2d39f4367ece0bb9517335275323df1397c72944b8b916c08fd4ff1c37331a11b3610f86da882464a150be889c7f89e0dad57ef8462e3f13268b176449864cc9aaac4a267221644383b83b306d6abe2298e8987d669b7824bb7355fe722a3e95ffad4b99ce8bccb4a79a4d8f9271915ba65d58fa94c6ef14b4e298ca21898879c176b01bcb8bf2827a762cbf2c7dd2f0b35e7b88ef25bcbcc83bc2213a8083db34bc7874f15f08572da4c40c89e19b0d59ffae777785b41fa8f88a7102aa6e76b75660679d049812e3faa16ad4d306d95e76a84231c61f9d4aed40cb9f81165f64b6831f02d266d6f2a516c192ad7f0e0ecfd62eab20abac1c3f0d6a6300ba2ff0d60c3b42d895b5107afbfcb7f242963b001c2ad7ae10649b36508e9c014b57db01108b14753ba5eb1adfb0239bdcd49b38ad62960defcbf87797c08413e5a4f9334df6d06f94ef96035d7a1ad8af9b062e2e3e8e9ee98f8adb98597b24e00bd7c45e7ab3be1d352fd40d06eadb11b57f929a40bb37c7486626a3de729c6fc88d37bb1d5c48d52fcdbf38292ee9829968e57fbdf7fa34dcc96839a6a5d1521ecb486c8fe6eb6558c6b3f10962c4cce5656242b0a9f5dd07d3ee764274e3d85d6190307a2382cc08f0024e82d300deee9b0ba7e2c9f6eda11be16e1d80f25182c2a5712ec2fc5e11344a3f8fca29701350395548a519c4589226c6ff631284ca944b5213e8ffd5784a51bbb927b604b522a940202fb269f7cde5c3acbd48271ebf112408bf3367e80fc1b4ad7cdf484c8a7a5348a38225027255202ade0ec7a13cb50f6c512bec4b3ae40aafe30799c0885e61f5542d84d5213eccdb909e5d139804dbdfaa6bf5132cb474f519c22f1a83ec4320b5ad89a0d173a1c672fedffee913f46192a2b188607c782ef140d9b6a22f9047fd9553f7834e09bf6663ffab9c605e33b0f697338e4e76d8ce830280f0e799e57fe3eeb33917778274c8fd42195b01f8358a63cccb37c348abf5514c711da0a70860b4d43448673c4c44dd9f7082d6a4eb3f4dab567775f1b2932f9df93b860bdd0cf8760f7c5176dfb87492631185b1c747bb0f35dd9cfe948b04531c7fc55ef5a97a33de85913cb48e483bd36c6c5745f8f6bfb6e6153e61948ed771b59c01afc82aa9e38b8c22b54d9a826ba5be87cf51131b3a77f706c77e281ddfeab50198c1266cc908e40f416d4a0ad73f615d0926e2ec1190014918612c9aa7a1b49ee8ae03363b89ca7c41b8eea1bc78c03c37b7c69f38e1bdd6c0b0f021820d78df44ecd7d39c9da0e6b2e91bd82819ab4111c8252641e7fda44922dafbd4b08869316c71e159f059e13a653a6c44217c8ef69e7b6d7b52cb9e12e7a556fedf4ad4ac36a3c1c62fbefd3ff3b114fb3ff7d4b1184f59efbe86880424f9ac4f5ff8a922448d27fda9f8a6906827507c2d1f9d6589f901dd99d6de00c8485414c85c19b37947d5d1c47e58caf1fac521ee785c0ce8f35ab3ef49d1f9d09b7bd3cf07480082c895820112fe9fd77b07b7a2afc7beb2395964d3d5386ad104a07df67e814c6577d52cb235a2371143d3d5720256dc747bc4ed3176a263f6936a60271d15cccadb4c82f081db6ae10e19b49cf176617d0680bb4e4c8d583933e81bebc010a6e9e8a29ebe676b07af7cfa34b0c3458e96f6d5bbd0c7820bb1973166c8f38462143d3c3ca5be325e6f3163798c255173ed46696856b4a6c6eeaffff2c4c92638ea43a018759c014369d1d71c4d30125ac935e712c9f90a6009fc8bface86335b013e74139c13da5fdde876236be4b923293b20a992834cdcdac97ba721ea6403d9a215a9611e759828cdbac63c2f53ac4243f457e8532a745f4931b0b40676201fdc50631a9bc2f50ae43b36b506832c0b1efc734efe710840d302d8ad6bee0ee7b24032caf769f6c4da26b3b2c14c516db8da55400843dfec04d357f806d7dea7eba9005a54868ab27cfa6d6bdb1ea91b68b679d931cd808fecfaf16009b8ba32e70db72c69b3040f8d3bbc0ae371f97a0233638123669aaa543d2c3a15f67a5a764c7b8ce1455909e3a4f962443532e2f350c64512dc930124b699a2afd84794c2fc649573367067f64119499dab1e335c3c15c938a1ddd8b97f957a7db3f47c5390a3d51b5e98b511c6eccdb448ff136c3548e403217b61ef6c2d53767123f6ab551d3e2bddcd4cd49f10baf7b4b5591376e4262d280dcc2ed10ab8e75a92bbf2661fff6287354803e4c74916ad4b6fd72002f4343a1c94fc8843eda05dbaa280dbe47301ca10c62edcd257e18ac573c8131fd886864634762cef942ae7aeb58ad283956c2ceef07e3ac7c282b17341b7f80d772e59cc8834e988fef5203a339d77c3a32c87ecfd88be5be9a1cd2f11511efd7493a50a129283ce934f612062b6af3abd623cc942cd1b3add22be233ba163a9051fdc10669da27f74428d3eb0a390e041c3fb5c11e785a6c2d49285c7cd862cacf46fbba6115952785482204feafab42f274ecf7148fefa4e309cf07edf104a5703d261d407a1db02eaf5d956f842d293de73fc9279a2cfef42a5489db1091beadaf6daf3c3b9cdd808bf8249b7101b1e3ac4c77868b7a64dc826843537eb491bfc3ab9ae5f5492d77518cb52705135b90958732773fbfac5395f5b3e3cad1946b4495cf1c3e00769de2d885246c30e5646584abfc7adebc9c2f293177b24b067957a23042450797e4e3add106ded9ed14b8994adc38947be2f71dbdd16d1607235173a181de4e3c927cfcffb3d6065ae9e03419fa6943edf416383fb8038583e99aa7e9d4d6f1710261f32e86be10809cf66f3a8963f1819712ff24aa9ac1ba6a6d0cecef9b10b6049e8bb0ca6b44ec24834cbd35f953e1df0a89d96796617278197190b173b322df0b15f7cce73ef9d0727c2d22973cace04962d8dafb11af541cb22d876df3518af79f5afe4c34a0c7799f28b36ca7a8df14a94affa4c74366872d295d8afdfdb880c74c86553b43ab5f67c3929ef691685f9b51a1f014651601822748f889e5bd7afab6b3625ca4b4977284017d860bff2c54374faa400ebc13babfbca10035b34701392f78342b83fb0ee8bd4a8cd0043672afdc8f3d3b7750dbdf9b0bd37257c2cbd73d347e31d4b077aa80dbab803d628badf1aa3c3397ed47445df4e96d0a7bf0af2ed3d5e1749e7920ccc1a1bb5d0366d0e0d0f302e30e12a4ef2eac10f004f80525c12063c9d53750fb1722f284670999939ba0a4d4a339cb202801a058696e65f2feacaf7121483f9a0883dc8632b9e9008bd5b2b02240d179a8443837a63e81f65717ab22044f6e228206c7bfebf49b1468c20a7f46e90dc7dbda802fcec692c8d6794c197bac4fe12b4adac49e9d866025dae3d54b2dcca8ac27ef48698372ebfc791b41ce912fc293334ebd","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"2927ef539a432d3152fe8fd07595da4f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
