<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"b868c251b12298e4989a05ffdc00e578e14a5d4b6a0f677035eb26ce57fcc7a77be8c1fd0b9dd1f30ba06f2374018037951eb94b820efe1bb67234b2da04ee520cecb75f73ade31c30a538f5a8762e8aae560513ac6128aa5314e24723aaf96a085d8de577186cbcb5d3f9fc4f5f446b53c3257c2b45202a0c34c9d61d85a008f9430d334856a6a3e64de0e3eb473fa0265f819d0241891b7d4f0e3c4bf0a8982d5c1c788b6920ce286729e82f76b2ee50bbfd5f0eef0b986586395b3f1bd65a20033e7d5a88b5dd94702219f6e23127903bf7a61161589c0d3828703634fc99f9b872d72460dae0c09b03496b7ffb7c8e1fa51f7559cf417293d7a9b47700305d25e4674f8a239c5e2c2265c3dfcf21456d3794936c1786f29a86a1c9270f84c507e07188b4c1ebf7f7e98d1046cc124878c9e3f33756215fff75a436058f08273a0a007472c03f08d495aba4b453cd48267f0f1df3891b22eaf3ea4f0b8c54a8f99074e166040c1623103562b13420ac0b8e09d44a899573ba96406d029016a9f5c6bd376401c3b8da51f5a4ac750cd581dd70bc8604493e35d1e7eba14da3da63c013cf41af8c343d8ce0ace60b92965dcd70ffc7182708f8e7ae73146bcdf5a11754c334136468e2afe10c0c7e98b50fe75fb710759217b0fd1ade10bd3d61023b4a572f4ddea7d869f367f6627f08f1b50259432a2a0be0b0a5ab7f1c4fa7eea3e19cb822adebce50883b22a6f995f7fdf7e30362da2e417d968a1a73f82bed02890a8ef23fb033e2e6b4e9582a150f2a346c8a81ec2e776f1a39af4774676396576950fc05b5deb153547817afe249cdc5fa15fe1d32fd167d34d8ad92dda748a1a7fc9a001f304991c871f0e84e70fb7709a63684de82839a0c1338bae2526420ce3bcb618c4ee5383a183fe8998c5ce1885a789cb1a1e77d0ff663615ad40307fb38bfe8707b514dbe5eb4dfc7a103bd7b292f2ae81b4066a20bb4b585028deae453c3e33212457d1b611ab84a1354d59c95acdfb6705cf100227121786916139ed9f517538b633c476bd63df2d43f02544ecc7b8f7e8dd7446f7488abe7aaa42b214af64e868fb70f023c18e29606c38a3bacaafc87745a290e99bfcb6054ebabd78210b640b94c8460a82ace6493aa108190791cd8724da449787c8125063b4c8f3d2fc175fd538bf6697743852c5cc80e0ac5a3488a0913b334b86ab8d665dd51ce31ea761b29e2cfa50e2b15036675f033bf19a801dcbc1310cec495459bb20f49e2af21e9fbde67fbe51e5ff1ec6accd3426932e93c78a487cbe1ea596b5ad21cb49096984562f023395de5150d9fd921ae43d711100e54751834271798a68f71285eb7c2fd9e07e790ce57a92f8f44dfde74de2d804a117e63e17d25af6e49fcae2bf46918f5d31bc10a5252bac85690dad05ce04e26d15c8fb50b8782d924ca5fddc1ab9a639ac5d02a15e8b827fd3e71631edbf15742fa4964277662daabfe282b273f2a99cba148f1f5f7d0884e85dcedfa68f290cc11a7ea6a20e3bf68f91b35449b2b32669eae73d169d99f9093e240c825cf99596f94f18eeb278982fe876cb0f54307180349aa25237d6b5e944fbf079055e50ef4c69f09a22bd8c30cd240071070c8a2b82f00c8e510b2d3d5cd2857d37c6420ba6dc271bd565f8899081c6eac3fdfacaf4b69a8095988168ba78b9cdc0adc27865a13c0bfdb2a49220e78c773133b144f1bcc0d90ad13e97412c0935f0bae7c331c4080a05e3f57749647d700bfe84352968a3a598b5cbbe49d6a546b0a4bf3b410d7bfb3a4c69f52acfc83692a872450ab1703364b1c24aebef4ca33c4f3d99eda3d1502869847abe68e511ebc8eef1e7c5c0a8b62bdb8ae725f2cc043553832dfd65c8c9b826f3b91de8785afaf1d0893b48526737fd10c34576dd8216696edc4e77165743295cd8a1b82c9425836ce664060f8c0bac385d26a4efa7ff8b914fbca8fc5781543029a97433c30496676339795d1f6c5dd42e497e4464cf849f26a13f45879bf6602cf3829d8b29952f2c3f947f2132bc36df5dc93d112ade7c32b033feb6435bbae0e9276f9ac7da5c1bc074b6c93575d37f0247d543ccf6028041b3bd179b3551a4df79bf5def8af2093a18da68950bc99991cab428c88bae1ee8708866b4ae0115bd881bf417c9e7dac139fa294a2b31a9cea26caf20d16535f801fe63d35d76201ab1ccb9114d1e665286a1403d736a631c680afd3b6b014bc90eb2f30a09d21ca9620251d1abddcbbb035add6e285d6e07a96831a0d92d26180e59e22823637040d124106228f07fac01fa82b3ea5688a4a01fab225ceb13fe31c7e3e6a03a8ff898ffd66cc1cd5f1573c9b32150fba38e31f24079881090fddf2c102d5e1d2bea5ae69703863e0667b0a504b39de236cad293945acf647c571e43dc64d28df4dac4f88798595cd19148d93b07988816e9195a415168d1f355d2aadb195caac907b3e0a3bca409c5022d6aeb5d327e24056d653423de504d85ec3ce431bca1faa8ad1f82fc9872c78d4108ac8f6372644e849069a9c08be01a02d2a7532209b1112c318dc57652fadc7e2048972a3bc0164a38557399c9d8ddfba225d150c2a54d801ae1ad9eedc6d5706af714f0c2fee67c2938563084e4b4a2ad2a8d2b1d7edb6275927416b8c4ef29f433378b3f2cf2ca6d0ec4df4576afdd303470110c5693a824c260068f92c705c14683e87e6ccd79e137afc305b2fdf90ab00c25e497afbf29a78a2571c29e823d21f408f2f414356b381557dc82c2f93af20e4350d02214d5402d33e95550cdb3bd9eaf3a427d5cf04755a20f8b659b030d90cf8f215d7d4d16333c83c60317052f8f091a6ccc123c7117698b0ac76e292bd3ee12127cbdd92dbb8da275d809cfc954457f1051fd168942557210f9cfe135b2d890528f5dd57c0962ce4358e0992dad550c90657a6f8fa84e3406f32c9d724c262e43eb6b6a224210724a2b6262616ea29d064f687984d8eaa796c0c3c2912187b2018dd4f8c2864a3e018078227d636053bed57ad37cddea2c980b08370fec134721d8ccb7bc008456799aeb099d2334035d8b711b2c744e681e116f564eaec8cf075155cf38bf9386c9cf36796ae0e3589c67ad723983d4916c91dcef02fc061ab7b26b3382b9c605e0f34bc9bfe4568ac535c79163f1a2d1a79f4c8a6b4f15309a666a1a06b09a4c81e0708c5dd71b042e5e1a858d84f16e5a571b5e9fed4a007c069bc70659558abb69f54cd72e58f4cf0445ae86ffbf0c15ad15eefe7410f30268836629ca9e24b18fb64b3dde918d330e075a2dd36c8f68c80f4f2188504bf5a6d68cc1c93e9747ff2023f6eb404fabc33f35c851e1624538b11f1043a585add405ecca880232ab0a9284211580feefe2d9a24f220e603e1b339d1945afd83c6ddc51ce8bff8456681369fd7b0e0c0e85ae0a67ef8688c33331710de3349e49db1f3483c97b4e8ff694c6e12b5f0a2bce883f0bc5331afac5b2356982daed7a687bdf7746ec2eabbd7ce7c1733688f59dfedb1fb212473a87712eaf0b417849621be2f8e855469a580ebf83748afe34e09ed579b688195b251855c05b45b1c45d2a6ac1e8e883f0dd754f26e1948243a2dbee5ff12d4574a774d74e4e31f58a32695a8ab1c44ddd1b20534cb8f7009c647a681f5abb3d4c44e07327de8c52dc177414e2b97852fb3de75ce782292de473e604473d69858a24db64b5192b3026ccc73a640f967d8a8c19b4fe4b8da6f2ced3604018109c0ba1e5d1e012329b3b3e7a077164ffb59b5a4b0c5916a12976f911f8296e59bdabb571c562e507feb3849c05fc43c452f8da61eec0a5481149ee8460a0d08c1947001db920a421e64c7273609170c48ada2cd00662ef19d2f699f38f4701a4547c5c6be1865155eeb7b586e0cb64c46e97b52bb88555d6f741ce9bfdfaf2b3121fd4af7d7ed7b38cb4203f66b311e6c8a6642f20ba095a6dfd702209144cf47a14f9b8eb10193222b2843f810bc4b45d19308f5de01c560127583d22a068a9e93f7b4cebdc64b9b23bc76724b05fb1daec8c98893e17f3d8e7cd149fa0ce3bb28db518df3a40be0efc9eba0eeded2aed6007dbe306873db5272d515f2d8d94bdc9d0a350f41df17c2e27ebd56957873201faa3da3459ce08ca6bae790393181fc7671d7fcd7b0d638f43e220f236f046f65bcc68721ef3a8f69947e93dba0e1d7a7958f9f4f010fed15d92627a2013aab477b539d74a6dea37b0c50ef33885afbedaa2eb85727b890e5c6d8a3212d1d00db6e61cff47fd2ee0077043880a81fcb2c51b5dca15ae244328761b3fbd9ed3e84012528972ed133f39a2d375ee1530347f2876a677a5467b6b1557387eecb703e9ff4f95a7c5cc3bd57ac604ab5b085a99346ddea98dad5a6be081b63963caefc973fad5ca606d3e2851fc9a98e5709df6b80dda7dc3c5e8155317fd5e5adf33a823c5a4806461957b6d52c06973af23e5ecb063631a902511431e3c77835e70868b4a2c98fd4d1af586102f366e5b5e089224a6c580f8805fe712707caa75f6e8535d06ffbc803c4e4cc1da7441739f778c425d4ae51cf1d522f6d388301e6278220828d0b25b070bbb5305df1ad275643396f10f3a26be7066824b2d32b601ad36b49e10d569f98b442418a5d359bc76ec2ec644c71dbf754bf2ffcdb07c1cbcd50ef07089837fb1ceadf58cef28def1a0de22b923ac5192f991d16efc9aa4595ac4696f4e1d2cb5205a45b9bfd357f489bab4bc447bdad9be8c547667317ba347b21c8e6679b4670123fb905b5d872675348f5de00c9874736c98ade6424870e3b4243be39319787630228adae004be9b0b935c3d90a679db84384fdf5f81c39eceeed6a8236f63ce5e4a9762656e0a020bfc7a50c83672b974d6214b72bf0bb8652c487c0388e11452cb4aa96051e93762e1bf3389abafb432e0eb8e5d9139e1d2fc8a7f6adbd641673d47579a8b6410dd5db55552c7f4219dfc450e235e63054f475cd7b2e705859dfa1bd0ad2250d73b8a7a26286c89fd97acabb0f8c632d8cc055d7139e652a4e7d8a8ff0ee01e43ed16aadd3eab8d4533283b0040ee8b411fdafca2363ff2a3ad9c2975176322af5d809e4cdc37e6e2f09581ab83cd3b807ee59c9f9f9375ee7258d03e8a6a634a80d45b4e9bbd75dbf5d3641a5069828f0bfa4e1eabea3ac1d57072ba228d750b7de30c7c372eaf1afe514863b10dba3654f335d259148deeaeb0fc3ffab4205f420f39c28da7c121f4a9e64d9dda2fa50cda4e6d8fd33f22788c7c00afe8dd5d8d1798e47b42db247d08b86889c8a08fb2937dd37d93fd63e2a070d64d84cd72710064144efa520e2b4452db4220eeb019a5694fc01138a9378e0b7fcb4a1003d42977bc14b34cb74526b32e1cee55f8ff014b9c2e3d2f1cb1489be07918af4f1acad131ce01597b45f58e947e023b1ad3c0308df012ae60722c741da7f02b80c7aaca9b1788a8521c300967eda45e6b1757ecdeedd0441a97f00bd81a407fa90c69146d1e9074e7b00810c0e955b82f0e58dd587a55ff78caf4d96a762f16775078b8bfb919f6002976b2e484b873903d7e741303fc824ce7d82c635d87f181bf2733974da344bd645542a42fffad8a0d0cff891e89d8db04314f4a7b61031dfc9a6a390a2aff2a5f041a75588fc204f7b9ebcbb20467eda51c7ff088b80eb5b7cc7bd89239442b2661752f88a163fab2872217d9a3c562b6fbbb0ef1d91eca052d77896b65accb49fd6f76006707340423169f735cbbd820d1571685a7d8467fc30963062d6c8b1728795232ec5c944f3519c46658729c889f59eaeb0a9c7bcacb165da175250ba0a0b5740bb4a008062fe2026c8b6917c30a8d081053e72a506670b461696d6737a03e230f6e9346390cc80659f9b781613ac7a65e7a3232ac2fae193ae8d3c254bcc1d66156ac0b784ee07d4e16e4dbee05d48b9b7b823d93a07d6089a0e5066743f1d8a71d92a5b7ef1a13be5abb6225dae7c5d9e52492967e3a3cbed6aa6fa9fb9a1806a1d811f74205fdb51cd748c91d0a71fa1fc9f86c5d8ad150123fa5d1e7a3422094bae3eaef5425fb8095e4fd0475abb549a6bb090b7ab46a03717efcb6766151dae051b7f4d77f4ca8ddc14c20a99816c58bae451179cabb9696e9ab5346fc6c5910c6695082d0d90ba6ff19ea36d8296388e49f9a687ee3f4ae354d44cce6f18677f345344f8584ec9d245cf976d426253ebc106583657cfadd5b9f39f42809700d4ddf0eb1249b5d64d053eaa8ff19a5036e877b285380d700aa21e616e570178c9f762bd9eb981979542e7901bcb1082c5aa0e4f0e1f62507170b257287ee690522a6465c39f6874319a1c0aae44dbfac002cb09b271dd70053942b393ce916a2d0b8f6991150ec9916caed61cfeb01a463930d34e04d42928effe8d1436c5ac0d6373f94989ea3b19bca4c904ac7b29c10c16482e808723707019fa1d80433f8c9d1c3f4a67ee22876c02a3815ee9c6625217cf17c0970f70dc5d481a8928ec268a82223eb4b1badbabfcb02d11a2568e090551721f3b8ded301e4dca093a766c08725b312e3c654177c36ab147a82bb1d236b4416c739b31f800b57b078b98674a155e8c25117824da0dae6416fd550cdeac05e5eafd64144f3469c2e31f744a65e4bf0cb0b16f910560f951b23bf55aa383aa829ecbc1cb0ee079713c27c67e9b9280a6f1ae62662cd9d02b653cc7ada0e2b43a17a65129315966a194e92cdc481051d4510812168e50225e0eae9439bcad1bcccb46c321c26df9f68dc63df449c28381b27f6041d7b63c11c2cf744135182c85abfa3b6987cb95c595123dd734ac2201be1997d82e2f52432c05062ef8c5d181e1fa4bb531d8d7dcaa0641d862d88e3206940d1e525ff106ef345aa96ad5223430876843e21179c2dcfa0f276bb5d6ba2cce97f5c3a2a07991e051ca2ea7401438c0d4d1b5d50f5c04a371f16e6969b4f4aca8b44a97f8ba71b27363b362e4360fb68ab493fd10fca31bdbd9cdb559f8dde44e4f7acd2509fc0235bee2fddbd2a0bd1601aa119fb807b486771756c410f6858eb8eed618d79b9c54b95188ddaeb30654122f75d7e7d30a80c8f62cb836a48704bdf88256bbbb104abcfb40e3e94aa3529a7610e2af1ffe1b23b32a78cf4ac3fb9477b555a13298f4b11f6c88945084370987b08c9def4fda7c4369b4c063c1547b9bf3a4978d6962e9a2a6e8b0aed582e12d775ae02dd67d15d0095eb897a53d234d716c344234c31b29277e9d8860bd2c91474ad5b5472a319cb7f46aa70744dc70aacc3f1e10742ddfcad2861467fb18c80d8d6091e35fc239e25f7019ba79b4644367281ab71f75c3fce40b38d4a42b1c0648bda31af1d7d9338042b21e0544b27ddd2185c63c10e2d2e10826ec280218a8431a0660041f14048ab90e36ff41dfa5cb81a6a69fc9ae84f4aab193fc09ba1feab4bd6d6c8c569a7a408b40667a7a64b860f41ee9c568bbb7384123fb86e6ef4dfc29839ebbee3625d233907022c468bbdcc0fcab670b19ffbb5615b4e8dfb7b37a1bd8a526056ebfd65c68ea1815f7546ad003309faad31f449987f105d702ef59a9a0f066e883846be528a292b71e10c4fd2ec4440293056576338f59e9c933de1b592d4f6dbff787afc279bbf98884c38019aa0a2ed496ba2893e66cff2210f7f45522a1096898a3bf2b2d8b4c750b70c6fa93a496f4722765c8f6f9001ae4f5262873e0345a69e502f0fd6ff21b2b0b5fc0cb8617ff699646003bcde253afb7cf0d2374d4bfda905c83ed01039648f94a31cf8492ff44b4142fb99cfac28297f5d39e43adbef9a45e183404a2a7f9f210a99f8fc0bc1d7458d01ab6200f5e58c26df87b90d3c219e5082ab3aa1a154a44c41c53170faddb6db37867458571bcfb39204e0a5fa321a77e463de3c32c0582938c6daf8aad5c36cdcdd4f121966f08a898fd3376eb26c21796c5fe8b3012c4d55cedde75cdeae47a92a6b8e274f31201d51552936fa70ab49c7e324c9b79a6e88d4ff5468d6ee19f85dfbf276152527768e2f4a5b40f6ffb6a3a8e2f12f0b2e7b7ef503065e579950dc63642f07bcd071891e799b2c9c983d4876bf0b25581bc862c4a26c4e3ec3930f1894b390c4f36be1ba1647ad58aa5c544121a772d5e5c39c0a5ff3c8b5d39d76d8dbc639dd90291c02dd7c7c5af570dcbef8316d8dc227dd19258d0d5c8b3cf523fea553c54472db928c328385189d2bb0341c1fa1ed4876db9071e50973392819731f64739ff4c73f79d624222545d8fa488be878d89dc1f6cf8b5553e0f72fc89817779f87b23c4cb76889b7b4de50dc366c74be076d32feb9015c2a14dcbcb4b6b9b7456f900d42b791f5be901b8c76c2b79daad1aaf8d319e2dd5eeb2eec3ea5d61135370fff0dc0d044a38324ee964a546c804277f5042a060930c80c02244ef8a94f5184510ade1d7701d509f11a768fc3ce2973836232650a34bb6f0a6be9dc9cd9a04966d6897d006f26af6a3c72c3ec8b55a7894f3f19acd8c8c72865712141f58fe05600cb91e0ec30e3c3607de21f1ce0263cc5128626d3cc1b029a56cf75d0dd60ee1c91c9ea288b0e7037fd19a5b33cc0271b61e9bf6d34c9e72830af72ac56186e1b6f178ec7f72816ad3f98d049ed1fdb4233a88b7dace2985a19558e227195833c5aeb39e881b45ec8368419de23e516911c0841169f39db97a1a0679c789b28325f7b90309a62330e7f0b532c6f37bca7873cc35c7bb4597f94edb642251be3230f4b0440d7784687fe4799d6785cbdf19e68880982a13f19ca777b13db10b025a200f71160f6519a2afd4ac1eb36097187077b21ee133c244340f2e57d5827c2b408afaa9584b8b156826534375034fa56ca66716762282040b5dec0c72946050483461a4cc300a64d37c4cd8f69ec1df2c692737ecf2c5cd4a58ec3abad79d46740caa1b47e368aef006d3b43ed0567be381a7a5082ab8d237d8dcb94b0571147e72850a7e127fda0353e9ef12fe3780944a037c9442d182f581b21fde7bad124c3b7d1d6e6cfd795463097f18bfbe14355b9aa94e1fa610e47a8b733526b1a2e60bfd4f2a5eac6106797bd6a231be9ff2f9db3bcdf91c48f8d912331fe063421e73033de0d944454b0ce7319b0e0c496e176bf6294d987781f23206c68854b28a1d2361fb88d894f04087b47afa1f587dc6fac5fb6ae47e9f560c691b7819cb39719be612c0b05973a15e895e65198a0cde4b36c5ad68c0558f02e5485d3b92fc6cc3127acb3ec970fcfd5b115a59a6cd2e474e38602fc58f506e0a37b19daefd256d1ea5dbb05648da6863d4b2462fa9063bc850eeb1f420da17d3bba697329599cf57cd876a2181eaf2fa332db25f66709ef22c598e9cd2dde9fc4eb24e3ee702fab7b9008eb502d7c74190032fb38960049a2be0a4e187086a8c06469c71d2ae004ed1da6d4f488d99103f63c8d3c678b21fe0e89abcaa7ac50f2633ca960d8df16149b6cebfbc4717b7650fbc16b3e72b1048c26d46e5c7d02578731587c6afd6d30decdaa8ef9fdc0774528ff030d610cb195f6b32a7461631f65859a5060251c0c628dd52b3e8b3ebd448e91fa37b2d6e5eaf1757fc198359747af132c1e36c43bfb0747d55d65555ecffff0755bb5a69cfe1f0bbff7c3d9ab20081e48f817a202831d288268eadc43defe7b020f124178ee979877114b7530ac2182b1f0c0ef211238737d373f084cbb8a77a8928dcd66749946c41e72d1fe2a751221aea8c8f3f4f692623dbc1c16a96064fdddc0412f5e163701890cd7e4ed5ce5a9009b7a45b2892d5b4d6610c002b534b711dc92e99debc643d32836d842d8eaf909ce420833ee282077a0aee0f3cbbca33d6d7b481cf75c995db30e79add1949afea67cf7b0decd081d88efc76b06effb4487b3e69a770dd611e51eb3b98e79e73e6ae4bbc9d80ee5d172ba50d76db254a649026a9c493f641d42d3b3209811d2e40e3483e65b92e66f100eed918e45d1e317f11d75fc269ab9e9b6c6e5d3028526e729079ca5f78cdfe75d0ae2ab7d72aeae734c660d8340e041f6636abce147ee0857b8b98c059d90e8a639f9635b1d2ca5ddcedf33ad73e378d93346854f1992f615136334766c4389b6ab3ed47ae1416f34869cb74087236ae712237e6dadcffd9b8775da014500d4db579f3ea79715058573a68618b5ef737533f079a269a9d731bc69b3ea71646c094336cf1c02c01855e337673b690bb6f1db2263178e694f3ac7c14afe4ce216c38ab628b9c5da767b844dc478aeee000cc08d437fa9319d7909851fb77b6531c3445ded44c85776a7df480c5834e2f3d28299d86021d69bcf48cd496f1abc3b5cb5a7460e8c5cf1880cb77469dd16d0a2714630aff777fad0156dbea7378dd1298580c806a9233bbc4843f731b5f98a2459cd23f45fa05a9c70361e811df9b9acddc0ab781744376b7b24811f574817d714d6cdcf2d4770ee2f2f24e645b11f1cdd05e0a1b7ab105db629b399196f932d7e992babc2967d9b77110406a264fa285f7622dd62540cf1a77881a7c9aa49da4faf1311207ac1c0d0607d1b8a38d95c01c740c864abfd0229772c52a8814c734e4e3ecd408984275cb9a88c070a096efef50b75ff8351b93e72d76143854a1f892eff52f5328df9a59ab8619b8e915db15d25941e58d2807fa3325c296e8b5c0fc62c721d3e57de511dfa6421e04b3c1a94e654821891ab65e8a7b06c2bec9f05af0eb6d9fa3ed2135eff8d89fc4aa8467ff2067d4809e6d2693e9ea3633b4d7774f44ae932cf3ddcda44333791d24d1fe3aad03ee29ef6e3a969551c83677fec06d0abc99403342cc16c59882cda3c718b913ca12b377db028a17ca9df30039da7d4558fcff57451d71fd2e8650926985e2ce2a5a0854d2bc2137870c0d3196eedb4a0367c7a51393cd56a30f0ba569e01cf361ea3914cbcc48ce11b2ad3694aa20ff7b93e5d119bda41e26f4650fb195a9e9ca8974af8051fe1b5fc412d012291a03e69eb8dff2bd0d3593aa8e935d323940d3d0db3c14c89a15abad4d2579debfbaf6b9aede3e7941b5e56ce702e4b6377aed6925fe37d3346f4ef24c39d1ef652f0bd5ab603eeae50022f8d8c97bfff773511f3eb842e9deaade5e33a3d2173a15552864aaef117c2ed9e039f38051171726f259a989221069782b316f5724a4a9676e1a64f850cb4af9a526176741d8accffd3c1ba22ed7f60bc7ef8049c202fee1b260504df33e23a3b1b86aa8fd13f92cbdc5a6f94606784a4f230545837adbdff5a8ec7ded6453be719840c69e4924c512c0330563703d79cc4c0155775bdfc510dd6f206563f0e42a31e13537b74df2b16d858609badf701d5b3bdc6f59e20afc4526a35e31779a75b7165f1133d8e2c7aa35f8daf15b9d8426eb7cdc1c2013450f7df3f6a23c69d3b886ba69ea83952a9f5e0c02be3ab51757cddd5c59388d9245765587ebeed2de32afd0f43e535cd40024b2f322103112446d3c171f1de485ad7958500d753a0fbd4e43bf5c52336a6769f6b5fb71949a96202f69f13fa021d9a579a93ce5e08d9e7d88ac010f9fb70263381e6d4083accaf26b1380e26b83ef1b21185b647c20d3fbb7436bd39cbe3e97b518600e42dfdea30b787cedf844c9f9c874e3dbf09f2334a6699de032ef6d7464824e2784cec74337c86c1bada7c11b18e1b7bff0fb9cab51ef6dbf391a8c9a83b721f83004713b5a6c4ce5069a894391d8e7681f949ed297bcddfb9a9fdb2d9c98c86e2a18d0f761b8b8ba2336aaa18dd6a3bc641c6902b41a31ed0d705900c1fc9614c6cdb87f76c0e64a76088352157b1464cc6cf2850fb3bf83e72279c87b6621c411dc76e5b2164b9b363d2bcc174a67940262253f727da6d967fdd8ef6fadbdb7be750a9d07c47aa0825fd0f7a1ef75e0e78ab77f144d7807877d07c2946fad4e9643e1e7c5afd30849614a140715ba1e3e09b3c745c9b59ba4f2ca68f3359aa50dff753c8a44f9179144d1884fcc77bcb24082bf284d638d118b7b4c2449ec811484a3858fa4b49e8afc517b1fb2249e076b3c39ee64f968acd27ae752e166f2342e1d3f31f5e593722841b12c3592ade69abe7d1bc9a3f41b4b44d3e2e5aeb405f5d3554fb0c148bce2c6d443b123f60c19b2f8ef373164e54de738172b381e4390385ad200a3acf7512f4113da46a39729ac6c582e24e46c0080bb91ae92470dfcba6a8f2839ee48ed4c7fb39b06c7fd11cbd54cb03cc11f6e99588d65665e1cab5451b9cc06740fa092cbe3c2d3b291317aec17350809f67b530435df04c6a3f31e7ed468d883bc28dbbabf69a15823b7a1f94a40564a11b20f42569ed98fed49352a01a40ad6628b15735846e9488532f945adf0dff02b0d677b4e3ba3617a73af7b750870707c1b28f4f20ab2746a87b6c84403b8724cd9649cb8ccb4ade30fc7ce46c857b9bdadd24ae4d224ab0acf62fd55dffa7779a63d47ebd7b62db58c4383d9355909762496e7ba1fb57bbee0054568a5852253089688f79685e31969360334d3ddd5e4a8b94eb4df6940e30214e051cb9e7f3b50d0f6831891c589e0772093f5a6a003966a93c55c928aa76e556e9844696f41c11d1cc90a2e8b7e546ddc372378594900ce71dddda127715b0ae9ad65729802cde8c888c72b32f568244f2f31037b6ae652ef1742261d088c00fcaa6345871c614ada85bfa531151e400deef9709f2af43512e26bd32b6087d0d3e20e04bc8085f6bdc26e26b0d850c029a8dbf57af29584a482888ef4d7c006488aeaf749ec207904c599d078712f7d341ed88bca08bd7bc422a7f4bab592763df914da49286dd1dc685da335ce32b39702f4e1bc1b84eeac9ee66f9153e5414dab162492c93947d3bb43cdfe68048e399224a148d302d573b8862e3536a16559794c1233089cb0906a66229aa93e97958f69a38c3d16ec4e326048ad712ecf186e165a758470363908d015af0566fa4a0d95608887bd577042d29d9b4db910e06e7d163c2ff6af72b54d28a80502032200237e454ec0c130f17a80e7df7d9090b72a99d3bdc3cf1e2b3902ce90e5cd0cbc0703e560eef12147e9b1a0e6c8ed052e82ee3e9994bcbf99db499201ec62659a8ef3393da522a8adadd956e7a5ada6b6ef570958d81b2f539d06e92b8c09f8f1367a0b8cd8a19f957af7dc0bed391e55c6e5619b728ec26ade019b6d66f8c8d4d46b9705df48ad524371b20e4ad67ad331bd367b33f5466ec1612d5a7b0399be34b530760548ba448baf2fb6142c6b7c9d6d65fdadc2195eb123b263988b3e38b001d24c2bfdf779207b39e0f330b1230964a37a2943d7ea077b17042a24ce2c8f1e13c9f45bcb7579da77cb6f4be04f3e54e8ccfebc6ba32ddd7d3a9adef97d5a1c4fd43014e4b042b50ae6db4c21348ee48226d4c65ed7bd79ddcd0591103bcd9127557de05ded57c726cfc5d12ddc70f53830765ad8ba79eda01bde968996ed7003f95eb90f30670ece34df7eb5c2fcbe09f65ab2dc7b36e47c59ddaee70e79256191c46ea8c633dd4b9ada0370a908a5cca3380216a1c9937a6644a93ca53a82819129b90fee2fe3ef2bd6cb80d5247e6ba95ae417960f1255878e8589b4d6c8efa2df8392d441afbf9506802f3d7850f32d6256aadf674fabf45ca14ee7ffb8ad35d2a9e18d850738c3aa1b3e537792f6ef3f7d56b964948e9f5aacccfe749291df1377b79ce24f5a079fecf1be0bbafdda98074a8b9dc5c673636bb448df03b0f0f3c5230f9bfa909618601a384606e8e75495093dd5bbeef1782770bcff265aab0fb6e4415b93751e065ae83115c31349d27765af8960928850950022db3015aec89ca823f5eed30b130707b79420bfe2f84ba0243ab657dd870759e28d0669120b29f32aa75e65a8de0d7fc27e57957b349dddae7f55296deacb35217c34042836f0878d521f9980991ea93be10bbccf2d5d7858130753367c30f7a1936526ba42c26e68d7f22156277911eb1fa19abe117ae70c540ea3afc7e3f463c0f89a5dcb42400863d8136264b3b914aea184ea27c4c6f516e316e3c2eb7c1c962164e47370841d00c3247cf9dd9f6c071a91647dd690cf57d28fce4173339a0e6a138d2bd1ab311e5455907284f7eb5fb03adf91d8eb1889f565a9859c49a4cf22b54e5319e4b59081d8a36b704d999d8c829453591dc844be045d14f3cf126cf7bbb9dab1ff5afa8f1ebda3e5d9f2481288395a259bb0e18875ea978f8cba495d8d15b891a28413a40d5c0968915210a059ea9aaf283e49fcd13f1bb0222fdd5df2046b554529eff6ba96b2da646153c7bcb34b67503ab912ecdccdfbebca391365d384328b65b9320d045a8bd801b0b20e1710bdeee2a6b54fc7e2200d5c676cc6cd974489a4cd6442c458b2e2115c168deb39a28a73f04b94835f9acd16ef5dc8183bea1c8c4b84077d92c80a0ec8485290e3da9280a96c9d04615bd6197997fc7b2494e5c36570ac54606beae078e5b7c3694334db582c17622e5728570cacd0d7e09e27a7e7368155e8cd6cdef0800494e4d958fbf7ff50b2b8b677e7d07a4dc1a62dd93141e88a1b972cdf9a1baa00f70fb7555606b44dc23831cd6e74dad3054db54a9d2b1ee341d4f594efbb2bb69955a3acb7942a171ec999208ec2101babdaeab336fbfe73a34c781d3131fb648706b5ea4dcc2691fbc90121e6c591d70f92e4c2ee1bf9a9cd85e0329f39926182461793a51fcdf4229ffd95c7695e634a8016356fa70d481db38eaf13ca397c245c1435562da6775b868821e5ddf139a0ca9495a9d061281603d3d4d62350c2f0b06d6f0adb40baaab0004c5bf83e00b2e6bcbfee13da2053a779d732b466a4c6acf6b0801ee9ce3da9ac04eeff79b68333063e32a66e9f7af7d56e4a63a956b3a2695fb556b0d4613631c399aa8216f77284e571c0584d62436f418cc27d778619ceb734df59db15bd0bf72f8a967a6a756a0833b8e3a94e30953589dfcd371df0d076e352cb1bc1ebdbdd82fe93ac39a58779d7967b5ab1a5c2bf35f5db9bdc172fa86cd84e58dca26afe458f1067e407def63131acdc76fbe892238bfe9f89f491bec06294d04d6ef9d9de359d8ddb149fca66bf3b265e0ce5263a17f95b17f09c24a3589a694e3f203bd1d35a75d230082fcf53a8dfd5b732b6a5c3b9f452766a4293f8e1fadc4e09649f836a295d403230c7634f23de6686206fca21066a8892a69aef8cad2b39e774724a012e6efc2412a30d1f6b9acbd797c8c479e5b87315c295ac70eea208886a80a156f4f3182b7d647ef2c624e50dbdc2798e3a8456db8a553414312417991258862a6413da2d53fb70ded1adc03132c128f1d407ff3356060ab7aa381d04b97c4c788e31c462c4bd3bfba9fe1f360708860a3407653f7c66e52cffbf52e3713cc88cedc8703fa8c6d7f214bde59f59d2d688a8e1a4e938dd73bbf01a63170f1be49ca5f9273c39be2031cb0838c03797edc204158a878348168cac27366b6dd4db490a82dad7157f7338b018a65af04746be932557ef22d9f509e5b3e2db3f99d7af602842237ab241d7e9dad0ba8f9611f947be3b8d2a15f7e0d5fa6b5a5e74dc3dda6265fe1b0e8db0bf5e282f149606847728a950b796bb363a2d275a16499d56060a3106153a280b59ef92f707e9492378b50dd5cd7b7daa446f580ce4b26d85062b6306a73647a2c573c79a33a7ba590614c254b803b05adb46c226081a5848d0f98c56b4b14ba83ea05a3021db5984198339d333c837bc624362b74783bfaa1dcd5d07452af652681dfde6c8c82a4d3cd2637db14624a835dd5293ec97beb60e14e57e294cd3f76352c7b12b706cfcf7b9703b23793db6f727d12bbd90877b094f4782f11131e86261bc5a67174637ce41a9d01b2223a4131ddf8d3529ff10d3e0e84b979945e4fda6deff0675a9b64b3e66182fcdd269f6a5c1c3a25ad94e6f3786e006e431b3c7f345ec0191fee6f5c08104027adfd10c9430daa350e85f9ac516dfcfef1d5ee08109c5fad0c3cd69128d56576d59fd5e314e75beda887cb6e5e9fbf3bf0ffd6587f851d903d5234921d375388b97b676fa7eec0aef74fcbcfe72a76234d1f4ff4ca3e1fc410561870b8545bc236f1bdb3e41db02242a876fa7e3db6bc0f23972c9ee8c00cde2cc97e06af1a936ec04b7cbb9d9bdfa2c969745c68d95e8b51a00803e797ab851102a603f6d7f55043c6601425054bde32ff4365ff09ce1d3e9ddb61daac9a841cb8a0a6814318c02b6fbcde8b72c26e49823c774c550a4a7a93eeb1cd18953e46517d3da0b98ed84be5508a85d7a0a15f8887f2afd27b1c57bf717a356ebd50f5f1341d527dfe5dc073f9d45d00ef08d568ecfe50a65a50cfe5ecc101177af4671fbe95b4c169cb2cf0c82b56ed2ca3a390476a043cf9cf6b7fc2492d6bb711bb2c76ebbb5fed0a495e1d2677d5da783b68e688f2f04fb07980648eefbfb1f872aab6e1fd88673da83f0a1427f373a86da73c56b57d674938095554dabbee205b2ea030001146186215413acc96e475a67574b016ac37e3444e546651d5b62871308795d2875ac5fb275a8f417778a85026f9698a1fca2829e67a9529faa05900919968e1abf32a5dfb177fc7fc36b87dda4b71f382edd0cca466d0e9aaa7c1f860d0ca1287abc2bc5ffa1c592fcba6df657935ae28ec6c2aedbafd6935ecc15fbe8786c1f06de204fe51b1bb859f30829a812f33a75b57dee8e4168b96508e12df61456767e6c4f5d98196163ca53a29848ba29d371506be0d9bc387af3f48c0102295b7868d4a6576359e1e6e71217b7145dea6ff4757d939c91f5a30ab7a676c21aa3e7b6b7c688ee9060338f07b86a20181d2191d584ea54aad487513953acccd903ecd1a606b02a9c09449ae75cd06da1949e7cf25487f107d573d9456915a6633815f4b7e876531ef382882be081c253564b812f5b9d3a242b7fcd1e8eeaf942840c065ecf196458646178f9d06b52233ad9fbe5cfd26511d839bbc89a54e3dd8c3775c4a276ee006ef1ddc4904d34f21f3fe7d554b711f46118c5f79d39612e8d5afe03e2a9503a1cd06b0c2d74f6cdbe16105b4f07533fc489c74685d233589da7e089f150cde6905c034b54b8ccb38c5715e441fbfcbff4dd291006fcfde5683c3179f08866c35f7cb74b0089717f1d32ff50464a22a4218a77d484b74db1e8a02cbc0757757c12985f98b353787b3ed4ae01de49b0309bc34fcf87e68b4e4ed50e2f5d5a633cd344cf03fbd23dd1be7ec3cf5044677e92ca2ccf3a43f00684925b77f0eefccc8078c861ce0a7de998cea7faa4dc5aa05e592b11844ae6e7f7fc51e607276f6ea72dddcd34bd4b650cf68883b558d1b4483fa36f9845c688c1656c389c1ce1001b66ad7230d38269bfa8b15c0e2ad44bb7f0361e79ec20507e8ad0ff6a0e6d01870a89281d48e3bd91824ba587eca579925e453bdc7722d156aa950566f8338880b9c020001d85e6faaffc0f99874f1913a9265baa7ac8a4a48dfb83ebcc3ec592f48d6635617beb3fb58baef68e63fc2269609d19d36c1108a144cf558013004ad4b4bf3a1e43ed0523d44692eed6da5eb3215d535e1fa37aa68c93f6ba180f6b3068db5f97ec9e4fda1670c413c4177d7679a426700ad44a92e9b02ac1203a2a0361a2e3755a74c6746c0f829d56ccfa14d49da43e80a3011e2d95552dbc35e5d4199142e81935236be4d9ea5bf15270aaa0f8e5781f25c905139f3d3f83e16c08e2ec53f98372dbdea8bb445ec2c187c468e1c931db0012e6503da9bad504f44dbc76b5d0773cf3433497aa0c9ea9253ef71fc85d7a430972133e2bd03ea91a72443542f4c0d65b18eacbb34029cf00c41b58f3ddef4d22e8f458e6e25f43412a798a2e0d0e4c04d86c445a761fee5344345b3b0a038500b4dd66a8856393afc171b0b46733fbbe6df622d789ab73910c385882668472d505d2775b7cc98df7669e12737ece22f0cc20658ee9bfacded8c6d4759204540f33a1d10264835a37c5d07cb92592fa47db80789c8699785fabd0c8ea42ea67a8ecfb5d12125075e029d1bd334e66c9f7193759e1612bbadc2a4215ca93ce7f316eea544f533f879756ee20db72d5462778297854a0c5668b00e7047a225b5b75909960fc2a812439b9b1e7a94e9f24eb32b1ce555f380d172f748a3b243a73491c73b1c5584d1daac12cb9166e0289655c0afe344c4aab9d631edae408cdd1888f72691c6eed6b1cc99b27e1b294184dca537504c2c763bcd010fd29d1bc898ab818cdaa8273a54929475a45e940dc1a4676fa99e8bf9b2fed398c42ae72771609ecb519f6b4ce770bacaa5caf99651cec3cdb8e0e2c99eb3cfcde5f5de25f3849032974b85624f0b763f4b482dc4c755c80ce85b9afee02343b9385d025b95075d01fa90a2003e8e7af179a27a5403fb95021cbbb5693beaf98d7fa8e156b3d8f2a8b3f1d5694fd909fedf703d45871d991d4532783d409742bdcd9398242061e543cc6fede0d8ebfc351389f9d368c6db7315a4969afc016a2ebb00d","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"c7f72c4385a16c3c5bcf37c6ff763970"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
