<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"c63cc4300b8db1c16d3e428219b8cdd969d0c9a5295c99adc40912b6ef1ec12704ed1d44198ed73b20fb097216ba6ae8dac8067dace4e7522fedd1914d8b2702023b07e9a44bf89ea61c8e6c194c2bc1c6271874457db41c47ae09ef35e9eba58a828e01bf7350d50de32012601a6dfb01d04e61275ba3a55fd1ceeebfd8dc51193f1f3adc4d1c755e4af2d022cb7497a91b3eddcd2b9451d1c2d5c11515a5ca12692fc832c6c50f5cc81df07f0974f8dc7f911650c28512d176a151f9f7c9063e59d660a0abedcf8b9e37c8b851cf8d3448cc70760795915fdae5e36cc84fd8045360c0bd6d69b0582e1b4634083df5c4b56b129d495bf37043229296deb02434ec0e1eb8bd189ac4712f98b28b7ebea6f860bbf1096d9ddfcda4660ebcd551e2698539239ae81265ffa22627ad87af4db6cfcfa2d3f2475ab1c4279fa661854386fe92150fde08a28c8d4ef075b347372073277453d2d4204c6640869d031e78acf6699e82d4c65323dbdf48f89b61214825072a8db1b2f0102cfa86ed8b52550d7a6908b8f021c300261bc386e14cd56aa60c1fac9f51273e9a94cbf63923f2f047fac3d74692860821a80230561fe7f4121d22f3181d76afc55c82947c94787a2acdb3db48a4b519aa57a1cce36ebca1dc7371afea79504ce2e72687d861440882dd0546e64f3789fba8e6065679045774ad295b147639abb288de313afead4b8807ca41c06c1d45626e6ce7b0a7200cee9b852755216bcb8037111650ca6830a64c8efc9b779aae8166274e646585655659d18c91b430169d0243b508ddf0f5689c6f8ac4c0485dfb8928510f58be622c5097910a3f1885785e3b376372d889b4c6f8b5328f3d265205fcff17f581b236f851b90ddbef7e25ec8d46022b205d9f9f6e0725b4990baba6bc11fbc502b07890cebab12a7c9fa9135e0678246d205d5c988667fa96cf7b52da0e18fa0d3f9572da10260fc27f751485035ae2ee0590ceccb533b656e253ad88f3d785f623b8ecd80f8e9d30500732920e4b094e657225af17b87484a7f0a3f8d30597db09d5f26386e1205a4a857b02c06c36897c0042ac6f66e6225f2c3ff6bb4e3425f2869faa6a53b2d9b2dd8f1b6db1c97e69b14c4911d0a0a922e05717dc97a34d61a3ee94d3e334d816f8fecd570653c4d73b039e5cde1b4b7bad7f1c978fc1ff52a8174c0a187bfb62b39bb09746026f40c19fda886729a89dca5e0540d124725d33dada7a78841635f143b08e9826d5f1200599edf324b35086beb355087e6138b98c805a7bf4f95138b9cd4ca4453c82972e111ec71541de8903fd80cce37e7e2c0c05adb802f42932cbcea17f1a80f22cb4614ba327fe6e0e17d3695ad03d338373dcec2dbd8ae8af352ceaf1c0faa87d0ee81d6acf57b9f49a3f286dfcf3fc84c692b9f14998e2aa77647ee6521bcc653f1114e7313f100b06b3e808307795098371d9bb9092b716187dcf03ea7be786326c1b478cc69b855524bd6283b2e2612b62bd1a8abc331a3b8288a6b91dba9718dde0fd982e516a2d84beb8d435ce091544c8fdca8ae012f93f29d96fc0af8ede7477ef1865f3a1bd8fd2ed792dbc4696dabc9abcb50183347cf3e6d1fdc908dc7e7442758c6639ac20b50ce8431e82501e3e20bedda34b25e97556f58ce20d96a39590c407f980a06a0f1d414ceb7922520ce28c82b28c9e6ba83f3128dbc16f22ade053b8a7d24bc83354b01c6c8b637acef19cf563ff5f9fa9f8e622d016dcc93cbd96c4b8b08cb229c85411c2506e9ee26a2f1f0a74efe03103c522bb25e5d3326a6dc954ed7b3b61bf0aa24eb33c783d8cbecffcbf67d53e4819d0573f58307305125c7b7eafc42f8c97cfb95943749f506d559f8dc759608902d38acfd55216fab1390d30d5db0c90e205d2f1be7e7146377f3bbf73559de33eab609268ceff9deabd397fc1b3b92bbe307a2b9ac65301d71f24c376559a45f5c61423ba496f01ea852952422d6149929e893f5de299fc126d621df6fa114060c038408f517636e1942dfa5fd3561495cdacb0b4d9ffe9695984a91fd920a0e77a5c301e8ee34154b85b62ebde21a81244b8b1388396c5a8614285d34cff179da97dfdb60de6c28aedab46880384e2dc89000afd7582fa897afd172393364744f0c0f9ffebc664d96c3569f8deb5f444f3439fa9f2dad9e099b3887b0bda5b60224131fb2e7dfa4fb1adb9ead67758590d193c91ba50d37250f5c689a45fc3d3b9a1dfe5b9db3a7d8c24f87b0c68eabfeaf2115e7d8bcc968124d813e11a493233b8f044c5e6c42e3cd60c78b819da5315dcffa8a3682403202aa5a3ccac22ea46523d6310ae539fe9827b4bd73f3c8095016721b7b77184ffef764224c5717d1382b02b0d7071d030fa9ec955cbf9cc3e712436d01688b0e1db1840a2e4b160b6e97116b51393ada7bfda233f917bb503e2fb5a14af098fe0866daf22c4c07b66396bf2104670933d57d8a7ccc2e8733f10bdf21fe5cb194aed8b13a6223a467b31552d744faddfdb7cd75c21b0c7f042ea581d8aae87e85b2b9a37dfcac5ab6c3fb15b2252612cc2e562a731d0f92d7dcf7856393cc16dc3772a798cde2dffeff4ea460b5017d032247797a568c41e6250c02511f1fab04976d08249750c96c0425cb27baef00c0efa3bfd97ea7f543a84061e535ab54396d106c0bbe468188918063642063d193df75421c7375a395f142c7464679297a0122f5476adcd317e6cee0c6d51c6ed1b281a27e97b60f8f0f481f0ff93b1fd50e32fc78d481f6328a6e13b8e2befeba75051659d7f90a49f9c69c2b808812f5ad1858949970a509a5ddc591f63e168651e8a20c6fa9af11eba04518b3f53f863dd7dce6ab9a1aab8b5b30b808f8272d80022bf8ae8f33129403e60c180c45e4a9fc874713ee33112dc91677b29763ea84fe7011010cd2b661757cc813afa69acdfcfd32f58e9f0aba625b8b67c3aad6b03bf60bf4478a88f8c5842c99c2637b1f27b059d4f51190831c4c2a79b496f10a4a1d4ebe3327fc1f5d12ab62acbb60eeb647db5f5678e75c1a982492a3a99747b66333d5bc5bbfa2156f3bc3c46ccc11f21dd83e95cd0d7790eded38a8820d008c8c2f658043529b8c9bda71b8e71487986e0e3810d234820a20aa6cd58acda42975f8c9deaa0b2ddad4508c5624396893e0eff031cd931354f050a214567d9dfe18070df1486fccab1ad503e358176dbd0fbe8244d2b7a8264c094fcfe9bf0f3f0e25eaa3213f96c06d4912c0832f4510084af62e003eb19f61f193b4b004831bf7173b660af993167125cba8ab1bc35ac3d717bd8ec5f84d134f125f065b54aadb3263a90fff2d14675b2f442b4b31a20d3eddd3b7853c755e444a13f5173c00b5333bdbb07f78462688185eb40f337b1024b0ed2a2593e9b473e61a70af46ecb714e28e90ad7aa92deaec9fc4e3134592e8d03e6011d6459a1ece82afb648ddde60085c35b015c4a0f49518453bb6ea3d4844d1594acaf2c0d58861c21f8e4de39c97d1aae5dfe383087253aae8ac7f798fe5920e6195e6dd5efa2f0d47dda09efacb891470ade0fd07910cd66643d4ffb5e44322903e1301e2b06a095f90595a5553e3b6b41738dc289d71ee8f834d1a4a8ad564c2b6f9b99622770cd9dd14a5482e0470b6646d986a27eae897b8da6c96fc889cc8bc815b805d3e0817a905e342fd5e00da35c613cf7f31afdd135f19470e30b1966855ab71b3cea2cd6bb10a24b532603df252c87e45f5760b149a670f8da13a8b231049c58d18318dc6b9c669f5d6600bc2f4f6b03adb8e9d31319102f6f1d41cd5322c08ce3739037186522b74fc8419d260fb5e3950fb254efcec7e666a8df227deb16870c24cdd2f7cb91c87acb5211f50997961487be2d747503b3423f184f14cb91070c84e1ab218741b124a5ef93e646d0f793153ae556f22ed77a11e1f32c9e23dc5e3281037ce594f495bb59807d9099762b1d5faf15a962b47c279dd35969c470b724e72b5a43687f8a79196862bdc81908c272cf305a428a7a7b1b8c54e7283a59be332e413761a75f85ec1f1e3ee9e26134f237184965efeac44bb90f6b9382e749b360bb1b80e54a8d02cfe760e7cebe4894c3b90f981d47c447e889cffd766739bf8f25e7f98b54ef03e00a2fdce5cb6867c5bbb77225f759c3a43f54a87b22ae750f5f260d69bc0cf92da8358e5ef84dfc41f6e2188e425b3e23332e670510cd556926c0cd49cd54b2ae1ca7307255e5b9f4dde797a88976c5b107aadf6090452b41f2c152b521bdb8a06bc6308f6cb7b5ede7db1ca1e28219a98226d66454b51e131fdaa531202c440ef2e05616a960d50cf36ad356d11deba11e02290d83d265c883787a1ef1ddd775ac9a41fd1e5d1babd659a74d8c93087316189b3c2c3247599e562daa32a8c30c1c724d63e70fa19a29ad3fd5485a72898d918fa465d414596b9238fc89b34a3f132a991032e3667f17e195dd636f5f68f017c905c646736e765d85a0d5f3b99e26f1eb672641592163e7b0a41f4994dd48d12b1696f86f39049e8dff9eda61a31d2ab8e16b4cdaa8fb8cb95c9ad2bffe3179dd3eaa6e2f0d426e193f857a42dc74e78d99d22dde38850ca8b8c79ccad131404ec200a9ce0b2d4800b467c17e13596665e45df38a4a0b6d1bf69e93c42b7f85d43900495a94236d39d65f8f397390acc13ec40d098b64eaab326d457bbc54edd07480d9c84ec392815ae40884909adacb7823f3363a48d8a800fac7efc720a233c88264186d7a3b5d1e9d3bda4d566240259144c0933400492b53993bb886ba73ab50e012c3b709906de63094d9800f7a36667c569c38561740c96393d03bdf3f9805bab0e3c7e042399d44a858d4613debde732dceb0a5d6b50bcb03e28d35e9d5507257b4c51156a2a01900d580661e335d1e002c0f30550a2a04374bf17eba2c5fd8d4dfea53f061e18e6b4421c60dd8a2254bede00c6602efe5ef04ed756b49c44f5f843f0791d603ad7514bbba53d042307be4a9ae6564580be287ebb961172055ee4388109f674238a11416641334cce1b155816c8e1d6109609bfdef32e8d09437855c9fea62d256f847ae54674ef286010d0520576d5f89a71ce5a99068d089d77b2b723764e3d6f939583aea8d2c83eec9654a582b40f055bf052accf7e4e85e10bf91f71502b8688dedca9a6ef01eceb4f592f8e35337aa87aa8d4b54b67e1aa72d7f0ef6265c48954dd74b34d908d83f13502ab091f8663db7a05c22c8d0ec188b20d081e770f9ef89c65faf1b6e3b04565fed7aa2c88a5997df892be18aedcce7246420c0d8dbfac3ef2889b7653400cddd4f62b58d2d055e2dfa8cde04a82ca62afa452780922e0fd9f50882feb3ba213c82c242fcab7c8ce77012a7748cac600c37cb9f7a5fb947ee05aaaa94542e7e92ce51d4f66fd16fa5cde1a7fe83472722c3ed4e21da59145abd2ba7187f7af33e8d8d6173c3b41e3ef637309c2bb08328cd05b5b058bb98256049b4f6e6370bc686e9580d7d8ed84a928c1ac6489b85990c6a548ec9c6e916c2b7e38a6ed583b63937ab3a0172fe26a151bc2c9cb8cb8bf6e32c4710ab423af4039ef20aaf2d1ca58c35b55f760b7a369a9c147edbffffbf3a6c735a966a81845b76d7c701b029b5529b214b24fca0d24666025fe9189f8257bd193385e5b993fcf73c0623708db915a0f61d80609437c1040cfc662cea53da2a3d427777b6aacf641aca570541141f0586bb47348e4873ef01b3e7263e11d741daa5570a89bab6da8a76852d1df2db8ebf4c4cd1f577d559fb2486168dcc532382510f1285101c73949aecf5f2efc87a4784df78d0d640ab5e2468be0de02d06dc8f5a99469844905b3fc3285e547f2fcd2b04ce7e454f913012a179f07b90e537b533c271c2d3f25154041bf01cabf6217494670831f6a80abd52670c0cb9878141e0c32030037b946e93f6a2cd2c5fb8f96f2ea7de85b30c86c4822f3b0162b7284e5014244ec4acb6beae7070032e84e80f215df62f5a5a517790355bb184811d89c767011a5fe06969a3e4b52bd2cc9b1fa140525e09cb08cb1bf922ddeff50feb88bd3cfb674cc3b9139939e6e42674503258cf72243ea727f7eef9c9ae0ede3a324e459f38e753eaed099b61f31f5b96e6fced6df471f67523e4e6233031c868562bf4fdb1b8d253de47605d3aa1e9860f2e627dcff6ce4d4ef89bf1953d3dff524108c3414396fefca573f74dc5a7e3a91eb30237a0841b6ff87073c2e08c8d546c7504e94551a8e5ef18760b65e3bbe0cd2bfe050135b832f88c798ace567fdf4202bb71255c89ed214f84f4be4bf2785968feb8d8b7664c5c593eb7a3222a6ac0f4fe4cfc1536eb8ac1c237945c28750babae7d9bd1a52ea7b3c4c91fa9d3bbeaab6d3ecea4ef683c7869419c41e7b931d1c872a747148948d51cb110419e057ac235e8345f5ee0b980eb3f95e2956ad5977079e76a6ce9bf90b2140ce018f73fc3f7b41b192369bc434a17dd7f20b6136b8bea07ebf988a0b395e34e2d8d41cb8e383ff365596dbd53061037f6f147fd2d379ddba091bdc2a8c083e7f9595b2fb5097c455078d98e7a2f464e21ce7ed35500e7d38a76e84d70f2208777c90dcb1c64f06f2b074b93de21d52e8e8da2fdbd94517c9af772d110fda7784af21018dd8058aa6c3831f65804f9e4f4b5bbf1098f26f78a5a5c5dfae7d07f7197ad3808a8ac0d6f0dc8a58c1c7fd304aca9e9a11183eab4eebd06cac72c0300d064f910a96ab1ea238c4c238746a39989442a68fcaa139a93c46d92093fcd62645a8d2ac37694999d22547acd0055500965f2555864a0c1717408372aa96ccbec12fae5f4001802fecfd139cda834ebdf5e9bbe87f30bb97a021178dd7e4f2d3adb6f4ebd43644aeec4a4cc29ce609ce6e18d6859de92468ce1b403004fa2ec92569419ccf6a6cb0459d9db34c9f83bcca7750e1507abeebaf31eade45423bb115aedd42250dcdc17c1fc9a18121ac49e359b214d33631a45215f5d4d8438dc3187479254251d85bedc5355cd54e379734273534c08eea9145967d5f63a86e0f9b5f12bf709612b37bacce254582170216979e2d4310899dbd7d009ceec1d5cb9fe635111ed13db46b69a55706538900ec3cccda2cb6af24a00c371a5e67aa8e0dd5502f9572cf06bf11fa8c46d8922fdb30c6153566b362fff89f78e0400692a3bebcd5bfc03d2db5433ac90aa12766e53e73764c906b23b25526a85c03eabb79309d4c4a94da90697ad91f70f0a5e24c02473a1dfcd3880a1472e39f637eb25930f92a2855364ea0eeba9f2efc0813f2fdb096fcf04e125ed992f68c5ed34e6fba98e85ba9e46e47c36f9443b9e750b59dd85bbd98433190e9d192dae37ae61a30a7f61759ea181a69795e3cff87497dde930e665a3ecb710044050e44166951bf2ce2ba53a7ebdb231efad87a007ec3a19ec07d42a95fe8926697b8b838f56db23a30cd94600c9de410b8575b7f9386f2a34e5ecdfc0e96bd042456e4826c276cb458ef964fa1a690d2759d1d51da74f6b1a31a383f6764190a5df5e9fb81a76a7a2090ce8c46509db330311f2c112867721482ddd5ac2c5372822a6797bb36bab05917e25da5fec5953bb05be23335e078386ad17af59a41bda3273b20b6e087f95a95244dc267fdbee27c0188e5bb175e78e4a9405629baf3284679bcc6abe6a8d13e8a78ec566ecb9d77def244173fd9a6e82bc313fb1c4abfb14457a2277616cfbc32c114378eb433aae5cc3fa6f5022a08c5bf66c0055e82df9362481db9dcc9b7c4f5b4bde1a719ef33e539d690b45276c2640e2d090506e16db80ca150f36f2143d6ec375fe4b1d6e004f352d7d626fdfedbbfa6931bf72aab2011662b7b5b999ba575ac5d7ef16372a6a47ed9d44cb9892fae45ee3e698e25ac2f52c2193cae67abd4e998a7f12aa1a586e7325e84a56d1b8eb68d5388c4370d3c58d0fecf179a4cba41b80bdb1956ea0820587b676b5027f8f3fd140f6f776fcf563a408802ae84690cbe1c7ba0114ebb9ff9e16fa5d25b77b9690b9e284044967033f299f144b4ad9559e6184e148e3eed1fe0f958f63ae568eee5a5cedaeb000867811a33a5a472bf6958236303925305132075744a52b2794ce319a4bedfbc24dd076f29804e771e1501f18afc313d51bd13dca82cf3918392607f5f05c73ed3ef002d3f11c7dc85508a22826598941a8141b724c5e92b6fb48de7e2e48e0eaa12a4dc06699e54842fb0f69b404a971ffc93d622ad4a989295919e0eef2d33cb59a3178078db246969c7af76453e127a31708a50255894c4cea0235e3333faaead866d2b4f108a1b062023850200edab15303506815aa5f5c8a42bf0d3309e05d3187be5fd4c4407f8a2555c3c7452eff43b5873fe85fbd64fea064bab8cb13d2ff8eb24f490004312be928008cb2d53716aa7d04fdc4c9d1d5a532012413f81d6fbc541477a67de5ef93cd881d67a434fd5445e6c8aa47b6e9bbbc9f29ba1342f4d2d3ade2a9b60e84f0d61f94d3e7fb432027d23257d1fbb71d36b7c30ecd380cde3d23fa6a300e28ea172897993718a42e6fdef9cfb24e0aaa0ece0e409d2b1fcc1f205ad3fd15c1a06dc8b68c59ce8bd1a5dbcfdfab8d6fec08a16efdad873e3791a201a1b09e3ca83bee3a4148705a3bc8f1acdae331eb02ddd9f832b095a6e74bde9db8510c64b78bda6ba26b6c011eb526eb801e09f141c58bb11005ea86c29329fd44e7177d5a5c021d13e353b00ef137283cc09c2179b5256dc95e9c68c3c1e5bd6d424d531989967ffe726b283367efd5be8083832876ffd4a354cf583390002756199a9d5c24e6c8060a7d86e09386b7589dcebaf95dc338da97d5b1835cd8650791ae75f5b1a0b21165988c120cbd93c9056ca707ff2cb0fa50b0c8b2746d19141d9b6be48385452eb205dd7510a58fee3286bd6714c14644b74cd19241d3296d4122d0522eb11ee792b87c48a6203fa2a98a25d13b1c3f843d4a3c82731c91f9d5005aa227aad2709ab1171131999d9d8e40843989e307d9f1a5a9b50708b171889d9cf31124ea771299c501dda9c74d7e5c8f40851d3c74b6f86503dea9c77c47e56eb37f78b6ecba30a5367e33e298670c321b77b19b6dcfac96c1b6de95fcd7f6e2b1144f050280e96f7db0561bdb40e22955969b7007f536c0c7aa30dda619316082e100e3292ab5a23e82880c9968ba59e36d75cc18fc5fe08e3073305eb38c7e6c06d45e92dd533a471fcde850e8c14f1a4eb5bd57b9f200e16baa10876f1fd289e7b6eb6e7831bb1073097beaacdb9ccbd683d2ab0a6fdbf64f6db905756e94e0f19f88c368dca1df0ae96ef35f1f11207db0ce6fe5695a8e8c082ed88cab350da6a1d20035b7157d229009490a37c03df762418076b5d951a1a78e01d7af926fac7a30b0092bfad679363af72010b6c7ec2a723b3a37277e6c55cae836ad954a8583fc535b8457c07ff1842d2516ff67a85c585afbe758e1f1632ed22a74070c69855add71e6048bd243af4c108bde0ccd117b4b6d504388cd9e1b5e203a2c13a26a86afb2f81ec110e91e24e91a873c89f1c0f607b678b9d0702ab8a4b5aae83a68f17c6d111f368426b39fa1fd140ff324356b55f2e767fb4c58c86f1f2a51300a977842f5bfee940c8e5a2f32d102dc94b1c9093a71108b0b51c924c8576a3925489efdb40acfafa05fc0ebe17dbe6adffd2d4eace7fb8c004056086bf530706960d88fe6d0a257d8ccd417b7aa58f5955c1d9d0ea6ea89e53045df9c50f8c63928335072d2a626936152b665a7110adb1beaf65094e51364dea028669abe69fcbbff26e6e39fbe973c3a2df374a03ef363557286321e9712045cb6c86ea650bd627fced7b27e43e63a9afcf8dc176f28a27802d8fed9e0a395477e4222a6fb2b438f9524baa44cf1358405b4952c6cf7e078069dc06c30d531d50038cb63909d765d4975b34d85b49b1e7ffbc6e1ae7dd0108af4663b9cd645aa344d57a569b33087891242dfd1b684ebbaaaaa2654108aeecbd0ec5b29180f959de44e3c5570b997617c881da30d8f36460d62bf25f146017b2c6ba3cbc4d18654dbc9104c571c229952fbe2236b260763440caad67fe61b18ac00e8a282b4bdef3f16199a41a01647d0dafaba9d3672790c6ae44c163643e3f695cf808db5c8ad146834d4adcedeb7a0bc8ca0a172a72ebf724013d346a645e73a2d3c5bdda562ea8b9f50508aa0c23c8c731b1a6438d005008cc073980010d4f5b99d6ae4c51b77337f8f20ae2043539a49f8a14d1eedc2329ac661d564b9fb1eb63407204f54c91aafacbccf790d8824661621ee44d1a809bcfb3c7ba9f56e3d73913d606858a17bd0c80fba1f89ac7fd31182705f3fd1ab046a1cc1737caca4351aef75f340f29a891892d9cd92d0f5d8d9902b4973dfcb8a6e38ad04f0cc8cc7636e7a75465d792501397e1b08e9c365c8b55325bc10b1d043d3f89b382accfa916715220af803f87ff0c9e9b8b3a6c072d66c0129e1f3ae970990823e4d8194a94e10eec6538ad7584d74279d6a37b9937de13152e66449fa6ccbf8a1e06ac85e7ad1d949be0d18ce7e483374bf0815a55d6ec4e0a393bd369cbd95193e6d47fd3cfdf24ce72a94a7227d4e2c79693168bf926ac17c5baa5344a8d64fde405498676c9d073aabd29e404b5b846fc6e10b33c3ce1ec74e1fe002c6f9e62daab6b9a44be448f385bfa06fe973c66cb74d6afeb75aaf2b322922a53a6eb2fe4f671ca7068fee8b1504b13adabcf41a128d4af9b5a66e44299269af079e47458ad801210021d705c33b235e3040d4831fcf90653ea3a256befd11f5face40057b4cb6ca4d8fb0d534df5d469b040048b63ca06e31f864ea3786364765e95f35cb4eefae147490e6ef31807ba523a93f7dacbd3ad53b90c2be59ac3940172b8135f6836e3a024fea03b50c536a80ea967140a26f8e90fe75184e153405c88808c49ff8f1e4ac680e9b786468074bca93c3ec1a84027e58a3bd42486be302e3d8ec5160f006b6c15181156a048ad09461db4cd164e8820ec6f9af3fd19c592a1ee81d2ebbb1a8e57bb1b01af2cb3fce2f9de3022c0f4abb35a98904628c54d6df4734f8f068b54dc8efec687bd24999c2c3c9341f66822926f69c794190885918d2435dcb61c2a86246e52419f1a29700210b0a7a5a65e125a3031eeb4c9c67baba9f7b833740ad7957d36f533d616e4c278504c62dc8bdf2c82418e1d22a90ed990723276ad52f5001bff1f61595fce546e932844ed3bbf53c7903e610fa2c48ee4a901ab8904ab8ac4b2b1fe028ed2d2a8676bc6d79dc5b4e71223f45529c99946fb2d33be252c5095dd61c73979e793542a9d887d6dd2d2a48b0e967d107aeec61c32889aef78e6512d5940004e34388f2d9235cd48b3ddf2bc8c41bd59a923aca5c7d05f116958e7615499cf280c4bc0686c829b8cc7fda385466cad1db46a8d4904d8a95eb86bb4de53f094f5d0ab540c63d311484d7d8328a6b51e165bfc88334712ed5c02ff1306f2cbbc8c13a87159ad000b50bee8373032eae75878a9bb7a0e0e1c0bb7c1ede0c02df2ece082569113089082bcd60cefdd9be25e2b6773e092c456bcc38fb7c2bd94fc4332bfd99a87751adb21ee44ea7e4754a2588437a412f2cd9b2d66749a5c2d0b01bdeafa4d01cbb912b7cb8f4072444bb32959ae6ad15e2629d9b2974fb2a2ac32425551fde9b24936e122bcf5f1b885756553037be0c3738c020f79083c5b8104f06d9586cb9821ee08d1c3f34027a9dedfbc5128edc0729665c690dfc5aa17628144e5876d9a8ad623d2653836dc5e9525767c221b746270f9a041c16b0fce9dd4ec10d8f499d64c5ca2061934e6d9356f7d84beec2b502db94a7da37138cd946594b58ed2e6c5dbf9f06dd2de184fd5f81e364c939a0fdb83f8e40f415bec8e216f4dc3554463ad27c76a7bf742a799a0ef60b02350ff7c59d47b252dd1cb9192ca4a786bcfb6e4002ded70132c7f83789d4a1091e44a57aa527fd29093c72d551de80da473fee13a2ccaa41644b235c94e5031ac79fcb60825ca52882c5c497f88ebeb05e561c40e5395fb2f6f66390de4593b39d0d330014f989887a5c5edf658554e1e2a944505636962283e8277d7ae99d53a8b1a4dbb4d7dbe23a4d70a2f36210adff7daea6c5537ca7243891e905a54c8572c1f8d3b2750d814c33e2c6e79f12ff0a2dc45a59a37e07c68b91eb564eb14d2da466cd0573e7d103863e057502161baa7541daa89b46fafe877c072a4de76cd7e8ec6c96082a440e3c11f4ed1265d3a21361c7f738cca60db3ff6408b3b1b8bfa9bb3aec9cbd73f4a077ef1976e2f3ed54dc7b8fe71d85dfe4fd62938756b151e64fc7c1a705f4bb388a4f7ad7a46afb679f4480affeaf2dfc8c2819592448056eabbb7f85a3494834bc67f3711cd59196498d224b24f4e1b08af8f9936b0554eb4ced11d1f719a265dc928dd17dcd493b5bdc0ea9989eb48325eab1f25861d39796754fe16d6ef3f4bf572ea6ebaf51cb5c6a3895f9696d80b5f14ac31ed2171e7d668fde351f03b5757ba38a98662d81c5151a872c6f0e6d8fe10602eeb6ad6d87b0bf77d103758491f189a533173ab359f1e4f49ba53dcbda23b084508a7227f47f4d549f2e3a7ce2ec2aaf3349f8e682737b54255d25491d9c605fcbe88332d741745007be3979050df8d7773544ea62499134675b78fc77777434e5bd68bf7d2dba8bf1228f80859137e4edac535882eb6343d73f4842a2309c387184fce840e71b5ee92dbbe78d31b522ad259846993314168312d4b96bd7a2c44ea52be6c38561c67bcc4e01991f36adfdf9a4d9c098abdb2a8640fc6f8cf645a70c44e878b3f83963c1a6249dd69c6603742ff00d6cb8fd4645dcd0cd93e0274c26f15d51a2b9c7a51c0b5c80c3eaefbe7882fffe2ac41eaf205f20c747f8e585a57148d67556d8de1a82b8d9d5ee4431786efbc69faa97ac4a24634975685ed9e732d4ab91d1ea89601c28c9ad0c8f378edcddd04276c6d8b6d0395f25d3c2a34565dcfa84d0107a61a5b32b773de64d6a160d29e05f59e594e8a5504b8825c0b8da0ee3707318bc08a54c82ec46a42adb24643f1723b067f99613cfcd89ac79b54cbe0f91fe9ce319481fdb1ca151ca89a66e6556b2b2b40c728f81a2b49266e4f1bae320ba756e5929610a9ca201823fa1fe4d9b40a44d93c7e689f8a83af645d8461bd6e86df73b7b283a8688c1f73ee60365ae3c312360c301941837a31ad36e0a97b6ff789d79aace2bee25f9ec9abbacdc2ca8721fda341ceec5691be28277a9761020db83a7075e20ebc3c25f341a413811caacdd0949cfff50a8d121bfb920a11573b9c9231b16885d1321e03a3e552a8cb9f802aefaa36868691f42be15f46dc186f6dbe802ef9c152714eb95c89f60958adb621eac48241a72381bd77a66efb61ba45f4a45a2fb5f3c8590e83a491b09084075951fc54ae6c639e7e540af0e4fdaa5b5efeb7c98ecf184246b8f74b3558f0d0c247a389a856b21de17e5fd0751fb920c9065fbb6f0fc52598b831c19e5a3a2681c2c7fe9fd33ad30f1ae85002ec8df3f5cf1f746deeb6af3b44560814ec066f5f692148191bea04ef256b08a201b78c30b13218ecd8614f679747933d62a87442b430109710ea7628a7240afa7b17da49bb4b66803edff1a23f4d095be3a1c3e2d4b76822da13838bc82acde4b0b50c35b60f079d97cc6f902fbeee99a60ef0130da47d2cad365ecd69d37c77392b189ccd6a499bcba667630ad713bd98348d53bbfc845cd6a6284be1ec9cdfadadcf9a7e47a47741f1faa4e09281e58623e13bf10af4714b42db8238a237867d169941dd49d69dcd78114673cc09b9f50827d7a5016f4a6656d39e7db1bc7790d87b5a758d8a94a7fe3f7714c8d1ba498aeccb23f92547e3652fe9c35cac63ef2c430c293b145b303096473e436ca522cfc6ad468dd69619d752d249c6f27f28e16d3dfa13d4c12297163eb5724e11d9d50a1259efef25b9a33efb971efae87ce8d9e98bbc022630f9385c1adf2588ecf6fa4b9b7a589f086057640eb3ab60f1c2f8085625d0ef1c17e0c09e34bf8b5f070855613330b7a4fe372426d143ea735afa4caeeccafec01b96a0d963f62a931a1337440b47afdddf5a2707e79dd27f9231dbe8db7efddadb36d1a0b897b550b2a0d688e7376f00d62e2ca158fdc299df26e1da6606b93e10d8a6ba42aaac884336b26260606996faf0bd9d5eb5a4c697df17f20ef1ab74a6848b96cb40e6441a5e00776bc4ce9a15f9f418e086550466987d70f2f2714e9476b7902152017e864d75d494022ac1f0520903560c368a9246dfc5022c9f6d76268e6ca95338d9ba4dc44070fa57a686526beb383a051b6d02fb9e4e0c7af645d8b6d2191dec79688ae9f89600231a0b8a1543f0e28f05ef17c10213df5b8cc97dfe2d5d98f7b475d41651ad9edbd54354707f390e6ea7471567c86dcc15d58f51355079cbf8621687c836f6239c71f9af68f4ed48a24faa67fa878f360315d40c2c5068eafec1b5f9444542c7712ad103aa58137c010c6a8b1720926a35ec237995786921ac4693a4ac464b2be7f44745d4f0a51d2d89e64a3efeddd26cf2520f92fda0c02cf1120d7f6559773b38c85ee71d14369c241ec483dd36a69c1de9e29c5b5c1849c0a6da0c11b67ddee6fef0421406664d24bbfd80a6cd2e40556610d6e8105aa23ceebf07d4a87b10d11bdaf02c31354e5abf54cc2f796738201e5c17d6c69aa7e595d4f83a061b472fed16560094cfb8465d814269ecc43496dd3f9512bfe24584c97bc164b590ae50f31a58bf57914156dcd3994e362a338306dc85a9dd336794a73ca95f4732768b9386016ff38a7cbeaf3da3520b5b1dda4f992ef6d5a1ce8e51843b488485c2eafb9de86c07d7751d4a74395be0a54cdc722c806f12a0e7c66611798a89283cef84ef6f9bef5b6be71c3a816b72723c28413d98d195c2c66908b6d9adc62f389cbcca6e902a897ccee637ff39f6c5eeb3f24be7e4df5a9033ea1a1db36cbdc8f1a8b92e615f01094673cd36af1fc28b495ae97bd14dd837894139699c67670152f156226cb5679fed5c9da708c54acd9db59498d65387ff9cdc4dded8e0685f033760a1db9e23a105c95d05dc1ddf8d876a96350f8c0b8932b305e9a4e7c28ed76c6406595eafd44e85041dd698fd59178fb7e084735d74eb8def8456d87191d6f5ac6c095140a3ccf139fc73f96a5d56959cfdc5fada3c6bb0174755e7736a68495cf260c24eaf8c9a0ac8fb5a8fe5518a7d0ff8ca851847d34a4d34f7f55e79363a28e9a5d738e15e015b1a29644975cfa716abc85ec7bd8a36bd802134915b77378efd05a883d361bfc197e72b27c3d5e0eb345b295a553c74708f52b56d12c7e0eb333151626d5be1bd9175fd61daee47b4a8e29d9f27e7f41d2fc7a2befaf5d1e70498b7338fabbd371a7ca026a7cd8278e2de82a243936051619c319b24d7ee5548353dc2eb8d054f457441404130deafc32bd3aeae564f2e0d03bd8fe1aa6dc1e0703daf002d03a137945bc8931c4fecd10875dc348b04060252a92bddbbbf9a4688a23a13bb6aedf84026c6d097656f9fc9e0837d916bc00699df341c13b9793f7cf10ce7ab8c172b6fddcdfe3c24b5057583783d452daf2689deed7d2a21fbe46661d89b1328be400a091eba819c15706f59271a27c49965ed06c44f65d15342dc1eef377c7b4579766827f9bf6a23ae5333a6b6f44f8ff7266a002c6427bf2ac9979ae9b72ff2885b089fb2a95444cefe00f947c4068280ce69fb5e7b7cb781da74bf54325adf3edf88f1a248d19b35336983ada4917e0c722387c16597a87fe450b85c9570b086c0a54792b28c75cc78f4765290053554923acd96742d52fb0f6637ddb51c1738b0b7f5e028be63050ce4586840651414edae7766bddc4acba4968cc3bac20dba9281d8dde07480b81fc61ce1741e81a7f4068451be56f9de34ad4657988f60d8712b8d4f1913cbe9eba52b21a8010d3d920c679a58f41a0c4d991b37908bfebf8155a40f6f54aa9447399bc0768e1dfe23f2681b57e362d6feb5d321b4fc964ae9c40e08052220865ef85f59663dba8e50518f3a97af906f2940b81ce00441d81a2f6521f3310883b8d05606d680f23607517a8369653fbb089a008c76354855ad3d4e2a4e42e7ea94e9fb2f0eecb7aa90f5d29dd5a44360a96f4b3bacb2794b4453fdf57f065a2a113b9bf19099e6039e829382aa57e84c195bc027485e3e1b6dadfdbcadad7239aff2febfc6f0df5cb114a2da8c61bbd90fca796580a245c64275ead5c2fda63a820e2afe3123b1825bb1a3da5f223f7c911eb19eb1bca8f5d07ff75bd3f88a05c6fd3866ac75294e239a13b6fa21237549c9b66adc51452e07301fbd967013839277d6ad9eddda9de5a4031f20cdbd271952d9e8ccec8977b215429ad1b84f1ec252f42ae7e7aa2c94117ec65041c517f094af69f945d854c5d3b860df459976f9dfe2c9f64415ac39f8f497ed964acfc2cec0f11a31c56a7304c4b31f7994d008490874fa8de970605896d1e086989189676a7d03b5518f115f86c9e0c363bf0785c9e4fca1bd642a7c8b0b78cf1f09432f9a5e2c7cf29195011adf102afe7c853ede25c5aee5e1c120caf325cec7825f029c123d4b33d467f0f632503987f02272289d72dd093f7e78e01491bc8cd82628deaa36a3c985fb4cfdc223ace3e7d54d4065963bf6ac2d7e62677553241e98a7dd21e9d66bcbdb915f7d6404ac70bff5d8478045f26c5f1e9d7ea7e97a806b84f88904e3f0984c4daade50995b16b68bed8d53c130725cc54d6f104706a57ea00af68724627af949fa65a3bbcd51e06120decbce3181d644ed92dd3c850b762064ccc4faa3d97c6c982dfe2b1d6e1fda8e08a4f6b2947f0192e405f4a5a58bcacb43f865a0d29a2e2745d3dd7226a3b67990970caef690b1e8687bb5a5361f2e566a818027cdb08a8d9f734a93bafeb109ca98b3e1f0f5bdfacc0735fda76da69731ccba2ca82d40c1886db4d63ae4bde5506a9537135101fbf874725a812f60cd7ee182540e31c426bd42a45127b0e1f411d20c18cddfa5db17fe630502d22b8de47c5f6ce806a04ac73fed9597f9a18c9bfd5e4f3e173ed20d788d6f77bee7cef351c4c16d3448358cb2897dc863810e741efc6ef4b889376696b7a39771f7db0022979b9a91dd47193476b7fc666285a2076631eb18364d385a31b3c3b9687a956699a4d4edf31e175d91a50189bba454f529ca5d71320dd5aa939f285920b474b0c969f33536f70c2db6131bf318f3c8f11a86bc43333ca7c2eb27c9d772e5d864e4001d7f100fc820f66e6785a26d208adb7bb3ffa70901629786c427a3eedf56870ccf3f719835a5e34e2d6cb9549ea8120e3dc6d938e2697068bde524bd33896dd0fcf9a9c42f02fedf95124f77dfdd5664fd5d04ffbf22f637244da1ed6e146f630fcd178fd15df40c5f5aedbc54c6251652211e16fb1fc2d60f426f385607d7942a86a29868bbd9658ab714e1ced23602b1bf13bca224feed909c5a3ea25be134890b322cd591a9312e2b652a2e1a95e602f7d2b841cae599915867798d2cccb6dec53dcbadb425d212ad67c9a002941c1203b4c977a459a94fe91a945ab6b789de87a08865e6eecb1d52811dfccd86a397ae500cf2bc798efdc89d05c41f603fd71fb7df38ccd74770917ee202b8f92b591f90102aa345dbae69d40f34783eeaa4837115c015c5d82abf1a20156e9b3fe978012371e1196659ea7e9b864140ecf725dd8ef24a9a660f29a62ff8d4941995c84f1543e312897351fb0ca8b38df63d7acf5eb365a5d8d0d2f14fd641dba1946df30b1059d85aee1834790ed642f13b770b758f49b782f7a615b9f48ca75b41354af09494b127e53908b16e74e16c25ccda9c65c6d105ff9d78c16eefd3bc33040ac567421b37812da955005016f7cb72ff377c1dee67c8dbc484c6154439c1be9e1fd9a8c4204cbf8c8bcd8f27d49ebb701c9e7f831f9790e06feac8d1afc881b27bab8d29d26e428ef34f74a0e6d9a5e295e5f4ab17de20abe1f36213ce2d683749d6c4e28ce41e3921276301e3bd65229d83ccda2c39e0d764316b39910c2724104b5ea8169e007aee7ebd552271a5edaa409676a726efb01f4719fd7a14cfe51a35e4dce88df30b9bbcf328e0ffd4cc9538ba8596cb709f8f277ebde6c0b0a858d35811b16c96f9cb8f34e172aad8e5a8707e10ebeb86db6d2984a8ada3b37ed8c7593c43c8803f6bfb8d515c0906ef72c1818846986d6ef6b061f32511e2caf8e6c3d66a89727e1514d3cdc4619d792cf789377e7d76192d708b589fa3101a540ab1a4499880e5f71cb41ae3ef00b4760de7cb740d420d22241f4d4dab90d2a96907ca41720a914971f1e58a0eca2562eb3577222707778cfb2dfe5ac302c45d6c4319d66a6e407d2ecdc93325bdbb87e03a2e87a5dc69f04db1f71b423f76f34dce594f282133877f54b2fe5c091912820e0f4dc8ca20ce4887501c868dfcd065476aa29fdddb36d3f92061cd254a926919cbef8ffe4abc204092d9f4e50f6540793ee867f98e2f4427e07e9a4dba16450f7bf32b15545cc1ba3e98fbae2530f17b19188a97c169fcd907974f15759015d1f76c48801a237941b1ca7a1783284f26c8687ffcd14ba7c2e7b5dc04bf7f69832ad0415071d93ad025bcdd510c1fc647fd4c8c81935de456003cc0207ca46be434485e8333dcdd3ba1ffa468f23e16a40a1561743b23fb1f056bf21fa5f961e8cca72361ac87fa6d9ea1502e8d72996b277946ec769d4f2cacc8903d480ea7916267711c6bda14738e6aecd738a541dcc7048c522c9aae8bbf8d48562c99831468f6cb590847999ac29b491f7659aecb6fbe898e7625f4c42299760a2ce665926f4d90e08a7d6e9437490b5bb553fb2cfe86501ab71c53ae8c2bb77c2af89d79b4382405b2cd611bb90b69348448b40295683e07624a519b660ff31cef6bebae52d7c9066157fbc3e77f59501be6e89172c0dbe434078c67e9a085041ad29d60ac197e3c71a28ca9763c586c37280b0139cda336917969f7a854557b22af803cf043a188cf36cdabd5eb44eaff520a8fce310a983a5704cc7aca7c70831d44c66f5e5968a79b25bec401a600525769e51a26853be559f7491cf6e14beae5d65b64345a2cc06666e71356b536bbe9ca7574f215ff2c0ca446e9514be396394547968034b8d07ddcf846c2f74b510b4a919cd764a262ff300e8b90a615b2a81d440da67ac33d2934906faf9492e2ca8369c2c058fd4b973c9f16198eb7c09caeed131d66ee4946f557a54c104a28404a2712aa878826655edfbf0f4cbc466a31bc69a7a1e6a37c3caf364d53ace2d11d83a126e8105692c67431009e07985873eb001ed9c864b00e13ebb73215676674ff1d75e12c5424034e03d0191567fae4bf86ad01b0299f6336ebd41eaf2183f855874b19930a1682d78d92a76648cb725de290865e69eee74b199157656ce","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"d95c584e075504e45caab9c7343fa64f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
