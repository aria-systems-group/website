<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"fdd62e019ff95fde46c62cf5968211583e000c3cf5e99682769d5e8b19d3bbfaa10a216ed3f632a5d787932c3e837a493e38c18f58329d2f1caa6c2c8c57ed5b4327bd6745ef5552df34fdc2d0de811751fd65e731ba601034de445a4c283d165bcb8994e76fb519cb2e9274b753fd498457fa643585daa93467f5db3b4bc61319e48ef0449d4fd3133f50cd9e16170c4aeef5164cc7603415bd8e296d30a7f09a6482b700f34fb534c45aa4341f14a217bc743fe60bdf2b5f722007682338798952f4cd4e68a8eee75f9334df8be20ef3b5d97de3d64a17bfcfe4d0a3edf3980d7a1a5e9cfda03b5c5aff1c3456637e373354d775283eaabea9839eb592ed2fbb550d5b00db68b08c6932a5c7d8f31d6a74d8e726ecf802dd1fce2dd9441830f4e099079692c49a1454ffa0da243e1a52f6bcd42c2b897dfb9bb71cb256e30993a62c80ceb05ee8203e187e3ff7880283caffe9d8e542228b183b93f5d99e13aad01382694cb734fb6e72611e19815c8f247ad30d2eab96b6bdefb6a1efe0be9d0fa58b2c50c5aecf510f27331be4d58649a2ee1dcb8bedd6c02f50041d40ae241de2072f71dd04ceb685bc156d267c8925cda9d738875675bd0ee80db75bad1000b55800f8fe70070acb7dad2f30cc502dd23084ea8f27c5122253357d2be3e379d5a1a816ea7706008f8ebae9be188e24f7c13137f3a916acf64a01da439a914f6d059595a7354786fcc1131f55686e7eb21b0dadefbda21f787ead8cf6fd8d39c8a1bfc9127c8fb1caf4816644737910e213da4885907fd103650bc90954caffb12685b6746ce8e1013fb4c5a517c6014ecd2c25c7dce9518e713665473b83d14cf67f278aa5e373a343b8e09f4a15c17dfd43a97ada1b8d7a1e1820e43d32a63809313c0082788a867bf45a0d022d17b9534434de499e5727e975ecb5eced6e7ddd50605b639b638cb85e2ab89967aed9767da1615cae5208788ee66c978b55d28638bcc0aa6acd9e7388d9b8e8b77d39fb66ae334c65036dd7c05d1df33d7c56ea6bc115951a0298db8091af6c9e323797979fa325ac633b861df224b11e87a909de88ff19d6f397e9c3baa79de9705d663599e3b01c8bfa5b1ea5a746f9458e59d3066d0af0ecd0e51537833b97acc47b445b90a2c5c4d052b93cdfcc00f2090542a480141d72b114d8681599707aff572a18b24675efc4b268e6d0b68ba7d42853df61f07b9754097972063468ef18a083e4fcf443fbb92e093e93ba45f093436d44c09ba159358b464a16478372bada1faadf5a5b93e50fb178f39ae2182202bd10d4b74b6b399a4dd50de766843c2038170a2f0044311d423922d3d96503c18e81f5a3b27d15cb0cfcfaeff5cdac24d8c556bdf964d5a1495a948cc28c36abb25a1481c264e636800a341f2e6e7ce3b123088903163139f8770b8ba77b8165d74cdc85e9bc8add78c6493cc6e322611349d7ea6d9b67bf5273d23d3d59812e35bee93caf1a5f7f231df4ebe26daa82efd7415628294f23c53fbadb8ebce0179f37719757975665b9e6bb0e3970be5487a5fd3c04409440b02f2e62a1347c181b89871f085bf57225b7536d3787051cea27a57773245d210999f04863886d12a3f7b10556e06a75d4642b9ab830b947c22c554be6b64cdd9fb145a932f358534878be95aea29a95dc200e2c6dba40027b29bfa8f686f3733bc9a29dd9104c9d5bc21dd80920b0d4af86012cfedc5c27e256da3720b76f615f2c1e7180e9095b52959992bf72c24641b0b037444d842786964b87598909e808c7e13b17cca228628dd8a2ad1367bc6f5647b6f592602c41069280e19373c36173a14cf7192f316b7dd6f261717058e251020cdee960a88114ca216bfe65840b28bd6d390f185bebde641cff7da4fb205a2a8d870bb91032a36e13f7728d0bef619f521f6562e0d0385fda53df000913ee4d51cded9780578fbdd1e5e9aebbd7e2e348adabd38adba33186e08040479a5d3c62cf794de5a2b24751b23c8036a69b4e33c61c21eb87ce7074512f00edd596a97ff5324303282fbc544f9c032d0f4ac500c8a4aa787ea60b2dc2b1e96b06360239a681c18377359eaa7c00a9c57abbbf93f6dd63944133f77cb0cda719b353ae923306dc5e6cb196b8ed9015a935dbcb26e315c8a186786bddd2522ab8d033aef2f1542eec224a85884300015d7e0124e8f59613eb71cc955f3808660f3fb9432d92f4f0a1c4f313cb06e002c84e92cba081c7f23f17d127c95281b02f60e161307c8b6e5d2ec5ba4c16b5d49502da22e5763e0073a07591a78ffa7628701e41f00419d2d16f9a5d95146bac842514fb7ce3b9c209d7e4463db7c4ffa3ac40bb22dacc40c0cefb948a721f3468c1a6fe3fadb70e9fbbf2115e61b212f1dd23e226a721b9193d169bc0e973abc3c0664c1faa4a994ecec6dbff995d8e01866e0bd839a682d565705fbd43c5129735b87385ac5a0b8e7499fa991128650a3015fb7f00393221eda90cae078649a8b1c9d659365ce50bba4cc6669e402fe323d910f6aef5525c73624b0154910dd0130f125714dbcd5dcb5c88d0c89a90cb60e7490aeb07d205ee5e3fe9d1e666e0f13aec804d8d75ec943a1e698825a80d638b60eb6397723f2a1bae09d17086a2e27518f0a06fdc6af717d7b5d1349b47770b77db7aab743f4356d42d6b57697683c0fc3e0a0638ea0cb862aba5c653c4e9225eedc41e53f250c28124905c727c677a43bb50d0496e3e6e47e7e089142dd321887a498ea95a053d1143e656d0e53f0ca227e2881b6e015fd48b24d9e31dcd6a48b88dddf0c8f3b37413651ab157f7af4f0681e6630f238bda0ab402be62f69c265ec43cce513b239c85bb0f4387182611a67f323f9ad98cd779ed7240fea2c85965d0b469395d71563905794c32a8814c62f9d8593879b26fd114389d8690930427286493137ecedac64a5683b08a1efd569d9467ffb2a12584d6689511a83aba8a7d2093db3a074f6f280f55670772e5cd0b1f68d7045e07d0a3fca0ea1ad79feb02a6a575c3c19481154e07668fbf126d972e8494e6281f9cfed16ed8f4ecda7e150765a2187e2b13fcc5469e0164619fbc8ed2c401fe73aa7537331a3250365a80df80a2d2f6a791f6a9c3f502d59a98c0de9551a4fdc2ef1dc6c9b19e45c6b5d6bfbeee7ce046a7558bacc4c20330f752709c55a69cc83f86f829213b51cea579991652cee7661ff7d93ceb2cbe719b8057735c455f4b92e153a2e55ff0a4897805dbc7c298dd60d7c7474da36679485679462a0e1acd9abbd14e0a4d3202e76a0827c27e16c1ea201b74d46c5e49f38b2a7e868a7cdf2f15b536e8c012af66935f4587bcba2d3753f458a709f9f46331d7eace915b75abc9cf8387e01a0d7c9401e864cd032f16a3fd7667ab9a6459cfe6dfe0ef8ef269e786fb9f9a9fb797a4a59b7f0e9b0b09dd8c1902d3ab323038931a03176c9760fe06740562f3ea3edb6e4a793a7531c0d9a4095e2899fbee42acdda6a85bd2eb8ab5721083567ab9484d3d725a2219462c6de164407d1c0c36b152b7930c9ebce6703ae0d5983eed2afa1121006d4fc53dba51f374147f6644d311a8ce29d51ca099532f3e37d317309f035c253aa46d56c24301456a5cc2b28e85259efa17843b543c708df34243b72eb78bb8696271fe5d0fbd4ef56eb979dcbf078854be9720169fca306e8ed4969e4f2939c952405bedbb588762d5f8c32486b4add374e6a0e4ea4e6b14d2fae35e9c9cb20949fd398462520dace2dc644e4a7a4a801c3dfb744eddf6a5f752ffea2fd6791d9d9b7ac806a5be9e370fe41c8394405a96eb7f02a95623d375d4301789588c7fa03a95d5ad2a9b78b41d37216bc4b2e4f4ff8f707ac90438bb91a514c589a49f35a7fc6f33a838d7a18629f10b1d958fc5b34e927c7c914b6de4a8daadc4f43c86eee5e6b0aa87cfef3e4a1ad121e46e5c68a3238bc09cd75b198ba44800fa5298b337806fa0bdf335ed507558b6bbfccc6f5c66277977d31d9089a4b238d0f3b63e5f8552039a9e067c4e9235e87e85ab526c92915c7871674785e17fd1aea56f0e32cc056354620086b5394ed8c8d14f088d4a70ddcaa373b666091b7a522f948a7b5840e67653f972056f7d6988dacffff18b2683ec31a12a36faff71eeda2e0f9f31f5bd216a10c5ade17f8735b58fb0d789cc0b36a7b7c2305f10adf02b2df854958ca8b85f850ce1eddce8d657f614184ea2fc8e6c5d876408ebc70ac80d6049135ebfc51a810f5c953326207102e92619b55f35aa14f5edf310fe6f0c2de0881bd4c8148e5e2466507bf5f4c6c34d2a0633a967dd133ff6ade064109233f13f4b66fed3e435dfa9002f1a166885ad4ef1dede7855a16d1ebb96b970ca7c31b9251722cb4b53031cf94efc547085108469bbb504ab413c7b96683bb59c7a405f0799799b5be9bd337234f27c3542b3df56b28342c258e41a404038c72daab393af135922b84d9b1e60fab4da788a0b1ef41850d361545f21e2321ee34b3ae860b54efa97f60579afedb81f8a7d401a3d83d51d94e3424a9f069cf533fcd95b1749acd9b9cb129af9eafae694e98ecf929f0d9737c4bf34f34d26c8fbb70baf226835e26884b95e1bfde3f6c6278659b5e5a394ea192cef12e7d20719f2d20c110eb62f9791bff19411fc9b597c5408614055a8f9756cc87c6d2336de97f9a435febafb4cbb5ca94f69c334607818d59789f82d652816bc8be37b06873b83b4fc0e1192a4f77ce33c60794861a5736220ce4e50e7c7856648549b8f43cf416e6ae01642e302573138c48519421259e3d8a899ced411b7780f3778b8b1c00f2d9f47cf11bafe7d83c278572ead1b4f5a8e2475c9b8a22eee9c763d546e9ec1e232bd8ff55db4db9c535c24b7ab05804ac845107c8864e7bbd4fa7266eeeb2ee438a9755ac1e6da7339bd39069da8bcdb351715640e6f8d77320ad3ab90f571389c53c4a429a359225d6834fcd4e97d0737fcc930d15c75b9c96bc0eb21fe7c57e9d51160236404ced553c60bb32ba64d1bb7b02cd003d64e4fc6561fd2e1bddd5d1668e5cd59b3dcdd7b96256511a0cdcf3a9b466c50c3f82dd893ea6e2e7a53121401486bdcbd7cd7ccc168d33232e237db48f984e28be658d2ec74e988e9e8d622934769a6f018d2c373c1e4d8cae6a17480d07832555e77e6f8dbe03c329a8f5823a1a5b5ae608aa7727497c9ef10e3ac30b55137fd13807158af0ec0017408bcdd296b5c4ecb84607a719d25f8458c583ed231403a03ca28e1e1bb15cd9fe3ebbefce6ad497b2ba2847768986068a1a82029d441dfe64374840619d7d8c1793026ae23a775a11f25f915b99e1ac24a60f081681610a438008f0f25b7995d79195e6e23806ad797cf6b070e1b0c7ccb25d040cb30f7df454510fff37d8f5684c5e58cceae3c0a7b0b521c542929279ff7552e7297ee63d17b491d40169bbe2ce42c0c9848d237a28019220ea2c1bd2987c0f371a26e9e5fa4a19bba71cd8651d67638ae6d3d1789e18eed143e769c2dc88d8762c74e56934f8742b33fc8d5f7a0b86f71e6b92460236057c1659161956bd00f9460976c3d3f30d21e0d75f2b6dcc4875da9806e81d0a22d78fb84958803ee7fbaeeb83c9549baf8b90748fd9fdcfc1f1a404073dae4d6ffca77ddcc98c83153b7abfca3fb6e304b5b7e0a3cf338f123fac0a6e80c4a3583aa701c197024743d54ad2d112286807f8db187d836b9f4fbf4a6d0178b97eebc2e3d6aa705be4995b44d08672dc8c83b072f02b33384a2fbb5c4d0c69c2240b3f996a3b3c79f65c093be592c217b0304457ebd2f74b3071fd4598acc7c4e00f6185314cb1ba7bb7ce80ac4f880f9288434c687043592644b34eb4b4c8d99359476a0bb1b5ac0ce62a733da61e740e93c5a64f875bfe350452ab6d37a0ea7b76ae7a147f0eee6b5cd9074e4fd43986fd8f4c20cb8d05ba5084806f6018d6d9e1e8a4e5e84412adbebf15556449f679082f92399924d033c0c460c8ecdf84277bce531401b518f17c23276d2a571ec6af3a590c3e0ca091fbd4fa59bdca0fdc040ff14b278b93955debe10fa11be20c7f3b25e8ece30d175e306fcfdd132291d33c677e7bb9159a98487727142aa7e42a2ac73bb6a7c37e2d7df5b6a81b461d9624059fd8fc61c398e4a93cbc69e39932eccaf967f81a3752e1517af0f1d27afaf8640925dc0de9d75902c782c40002e56512045ec01bedc5c291435381f3895acb37dee79d1e706ce5b80647994cfa9e3705d1df69ac7865841e7670cfeafa187eea801c5af0f934d2f82d70d7b318bfc73ce3a2bfc502531aed23e08203f2fc49bb73148cac28b47c2a37a05dff6edc84048fe1ab3991297f419dc970cc95add2b271c9c1ae9f700af85543af5e4296af692728b7293bd3da25d2527bd1e4f06961a55a4087aaf9604a2cd5e071ec02147fa5d27be0347b88f688ca6107ec9061372cefb96f33c1decc364d201ffec04efa969b955be603563186ffb4c170122e63e09169fba2252ce4fa4976321c8e9cfc6e686fa78072dfbfe87af2e0a22aea3949d8a5756fac2414d3ddbd1c9cd3698f2287bfec2ca07a2abcf757d7a641f0b064a34a0a9c346364fc7fb687a840d5f74d4e3f1a9531368deb29cd22f2c16331987c3b2d5e43a08c15da1dab44f375a3badddbb73ba047f1c293c830e3210908eb3859d917fd97bb549b7f5fb7cd0567352a62f5fe9e557045c9483273cb55d3a2aa7acd3360f0acd00f89b0746137ab7d57e256326707195c89e07aa14ebdd9c2fc12fd2e138402712b8dd4ab7e63e956d87b09d0bc7feefad677537fd27e4d8188fa5af274c617a6d11f96eeac137d9b11445e4e67a3820ea9a0bd857f7bf921337dfcbaa719f26ad2b17b266a4ab764ca56be71c99c71cddfff06bf9be3e3e95942f6d69d8f90f406e9658577e3ebef3f502dea0e8c7197bf066d3806598fdd85a7b98144767675f27e75fefccbecf913158bbedc3fd957ba84350662b1b637f2f7d9573ba92e9c5996c7f7c9fb779fa7993ba88762d237f3f23c66dbc2439883c7a170c4104aa9e0ed461acef2d28b672f32a21d79519d30e0a42e8e4141ce1ad07f6b67612f703819973e933f5710d4b8440b69f3af2dd2775340a4d7bf3362809a13c387c1f672e19ef0f181b596d5fc8fab1326d9a27212e30b45f7fc20328a63997dd6ee9a6d6bd71b3f5aa8dc27d37a7b2f8588fcb4acb5c0d99aadb49d3ae00f56fe973be4b427febe4fdceb89fc73edc46a1cebf746752177d31f2b373268e9c98a96057b1b5d5f7775b69b710869c3343bb625d8d611840c50b5829458186d22d6f16aacbabd9630a2428a36abbe2bbfed9e0adad46bd29062fee69c55d55b13c8061e31dc3706f5d148424c199424d607b495c038cfdf84ffaaa5d7319c159b3f9b3f1b8a3381037fdab92e1365e0c230f40e6b80b72ebc06f435909740d12c35f53adc9e697ea3fb1c4fd81534258451001bf53d7f41f28437bb2e39b0fa75ec88c855a1312d813dcbb300d7d73173fe31ac39dce6489ef3d3bb9f841d9a06b01b7758d50657d702acf1042cefb26a0072cc5bf73c7dcaa24a2336a1624fe3e6cb3c5f02bee13ca6ac82ed46d58ebf8697813f0135573d4bd3947cb5fc909a0cf946715ff313c0687b7cad92e6ad6d3508d9b9bffb7ab6c317cf66c7e17de70eadc9923a0463247bbccb1e448d169fb812b9614455f61bd4192a6bd513e8e5d1fb25a644cc62c1f2177f3475ec2a63b097ababd7e50542a050ea073bc51daf71cf9f1f60b370f98a835cc5a4992c99a1bada8df377eebf2eda60c0c2cf51dfb27bc7c2f07603a70442b6d39ffcffa52def8c340a638bf9aceff44d35989f930ba7ad90a612ea68d74fb2025bacf8f9773f909ed76cbbc30ecb7f0c53294adc47ec17bd6ba3f55d0b0bde84d2f7cf9b61b5036a418a2a2c6db59e6e941a77f217db4802dc9f7029b80fffc97306661bd54994ce3da8a438af4ecc287e23b2ecd8dc134ca4e9cd25ad61ae541b3b40dbf70ea0e2f6b5b8c928d0c725ed21e911ebee58942629fbb78c40f6b90e6163b1995abdb9299d6023133ac84dd4556d394f847079c8d2def00404b29110f1caef05ef8be242ca6feb642e3ecb7947e89fc212b0e29c495f523e4efcd499e5321764409e90b461a512a81eb834f2bb5cb92ffe1e05dd463ecc5cee8d995959ee9b037246b583d92ac64f75a7b3917c7d46cc622457b6c87160cb93a1e77c759a88dc0163225c52f8a458babf88e1b0bf86824d5ac424fa3317623964825b85aed9a4c3c11561e05db609a6cb43ad0556c2951ec687f5cf4c7f425941175e3a44153b217a866bd785488719a775bd2b827b19ad0a764e3ec71fa854b2f83527702a233e81b027acea1787622b53790b78ca44e19eb4ab1f88229df9c133919c39a8a8664d3e97ccc4419a6378c956b0353c929dd067f7e061275e2b8b91bd17d210f40e9067389b643ff59242a24e650ed453a810e75e0d702b25cc91562fd4f9fdb10424197cb68900adb2d089496ba879872946cb298fb6d47b6ef41edab0a49b6eeb6b4e231816ec8f8875402a5375c8d8fbb8a461105ffa55d3763197a307980805139ecbe67bcefa75c55c5c317b0ed2e93bc12d859856ce0ddff9e87eac071cceddbecc5b20c90bdcef1de296f6b52f36858ed50799f80e9538dd4f275534a7f88c0a0167d3542074a94cdb76edca00b3a7c6b5e7706a0e653cf2368a5d94182600903b9b3501cc426ff9c71b437c5cb7255cf8a7b992dfb334648b3d751335d8084e870e87907ca922ef3d0bbfda6c28f789221d3ba9f5d75ee0366ea265b694e1633b9cee629de7fbe77bdc372ca3acc470cc418908159d646738df79ec45e600aff2d455c4c1747001929c19046bfbdee3c73bb13137de2d21d4c98bb0db2f94bed3d4101dd96b500aa01110759d1cb7393dd531150baef294ed479ed371ea9123233cff014959700ee81b9a92c2c8a64a4433a22548f699d05fce7adc4eb470f5bd673979d10e3c65fbe52cdb35fa1f51fc962f8c18f55673f1be81defaf508397dc11f601add7d565058d0597564888b30f25ac9a25011a0d92bc1d49bb69699f71cb9345f772e8031a8ff0af773a6dbdc1ac8c06044147ac3f24f97a65cf4090a06cd434dfadef3dea0b17891b786d8eb2906e6862b45045bd643cf0a06b5ac64e4ef186d636f1b16c6ff044005ce43e78e1e70930ddde6e8780d638975e7e2d8ea3c70c6afb6e12f37184329f9f030c42dd412dda55ebe3a0ecc9b19dea3dcb6a195a05a4bd6728f6cf6d863d45cc0100319c71bcf49d7bf4be47caebf5c710f6e5c44555cfcf974b86112a8b3bb7bfa408077794620e82f1d99e0881926f9c888d5cee00e9502cf93822d323ccfd8d9a942200f01f4c3b660beb85e2b50f47ea20c046cbe005f3fc0dfa2e66b0a5134d853d448f41962c67129f619f45e3ee14eb289a738924b9c9f3bb78ca3c70aa21055dc6232e275b79d9e5186280216fbfa0069e4012eb6110074325187ea4a3d6972e0495f467030e4dc33cc2cc7c1e3af6f057f3fe4857c83b9ab568f2c19a731c9b5a9d275a09b0f447a615efd8f4971609900ffee25c80090830a418a14d0129e8509f68132c0966fb991c57a45eb51a5fb25efa37b34a4dbc49cb02ed07b6e1883b81d2fdf28448b59f080451753e5c7ab167924ff994c36c4672f23aaaab1975de161498de0d8986ccbd74a4836fc6225d16a8d79de6f735561fa0b18f569cc6e4b4162fab37de0a25b864c77a13ede0e3dc0a7e893d3fd9337f92b77f73a77e5a4a88b12adf8690100d10785e37791859252d5fc8ce2920ecbdeba58f7d36450f84afe45f4831cc7154eb3e7fe6f1bc02cd68e9b61998be5c8570ac8b8cdc82ee8550d1929f7e913a52b81bdd31d8b68b48cb27f59430b0593137572db7eea6af09af996c5b92cd874ef456d3d50b413153ddb1b4dce6b993f9fd7f8ddaa272286899924d99c9fd792726b58ce0c1f43a1d77e1516d7391a455bbca4d0bfe81980158a856fff224de1eca44a5fd0b0681d5825b059018d19fba7d28878303031bd5e99b5ed15e25f9320c080dd19964aaf0e36be7fd93735c28e2b648643c24179ec316231f211b0c17d64996e0eec46694541e8aa5e6abf44311b5263a5b4cc03502792e5c1dcffbde76ad798233bdd25ec86aaad544564a5e4d6c94667248106822c1d22e1c9451da5e19c35ad2a8e1dcbc4c1206ff2f1d4519cd5298fbe8860ff932ce478f062080f6a15151cd6523074db0c8ef6f06a7d098eb5583190afc5f1c78ad584092fcd78537588f3f8f02397b2cd16e9820165849a7bb7141f7d40206f9cd853b19c899f33f1efd337a4c74760758604cbb2ca8aae0bbcd35952377c2e959de6120242db3f7f929bc1d22de7658d884e904078297eccdc171bd55b9c724a1e107d29bbfb01a1a4d0dc59a730258bf2524afe79b5222c241f83f97214bfa39ea9ef479b722e2ad3aa23de0bca0047c634c361a1f60c2155ed58a131316f0ab6a5e34248372bcb50197c91661a9827e3dea264bc9b5dd209ed5a9d88f9ed77bee4afe9a18737d9483f67a4f8f9efa7e06d7670f26346a1b2835d519a6cb97b53ad9de2d5d8517618d607aeb7f16464d9ac8b6c2dd252de4eafc4afc4ead82ca1fc7bbf211df1064cad9acfc836f7019a334eac38976cb28d4a2a0b312f161a8da8afa5914529c7fb01c83d02bf61aef169269cefbdae6106de2c72f6bbee0ba4d73f1a7d0f674adb6bfbca55dedda9999ab9b812d51b6a3c28b485b8cf1c6c859a69f4606d60ed4460d771e19ee5dd202fac2c1e36d320ef4c680fa0662cff985a1da87ded6839f56d881132880ea5acc98a6bd392fcaa65e010241b43f50ad901f5a2a5be08fc264be2697f8747c7f3aa941fb528552aa71019dd06714467ab764521054b9233675dde5e03acfe615484b31a93910fcc64f87a152e7665344450bf6b8511edcdf310de01c0b5acdc4742f17bd54e6b12c46edab68abc349fa3831277675b6e6b3d20c7a9bf0b7e14dbf3d7e9a17c5854098c9a7cf678ddb7c15a2931dea8db37cfc47f1607c80e193057b23d9ffddf458d435333408cf7ff3373dad9001f1a68352275400552ff17221b568b11fb493be73fc8360636fa5aebe5cca17a2b33af91a3f84a1d5231ca6870a0819da53a65c6e67efc26514f74749e376df4e56b2deff9e5384ba3c71fa11e7b9a017c6b6c81332bacc6d818806640470af78fe9f31c553bb4518eca7ef8f987dde056d81f9176e66540fc537731a736fedd21a438d8a53a8c547d634cb309a0dcca7f234f4aa5c8ba90b3bd3d614531fbbb60c62592aa42c492a89db4dc8c6e97c246ec545b7d4916f93d957c295e9418bc78858c8a68688452c9394022c2ca16023bcd7c2ca87c0ec6a100b56b227b0db6af0c1eda8fed8ecbe57740b9f1b3d133f92eb3d4d2b91107407d149fb45bd1de4672cbacee329428836b84f68f1062816a5c6fd25a39ef4b408d7946ace760409d0d7009b40628a582741034bee61b688000e203231d554e059acff670084f0544e01081c5db86d46986b11e24f92601062728cca65d8b97c2b079c03ce5f83a69f60bfc9b614bac48976ecb08d11694d734d931c8a9266fe5f7d74ee9729d5c8598606fca87103ab3ba0eadadacc59c52c89d5143300d2d10ef0458e1ebcf73349543a108dfffede88e6de42caedeaa4839b5ead5e94a4c4aa6e8b92e26c1d49e88a1b18a30fe3ab5142989f59da164d0fdd4719f0741de5a41dd6336f3f4e7949fc2f77e678d0dc0207fe0f03a8dcc0401fc02a45505520d829e5f7b0501ae7e598679a71d242d502ddfbbe9f0238eaa9860649ea32297f4c532d3fab9620cc9c03fc41614f78b5028ef4d3ca9c89366ce022800c7311bdcd9058ca356959c4d80905dc20ab3712fd89eeefd9d7a0346d38227ec39d1ecae7112006a227df754d2d93dba9ed7e4198739743ef807e500502ed18aa7bbfd6820ecd7a08eeb5567013c487402e26b8385eb2d644e746bd31a8b3f9e3ca9a1776bbadc367d259df8b3aed24bacfdd6ffa66168067bf0e709f46e0a3fbd5e865f12b722b724afa02c1714c73a66cb4c97ad395098fe05f54583070a574278d1ff7e300fe49bebfc5dec0810c59b24b167a5a02dc18f5d294d8c14636b3b22f183a049f2b05313444f0f9ce18a8dde49f873f64424c09cb6a326fc79fcdc5947c19def12d33862440ed0651789052a0334cadce12d69e17a2544873d0b148036639c733668a1f99bfd26a6f372ac95643ff631393e925dc7eca6f29fdac640da188df273961d19323d3756ab559f24f26bbb2ed7efb39cfec9410e73dea6a0d78548683d020a33f055e406aaa5fe2c7fcfd376c460374dcee0c171eb8d217bcc90466f1f144c72ac981a62f02975ed2502789b0770ad5b37c670ec2abfcf5fa1b9c51b2bc400db08217f91612e1c8222afb3dfe08df071b9156d3e73c1b0c4986f63818b7abbee6255880a8d7bb217923ea3c46f27226ce82d508d11b5d065d3ab9fce2cd1672f5331728a691b34060d8bf777e88bafb606d27d4e7a4a8a294405ec8651148cc335a71e65182a5564e33b997ba8fe6eacd4de44380a1117d11aadf59c8a838585669b6f968b6d0d150355c3897bb36d058b930258d62c2fbff2ce1bac72ddbd5612c5578ff42e6162f07d2e662d1ebce4203be3a5708362a04d3a967894575e0a9fba4b6260405c204a51aadef3e5b1df28a560ca4e82133220b00357666889961b416733d81fc07bed141ea0aaac59ca44fae330f9f960aaa84cfc5fc499ef85c4598d36c4f615f325fa495a95df41f412615401373eec8c9ea9632de1e66efce8dfa8d8d814ae4368d84d827f02fba5fcf810418573e473211bad8c30764aa40e4071aad7182d4bdbd5123fa921e2a6455f5c0a5548d7397562dc202eea24952c3f26e5189f4a5d32bcddceb32735801ae3d784460ab2d41bf0cf6720fcd35221edfdeb907dbd4e4535216b4eab20e130d4ded84f1def0200cc809d53dd1e31ccdaa8eedc1484083ebd6192c8880dbc95be5615f3731def0fd73954bea6b20d7fcdbaa3d77b1251c17ef0c1ed8b98ff04f8601e00c397452cbc64df5c1b62cb69ef8838596ddfc984e952f31de85edff44f53b00960fe0bf2f7b49a6af360dda050ff4c805087e6303f9184514597bc7a32adf2d486595bec5e5e32dc7f3bdaa3b7db0a803a92aa502c71cfdfca9bc875c48c396a9cc261941e16c2ae88a52425b8e8a4c9860d86b8fbb765e87482eb0d24d092e51bb7861bf6f5d79fac9f7cda3673ca18679e2a814cf7bc646a7122d7c440e74643a34a87bcfd7f701c84ff7b770d422072377e148ea15a9ffb11516f0970298837aca4e15e5b8f762ca1ab24a69606ff29fbb0b9d41a7da31400671c7152ef3ba06643cc6003072867ad8d18cca288a6406bb802ffd84ac3961bc3bcca72f1918ee18d155996f0e8e8e15d304e7aa9a12eae6609ffe450949834b22961fe418a0fef5808ea1842aa38e8c295b4e5c32cf15cce36009716bb6f0efa7d2f2572eeedcfd2be1be7eae28f9d47bef88062085b189a18a01bf3013bf86854ef156a12c4b7af5434f32b8c07d30c986ef298b6a97f02c1caa789e2128e3b4f42536057d3beb1000684e38b91b7f04beb6b6dec1e8d06e65417dc248c72af9c551781705b81024cb1ed97683db67ba1cc1b1384ebcbe84d2cf7e852c4506c4a664c641233e6aab30cbfa56ce4f5538f655d67449cf093813d4b4e36b639e6fdca591364a21e8d3ac3ada26dec5414f7273b8de3d1eadd7a464027354bd78b943866b711466d5e7e7cb48cc7afad734852c4f71ed61a979e4313cccd0cd3c4780ae070c9f2e0f3f03bdd14a1966e63d0be74b6b8fcf424c229247975d114e6f77bd36c3c8053f35ddd3f042dcc55a4afd12134d4af6d6e911945912d07c92472d7c89fc795d47cf4bb4de8a874a1ab710e6a1d236517572f51982867d1cf70970d1e9b65a71667a647e64ff10ea858bd705f54442cf6a677594f6fccf8b61eacda24424f80e5b08fcc2a2bbeeab19aab5e6fea08a38372b479e9d6b7a2917d77843a9c1f6a630c28f35a5485bf035104c79a51f07132bc32eb2ec1b1f63a13fccbb4f8e1aff4748ea799d8bcb2c3fd37025fc16ae363fd5cdaf83a1a533f6826fb8263853ff1c11e0b8cdd6bc3b4986bd5bec739e2f2348412d10afb50b1a22ad817dad5945b442d94851b857566fb4ae68c108d2caadd07defb2ff8797805fa71a7d7ee8550326cba71626dc7f5996936f7345ee019876dc72665d28089fef059c8230763c989396d3796ab9e1734d6a0d089951c22ded9d360c2d153f9afae28d38b3a89279dd025af3ce2e7c70ee0460f67096aa277b7f7605ae6d277691f2fa0bfe2956e2dede935a2a87e62ea3c7ab90b732116946347eeafc694500b6cb9f870c2a2709ec783ff9e762d0dd0343eac445280a7370ab532ed76b5693b313dfc5f857ed407746391661a4a41fabe948c367b6c3310633405c96b8b387e2f1ebea3e87b32b9620de9c12189afcc79026f118fd585832c0474a66c1c7d5e8b80e9a4e420261784776aa861728f40e040aefc68922db6d5c0553017343ce0e9962e5e68de3fbfbed17287f48b87b2da0daf9e020576d354717ba62317218276bb96837ecc57d7e254c6161cf240c41206e26fb7014ac2d3a8998696781dfd3774d39d8d28498e6d515541f9a2d409288aefb62745e1783b2a8e072cd9b64cbc5b23297a7b199956d1cbaafd65156e46997ab87f815bc26580e51d4ba5ac68df8f534d3ade4de3b298bb8a687025bb596042a23238354df7354852c00f7f7bb3d29b540fac28af83fb303a07c9b15d6601a0f833ccf9790db9bd9d65919568a405bae1923dd7d1eda35f87974f4a6438fc849c57375c7e45231d0fee96c5711c513c442231cbb9f32149be6fac0f92aa0d937b0231b750a26eadf05a77542594baa3728178841b081c450cd9ecac930890d0d19aede529053d97ed59cca83afa16126857843bd170cd11ad378a7a9473d41e4e15deb85b2f9b1fee0853209711a18c781fac7e522aa284ffca0b9f8c5b9c0ef66ec3329c890f77fa4a11fcab3b7cb16a0f7e558360b089113c4399f4e6144ddbdf169bbdf3a592f6c652e805ab2bcf998a1ccd44194d73c1eeadf1881672078e5373cb0f3f90df45f97175704537681d54de44e86a7da77b9ed37fffdcb7194367a96bd6f03f05b7b4017f613397fcf89c2ebe76439e9e8e5864412b4ac623f8c9941401e676d7330d103d9e49c370082a8b0c96975b81c0a908c9c178ae803bd6674d7772fdf5ada634cd927359c0da3e5b90d73917d8c5c3918fe5c2d35b10439a60a780767fc37561205a4b7e127b3af0fbe75349a929f4659c28d2ee8c3bfb644d88e1e0b8b50dfec8c88672d1f1c3801b6cdf67c798798b37a833f723f0f96812447eb71a2417ffcf0d298ac4f60e5ff8fbb4afb3c389ef008e3bf6c77129b2268bee6504ca1ea65dd0ff94754821ed145b8b5fd7c5dc8dabefbbdadc9d1e8cabde30ebce59a8a26580114dffa176aafa3e32b31e2f8dfe7dfebf37783de131fc38d5bd0107076c668b075f0b93e3f2a69ef392169fd2fdf2d9a0d4038ba948730dfb4a9c4a52d1b90fc885d035f4f539cfbfd0be4e1f8a3c8918a9b67c68ab6b71f8095bf08cd14391906795827e879ed5ca89dbbca9989138b09340644086befdadb1cb99c9351b4aeb8b8a1e2b02592fdd18c523f9624778ecd236ecdc7bb2790aac2055c844fc3cd39c1079a5450abcd732aa6ddf4971b5eec15a54b74904f3572c7734f0d3c69f909e13c1980b48605640741ba3ddda680e9e0506e0ebe2077e87b88aff619a456484820c3bfa36f057d567210a9496586a53bd53099999de917b4bfbf8f3ebdf2744851edec98e79d12ad7ab66ab0fe0f2f2772ce828d802da6d1e3cba44a409d7550a3cedaad10212ade8f5650a5c56eaa842b0427e1236fdf084c67e368306f24ffdc78bbc600082f5481aefd4ba687d0870b2567f1bc1544ff2428225eaca93402fba64f042831c02035490e6e7d7511c80432f40fd85d8f7a3e106da28f738310bfe9bb23f7fc57222b8fd675320b4ac3dee14e0d79e3898de34e08c25101e09047add8860f05075e6a59d27bccb81f6b4335d612f3dab69c13a2a8152dfe390284fdd5f17784ebbff91524e379de3d172ef79b380715d207d016dcdec8a6d9d276b3a105facaed9654a000b8d6c461a7df977ed3df0a660c39ceb0dddd220180181efb3e6823cbd845087a09392796ae04c017b323b3538b2041547d17ddceea9915ff7cc9918ea1c0477a9a488d638a79b3e7a603db620746103f42cfc7756afb929afe3e44d3fa5394eef7b254c8e83a4899da833db28ebe33c345982bc03b29c32045e135fe2974ca7d3846bcae0c1b2a3394bff57922b9eaa240e4dcccf42b0224ff51bd0dd59c60a50247d2b45765cdaff2937a73979c0a54d2f7940fdc706a2a4a898f401f2c2c3a4be8d58e5f0cf1c7370d7f9745e21d35c15ae2768cbe17c5a2c70f8eb4b529f18b24aadd7c0c93aa169a3f0d8cdae4655a552e4fc74f1cb8c92f123b0fd283000e7c80eb74502f37578646214ec21f8bcf11108a6df44df0b6cdf2d4bfc0ec3298b71b352e9c88ef731545ce269e5ca9699d163d773e071e9f2091b19570b724c1c7be7abe88a01a1c9a830fc944453ea149761754529b791fb219ba592dcb1524a0e9ecff15ab4ff570add1697a4b207654acf17f393f4ec8768b0ff8eb2fb26c835aec8399a376741e5e7e475ad2edb6d327175f8041ac76f5e15cd18daac102e9e0ddc37fa67cc384b9bc61d0a6f6af5ac0138f1db4fa3cab845fb536294ea1c413ff460f8eab4efa0615a321adbd6b934484e82babf0ebc8fe590bcede52d93e9657c37f3d5ce579f3755370d4f5eb109a3dd1da380db0d08a8e0ac36e8dfc04d8289d266939df52e307a081bda18cc087b7a8e0c163089abd4104ed3650b98d9c520dcc740937622115c0eb3c83b7ddd63fe49705b64d939cd6eae1e71f5ca63b703127676cd75c24bca4e028c2d894442db762ded2a95efde311e42050fdf3565b11153ecdd5993d9e49fd7171efb7e9fc188b57993fb0d0c649149e02ea2d836672467609a80e47d250c9396008049a8ebf22c8db575f53a0b088649f51c1e53a9b3d0d789888c2dcf2839b80b801f3a2aafd7d3e15bd21e77bd60983b5339c5686beaba74b321ada8ac1f76d77a5bc4084bf354453e0d1ce402a062030441f4f70b5eb217f811ff26243c3966f76aac3a5f06ef084010e9ca79e6c9765fed2429f362f41ee96c2d4c48fa5cb2aa3fa7ac9999a4c4ac6d25ef060f7dee8a1af37aa70071b72cab221134dd3a5d55d5b65ff958ce04ecd76b09a697bfc4b102ce9aa26b3c14f6e70d20e05e3362fd5cad015fa455cb346dcfbe39b08dd65fb16458f00e591c371a990ca39eabad7a2055e936c26b6d01481c151c9a143d59b65d88e32237fb6ddc6bb1baeeadf8f0d46738a01f307c4d1a268f9996538e65455685b30aa96a923928a41e266362a1fd856cd4c04c26cb2b821eb8f4493a01b362be89f62f3e8214c6a3618c4a1a4296cbe2ca6b85c4b21148b3309883042ca32b5273a2a04475029ce8fbe7a817cc8f875c7bc26f60a6ed1d36d5688bac988e19f06ae220bf5c533173e58a0ecc3d6d620489e5e9ab9ce531817cb3ba8b10e2a1742ccb303b5ab94d7b484109c5d479f08d5ea342c951dd0994059947d1a856e2616ff5bdaea1a9c120508ed2125f24b1d848565239385532379c037104a616416e69312dc9114ee21174bbda0ef21be27aaab0b810a6187631bee34d01373296d563fd1012c3d8aecc41c99c6f19cdeaff0e604456ef14baafcc543e9161afc3b7939c9032739de0debc4d789b7aad20e45cbd9190d119e7ae9c7a6114ce8ac64abe93cb7f3872354675b9528a6493aee94b3fef0f5e54cb7fa659767ccf6bd2e3dc0d8c8108f41f8b002f6b358441e01f9c4e66be44438b4813679dc344494f1d124582fcd730c3ceae3e85da10c3e4454894d07a96ccaf1623dd7c3907faac45f0920a39aff255480e753648ecb5906895529e1f2f7b91034e8806383c9e71c9024f5a9bd289482184d21dd258b33216fc8b0bb1fc91345bb679f14712ed46839f41da013757ec2d8fc81ff3f571c1b0275a2cb46d49f2fac86890d740f74df3660b46c999eaf49778102684420e1774323aa0108f22d5b9953ef004de940542d7c4fb428ae159d368db91855d189593a76657e59b472b417eefc24df2039acbaf92977936d6e9a607d0ad545877e266c15981c011305456f4e5b04bc3c32566f46bf1c0f712288a3dd3e09c2f0ebef0172f14a3deac2170a50ade196172a802ac92533f7dd62b3ccbacdc26a13a3476d001f53c06f492ea5da199bed976cfce710aa5472dd3754d09865019e72e66ee38275cbf28d006d2f798e6bac3541aa29a170089769f1071827b93b647a26571fa9ad9f9eca64c55b6b43f3892d132225696b0e4f5903a82e34e316cc58b0caea920d94c232167c837a7a5d4e69f0894ceff4bdcf966208c46569d27c20a6688b384334bf9077b17baa944d0e1bca1fc0ecd1deefa7a29e2928b8bff608a3cfc1e5e7829384070c9513ca4d758cd2b99f42bad65d07d82e43b304252c61b628fe7e9f36c76d649cd9a5dd73210f3f831c52216631a39374cd0e9d20febefdba2d7f218342d9ce1b5012c8177478e0f18fdab706ae00e9dedbaad78ea8c24c8bb3e34aecc6ce3b008a66d293fd720b86da2af970884333a25468d6595d86fd1ba3975589faae4707743f1538e8f72e0058cbb8ebd3cfb0a814311349cce0f6b9f49bee10b53b7b5d21f9047bfcde18f14dcc8afce3e9fce55385f8914d06f6ad5b9f6f1c9316b339341130c8a418855a5031fd74761e22100728016a1c546ba6b8305974238692e6cc300a5f1974a6b5a4f715b72424bac3516934933a960682d86ad0489b5895b2bb7229934c22bf78e8443d2aa12cc69396238bdcb44ad216848c43","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"719833e39bf48bc5a3fdfb4e0272dd84"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
