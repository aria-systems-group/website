<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0fb3d32a730c5f12022da66ceec79b0344f172eba91cc89a28da906ed4910b9e64252328c0223d51d2ecd70b0f2eb5e0c32e51ca455e692a5e2c57b506686e4c2c176eda9e89a1adcb5c334026cf35fe1346fcaa0f5ba904dfde9861be24fb0703bf85e5300f83dfd9a94ba0df98f9304d3af79eb5b5f80b9db07b8907c89c33e5f8ca729906c2763f4da38c917497bac19bd63ba4739f061805a13fbf10a305257b9e52cc779fc84f97f51522d982c2976dbe7a4f5288ba8f9321ed1913dab80349dab7a9f83dfdf8cc94a27037dc127b1afd6a6d4719a4f911fc2ae6b4ffb1c8a2da56f6773c47888aa5be30d1748f93b4ccd789793eef72c7ac75411ecc81f954c6b222c7e85c31e9591f26771a059bb2243625f8e9963594a561354eae90c450eb7bbdb6c0f5b52dd8ec65f64cdf1c4b22afdce95f06911480c3149ef3355d17e239661e2c223a265ca9c186ab25ab987abd62bf6981a1a7042fb1d6a42dd26c29b3bfc96d1a63872b020f2aa8129853caad4a1f3233b3b1e5e5c3b5e69e58d0df82696b6138ead0a7400617d768a783db11d3284a4fb49924b0344b1812f573a8d7e8399f2079fab103304c004553d72ab8c900e51039034525564e1b43befa8e99ffcbaa7c5163910176e18b4419848709d2d83738e5832b983013ffd017cd6e17b3a56bab0161d14a898f232c3675b109aa603ee13e87c7685cc9c1807ac428b68240126d7aab930fa7d92f87f6f498deb20fc57db7d5277f6c7f8450eac5f691cbf4f76161e65afbfd2c45452807d4eb9b3247c082911203bbf6090b295a1f530e1cf4d120bd2ddcc05b184bfa8ef6d96b185317ef78e13b70547e81236a6ccddc6e9b02915ca7e073cafde06e82b0a26563b323d26a0d2509e1c0d8515da7d7e480b5fcace367a46a66beebe5c43109ca9786ce17e855fb60b78c4e1ba670385f89d123a9905656fdb29dfbd0f18afb290b5177dde2ce2a0fc237ebe1dcabadad1398cee6895f81391e39439d98907f64268277562cbd3cfed78129e8e741632f66767e9693894c07aa6c29a7b2380edd02757b8c98063f4226d710a028ee4c57931bcc9527f0d5898d0277f50548f154871da27620f11f723b687ec94fa5a9e6ee9efc9549adb44190f7e5ea101c80d6bbabb6ed8a82d9809a3de91e1b5aa66d3a6dc27864047125b58500418d297bf1e543e177e27d4ad116dd2ddeb236eda122cbffea0fd639d19252ca37e6824609f16f5519acdd9ebd6f582f71d5a55f982b4b1961cbe32e7a4d763b49aaf16009d44cc79c5fcf1806e190d694a411a7588c71745dab1d1684cfacb9ec31289109b180eab9f5828e2d34bc176bc4323eaa908101218d6a60ed2556d9dcf34fd952e8b94bb8a722da9f035a1ce6a289427ce9f66d39a9417c37a60d7ac22a054e8b48b43aae531f799729c172b0a752cfdc37e65f5dbcee35e1f3e887af2d5dca232e34d4b15658a0554f44f2f77e65ff1a0f1db9fff35f553bdd1fd9e89e9a911d14678a35ef0eaa0d377ce765e64668bff1df57d958c99641a86791af8ae7f126bb678d386a66e5bbf4878492ce66685a0151bc1cd9915e4c056455fcdc5be21c15e11a24c9cf25e25a75af89bad90dd49e27d126ddcbc27fd91e6105efd9b9588aebb3b00c41cb5bb37bfb4abb415b4835072a9b40eeed6b1256e83d1c6b3c8424ac447d9e3f7a99d585e6d1688776be1f83aa9ff4e20ae7e63a2362620d8181bd0bddefc6d420ba9a10e9a69cc0ca46a7b7b16a49266f5ccac03539adac278f2f854560e9a211e89646e18e232611cfb22c6bfdddd2c504c38001b8a3bf43c752681dd2d150afd3973486380ecbf87059c8b3ddda4ce0203c3b3fa862140dec2cda080743f79024d4d1a2a1a38a86188a2b92d7f1c85fb08e0eaae6b3e55ee828e95030556a9d62e3623951d6c401fa996296121e9aa3ba5f4dc02c63eee9cd64bc02b2b5012b5043c5664322d4993270563cdb3b447b61ec50e80f50722e1fde47415349044fea40d65f8b996156a3297d4535cb3c73c8af918ba08428d0dd186f10efa933e68132fe2514ef5d61006ff7800bcbcaa95835c08c7f8701bb3fe3d1e81aff960026ba1c4f137e3a6985265e369c45109d030035d33a05e4457d33a5a80eeaafe0651005cd828a728250c7715fe5e597a719fdec8822b942101a3605e265c670db521cba43efc68333d0ed185f2c9c36b9db291f17b9a1853ac61b2eae0a2c2b52e735acba4b38f2e88494c7d3f86be4ed29787604ec2e91964f0a4f14c8cdc9a1a94979f77e4b7133d0887cce54d4418d797d3467c1f0bebed515dc232bf978bfeeab6d03b0daeda67d0f2537b45fff18682081bf3679bd2f1abc36becaa903273fc92d991df86bfd71617669716977a227bc49bcd1d2887c7a952d61cdbe4d017304b0ae09e30443751d40e91f3678836339c4ad3eac44209ca4e8ebb8c0c52f210931f1e74992577b55818243e5df07e2a0b22a5023326c6483a315e3aca4f7769d00333736c55dadd19c033184fd50c72893b4722d5fc49a6b979e2730be9af20e912e1d249990ad85855d163c04648818707e8d1cd901df8f8b975f19b4e41a6fc183910187d2ac8525ab321c0a19bbe48965c1aaccc452f4d467fdbcdc747d2e19abab839c47418f28ddd04f8ee5f1a09c3fca78279ae8c08de3a4ffa77e23964882cc3d5b8320f906126fc5d29871dd451bd6736b1bf117d06acc0bdd283b081a934e586bb9c39e0e2a0853c2a660023fb85c774511218df78bf280cc366b9fa83c63c7f7bd3b42b004faa34e69745cc1431c36e6c7f57d170e09cc4355929be37e33d93cde2e0ad9d71bd88e88cd56ca64acd386fe748d1c86f887e84e5e0f800c8e6496c427d1b5bd42d28577e060ceb4e542259be20f35875054f77ca48fe7940826d227149a344d8d8e51ee2de49daf8750e18a0b69b11c9900aefe5ae0aa708b8b99f421fa55644b1be45bfe46385695cc75281ad6d85548c6a66bf710a7e02d9008f914ff98b9cc0b4c7adee8d7c2fe6c3eb505eababfa86311f88253a79f744b1209bf3d43cd3d048dadb44a0fa6801d016a7449c2dbbe55833ad0ffb998be5989e9d6c9ab3babca7fd4731f4689b9def958bf2d4d1d97c813cde1770d9d956a0cbd88075d82abd931e34552797613c30d1ed207e6289117f5f0e61ff8d2adcfd134ad69c9964ba4f18c81272e6b1407bce30b310eef0bf9873c9d5583da602b4eba2044ca2bbe70851ef8696c7ba4c7cde9097f01445061a4a2e84efb8ea4dbdfead025b263312e3b1ee09038d0024e754d2e39487eed7e666d61a8ff21add67ad00c017ba1a8110ba968de836471aa0bb1f59134c3531ca47245f09946613bb4d9ff3695d9a113dffafee4cf93c49fdf1d00bef6baf8ad7104512c1bf56f2efd3f47edec6e9bfdaa96c04631d6c2007510c0af18b70b0d815546843f27bc1e359608d7272bf45b4cbd7941945f0d48536f7b439233f00e81c8ac539e39695a1204a1c036071f02614e4108094e4e79225a0aed22a382c610b416795b32b7c98dbba433a5dd84f7335e6480e99eb0d8d8b6f9fa4f7467a74ecdf4c5b8779fba39ce06c64f3d427b2ce1b12ced8cbd7a9ee903244b5798fd415f95a5fd8e3c0fbca38851df1828db1863a088015c4fdb92221ca641c754f760f4e63a2ae403834a65978e3304114ad7eb7f007f545cca3dc42bff36e815153b1dd7afd93d4cb8759121a16f3b0d0e930ccf823d7b573f8ba7a6ca8701f2968844dd83de48210612631b7f868200d4a5af8730f725df35fa6745e84bca8f6863bfde536735d6073109f5d70f83575f9983afa21e88d3ac71916f21f672269c548a1f94fa438e8f2403ae21ca77e4b80dddff69564e932916d6147643b04fb1885acc0dfb3f81de384e3cf9c9980f413fb932b141a2aeb66832b55bf97d388e42a4354da86f43da30dedac25cc6e16bd2db9540351c370bdf5e52fcd8fe45a2cb7ba77770572c6d50e24d0392d12883045078a90d6bee60e8d97bf1c11a851c229ad23ec5effa13accd35a1dc12b3e612134315b5b9b4075e0d7b3d0d39351b4df8579124b43579a3781d42918278d84b598133e1a98572ba9031acc19ab7a8db4986231b1d9293a54291fb0a083adfae972f7eaeba3bc131b0ab8de6cb581a4106ed80afd33725ed816486b711a0b3ef2ee450b1217f74958d0c4bf170d044d7fac1989491690e36d4fce92e8c33974b0beb4c50d06db941d3ea8ca4a7d8dafd09274b6b99138f69be8516211f4a54531e2cb106517896d289398a3217194cb6d37d3eb3802ba30c33b89cc93fc525e62d6010b11d18de88955e481581ee5cdeb114b3dc2b2e7aa0ec71bd71bbc3c8185a2e12468bd37cd82b876d10cd32ee68a0cd3127104e06fdee0c0a126d996a0ef174e50635c3e6ac20de56a932d0ef11f1a7173e65369c17af661f553ec925296ad087f6c0c255ceca58f0aeedcc33e78f4a7e0eb09c6501dbf1bf84bfd774a5f118d5719bf6488e39987d36323a9e665906c334555d674960d564cf6ae120900ddc7c1ab239dbe172a21879adc0d2ae366b626d8ebce81c7deac22c1f23fb7024dff557b5e58ec0fca44c6e4769b28c23770c831f6dec727def652c7b8f8ca4cf27d81b062eaf32576426ba7cd76906ae9c52ce356fc27a4369cc98b397f242403643c77373e561dcbdef5232af46c66b76c4a387c2f6ccaf201e5dae81167d84505b7f8d8e0d110d1739d1115eec03a91577a438540e616219af3cc03d90e5a9583f24c741a614205d0d6ceb0d15621ea3f4bba1b53a5c1337dd65cf6cc8e31e98591002a09dd8b44e2f8e716ec89e83adc4703c205e964bb82d80d50fc9da76e7a9b701d10ebad1c7250ec8cfe1c9f6d26403b66558fb0d08273d835b734e08f555a3d661802683c6a41820d9e94c39ab3bd685be9231ff6fcfe2ef2116b7315c3f81d56d442e0f8e98ade10bb11465ddd0597ce3d3555cde0e3eeeabd88b7dff0f74ffdd2b7701747550f555c2139589a679fa44940b29dfa3343cb0572d63383cb6aac652df8509cc00de502a27b00a94e624f5abb4994105afa7f4de243ef87565079003d4216fdf50bba794591ae199a2c0d5377c3d39cc5b1fe8bce8cb28e64e54e729a1c21a40a048d72d70d1b6f09144a56769e827767df476fa6b57104cadec158968feffd00c2a2ae7c0bd93cac95100cdd545fdf0bbe6a718e16782972f553c23820a6d8db195b26d1e3050d2c084916f2aacbc5e4d478b045484a9583ac058bf7b1075193caf22f76969a43c0b812e2891b6430dfb2dd2005323f2fb86cd0021ac53b6400d4ef795bbbf98461ca32f8294fc266d38dc1a4f7ef77f677fe85773df9ed024eab4e1c24ce1830ea25b604ba0af5d5fab0b09329d92a2672e64f3ece67ee7e50da18a84533bdf0c16b7c52939c45a51c6e1f04a2418214c61a16824ff8cfdc25de5101b055aedf935f0c53e6eb07c04ae6c1ca33cdf8187f8b44cb09abdc18d5759557f71517cb6e04effb94fb156892709bfee5eef4feab042650509681766070ce9805d0c0f6bb2e2a5da029e35a8c3254f476ef7d537a9fad022bac9c2f22b425e8c670e58f87d503912c350725f20e23e03b2cedd8c04622be97497979ab61ffbeea37088f2973da38962b989111e25e8e10fcb53ff7486588db3561d246bf0b83f84a375dfcd307bb3929ae95c370798a6cd5a43ae393b26602202c4045add76bd696956f38e0b02162f6fa51f702741d58a068521bd7c447ea3656c7166879d65af5c1439656bec9b83fc3b33469f44b5ae8c23847f465860e4705028dce3c95da0a4d5717664dc5f10855ade2ef6222c7e7bdc05f1a7f3dd7298cdc515d8f5b5bfbff15bed3f611da78c8d111cc105a2462c0463df68efe268d4eee212ecd583ca223f28ba9b7926aa99fdf19a527eac0b476613e288ed356012e729f53f925cbe8f9e02040927d8cb0e9771c0fe2bebc04a1a7190240c893f8fa1ce9a91362120e99bceb81f3e2fdd8c3e81e0e1edc2f0ba871534b68e0557ee8bc6c2080fa8966fb47918cbef9271a0cd8a4701e59965bcb80a62036dc9c8a63579ef6fcfa3e6905d27f007dd303c010b9c28d3ee5927e300c9ba93065cf7a2745d0837b25cf07b47394193daddb86cf5b5944140470a65e1b4b974e363b401dce80ab5ea856ae551b25420f65c7cf12751e0c4286df3775d20730cfcd59b4c01067f8a4f92eba407b7eead87c7f26ffbf5e821242985a87ad11f898c451e9c086157be23c3760e969a55cd2b220089d4008c1e2b92eeb6fffd6f39fd04f080260294d81c13e9dbd476d4aab752602a06b07bef27540dcf3f1f17a46a5b945f1766de3fda78b53d82a45a5ec356d1b687ff3198e515973b50d819404b1f24786ee5644e04fc7852a5bcc84b54085e04ca7ddba1f1a78a403cb951a8dd7cebdc3e590f6808ad22b59f1ab3d82129d674b89446d3248540e534d2ab3ec29948ac7380a179a197d48d415e3097bc38144be135a77730ba58f840ca2179291444228951394f4bad7cf50c3b62618fde57d4bd1e728e57ab25c49097fce9a76ca0943facbdfb7a114f6e275abb42b85713f65ed8f6555ed73d52157c457eb1d51ebc7cb26e7763a2233d2429b0705301785c3c13edada42be8782098502b2601742f4e0def72f60ee138daf7d9935dec87b0cb4be7234d3e43cf0881aa04a9ea0bc3ce1dc09a1a2c6311450feb2d005aae081a4143e3e7bfbecf63faa810fc1eddc2d2ce644b712e58da538daccbd789933eed37d5a1d1a2c17a9940e7aa653025b5fb7187707a88126d6adb836d3eb0bf038d50de82da26db03938e2c4cb14c02f73e700b29fe523fab8af8d20a0447b9ad3639d42d0d58391eeff1ac4dd2b99d0ae5264c94c31c19b4f824b02f8b2ffce2e6729386cba46dca0d17cc49fa385403edfa10434f99fa3142fc3eeed7476dcdf35a29e7138c018b864910158f326f96eebfa1ad18a98dfa9f4bd5fdec69d4478f1d84b94561b9c433fd8612f3bec96340f5f543fc1489617a9fd5725632c2f5837b01dbb3cbef30bc5501a881ac109ff59b012c761fe9b217ef783fff06bb581191a618f737d10a0bfceb6892cb7768160bed5dfb119d94598716578d600ba732fc22dd1f37f999cababac36df117e4ddf49cf560cb17a1707e88c7900b9785637ad606bb7f86bcf6ef47d2f45b56159b34de5dcc7c4b14def305ebc68f016d53b33241c9c49622b14f14d619698a3e7bd3f1948338829dec46650782aa92f6b0ec7bb81d40281f7166ea2d59c59fa21bd006cbef8a2427ea18e342aa851c798e7bc27b65fb5c681abc04777392f291be7a12841208798a2121768a0a2ea1ae873908050a0ca5e776adedcd9594a9ca8c1c935d9c00fe196ad6131df9d04123460be7982bb6246c0fdd19aea4a66d2ee805baa4115212256dfdcd9ab4b64c5d28be54c8962a906c9bb6304ba92ad8d55531e5bc3484adb8d644e2883caa4aee8013c032e4ebd6ad5aa4d7cc795d8514ec3207df1184dc598049350f887ca597cad5a8be5a7e8b418b5d752503fa475a4030c857660cd4d51a301ae44012f08a23a25ce3e05fd28c89f5ab40986f09130f70365b42718710b6fe35cc5bf2882b6e05504516767dbce824442ca3ddc66a681b324d7346fa4634e72dcabec77791d231b78b226aea5811d3bf8be4617013b1ffa6558daac1a537f447907d16d7a94ecfb561cd01c04cb5480ec62e8a67e0aabf653e2483d709fcc205c77adc7131088540e68e214c949701e79d88c26c97f533cdcd847c665acf87f11bc62d78471a7c1e9fb3bf81a2e8a2e9b7a73847850ba5c2438c82c9278a85adab4683731b1ed53aa200093ed94b6899a6354dd79142efa2c33d8098235adb3dc47356ce958040352f62a259372f4ea4d62a4ee9702e57509f6e39ef02437bd73a27b1ff4b7c70e0f40f43cf0fe52f4c8d98625ec729cce4598b97faa30fc6d60626c7773ca0f755b2dcc15721fb7b950921f58301c643a125ba950c4071a3746dd4df0d808ddc5d2b0821d5c95cb8233132a14556e540c422af568dead9d18f9d833a1dfd5ac8ccf970fa117f4752292f48671a7263899ba42ca38c7134634f08e972b7172759b000b396585ecd0444a5001aa8d5c4b06334e9266ed9a99cccc6be33667b24a6213b23e6d3f3bc0a803e09c626711f48211604744399019cbf932cc1a320b5f6443bf6ee32d544c2c0cdce09597940f0eb26a10abf6dcc042853d803c5ae8aed365d2d85a676b902d84666dd4a98aa97c5e89b428a6127811cb85019f63c389496244c17f730b9661afc19f63c75466fb274b75ee53c9cc47c9570349200c027096328de234c12a0a5c8862b9b6d985deb048207c3dae6e6ff42bad7756d1f625bc081051265db9bc6950f556fb5aaad14d2dea8fa95d2fd35ccf79697f813f2cb8d5227a4f967bf9311d688b39a3bdf129ebea7a207e397993f0b632ea5c0f8a803f58c8a3a25bf2609b3960e6d71e3b67ca9cde83135f7a83c00181a7b2e26c4d968ca44bf96b13fc18adfd80bede22b132f2fffc07d2b04c784550301c4205f2701e60c5a7576c0ffcd095af7465abfc39afb16facea28846d905a752c35ce9e30f7051b7133f9dc1cfc4a802c917767a53d273ba2cdbc5d7041ee12f3841b5af8c96d1f5293eccd7c122a2083e233b93d1795f6879f9532184f5baaec006a39489f77cc47e8626c88d347621dde390edd6cc25d4273910b9f6dbe66ec85b70101cba67da7a1932a96661859a3537860411ad1bcce95df80303d279988716857e2cf5ec2fc1cebf12aae7ff1fa55761fdc0b6fe029907ff9399cf88ef0fd815929d56a020dec2d5c35a69d8573a319d85cb3a48429770e01fdce7e6c397bb38880f64891d2b233784b69f3d6e44ae2a79a5923c94ad669ca22cd7431ac44debdf35bbebab2eb962aee7bd901435d31240d48c3c2a4e0e706e293a1e4e3c01e038a9514bf46811968f818cdae6a9dfe32dd875b4bf792e37c8d7851eaa2d6ef2cb5eaa4dcbb0104e8b0fff26397a678f736f43862ec0149e3d27c087ca4bd78248fe76d10dcf7ba393e3dd10ed5c2e01893a88db58a2aaf1d1bba0c71e24c9afff1c3afa237b17477f41d53a85f513c53e21ca5366a84217c40b09f8d425e2e3cd491e54eec32f3d8fb26d69f44e6c38e961e58abd96ae32fe49c51d7f1eba865a098a2594d6e34a38044aa018f2577fd8aec666ad62915e59070b6569ee7d5319d5b24bb84fe13d6c949775d651f7fe7a560cac26a53fc73168894ddcbc1c2af0d0ae07a411bebd87717eef3f21faf4ebde64b348544ad3687b788415c29765546c2dd94857d9561837957c16efeee591dba69fcbe2dd99520671ab06330ae8dc1141e3d3341010933e9f180e2876e3a6930296bfd901e4dada50abf00e1f12b37cce1c4dda02543f79340123ac433f1a87e1bf56a17bdad7ce2fa75e1b3aad084eb6d49f56eb09a6c69c551907b4bf79b9024014f23e43f656fda188180e156925aff253a081a63096d33e3c2ad061f250162e1b4a14c50c6a1c3a116caac98cc0f6123d7b5e785089bc2ab4b634b8593c19c7bc958e1f4dad3d36ce9583eeedb158faf8bde4a73c2031bfcabd66097779ed00a098b20cce6afc5054a2bf8581e42e065ba01e3462a0cf203329c11f0453466c6b58ba95e1571cb73465eecca1202b8b5d48868e40a02eb1f309d5a6cc94cd13a8a2cdddf0bff687972afe442c441e16f77bfc53efd1724f54ad24fe6a51665b5f33db5e58962870058118364809db7b314be216697f0e8b7f26aba9a480f4ef2e39c86cdaaaca2702c3b97eaa08da2bbbdc64f58ed75d4c11e39e7b100f908e74bfcf254e601b73eb1873df9e874292bc83729a50618df52ccc706adb335cc32e9a6b87852bca93f220fbd964364abb28262f7b45b726a723feb5b552fe6a48bc9559c6b0ce4df8658dd20333176aae57d1c4a7f0b35b431881935cdc9773e899cbd4c8f2575ad183f79bb497e603dbaa1fa75f533f93bc05bd9826cca2e35fa6ce247d11b8b2e97596b9f4d7343dff04b3951ba19056311305f814cddbcb227877bff60584e4b3a41fbded7448d4f30b3b24c41c4492b67ed275313157c77cbf525da704665ccf38d2c63bc38c6fcaab029fc39adb91f6c2b49d129d9fec8c59c13b96cebe65fc350a633ffc2ffbd1d04baea064f9dc4a3ad91e23fa69cce02bd1f9f2678f581eb6aa43a554622b68941293cd4ca3fbd82c28e11793ba745e9a91fefeaaf4a8b4253bc1ff3178891b144d914c688e811bd6b513d82966ee3c4651e8874002a34c97bb545a871c40cfa82e6cceb37aab6d187239255e9214cad3a4eec493263fcfd9c017a9dce94495522e7159edeb853b261a476de6b349903b28192f575dd13b30275c06fd11798f5d1b1b273dc441a3bfcdbbb3942881c895ac4491962ff6a6c251e2deb83facd8632ad6fbb0dddc37a300d07e4357d36aac9b57710455fd0de3dceefe637c3feaf5d027dd310224a566129a0f7488cd10653dce54ce50646a7d06cf15ae8970f162981ae13efa45d4627b741729fafe48524c38c0ecaee12299e01371015bd4a44ac052a6c0149b6ba60a1d9643ca486b16ae5c3a6a15e998181b042c26f0eca6708c8a914dd7b146a2f213fb241d70f823c7b3fbcba4fe766dd553b061ff9dc34eea402c3c70a2b1b23313ff29da37339fe1f4fb8ad72deb441121cc52ce61524da445cd02d5a43e518b6205552098e72f719c552a60d0d40f813f4999460d962509f00afdc2b8410f18409209a224df596d97dd8e45090862b22c4d27e593bda40ba9e8fc135e922b6ab5d2e1472f71c91d3d49dcd6107ebbb3bf432fd8826841e57949b79f8c53f490e45deb833728d2ba22825d8347fb2e05ccd9d8cc426f9af0531f1301fa97f6ff1b5af0dc2e3d978e70b61d5c04cd3d6c16a4995ebe579b0dc070771e1d5a4d32148144e0acc80215144261ac8da1a3bd2ed623b19d0691e654cb6b98d282b302debde80763fa5c4c3008919af07d41d7a4165625279e53aa6dc6aeb3dc8d2ae0a5673d48b556a96cdba08ab4849545878f02684c11c4306202cdf3c429883251091eb6ce69246b1b6d4f37224f7fbc76896188d028b65261581047af1c4b8886ed5e111c70332add022d4de3ba112d4f194b6cf9a19da97f3ae5692b0cb2f514fc2b7fa21f2becfbbf65384582b8b8571454b57967049dfd3bd957d1ecb7e9f537fa0a44ffea91e6e0341474b582d5eb390a811eda72671c1bc2c25ed789d5ae0668838985b07c8c2d0b5c1df6aa00259c4d49dbe532aa96ad504f61971c773da74e16521b8c5687928fb602d1ba85e2a778e247724486721a0b14a06cdf621567e4a131c9782e84ae3dd67d3c4636b51b2b531356673b74e183f6233cc57706be534e3f92c3f5e65f97bf7f7aedf9df6320cdffd20a90cdb94b384c53ee96c9285ddd121c193554dae570c62e345bb4d280c509d438c2b35f97032d3340ebb9eb3cf6972aad11e8eb6e607d93018c5cfbb3be537ff4bdfb50906f01e0f088adb97aea23a08dddec2544e5805feeb73a8326355b46c900c070fbc3d79d2183fc40b985455a596c2286ab2456269eb2857417d2d8616adac2d289fdb0a770f2c860c4978137c49f0c06497fb11ed3081c8b1e56f31592f7975631d2aebf8b249e95161b368dbe7262b1163530176f2117feb2fa799dbae99b61e730a3c0c20f7f85363b3265209c602321b90127b69529332de0d356139069a283d8d0eb28905f7d43a7d13ac4916f3cde94fe3b252d2c453e151c548ea50f13585d081c7ce35fd6f7ae78f81f106ec777021295b2226ce2b5b6a371cade148127f04c8a3942a7e560506da50ec4e017361e4107b1a001f83799509bc4c74625abe3351966e5b44c5aa957240fbbe184d4f510d073eeeba4fd62ebf67fc2d90dd359e5e660f8c6317152761a03a995eda73299dd3770e517c1851c891887a2053a8e159d02cf2edd7c962cfef57eabd754bbaecc1a628e923c9dc55489dfe2bbda7607a949b085f3ef28f76d29ae8cae5dee1f3604e8ee2fabeac68648fdb0910c44a49eea9e78cfb8d9f930bd92ff52ef47e6737a25a612d6c8dc4a30f6ad9997cc26a0a5ae512371b5ba9a1846eb2bbdb71f8e553a05e203b16795b301f595dd0aac5ea4744c2f65e10050633ddb0f0b71a471c74b496ddb52aa0bc5c2ec2246e8ff8024b46f9420dd7ddf75bb61d3f6efe83cb575983b1c5868f91ae31579378fdeacbbd42a6bd2a50156636facdd78d17f1722e9a1965b5ed7fd56ff28fb93ad53188ff17336fc4ad90590f96b7edcb9c7810c49ec1d0179cf8eb6e11ebba844c6344faa6562103161d6599b4ecdd4ffee8ac5c8f49b0492542541575724a6ea364390bfe6d7c894ca97f7651bd1219c3bf6af36bd6bbc9a81ef2f734d9e81c0bffbdf7b074ca91b98e63a010ffdb3f2d65d9e195379f7fc617979172959345daea362c2a6f2f629ad7944d2ded4cf82e83670f2f2fe727e28a271d39b7b3a1deb49630fcabbc1154807b8faae36eba084aa1a5772f6a75e8a27a58c6e1ad2ad4cfa534621c0bc62a918e1b2836ae4d1cd14488b1b1de035fba0b6b5e59b0e0a7d55866f95b894a534870093e0a6f2444b6158e29f70a69ad98a9ba9f23926b2ebdedfc7d2fda8ce885454809e6bc652665b5d65c0e4d05f959b16ce0997982530e988d3ffb7bdca8fb597172718b78b1e7ac0c063b22e51d41f86eaa35f6860fae71db170eb00fea94d105d4f012c2f79ae2c4970a89db0812bdff11311c3bcf1c079e2c4d9caa0db2236d322e8e3798f8e6227d9cdce3ba600f7e0e76ea62ba673cfc3fe3dc7c6dd9597506fdd6aedb0a50ce4272562e6fb891117a7d4b8b8072d948ccf16ec960501053e8d65f021a721ea3cd8fe839583b671533b78daf8ee4ef89c527e06f9306f552db27846609d00f4e66c981e973ac6dee7440a11fb390c188e5f6afe4d5cc33fc77aaa140770210c1d49bf182ddf2dc7fc63c8252c49d1e9355233f9918e46aad92d12c424846f0be868856c20fbd86ba19dbbd322e82dabdbd20d13f3ce235ca6018dd5510916a62169964cbbfad98eb9e89150147d7e93cfc6a695d657629ecdb91afa6b1b262d182cb2043e60a60fb8b60446aa9d65d763850ed4d5eed8fe2ac173f14953c1f55c741eab010eafacbc235a19cd2110298c36881c5c0c7147f0492fc21a2b7144f6c2df4904b8e77f18186d8603c699b52df4531f05d44c9c0f54cd618a8822a53da56d1ed828727a0923be6c74ed0af0f6747af451270aba9ab259e2c8d87bb785eb0b9250dc9134ed414b91f08e866879d302e2d7cf5e3038a08b22b726b6b86a0fc441456bf24b2012e4b88faa444a24d68b65fdaa6f5af8f4f0deff14e505df194b2bfd49fc4877d7986c65d4a81c081b06a909b6e5680d638e9d1525b62747e993fc35a87a3596a97df32d5a331ba50765e16b4034ac5defc1b4fc7b5d176c4e733ac9dc7159af7f6d51975a901f1450252fa5f668e0bf7a1892f8666ce4688d61d064be0b1c09ed11ff835577a97b30a919ee35b02f25b05518f82f8ed4e91512dce793ecb3e18116e6cb45912bfa9cc0970c91eeacc8338d2922d264bb19cc8ca1906428a7329113ca8f1dd6237d1ffda483a1660d0798b38315e64fe5338d8d42de24f78afff79af67cef3db2c02e5f7e7b8fa86d6358adbb65f1b8abfac2bfb7f3da04b912684b60d1fa803c04b98818a87014f35d67efbf7bf37308d1b83d6e23e1f03625ffdaebaf6dc9a58e94cafda6b4ac40314f4afa9ab1f6e86f97b74b4baaaf398a9e385dd574a2c6b72baec9ee509e0ab722f3d534078cbbeb0ed370e58a79ff2c91a007bfa63d7d66714e32b0859c1a36f3ae38bd7797ec651f85fe33447c19ade89cd1fb351e4d40b034352220645ae7a0b522b7abbee9d293e8dcbebb4ef8b3b600287683098499a41b3d12da6e3af593b254ff76a8b914f61a97cb8867183291ad7473010b4dd5de69c65d45b8b09449c519040dbc5a29392e09e7bb7b556f7787705dfc0e5302ef1962857450a936ffa303a5b7386477b84eda0269891fb7d31a31757085c8f187e43311614a30585abfa7f4f486dfacd3dcebf36379c4a484dc83dff7664cafe9aa9024b0046522676df02b00d414920a5464cde56c50e1c74afc2cba233c079956822ad2e6be02b8d71ee59a31101b6b78638b3cf5eb0f2f24813c67a419b27bf38e72efec0d3f876de26d27db42791a4d294cd62e535e350ab7e424cf285314e45f94eec399abadca395951cb249c00c261c1b6b30d51a175972a16784a98eaa88692afa9fdd59cef2cd03ec3edb711747c3505c11cec60e4cb37cac1baab77ef39a4a0981a8e6f13b13e4502533b4a59d669b2be80756fbc525f8bfb3a33b168deab657bd9826b64c40e707d9bb13fc90e7e90d5a80b3617720ead297c2536dab55a844b620614b8b5a435c12dbcb3ebdee9149caa2f26b9d4b4afda2804b64d99147aca98f4ebbe863547eafe805a5f81b41cb0c042dbae7489fb7a11ec7944aabd39acc3f99f5264d86ea01800379e1de9b96303896366ba7a7f45f884d479f2eeb2ea6f12fb818b9817338ccd1d5743e2e079a87869812740ead21a97c954a8962d3fd2544fbe3abd2eb0e5999abf4cd8d27cacda067ad6a5d7bc6ac47b72ff8c53b7c52e8eb6f98578567848bbd9deebe89b23dc613430eed1cd6911d28c8bf7633612ac7afa0c16334e3ccdfa99e1f29b443bbda08cba56021c39873ee501eb69df20a9337a0eb1e923978e622453245969c79f35b42e54dfa99224c6bd4db78641ac4de3a433e8a606d376e83268c909df1ab06f4aa49a7b626776b7bc51fa40231fdc0e735aa324ef4c54dd96474efdfb30d3db30617fe2ee425fa8157b22a3a88d80140ddfb6a98918ee77b714cfe0017149e95322f42a42a6777f25ec6eeffabbf42cb2591fbaecdc02f209ee4b4d618f2a07e41e06308dc3b2b381b86ad3029ce2efd6d8300651ae4431dd7eb8af74c248c8ca8b277b681112c24709a92286077664cf4027be13615433bac86e123c76d39900fe39a2541cefedd2f43e9bf580b2fb4f733777fb925b67c92e5c1ef9606983eb1ee849cd9d84f8400489e637b242a391eb523a2b6f73e1a292eee50171a07f09261de29c265cf298a0b4a3ec32da45850f5ec5274e6e605e580448a8b08c1ea8b5a5de18869c05a9c103358020ed988e653c09787bff206cefe68357093d5d0d0e50d95a633ce7a615ac988508c4b31812529475b9ad301004505c7654e50acfcb40f2f3857c144a9526987b24db0e71b8fffd63b51c83f7bf7149fc78e8d047ede3c58d91897df1dfdaa815aad7fdbab4e351d62602f662b037e24a2207f8bb14c0f1d22db577004d70027659de066b2d22a7f33ec43a6b53c10acdbc3f8e2f776e1b499c02f09341bcf4584d8af34c007a7336cfea951b1495abd614a10810dbba7d78386335fbbd4ee2b77ce3b75e329991eccf7f776923c6bdef8f4e92a0aebb44779c231bcbc67ed034625e4efb8780967c2670485f7d9660dd9456db80bfbe1bc00a38d8b43c755f16991f05588edaf96362c677c4b0cdaf9d7a006acf72466e9a691b9ffca88e40647ec36c49eabeab2080bfcda11b76389362507dae3e2f916ba58c483cc359d015736496fa15a32d76756a370814b0471cbf148f2482b77f59264b91495300abd7b307a1fd22f4454eeca55c50bbcb20938f2d2cc0b2e894f6e194bfe70a3898ea54661ff6b2c584778a61c5e4faea6bf176c112807f764ba436a5ee3611a5b297c8cf1fd3df8afbc835b17d18924921b496a5d2695a2cea9f2ad7772a1be0d208e4a8a348bceb0d5d9a2b71a23a4044aa2ff9dc7da0752b6ff3006a14d59683defd2a2a992b75063efd7f29f3a9a8b8ca051799399b99717d23ffb5bd63c1832a7a82410d5c219340bd5362ba40c2a7c62f04bb2d195351956457ee418555d8325f7428eaa2420b3eb3e18ab26a0fed126b4b1c1819f183dea6d80362440a0aaadf36acbae934fc1df2f6fb7841b7df8100b7024a64fb3a16446b34dbe4498dd341582020d41755fcf68fa5bc6646e12c2b501f52d2e807fa829537f224f0e569dca4fe1bea84c5a04f9fbad9bc704671f7409a6ad2513c8f5132c2365b0824cd8b2e2f248ca858c3ca38d770e268133d3194e99d101ca1bda9e480a7ffc56c1dc5c2fd3157f8eb98dda01df8b7d6cf852c027dfe53bc1e5fa10f6467bc7558e9e3ddbdbd9c66bff2cd3d33d5c6eeed86bb3cab972c4474dcd4b9bc59d2e0103df34d3f78e29b58fc5685d3b25ed9d4f246aa938e2fffda248b1d86a413b9de0646c014f6a81a5ab879b44ad20221b89806404c3c7ec22691cb52139d1bd62aa39cba05bc47e7984004f5cdecc8cf2ab62892781e2def63931aa2bb679cc87057dbae2c5147d810db06db7c71fd56ad4ef51286039c30583b63df137c325f70666d296c0ef22e48d030e11aa91ea2aa7b0c24d52fc4dc342ed84910741e1fcd92ff523de9d3972f1272fb31c2ad0051393ca7cf34c41f95e4332b4c4427491fe36f1ef12cc607911ebfb63777126d8dc14809a92a5e7cabc4951b5dfc3bdfaf9aa265239849a9a9f81445bc8aa57636643e6d6958be630483b25ca1442787a6253d5bc5627e3717c52bf9acc80a66116263a0c51e34a8f773d17e81f77b3b0444e14a0052fc4e5d3717d89290e1ea60907e8bfad78b321955405c8b8108be28eb84022612b83e075625531917ec8c4568859ff4c90756535e2270619bf20b606259f9ef8ffa407a09ded3402adb494b6ff392c5045f0f07d6725cb030e4227fa30fd23230fe7488ab70f79d1cf83d01fcec543b2353f6ff5f96b3b0b119fef4e50bb9989153364ba0397f246f1a239c4edf98886a85449924a9d3298e2b282722a416298ac71055277238e672d9315dd46c87fc4a3c00bc40a66685cde6b23faf866a44206c9176454d29ea812cc25857bd943af35f330ac32506003a04fb2061047085cec3f16c7e0b89181cd560259d50a8c6d8ecc01e09cb86bfab3bf3f9bf6de16433b4ccc5fc02211e6ce19a6b8b769732b9e334a55889de2a3a87add4d6c2641bbf3f26c269ba6927404c5f1aabe3647d9dd00437f3bd11935fc08a85a91e230f4d1e564689bb52d8f9c81cb149abb60d9ee8111612ce94e49399a86e194174dec7711a6418497b03dd5bcc4dbc749ea21b97feb54fb7d303b1e0b6690cfc1c564dd2ea1560a6daac4947290737ef7ba3bd9e0bb667eff63744709110100ea3e41210f1de4aa35196d997a056b7bd1dd3ce0a262d2fc307b3d20b1764e6d9741cd7d83caa03c246995402970351e69e9de6ea66f4c27d2e9da63fbda18e0d9cc88c17bc7cc38273bb7952d71a67acde6c4daac8fc866ba882645d0a0216a324fa855060e28a0dfb4cfc9f9b720faeecfccea1970e6d916a4ad55b2f7bd589f0dae2281c7838471a331b11e876c8a15a8b5faf59e6859ce6a2c5d9b1792afd6f9801354316de8a3f328c838d21b600f3f8224dcaba7f216e80c00d89fae8fc8913cb0125c0154e43551e640f6b371cc97c00be8f1a87d9aa76958aeab217fc6396b74c471413fd769e0d960b5be7dc44da7f5e442b8d01535f5ba220ff34c242f51e595bb9f778f6eb5f09f4e173e9f740fb64818a99177285ae03fe04f22cc432cd7ebdcb6879ba6690495b3ed62e52c3827df9887dc69d845282ff2d44fdfdcf49873d7d8f90198274fab1604f485997b68a0975e07216095653f68f97a8f4cfacf88d14186efa50b0c1950a2129dae6b3e0fe551bf4f843a070ce1730b19ba8bccd06599b30b8cd88ae15c5c7b7dd83a487c19b5d8aaf84f9d211702a5f22d00dab4963eec93f7885399431c2705f19d0e48ff48a1d85f1abfbbbe727cdfb9817884df12858d15956a09f1b171bc9565263cac59b87beedbdae101926977b52615ace23a428f7eecefe2ef6f6f7f2d3b7c424d56ffd2dbc36bbb20bb7f3681fc91512d41a079ca7a66a9395412682ac856949e700c208005acdb566e1848f27c71380745c06dfbf5b4afcd68987283e0ad7097bc17f0c9564b7a259cc5f496fe0546e0bba50bef3829b2ee3e670609e14f6a8e83018ac0da587a1c82f3c29b5a2bfd37caf8574978a33825a48f71a299336e891c25d953b43d2264c2eb369a0b3e7208a0b9eb03112eef2ed5b57da307cead0b261e6ecbcc9753d91d088caa65187ad402b522dc8ca89df4e241b289c41ad90a103f5c1c148297dd8d57691a5b95fd1bc5df24553ac27f8851806623b993713f38cf70c50e0fae03a1b523fe9a8dadd7d413d44b9e48e5b9bf7e13b5222f5c586a3b705cacaa3fdc7d1c2ef4284695dc4ed6761e0b1d3fd00261b1e16176ee4a4c1196538a3b0e67096f1d8b233bb4db8270b70739f9acd3f73b334ea7de125c06593108492e80d4f87d83b8874d526f80d51e3f2aa00087401841dfa3f7c546f29a3fcebbd62d075e8ce73a4e7f5b4","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a11edba0e0f45adbf9708419131f7dae"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
