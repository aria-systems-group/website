<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"bbade6b5f93ad373f9d6b7d752399619077987e933d52dc96c1b4a551e026278e798baaba9f77aa2375713f55c2f514938fe1eb44395205d3fb4316d1fd1aa7d17a4b2ed952667e5b10f945e87a01bf3d9a5b61be8db7fa7b1200340a3f09e108f64f815ce363446384388a94c9febe27497a1b76499859a21ef5387f4caef6f8d0611e74c23fcf4e80ea24422bf10495d54fc757b0ea424b5374ddbd2540e5bb5007a255e52387223da11d277e67253e2fa859b1483a8bdc3fddd0ff43a2db0c6657bcfca054ccb12515f78887a79fc6f4dfdb0969bce8455ccdaf5c811f150e6e803449810a6793de7e20001a30c2023998bf9362771db71193825537170c9450e9fcb011a20c949b3d6b85178153f5e6b4da5ab9bebd514a297395b673e70226c5f84afc97f3ba4e42b64d53f690c739d02b89d1ea185d69894a68ebec9b2a36743f606bf0ef266cb2b98569ffe2c185850a14ab4e91e712ec20da5efa97f3cf4d957acbc79d9f33f16304427431b3fb9e723ddd061c4a7753c185c9533e65f6f132cc613de30f484252fe96283990332459b32ae820db67e61cc9d28b38554ee5cdd49ad65646d2227698802b030a33f1026bc240267281a57512041d554f720076eb17d149754ae491a7866d80e14a55c0470dd9fe0116265c3e56ee3d9c38586d9bd79b133343475bb847b38b3e5a62c257f5296706075cd0985850d28a4e7b9da2bd600673e4504520ee4d473691c77644ff4921be657582af37000144512769593588e248ad7aee71e04127039011baddc93f921603edf390361d56024613a718b25bbf60b043f6db2358c5bb07c989000bd46a3a357763cbb61f619e161d27802a38cf189462363c9532940c0d611255536b8dc1342b2109af46f0c828e56ff734ff6ba02113f6d4876960854b73c121fa580953aa7fa57b945b545f997c3dfdcd4e9818bde236bb0e8cc98e6d8fa837e286bb726fa486ada1faa1e3420cfa4e0ddd29444d77d1690baee8809a4d5cfc451c21deb578ed8f743ef10584645f68ec07053358bbe7ac738e9face4da061014fa0a8c8e8dc6f3375689b9f1457bfc350adf9df167e38324270623b7cf3facdcf64292602a5fd0768b8b2ecd9097652dc0194ead21b4812ff6a6f37e34a6f7f80a17f6c494d176179250b0efc72bb4b74e00b38cbb198b2cb14dd578071c4c00960585c7c71eb62b72c6497e12a9a4b52ca4384d8b5ac061b266dcecf3d594c3a50beb9a56bceaedbce552c7b2750cf0ce0aba5eeacb23c933709374c3a3ffe1dda9c24933cbf56ff70392fb2a12d544ec55d97a58a994bd9c36aa16d30a68d3f1ef1b3156c3a8132db525ead33a2280c35114c410bddea5ab6ec0ee1f3c7d5a38a3166af19582c4093a939e6047af7e0f80b47f49b626edff57d4b8ffcb3c45a1dbfeb1b18f75451a2c0681910ab1272ceb1c5ec42a764c26111eee83f0a8307755931c45d3d834d27074bbc418f880a91139d326482100945e52ef706d9afb55a9d5bd34476d701ebb8b417a9574ae29c2208682262551955d1b924b67f029121df7ded917aee99566707685ad76ba7366079bc8362e6c95f9b2af5a77585d23288c4d7863d551dc635b4d72bd444650b84ffe9f5df833bea077382ae3c7347460b15c4c6d808b83f898253bb21b0f2fa5e497f4ce30834c35d15aa8230d6bbd40c23c1851e0e473f4253780043a11f6b79bba4a9ef37102a5109c92c209ee6933d29e99300467937fe284862bca1aae4e1e1a3a194cad371630f90592c4a2b2c512d1ed081ba536cb4202fc1f6cf9aabcef5344ab77802db301763d92f64c82ae646b3fd096c380e2991c2ab4161965dff47ea45fab718768ddd157a737a1f43c26c05c1cc3e7a2b1ae8ca0af14210b3971bcc13d84d268c28560cbf3b765e7ddd7305b64754df388f4c3dc3565e83bc2bb3d427233e50783d6b982a4eb756a318b4fbdd84e12c8fad54b8fa5690ee2ad674b979fc0f01957df584a4e3d43d95835dcb64fca5831d081aa5886cf30f0aa47d6f240d8d32928c3a9f7f82978ad449ba4897d89e20ab30ec9e275dc003a733fd9b53352ca1658c765660ccc0dcfd81e7b5dd7727753703b78e6def3fb9c24e3875fac9e89f19b8de9d8fb8b26bdead731ef36ac30ebd0172ef091dadd7c1d01b95b2e9cb9a2f4dd87e9059326f72196ae99c4202d4446deb30ec9a330a2fc718195b710c78fa817231afec7eaf91dcb4428248314ceecc742a08f625a89d5cda226f6ec9c1025e590d53a5b2103f8b23e31b9d6f835b0cc26cea92516aebde8b4bd8bd41698e87679499e242d84f84002485445656ad0856ce23a90741b31a287e79b724d1bfd2f1da16657edc67bf7de3980c8b39abcc355bfac63d8608563142d04f5f16981c863dcaece490317018dfbc65aff6ea324be6e3080938a2ba4c64bc2a4cdfea2f129db5d4bf3241d90cb92570ae64404f9e54189946176a21a1f71cbd9b1a9c517a87a71035630df908d2f57238ea7c969198e7d5516553a88a81ec355540894ca426a7f1ea58425848302ba792d2e756318a98a3073332687363ea19f73dcb54ec28dae534e331f3788ab24b1c1fccbc43deaecc96d9de1ce5fd7203c179908cddb6a5a2920fdc7098f279c0f10966d0aa34936669bcf022f2c589fba1b15b34d89e035be2e1f3480447ac20d9d6a6a28a11907bcb8c83cf01cb32af21f359a58025b26389d1bad3f3d9beae70537152662c7654b106f6194e090a09f3506b977c3ad0e6bda83aee1a8be7886bad160eddf207f744e90900d251b43ff80dad7bfbe44b019fc9787081a44b9a6131cad57edd653b4430c4e457c4bfb46f41bfae26b0f076160dc922b29e3e87d6da00498ff3cecdef19e83121fcfb153b95e8c1b71bade05caae3d99e92d58d53afbc87d8b111c4d19bec614c2d50817399d4db07092554b5ca19dd49c9a0846558ae4a8e3d125c97b6ad5ef0fd46212a792e6568d6db7e06e5e2cbaeb6cd38fd17dc0f7032742f13f3f8bd459341f6dbff001d6ae86559b7f23478c2e004f14c107770ee7ca950203cf30df987ef011bf8b3d7004671e8a840d088533f7dae50a13f0f2b938e797df99516577f2aeed047fd6ffe7c99426f2dfeb45d237b0052de72fd5dcb448ff2a97eedaefb4b54e2c6f82fadb050c0096408dedbf96d455539f3e9c9b04d3d8239e5f54edc30fb08087c2abf15a69a5aa9076f8edef60cacd0e12590acea9926cdb32ef764d3161cfde5b392720a404c00a2f7192c8c011bff20b556359b6a281749d9bf4a70e8289aa962feecd975efe5cda62a0fb122000abcb7de65c0aed69aaee28f6044960434ca70c6a56d1b34e967d717feb626e41eb5b3f53a508eff1866cdb0df40a341cee8c3699fd0f5a7a4e946556db074fecee3f683705df41dbc443539d2c0e6bc6dc6de806fec2690806a8749499c2d272789b213634ddff33f4a63802477a012b6d0f9b300ac6ea5a1ba73025c1d717d44b93ba8393c72ec1bd345cf3056d06b8a06138bbed91d82199bd1980d800d5e8d30318f51dde3a0741d95baf96c708dba4111ab5f075235f40c661ba1da869a6fa685b2d885ef7a5e4820273e9efcd9746e0583c25160dd1923fd9761cc2d380b57348ea45d20b86f85e0d9832b66d0328b384d3d52fb86077be972f76e74d124b66cff3ba59c28bbb1c2af732e2c598bf05be80dc88c9281849f9b673bd649cefb4b7758aab019d8ed86c1b7ccc73ba1def880ff54e66e59a41a69576052745d7baaeb856331893f49c92346f736362c0c4b7a2ede93a0f4340b231a1b14d5a150f733e4071f305260d31e0cc7a0c78176094b802d616df2f0564531133f508b8a2ceff9f4327771681dfe187d8ef4f4195660ae9021b5ac126889f5468d6194eb4530bc9a12af64c22973229d674abc1c96eb18999d4b2acca2f1fcf83dcc30e23af2ffbf989c7d3863b479c595292455f621f719d000276407324f62aff904ce75639d24fe792e1f3755a77f7d104dc094eb45ccdd59cd403a971ad74a9e8ee38cf2c370b9218bbfbb8f9d38f51e21d8b7ea225feb4eab97978992c6c1af22cd05e3c73174171ff902e1e9ef30515e0269dc740895ea1a2bad63f76749325681a23cfad0dc0a29a02e41f9bd0f44c5f6984851c127289b4d0e78318d2714593848afa310e1b5b4b3863e43c947984546fc623187a62edbc05727beee67981a524632ae1ba82f38271bd108ff4c89a27c87c63fd1936e3f9cb3b2ca522d559902cb002a7f2d2e6c46558fdb3c0d0d21673dacb009a1ac72ac0c3d6ac2e5d05466fc8f02e2364e3a651043ccf45e2ab33a1fb3754feeb525406259cd9e6d0d7b174945034eeb5fae9906fcb54aec5ff76d36ffd01a64d03bfe3b35e56bfcf0e56f35f2aaeff7faf13c68b8197af45ed1b9fba26a42610a8c3c15bfec9e1d37eda1ed7181c1225057f8f18e847a5a18e5ca899dc59c23f933954a493671c01aad001fd4371e89c08f9f82d479ec968ba93809ebb7c49e42f71333ae23afe90de375bf1234de18e4f23b4bb07c3be347ce5ff24c1c96a76a84a6d9ec684143634289fe32ce000e1228b0545cbb5c0340c694e0b850fd52d841096cd370a1bacc7f5154689143be38e38ee68ccaa08641db79cd681dc087457a98cdd24a0b7a107aa9783fbebf1e055a02b368d227e053927a16e2b55911808cd9efb393fbb6d9fb7e8e7924b9f731e7486b61d5f7984e1dc8622c4caccd59cc0ba77d59ef2d36b81ae6651ee3c09ea511873e20f22bfc63c6adc7b58b4d1174b63ef432a04014a121a9ce282413660164b87d849553d1355dcda82a62ce8cd5560fdf40a118efff6a6000c2b7790cf869fee584a1903c9eaeefba9ea01ee51c19bf31e597a3f3da6f5aef40ea5ab0c5682e135ae360c0512eb2503ab4f2e7df25fbc562ebf05178f2362861bfdca0ff846386b5cecc6122aeb8d85dbd7e06d605e9c2dc450d5e2595c1235671f22f880c09ceb1af5b8d715afadaffe74b10f200cb9c1c30ba382517d735ec5b567253ad8226d3ad72253a18b18191abea04598383e4e1a006395381a8a572e02071adfa4973279932f97bc3909e802585fc1a61b00c666d5395cdc72b4e467161826293c7b6553707be8e9cb39acc7e333975f7ec7bc4e606535108395fff0b3612aca33b49ef2a75b8c99af44c207df8871f847e3344b4879f6ae2864bca0d2a3ce121c900f2230eec205b49cd0d3fa61801f147b47753d2811d7f045dc68df3197b05ae9bf79c94381d0b88b4af37625aebf14907b16c746203cb13e4f662c8b696b5f035f0d0d5b7d8672dedf7c6b1b4656a24a225d6fbee2a075e2d759f7fd84bb07723c933c628850b7b5a726c5f36479470b07a8cabe320ab959233256bf7c629b5c90cb4ad6cf7a4769b059b682b436b45094966904a0af684753afcf9fed709f36134b1adf10c3fd7255b94171b67fb96fbe188ba0dcd506ac0ada43e6a116ea8becceb19982c1dfccdcb63ff03d5e5346b350a95a27bd2c714f251d83e66f6be380a87dff7ce6a435cfdeb1e09253ce479c6cca24a17f832c3d0e653832fb34f56330d18cb6b9c828c9b68c6190926531bde492cba759019b0d8671ba1a9078d5ebc1a563cf9e57c248ed912ae316fff15599573e60cdf61b8f50aed275d5830725e46dc2c7440828394d606d993a046b83771be0048113ddafe737fd6f87bbe16959fc986ea15fd4fd7961511e10529da401f730a9cd9b4b5d647570bbe55a398e21cf43a5ed8721d8b75f4f837aff95f91a9ab322ab0f45748a28d9d67040e90d1b969365741810f337ae4fb3479fb8897876baf6a248fba901ce5173cee494bfba9e1c2a264920487b443e4b135643386fd8233b913d36e246b55fb6c10300d0769fa1ff55d51aae9cfc9230ce44ddc23e9063662a6ca81f413354415247904cae7ce3597225e4695100d0c055e51ad345e45aad9689026a0b6bd1961a2bda627fca9ba851cf8c46cbea331429a1c5e9222cb07e3b10ad0cc037269e2c0dfc204b546ad73a9442cdbf41b27126a9c4900344e9e115b146bfae73c761c70766357c0b04c12887d81055124624e1d6e51d84cc6fa1259b3fe609a917e59015df0685cea483196b4e6469d813c109337278b7cbdbe045dbce25463ea3de808f191acc930f63747aebd36dd9afe9d9cab684994173f14486f79bc2e10d1af4a99a1e162df3ed1b2511f7cebbfaa781321788d81457cc6c3ab48f4fb64a6c1cdf0569cd3ccd8534db6dd7c855d79ab178558a1dbb4c9d2c89eddd00fd30a9213405bc22c8cb36bcd7642e9258c1636fa5d517fdc8d5d39d1c56f8838832f5642467e793deaec9f9c91f9777b08b298e21a3776b5e5cda1227863eaa056b52588e05b9fd04c0c5173b9de4f3d12e6ced9e073c155027fbb06abbea7f027964f6ba60aed0cffb00b467eb7c15b09a056d1966c5a2fe9a2ef6aa98f691ce64f5bf32454e59db563c18409b0690371c2a4abcfa802b25474327b11949b7de1c7164361479ebdd26c64e32d33f18ddbb5b243caf73b4c62ba09c4fafb233cf57d1f98936bb885e8507a49ac1a89beee15a1c1b569931e038e61b8f8f3748a5bdce0f9ab339dabaac9a80f0e850a657f7f115a72633ff60cfbfbe04a8c066e615c5033887b8d68a6bbc1f653ddc47553604aa6119a3d63481cbdb22ea87e7a5c460eb73fdd7500c72488e66ee8f841cd272f25f56b709a55f66584164b118acb23244b39eaf568650ede9f130494d36072a17cb1b865930128da17f69792208d9f464959b8e1908323d463fb01742076c9626319a5d458f1b9d8918ac01eb9459f01700971156b9f1afc51ab928a59e7831d935e8d3b89ffbe57f5d9c636b63183938f0896a3abae1a43832145052650ae7ab296af1ef9bf56e8e6e06dcbfa41c8b71995dba566baa18791653485cdd59cc07833c205fad4740119b932254de805fe680ad062810854bbf3a633c398b1c3e0d80f7b896877b62cfef1ecb8af5f46b52db1f4872612b2b389cd26f2552714d3455b0cef5c8ae94d420baaadbc94bf72909f2c3f0be39b1026e735661b160267735893e885579fb676f24ac67d590eb939ee00139d7b61fc06589d773e47b1347796b35d8cc9eb1fffc164cb2f9350d9fb87f8bb259bd7d078405d7d24b73bcc54fd45cd705ba0384196bf2cd224bc8bcee1c6c0b6d5a8bdc8a17bf3c809e4fb428fd506bc5c8c0d36a2f6725947d8b213acf4a3a57f4d405bea598d405ad6000a16620cb5c9a4713a0ff6b44a5104ec34639358f44651557c4d4009bac689bb50dae0813ae2f9f82235d8e81ff06369286b6bb482ae684747007155d4815cf8b13613344bcb70fc294db9a41958c16cdbea95ad476e32a0938964d93c2b8c5c33c1fbfeb8de442566f0018a4f1734beddbad9029bcd13a7be9df846aa237126d4599c7ceaeb639ecbc461b43133dd7b2787e8ae6d765f68a5efd1719d85583ae78aaeb63f869352477034deebdbe149c016d0521e740cbaae320dae2f69f9186a77984f9b125433447290e7f23f5d0dd1c704811da3e22a2ae864d3c09f678fdbfc6f74a94f31808a9a0b799848a1b1b5e3329c2496a590ee55bcc108c5a076a33e2a4e517e0a9ce4c6ea48da8a97ef1908028b6e66fcf4dfd3c650f9a5d5b799c699190abdbbfb28e33e503cf512550e5ed858e4529e5cf1244a5db889f3bd65405ed75cd7a645f9fa45e9c7297cd79440f71534786ad1c82e7a46aa60a15f72b6e1a114dd81054ab252453fbf34819d3d3413e317c108bf24e1ebece914b2b9237d8eb72d8911e7bd0ec4e6c8210a2c9b8557cb14b530bdd7d7de8ed2a8c980dc92a1f55a0f491a9553b1e1adfc80553e029b3df67c88fce1f24346d50bca3bef706f8b764b2644378d5fcda167c9420505d089e2db6d4ab16437643383261c7922629728a3b7b0345e095dd9bbfab160ea82f868b9bc514d425c40ea3901c293f44dd82f0acd9b71130a6bb074f2ac5e0181f0ccf1625f4b5121bc4870abd27fe25f1cf3d91f38c20a437e2fde98780089d8d71af36c1319c8bc50c40e668082e7e1b5acc7155173e5e1d4a9e3eba861210d9526d15e68520a4bf8a6e3e02659392a55afb064eb78dd31d67e410f9f1c5aeb316ea701db311a96caee8da5199f5300aef2aa2ed88acf3738562712bcaa4dbcdb21350c0dbcbe2bccb8164b0835ee422ec6f76a4d161ee9ecac329fc8db33097273979c11fd52fd4371c47d52ce238f29de3a2fdd1030836cf54a057c037d17fa3f21aa64242990dc24009940320412fdfac0e5940baa87e0c107d95133e127624730a1fc40a5aad64cec97a01f6d5d5af8b2f0f2318f678882dbac21f8ac6884be864a9f685bf2148aae752c12d1af974847f385da5a57c7dbb2891a755a681c6bdf58b09995e0a6f064b1c46266c2898c87a1e96ed65d03d7fa349e37eb544c85e46eb6e07cf15b6be087bf82aab1c4283e8b13f3a8d36f581d6a19ad3985c6c472f7c485386d086ee6caca65066b5e34b1be06b447bd86ec3555fbe9085ed977a02224c6d7fef41dfc8338d4067ff7b60fbbb440edf1ea7c148aa213a380574c3b4e9f27049ddc334415131361ca766f651c601fa546ab9dbaf1cf07bec858125bca77468abbdb84da7c5819d86bdcfa086a2911abd64bc927c32fedb84ea7fc9ebea3146e629d230092ad36b39535eacd7a23923d43a247c200eb792c178525b2070be11de1d7f1a15cbe804ce23aca7599094acf62827b6eec54cc0a4d0a9d9c21f0e77a89109f94599cf6c5b5bc375eb35a3342d8853bf5b5de7243fd63df3733d540398bbabe61f37d70d7cb438dbedf3a671df1fe560449ae9709c2fc814412654640cb6f8619c2f638ada2c860e0b986ab25b6b6d0a7af6cd3dd01b521631d9a1d06e28999f72039434eaaa38c9518e05b4411a06500d130d2895d13b2e9534edf8e796cadee13f96096ade0732dcc6f95af4a2ba17cf2b7ea82ed8b2ad50dd257108c9352e125c2865a2e99d24a6a80109a5ae4b2a4c4b15d69e1e69b2202056fae66ea5a829436bd675b75a056e8349208673b6e00e6c7c90191715c1709fc26e53410e8e48817c79bac05bffefba80078b3808ec85e8b639d2bacb1d643a2edbc87d640b880b1fdf526dc640ad03377cb93c567852441c4be3d7acff638b37ff80c0f26dd57f1445b7bc339c5f2cc5243f7b9fe4b462b35f6df9425cb305db59a4576fdc9aaf52987151b407127452ceb329bf6181db0b80f3fc89deb88737ea06fb8134826dbb9280328d98994a6b58076a5363c69403aa73c8af4f221c56cfb62b0e048d7e0a39b058da76fd9271a694bb93ab3712bb8ac877dc289b1a59da9ef99bd143e2fec19ca1f6dfbb9dfdd8e9aed75c197fc61bab40b1dc9dec9b201e2f9d7c2914f8f045974fca8b1da2189e83eeea20e45e837eaa296433e781b5614ade53b8af66d41803e43f35a2f06343190aef4f83432b4b643bc002fd7c6f72f5771619bfe707f76d86af45e30ef92a90d5f460895b8db851be82ded33454a304c0d5278b38b104d774dca910ec3211ae7caeb9a5b9855a8312e55a8094c81ae2e3585eda02708bc5a9b6e973c913962cfb03b3d643094e98a05b6898aa0648e0a89ffe9d2a5079f793683f8663f025778acd09493598d8b8e725e203d33cdb262e2c2946c15cc772e37a4b2b8396efab11c23492133e518f30cdeaea04b9f6a74b4fd803fe0d9dcbe0626740e9ade0acfe9135bab457698c5c7bb89571b76d2e196b9ba1f194bf8502cc6a19ed19c37d78e26097b564135e0c0343b2f0f425d9b1b8501e34e1fac55345da1685e676af3340c56538d278d5246db1a2a9a82cebb5cc411c5757d54971575a66c4c9a8d20c148b0dcc28cf97c5a88416b82f7efb0d62b7ef165557e7c374f0575494c6fa6b7ad1b2ff43ae9642e4906e339c4a66120a4bd166f9a6c5531a50aab9a5b42e1c70e497a133267a84587bfd1ff25a1edf70aa78da33c326c7257c48466b8fa07bd7f6c685956c2fcf168226715e8bcb140ad6ab8702e246b02f2a7f13a548868bd5c7c9de9d5e70c91f1e85be6c39ec41619a5b404ddf6c69e0519b331e0d7a485ea4ac9c086993c55330e48484f29b070c08d0342781b80725cc214551b5115665e2f4b21b792c793f5e25a9bc1a59cb6dc12d5c11111c57654f1fca8dbddde07865e360a715bb42dcccdb9894687897ac41447d08c9f83d128f64432d42e8849148dba232280b619acf21f74ba79bb498dcd592d41a2994ad846b2c84910cf040696d36f7f0f800e3e174980a5c79eaa3afd764aa09cc40d9b4d0c0eee5a9daceeeec79287314589a628a6a9577f34110da30fba9326c6eecc899648ff3d218f673efa33a8bf3f4b78c96126a008e71e8e4140cffbae7fb0ea5144a31ead1b21939d63799aa74e9d794b6137eefa59a4267d001ea79c7c77cbfa74ce99eb76984de9b2b525cc7e28d80b233d1297512515b4e17054f471863a96d9b1a4948e1d07cc79fa42c4a30b7b95a1ae488c9cd3a34f2cdd3452ae815c3b21cb63ef0b9ce62291287f616ab7f40017d6d0fb3c30feca13bf821068a0eb745b7dc381bcc285f68f87b82314c602368e3e9d34faeccffda44ce5d8c9fa68c41dc44973a5f147e1483d30bd8e1723d7569dcdf179bac5cde2ab328516ca60e87a2d386b2adb6dbe5b55aef290f70e19be751fe0537e5c8693abcd78d6369ffe7587b2c0f567af4921bc057d65cf31ef4cbba04a6788c28a72d1c5e444bccf0ff302dbb024d8b1cf8bf121133df45500f2547bd7a1a6b32bebb11262b00170ee22ffb564ed207000a81f67a44c439098c27bdf3c71f8e3994de506df1e2cea1a958b68853327ac0e81ee6a5d5a2ca990fdfc5b8382193574a8603038a4e2eba0fc40c59b1d141782e08ff976820be1be3d091b061d8c50e2384d5bf1d4c59f0afbd85966512982e95a77a67e31deeaa0d03d2b34ad988df9502bd0e7f8f446e1057e860fb16030c3cb6e0211c96d1d815ff1984a12acd05c1283bde796e9753b3e073f44b61787923ef4a99e260bc0eee8dd3765aa32c84dd5f1f11a62101405123138ae0c974f0d0ffe8d2293878f2b97eafccb7146ee64eec69b542172128884b4523ba7ec248c6ceab8249525b6da69e2290dfa3131d3b0b2073a95a4c2b8768074d5ac66f8b65b6669c55a5e4031d1157100c14339c70e91f01fd3a9d98e23c6b062043d7cfbc13b14b634d59c8b80481bef51e299b85bdc9d2d874b8001657accd4fd3d5a81c2dce2879c8b12560078beb79a1daa0b879147e0365cb64219f0250bebdf3d3916b74f7c4739775b000b07f0ded8e9a0d859bd3338600df5fa459271efb6a9f2c5bf3cca45966d61e8d07d86d8149535cf8abd2c9a44400493ea8eec5385d76fc37cf613bfae71c38d73edd6f4bbc21742cf007bbdbe7120445a0ccd9cbb4daabc8945b45b9fc8220eed97b34954310c067aa2c33b41a725e0f0436ecca2d33b8d957a91efd5d23c2d9243a92137d4ab4f4f0109c37058e7af0f82e0edb482ae8e29d99622d260c0260a8c17b8fbdfaa8bfbe537a57f10c91caee2b4cd0d0434664c3b10d9de2eeacee1e69cfcc3f370c04703f7accbc42f5ccc4dbfbc4b8acf9e78ae32c098d0a40f7a4060aebd2955bc0b9685b57c42af6eb7cc6e48b868e33e3d064865f8a9bbd4d6044d833f6667f4b1bae69c51dbf11a56e537c63e77ed28397cde4589461035e16a37bf479737078b7510b243099729fe3fab20f2218f21be6aff2fbda079bdea9d966bae10e501537687180e8a62607bdd6163dc1044a05763dc9cc33f10e9be8ffb6d14ffea3c236cdf271197216002dfbaaaeeb94acf22c6f3c1dc88cad5975ba488077bd75a4d6bcf6c25a302c4fe02d69cd3234188ada941bdd536511ec29af7d9e8e3fb348d5c44ec5528cd829961f4fc808dfc82cbdd1d16d52b1bb7ff1270982cce38bdd9c6bc6da4f1f4d78ae27166d45dfb16ca3fbcebd1d5d398d8a8b3f5122a77a7ac3c2bcacdaee1fbcd5fc3e1d0fda12b2b74d416a2911bb65ec76262c8e19be2c13dd1abe2c9e0a97a52e7bfdeeeaeeab8b7a054a13029f4dd7822aaa7d58835efd6a3faf36d57ea8d3e6106e28ee717a80b3362871d60905f17e7d3bef11f8f2c80b59860effdd56649df0f6ad7d8008b39e9cac99ec9669b214cb386386b94bf37373ff0f6d2b43e6c69c9f041c6fdd163a39c672f72c4313efaf6a3e11a6b8c4fbff0aaaa940df1857b42463ff2e19519c64b493042c0113f9d5eebea94ca889696a177ebbd2eb11af5b592f05f7a41677fdfb2d5673ca9569f5c0a6581ac02999224c9da59f89eed2e3cb14a30f80926dea7a11a53ee4652422b7d793edc23f6dea0fd9a9b9f690118b7855c5fc499a4119b88804e019cbf6923bc4f0bbb76d2ab2bcf94269611cfca4c490142904113dcdf7ae8e82f5841af830078c52b5be09a21443de0ed3730d21abd88532e34cab3fec0656e34ad217d401f21ddc86343a4d0334989605554069f07f5101b76b7ad73aae4b09cd52040470b56c21df7228c48823af64be6a5b336c8fcb1b9c36ade7304f866fe6c66d286747a389b2b496c4df6740118512eb8c1ed64c5ad8142e47d099c4e86b0651c6a94250122464a655af77f328014e1920f8ef79d879a8921200c390066fe9251c3d8c7bb5dd93545f579792cf5e00972a2da789847e285c4cfafa2284f2865e39dee0ee5f4d0db2fcb0f9229a2de54720264ca3f96c5bdc58750ed0912dd0bf3001fe6fb6f4a545a3332d67a8f132de3b65e4476a86a09ec81a67d9c84d1eaafa17c7c1df53cb0b86320a07c6e57dd40bb78f658d1bbce2a6b2506bf4ce499a43e911399977d28481288090a96fd2668175a3edb23c83e02673689ab9ce0120441a981c86977174f69c1c4d72cbccecd06fe5e38b015d15c337fed16ee527749d0b2210d7ea7d1c152c2e81e2c7d6926a9568fd7c647310170f778f7258aca3c9ec50718d1388bbad0725c4db6a32ab4cc1bc85b9b7d00d41cc2f759335e00deb7867239714e43a135de079e06a172a57108a2c5b783648e4c69fdba4dc86a5007be66601929fa99a5d8840075c38f3c549a29fbee2b3c830721cb3d7824affcdd0adc34d693c70ee2756e116624c214ff4347c0a200e4f0faf0c8f428d2b97493779729cbddab0cd323f032716283bd6d9f30ae162e1b8fccb226f16e33e8c6aaa5f07e328a202b656198b34e374cb4634f919b3155964bbc8724f58d8e9c5f7163fec70a6a24bf9ee34a686e2a7dd40f38839ebf31e984be14462950c3fd70246b87d97350f6e2c93bd887ef722101d257f17554bc1180b6cbf28905aab731c24546404270b911288cc6adac3f2043533ab2361a1f59543bd4a2387cad9a764f62be71a0b656231c8a9d3def1c521c2b0e5217ffe35c7715afbee4f0a2e48e74af6be150536b4e08a96459c8e932275863ec2d2d9cd657a0c67252152120a96225174ee21b66330a64762a6fb4da33a7073c92489277dcae5ee576880156b18caade7e73df856dcd740d54a5ed343fc6d8241e557778e6d4819c9de196e597456d51c170c805a74e99a1613d6adb1439b783a6a2effaba9a202056aa122e10878a9cf008570177efbc1ab00d510346055e8591773dd4706a2d4a0e2a5e50c9bbcc53762c8e08b3f7c323115f49c725afc448511ea4db1c93239f41fbe503d9a5af57147426c8ddce88055000e24ac3693ac30285676b04f66f866822bda7a23fae72ed0bf375a36da3f8a21b487fb52c38ab529c99aa6b0c630c9a15039b23257479c3444f3961dc900d4e2544c0129d838568a913441d22bfa418d1a5c198eff0daa92e78d9507d00940755b2d619f084317887c016b032f719b72f625ea5d2332a0d881af91e7cdb2e5e648dc98df75cdfec30cc42d4a70ec1cda9cca697716ca591dd4224cc1227eb75d98ac9d1d1047c933069658d63f1ce0cc1324bc4feb7cbdde56c95a4935e6a3166e65637c6f1e0ca01534c3ca4f8c15c9825b59044630c077efd39511676c3de1a9350facf5b573382642bfc480014505a2505191e164feaeb1de25b9c2609372391c4361f965dba0255f6bdc04d85dbffda019996253f018da766181cf90e08c9337876dccb848a7b67ddc6da003bbe158c2d869461614995ef3f885e3696878730ab34ac6b4979c9141c002081bad6829c58033890eebe87e574c95d21c65ecfdaac7b7b55caf0c6a273879d89762542bb07de0e788b2ae80a2d6f8611e5420cbf95bf537bd11997d9d223235cd6aa1f0a08c48a570ef7896cb95cab71af9d7f2ae35ba2e53f815569ad8f2804e435ca95faab70d5ae49e796bde79cedbcccc09034cef31c7ad62c1b31ac6f9a7d987d8def77f05354da6163bb8ac76113c34dfac9509dc2996fe0c0b325bd86ffcb236d1d155b14f3770b2f0545ccc0a186a770e933e59350f1a471b6ad7611af78c949349a7ef2010d52fe5c91deafe3834025f8b73cc5a89424e39b4fb5412b56b7cdaec4dec04121d2e10713f2dc6d9be6d624207756d33206cfb7d341aa6146314806ea6e8dbd6c8f69a3c42ebcae9ac4378595c1c6df8ed2fd6c0e7079e3c1e427f455e3cc25cb9a6e08a69b6806d45311afac77ad9aba6fe1808692c997e77d2e68979e8710ef3383635b28cd8c1156c78584fb77f4d9667e31bbacd239ad26168e2808b91bf20de27a639d6d701c9a87081003a467996aa106dae3a13407ee84aaf853549c94c2ade517210dfa3be5bcf3d9cefe63015fa99450f296d060c0d117ab2b62c7f3efc94d2b52bb67f0896f39ab40f9c370669a48cd3f52614e763be93879e15d9f7265a00ae3238e3fe70a4b7ab1fcfcaf5bb877aa659b649257212496ccb4c91c72b26e9672321a8bb917f7cbf2033da1aac84bd3e2ea80f24bc44bd6042d58516c73e5e574527c367e84e436630625dd7ef3a7cda78b0b9dabad53ef505c561aaef0b0ff467188aa2702d17e6d70bbe06fcc3110eda2014fd250a243bfc90d50e151e43d47438324c2a61f8997766fb0f2de36a282545656c346339708b41bfe28f668a639a671184e6a499ad9073f5703e345192038a5580b688d03fceb8b5feb2b3168ceafa44171f83dd20d60627b1048ebc3f3a09ad3b850d4489f4f95314cc0ccfebb9b4bd17827f6d1e78eaa47f7bf78bc10fb4a4419ba2c1895e0b6eb71d3c1dc4cf894f2c435473d647821f417c62ad40d540c66e7f6f91e4aeb5e7f31f3d37b94ee7629aacb3da295fb58509c65fbe976fbef009fe64da80e94249b65781d162f64e2a58929ce0dbd36c428848d8ae952f208abba08cf717b4c47e8a30f4d9c46cd008999b704a4f104700438b1cd17a10a8db0c6b1d1d351eaa630a99a3d2d80d6d3e80592e0832ab46111aa2e951b8bd4838c4368da9a0a8843eb63ef334b0be2ed9722517c83251458f41034f3453ffddaf363352d7e90ff2a87531bdf21e663046a0dc792cc31688a7e404eb95ff9a8ad5fd111adab092f34e9ae1b2b246054b8eceb590e026409ec8d265aa7182809d4c9d828704349bdad771dd8a059fe130ac7c79239148752aa2870290734cfe8925d0ca36aee2c85aa83fd0bae0f3069b837c78eb44830a3be4033c399e737ad2e205c4dd70602ed4de1961400addc79688eba309690d06284560e86d22dadee3cabb0add3e7e770b2349da45ccab03679a207304b88b28881717fc4d8b6f102f1b4119d152e13a00565896dbb4911000c8a9e9202eee4946946365e38ed14c18c1b5dd425f541bc647dfe946bbf4d1f9af31eb0ceb3057f971d7771ab13caa528064773701520ace93bdbcb3316cededd9ce0bcf52428bfdaf41b50f3ffe4b87c3cd727d542144464d2a5fb239f6346126934b9d6c62f358d115cba268104bd178d7965472b1751defc656fcd0911e75801fa267270e9685a2f9987b0ac5d17c804c1c8fad7a8ad5c99c8fb59827e25ac218f4b54b0f1409835e74fbdad86a715d395ae2281b982ab973bc1023dd0fc45fd6d4a1d0e169220ca2d32afabf5ac87518868b02a91db48bfd9ef6db1e3f89801d279ec107dbe3bcc3d3bdf61b2cb591792178fac4f475ad4b4ee090062a51ca69d04cb52437d24d2c08c76e0bccc4b3592abe76a16c3eb4ddfc8967d68095ee1a58038dc300063511f5a16ce5e60dc9c910442648fd6cf7900666711ee3aa07a835f967cc9bfe1a119fb516a4eb28f32fbee3e01d19524677db0a341fa9ba6e43b9521f4c3be86f54eaab9783542639a83fca327a8eec9f05ff2a39e39d8167f060014aca2e34596175b60a747d8198540c74b03c6a15992e503bad3ab210d74a52038840bccc994c604b604ef1cbf92e7d928a90226686ba6a8f8455f9fc90c0d26b2a1b9847dca5316525faf8c5669645674346cd2a1b951e6f083f6bfe56eb96ff795256a6659570a3ff70d7638131054fea0fce93135149f0f4f6db2e32cd87a99c68aa8e825bffc6a1da5b9490cd2fb89a125e0c009821eee90bdb684f2e4bd11acaac3b215b8bb5882870b5234b80f437d42587bcbd13a35de1a68fe9c8c4d57265b24f16f70da89b4cf913eb4430bf25207673337275550510e673640f064d304b154ddcb2807875a2ce2a58c782005a4d69e1770bc29c1a3fe79b119969bb1da4a89bf50f1c784961e055d3db92a877d6a5b77777989247dacf133080ddfcf986557e8fe0d435ec26fcc75e4fc5bbcbd0bae7d03f516b38b04328dc61e51a07b1404abc4a7d9169128196057b1595fa7edba259b7d752b107f02d0ccabde6e142f92b1166b3f682078e7fe80744ef6c3331bc200f9a4866aa6fb94ce84a42984cc33e8a3d4f3b1c2baa526e47a95e1d77c2ddbdbb280e4c88e186893bc70210d6c622b44f1297b95c38c758109e2aaef4eaaa98bcad95411cf75c0336db8f67ff2a01dacbea2e07707b1126cda7260af91de7cd7011fabbc4484bc7c49f60d74e7902a43476ddd67e04bde4e29b923d160cf844041fc0af9f904b87e3106de7eeb698b36c4dc90f0acf9763b6ad76f84a6e8c36d5b1fcd257e7f81d713c7951ce5ea857577232cd10bc50047634d8cfbf53a0b19f88f1d8ab42c31691ecf40ec83c19a057339ae23ab636970d423f6db7f13914fe63c37a6ced45bb28cee72234d29d96e705f05c9382f0b60ac599534201291857b9c8f484376de31605117d0d06f33b9e123f7860e3bffa15a85b57e5d82abc8f2a3d27f9bd3864cf1c9168c78b4bc17a610f6f192f0c5f8fde9c518fc4e6ec4acbe2ca5555fe783baec9dd13402a45a9bc6821655de506aa9aa85107bc424dac2b24e3b9fb62b4104fb2e3e9da2d20fcacf441f31a9c3350eef20eba50c8082c5534be789bbf6f5474366d850cbf875a0dfc42edd193c45bb7bff1d2ff6e921be146a63e61e92f8d466f9a81b9a7d0c5432512dfd7947705c25bfc4ff2d56dd9d5209101f24488ade8c5ead1087ace92ac021a10eb36fde40fcd26fea29d4ee9910fb372c407bd1025b6107e76ffc09331fc06cdd44996c839a0a2d6b4695308570cd089c51981004542eb57e0e442e048d7a5e8357d6372a890e4579c38234e53df0d4a9fc6b5912b37b793178e017c5c2d69848c078a5cb8aa7c568e8dca26828a2b04ea739af081042ac7b21f04c20d37d2adf836543b4baac5af1600641608f226b57ee939f5516c7d17d33c5fa974b7465df7cf7b655b034258e1b9cb8bafcc8a19bd66bdb8d06eda41b7677a85f957dc5b0280eeed7b6449002652fa61ad64b5df151c4c704e6217f13243c2882d311848b0c42a5a66bb52b7261138510072a51fc5e184672a949c4dfb185e8479aa0c9225c0d3bfe785150183f21b04e366c011da2bbe729f04203e7de2f8b6885e0d3ea229853bdb8fa41085b873935aaf8e52041df61b93853bbb840356bb23761f7960d816b18414cc094db65ba3bd4c87b1e846faf70c0809c4bb7c1c556ac36d79843a73dc508b0d359dc8098a53c2ab068fa87029721a3654f63c2c72982475340395d911dde5f3fd97cc01968c664e510a982ed5be837c95c6ab5dafa57a8187fac9694da7470d0e7acb4a0d06ab0949aec08a045f4707ea9d17242fa76c092ea8d446cdcc0cf1d3e34f6a78cdfc5a96b53d955283c9f8e8784eb94f236774f076a841bc0734fc49d23119fb49c8413636f286f6e337b3e095b1a6107e75585ae6888ae3fdb271d006d62b66bdde8755b158710c38f998a3da8ba7f966e2f840527de792ebebc99f4e0ab43bd889fe33947598d34dd36e310d8142bb8306c551b1368dbc276593e0deba10fe1e62fa405acb47dc646fe3276c3e20907db34473dc0f67c4ea04de182ff6e665ee01878b18103d246471d080470e1a5d8a6875dd5a696916603fa567cf5feb08c185da983af5cb24346959e1bfb8444b65379ea14e9a7d3ba24ed0fa1d869f62abf5f781771d02cbfc3629d74d86591b0fa6f1466e094a5820b6a1bf87d129fa8ac4d40110c68cfa7c9c1b20ed95c9837764bb35e3f20fe0d59b9a4a293d64bfd238ccc0a6d8e0d6ce9477920bc0b3591226e1541f95f41f8543a676f50286ce56dc77b0351830b8431114e1c5a0e7ccc38f43faeeb72091e40fe9f85f682a0bb308de3c44359a6f90634b13277105c5b19c0e5cee0226c0dda70fd22e8c45260ec155ed07230390cd04b4b57bbd53907e9f4840ed7d59be222a98b3d65ca34feb9de38c36f86a84c005533c5db4023a9f79de96fcda74cf5e883915f43739fd51e4cb559baa5b0a6cf4a1fa0a05df93173c84e12bcb983d717645e40931e252957e03441e41ac96fbd79fa6c3915f286386b7c7174acd75d1f6b920c922440eb3e16c9c8c2453738fdfe60cdd0ea82f7a06694b59a62f2f4db29457f59e645be77e977d8e4899b88a0a9cf9e893b2caf664abfe0baefa4b541445719fc3416947b4a00d1f87867beddb20b90316b4349ee01fde376c07e3b0d412097b34e6e6825d942ff7d62afd728740f4e27b6c5eedee2404213e4995397415308dc343113a3cc533dd66f7eca51f5554ee7998ca3519cc31337d524f51cbc6595d96a782f70bb2b27d72bfa5ae60e9e316b26448ddc26a319f5d12b9b73","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"e0e9ad692d5c5124c6d5b74380abef0e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
