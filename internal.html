<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"cd213da48bd98a88044e3ed76f1b05196281fc7293ef5021b36a5cfd0e11f9a1456685ac3b24fab3e67ada05c15b99b5713bc6fb3960b8f887de72f95f069e7985ef2af07e742ab6ccf0ae0154c45ce674b6f9312a6c9157d6f4b9236fc9a49a19fbac588e32a886c393f32b5c67c5f8b5bf4c7199486b43ed73764aa4051f2364257c04f3dc923d8c9efe1a45604040b43fb1c0129c056e642c434ed6044abdca5a59393c33d21e0f0ed43a63725f6d5b773dcd2027c23f19b8c97fa5628b4d309678776973aa6be07dbd1f387c680d7c1063c0838a08c5a40a200861b179ecf680c03739ed5a9855e58f3f22ea4fea61bf952c47546683a943b9534a065ce04e35a17c9b84e6e7c0f3a3eaacdff80fbf259a1baf543cd91e58d79e852fd7110bca08fa38c96d42269bf4c5c73d882ea1c579c206218cc501739233caf20bba3658182538eea797a3f20791c9f83e50307579bc52a63d93eca8c0fb24f9febb62e3cd9579e48f974f70de6e5666598795fd2d59d86355f2c0af0c4a3777141911be326518b3ccfd999dd671988f8fa7af9ea742708243e1c5c9abf4877c8f3a1d1e31cb3ce2e5e6fa7ddec03c23254fbb7a0abd0f76789ff629f471de625faf27b469575c946cfab465f56588b82ee4139fa2b081ca25ee02f1350c44268ad28c1b0926342c251f5d08b0c1db57247b9f6b4c9f73918e67266599caefccd0fcb01edca208350a38aafda4aab500a2c262e41f752ce70401065aa56f821c5d1321c469ee98d44953821b99430fc7ee7b9081ace015eca3c9f1c0bd8327f4aae30ee84ff27f58fbf7f2fe1d56fc268c840abb2cba920abdcdf488407420e7b97616d3c42402799e59dd3e9b74a96d89f3f72e8e8561fce2ab3b6d11bf71ceb86dbaec7adc5be31fc8cd9c23c27bf7cffb692c2250362f513ade16d82212905ebd481d44f99f7b5879342f2f552e55f253ed6f3dda51b2e028ff01e51579662d00156d3fb9c19e3f0a25a9ae9607e1f2ad799898680db168b2211b3167ed96df1ba264d6b522f5754da7e6ac09abde0b4947f72d43c704612d916d0ad69f959956ead87499695ab51a0c30871c1801b09b7baa6ec2e71a712d5777e4eb7fc565a8acb26c5b9027c21c5bfc488f5aabd46a6a3ab468e2773157df400204a011f11d1a0c4f8c89ddca7dbf14313358f7afbef2b2032db91b72d5076f32b7add4ea6a94bb55c51725347c497543b3639328004fce8f3724528671360653d3bc807d1fbb99956efd07c288ca82d55b455d1570329b1af5ed121f086ea4046bfe902d700f6c110e6cdaf0b8d49948c6759b61dfb747537bd91999a706db29c304bfaa70b0b1e09e93883ad790a02a9a9a16d88bc549b97e6cb9d1d69b9d0af3583f36dc766a73ae21ef27dfb5d214ce91b933b724c51d4a0307a196ea3ce59fc1d2c4db53d60688e04df96eb36dcc1f41c9fb8fe83e64c78c603a690dec75c837b5aef7cffa66d3540f4cd9371fbda1716b90fc9c8d09a1db4ecac9fabc58908722531fc2375c896304de46bbd04fa6ef4a62a8ef5be7bcfd8b300b3fc7877a1d59a8387fd28d9ea1b5f49de8f899cf252ba4ab2a6b02470a2ed262e58a3860896a84cd46734d9870e86a8d7038b853926a12020d9f0fa1a3a718f7db699c71ee53733c4b459670052c60978d1560be9f468d2da296460983c0c5f8218ea13238a4c73a97617cdf65f56c9cbd6b3b509e3ca452513ac8a55ac2182c9302ae2bf1ed46af02951fd309cc3f9f917c9b97194978469b0c31c08c26ca77d26fe771af96ce3f03f68c693d482ca2010ea6c4861013f96542edfc33659c333b4f135b1b43f6134fe1afe4e1bcbf1e62aca37dbd8056d4518f443f888b9e02cb8cf5405dca2e6eaa97d39a7afb4ba4d1905c0ca57b584f12ab9ab9c00496069431b1d3c0be0ad8d3f64fe5f8a4122e04611d9f1023294d865ac8a8a64cb917e0979fdcd3833f3af0b2d0088c24cf74df8a6860d23710f6c435d6ffab185ca556c090faf5c5e193ff453e742379882fb8d4ddb460633342f3df8013c1ce6c4a274f8049f2a310ee9dc9bc7096733af43f8406bf8605f620f4bac870cb7891171744a1a004cdcbad7697893b9b74060931fc7ce6e7a3f6641ea8f315387ecefa9e9cb5b2141e1d7c5adf9c766d7c476206b2239128e3669d3553100aa51aa976c53153a0a3120966967b9f360f72f8e964bf58c4439e1395c3077493158f51e15dc56bb1cfa8b0c15e66df3d5ab5d5a04710f6b9a3318c70edeeddca0b25f4827dfd7a08568155a69a42fcb3059843798fa3fc448b76ebd55e724c959fc78cd1e52b473412143a2fb5a3f76e82f2a9319f63af2d386c8748bc577087aa8756acd5adf5a9d423ad85d568f8ce9270b3bd0fc9e2fd13ceabacf0897910870c540765da2df9e1957e024f924c6b8b2e221fb69b13e6d53bb3bcf8a158071711d2fa1f61201dcfb5e295e13387aa82e0d814d84543a3de0d3d10a2326ba539dc075b9191bc6c535ac5a2c43ca6e6b6f1dfbc55b31d77dc25a0502b033dea5129d16183257fdff5c4b30f722a280d84efba6c82cb6ade455d7119bdaa419562df363d440926f38098e0596ba0c9ef6a8e2b44ad42ef049ad685d74ca58f9456185d444eda3e9ede816e935517a41131e8bb9a40ebf8ceb22f9ded662922df53aa1b92746b104ecb23741b9fddf975b7675c38fc87a352f7a9e04f344dbbff87eebb3a3ddc5d24800413d9c09931d1f0cf66397154c091f06716a2b38a5a97783457c9c8a18e1b613012cff0acb4cdf0acc22ad222b3147c8d781fa298b52eb479e6f1fe5160e6a921824eec61a736e8ab4aadcd2f93e19d34e7cfa88c6933bfc55abfdae509d855dc8c43da49b4824fa8209c749f374aae5fd171b5bae665a34ba65802e69ade8295e61d79716f9b62cbfe8b7872d13883b569847fdf77b5a1b211492afcf6cd3113818d7ae29e06b3bac1a850d130ec09119df40c413f8d4b399c95ad8d8622f6e306412abb47a7f9f256d7026bcfcd9bbaa76f0850802144a369c2cb1963ec7de5f1f5af439b671dc8b1d544611f4956ce266c3e1674f8e3e9862c436d4150b37418339625e2a4d1516dfecd9238bbdf50476ce4e2fab14d9399bc666e7b09d761dede13cadd3a8c8e73a8a2739be2d49b437f244c88972bfd4461b94396d91d08de5d50db5397ab32c370b7ba1774dcf83d37ebcdd0784d2047cafbd7fe5ac8be35be97e9d157d0d50d659520051657d072b57423c67783003fbd52aad75edf72c13a34a3b7b383e09e04db8145911f40dfe24136c7f6fd6114825bf0adfa9da537aaf7471615c538fac2fe9adbca947401a1edb1cf74f72e23fbb30342f4217e889b64f098a38f7bc33bf255d1dc8f3d44ad887d8c241b22f643c8c131607dfbe50d5e7b541dd7788f1bda251ab0fdea04132d67923ea5fd28ae65b49ec6212496376d07458117718ed3068f4ee1ba015dfc323294cb0bc7452aaef46a20c475762e5c795d2e6433e4c63e8656050979eba00f36bfee5b4bb766178830545abcf95071dcec523bcbcf4a41a5b4b2098a3d78228fff194fbfc8c4a5379f588251279496cd41477ef20a800c1a5c647f13bff3123908f6c6b2ffcc6645a2ee64a8e770d093ba949dd6308e898f8373c55c15d010afb034d1c12a81c6488a8e262828eafa42d416b4ee571dfc60b20bc82bb436be96fba0b26b14f8ed7f871f6b6729941db665c42c0eba8953f780663d61b3421ba19dad897e74ce066d1ba47810a6529104388bf4b6e22188fc1979b2d7526c63e13013459aed2eb94d82f3b3e20b342bc1e54ae9425fd77511b9871b59445d2d73e905b9b3c8bb3089f2dd6a26684eb0d6ebf6cd1ef35fffaaeee12445e17e1ef3213812787df087b5c7b60277f4d6103072e1cd0c104cdc4e1b84495743ced7264855935cdef986ddbdf1528eb8a03b76138c9332871e0841715a98f9d4dbc31f4dcaa47617d22256fe1c9366885917daf6fd3ae3339bd934aebc02c24e625e1a8ae160dfdd720125b73073386ea6c3bcb265bf12020724f173ee7fff333b5dbe7617fd828fce174f4668d9f3823477cbda386dfc65b0faaeb0cc0b0604d6b23c851ca62649c8a437f15ff34e3c0cfd0199f64c38f4d4604364f4a9b6736286802447d9447a73116209598ef1293020cce68bfa2caa387c85eb528bdaf8c6a5b9a2f7ffb6aa20a969e736e78423b5708b33c0d5c2db88211243ff61ad2dcc1cf8eefd65523763575f0603a7ec268300a3c9456c79da4701f7e1403c21aa6572233769727aac0771801960ed8eaa9934fa1db0324417d040cc3843800cce5c18e084aeecb3b434a9bc7047264cb53bc2f0ff7cfe51df22273a399380375c68fb3e9db3e9a02b5348a5c9015145b62f25055550087dd96cb611b5070171886c7e84aef9bb3e3aa1d28b382549876784079ff420d68d8c52ea3f0ef00551c0b54f2e13f00862930b3d3abeab1938f1fcb646d452212129a606321d3aa40056f693c8f7ca21f02e92c97d38ac2eaa95ca2dd0df281ec3e6f163f3e9c8ef5590fc646ca0da223e04b05ee666768095b8b2702c1275933a382f6bc382e3f1bff26a90d7819c2edc3fd6f505d7f9befd60168901b2fdf6142e1f78288ded0777c456eda1c64b2b2fb8518d5e23dccbbf9730e95812d321b4640241ef99aca69bf9be8a9e45b16670922592f40fc8aab178850aef4d8684833be7fe1f9368218d8d4a5ca0e28f1c80fbb9568ee3cef20ff1a21e6209be640d8350ff6f6095afeb702969942d88902a6a12507a441dcfa8c885a9110e39cd1525c785615977395dd15dd8af85c7a205b24df805d7f3837cab56b52083745246a5c90ef8e34b9250db1adc5225191adb53a7677a67a4e1c7a504caef81f42aa5c0cae60a27d81655fd0986cf4319fdfe5d6929fad94d55b099a2020058c4e03bd1fc38182cfb9e9345705a1e6afa14e71bc3dd89c9f949a41d7c3f2981e5c3db6b32053e8878825de279ad9a840970b06be0f8f3386caba654c8a61f7670563d615604771847f04c3aba091d1beaf6f1aa57c3e4cdccf7de58526e25bc6359c5b44c130d71197d90df5349d6d840b48a28c391bbc8bb489a78a45135144a6faac9fd4a9cfd1b043f73312cc1865d90473cb7581dbd8effa89f884774e2121ded1d8045c00dfb885e429c1a56373b2d95232e89a93712f6bcd508fe2624461369eeed7ccd32fd803198ba87241ae9fd3f73f9c0ad61e19950d9b8d1d3289f9b493fb45508c788fbfaf3f1fd2436491ea845b0c898046a4c89ee6cdcdfa9a7e877b5f3ea511f2138f6baf5ce9256e119c62058cfa566fbf689309cde622a53ba8b9db60bc10a921f01318606e54517d76c2be599f8b113098ab47141c292bead350ad0483f2d3dec15bc1c9820f48436d6f332c94f89c0492c28417d2140d94b76af3e7f9094bf6a5e16d10218b5a9fc2f0b64d161e53f4fe4238cb88068378a004212a59a7d3784082dc9e6cfde1e459965332ac4b60ed48df0582d4a326aa61a017851dc4e2c7209c6d531c8d20b2ab3b8c99d46e45ca7928d5e2a1ba9b4aacb04d0b2e5bd9055267be3b8e92fe042c5bfd61e1cd309ffe1ef645cf531f9f91771eecd1e51ea5efbd917d065514d8b8ebea2691c22009721851ee8e1bab11e1f97ad6f0d9fd9a2a3483eaff7dcdd62ccd4ee494b26a3895c86e6f67fee8699cb34708f59feb25dffa6e2c86409c050061490808db9c208ead2f1e3febe1cb9f738285f1ccc164fdd6ddff8c92e143a7a0c16ca9aedaa40ec24ec970520b0e0781501c9726d06b06edfdd664c7cb0da3484864c8d4872f0936aaf8a5f2b536727d7cbeedd3f2a82f33685cd4155deaf373d0c99534e605c8436797ecb13dd7be1d85a3e3cebff320045ccb3b271b3d5a1d99de254e26938bf46cc9a0aed45cf208bd29851b86b6142d9814b7614cdeb0cfb728df5be553783452e21ce6ca1d477210811fa64933c871fd802c577402807a04f0ba0f331497aa8de73f0d0028f0259ae52c98a11d3b075debea0ce640c1262c88082b2bde176e1755693794fc614b85b3a7b83bfd9d4d81dfc68a477eb49b8ded9999807bc8970ef0b69a21d958afff16d361f72b5a1bfe8f79e5bd0e533d0d6ed2f91998ed83137a4b6c12bdf60d5c14f1a276392d99a5d39b41696b33dbaf99b6e6eeee06bb3d928e4e6ca80239705ff59763497327c9d05faaba3af8588930cb4bca65a1e4bb8ad87269164bd5c79922a8fbf9f2973af6f054f6dffad3de7e85edac90b243d30b14ee35ffbe0902329671bb2216bad569e09a9fbd020293f00e5e0cf6bd46b4e0a50c85365c3c51c7b661f0123747fa70217fd83d806842025189c07dca912ae025e998072307c40f2cc7a56695cda9e21366bddf3c918594543543f38febd1af9651a79d62ae8273a29904d618caed505bea41ca2838f1957669b3df3f878f74ddabf628b97864195fb23643e3774586b1dcd8e7f43bc268ca1397bff0389b4f5834911b3bb02f7bd9ed8ddff8dc5f7c5ea6271c3019e8e29bc2c7c11461369d3de75ee3c9966cbbb61a32e18a7c5f721f1ddd896c4123a7d26451c4a33cc216c9eba290c1b2fb7c70e547467bf57dafe9a1b7e0b7e99698159fd7e6415c8b377c12c501b2d1b45f57fbfde9dcf65a4bb3a2aa699fd3de827de5c2873c73b6a5804597f5eabb8256c0a3e52c0d71a5122d2830f78c1138d6908074292322c62943255c3fde40e752c03041d150330bf4248ece27ef1c2fa021fcf57e361d6c643777fbf73aa9733ded4476e4c2aad379c227c612d40f0f01b08c146a621f15f3353d67cc834073751c1a684513a155bf2d710017022019b84751a87d40b3cb3a6b2231264d0635ada779c4356fcd8c7189b794dcfb9af1edb9d94f2d3bb3cec3351f2d354b969fdf91f06d263fecf2ac4a9c5f9ef1bf8877e7fd5daf65cff5ad7841eca98cb83c3b9c16d6e4ad7465692f8405ded29e62cd9aab293a7746176db3aed75a7af9bd702da2ffa5c619d7d186b8550b609cc7b66b1ca3eb7646871e96f2e1a5b215181b1ecd89beef7bd081496dade256a2e597c75f7c310cb792bf9da28a03b1f72c97cebb026214562922b876ccf50b320754ff1c47f9ea69f3f82ef4e18718f26f0c1b9a0a5728837b318dbcd45398c7fe994873dc19dad0612318b8a06dc3e30db5e706c5a4af2960ee0a1c141036fc8a92243e1ac51c2b3f22d949b0ee9b6d078e45026939a6b029fdf972837fc25e31a4597b8ed81e633a8c69db23bc343cc9c22922fa5c0b40918c1be5afc05a42cceba324ceb4b775fd430c1217d298ef1f25168c18b1f1c7771b7f5f81e4b90f69aa452ebed81c9b9333334d04d638c337266c7ddc09418b56715528d244a7ba77d71fd365ad1ac379d7db619ce8fa0d92cb04b43e44b9998414547e7f0cc1da1eda39782845a74adb2097191c58b5ae1b55cc16218ce38515db2f79500b0b22b531c1d4e1804c54bf24fde400fbdca1c56aa20a6441f19e56d5704fcba4b7ad47668a997650a74970fe513296a73ab7edfe8e471054c05221f28237b6186a77455885bd2dfb48860ebda8f034744b210a1a37bfc04c2882249e09c7dcec5086545472aecc40f1a9ec687d08737717245c9dd9c1f26a3f7cdebe106e081ee30318ac0d95d92906ae3e4954e22bfe17b1d64771655538dcfb1bd3c93cad2175af0a0e65fe15c5896552b5d6d0df6448eaa1dddc67718314f73bc0bc1cc654206c3110e804ab126c53f041c4ff5a694045bb8a84329c49f47f7d06185b44b8bf80f31bbc4f947b3fbdbaf37b6e603c2945c3e9796087f6e373414f1e4f501e0bc9d92569b7c900ebd1541dde3ecec4375146500f48c106949ddff0d85e5ca5f3536e017865114be7664ebc3cdeb069e272cd952a91d0fa07e48eb5eb099fa4044341246c11c81b9eb4f9d058ca5f02fe4cd2a45d0c8649abf465360243d2221493ae6d6212f546273e9a05faaf075db65051cb8a5f72c96fb077d0a8d19fb7155b7e4b42fafefcd927a6c6c56860efbc90686bf3574c18807ea847b9003921fd6fa4b168715f229abac25a5ede9955dd8fcdc74a2b5f85e27196a2ff042e378e3efc3834105c4132a6cb9de94345234af1e177e25c1b0b23ac0c1334597fd51b0ed2593fac223267b477a2fa74ad4b583f2b1badd29f1ed3a7f1b9a6554c739058f9643db8c20aeaf649be14f7b4bfc69072b2f230b6110e8f57bb9ec3b67d610fbad52ee4ab3066ea36b5cd9b95f12666de8964af6a2499f2c6064cd35d04aaef69cee0d51fc8bcbeea300fedfe060c11a0988d45c9def29f2343d0fcf5a27b3f6ffc7d79aedcb1983633295bfe64327fd5ca6d589416d392a2a85d1a4bbd08c2ef943d8832762fa27e643416fd1e3a99b6e82c25f83a5c055296d3139cdb58159d1e3bc9be562d947ad7c4a55f92c215ef2cad0ac6a0bb18b9d01ef9e6976c7bec08ded247932a6d2e2d8c66a01cf53981075c8619570fbbf767840887aaa8086a9fe62d4f122be3e95bbf056246af49c6a706353d64b74144c92140c69f25440897661a4425b186ae0ba3c756969e4cdbbd2ec6e942391677069d795cfd0fc5f3b82de034f7a3dda7f3367cf98379d7eeda580666cf5c5c9f91ac982c21cbc3cfef565b26783e59bc9f430e54d38c337408677ad422ae5b608595456191eaefa233dd661073e4d60c760e25f92be81d3706740248a3dd8a801a9cdf4d4b5f0b18694b9de1b202e0571674587fdcc72c01afa8bced6116e98cbecd67c26d2635f186f2eb5ffd1ed83aea04a6234801210b0cbc02a2fe7332a0e198c1135fee600dd5371bd8cb0c61d85a780acccab63d42d6c359071d7d8e4a3abf1c910745c87e62bc06342d23986764fce06393849829f0faae1ff79b023c1b3731201242b6b6f820c623e3b40ab6048cf06d6007be3715c50dce8c4f5e9fa29d58bc1ca6989fd8021dd2442f011ded68ed17f72cd78d353d454cc5a27c4343f40ea86a959054532c9f3bba5a8addc013919b5fd19fde294e9d946bd573e200e3ffd848dcde88196979661c3d013209d4c9f79fc03f06c5b89b87fdbdc0d876ccb48c2a3489802a4552b90ff7d93c91f08ebde5d4c90fa61b4bbb150921dec899b9b7eff5bd9281017222a57eabe455f5da7155639b8ca8a5e2f9ba6c6ecf3e186a46e3f4e2a85c6733205cbfc4f9ab31a9c575051b633af0ba4a7e53c2cf1b7cbb90e52c4ab63c16a0ccdc2f69d76cdffbfc6b0b82749fbca66a5f57bce11e72bfa30f22e927d09b1d0fd96086558c68b05b8e3b7957e1591e689488615a7df1127e6ff844da010c9a0fd171ad6815a46053c614dc8e792960a62a3ba7209a198a71f5bc062194a09dcdaf945d1768149661ab04034f92a53fff3638461e8d6efdcd2237aa64857b735859e6b1e283536827842cb8414f2b3b7ffe4e394e48ff6eca246f91452269af70d4d5a9cdb5114c88d5f29dac4bd43dc815532239d9043998e71bcf27cfcfce7b2cd719925734e0ca8b3fc6f53cec9728620dcc29aae40ae76e544aca5d82912714f41b351c9d4befc2a127c9b1364fcab0cad907111bf086adfd00daa4a3c30a764539679ab92d0a206453b5a83e313d2274467e279acfdd8f4ddf907da37813603bb80a6085c4751fb0ad619d3be4c92d742936158f8879278a3aa7be10ca48a8ae6a69eaabec810e42f560b199f0fb7ca0988791db15d9e28645b2b6659fc7cb9f679e61f8c25047b9356084fed6b9cf2b59fbb0f610a699d9d62fa831dac25a6867e00860a8bf27da7f95dae03f686ec1fdd4b48c275233332a52959f6a6ebb573f6201ef7d6e5b25ba3d7b489c405cf08506a3036466e2957232f82d90d9fb4dd93f68bb048052c81ab344673fe935eeb03ddafbc9f608d5917d5ccec6faf8eafeab94fafaca903730011b03a4c673352eddc3816800ea7f13e45ff0e5b0675f6a11250431aabcd06106a802ecab736ea48b159314fbfab6016e383e4ae00cbee2b3637f96e7f0441296a7a81abbc566fce660bc2e6f94c69e9cbeadcf82aa715c9e2d29b90a99b82d8a40d699070be595c5b981ac509505e9a62c1959a7e43ed6e38b4d232b7202cb30f25a89482826c1e136a45717cf639e4facdc9af0ecc85e6d452a9fa2933e2140ebf0b0dc478e2b7d42bcacc4669e07300ffee53f9664a680c8e21f6d8156e9329015181e7ad4be48d1a51cb1bb61d64281b887ed30758a10604e60635977deb8ef68e73d44f988091f76d8b2cf52aa013b0fd2ff5a9c7343a52447528c187e6e30b7778938f6c0246c3ce24efb187c401e306e10e06cea45ffd061d6bdef851de80dc91f6569c774a9f5605c888ae28f43a2392087077240b533866eb90af6006d18e4201b41ac34c1de6db8564d82e9263b1597a3fff56323064838047156d06ad2ef52188ebd7b4b46f980ee2f01248c3803203b315c9f4882928cafe5cafa98046b93b4fce8433b212eeecdd523dc148bf2541b537dc2365d947afe4782ef1b4bc7d17e74a679de72159fd45e54fd68cb743e2f0b2fd7656db351cb1a432301839ec8d4199f43dcea8a149732a27882372d72f4ea8ee994145386f9bf61b77aecc974524d9deb7e87304f029d45fb0ec8cef50db890b071f30ffb9bbf400d519cefefa0e1d81eccf39d5450116a893551adc63f69c91e230315b5dc8bdc8e9eaf3946ef8202a6cdf407b7ce06c226041f4a4ccfb5fba519d3f76dfa680113fdd5996f4b193ad10964ca19e06131083b5c90d4f5187b4592dfabbd051bf76e04a4c5a8fae219bd1a29b98228ff1988a9c8994a8eea31bf687c3c215e796cd35b95c7d6fb51fa2a847543af98bb1e1340a6cb7fb405e2e5f8259bba1b668316616e066eced110282b9ea5bc63a3d0398c4832dfa0e70a9afb447074915e26e46791544eeb62e9b3add845d3e7cb3402c0363b7392c720b743105ff6e49cf98955b517277854db167b04052a2690dd2020d09323307d5e87e0f5a7ee3be0ec926b2e6950a3b05c502c7937d3b7fe37547f73aaa2cc5dd92da7f4349fa98ed11261acfca7371096a5aa615d965b04f0cb9142ec801e6a95878bb27d3ae0161d12fa8c6b9a32f3b2c42abd1d41e15b6d29cb251ae90f56f6862232f8e3c1953676e8d25470e93cc6675bb4244e02b533e4e1a8413f7167714c77794b23f2e954896a4b4d36b4ffb430378fb2b9facba76a83c2f3ce6f5ff76663576fc74d7656e0225bbdf152eee3138443ce58da87c2f46c5774c0e6166e8b55264f1f9661fef61d18433b0d9b9f9f6df4ea1456804aae51cb445d537c40aa007677fcefd5ea1364f22d2267dbd9b5c44b35c874fb1b48289406d4cba77236c8d619b1d77850298b2c932cd45f8dc41818e7d767493b2b618789051d5e52888aaf98f226caf00fd58fea2002cfa55c25b9aab33c73efa26949d7aed29b3dd393f89cab2f25b3ac5ad5a8ffed9b2affcc0bcd0f24d0451738183cd3ddc90f8f834ea78813a4ff37d9f867b23916ae4ba909f697ccf74213333ebabcd76570132663a3c1a6c12511a9c8dfd7626c3bec108976c60a84ff363be75ff0950d7390e04935083fd4dcdd82f05201296d202ccbf85904b64bccce49b206408f5054bde553fdee53634b70b101841c13807484d7cad6125f160159bf8005871295785c823fdc101e13a1a9562347cdc0bfbcb1b8c3a8abc6789962507a9a6a76ac70289970a8193c413ff787064e8e8a6fbba7439b122f15c105635fca855665f4b73a54c41edc997386738a1aefd00ae4e281a6d1c4f2bc39cee2b57d99e2050ee3ab70e594be1831371d62033fdc7dd7cef61caf6228f5bc4ca6320858ca458d0420c0aeb975e5ba129952c1312067d35dd2f60042598380fffbce5421df553866d4348084c57e348ffccd046ea4d867f563691361f68a3d3f2c712511122e6989d97711fc6e8262353e56a9d251f507eb91099e4698236fd0af001e3010390c29f8265d6cc50dc061b209af5898897fb61b88a835219e84a943e5a297b7a9a23223de177318a5ac9a9303f37805e7651fccc87954f4f0b2c3da2e3e4a559726c47768fd32b3b71229385784c026de8202cea7bee47dfe603243d6852b5a780b18d8d15df39314686fe494a11c83ee50f67f585d02454a871e2db71392d9fab37feafd073fb4add5ee0b9e695310f18468221e2a94ec296a0a9ebec3300694ab5b4a3c8bf27461439588a5decc1cc39b87ef56c6d41030105af5cd221d2b611cb13db186f864c8373e9ef1886a8ba2a4661230e9d8456b79fdbe319ae1b17a6aaf5b41cf8eda31b8fe18500a6a4c0c030e8def3d3097a931a3cbf786236fa1f59d1c62940620c9697980c502bb52e59ce4b57656d54d0576c04a0f418633fb35680a27021544764bd1ab8cbb1348dd941d6ebae459e84674d640b0755a8a65ac35a6c7334c30b09aea1eaff21aa6e665744164b22479b172fc4a4ed0587eb721f05c66cfb18e43b44c43e26c5bb20381231c83719914b8f3269ab107656e276605f10bdfb5648b3ef506d3a8993cff6f22fbb7a6cf149272471b83fbf765a6d0632dcb6683c9e6ad8aba2e3af637e78947a9ab7b86049afacbba1bfc381e142e4ec5e96303108be9a8fa38700a6a965739cb9d698ccb72cbb075ae4305589ab081ad38a9c29f3481a4e331fcb94f571c4559ee617ac27eb0a8e138c4328b271ae8dfbed80dbeec16b49181d297f8c7b34eff6d6354cdd9eee644348ad5f2e800feeb6bbf6ffe4c7d05c9890a48f34e129183cc2496db19bded8a584919a58c73fdacd710fa6f9d42aae4749eab2f606b94b41fd3995d4a62da3a3239892f3e2ddcded11629ba27ba3383dbc3617da5c0c5e7bf91271952d497a7f46ed0c9eda9994eaff0f884c4f735f80d947ec9152391de76410d7a2087519aeed890a89be3967befc7782f0b8ae4d87a6748899a8d3a8aafc43112aa086e4105b0a0b55e320baa7c8763672e21884d6b9a02b31efcb71c13024e351905610bbbce9e7e0dd04c63235cf96f8e8190a466d40fc01883a1bfc96dd2b8f9771a3692e452a7edcca45bcd6106d5229da361cef52eeaac9c68f3251d8ce89009b6cbf44c19326516394f2b5ef2a32191352df3d070b5896a250b7d4686113f2e7a5e86958656f13d2c55fffc48e6aa9b7176cb4cbe3c04bb9f47089bb6a9deaee653aa97f3157d74e48b07b16f12bb3c4b115180c4e9cdff44f69e5eec0c32693468aad1acf57e326b158fcaaf8e1c8f38cff04ee7d4a6682150a60deeb206ac0ac96081beb696faafc277920d073a23c4e4a8f61e96639676ee6281c1caeadfb5be7890f6106bd632171a20dcb2fe4e30eacc3cb6f225e10650589c65cf0426801454d0805e8cbb5ad7f20ef237fec10ceaeebad7d892a0a0e36affa4cd6d59d1b419d7d998254ed2fd66e18d81cc90241e47fb3705a09287e094be0a7f9fe3bd5571070c09ae839bfa5db1358c89721ec1d87b49c509f71f3ed4bc7ad4038d6f6bbf30511d77679ba086a9ba1adff441622a813e615fea1483c2a369ad4f82e2fc48d5a31e67e9a61cf600a4d6298ef8180509f4fb3502a1f3fa5670936ff63d32be92bd951ccfacc438b0540e42ec14a5cd282ca4093c95fd38439c1b88b411d14e1fd4662e6311192614d2f9e2a8c5171399dc9a05d78dadbb907327efca62ae8e20c26b31fb9065c4fc7177edef70718221c124aacbb179f8643e2db955d37c04275341f4de42bf5d6cf9d4f7e7ca73d28d574aa694a524bce4c07167e0e7dc3223de52d4f42f656f36c58d5e2997873b0891581547a78bd022608704ed39131da6fbc088b0e3a6a0fd4e5a0fd41eecbf9e78204919fdac3df157ab9bac19f794aa8654aa2e5c035101afedaeb403ef6b83e8d2f7837be12bb5b2583f0e96920d25645c652c3f423b08f5d928a5cbddaeeb52cb3af2a02708e4e7a9605bb297026b27c847f985cf09c68a633007a08e10976e05bc785d73a51cd19839dbb7b92be129e3642d3fded057a4d81438ef184c50ff8b25cd05b45cc835909e2d84a012a0baa507dd193ed442308c558210a97d88cb713877811a68695cb7a50b6a9ade81a5f8f614aecec2d056ed44b45d1fb14721a89dc7178f719e3a0ebd29f0afb251913b823aaa86d47322f8dd28cdab0271fc13ddcae2699260dd9b2291b90f59d769466a53cd67ae81b6a679c1a652556c32a1f08f1f72ff624c92991f1a8ceb466ce91f46be4cf29dd91160b264ac0c99d6a78af5c6593a3be7af47f4541f9dfac276dec80cff9674b1757eb0023bab56e68a4c61d5ca24817ffa448f426e05453f82c6dcbd8f8e9a05b7b5c57c663cac210b806d2dd64cc37db612fe22cdbf94527d4280bac79d11494d72d210e64ad046105d922c25cdbbf6f752899687d28234a648963ea2df47f6e98d9961e7bcd768884fdf17d1f892e830be176fcf53496fe9bd2ea9c403e28cb45a2f05b79ca932ce6ad2437d1536df36999b25621778ac4cb8968999a2d8710b695515f73c6f7d10ab0c316ffd45ef039fbaff38f8171b8cbe264474eb2ea7821539c340c3c6bba26c62335eba3e8299db782f0a35ab9a0781ca321d9b9f8c425a179582f9f9124a7b2e41ca8f985d761e8c22c775f5206333c5a1cd193c5d8e89596c493ff1f984a09d93ef61da9f973f43cbf6707158a85b0beed02027570975b467421f0c48672d9d35131b4280f753b88c89369ed10eccb5666767d0817da176b70eda649cc162a6947d07837920e9c7ed845b33e1a7b4d7371dafd851d1b616db1bd912cae379b087cf46f7f2adedcbb1f9c82577f747dd12a49460eb9eca91c6dbf0e11dafc4214ef8ffcef253c2dee5c0e9d4e5168ded3453ee1f3c78c037f6fc64f2a0c5c344652a4dd44a6cacf1c642b7d4072bf003b0b2d2f9535d8816d2e3d73490216d79f85b8811a6b314c18b11c05dc51192eff59ae27a66dee9ea279a680f875763466e43fe9cedc2e96206d2aa1f8328d4e76bc7064446208979adccaaccd44dc58c965f2a9ea9fb4b114917dc8a5cbfd4e256826e26b6c7d4d5809710643c331aae1693ef8e1d05ad86225b507dbfef1bd4ad06d2c1b99071e880e34cdaaa8083a16446b812a25a1b2149120749d8835e44305789bc7253f188a9df5f4fd7fccfa52c6b4d6fe2595b013812ff6233a258545f3074a7988fc4b4879928b8134d0f8e447663bb5b47eba0c99420c6c4617d9e1d71536754812051f33a6e29f5f8d99d31ce1d1d827bc80574efa321702cc3325caf3d2c53d2fb261f086949dac5c5ebd560ba433ee81c4f7d40c9f901fabf6a2cc55f32a68e35b8d6b1a578cbda88bb76871ee29bf985c31e86249849d60ff203de6cd8a3c8ade19a778379bf0bfcd1491e3eddf7449e15bbfa3751c1ef3bb226242894aa22f875e7ae33410ee7691faf3bf77932fc6824a80a3dfe4d6e8ea2d3afc4b90bf1bcefd3d3a2b592576922a909cb50173c9ca2296989ec0fc394e151d49f72c1e007510be77991e30ed49bef92355ab708857a4b3983e5128668b0c3166e08ad6e097a60ed0d428d64c1f9977ef01db190e54508890544e719356b341f8fb9c8097a52b19a19e372405e3d0b4c7acda026777f0623db74338a615e275da449e3bf3cf8367de6a58185f65fc2177707e42947658c4ea63fdbe6301c76da92dd64574893bdbe6591c8a1bdf0a52a74495f3ac9bebfd7b24713d852e9db4a6d4caaeb1a45a4aa5667148d686caeed63f2cdd5d291af0e7415863872c94165a3c70972857c0f14a2fdfb829f3597ae2c73d6847af22fdb4fc3840fb26085e688e2f71c08552e13ffbd12e5ea6c5ca71a3280d17ae051c92424a8d97da496468d3d1c0620d2e109754edf8aa96763741f5be2f4a6118026407571d2004a8644471b288152148b880478d1a4528472d34fba6e6779dd64e0c26e46c43985c8a44181f8184799e173e50dc96f57554cee886a7383c56b0779bcce00e8fe0168abcab28ca6cc9decc0eb87ed12701c7d7f73a69059a2bd59c36a8bd2504c5a3b716d052b281609a78c124d3134aae20b1e47f3d6ed671ab0123d0b5880c62f93390c5c48ab6e8edd3ea43cf65ddaba5d0e3b8e43d6c18276f6eca8c655d4b1f46388eb05b87c913591305bf6ad7023b64e52ff5ccde1a84aad7113821bf85595a3a524d1796417cc63d5ec8c819807e9818a0383b7f003acd2b68192dd7ff1514b548639a6098848abaab0d262e489f4a4c59d53c9c4eb81937329f429931f84349bc9bb5e48f2465d2ddfc7d2d1efa891eaa7dc59c679b55f4ed9fa4473724f12f4a5a3e68edc2964548675e6af1df03d57a933436589a39a1694e3479ef4dcc7c41becec1a5dc8f17e34a1b29ffdcfecac3fbfaf88ee9e654a1d605608f24df474f56f607a71c715ebc64d92d765dba8bef4e4ad2627ad2cc15493d14d37d915544932b4711daa7359b5129cf99901ef2329415926675ab08e3d1ea5b4b47ad20d0612af9025cb3c0c3e906418a4254e71f562494b527f1bc439160c08d86353e050f5978c5590daebafbdb20c29f9755b6f0f4a9b5c739ac18d5cd64f5372e16f4b71737bd0e985dafd4afac0171d087b54579bfdff44a39f9bbd1ff3e18887e9237a94b77689171b5467889ea22e65bdb1fec559666faf6819fb7ff3ace66d5c4550f41cbfa0028dd1127a4f74bdc6c32067a4efa7c055330eb934323c31d808c83c67053c695cf38088eeaeb53726ec8145a523c0c26a853da4714d48788d635195cfbffa728321cbe5ff45c80ef9b0a0b3567e14ca76a2817ae1f5dea92e63651d2fc938cce8f931979f432b8f75c81c19a71e7037c9698a656f88441032c3a425a483ce8f58cb07f7151673a2c8f744a316967d07f24f6a183f8e2b198d01d41638f2727a22e86381790b1307eb762ef47f64a10e5a13335cb9325377713e5eef46e70187c39b4f53150290b5f305b29eba5f9e9e3b47af5c312b10859a849d1406935eb3eac079e4860afac6cb847b7174249e034f71111460eb85b75e4aa0d41fbbf6d31c65106a9392cdfff51e8851c60c49afd1d7f3e94be3b054c540225b4061103259c7e89f36aac0d5fa987d87f8e48a7f951f3e6b2842479d2c913214e273f2f307ec04a94d44755f468faefe3048aea7f445e1f711d865d5811984264ac0e549aae3010923dbc2c7d6e19c65200f4270582d56e95c84e0b0ae63d5d6bd8b5903a8cb07e0f6120affbfe74201ca906e022e43ec969d8a3ca755afc52b8a530eb59361a947251940cb9cf12f88c54ec6732db2fd9bbd6785b0bc74f4aba9acdd6c5d01b6837a4be19bf7a2e6f39efed102c091e57273ce0fc0f81a95c1d726e4318e7440b62c2d591c056702a4f6953e67e76affdcb80ab4638d22d80d54a108e6c48116c4ebd301d19e9cd2001bfa996a49839c3a81f270bb2066425dc6f03859eea673ddbd3c1e65e2c43eaf37813c7354e4d2b1153bbeaeb3fbee48556441ab1b1eae49ad1a06a07318ccec59b9c6e2894580c77f314bde8499de5e201a97fa819502c85aeb0860a2c4b409221f5ae3237d445bd45b9d240e99f4aec73fe914a091588ee37a893e4a4247336658cc36ebce58b72d6f62ddad4dd05e8ae03923dda71a36b6032c3394c3f60d393ac47f503402a6adfdad9f50a05b145335784330bfb54beca6085dba18e3b16890eef7cfe49739fd19d145047487c5bb773d15ce92826092cfbb6f1286b5bf9b9332e31bc8c10d76671bbcbcb82532169ce6378c31fefaa6d62c0564d2a5e132a57ff1ea56f2dcb54a6e955f262454f5bc72df2cda9017fd9bf4cef14b6d936114e332e4704d6b62d2ae6ec971f747a98ba040be4c695e6a427459e0890c6829bea1084be59e669db8218ef07404203f4aaae9332644c72fb1a6c44efc4d7ab966b3a30e791c460cb8812dffed64d2eabef353946389571eacd8c4b32e6945cb7b34df09a307ab25e962df565513be123e643a3c984881fa6b1714c5dc479c1faa232a0e90e9bf61ba4ea960588442f10fd148a4fd68f89d6fef552d27781364f6099686062c31571bdf25bee6918c7c48b2c2bc6bc4c49647f5aa0abe0b224aae6f988b88e81c15cedbc3018db25147cf15637dfae27eb81da457886ed8bf02dd236ef452b452da8da59e62e8e14f964e12b4fffcb4183f86b54cd878c4fe7e0184f7c566fb63b060eca60aae6113207608c23193e43be76f4b3c8f77d64ff59bafd3146e459a537b3fe0b249f58fc7989219d232d85443f48a28d9750896b1aa7c04078790adf5e5cf9e5d2e47060c6c13b19f22827defe934f53b208cdf7b891d71bdffb195135cb7ff0fa1d3ff582cd1daa368eba9afdb4e00c4d11f445824afcca4375d40e7331c2bb2198faa4a12f2347b7e05ca58a1a792d3ed8631247ce0437bcc3bab2c5878dedbc71e778f51599b95e8b9fb776b12f950ebe4083e24615d75e2cd9a044892ba83e914c20872fee4ff701011a152284e910797663dcb4e038038031f0f42d7e324fce70510ca815f3a8d662f0c56e2448371b46213bc5d399a4dbee16b80b0ddd36","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a6609bd3fdd8e580dd8520e2c932817a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
