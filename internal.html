<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"e80eb6a03d3f06c645e066674ca01fa5cf782434f81f2eb379b666fa21d6839d0061de857bb88a217de98268c96a76878eeede8830223bf756c0f7d861a4a08016978b1694644a217ae2c1eec40e85a194633c2ff9d573c0af0e31f26162130ecd765be063fef218c2d3173fec0cfb1e864496e143def70198c2de54bdb0bacf41ceff6c82d2b1da6793284b6fbc3f9dc1c6c22b6689213376d2014558b570e4d7caec6fe0f84c023b0922f6bd48fbb4fbe767967a766c36635c366a7b4f848e25c3de5bb12b258b3670007b99243921df93373b0a32d42ba87a60420d1c3b4a4608b3cf81b3a97387353cecc2514e26b2aa9016468301c6b5f9306761dfad70740d3b740943d3d83c95d72ccc13bf7a0d258f5ed2b221fd7488fca08f4b2523620ad6aba87cb6936e4bd8f6a601dc4437feb8b92c69227daa53ea6073086d9c92bdc662660382b0850b1b68f1ef029d9d9bd10ca1ff6304af307bbba89bce9c7999dcb2571d9b0d39d690c65f66b017b67222adce8d02de82ac7d228c9e343238185140d146dcff4d56ffdcd66f277b69e565cfdb165c15e1e2f1467eda7bb5ec56b408b8b1f8bf03508178accdce1e6b77adeae632411f5868c039e6c4d4d9c26ab40057cb66705ca75a6bb1619ee39e55ff76f9ddbaf284d05dcdbcc685e00522bcd7f593c924c829d2e94c5b2461b172c5c8a758282d68ff5d1611d9ae7fb451c077878418d9bdaedfa84074c5748bc055effc48e87d91828f9411283ad596d8886b7b1e57dddda929a3aa2217a3f24a612f08d14ab727bc4f50a7543a833eb966a253c51321babd09f2d10838fcf9fe92273ec3c3941223ff0519e02112196fdae13e2477eb4682202ac5d1e1ed86fed1c4023faf12161cf1c77552792b3b30be617e2ee59947fdd5fef515a75e0a0dd56ccd004a5ea7ee00ad539b2afa8e16e121fee183bfb46336f59d522d40b62079d00360f76cece14044e36c6cad26d0f949c74df7dfb83fe4eb97e34665cf9a05520653330ece0ed07c5b9b5bab6f3700269e505e688103c374cdb565858e75a15b10abeda6d579831f28051807fe2e4c05c76237531efb058eeb03f065f4cdff944c0a6727cbb5685d74aa0e09e71dd8db7bef7ad09caa01881642ae004b2f867a4ef8733b452a205d3fb05937749463a0d3ef3f47ce50ad5d3bf4f370c92d064a862c682f419654521a5b1940f434f116b8e35729a0e581f6da2f5322ec660c19063885c31588d38d214ea9b5da76482cb2c367d868ad560727259701501986dfb2bff660ac316d9456f7503093e2d5e3217e7ace2bbf027570106ae92cdfbf6dd609def7389f7de8c7a11ec2eb62515451d86709ce2845a92b994c504e01815ae5e772cf3ab4dbd3afe1cf625c23744b128113671cadf195858a65470f3e7057845e737d08a7a857c3bf3bebacdffb1a07561909c36054545554ddb91e1883f79d8a50e6f65b55ddba8195f1ff08d58dafc5680c6e762ab7116b4c5ec39da372336fff126ef800407fd5d5b1196d0be7175f16a67abf35558651d7f18d4a1eb692f5c2e39d3ea822ffc75747f2803407ee9326306ece9729946c300074ccc6358e6d44167b1f022b9cb56162b2434c7c1c42581e9e22f86ca492e852f5346e959e7fe078522f9dc9bef8dbc96c905a9e56514aaf78190e0674b6714b336e40f710861596d547e1c7729c263b82f7fe1e6294fd2fd8a41e04d15b7b04ebdb93556ea36b99c9e13afa22a9251a715791eb7771ae998c6103660f378a1e9413de739622b917d79144332d7a52455e07efe03ec2b872295686a0a212bb8b345c805c3929a6e41221e2e8e77cd7a16d01531303760d301ebf1471a4a068b39bdcb001dae844349d67a9e063bb1a45a15e3d91bf7c355ecb7701b7162dccc874b16b123eba3c2d77625826dd1233e5533c505ce4a82a909c6ccc249adfe6d71736bb7801b4b0422b3d6e3d6baf9a9350abded7027b2a2de08bd8022a164bc12c75c9a175919b60124619bc0b9c0840dd3b250319cf43d081302ed40a61a41bb4d5a7b59933f5a84b0a36a51cbe27e261cc212fb3618667a310a06e544564c0d9c6d049843ccd4967c1968153e1f0b4f07760d99fd7304f4cefbda2760b6b5957e6d101d9f99438740a4e2c44b44e492ea4f7c78ee9c8b76d10fd531c77bf7dc7390e6860272e4b0067081cfa588f4e10b5cecaadd5d14b2cc18a9e1a0709fa53470d3a12c6600bf8a18706b7ce0c1af80c6786accc02f23049534979c2bae11732751d8936aa639d3bdfcf554f2ec4af718e4f3d183ec20400a07b2e29305fa6804952c6d2ad2484792b9a04cd808f8f2d0443d119a8a4109e52499d24a571dc169b211c6aea496d10665126fff223517adc895a8d368719f3aae15832e67f823c97872e077a7edc20b5115cc39218f2e7796ab846256b89d4b53f7ac6bfbc403b2ae2e11e8201f2e8adbb6417e1c3a7ed9447f91709e0832e0b99110ce3cf2a16aedeb4c9ab372a1227df971dc82e513b85e24254e37fe96362be9c6ee32733bee8aab9fdeefe0137e2aac914511c9f13cc49944b7fcd3d185a203de54f78fc93ca29cc98c8e1bd035241d44f1b014815b74a75a5de7bffa0cb85eac78a081c7dd819331d04531b9e19945644b00ed63936d9a14b6818e8a8ec8bfa25c9ea0fb760e992a2ec83f322592d6b2c9bf7fb07ac320fcba24d7c5f2b998f634f8f7ffd288682be2cd585bb5f1deede1808defe2446a5c545402f290f592b1ef5f7f5396eadca5f2f34769cce570021230865085fd6ef030a1f854769414f7d7ee55aaac26bc87785f73583b5d69c5ec57055ad2127c247988615cb586c2e0fa426e81bf78bef322fd74bf330b35f6a1546a59078762c0a62cf783233e420c2fd041aad78a691f7a3f6fe89bf365b140db20a0c23853716ead0c303884653b5ac1d67145024aed4a889a93b7be677b3abcf5cbe05afe4f68ee2f359915dc6b01f9cb2808bf58c52a0c4bd7b190ff50024241273ff85d08057d2c578e243be36ba0003fb96a70c8637e105066223215aafcb9d3321d3651f438a05af6ff38d709aa7ea78e3af572138d6618274e78a986ca346dec15fd0385a91a59550dcf0a99de66718af3a45a5d7fe9f7238390fe7bc7b77d037fc1352e7003925adfed7109f7df725caf5a69ac7a1b4253fe8bce62599224395ebd0705db4a10e3779e948bad7c3f9d474ed55d6cda372cc7b1d2ba5254a638a618695a504d7781bd19b4948dd0532636e1c1814c9d5688830de92634f1b5c31432e676655928711152165efcb0c2b493122da4bc5214acc3265b6cb7845f61b5ffc9664fd01ccde4d777ab57482c3666097d2a8f92b942dad4ecb682f212f0543716f84de827e05d46ca700e2371f0c8cdcee314a21c91f57236c1226b43f1cc4bb5da1a720a5394c1ae6999cd7b7379a456ec48eb518ea3bd71df21cee692ab1703037b8416db31db0bd359a45f352dde2db3acd2d56821d116fb1f0426d51a42afd5f1b9ce29f82235433e69430f9cb44706e436ef0fc7f096837c57e6d4ae882f2c4db1f575ceb9db4f818f5f574d5f645accbd53d37898e57ffa84d341064c300e476694cdf0817c8a9cde72ca47da46aad91ff99cb6818234b5af5580143f835d0fdc29416922a98028bcda236a62031e96b4507de5a7b3b7d823f85e19afbf90d9d9b29c6264626956a7d7ee6bdd84bd3668081850921fd3064ebc83289fdf962b0b642139c274f0ccc803bcfd6208ea0f929f806b3ced6bd2a5158b245db4c580c170e80ca645428a194924f7f4778b78b6bc8f314cad222de29310087d271478e69984ecb1ad34acbbfdf6bdbc861816132d4624b0a5864447cf2d7a13153c3529697a9004d32cd3d04e557e8f42b2b599d3d225b0d07128cae091b9f2133b727bea7553637732c519ded7ab57462d5325e072a4f2f66fdd536850d8ca9c8a666af67cd8befedca4d7484e10815faf1117f925446cdd65b1738b19989f57561d9e63b6b8c1b95742a12e80eedeb44bb23102bbf07e96454616b55b90da72f2138231f29f98d30c55f80595312a8ad5c452594a4d46c8d34985872ddcdfe96e6c7cc68a8f04911de845131e2491b49d73df091de0f5b6a6ae5113ca752e627a164c53ab9270546505076d0b5c185cb06ebaeb2dfe2fd0ffe32195c51fb8f06f76c77696bcad58d2e18a751d6a238bcd6d0bc98040f8a7d161028f519b65fcc5ba2e47894a721d20b0190951ee31daa7fbf19a6bb45ca3122c57eecad92012cb4e2720b3d43eb0254f1d233efb2c88e979e00b1d058df051af93d3bf40d859e11e42c38c7a16368b11a0482ab5095dc7915d7050f68894bed4a0ae9595421b544498cdb53f23f376934d1b3e1c542753efdf688f7ba7244f970894f511f1e6ab38c68b8af0c7fbbb65e69f499692208e596898dd339afd5e1d2d5885563edfb9819832bd62e859ca5ce11d6b663fb92fac6bcaf2107f3e18de00bf3e8b0d5ea145ad7b11e8d3188206d2d3af4fefe8d87a6688afb3628c2ad6e6061c7beffad818848a2f8eb56697532d2c2160fd1adf1b49fc245549cdf355dd3fb466e5cb9f639ecabf6ffb3c759dab0955b6d197237ba8db3fadf4baa443523630a31d1f415fdc5553a623479b7e50c112a11f04abdc1677f4085669f4074d16d6c4d4e468bd39cd83ea4a3a4297f895ce911f4a2166c48da895b7d81cc1a7b89630c372fc9ce50b0a5a2bf816e099cfa284111b5e1b87bbfb0f320b53207bccae85d88fa609238506fca5c3738bff8a48bd439414d31d387db74ae51c3102c4d5866ae70dfa522ecf2f8d484757ad737406f6fed82c472c65a7e1833898438061d6f910be29be81f01557bd0d1ae2f8f59a4523ed704b2060ea0eace6cadfbe6af31f28a0be1e22460cb0cd47ceb2e8d63add9ada1946ac4c31a89419d6a8ee84a092bde35ef9f59deddb50efd9026dac369057312e26d1aaadf177a8a904bcc19cc06d4a11b1620e318eec4c44458a8b6119e2f9dde60c7f702ad6c699a36292b77e829937d1e3ba514899acf0c4c53d58e155464159e1d5a6d07ad4742d7bbbb384bf6889f80f73542be620cfeedda7f43a005674690499b89b0a2027c0b5bab61e5f288b97898f6d8968bc7cc465b6daf2df2f1c45635f780493f38659e8a8d45b480e6b071d95da3354b0577aff99e48db0b0d0a170a4e6ec185c05d87699199b2769af74925501a152104b9e8bf25b851ee440363857a5c32278b7e3bd3e5a59ccef70325decef6e482d2ae2d080cf0a979f19f624697b4b3b6da6a91076b8cd9b43ae5db9a767de687120746995fd93338dda5ac9017f0a04293fdf372b587124c22be08a7e8014dd819b238a4000085f9cedc57c718c911c0446c7851c7a5d046fb4f703bc515fa33be6b0870cde994088c5cf47cea80cd3a884466deb3591dfe62654f00cee173eacf8500a554a403f419ca456e4d00aa235d1c8081ef1255ffbb30c574b2962bd8859eeba89f01f9c2061aca2eb56a33e7b6f3673371990d86d487a2b1959b8afffa9009303cfb05696665da2310712bbd7622ed94eb5f6d2dc3ae55566939e77e96d59ba93b57f8df0d3344bb54f8f110001521117ebb1998a9603c7fa2e7aaa8299be60f6ae31ca20c6830df5cdf8dc7b4c50693a37451ce47ed1bae3178e49a6a026357400688965427b8ffe3f8679b6040a945f4280a5e299c4289cf8a5efa0695bb49a89b7ffc04e4577c01af7802cb2a64c9846a9c4ec24121f4fc4aa41e1f54c1e50536cb52e5ec13b1fa8e594666eab9e6f2f521882a732703827524b6ddbcf68410b35e212a248ae5743d4c5e7b58880b27e9f5ca82a9166bcff660004251fd6d971b96a74f5927fb201d22edbca0ed9f3c336927a3f4ad346eca43b2ca82b9f53cda8d9b1dfccdd943d6c1e1eaf3a3d04cb61bee0b9602b448522d11ced4c8c151957a0f149edd5112bb0cb982edf1082375b252c71367727a43214a0d7a3a45e8f02ca474bb43359c1c2ea1ec58467474843ecd0c95a15c4dca74dbb8dc12a5173c62a075946d208d7b423ec1083af271ecb3ecefce5bff818fb45197d186d4bfd50a63a0fcea44fdfd7fe72edc025de477a3e668c57f0858204fe58a9f63be67dafe89171caa9b20c7f42a6a5d35648c7855662cecb4093c06b53c7c349a2b66f7ef4d7999814122070c448f29bac745f51169eea4a0779ec8e4a1019838e7b374461cd2be47079dab8761bebbc306388bd85bbf94a3717ac7edf8bdcf53510f3aa5ef7f16c52d873285245095649bc6b7e31fc27123088beca59a3f364b309229fc1189e5f8e843ffa2a03c0821693119470ba7a57139687043e549af12352017bb1b7ec82ae930e36b876693a01a94c2af1ba588246e7be4d94ac1d10c7b426faaf78207732f006d47211823e2b3449251ccfa10a49088c45dda712c230b23690d21db31493fd77070ef89f45760675fad2fd62fad94e6955adef2b00b0ea0b78b3a6f89cf8f2033b0af8849eed0832f838ffedd002491a0fac2e1a3b5ece13d245e1dd54a9cb0d85c7709f43af334c3352706c8981329a9c4ba3c046241bd17b7c9261187dc32191bb90b71a0204daa895ba6f5b7781702ff24ef05276b8d96d3385a32802c69dff5efe56b3ec567dcc6554f98b508eef179d3e20ef0d50002bc3cb4c5917cb54f2e79c1d8b7f9f0f72c696d50678bf05fa8b1dad9f9cac8e1aa5e7f91f44099cd07f9ee8ec19209fda442cb1d80806c88cc5e774db15fa39686b8b8e0cfa7ce49e79c571e911f1346c398b0e7bed68ccf63ee86c4faebe31870c4f8eca0720da49aec15e13e28970a3a6c179078189d8f6c650c6d5ee353250aaeb9254367557df79865dbe70cbbe1fec6b6f49f2cc38c3b7252db1024061f2ee996fc08ae135299e6de8dc2e875e19cfb833bb6349c7fbaac777e2b37b27969fbc1390e8c8bd5c142b7310ea0729ded0810ac1a7ba70b52292dd80e8e877aedb8ed2a6e78d5702e184ce05b6b5cf2bb3336c3882a3e560b1728485e77032098de56c9bafefddb10f2604dcec61b1d53360d9eba4141c402675b2c23c288f63e7a2fadc4327647fdf29b6879119386891105fca0644e536a7aa1636e3e38608b7b1c41f708bf46247887fe1aac3462c3e77b419f6b711bf247d2892248ff9dc9a84fc6651c9278fc1e2b4b8ba553e490c41c156ee76f9cb965e1e309b9cb61bd86f84e326a16671c8b570de2f20277166cd65fd4a3062f8bc3e50716ff84a10a21d5f61133a499242cd4ae073232f1fff8d17a8831b2231490346eb8c8779fab0a9e620c6cd29fc2791cfa362378f6d45f4d87c8aa427fd36664340ae77d1a8e22497ee2d097ea146fc674e36edadc25c2a238fe5fa3963cda2dffb9f9ec22b915e79d7358b27a8985e81a3794487d8a0801bd5a0d52013984ba33df4e69ad0dbee36037d836534f107066ae56329b085007e756b05283337f8760a308a82ae3dd27066217ed1a03c5136c12ba86058f0a22aefa088022ce1e6cb953847f275fe2f2930373e01ffa140008c81bf99b5b047f709c3bf42644387d58a50df1e21acd58ff3d9a6394414bfcf524d290923035b9931ba90b195838d086e1a22815df21281b3a16b8fe38be7f44dca5580dc2783ad6a1728afa099901f2e45e48c78f5fc5f1e58956ff18908c41cf8893247c4a66ad31c616c8d50fc33d6bfdce571fa4ea66504192eb919fb39f9f32f11d2fa2176fd787502adfb064b05993e21c3e9b401e6f31952c7004746230fda6847f8691932d65bc752abe133260caaa2af06969c9d1f3f7d2287bb7b2169f4324aa411067bab6ce481a26213453b5ac581a4d671df759f3457ec714153a2d21fc81b16ac7c79cc31b983a43be9262b5c4471ddb5bb98e6b22c96d77495ffc20b6cd06146cf2bf1bedf701e79fdf3cf548d56d54b320b7d845edf108b817be587d1751c4ce64e052086d01db927a476f2f7d0389c3218d39a2e0b278ea2badf2233f19e171eec659687c45f7f005060c13edd98a00e60e0704968f82db5bcc7330c3ce58e5a6371a3e2ebf8d4ab7a2133307acd1a83342c33513fb7c950df20692e1b9db9df87c6ff0a49df6269ee386f6c4912ac959130f5f899715914eca9204a8b695c8baf8c4c2082fc5dd92daef27e7f3f5c30843c29c38691945b3940afd84f9270d857b6016cae7bea1844bf64755b81762b377322bf2ad8e51b139ea251d395d8ba02aa12ffcdb06c63af65bde394a2fe38750b2987f2b5fe0010e73a9858f25898391a98ef698022dcad919f7aaf11e0855739e3632ac04ea9c9523d5898e4519a2467a987636a0d1921d36d081b69a1cb5718e9236d44007ffc84a4a767981a5587532ea34612593709774bb5c88e23eddd249f8e9bb0d0cf9437e7bda8760fb43583820a4e6dd5e3156543a7b8259e52af9154a9434e8de5a96f50a52dd1c9645c0a55e911479e3eb53bb802ba8a4c7c6801b2090d67db16f2d29c8baa48210d07e6b8b6ff95a927816448fa377ab1e2c499b6d70d1a5b25e1bd65dff4df2e337fc150653b75e390e55eecce9039b77465e0d423e32eea8fffaf7319d85fc900a8d9fc7e9a0e3f94e50ac3ea4237c622d97adfa2141175edec0c9b210400c3c03887628235121b3beacff07f25745accc8e3075855c96521da7393995218ce9c59a73b83c30fca6730ee4040628f985d76c37e83d4cc5d9c38ba2c76d5750a7d71661ce0da264844ecbe04c6c0a26dfa04c5388e8522d3cb097c00751d2279b23ddfd590f4becc005928faf934e31ec80d9998d63c2f616455c99bd2cb41ed6cb9e94acb24f6c74c56c2725e7118dd673197ec8f1426d10abced5fc909dc475b964a5b69593401be0740c6f06070b6edbbbaf4da80dfc2b7664526fd6e873a16bb460107349ab13e616605879bf775f7a4aa17e5f8955f65ccb1641a2a2ff5f57df6df3674a770ecad2d9efb7b2ebcf6cf8c67240eecc19ee4185f0ffeee22ba1e6e45da3a7921a96e0a0ba61bd5155b4de08bb419fb37a025a639f557ed6145865a38c8d69f6c03e9768c5f5e59bedabdf6c6cd908a8b0307e656c97de8d43d840d493bb005687fd7cb75d3c14776ca2ead3e8da03c7e69932d15c080ad036faa59ccaf2703d597e6a7a5164cc97273e7e02ffb76c470ca9119a18c9d98f0a775d5998c79a0af81efce81644dc0f6aee3ec86f6ff5bf2c525bae880d53ef8a9cf9c9101d390b3eb282a3a6c4489074c07099532a9ece1ae60978ece5ec492896580bb29b52a62085eaa5d051b865451b88279de1ff92d354ebc80521da808e91cb991c4c45f7b6cce22cbf053d9611b6e46ac0b3a35f714f8845e9ecccdf82d282b53c5aff583309e083024f20c43bb3559319ed45e8643fc829761e0b536c0cd7fd0334e4f39e0da881fa462f0100ff503dc4bbbec30be8a5fcfd687fc96ce954c2a39e4f3491851b9ee1e463eb64ee87e3be2ea67548f70fb1949e6b1b58cfdd25812770997e497dc2a350f7b071947a371441a85633f2225199fcde67729c68cbcfe838c37734db4fccfb89074de94adba47427214fbffe6417af10e30be8054bf97bdaad44327ba743564bcdf2f58f9846518ef9cdaacdf14eb7b5b5ef24762b2c8a0e90a43015c907a9ed0fbc6c8c1b089136ba52591da83a42ed88d11a528469561cb69b43ab931ac9d778f7f75a16fe81e3ffff8ba8060304f2d4de4e0e42f48afdabcd753c97648c3a658836a0dd26a5413577fdc8f8f0b79f9c141dee1abb73603e55fa28d8c51788a20cc24d9cb1add83b4a62041b945ed5f88c00f9a3c11d8c3dacf83280093af0e59cf607d0319a62c26a1de209e9d5421e036196296babd614ab3f5b95633c8ea12c986eb881ef20584a5dda8362065b3248b7143587b96021b4ae38db55482895f6e9a669f6e7655fbb46650d219d0dbee94f849aa472ba2a37212fc66e62462b1520701dff4467e590aac40ff6af7f67d00f9717ccf8b3910037027cf61af043338d65031ff9aef90c1a40a921084af8776025da4053e4c9ef2b83835630b358c564888ee91fd7c81a13ce2097ca728e04b9bd512a318aebb751b3eeb2f4b047ddc6176365d9be0d2090162d15e58f10469c95366ccd3455164bc726d09d363fe1940c45b1c3745b70906e77383517108e606f7b315ee5f325bfb10836d8246adf5796cc2d38136361361913e3e67dfafbab588e1e812d08c3dee3d367a82121b6912c19bb499433a04b134c508b7bedf2ff288fda02394fb5a6a77167064f86f0e8750fa6d9510a2d01cb553e91af0859ca45cebb18660cee8868605f4ea56ce4abe1e250ffe40ffdae07b82dcd33e400a91a53b3fcd7df045f38a61bd16ec20331fcd15ac0597a4c9950152a62497d6a8d98fcf5cc1622488d36808524432dbf467ddb91422de82101404c7b2bc9a892e698af4866b565e1fe19462cda399aa97b7cf7eb66ecb74760a90f483caa92ebe0aaa9b3d86387699a952a644d8ee22c157523020bba4eb999756dce8d96f83e98cd7de1660441fe823665cee9119a77d4be9f5c154daab5318533b5fa62cff4031a84afd3fb36ec7c3c24b38ec11babdc6fcbebccfd0fc97e4e29635c0f09d990ec96a4ea5f2a94db127ea4c0ec537d93c7f5be2a0af22a73b5f72244c7dec5bdde79d58ce7a1e1070d30fb366517d9e1ad482901debbe5db5c51e6e2e4da0a8451f393a056656163489f5ef3455afaaabe04ad79d812e63b9d2f32d333c8b2b3846a2a008f92bb25c66b2fcd75a7f9dbb49acfc9761fef1e39d425d73c5bd88ee16d0c24f1cf38e7efcd2d759300bc060b03236ecdb8a80a7d9b465a851263878e33c922b9b8e6e42e19fe97ca1eca079eeba4de0de41bb600128a45c847e69554aac5d78733f1c6da7e3532eff37b7754ed6eeb7c43bbcbb6e2c3d4aa1b87cb32bf69ac57b187ab7283efd30e1718eaf9dd96c72665501768e2909821ba9a212a699666cf34caff158240b3734dc6bb06d73be39d5e8e249e54284924c1cc517303913fe5e74e5e8c6197a95373ab023c56cea445b7c718f25b54f35d2a20a88689dd4835dde39c383b0d3a7ca1d419597a8a1b62fdf8805adb2a6568c7329b6ebcf2242759b8671f0ba5a4ded9f0d85a5d2be145fe31d7ac4d5b415c60db3437bb18c1d917eb1aa8037d69fe99f139539be5317b58d9d5550dcd02d7c41a7e63a01c6b830a2e81d623280d001bad5125854b1f4711b7e0623302b604bd65346facf2476f5b79d2879ec8b32fb51375f7bf06479e95f9b5bb3e8cb931ef830cc2013f7a805d91a2333a19551798388f04a1a285c76cac541dd93d9a04f2ff92a784130f8135c950434cbb87e4b33ccfb4a1ca9cbd17776f647e34af0298144fcfa1cda7d617ee718b38a8c192a8227e2d3ce4e04507a11fea0f608666e0c587ccdc7efc0a4f963572f8377c1e841f2ca26b9e17580b6e4c88473cb20f2ede29ee7509c74f6c3f21cdbbafab20cee6822c14d6ae108eae3aa2b2677785e2b64c8f771d39ab8a84fc8ad182899e5120646f38f2d2d655f08e8d775ea2c61d5a277989c166006bb76202c663cf61d3cdf3de488176ff1f76c8d256475e238abb1cf5100294c22019ff27dfb75713f9c09e671397aa897176a9b8c213069f56872a6812a5225fb132b6a30b094e9277c15bb95e0163d6ff21cbfe56f470c0c7c84d15e19b329cd451f668b2ddc079ea976691ee9dd936587dcf340bcd82a53781cf29ab192d74d605452a8fcdca7668d61eaa0da516fefe0e7f6e5313e1cb1d97815d15894f1324343176e62541ae0c236cf781ad5ce1bed0738e2fd4bbe5c9a8e747a216c1c1ca9a5f317b26f555fe91d11c277bff6dc7c23e875be6ad5e055f0e82213bbee3f768f8e18fe79d3c971b0da9f36f3507f83bc5d2dfee54a6bab05fbae46d182be4cd98502fce1e723d93e59f8d92e2622b39641ed45a9ad7b904c4fb53cd2af31fbffe96c699ddf2783715bf56df9d5d7606b9a2c7c70c3a66a4a8f28f0ddbe238bdfcabce9e7e8444101a313b8c22f1b91c898ccf4042b6e9735a2dfcad538ea00e217d23af4951cef934b77f63674b9543f9f3ea605e850cc3047db7d3ceff716139c027d0bc63e67e8b707f14a62e5d16a16331f6d30e3063a5367cef4b1ce4d7bea3052fc4b98044ee76c9947f4605d4802a48ad6047133d202ac4c4069ee9444af4ec41cd262d5c0928f9207bb749117109d7630725db34cfbe0df5fbf1b8a60264aa0fd0b87520a92f9e772dea51acc2362fd33fd5d52ca6b3c75b55d6dfa1c23e945534bfe55123ad7c86b5657cf3a88c02572f4859f63481569061dc8ddf4ee80a6a5e249515421bfb1bfddafcdac00d530593983bea674be158d8c0021885881e34613d2739537db8ba9bf651e65a0b89d7a83e64c0d7e3167dca6c6bca7f0672497a2bc63a6dec25de438cd8e4d58db48cffc4818d12b5ab71fb642e7ec3215e993b2438496ffabbe1c6064345deff5f5b41e2591e24c8e008ab673e2cc9b68cd380ab1ace98214aff7bb8bbd5ae44ccfa6c7ef37f6fff1e18738bf539a3d679593e78a5ce56728359f3bc234bc092d9f03008ae3d6abf43a7e49ceb2e709f3d805fb72b384855be5f40df0845b2fe2bec1a64eff14a602cb470aa1710c961d361fa64cbbdf78f41ba94ed45e8c383938c84c9281dd621b6e9c5856854488533f5d4a1b41cebb972cf115c1ad3295e2354a58161ebad322974b8d80702e22686cbfc60c41799c4bed7da5323958309e134db5d2cf43d505de1f8adc02a40f8ddb848afd88308dfab1ed11e6b1ec7290a22d697780f324956a1bc182f6505466ab2cdd0ca9174078d66c3763552d42ae7f123a8c3e2eda87bd2d1760a2af7d60ea4380a8a03ec2a79253006372ce3a61101024034b8cb1519fcfe899a1a0cc2de4cbef2e8a97bde4378ee8f49103e8718af1ec22212372d355740c5f85cf9b3f06ab0b69009233812850cfcc8a914275e1ec259fef046ac020bb321012da0e1aa8fc3056177b02b09a4006691531360809c02c4f29569f294d38b2671428b50c7c6caf5904f8d6ebdb2138fc1aea8e31e2a82fc2e9934473cc13142bbfa9519d4c063b9798ce5fe7742dfb331519770969733b391718f68bc3194c2442c090a2d205bf47e250cd06d63c5bbe120e819aceaaa6146a0d6f35364f02f0e2adb97b568d7eaf5a9ca073c947afe75715141ff3c14862462d8cc25ea49ed9eae7cdfad96edcb4d58902e59306930612aecaf32f71d15ff4189a5c169edc36bceaa0af61ed8c50d80e8cbca8ffed3d360ffc990abae5891a3530eca04e8566155fe1c9d7aa9eab6cf31efe775b031a16327f9a08ff0542dd4781c7aa9bf0489b27469c72aaf576947b02b9aef7940851aa2714421a71d8d8e679cee0789c1df5a2f78acffeaab3a816e59083f69a27587afd42eff200ec9f35093a6a93dfc3a3c4bea5209230a8d3199fddeb6b0b7828b551e425c176ee2858a8e4f8d4748e59ea0913935d718ba29f1fc1f14e26cb2150390e250e019df2a55cfefd25106cc13d1066c8ecd3d9f1194742688b85b9bc5f8a9df1d2e23bef04dcd93cae3cfee1f905ebf7dbf41d1281e57bc53bbf2f3b2a80f1ca0af8b3734da6d66ca027f1a1f2251c3934e9a986837466d07b357d9fa0a6cc5b56ea1f50398b5169709c5a50f0ee936311f778bd3812b6a9ced4a1d698495bdf8b2b1300cab8eef1198df3e7c82fe800a671a49afe9ba882c15d7a321424c4602ccea39017b49f4b4b4ff3380c2b668e687dd85e8f04b2cbc38cb7ef074ffa3052212fdc7c89c32c14e9e606176d1270873925dc63cc326bad699320f7156f1657fc14c440e18823604182f3c8c5d5427978756eb054a6ad60dadd892e97d543ddec2d083683093d7eb3d8288106d54c5f00325348cad683ca3781bc792a0169f5760747530b117da29bfc5e6b7c9c2e09a6065eba92470204577e23e409928defcdc0940f98e057191ee5bd0870d94ae63a4b79c1146c5e0828c6536801932f6e107246145e708bb4c3f20d237c8eb3f2954d8b7fba5c5365c15e37c04b617980eabecd945cd0f573175c2b56b8adec5f6b1cdb3710b53f02a97bf5aff8328084e14ea16a53eaa58bd8e287d88edf59051403e8b9f932bfdf3ce3cf6cf850300db90da378ab68a722cd7eb4900ec0812f0fb235f0aeaf3a3a7c9b1fd425db4304cff3613a49d4ed5369e97b8e82f8d7c819d4ee3cf2b17170514ce116322e0c6ae74add15717d1d32e561c87da3f74350de46b70deaa296c3869c2547d7523a9438028b4710f82923aa3a04c59f365e2f21cfddd60bdbebbdb426e39734f91ed891abaeae5c99aaf7048f046c597f809ef0a401e22b49c00f636cb65e5cdedf4ef52affcffb7d9e60ff7f0ee70a56db8fb4848a7e2a21a78b7f43ea20dc59e8ab2dd5de05c1506a1e81ac185412ea956b5e47361914d18e2113747d8c148f50ffe9d24aafffd6e8493200d2388228b468304eb981d0a8e57357606b6db3a075eb3e6d726e8042edfb728e033d863614ccfbf2ccacf0a250bd7dc3a1c21a9b6f88884278cb66d11aa42bf50bc956fd5a8fa4810b65d752e402b5841b8f32b3ea8c9ce04749a23874639c306e3ae111b0a830f73a6c6e1a36151a8d6b75a0605622ff33d782c7efa71eb0349d81a7f485e39905d109a08a7459ce66be692ceb4ca5367359b4f3729b4339a388b0cace4540f66584fac9d0ec47d5c3a3810c1acb2e8b6ca6c000a5a82ae2aac624ef75a423816b50463a638208abe1a9b15126ef43cdff514f6f09e8832054417d2ce92cfbdd78e772d43db4dfd2a5efc4db3148c8be7970dce5bfee729486da6de5212bd6665d3e084fc9fa5f73f58c000eb2ac0c11b0f9b51fd894f7648c7beb5daa27f1bc345ab5577533d165ac7c61c11f76d319e767845829bfeb98a31e34b492d56e6dd4f3826727bde5e645599faf70e78089b83e7da4494bcf52a4a9153a6dcea0cbad39a3267971596ff9588373063c78733a79b6a7bd544dbe995ea8de28ecad09ea6c2a8a90c69e7ac85b141414fc2e09e940f56d632d42664cf417881fbb5ad20ff60a4c3b87a49235aee3b6166191a5b4a91b21e84bcd7d4895b30d0878a48c544b3278b9638f774fd2b951854910964315ed23506be0a1a5e3dfe37de8719c7ba0bc0e50015c1e4dc5b8f00008cd50056e2293600431c98ef2d60ad9a75b59b278b6119d56981582e4b07f9968336d2c80e8928c1be99ecee168f831640c10be72f8bed95670086a7275bc7918c5d2bf2e580d5f2cbf380733eb31774f0c717b5ed5e9bbe4a22ecf4e9e95c5796a2c5502e6f28a9adb90f5e393a5a5f0ea40bb91e0bb8e64b3442a0f8a53e5ad3700eda9bad70df26ade85a83a4dda989eecedcd67566be2914dcd3605f9221d955bd79d7fd8a26a3e223ecd6c38bad457e1ab80d2ec6bf6d2fd3b1241e3e35cabd691b39a10cc7f4fea46b3318a5a04dc615dc08da03727f6cacc46bb768d42f3ee8a076913d804ed65bbf573176cf8cb8571809d2ef3112f507c44a116e9efd4e59e03462eadc3ff2e2f8e77abb13c5620b04e064b174b02ec39249e83b877fc6bfa05364e52c0f02fbf0888b6231f22ae0e567be33814c5b9739de907bed1f4c73ac529a0a650aac6932c27d51bfa0c5b2a4ac506d17f2fb72994bbe9ba07fc02f5deec4b789f9415841878a6201fdda0e02cbc418613396f64ee841cb93fcb4c686e3e57401de68dc2ac2a78360e5c19d3a5fa1d9337cb30a8dc0fe677289139ae5b95fea79be49c38bdef9cb65057a9bd88fb178adff13b5372c39fa9ef25f5933870cf098264b1f096af40d88664ce15ebad52e23312f91c8480d12026c0098e31b4b42bd40a0bbb8bbf593ad16a5da62366964942f5d3a5b24775623bcd025d5b3edc958fc312d205c2c14a75e75960f0d64011ed43668c2683b4877132f6d7749810ec239cc137b8eca1f96b6aca1063e731ed23345ca0a01034f6944f73f7f2078d135266f51ef9ac1056f30f192a9ecc236bfd261bfc0bd5be1c6450df5ae7fa1857ef41a9043625e17ef592d9df01c00d21018928c73ef7c8b64010c39987f2e831b3817df950dbcda94307f13dc1ea48df13bdec5c48aa67e4ec5d31fa9f4e836336024403354e04e0859e13ff0f10f4dc0d9f232c7d381c2e2271ad34c11c2be52a3c7ca0c78941f10c51c713f43e4b3146d04edbea8e1bb65ded7f27ff853d299fdd6794f15ac99c52c758a13c5daf0ac01468811c1d5c5d66d4cd821eb6ea7ac78db1d15f229002ea2bc085c59a498aa83e51db6e96e5a3f4f09e9e793a51cac2c23390183dc8a1144351dce09e79e8c797916b6ad5d3e1d650a1cc32bf3f66a2b654ae1772901ba2b480fb8158b1e8c28a7f2a4c981a8b0bb8502bbe2c9bf78aa97eaefabb01edcd17588b6be359b78dd268c6586d436475da9a438f569efb086ebbbcfd58a9ffa876889b853cbb99f78fc22b7c220878262251562d6e0432faae4fb9ddf1c4840d5ec4fc36d838dc768328d77418b0c9a00b8910a11f30e0c71df0c6cd9fcd5156a7b7b0704f21ffa6ee86ea0d6a31b337c24dede421197110c80b3c32a3ff7d0e17081d23751604b129ef55a03987405f2d0d3349c49a3d71085583469cc3b23bb058ffac625ec09024ad81c1325bd53a7adef728aee5b3cf0b12b12b90a03bfe9bf7e3f7ce480799e56c598bbdabf1fa406933f1f318c2f58561bf983b2b8e047b9ac96f1c09b003c94b48c0c51a780e46568598437f0e5cf072b42c3da911e3f29740b27d8210168d2acd1fe8f7168725b25e660a053a2961b269ebbf702c4eb2072b3c698ee8c416257c8f6ccd3dbb9aa89bbcb9e3c65d9fbce84faef452321c4f45d3d7467a12ed33a3d93d6b71c9c6f9098289b44dfb43a3175c0af177dac6d17f05014e74cf03b98fe76378af160c6d3b25fbcad570c2649b09a4774ffda537a1d090e12a345e9c3d9479a27379e9c56ef9a93b3c9c3ee1af660090f6aca463361199db28f18c522412d8fd2a0613c65887c14d192854b619d9452690674d27b3dcc66876c3890cd01d55ef1e41ba6d39fcb890a3afa2aaaa25192c70c104d844ae63e6ff43a18e7059e8c21062b2cc4bcd7b0194c88722cf966d4512b5cf33e56b8cac982dca891686f448b0b86fb1abc7c03f85242af8ee60d49c0f2a6bfd8aece7e706c1ed77efb40f16fa82540f9978638466a9036dc72b2d3a983a5230ca83b7044b339677940db05effe2093fa2b571349ee1eccd16f0a7047abd4bec81f4744cd3b3ca262bb96affa8a7c3b9c3c772ab31575652107164906575d4ec6fa2360115defc2214ed31a48da42272d8b71eceb3e16cef1290885fcfc1ac8aa031e4dfdadd260eb7bb839c4ccd67cf1519ecab9cc63284eff6c7fde6a6005a39896c3e6a42fdae5abd312b33e401f1528ee83e3bea7654ee91e0d3c6883c6b731c1429a8d5f2187f54589b791078b8bff2b930fe3cd09347bcbdc5f555ad78632c473d07e4689d91ea2860fa7d31d190f6e59fddeaef738b6b4fa06de3d8703baf3f7aa324297222d9330d30601060eff88dd40a16ab93ba55e03386b9e0f3951a42428e2c97450a4761ae62b152c698b99e6e1bd82037c850096e2a6b67c3d5b697aabf56a4b267626df45e87fda67ddafc76b60583675c56228c17698d704558bffb746be7e1f11400961f5600d90cfc3f6a66ca2ac9f6784be427b52855f66cedab00ab0d7fe69fceac49aecfb7a7a859113106b804bd1a2ee696102e37c4b90d8f77b6ad5459b60dd5cb3444c44d5a75ec006b83b70b043f4f3e81b974251fd8ae7ed2e2d3d4e848f7352ec1dce9992b453678f57ec6c7f106a413731877f1c3e14d9de2d83d3d1137140107d9880d922d56f3dbbcf14229d10733b09709a29c51095e1d1aa268e01c8518bdc2670a444a3c5e328ab83a89d88c12bde4299aa1bb1939b79d868ca4855531ef38bab4be445c15071b92e83c030d4916dcd9dd57e7aaca1e374f051aadc5d64b3ade7063daee425e35f019ee9ae4c5a500f5ca426e2497d431f95fe00225fab931070b394270f00c45d6f66805f9eaa5ce824cba2cbf1c70c2cfa32125cc7fbaefb40c7e9858b8bdb5aa763846e50525efedc0a40e304d99132dcef32e077295564d9db52659a35318e4630a4f71df95f6386cc7ccc6a8d040f277a4554333c48d43353c0721ef87b6ce971c03db2496a357d9243f182180f94acd1972ae16eb6f45189a4c6e3312a49b168190da3dc3a1a34dc89fabc2fdf6aad66121f1bac887da6908e384a8f3078d962ed88183590d8486e3524b5de8f1504b8d8f82f34b149e4e59f3e92e2fda589ec0795f374932ce4216bce6fbfc4002ffc90ffb146947baea1e88235a0ea097df234f2b5e60b0a7459e0a146ee55ea32fe13aa43303759079cc1cbff4931e0a49969062ab4b4df4e99f3fdb89a1ecc2b1110434834f085839e4a3a31c21110562212195ad8f5855feaf1dc6fbbf4555a490dc21589c019272dc269ba8f8942e18bf9d4409c511309f4f45b264cbe1343ff9cb3a1296988367e701f5f01f8dd32901eeb776a0f9c5e7ff506dab5fda5f57f1d1a2131d6f39d63cca6069ae4650c43b4e25a85d4c99783ebfcae85ada10f19b364d838315be522c1d9b7376b6b93dbccb0d51fdb6c081bfde5e3a30cc9a108d16f7967bbcae48377a9439d0194590db34a4fdf327873089fafea4e69f8f2b1500f7d9f16b4c530d522ed6f532481eb09fed3bae49c55aaad9f27f9bd7cb7d967dd62941233145aa591fcf32bae30bc4f17ec5420b1ab6b19d84923719c421f922e8616c4c7b401e2439bd6ba07afc6730d5635683cac7bab0f39de765d9635c284599e88a67876383ab1b3b8f2c394efed5c9108f2e23c913f8387d005d550fd3ba846c8e39d7c997b32a770cbd97f585a21714caf72356412a152c3b45289ff10965c4e92577b7196b6f608b2c30d4b9fc5f648700ee8a90ab0eaefa771a8610473f8a8dc531b75618b90b567d8654b3867587700835072fb1a9a46973821c16a99adcd2f62e7d88fd72f4db5a199e043645398fcf817c1760d8e86c10b3f612dfa96a56e63c47131f209c02fde22","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a711fe397f91c9114cac71d3be9b8dff"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
