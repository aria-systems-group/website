<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"1b782c609072e05c7a021fcb126f044313b2621dbbff2e0b8d90318f535272761c544d731929566f3801e83242d2ca65ee81acfb1e8a959289c2b29792bbc93595ef5cfe577b73bf125cd3d4f62b56cb5be1a6159920af67c38a79575a25175e32de2fba4b3183a9ca8c651d64138843544ef3298bbf24638f7081b7f85dbe2550e2944198b561733b3451625fbb03fe107d80a5781b2346be598a5a2d2b2966a805179a14f504a201750a9a66b34fa681563fa882d79644669ad1da03f9a261fcb7f02326f6428e9aed06f3f2c685cc56e11ad154fe17eaa9de10e75927b7a64a0eafebdec5b67b2a2fd311bc3898a71e683d44f1e9646d3fa4a9d556b5680ecdfe584e856a8fb1c5d253182092e1c0dfb7fd0f16e0759cc76186739c33ba81e58b43249bdfbe9764d1b392c71679679cd14467f66371a3226c44bde8f6df7c1cc85a937ccdecbe2ce932fb3b79fd97b60d7c32cee06731a30e1356a42384d38eaca314d5712aeb723e5066e21a2f00a98765158f116b488813f20627133ef522c8cdb83c49299cefba7e8af81c11810423ab9b30a83f2a8c54a3c6e852e5aa1c0fa3cea58ceadb288c955ddc0e3d250ec89813ad8f6957ae4b09664d6134ea161bb6afe4b01de8110c3d9d12691a3bd35c56679a5923c8511822e99f5fa1988358e5cfa3c78604bf8f65409f42ac78114d9010313fe30066fa05bd9b778497ba68ab859c660bbe068899a8286b77bf2e0f246151798617acd30656056a6283c0b9e38d91b6e702a02e0729d81732845edad33fd94ab6b4f73e932363b6b7d7173eb453702b74723a4b7fcbd8aee9c3ab046ad008b043d0a591900bb6bfb1893f297ba7a268a0a2e1d178565e1e40b1c3957c1b094bcc101536e63f5adfc1b5e3c9f42dee0d1f4e88333124c3241419d308fd0f54633c26216900467cc78a280d0cea1d199272bb9ae7b34af1cc03e9c9c89b7ab73b9b035263b91d93c46b3ddd856df35e8aad33e205666cb218ff9b43777fa1b1fa637ab49cc18ebcc9c1b4f963d75f1dd7655c977ae9fe17120df19a7b5e6309fe78caa29a22d21c1b177c5df8ed718f1b57f2ebf430222f29fd01a7c73e47cb749d8526b6c1f8438f10733ef19edf5d7ff5804bfb464c107d0b0e383945649e97b50c90967a278f36e596ce57aec39e827c76393dcc212e39dfab5d892502102902746cd8784565247e3976b2305566c45f408336545fa25387a6c62680bc14f6a946bf6c16f2320b6508780852b46d9cb3e0ddeedfad09d363c8d8efd8b4a40e5886b83f326ca53b136225b4bc6c68d77b58c9d5b6cf759af85f0df800ddc6bbdd65d7e98b1fc89a18e025ebf7af78844b46d64c2e6a11a65feade5d35b8db719bdbf93a3ff4988deceffa169fff8413503c6716f62e8905b5bd0d7bd60b4e0ac8aad6d82604966fefc22570558079c41e715d59ac538600aa88483fa4dd8d111dd26cf894a8310e9023a6c9a0ae673dbd128adf48a0f3dc6d996d09ed92ecc8e452e9b573ef51be00b630fc7bfc478818861e032fd6f266e71266eba07794141db954c27ee9e72f1375367a5f18151f8b85f7f6c93c61705b3058e6dfb726a78019061f4e132fc460e800e98f94a0a0203933b1d057ff8b0db6f5112da37062171f035b592c22a528b880bb78810be1d205e6044403bd5b397aad2db122045474acd02d53679f32dfef99f86bba8d4c724fa976a1637b79e1b850d213f34cc8652b7390e030f901f2c442d53ea9a310e4eb90cb419b4f949b4741c3888a986d8cc22e4a05af461da01ba0de1aacb2f65cd9c1166b3eeac0b672eafc0cf4f666636f9c58c18e455697eb1749d852c43c377a95edc6c42e83a2949782216bfd2260f71e6594b578a6e8ff8c3c8dbce5812b39afb05cbbe9b9ede97501cca446b6ba12db8a9975560891878b8ede956dba82431d735f4e06d28b721d0ed9e852875524286a234c95e44d9943f8419c2ff7e06fe9170adf72622d074249b1d35768ea226c3e7c8c0641388a5ffdcc296da2fa78d20b057c2d19510f1520dc490f7416570bde58fd75bc138929913cc6cb0d087f1d8e079c36f785ed150ad6f6e637eb435b2af1103b39dc633fdf097c90e4aa8dc021cb22e9630c6359d979d552a4891ca5811894946ba62c09b8993b3e14133922af174524f1a7c667d24cbe10475a96bacb92475a556b97c1164ad447108d5449da042af8c38162ae4c4db2b87e592676bc4ef175eeae70e6e9904524e68014c5acd6b1419a4573f9458028617ededcbd908fc340ced4f6f6e2d9a8d28c80a707efc019e2c1e079db3d2c68b0e8cf10133c7cb3fc38d3dcee30d04b47e0fd333ec58de448b9bd64d2138f09f2dd0373248ac4403b37f4819e2772998f3e6a3a5e789fa908212e19237e3f8a5dd907d3fb277a155c2ad9be0439fac69e9287cdaed66d10ba43e9f362c011695a996c6f92893ad826f00f001129106e2dca5003f5b1f8636685eb04cff92cd09e4b56d7acabe0f843fb31972a6b9bffad8cca009474fabf11bb3a5caab6972349bc398fb44b7ce26849789fdeced3433e1e0c960235a4757ba3e0089b1fd4e6cb03430d94c417b7c8d26d2c73ca308702ed0888dea9ddfb7de88b3cdc2c10cf116f2081dc2028da59c56eb032761015e5119d316620ba48325929fa36caf1295aa78b9eeb308891fccb3e45628088dcc787cb1e843a6b21c49f609c88a18e4a000224c2f2dad087127df7139c270c8fca33131d9bc365106a72d1c3cbf495283da84df9c7547e4aaba90a1baff9bb314ff2793b843812036ffe58ce6b269107db277909a234715d8873e594c17d834285534f023c1a7919754abd1ff5f6a5dd644533ad3c6ca1fa7e24b75544211d7ecedcede7ad69a2fa124e50659bb484ef28daccb34ed8895bfb183d92cb4c0aacf485f090bd730d97330e81a72d7c5bd501fb74aa4080dc29c975b9e3f2f3383135a32974048f2856e738280d03053268c9a23970eea65290cab524e4cf66d92211c6c7fed43ef2018a16445fc0cfee5ddb766387563bda2ebc50b44da7f0db5805f62f535a797c730b28def1fc9e7174160dab0a37d1ef4f047eb23f1d75505bf0f37c84c28ccac53b2ff898ce06969145f6ddb8bf4f543ab2296e2b271d396de763c323ed61030120b1f24ce9bbbcfc864b8f2c05a37e8022a80ee260be78a2692d1cc32ae22970739f690a7c8a17ad6dd12693cc7df537340b34ba9590d6cc01c2f7fd6fb37a9cdf0995fae64231a7ffc521207d6f7d4b28e7439d237cbc9ff431adf8a3fd190c3be814d8a16aa917039fd92e6a6f5ad9cd57df0609e3ce4df3cdd1436981f2b47afa0b5cb16246271df1cdac1024169eadd829cbf8d59821ec09337317628e378f62c472c59fba6dae8ffcae080f9936eb3229d22f24bc91a3955318b173f976cf8a0962b2c81589d3c52f726595183fa59102f10fbadcc38f2e9239a220eee1de95c2513db7fc4555481fc851568ba40f66c7a51a42c977e1d6993633b33b5ad4336c2f8f3c2fe179cdaa8b780f742eb9a768663d3050a48d08d8c3cfd20716c5519893bbc175167c0a17060dcbbc0b5286365d023fb8c4c59d46603bc710522b13436f42f8b7111201aea739ddbe6fa2fbab216036ed35b66868c05930b6319e52d41f310cdc8f525d8b522a4cd98e0744bb9669f2573dfcd2ee561bb73a132ef698b7fdb4970775bd62d4afe45ce7148978f81d5a9589cdd7508310a76ec78bf03f70f6bed7c0ed9c44e6bcb180f4e7403992b791fc4c2193c13250774fef24930a44913d451c576629ade7deedb33661b619bc8117e48d42dcd56cd8560d36b5f72d4e60b953a3776a7461800bce62b31c475dfc51902948fcb142e72889141d1c49f537abdf9c62963474eb98a8a10c8b3419e3c4af26fb429c2738a86878a8171bcea6d6487a62e73fc91692f618ccb31375418b75cdafc26a3b9b3ecef3db74ae1273c5034672cc95733cd843a011cc0292a2579108ab867e0d57e03639f9964bad6d8e25f912d385b1193fac8f2ed96481a6661d82666ac1590e7c4ac6212716e3f14cb85a78815e2756cf284bfe48aa3dfc31d11856ad8ca57b05a01cfdb31708f6e73dd9765c16af50778cca73035ac75f5021b036ad0a239cfd8e09e091ae2c06396205d154ceaa818b575efef3192b6292aea939ad16d7a7299d4084e7c8f470ab6293426e7775d3e43ed6ffd076527217156b3a9943fb008a0299c34623b1a086620a479275f8e8d173d9ce9a7227f1d286f6ee9fa234f45945ddade231ecdb79e38f1bfa742c469bc6ded33c0c2b071c66b45a8052b5dd3b679b6639077b5fe8e732255067e87aaa8e5a901de6c58a5fdb71550afe48a59f1c3deaa075260cd70f6d48ffcc874fcd55fc77e1538573ee8c32d1e0c5bed652dee45b3ed7b97580d486e308234ec6d7f12f1782d6a9c4a760d85b76029c86ed7e26924c27afaa36e69e9e238dec74c3dd41b53ad449b14be3297b91675a53c0cfb533aeb2d1a6eb048b94d7b7339b3c5fa59f03148241c949e85d5c443a0dd1f87c9b6be61f700f6a3575b4fc36b30df9c1ff6cc98adbdc892387ed74769973c96f04b9e0862a0ef1567fb9b3f8d461ced4f5ff87de7e55bd2783b7f42c0317ccee0c59287e0356c47eda79f57fdb8a694cc58f0a106c40738a45df5a91f4e1d73029bcb53d87721bb9a5807c9aa1b90950a50143ecb84272b96d1768c42e105ca77c4d9618b9b0eab93de706322884f4091b3a5efd641a9587791fc75d4e51fd429aa6e687e5624ed605cfe58346c243e6e4ae2fe6a5d2c58a939ff33947ee9ff758b12a2626e4f15a4a4f27e4481f5a323cb6307b211c867e69635621d29b7faf3c4a19c75b5b132b1eb8d81032d284d45e2dbeb51986105b9cae37df5d70c0a12730d10163bc552715e5b5db85d21818a5498a5c50f61b1229bc25eb0d79b012b7115a537c94bf0ff9b6ac4a6c84186f2475afe87553735458250189da94c44d02fa02ff19f274e946e740992464afb5123db5cfb665e46c5b79efa0c1a718252ea1d043857d0200e98a4287c6e2add5abc2801f84a5157e706174284a0e3738934b50043d09b9ab79d76320f8d75d439b6beead44e502aaa2b52a8b32419a3e359388d38f8bccc7ec5bf7bf6249819befdd2706e03f650eba45f1cc858f52c357895bc8e25c505c22ac7353eb44c35e4fdd6a71d9f079860cf9856ff18c43cbd6b0850c4c2f845a26d649714d2e4a5939e47bca73f37ec9ceabf8d32116db320ba077fabe1f59cb6072d068ebd89af23e113523c133393bf11b302689892589c313fb70d936a1b822d97d15dca569e8b14bfa5471655cfef233212fabea4a447b59d3e904b724d295a6e444b67c8d7bf333da34f0c1cb065da26760cf3360efb62e3941bb781c1a522baaccfcfc6d725db5d01c4b62a4b940ea4b1ab7247598c139a15a551a4481106d40ec127299683d627856ede430eacfb5065dbfb9176d52b038d1f80ffdc4774440349307e3d9840e8d77eebfc3be0b341eab2fce8444ac33b2276bff2745339e4db90fac7f6a1303b1d1db268fc7c34c882ae402c050f64af17f77947ae06b42060776096aac69ea167f383711f47a99f63c576550b4a101ac9dbf9524ecca33707926089c5081f5e23d2ac6766123a9e49ef934c1039c205d676f1eff395280724f4cddc26771c90355550b6ef5eb1083dc5e5a60c52795bcfee8127fb8d78bd56ff2f129063f947b8dc9fc111b817396389c16b7606ae511360e0e35d36eebe5472d37cf4d197d7dba70702bfc6f3605906b3e01cfe230d5c7892e25bc3d063e6bf52b5d7970bd21f4751517a87c874e52de043a05265daa4df3d0106578e8ea30f468a96a689f3f9fe3f20775a3b07bdb403f0fac21296381833a75ef4ecc69b57ba0d20313c4076c70b4a341ce4995598d416606641ce71a2df9c7208212a610baf48ff1ca8f73a5852e16cfac01c1a4fec6536f4704f91e532d795c642f0a4f1ff2d10d29c7642d2c5fd672c09fdee3a6c443b3cf5a6cd237da4d8b60aca491780daba25d2e925471a2c1bbe0927e3ddf26ba095971b0bc1bf0c645d0cfe6525297fc42c891c59668b452a420eeabfd1c1e9bc0ee5da4e7acda65a25ab204e5a3be37e3fecf90ef50f291997553c52601ef61c03ef157c69cb69a8f357266209923f899e25cfa6237e849a0d446b7f5b1999dbd1477b568f1fddb61b067a3508bf317ca61cd12100b1be1df578e4d7e06876cbea0299a19e0b52b333b8e330a6f4295904b215d3d503bbad6296d1e33335567410086331fea5aa48cb2f185058a4f43446c1933701713643c3771adc2945af8bb9b9b78a339be707d8f0bb74411b2a98d85a9c7e99a463919048af4b8a4bcd893a2ecde217a173fa156bee26cd6e511b1a951e2d70df1f48f7adbef4ba5c518e9b2070a6f5b6945583ccfa569bba9dae37072e5d1e4d0b7ede187d61f839571838ceb89c010a1469c715b3d6ebb6da865a33c1ffe6d5d583530e063dd590dd104c3917d5fdd6f099db55df0d8a8263489a4701c1064be07985bb03c28e1492d3864f10644cde016083e424fe5f510764bb726050df08821bd219a3af824b40633160499e414abe12d18d3b88bad0b2605f5df53cf6f39f46420f72fe5c6f84d037fa93941d3284aeb26c020e69eed6514386adfda3fe934c0c39adb9650920cfd4005c44cd6867233543851db8dfe7a3a60a4fe9fcb68ed62fc2604240f20cf839e40c56f19cd3c8f98ecc15ede50828e12d87ae6d7eb4efd70a1964d02ec52587546e8ff67440e7fb7c886ea55b41cde4fdc866921611658a5535421c68ae0e038c81398d996dbdf9e2755b47f2d3fb01cadf447271109751ac72fff62435a6c2a0a7d3a7bb92d060aeb5f71bf29dc68c6b04782d6bff440f62f21391a4c0f2ff55620b55b1428bb9c02a86ac71c95e38d5f479c129e3550a08c6fd1d70917e0a15b6314b59b2c2a1c1f79ef5a1be942a46d7c561f51ce659b2b6ad1fa184e1f20761d33dbcdc2d47da50b7cb3daa9f9daed8750620e9461a58fcd0e63f2ce071af7cd3ca084dd06aef094ce873ba66f44361e5a803b0d0eb8bdf660d7a146753944ec8f464ef04e9171b76175ede542b8a9b65fbf30ff2f2bb560df89416552db3641d42deb43d1702bb923ee5a8e16fa215499a17c88444efea99e54177f67f3b83236354d2941d9a4e17e4d554f1d14d199b7cb9259ac3220e190a99df1eb72fbabede71d137459bd5d98926d07e461415d8e7bb025e866a121ea9a7f4b013ab6d2b9efd387b2323e102df6aef501260b255d5e0b4116f0b2607aaed591e14cac439a5cd600bdc56110acea8d3e7a72c3cf9b6326b783bd0425f5a17b55053aa143c325b94e61625837378f4950105644496008f7dc3de3801b8df72dba1450464265b867f10dd1f4a50e705ecfbd0d367a1a84a7ca8190bbb115af6d783d6afd6653552c87926afc4088b6a7373f6da8fb3d9477180652f87024469fda65614cafc693bb355767fa1d966a2addebd0c7a52c2216bde3842780844ddaa9cc80c579a6709e986206dfa62b8f8f9120766019547359ad188313f6163acbaece2847513cb56a559f5e91ad944d3c2408ababb9f4522ad31d7ed68df4eaffbe420982c103efb5df48e22c571bc01690d45997499c55ce5dc8a1b05165407c1a1d71c167fcf6dc79dbadbc1b578328a79d08509762bb9d1750f5ca90a4b8e7f6ef038609c7c7bc84a1f3ae8ee3148e5e56fa98e7be0a2b869ddd2e649c814e1c46e3fcea2cf08df05140089925a3074b26e5dfc6bb976c0f47c09247b8c61d0e7cc25a33becb53c9647bf1fe5a4a03013caa75f63d8266ceed320b0435e31b0eae82faac4bcb31bc97d2e4edb471ac3beb1f3d8ce40fac208143f0eeeab1c3c23a054f37db91f50230b4f2c07031638508380305ddfb2b2e9be3ffcd8a545872f5af790e15e1c4f07e7fe685f8ccec47fec60caa48f1c2f40fb46bc265c0215cb6c0e1c40ddf4d19270435e82fa63b4eb1bf789fd2806ad56fe03151d8b66703a1f1f6e7dfdc40bb1f07f351e62941fdd1155d355b4c23268086fe4783e12460674f167d3590883174865315c8b39df225fcdd7e9bbe9106f964baed9cabb181eb3d2ed4c6b40e1a44d744b618092c14631f27c8ad64df36c6d7efd23291177727f30061f3dab82f8589e57b7b6e8288ee8c51476bf22f3ab940b78a0b945c6e03d3976ffaf9cf40b2e5672679bb8cde2bace8d3a2ff54d666bd1a3e8e60b6a569c85a4780ee734da2ba21792e52d4374608affb90364d28d62399488399fed1398db83705f2d2556f22fbc65f57d9551aec568670833fad02002ef0c0a4e4e970cb27f42504a74edfd58b22d14eb1ed3a8be937dc05618412e4d422ae0853bda6231b2fd5183eb58b63913195ed7bbb36d3531e730c0a6c74ea7e16112aaf640bf10db8e32386ae82b796ed5bb2f8fee0a0dc8fd46a9bbd010f2a709dd75f904dd895bd791b166a41451991e1487467f1022d64f531e145dc1d2fb7e8f122d9c48d8c91e1d1b9b1a682c06f78f9f5d5afeb5d0f67a542f4542dc059aa0a72074f3fd98207557716957ba385b7deb56a7c0eb8adf5859116748b84793b8e3ed250b30e58271b9c96e8afbfe3afd6620ab75d1706c10cf0170929d3f714a5706489e8289721ba45302413cd5fba01f802bb889a3768c169daf5c830cc807974a1567d48ab1f1ae7ffce6d4229aaf6571f60f86ef47606f7d6f618536cd2af2d8842e3243a2354f7a476bf21e739a0857800d54c267c2735cce8529e8dbe19546592039c524f8e616cdcda25d7c9d31c0ae3abe9f507be35ca521aefe4a00676fed9b5663893fff894056d7fd7e79b5bfce628c892bb71869d81d3ef8f153e075c9548bf6757b047e0e853f54b676383335070d97773c4ef60c1e5fc248d0526fd079c92b556fa4aba0396aa8221c985f6fedc791e8f50139bbc00a4daf385d9a734c15fd5c8739ba20933fda3c79a72abe73fc53aeb3bd9dab7853c0edc105f357571a3954f3ba5941fc8a10d8ba191d2ef0e45de842feaa168c3690126d52cc67057788648584dc8b303dd1c401de255e666d8493276e037e5df59ed4bdd6d8b707a6ff52b7967f6349324d036fff82ea42e734a01c162e89f2505f54c2c95eee3c83486b8937b11a7642ff5e2ee5e6821df70c6499a9c3524f8a750b30bf1bee795ba749c9f63ddd982bec94a33dec24e03a02b1f2c63ca92e4a5e0e404d245ade3a1a5ca685bd17b960330e2006c53b6dc74dbf5228d4b1038d0674b12a950dda5dc5a29e7e848230f88fe8c1163458232050854fd50225f6e59bae90c0176da917e89ca9c580a3c91430c87a7dfa63eb8e3b10687a90d3795ef74cc900a6d670ff514809a246b5e7a01d8fe3608136f3a4f35193ad391f68a6a5e5ee158f107ce7a6ee87e8cd1138a380fc4a058ec4b172d69850eb71648b4bd287c1a089668c8f0e0841d8851aeb9e206023b4b93b6e66571b49cc028aa9ea568722057a5d4bf80600e1ff03492a147962e6089ac916b62042e7e23aad9d32adadd8488cd0964213aafdc1ac6702a291b2aaeb2ae554a1a83022209f60fd420db270e2df126d71b6beab5c7801ca3c0539af5f25a265bd4462d3ff77577e52ba74f9913eee43960df1301cb57ca79bc59a674092978e68701440ac3d324ef8abd84b0e7104054e7a774eca59211a44315b4d46efeb3584ea7e46687cdb4d3bada8f07cbacb484f329723959b28584678c0b9ae1712f0dde9660df71721f64180159b1714790bef9bb20b01dc236275851b7a205398f475f1abc7bd90cdd625840cb4ae7cab09a6694178bd71ff2a8fcf1a81f1de189308192e1a5e32f03f2de2fb5e7bad8dfa70aa52d930fd120c02da0fb63707982a5567945bae288f47bac1156daa09e8c8b4497884bfd923a1ba1946f79c1c619b18a884df1fb74020821be3c74698002529c5160aff6ab67ae42f0ea7d30dab78651a21c93cf25cd62927e201017371997dd1af0ddd8366dfc8191eeb2e4bfb2462617feb5d57a0046b00caafb143941425517c3813c6d33155ca401a82b9e1ed5d9df8266d9575aee58c489703fa6bcb08a48253dc4e2e6aaa34086b54f9933a826235c3684794f1ef4cafb5285bba483c7cdb469561aa86496f78b90787d96353dd8f6e847ef9a4642f6930d4e74b3100be3c42b3d6f6e7480b1636524bd366386b9ec1c4c0b0284af91d10b19243d077478fac85bece452d7336dcb35b27adba668f65bfc04ee133431e22d3a3c46fe8528bf5a14bd1cfdc3807563a284ad5977bc2e973b5ce7306239f39326b139336744f44d1990de4d30fac9c55d6dd67dec25a15016608b9368645ee132646025d10f77a5a697e9a7e2eabfb1fb4587da25c006c46826f4bfe79f106706e7c6dba8af5c8fc7cae6d471d72d3d9aa74b0c09c16af1fdda6a45d5a3affe305affeb5baa685e00df83840fc8caed1ddd698bfb80e86f10db6ae28c0e352470cb4bd01899a9be234f9d4fef1e35ee2a2e0a0fb8a9dd1dea26c9833618a86a563b77232c2a4df1a2098893537ac9a6e031c164a289f0fb59bcb71d1a69ee5ee7a234d6c1707cbab6b9e30685d55cb97c231f472911779ad9ed7d3acdecb2d5d40edb675f707433b79de9babccde57441e3eb290df728c69b61e4420eb2716f76e6233623055c6c006ba00f77984769e2825394f141c07304e9636c823b367a5da321a34d5fef86d441049803f3703b037f00db46aa0ac665c56fb9ddfc24091fc74ae53eb9ed2129d4c26605a9f49aa03703c0b37c44e5f557bc97da02adb7ce7b72c8ae3f341f42e36010ad9afbfa428dfe8245fc4c596f30c3898a268cca4cf06e2b1287d2edcfec28b0ac83a5a3648221674063d79220d77dec96fe46be1f1ecd42236d314faeda9b95e73f69ec7fea8d1f310c7f2c2fe267b4f513df6821bdaf56f292be7192104ac0a8013fb6ced8c9d91bb4b53d91dec8f4a59e92ae87a280f3c535a0a5f8a85a5b9b379d66101453525342a35308d691db3d7740eee11de9b14657f70b3a0a9098dddb617c14a83df2d1baed764156ca594907fb74f889e0c3d1153c48daf3ccd342e9dcfea42ffee1352b3e77f9d8b8c3d5ec1ff41826217c5dd8aebe45db22022fdaa0f135cf0ecf14c70fb5342f9c4a9aca1bf7b73dd2e48fd3927e43451a54766ce67968d39c779dd93ab68e88074170542047a174c2bc3d77b7747b749b62c9a2740bdd2faa987ea9b062cffdf25c53d00acbc2b153875b40ddf2efe6dc835378e535bfb372cf90f35ec1b68fc68e45c4055dc93d9aac1fddf9d9d99e7566995e6b76611c46b6c244b7254d066955013eaa7b1520229f0d9b9b83c8f835a581e3290755230600a5fa3d79a8d961f1b160386080f80268ded67e6b3a8f6de44d79ecd2ce123878c4107958cc6161c3cdb9a9abf4b112cbfc6dcecbfae3b597cbaae0a7ef6d898a7a536e390a789ef8478d41f37005c402d557ab5ea05dcf01d358789e460088e0dac975cb98749ad262270fcacde7f5995f80de56aeebdf0522df0121acf760d6f5ec35122b344ed498edc0d580ff4ee933618d5e8e13ad8fde6cdbca181b017f0274c179f6b532a88c0a0eedcf170ecae04d0fffa22157e495f8c903b1232bead1e2f00aa2d4c0812f75d073bae98dd78aca9dd1b5353216c5c7c3f175f9ede7e85b3e30636b33ecc94630c3836ecb0ca2b29416ea213f7bd90a899c2a216891e589477bdd9fe7c06394d7e3bd20f80a080ac90aca66807830d0937fa5469cdd8afd45765a9c42dc4d41d9e28bbbf77e750e8e70bb84814ee075c0197961d86efa97c357e5a0277edde7264c50b3a45266eb501b6e8680f9e02bb1de73f53381cb25c6baab558dd223be3ddf057fdccdc049ac7aad2cb61b2539672d1601dd76db6d22a97c7e27928a967c1a9c73c34be31a7e07925f1eb1a1accfc85c945eee9fce62f960e6037a5ded91d273a20c8cd0ddcb087edf79d4c62f5c7e2bccf04eafacacad50eb2e452894ac663e86a14907bfbfd1dc0c3a9fa1288b7d460d2a4460c95aa3313c0f8a8dcf411f7a27aa0dd4e794c27831db99a4465d773dbc96f5b048ca7a2879413234f37f15ec9ee92d91e8effb49ea216401d4b49366eca102555fb4474cc7b571db58171a90e8a3d4ddf35e6bf209148bc3a9a1d3ce033dee6831969f2e4bd6883927d9af7f4f9144c1ae2e781244ae2ca498f29e57dc1a6852bfce871776d6a811504c72cd9faafb7526802b6be8bb7c3340c4e3ad94cc19e17aca850f962255b2abc89a7b4004978cd6bea12ac5ca82a2057fd2198b5a973caa50413ad1857389119e2f4c7e65bbef183bf62573db1917dd4ab97339451193bbcf1749ebf6bf0e9a1b7a053c7186369eeb5ea7892c91663a09d060ff8b5c9da942ce5c82141c088a130c56e3c8086a913388690f1d9f287881725594286331bcbfa18178ca2c56ba9dac8b0fb6b15e812ec944ad47533138073f071316ce275296c8851b375876f643a5634a480e7717e9d0cce1a765c3c185debf3924ef2325e33269c7e558ab1a73f030f09d71faf7746b391ce056bc0207531918668cc5601b7d1002f29b0f520552b07f5ac674dc9003cf7dd337138d9f06926df277ba857af2900087f39b8807ed21a3fa9e68d4b51b52f91f53ba6ba2911b4091619655bc2575f84bdea0b105315ecfddc40e1803729382b98f0d110e287f8551750c81ef6eca3657de8f1c4dbeebbae9148e62665e0cc2a646078e5b2c9d08882dc88fe3ba60159f1511876e09a29ddf726f3d1f576547b3bb12e25449bd1e8c13bed0aef329f4a040c800e000c001c601c2e54bf45fe6de7341f62f9e775026334ecfd9cb73aeece92620dafa65fa0b806537100dcad187f5de4a2521079c3e5ba16ea2c9115b00251fee9361826ec564b0e6075b5099e3a12f670f50e130225875e6c3457b09f3ce8b9de799eddc080db0bdf74fa57c95cf9f850e24a0521f0f20934d83bd3450c81b6c2803a9c28881b2aae25b2dd0a8ac98a80a6f631b031f53f9d3ac8de42982970249a5d7d92a0772dcb758f75a9cd32d5b2a9baf53c1071f65bbfbf4c65f589f011706a8e236899c1b6bc295b9821e0ce67e6c42b48b3847fc276c611d69386c7ee3274abd60815197a10cf5a03beddd8647391933541096ed507b3db88c2e6d6d2d5bdaeeec3ef7c12ab1421e41144129c499b47227c8b799b0fa527267f2c334772053d24815da4e0d4018fa573ef1741baa512c73cef249400daddfb37c8719e25fce08c4e2097289a71b4f15266ae9c9032d4283e2a62ba56c0b8f119861177b68dcff266b90201bd1b607f285fb7b47e467727ed88323465af9cf27cf6bd7cb8fd4ae130a051cb687dc9577e41bab416174e7b3143a897c12ed43daeef8cb2b296f9576c8ccabf17fa8f3aa8e4df7ae8254b3a6a44b177365957c237620d7c5d41de145315fd2f692fca1b892c6205b3966b11ef4bd86b2ce775db7f1e4f4ff8887441cdaffc6582a03ff1c70c4f1ef93fc85575355d188db8303a125943f18b65ebfd7dc910727f61ed0be85f75ab6d664827f250a2e44218f8e6aa5534064ed158bba63bc959f10afbe97534125ce071b22b923c2a73a545492b0be63f847c87e7d1a94121d90f785dfa7fa178216823557967e1125185332aec288a694e84fb0b8775f0ec4f71d9b16cbb51435a5d782477a87c4d80a94b46b9045155990f245fa301e4c6cf6ef1f66c7405aaa6dd1e0c5c791828aba54ad37db1ec3c524ce1043ed529bfd9c7fe098aad737a044fe1905a5c82dae616e6926bc0a0a8842bf0a46640da1e14101a8bf3986c9545a520b1938db02e731199930915f593769a2b5098bc88a1089418c29a6c81c560eecb5995ddc0c3597469e58184d6875ec8226bee19873fa75623f62f84c2ccb41dc70ba7c5dcfa8d737a65cc0608837654ae4fb733b417ef88b576df0795cfa4ac8acefd3f12506005fc1e5ff511a7d171c57d8d53f745f695e83b764715c67516423ed6465988b27d5bbf85aadb58bcddca8320f63e2d656a19d7c3ded5b68f1138c9cd319273d5a1ee1f21c5cde2cc1da44e7849652ee8a5af35a6d69f0111ebb17ff236175ba44b4d2f7a26427264c0216a20946c54ffe404929df8fa1a026c6c1ebc1ad2dda9a9af7797167577e8b4a291e6bf46ad3000d86af5f4e0c18913e4eefe3f29bc89ac171dee21c0ccff1521a35d962d563139e7d562ae22f0b750998d5d05d3871535821ddefd8e734274b2e7ccd1385ae9a97747bea9ed1c3b3011904f7724630f3ef6167192ffad14bcc6015e5e0a7269193e6fc762b1b10a0bbd533ec3fe21131594a1c4d237213cf4a7f848e25e19a8b92819def1b3b806aae55b198e3b53037e978d20cb254a02a940849a5eaa28a2ea42050aa830bc3d37b5842c00f2c02cff8129dce9e892726cfe5c2c63740754152e44c7a3e28b3ecaffde8e08c0fdec6989a3c9e990ce1defab009afd3e2d6e37a7a7b91de47150917596ce995265cba9936a640c95dc21a09b1dea3ab82b43cca49ef9fc7f133fcdfb2da1574b729f74ba591c08a8dcbed5af9c01b6dbaaf59125fd10651bc5216f0ce599fff6f039dbb18af2c18952ba3df0d96dab813147cb5189271b6bc72fb041c63d35a1cda91d32394c3e9b7f8f009f0d67f662b0da87a08b5c7d91d9efdecf14ffe146df0aaea5680697e0f89ed193a2deffdb70229f12380d8c9282f335df6b4ebe0876b14cbcea22f7c1c524f3db9362048e285353e733102de2cd702f0b0f45cb9c06eba01979da338ef61fb1c7353daf04fe34109ec86b23961f663791494e2fda134d4e437291ab911ae7e2aaf5126ca33206f6cd322644f8bf79849542a9c9f86f7b8e07edaa967790fb623c7a995251cc647f2cabf7acc9cea9ccf0281007ca7678152bd45922a573ded9a77821fb6f6d13e0d530d7e8019d5c5945b9e70a1ea813b629249df808b94b740f5f32c065b9475ae46dab6ece32adcd3c77e961f7e757cf38e4cfe42140add02d7c1261557316b0b3c6cbe1ae664bcfa3388ea00501fcd47fd592cc938eaf45a234b19e35c7d4762e3a866ea33c80c5659eb414e121b78069e147fc062cfcea05c1e9bac63b8abd8e6e94affa628e82245f83e825b38257954e2d4dccf76ab474bef8a51f6113074942dec0c09901e8de04419d6718b33dfb3a03572b63a794557bdeea1316727fd6b7646e6186d9778a674b39c099fffa74a567581fca66192a928bf121f5516be61713064231404d333458516a7625b8b92bb5ff677b3fc9c8fba3d140e75a186400595fe523f3df03947514dd27d19bc518def6d997f77c734ae878197ab608a4e49022e42a14c846c0bd79e26872b85ded99ccff7ae9df8dc0615cbf0b1cc4be6ab97dec3d4ce28632ac1761951bace6a7bbf6120710197fe34a0bbad36c225942d55697751250cb96ca6fe09f98937b9efb1a18ff4830e25f97cd73c456edc59d199d96c851a48f367e3b5cb1589572f5c9fe1fb3f1ccf37bc731eb062af994fd3cfc7fb4966e124d26095f66a47a67c447ff1729a263431ceddfe4a5a83eb4d80e0bfc447ca06d156076c22b6f8dc8e7697e99cb7b7c29387507f2cf56d17185b00c640a3b3fd00dbbd4e7d0b2e10bad75bdc2908088e92fe05df191bb55ac00f349b5c2b4b5f1dae367aac13eaf1643a485e4f1007f580e30bb00fcb2dfa01c2488fa2eb076ace008ef4a999e1247497c01c50b60a81fe43e82a7abc58f8e8046e4aa51c00dab914c85ac2a16f09ceca71ab32d1bb597f583e62cff1c984210acc0d207b50b4d7b6abc401a3e1b6a525e64c32a632eabb3f781d5b22b92df6850ac1d400856177a6b82e35fabb384ab809156dc2a066aa2707607696d7d312778da209a5ba3311d7556eb47bb0b44d9e2f78b8663801e5adc5ae9195e995d4187571942d9d8ffb671666615f4ae7ae35dddc0b667bd068d0edd7d365228696e6b3758e27d16b3bfc5847f8b511e8ebc255e4cf74edd498abd417acba0c80834e985a2684b62e0344ee262a35e7ef5629dc2de83c004fb33a665906b0e200bde750bed1e01093cc5011787b69cdc508e493a0ec8cd82b15a4b6ff1c4f7b0ecad8251f85bb4e939096cb0130532182730fb6a0ed9afe3c43cbaebd2a2232301c81fb27bbd3f1f5b01ee16b72c0f10f97d1def0ae497ee595627e806cb8e65b21d875ab97ee10e871d0ac1924a0bc4dbee8595009eab1d19c24995cf176b2b1f51968706a08a6886b86afd400e53a6421d253537a222c377a53842d3983fe14c255f1193f06a618e58dda7c69f0da3fb5ae23b1d410c2aa1ffa8d04938fd8f99d5786aaa49cc8240c01b2561c7e0e6cd26a90909fefa2bcad2243cb565babb249821a45bd4cbfb95d58e573d307adfda99a7aa54a47627edc9de17f12ee758ba0577c16789c21017d35bc34fe92bd798a3154d330d4ef8f77f286979b2bb3d4be8f043696b5701a53b32061ec0b5b557e87b76317292ab285e8d81557a7f0e6c14fd2744bb8913384f907f179ebc406f4a7fde02b010861bb4de249cd41f1c205778bd91203c8f738da8f06609f5b859ecc90968aaf557534c163fb742d8ce54d2030fc1dea510acbc38c60a2b3b8fb6f6d46ab6d79767e4b8f9b52b27d266184d2b0f8b2b05b341d40be1dd640d01bd868793a10ac0e0b13f560ac58d2fbba3f514dee8a7cb498a09c8d728ae107bf7f32932480bd542c008fb44fe95eab3b231fcc7140b1a9152f9249e41549383b59f80ea78f6e5862653cff043bfecc615b6f3eab7271d5b26f092b85aed5b06281d6b56b0673941cfa8e198213e8fd5c51003365fe920078fb9df64220504ee12802eeec2119469c78d7b5e200a7989cccc44d7f8e49a069b3bc0fb8f05cec6942d80635b58b8cbd92fc1f93a0ad1b9732d660366ad01898a5d1651984c9cd4a5c0ee1caf97ce885a332f2e0ce263945feff99f1aa08332017eab8889a596918547e4a4cb3ebcc21727a221336eac9114bd9698b9f2f62647dca3fb2013e0ae7e09e26e51d732620846954376ea8eefcc821341ded6c3458a5b7699b8c426dcafbe43f38df05530f5e6411543561fceeee28c9ee9fdfe239b9f40a931d77f4b7e3847ee2d46c30cf1b87e3a17ca8cf049b50a21e8259ff178178a467bea3868b4b21fe4a6a8247d270abe744d2c8cce469f8db608d587ae65ea77ccc6d6c1611efd2cb74b9fcadd319568fc6e8b7412b28f4c7eed14e21abff3b0e9559e40fbd4a1b0c9093d23dba588aab8aa76e249bc0757f9b1d37b077531b36d5a39a0f026cff8cd5d126cd27591e62265881d382f4164a2c631fc96aa2358a28eca3ddc312d2155a6f1ec60e4cb78f322cd701008138b2d52ba986c1ad1724444a9780124b9d27921969cec2c69ea1825c5bef9d9f5688b5bd1c5482977abcfd4f98176e55f036473de3c65ef79df4f806a46a302b5c9b1d1ec79774a4463df592e5beb87a5afed55f535171e4922511ece240e00b2549cd13f02f418a7174571ccb41c538d5700b7e85391ebe0da1fff0a8c7bbea820f87dbcdd7f32fe907ee62999de03d96d1e1002cd71e713c680ff0a34fed33ee737f17b2c9990b02ffbdd351a08698b3c87af78b3a6893b32629fbf7864fd7cf1db9a055c211b1ce089565afb3d16239d2b62c280c9afcd1223fcdd36cff4bec5290245542b4e8d435bd3b90af5426fc4fa1e9243d35ff8b80a8e7b9699d80f3965d4aaa591bbca09668acb746f01ce4a90285667250de29b1e245a1895cbb10e6b8d711c33299dbf96b57857e5b0ed9b30430a9bba86cf4a0246d56483c49ab97a8a84b3ef85992ef253d7e80515bdc7d7f36ce21b2f9351885f04d1324afdcf216d1fd4bb9ea409b5acffde78f7b6c20206287058f6bbc66792abc2db67e6f66831a52a6bb7896c076e5dd3cd89e247282e9f33e0b4c281ba77ff3d049d037a33a9f9124f94ac179f600f3e36b7a7a6bac9d2ae46f2391f93dc0c65221a90d2f22c8151d45640845e63e92862c0d6f3842dbecc162a045c44942992859b9be0dc64b9b88afce2e5e7d7ead604803f3e1af7c5bc80f90955985e8ec5bbe192bc2dd49cc5d0341e22859c571b476d0eac8b78d127d641d5cc4da4f54c92206339629026c0d3789449c4fe8740c7aa61bbb03d60cb33d84ec930733698b4782451db4b17d042032c123a7a78ca620e87862f5efc9aa857fe7696ae16240eecc6136770bad52e39ea915b0bb931aa5259baf5b1cb46ee20ee7dbb0e01b2d215ff0da14d6b915e5f872df2f1d25da792854d8fdffb23030a44d862665d1be5196172aba4e02b04a2eeabdbbb088126bbb779135a90335c88333dd7961a04b36ac006d7586d9941214d4b6199dda1d728dbee7eca8acd2c6ccb36ef2c24290371ef51952742ef15710ef1550d271e96c1d444db42556670d499e65a8fa2c017bd6ef509d0f9843c9eec8eb9900252a3b0b2573c4c65ec9b112f837c8d7048620750e1f5dbc24bdfeb1f3a12b057fb11c0d3d72ac0a439e631a43f0fbcec23e397ef8ee63188c663c37d7636e1815a9fe20b4c13ca620cbf00cda8f93cd0a1b55c028fe9f76f0f93e9b59c426908407c114ce8a8a155d4b4b7f3200777d9016538c49531d6711b5f59f3f798f7a03ada38c138154aa4cf4ba7d13a55aed0fb78f39f93d8f031a23178eb2219021e0b9445b0b4f3bbc240e4be65b6cafa624beea55d3a9497ab9937d835911f51a32dbe972ad714eefe088b0a5f7a8d578285748b47871c08a1a1fc7fb96a44a43622decd915a66d39fe2764b0fd80ef11ae81ce3b058a35ea8477c2c920275ea46b890d67aad75d73f9ec52f677421de4cfc3ac6165c3498dea5f79780036c3c2cdc4f66f7b7b72d7afebed58c908eede173ac479668c1176e90c13c4194d1a94539c82b4d408322e0a4eebfeb2247f4130d8c198407286115c48b44fdd746fc21da60c525af5b2133c0c21c5af8c76c06e6b9692e8139f1340f41436adf5d3ac40630e6d37cce0203ad661927f65adbe46b782b4fa73f6faddb6f5e05d710b516ad977b2daa4f872c5fd45581f8fd66c15","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"ce4bb1ae51dfb57e84cbd7bb4aabcd70"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
