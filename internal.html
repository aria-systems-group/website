<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"723f22c839755d763f3ea71fc4507e56f5a2f9183b2ea3bb2dff5fdcd13e1fbf4b69eabf6c6143ce0df556a2404e225ea73e0f27c5393d37e577e1da89f51ba128bf479d4756aa59ebfbe3510a1ba499ebf6cf2789973c21706a14d20a8f4e5ac801c2a8a57e2c05f45d4b4ba53bc9b12cb404df9e47c760387d3e286493c35e6857c67dce3710395cb501e625e23e76d2017e194905873c491f1f29308b3222afa517626bac787f5f0759a04805ea97c9b45986357f294e1b6ae1a69ec1515efc5797b0cff209983b8766c482d92528acc42bd7bf16ab11f8118c0927122140f09cc6d01feaf8297cef6473a940a94182740727cf91f8d34aee699111424c8b1f3d24f861d82fb8b05f47d87d00a2b7b2ed8a421bae18d968f56a0a66dad33774b2fc7ec0cb51f4e55e530cd12f2dc674542049168b3b0a7aa38f168e81b4330eaa2cb6a37f687101e933866d63a70ad4bb108f223d540b4fc8ea798b0e9ebb32783a86244b061ba96721c798836ce3df024b3976782057e5445a13d170f94cf6f4dfcc2cc20318c7dceb919e9bcd937973fad216cc85ca0045817939d56ff140930694d53db29453c5a808716f69cbc0cc9244f9c016a35028db1b6deccca07dec7db85f9be44fc5fd0019b9c77537fa8c41f2566ce13bf74dac3ff7947936785f2c5392d95cf6d183eaaf987e4ee8e9360b0a9e7b9e175946132350a4241b11e30a086c0ac5f172bc01595d389783d0f02548058665c4c7a10684a2a598c75b5df001a5bc7284d6d7cfd4a7b94dcacc46c15ef74c09fed26ab35d8f7720400ab1269c1aee358a5e65dcd3785be9c57888727e90b1429ff42cfe5f8f46901e87c995f5e45548b10ea9897fc2143aaec4daa3c15c642221592a65b64ae441fc58bfb472ce0cc8b63900f7e06cd7f39c9121673b696bc9cf459d153c49cc5ff7c3661b727284a6e9be0aa4a18ff1cd027ff6b7fa1e036e9d07fa6cb393d419e4ba6db9e8699f23cef3a970666129c5bb61a39a7c6b57be4f4d9136a681f380026aba10b8e010996e8ff25d326cdf044c809fa96a784565ec63253ef83f3de3653ce407b8e92fd5040d9c46322819348d3c66f4a984841e772a721d0a3df8618dd715d6c973e2d862203b1295e42256d277e10286f7b7aeded7d4ebb6d1d60d3a78c60ee0acec90223ed18e09c0f94f52c75c4fcdc581c67f7ec2d8de369bfc99e2b7ff7c7a57cf08b23844d835802612f290d2c6487048bca1ef6353893547ccbc67ed34745a91ccf83c4c4942880d9167e78a51baa2e5c2428ceebe90f83516757f7a5f9cd0955a6369554b8c3595eb12a87b4e190038b581ab0ff3a125686cdea8699e8614788240e01075fb38a22ea4f1ad62f1894a24985ed83f00c23258b94aa33561fc1790c8e58e967def0ffb9cff7599a644fb325d5243df0888f22256387af0f5a8dc8314f0c92bdf8d0b00ae38b611606cce69e04b072ca383ba5079bd2b60666fd68327d1bb04c8179b5f413c3c8e46e815156e88f731846b1111e3a26492c670b8ca2e43e9c470ac97adf0aae98b6952310d164e6bc94f72832f9465e1d9b3dacd0ed2fee0d07ae6fc92a397f93a1a0060b1257ce8b0d50f5aa2c5ad14025e12a7ab7c07a5a868c65c094555d0c524da595b6c69e0f09d14b5f38156b2f4002d876a9370761d7cea40f370a5328309a79f0ba1a184226346d2a6fece532077c81f877b7acef12633f5d720fe5410494a4779f7e7d764eedc7584e23df42cd3a96413f18421445229f51e35970dba78f9c4aa9cf8bbf4940126d0152733e31657a6a736a3dc8d6d550edb21657ddd0671d2c508a0e9f1d02b497be7c85e25a1f809ca187ce8c9419b70947f2e1f521226ae4e7901b9a2b02780721dad6a5067165806c52c038311bcef6542a1eb074c697aede81b7b65348a59d7a8070daf461a235883f4f2832d3d730afa5c0be2400f975ffcd67e7ff5b9691f7b93dacb1083b8c9d60d06ff83c5f834cc047cb82f65b56edccc672d68a1f587bef3f3f7ede75cd05277d2e094a62c1dc0c4515bc5d010f3c2d1aaf34b99fd05a2edaee623bb5790c58e8780d3343c9f89a99e070651d7bd1eb21a3d7e1d9b6efe3ac4e1947b4869e0ed253a5d852ef1ea56481f6cbc1162140950ea953bd577c68de3fa43e9119745a3338842b66ffca0694692bdebd48211ff6014b3575f62c1900f846bed7a2948140f702079de3f5ecc518ba5cb208240b7ec043aac3bec469d952e88d6c3c71d356c124ad463fa54705a783852d2f756c1801765c129e2fc7d79ed9eb93c4c6caef8bcb49ea958b80204afafbbb9138f3ec3b29b3ca6b8d39cd8a665c69ea55ae3dde54aa042f3b6ac7faacfd5209a017b0bc2b263b34459309c1b4a0907604064457934a4a2fae22a056bb4df74660a9bb761e8e2b086d372df0081c23ff5fe9b9ce1cb3fc4869ea7780023d7aecf6cc272b9ccd3a7d678fb31245cc83b9a65945f0d9c90288146b28a18c15bbc6b28613c620bc1433239311db0880ceea327c295133ec9ec54e1a417e7015e1539825b4c9fb0efc9825fdd3fdca652be64aaf971658f9cca35ba113cc0b9aa042ee40edb829cf4040a774918655fcac4ab261db55f94bd96384d4d5940be22a3cdcae6cbdb6986a83e0ff1b80db5752ee4f3234ed03a7461c69c23e763dee7a128e688def3103aac1696790722e8208742472bcd89e46eb4e1fb2fbd928f0ad1058438f31a5ed28f441995c763767e4cfc7fdb1ee28e097ed2e2a4a7d336ece02c7bc54ec5daa0a1bd45bcb56cd228303ff4e2e58e460891165a6df61c5395dc206a7da01a32e223ebc85082113a75c40bb93fe3ed9c7b07237f506b9ce128d063e6a37294e806876034f6869f046e76f7d8645be305b848fdc997a845b407ddc01440883977698f72051fab96e0e1ea567ba0618e5ebdb63dcc69e679244af148dc9e16781693ece1938b65a838bec9b97de6396305cdf96b02f515bb09514ef5d792458172c4b98a500193aefeb942c1ec7aad23716e06c12c97261776b7aaed8b640ed21745e58b5643bed39d00f86241589b7aa4b41de0883abca0ecd04b6311729942882abcfa03878a9dfebb575bba199dca6d47785242d4fe6aadc91455483b3b5782df7673a205954c7f936e8eb5c905dc2c3e68ec938b7bd438861098c3de4e11228413815e2deeb79417d64cfe310aa5a895c5d1598f31dc71a5eb3ca0d581125f4cf1c30b01d0b036d9a86dccb0c6cc82da1e66c41e4216eabcce70de657253a891dcc11009e198185b372a9f9dbce45237935a6797a5551a9c5e775edaea06f8d1123ae9ada36e0823a0109ea43965b32bd9f193bac768ee7aa779e0a21118583e78d437ab8b446b7d498619c3efc0b382f295bce5be773e65f732d31d0cf011bebbf9819747a27dbc9e2ea1e1be9b979943b994722f53c6c8d846c032d7c37d4d99b49479e43f7951d23d31c38f28aed9d85bab0a7595f1406f998092938f03284688e79245aabcf63a0af550511113972411dd90b1ce8ec56cbb642aae047ba9c2a1f953fd4d6033219cb1233201e6a839a7cc0630072a09ae5598771a20c7715668c191248e544a3b42f4a857eeb759f3397aec04cbba4d8d12c825df02a7497ee2352b925bc4f94279789b9eb4cd8169a3b9c0eb3bf18c88d30d9aecc4c299ff945b4443ea6422dab2ae58e4bec593216c5e869272ee30cef9917a7789378fb791076661cfd39be84ed3d95448d22a3c327a9f556cab1454cebf2195c611773df01c6892d47ec40e63c5cb7a1ca6853e81d6681bebe2fd7df40db1014d0aaa1a971c0139a00611e8d72b47676eba9d061cbb348b5326905baf97d705b1756fded3311901f2250024516dca8ef61cc28cd942e3ef286bd79218e219c9f5c87a34c7bbe479e8817babada749e0975339484751f4c94ea09324cdace1643d9446c1b1bbf017e0acc08e294f04f62733baed260984f9418f1d88d919c8c5857f44eb0511e319d06c50e2c2822efda96b11c0cb4faa943678cbeb0d013f1f77758d7be0f0cb572893c5fffa1ce629820c578b1f8aaa20e7da467d934aa6b7598d18470aa2f41fce22d787490fe3004aeeffa109a866bcbe363cb1c4da54396d8692e5b2eee44726f2e6b5bfc80cbf282c0577d4bbbad98b703e2691e356fa11e1a69a24abc7146ebcbe27c76cba908b0629b574aad7c80db0cf88bdd7173b14eabbe84be6732fbfc7fb2949486aef2b568e089c17c149527cd697740af51376fc930e90cd29afc97622889f31cf630130763c13171f2e443155eb1bcedafd6a3bcd0155f0f945c2d1ec8edc7452adb1317d21a797a810b2136be44119e253c3b08a423ca04d434d40763a09b6025c52a58ece12859b21f114b6fa759b17642af9a03b62bf069c71072a561ca54ac3323a6a9bf20ad88736dd5c852c4829f0b18ee7c95b8f2f69c9dfe652dbc75830187a998713e7211575d3a2845097a937c82d40c2e8fb39ad0d388c0ecf1dfc0b8d894bef6843454135def305983e6de26ab21f2c1876652a20e08f8893e06998248f94ad4daf495fcd7634b00a4ea9a6345d8761ed93c6398501339ad44638644abc075e16217eccfbfb3f15dba77a428730e6daae0cb1d0330a0638b2be4bb1f4c79629d51760a77a7cb271bcb183d5726c7c829e1f11ec482b50a76d14a1d55228a6af144b8c24b1d2b1a18439f0332f024c5da06d3b2b0b80ca115b2bacf91d90c7069779be7d1a9fe19f76679e8ee995743a83a26b1aa959ad38bd1a3860f7dd37a50311bf2e511e1143ccccb927dbb4fb34d6a57659b1ae1675c544264992fe0a02638710bc11c1a9e83d2fa1ad1acb7294c9a1b34a2668aa54b167c4d4cdd369980fbd93e73c3803adfc542189c78c09ad6b984a8d68351e314ecffcb3a2444fb8e945be6a8b69a54134cf55816b960bec1227b869fa6750238115091fc52cbeac44bd088aa8a6c040036f51a985c5166177580d642ea0945436723f11914f0d26300c9da8fff6316f70a6453caf8522289757827c763b85845ec98caac823c1ada59f9b99a28d566d7260f2e00ff28700c87bf655ba572facd9c673df19db34d3345ea28187957cbee72f1b34a71c656c8607458412560e72fb3e5a382938cb238f42b11feaa784403a3abb9aae4e7056d8830cfde8f1389d6d1dd1f7289f7cba4b80170cf703353b6da6a898cf7372359b658269900ec875b62954d4049116d54ae68fed9e5363f516bb1b3c80948d9af7dc10053d0cfda4472943e5fb63a7f8d5aeaca748ee217a36a88bba466a494575ab8a6c397938378aa6d747c6f0810532e53d1f085a17beda4065a190be3d3138d0a3aa29fc42c169cad0a9a03c80572178a9b507ea481910b284eeb6381d229a40791bc0d023207bbe7f476ac2ee342f7826d390e32824e60c8235788a9fb8447520792be2bb0453f84954204144a0771b7cf9f0bcdcd627ff7a0e2a9b828a032fd78a8a62a654458b235f99b0ed5dbf0bbac92e702aba580d8af1144d6a317052d862843b1e61337d3cbe22a01746d420cc546e221458fc6b147d852b8feeedb23be16377e7da1322919b5a623e0348b8654d6634820adf254bff6aa4b028e8507c5c77545c1886c53faaaef6d91861ae800c68e491ebc68aa1c46f93305b21f7c3e64957733149bb1602a60b0aaa9de663eff04a3ffe30cbc872d8cbb79333df27d0d0c7b4fb57ffa89b15e38a277052e7fad80059ade1991845e36091df198e087cd115ca3607459133ca3e7c1b809d6fff544023dd28855fc252048b7773ee219024732400b47f9f016d613e4b94fd6c2a9166c1b1583183b18fa85cf3be5b12952c5055cea39f0f50485e7a642130bbb5192a8349a3310347cf2cae98974c429ca1f3b9760925afb78fe63c7e9649fd5e3b8a83098643f23a59e54e03fcdde525fa34c356844a5f434f94f01d520e5c1706756855440f309963a238f5f094391dfb781c1d7bb254fc46da9e6d1d37f79b894edef36485211554104fe3fbb33200eabae27b6dec577eb811916a60cc75a2d21f57ddd415c13838af8903213e8dad8f88913a79aae5b8aa3cff3063f52ffaa761720215ae14ce2af303093a081803e7c826c662cbf2eb0b95ea99c5743be1d30138ae67b2ac48a101b3425f2d4b12a7966089dcb1038066ae9b33d95dcabfec373e033b28493e2df3d57a5a95c605a1ae75c2d0f71f8c6919414670d8cd800d83179be32c467c538dd06b5c38f2e4421b675899a9944a731b94a1c5614e0b386672af93d6469c89eec065290b71982b1c18ce3bdb69edf8b5df38a9428a8056f1439921d74859ac1d8a9205b75268f6de66fc3c4d32eba2279ddbcb57234ccd2f961469ff97673bdfa8f70ddec29ee1dd96a814cabfc61ebcba80a8088f405612c398c7ad00cdf6ed1a565730367ffeecfb6c5150d26cea8bb7203cbf93c52968bf0254131dbc0c86dc9fa7c345ffeefa891f75221e587d1906f332cc0e39fe2251ab579b7817dfc502855a45438f08691c49138af74770e93b7719d8283b0fb8172b834b22b0043fa81258ef2eb8c55af5531f9902625dfc6c55e7434ac1c287db13b6c553ff2df8e7f3a15e84ee83586c3e4259cf01b6b9d7adb509c2d2f15d9440939f1e1eac1b90a69a6b4ee6acb9cdc442891f75ec9164a23fb1439289c47ebc98fe4ac767eb7713a02bd5685f70a903318fee9e47d6de2b3db30b02bbdffd04a32857de876a498df55033a64f4abc867237683b8d3618bba8ee90ed5063478e499847b8be20d017de0a7c42ebb6ceca113f35a5ca255c6e7c7d994d4974b5fdd940bc8417bc6ccd0cc6928404bdacbf410a0e183e29bf9f77683c2a4ef8a8d3bdf8fd4249bd10b889b3c572ea68b5bc31666d05a1d5a517b3928d5dd45cdb88f1b0ed68a72dbd6fbe9fb33b1bfbe502d900dbe5db6d7e48ec79b44755a626b7de82635d273b72f8889ab85338f15d746e4038e28594565191622ab735864d68a8c7f1653b8cb8aa49d20f8d89361adab1a9c9bb75bbaaac935f64cd33856a3b11160f51d2447f0ceb608ed5d626c0d8bb4477a8d3e8504da5a4b50db00b04ac68f20fa815f0baf7b257b4ca6ed9d99a066b2e785b077d31879cd2fd83337517d2614c38c323ad68c19a395e189197f4f3efa28d0e040fd1fb9592480e7a7b201324ee8a1aaddf0b17818a3e8c0a28886b8746ae1bd0b0d022ec51021a33d2376dcebee3d88c09eacade47a934886bd03485726acaab8706b5225a5d4699ef90f4aa1f34e7eca69bc7f1bac65c30ebc81eb376aa769d5042e81a63f5ce7b2e4da4ce116dfae717c5c982ac7437eb721ebd7ed62e1a3f98eca7f07c67c892d430a5a125076fa66ebb11a60da3d79e23ef1053040c74247f5d87fd5f695b0d269c7c36926370734c278b3b1a42aa89a4d1b80971e2ec57de290c0508a043c9568b2be9617c7d4d83e0e2ba07a1c53713331c2377e3d9ce8d35e23870f8f0ce4dc558215ed21e1b0c84dd83293b194ade7ac9dad72ed45dc36ac5dc2372f9cbb3f6651a3749d5162be1b0ef343a6f9b7f9bc9cc03755926113ec75451019f78c9032c069ba9e12060ba22ba79801cc5704b5f3f91a1ffd96e485f2b4232ea03ba54280c76cbb1cce48cec6aa2bdb7c7cd1deefeb9d03bdf0c5042d0e718cef1317418f63538b7045d45ae342cb022fad5ecf776e34dba775ed21fd24b743dcdc4fe47d2a97c0fefc3f5139d216f1cf78c072e9372c3ea31b24efba925f44a07d08a8d6e3f362ca7f318c69a90e5a98db38382e8080c842b17f10c0ebdf54f5264cbd4ff180eeda358655c9cba79b662bd4a67ddd2ca14c5eb7d54eec770756a33355833f27aaabfa842eae18bc07aca970b9ec0703270b5501c8269af29f91cae7521de2903a82f5adf3a2df08c20336f683b79309ee22e7e93d4e7b496a2943c7a648813b0e0100eaab7edd11cc311a0b9a293cd2615a7d8b27b7e6f28707d1b16e18fb45c7bdb9c210e22389ced6d887657e2595ad2f036c8165bad3f11347db44a8468cdc4f573b7a82b3e66c0f9898be2fb37834c070078d2089624bbe07cba6113212844e327cc6f5ce6f77d693031a73946c89aa50626c0f81e74c232d16ed564e0edd88d381a1601c3b2ba2aa85216ca39bae243de99c13b4a038881686616daf7a27102391e20064cb70e57a73311560f497570faa60351507af37a902c1563aa8c440aab8ddfc8c209f774743c0ca658e25fcf41257dca1b17d3def164edd9b93791d3e0a457359fd044c2264387a64d532b9db1568a1f69a0fde89b1700e6e6e473fc632c5aa7987eef0b56da72020eae61f30917e093d23042b03f297027fac660fec9d400f9603b652ab1b79f77f713a9b9bb806db158a3aa08ad6a7836baf6b4a68f0e93a46c293d339c1f8a479b621d3776d0d9dfa8f036d2f4d43a523aeef8d0fe3a4b5b9d29b8b30b3875847ee62f45c2eac5fdc4e754a8a8c11e426ce49c97afde93998319c13d30ff9d3129456e7ef7ddfb20c960eb1bdd7c8e6fa5e3716f0ef12bfafb05c2ecb02e76694b7858690505e41ab1529f70e3e788d35caa819693c45289258a42b8c7c03059e7b31222b61b3a859703dc2eab18f7ae4a8d6dedebb32e42d1ab0b2831294df5a2b4dfeee6f23e8c186e18f80161664173ffcf85646f71832c54c08bb2cfe89bd4876df0e95eea5f30dcafb5b289042ea51d8e8b8855c6b6ce5c9250edb9204aaa9b26aeecfa30949ad473cc3cd32944a64c4983cb0cecb28939b5f057cc1464ffa5fee10de193321ffebeb833544fdcd3a6a1560cc7e0e4523ccc68faf252d6b296ce851b650e9d3df53d897de8ec254a2a34d190b4e0a4ae6decc66d8f9573d9bab304df357693b317cf4272caec4aacde43a61fb3ab0d17a4cfa42cbf459477e00861a6ec20f1aadd1614cad5a72bb95f24c35fbd9ca48a254e2a79d98cdc38e924bd5c3ebe2e205cdf34caf4cf9cb93fcb8ea38fccdfcded725bbb37008bce8223ec85a2d01da2f458bee495947eb889615c03027e071e1e2b1d5cb7a74f0d04e87076d506546d4663c3241dc45e7f57c56b78f5d124fff9e2cd18b5d2c61ba0324b51c1b5b9eadaef4e4c4498497961c6fb47e6ad8b59ad5bbe4d8e93c72320238bb61bda07c04a3ece16ad9ad84157bc1b922acb6031338dc95c9bd67b90354cf709d1084808723506574dad0b9e56ff706ddb07ecce9b71c03f84c04ff15304e932e91959037dc7ee0e5c9b3ecffd133b06602739fb3b5dac2105d437233ccc8d91c5f0b76f00f5a26b16831663d995701df84b40021b0254b3654b4df956ec3f8b4efeaaf880903adf516cb19a1e9873cda2d3f300aa190448ca2587f63af8ba8dc710e808a5098d9dbbed7c55e82ebe352d3f2ff3a4e60d2c03256cbd3215a9245398c1d9edb6de5a616e4d7d7d93d60d2b52480f888ff70b01783645bc7f37b00b29788a0b819f47ae129ca0e752947cef062c98e75bc1a968ceb8992e4b523f20e321ab8b2b60e4147411aec24f3829065e9448f09174548dd4595161ee5a57c640243c2443c069859f8fd746003b717a3f54938c6bdd4de24814598573431bcb4e6eb4dbe30b6ea6b83556631da225c94cb72a62dd49cb252039a423de648640aa258a7359f442b857787c50e259f85aee998117e4aa18c6621d8e07a805b23810add33603569b815f91c0c3231fb0176a1df2f58e810fcf452532bc19cac14e74f105d90b4ede484e26d9c29267c4748736a160e49c5edd1c75f3ef89411b45971954929ee8b66b875ad5d5006d4f1cccbd7b9e1484648a3a2d73af9de135447c23f43a4ac642c9169d23b4a32bb7551e0d1a88b50f2ab044b0915f0b81efd33e5469f761d7425939dc5fd9599073de1fde26883d6835442a12c4562e65f8ba38eaa8c3b3b1581d76801f6082edf55b99425ce7e9fe0b628d6ad4e301048507e64e9052332dd415bddfa0c21f3f3c8aadfe2345d0d2e48d9fec3fe82afdb89c8d2fce0c740a9c52ac62a6fa0a821ee152dbd53a14f20e2f16511d429d457f697f75c27fc9eab5be420c4afb849699a5693c856c220a5133736f059d95b35b44432b2a751af0bc8fe4288820ed873cc5013222c611244d2fee1c1e45cbc6bce6251d330c7bf90769a4e47bef1be899b0c9fcf08067de6b5a71a3762eb1a5318074e70e71f66f931755971189bb1aa528237d61e284bbf4dbfa3cd5c7c72f93499074b7b683f62f6c4e7142e718238a66b1d0d8e7dfeca7e07399e1ebdbea4b000558aae5389db4216cfd289b7524057ac3379a28b5fbdebfa814e6d2c57f5a0b290393588bfff7350dcb404a5fa3c22496f2b02919ef69d7fa7960b71358b0b8c3c3a6d8ac1bf555bda65c0d262152159299323de48844b510a0d952d13d901d3b6dd0e0d8299d4dbb1e3fd9d009bc44e44d5b1c27afad7df2b8b2c78a2a062454bc12e801936792c14e8451b8515d1df64a51cf42b93f66ad078e0ee15789c52403b6699baccc32e4f72906c7d7243847286d5718963cf8fe1aa3365951228d99ae36393b97e4852894d7c7ba844e0b74cce3c24ffcd4849dc323285e15d31dd9c773b7a60586ab4d4f2ad32cd6b20237c1c97fe7243754f9d718aac4b48e23c4f25d5d50c7e9a525e672ff26e797fbb2e988c53fd9f7cfac03ec73e43247502d21d3b36f3088081a0f39c45c5a6b1bffbc02e10eb169481c90946ce977a5b302facbed97f4f5df68fd6268abd2b001c24916070a89613d0f35ea0fb78764fe8faa9b52d8cb793d99f88b9a12d7a610de5b5fcc546e339ab3fb8e459e787a40799529f9cf5866389741b848be2928698a4b1bc02747a691a423837a2d77a0a7e9ecea4558b22efb86adbd03e78cd1f80902d3c23370b9ac008c93bd809a9452ef18a4c0977d73a52528a6ba9d4893af41cacdbe7157758cc5d4960a272dfbd6e2d451649204b895185706a05f5582d195b3bc2b916c66d5947e2cadc9f0d62e3dfb69c2a245abaf1176ace1310749da1830e9bf9852bee3f44ea637f6f351cd1ada06b2c8718c68ad939a6feb3399d7fc188a0e258b18a37031329d951a2aadc92e21bdaf6572740f7e684cf6f647025a40acd6e71420f73864a3bd1641b56c02a3718e53382f8f60f01aa874c72d4cca86d8d6263612ddcca92e1167c8e6a495866b38c0c810781a2d7adc27fea3f04405cdbaeeea6231dc8a0b64cbfd267827814691ea3a6fa4772fcd41d4f1bf0f34ff115736806aa17bd3af7e4ecd575344e6978856a2090a8a3f8ebb6f1a485d52481b1a4f0dde055bd20ca5e9619f6297b98791ee82a79bb8de456bd895f39bd1ef691d50774f98d7c2c1384f50123ddd0cd924f2e3d9d442e4938f4e444bdcc40e3a700eee0c6fc4684650e286b14814109bf91523b9f1945dbb16f143d4cda3f1ede17eb5b6e81142b4873bb36685b1cac7a1b2eb2c73ae7cee309a7c03f653b4206ba038694c74c8173905f34cccd8fa9b035587e3e98aca2a33829dd343c0f30e27558e85499ec91ae2e27ebeb903094ebc8e5580d42149cef3d1910b26bbaad3e51f755638f630cb5668b159b8d4a31965db45c8d6766328591894b4f7e438cdb2daffafbd9dab420cf284e970c95e3f4571f0423a0a7e2b6e5c7ad07af85e496e63e9e70f9b57466cef822bf4d3ddda56d99a44c7711d446095d471e8534cfbcfcfca538e61a9f5fded085983ff7247d168f53188c430d58ec73fb36a3045afc3470696a61ce0fd48c6404327ea4e297b88b114b0e1b10fd7bc3239f3d628c22e4542be6b85fc6c705135e49700ebec647a6f31d8f0f73b23745a8518af6c72b3dc4afa54158c42c35db909d6d4aadbbc77752f38380846b97a161684fd75dd826af7c0e1b64f7df3c59c40b38bae4b10f9418733ac2499770b5594bf8ef35facdee61be491bf9f9bb69c1738f5f24f8d8c5fd464df8ef736e87dfcf3a4a9cd14245019d3c967c60cfac4c348f4ac3d4fcd17598145b53d20b244e1bfe5f9dedfd8798c854eada13f052be494537ec5c4bb5654cf022b7a7606491fdc796b7f412819219e8d00a28d912df3d27b8eed445d46cf1ebd4c2905f643a844e056bedbbcea4ce5e133965a6692a6fb4be3d032de86f895cf244413d85e4769701e377904dcc04248de5cd6d3dfc345522b6e401ecf98d9a4c72730f41608eeb0fb98ddf670bf082d71a30954dd909bb8c61bb9e42bd705cf399caf3879e12d0065a4c3845a2446ac5951370f8a2c27e7bb87c2c6a4d5b80c3c61af3e2057cec6dd27a8cb947060d060dd1dbb85cc3e431235d63cb4fb544b5a24468d4d6b2cc3c0ff057519488471b7bcb61ac6dc1b54552a8f6675bbddb5cf9e753db6d33e11fcb9bb56846f11b1c3c6d45ad071f9d6ba6cdefd2476c705f5a8a6dde9798fd0545d09f29c658d945e3f2eb0314309e45b7e3f702b1711519a491c5702a6ef13dbe8ba609cfeb7e0e9ad08143b76950aa445cc1c78eca82cc76c78f40b8e325b3a3b5c27a48f5dfb40b92be8ae0c22671b35bba097f5d6ad6587fbb4c17463dd5882bfeeb66d313baf9f50324af3857b6581e70ffb51b3ff021282ddde1e4666bc0fddcbd979227db59246a426b2ed8ea55589fad9c6c3ab6c962999d67aca3c8a88ff994274deb3bdd8baa2ee8fe1ab58bf48b591597a605c6d8b24feee3e77865b65777cd9d95100be4d7e27d8856001b47540ca9977dab90bb91f77e40318ec399ef77c30a6ff4713f6ee90404ea0db667d177127dbe51ceff2ce5c6198743f18d7a4128e4fcaf4e2272adce8cabfd36fd81071d940e4de4991c372b7b1cdd4e48b4dccb67e022e492a3a76438dd6abcd3e54db2df3ac70cba93db4d7cf83a390c758b00b4d535e59bb15b694ade8029f75f91ccaead19d23d024fa74fa1cacffe69a7e94364154ed07ee23b62e692b19eec6c1cda4a74cdaa5dd8cc15670381b909cddedf59389401df1fe1d07da4cf38f3d84aa03412a304ef9809a61561bf6badc6bc2f95bb0a9d39d358381001679a3a2050f0219439c90950a81e7f30d978b08d8469a02099965a3f671d75b1a43e75595a73e28349fc8eea69d591d70c243927e344a78a8ebd7b5931dfa21988fe005b10f75dc7d8cae4b92794d86b15458ead1c6c2b509de0173e1d5e349ed5e743f150c1c4184b47ec368cba658a13ad23fe3afdfae01b90efe6f1e8d93370dd2f958d69c39c0533463c2980917cdeee28206ff3da03d8332ce9571460c7cd22138f99686aa147d9a0b86b83aa84ad0eb807073dfcc2c8c3b9fa42d6fc462f182ed97adc45dfd353b769553b67b6ecc8e735e18805ce7ceafcee15a52ae23dadd01d272f3ae18c150d0a371012fe71d3d4dac5ab97b550ffc06d5f2b700fb5d1e1fc3e537a85bd3c5d2119237a58059f2abb5f1f40f48788df411342b91d061d15ee578f5616959021fa1005f8658ddf3ec58e2a3e39a969f0528ec0874420237ad5fdd63314b8fa768b38a3406f276c1f6039630339d90645984ef01f205ae52272041f7778bb512def00a12601c1f085e747573c2be1342d394952e14c1f2b96ea546536dc4ab1c0fc5b5caeb19a2167c4afc875483ed504fd9c5bdc6e969e896eea217293317d73385e8ec6508013280bce6d0eef001b0d36269ae2f6f1042771603ed168c7cc77c00674a0961a7dca2c6036a0434435a4e3afcff1f94d7486dcefdd39d854f23d4dea66d7b44d289f38f21212f2b3981d0c09fc942fcd6867cdcabd9aff86a6871ae90e7f9aa40ff97a1369917d91181b677c549dc932dc2b6879493e5a62e104205c9fde871bf242f94e9a5483016593716848a16491f5554e4d7c9ab46637fa8dea94af5ffd0e7570a766ce93ddfcc3714b870b90eb4099f8b35edcab9b2eb1c00714165575c2afd44a1b5bc42fb445f40533e2686fd12e9518cac4634ddfe9bf6376f549035fc31b139c7392ba358be261ae8e13e78f68d331cacf7020795cad930c2f8e39bcbb0bdd3a7d4ba3bd60af0cecbe0e37060155669b791d810a9d00885c8b1f971114af6d1c0e31f8f3de8118a46a67dbc256b7de3de474f685fcbe7aae06515661f362bfa2f2a4ebb017e24bbdf2eaf29b64ec2263d98b8cf33e482473a397b965f8f2e888f2bd4d9e8db1e6a1f23b0d9b955f23e6799420646e0c7e9c246c63398a942858234c5215e229aabb5d74bca5d31a0b51d53a6ec8b628815909bf8b791cdef4c8a371cf947356d7de084886611a4dae897e61b578cbe827cc708763613b685ba9a08e65896be274de556a05efd6ca8f2ad1a3981b9eb4be5178ab23e7450c919c00ab9a09389bdb7cded86f05e3fde1d879b171510b03f4348205a64aaa5a49a81fab9bb3b04facc172706977b0a274e5f30eb8b68dde029075e1c2b5e88ef6079a1ba029adac7de121ddf6cd81e0835f2d14a8639cb55060cb1d6d208fc87419a64385b8ee292b1b95ed6c603b4794ff4275c709701aa6d2ae73291c71ca34b00843f80cf524d9c32e177d4a631301f08e4e3437c1731f953318409d1506f28b654ad68dfb98ba8ad0a7965bcfaf2af451bd066b474ac91a80e3c4ae4a43279b54bac6584b54890da9b5c41c28b1c442a94d14da78c826a37573dcf8fd60edaa6a780627191fb5e2fcdd04a97a74c133afaee67bc6979eef11a6d28c1ba7064e91e0e131f612d9bf9259351a6e4276c8e0c5c21cbf33ec26739b6a14385b5e602ffc7fa977af9fd3102392ea53eaaae03fc39bf8e58e8a7f4d1ce565c8839fcac9a4bfdea76b4c166f108e232ed8c9cc0bbc76074ea1ff867f9deecfc4d69665feff8db2661d3eefb22c1da58170217e1bf955d7c3e16194d72b151bf0d57399069147bd4848e528533b4de0938fb4b3b92c0d6f707666af68594fc5512d492404ca41e911c74369a73cfbc7498b7472a44e8f63d2e2dcdb41a12d6da06ac883d1b1520f49b9a779146da58aceaca8e9dfe904e47d7a5c6df0441fc0d0d7fbe41ded0faf1b40668aa35eba68ccc7f74af01ad1a74e1c7a7630209fbb9c02269e0c19adc8801284a59dc57048b90e7c1c2d43b42676f2689f6d3c6109b29632c18779a8b226fa19c383b29f49c19fd1c0976030cc0d32b9a1425efcabc2fbec6d861893bbfd16fdb9e3d1efd77fcc792c819a16387779b5b1ea0ed995c815c6836278815fcfffb48e956f6205d43f6b4d95d9a2b92b901dd41a26191a61d043f8f2d3bafc41b47a0aa84bd1b85a501b33dc55793a940c6ffdb61ea33fd833181e6e7b904a3cc6b282721124e1cc09c6733781da9f9c59b1da6218cde9668cabc91fbc1db3adfd9c5d0d36938753f68c9d6dc52e291ae3a83c093b3eb1a54dac55f9e1398efd84c7cb47c993f251bffc25bf74f731b79966c845c639bfc1b0687c61e7f230b67eb9d4ecf5a12dd59b1c63a15ab93047db495a51d6bcddda399af83bc2e1a511d80f2450f2c33ddf1da4a512603df54523f09a479fdfa8ec8a5aa4ae8ff149a123bd9a67691eae4a5be256589c4dedec8f71e94a7b79b35e4ac83276a1198bf80b59f4339a0e03044e2e1a0080ab1f8361e8627060cf025365da6d36940ccf716d44fe3717635b7bae6f6289379b568617c33ed0662dd7a4ac8ea980ffac171bf1eecf273f2b1a2ec79d2f1223daa28a09866a94c17f69390ee7c8a4e62847420b7bfa4c636484f1ba8bd36137f9cbfec68b42f24109aa2d5e553d20d5daa9a0a9e8ad105fe33ac2a2326042eaa323bfa02823783ffaf5ce44dc8a67f423b6a9c959395ce58eeb3e2c0b78587c872c66694c92115c58e5cbb5f5e8e216647c3ddb7bd58d8c46c21242f0b293696189961f8b833f4275ebd980fc9aea26f37fb61ea1c5a58499746a867d1bec08b242dc95b942ed3f131827b4a0658aa2e0b013f3dc43d279da9cff433a4f193452b09b7307f44b55eaf595561d24511617688a32b6ea3f07ebaf6ba60f1abbbfaa52696479420926cae69378ab16feada9bec35a980d13ac25526b7e750819d594d357193fe65f5c34a43626d8b590aeecc7009379f7df6ca6ab7cff886905b9de53f073fd6b87d8b6eddfb790308ab4f10bb995424975e0ede049e3d05d309cc5f8245d6a0069d8ce1bf24cb1e0c0838067dc24d7395b4ddc9ba1c0834f193f56654c2a292f9c35ff94438426b770b41b7a76ad0b0f11354a72d3eecc95675234613a1c735ca27b7aac8809f16508091d7162e34da57e1d1c84272d5c593dc4c9e0aae4cdb3a33686a45e063a4e36ed747492e9b10104c8af09780f1f3076389da5ac28a2066fde085b4d3a25649d4c51dab0ce35c8d91a9c3636369322fb1024ad5e37b48635ed27c8825a34145ce53e8eee9db95365a16a1f292596ab05d8a14b33fc3dc269f7643bfb73285c7f95478c5a54dd3eec72a0aa1dc7aa88f6fa123497ea2b092452d36048cbf29c2570272d9ca343f23466d8b286f351a7d5dfb109ffbf5551f96d68a7222dce89f3a6d068ef7c87fb152c711ba259498cef4d0bf153e84f90112cedcc77e5901daa214464169579b024aedbafcd10f8099074223a8ea57f8f14cd2d2096473d0823abb82655bbed841a2e11182eea8c507c147a3fe90982abf57f2b6ad373fe5f0efcf4ae38c0c0d3c8fcf48f24d8327c5e75b7e4195f57d2984416d870311a493bc76018809f551eacd80f0baef469f4a8590956e8b5e0f6f73d39a426a55e16b6cbd87f5922047f42f5eaf1f5c7a456159cef90cc18583bfc30dd2899f43de8acce3ac563b23b9648c013003c0f3464e8ec0090addeb524b054683e0c4dba6414779474ab13d88c5c38d34628896d9042b2e2d5d12768d89390718dcc55bfeef32e48aed4f3637104deca2c665872c61ce762d2b349dd576613239b35197ce2395de9d0b686fe690d68208c2ddd2a31ca4bb9fae94b6f70a70ce461d6382c10833a463cf4a089ee9e3f8792f920eb44b319a7e1b77618f9d862b47bfdf22b309955de00132ad1b96c5de84704fb5ec1d62faafbe5e2dbd76fc78f089075455a7aadbf6efc2f9f7f8d23225315baaaa19525e474d6429dc0b9b45151ce035ed92b6a33fa5118fff5827b232c22c3caf958800c28f90af735a7ce3e4d7fd439e6b32a8fb3fcbff33e9f3cc0157beb7327d1537d350493f9a4df961881d2e078def4e54e9abf5048738fa97b0707d4195791707e2f299f8e241202daad69593b25a9b7d747939f69ed1028d1f1c457f1d57851f244d4ce4863aa9027ba75734327a1c02c4f2684129c65462a4c69136179181456d33b3cb76ccca2cbf10056b11afd0ccda5f5d4abd956b3b77a8793f9e05736909ac06895074eea18770e89f0e01284d51cb63a8131c808cf0f9b45b1e2c4c542bad647dd6b012069675ed1c7d1decbc16d83ed2d76505738ba9a1e88e31e8afb9740b0636e0d422f8355deacf0681fa56a5a92ad338c82a33e8a089d58c77a4898bcd5e5f2e1e01a88743c17fb147fb2bed4ec06c1bb4d7cde67897079e17148a8dcf88a50bece75898674686526012a7e433bf855a8c4f6d9cf6ccfde7fdf6f7f409993f340f6805d95fe195d46be34a0249f05ddeaedbeada604fd9e1c395cbc2ab32e22dc75f53371302d077fb9827ea516e512715b2022b1fce78b05b55e9c3ae20acc2e952e4d12efec9764f7fed73d7960f47196f17bd6441472caf11ba1426fed2878704e8060345deccdb7f1baeb31bc284d1a650461c77341efe83bfa7d0b49699909f5093f1b3179d379e98d96f8a5d1242d378b03654f3209e2504c35d261ce32b2ce1b1a0c72caea5a9d9e9f88c755f41124f07e029062fdf242ff178c4dc0f8f51ed7191d17b26dc0dacb19d069f4a2d65247cd2b2c3f650179bb359413121db45fbabf15fcbc11f4349706e828c840663b31e790a52f70832ded03d2ef57394a0b075ff1037bcfe5708f081c7f4c2e6b860ae5d605cb2ee6dc94b33688e58de9e743c4f472aaca578097f44e2096c7c0ba1b37ac4494ec57047a5cc86739e0301ff97220c60ae40eee3216c76c0e1c3607efbcac19bba007d1d37791de19e23d05ac428dfcd80bcff27008ea400857254566926653e2f9cfc6b91f00445cc50f6a24e5e0ef4d39845a4782cb0b799802fd0b8e42726f32b86d566c13ae62bdcbbdf3f56afca2548e2085a281128d3779089a312a4fd1e087c01c172e9dce8669adb7f579ab98cd8f26228ed2ec4d46c4c93e1ddb1d5ed988c6cd04259b029cd3242c5bb51b9fd24a9e197ccb3012231040c12be6a110e3bb77f2947803087523398a37bdf170a19328bb074a691145da6e7f0efe264f2e3ec90365b11a3b43a30f4b6ca4bceed9f26ac136f37f8886d363acb915d3b66690e3aa678d35733b0a34def7303b415314204dc6b43ef2c65cae3201493435dbcd648f5df9b41cd53d6ff389dbb6cca46cf84b130380f0f6efefea90dfafdf52a54bab2e1dcea7ecc66ad7b23fd817514cfa64457a942ce03a59197238a22f6b4e36271590b90e89b05a6a89cef3283cd541d61028ed7e05347652a6b145458c130e305bf9c63c41b182178a4104cb62a2de14f0d374c3f5a1b440443f8bdca09c8bf2b085ba3e83e46151f759ef5e4f8d3197b20453d05027198eb7060bd693669a51eaa1fa6d8f0c2012ad0d21989c2e023f95e5f12fc262977fb221000bff4801cf7c2f871d012cfb648b241cbab2e9e82c5724dac17a71efa410a034fb00f0de5b48366da781c53d62b94526847d005d1034b2327ec7c618e4351a338c876146e071eb8c641eee1f5f26b16fd4eac30cc0851bd80ca71fdfba7ba6d342eef34b83d7b1c1fb8ad311ec2951732f76e01a46cf00e3ba0c10f48ed9badacc6078faddb94be501ed791a52d91e287a25e05bc36d4348771d449ac5bbd8e9ca011f59c858537b8c29144a8d326505a00aef00258eb97b6c003b0a7b121e827d0d74796dbbdeeb62195602a25b86f97f25a73a20567da3f738eb0f0250eaac0af4be2d9eb0b5b4580048ee2e93a5ff6d4f0402c461341efe0a383f5a240639a481c599c5b52b2d49d4da2023e53b0e4da6b521e84dd99419367c6b3f1466e84c705aff3632c78f778e25f4fda3387bd9f3b12d086b656d9803ddfa4dee1d216d74ef9d007901fa9d83a0979df0a9f0574c39adbbb6c974376b0","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"5edd228bd383aa9ce28586e4e90b1e2e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
