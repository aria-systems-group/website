<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"7ce206a53ccec41cb3e990f413bccff945e62ce582d51127333dab8d571f4ee08fc60dd8824e7f3c538281d5960593eea87951d99371e922add621d479406d16cc94f083419da5c5a9cd512cf8a3e4d29eb94eeae9183c87e7db758ae8752d4fa19ab57e861fe3c46126a3f0bb33510da8a6825235487706f0ea1cccf44e5d998141c604ff219b2851cc28fef57890e850568549bd5772f84b3601cd261b2de4288ba01a1187fcdf45536aaca0341fa1e1cd60f312dbb2b467165338db28313da45710f1125469d50bb4419ad2b22e4bde3da86409609e3594d6552243e12e02f3cacddc76b5d4b6a7d6d4fd6168de93a048986fc65c13dc811aacb90faa8ee5881c0b6d9c6877b1db2fb9027d73c11f0aa8e3596d82975677d24ffe0a4f14d1a1cd2980ec72fd6e40dc0607c40ac1dedeecb7a013f77f951f448625a27a65bc17d206c92299bdd329a9e273604a57a41d40fb020194560ef3f82f6ef3c2ed6a6484a21cbad897f97c2536cc52df6100bc6949264c67bc64f015149813f0110bce4d2a8fe43c0065cf25da0473f5d582d4db16cd2799c346ebd4fe6c29b4d58f221cafa262570dc6f102bf91efb4b1a27682d6203109c52ac7eb23920ae2790b1d94514b0f82a6804d4b43c52c315edc0d2ec96521669f31b5f12bf041da00e79df801e7e6cb1d670ffefbd74d01f2ba5f43b9d4a86d75dce4d2a0f618be609ebb664234ac3119513a19a22ecbe1ce98c69116aa88e2af34cb50d5af7e3f736f5bce5f2788d01d47dc2af37d9a11889f76b5521d72e46c47658e9fe07b7282ed1d1810978c2096a42015066dc19e193688ee67296cf6b97bb2667b2eea679c62181c9ddeb08125619336b3d5d69f9d1f041808cbfd387f9829804c47031be8cf2697802bb4bfe991d8e146e5ddeae8fdb31179a823c5ca9fa951cb393be9ec81841883264dfc30d7abb36f37aff6bb07d9530c061205e2596c70882df2f08395effb1ccf46e41d0dfccaeaab7012868deb416b315d5cd68c081a0358245e939b0987fd182c5e63a90955f30ee0c5446162e007367d89d68c7bb9594433dda262ab2812e890f84173394945445f76ec069726ded4e82a9fc4caa1ce78063650c09226efb97a91331a596ea22ab367ea2ee8324cb60e420ffb3a722d2ea4d3ed19166c637af227ae69aa2b03e9a0daf9092f8516e5aad93ec35e6e924d1ee4eb904bc781462f1fc3c219a1e9c371b578664f88c148837fc1b0bfb6fbe9698a77055b23e468f41c5f0d73c72bcd61ffb0082ba328c3d3773e7e77e7fe0a93c822a4102b2cd23a7620940c3696545bb55b3eaa0d8f3bfd597982be0a73fbc9e0a8d4dba7e5d884d53b2656eb867751c8ec3681acf63600e889c7029fdf870cc3ca476d1412b7a35139bc3464de7357629b92f0eb604902a027cd39bf17bba48b8d9183cc4940165d8d9c4b512e88caea4ac0bb55fd12e96b67d7c57dd1998344cea1edfa059fa90cda6e5d025c409c90c25cba0afd78c1f4447bd248d201e9c1995b463d937ea3e0bb426aef49eb8964e9bb32bce12d9c5a4a87d8feef523935d333f5dee10cc0c3af33df733bd7c429cd246dc916e43a1008f4e9f7481b55cc878c2aab308b2414f8bd9dcb73d86c43e8829b30a6dda17ed12d9b45d7bae6533a0489650eb8dbaf1e71751404f8f3e64a7ad26bde5fe43265ffbf0cea1654bfe3b234cb74fbbabd013a5b5ce4f59224b5d4d4be9c1868357c5165be5f983e92faf48231d2d89a777cd6aaeeaff8bb0f5766ca632e50dc4775e6c06326bb75ea7dfebd70d210827b08ccc10d24bfaf091728c3b7076694f60cbea7164f9e63126097e59bce25ab90ca65138d7baaa4382526d9af71e0cd17f907d5cb8f76ae6b40b2902e44b8712a24518ebe5cceaad900a02fee8b1389501d7acbe0b2899af7cef48a60e8a7542aee435b397087d7ea45f4389561527cb942204841369fb91fc4ec408b3638c0d78451002ecf691d094ed5ab279b8457de5d189baa52fbc0057366f4b6f4f1954087cae26919bdebbdfec0210eafcfa3ce2a52dbcaf92005e534ec97cb98f8111e4aee73cea3fb76fabb34e9bd676f5508b0a2eed59eb6a8ab8c9bd2d3da87e0f0540d5c287b21636f2d5098d4a29247738ab6c10a317e7559257c7bf078492b18c1000d8f34b3b7ebc655b592857738a2b7ff63042b196caed58bec3ae018fcb03e3c57642cbfb8d5f9e6ea73ef00c2ec2fdd2e3cb1119c606547ed00a6688860fc7d97b7f7102f066898b0e5db233b859547e78d569dab19e880388759ca7ab44bafab96bedd4bbce2ed9fca29c5848b37b382668fed70709a8a94dd93478ebbe9d2e3512d14a7cbf395a0fab949df1b2884fdf09f09d010c4a1c682254c89b61f0249a8a8d81b305040c3706783b605ff44235876c892fd0d95f38f862682c1e2657ca32b724edeebbcef246381ddeb36ee2b46aaf726fb527b6f860556489445bd86a96392983ff3cb0de8f78fd0daa0afabfc11dd1a983ea33c6f2e06502781576a626fe3e8f8dd603db6ae43a693ae6164a7e97ea31d3c55292768466971c11dbb36831702bb9955e1a3de234abbdf8ca51369fbda9ba37a780d4a331838704f883b7ee194fe72d78abdd03f5f7f095bb419f24a6f4db5d6720d036e172967d63ecd8c23243efda7001f3d11c0148ea0ab14753edfb7eee07068190c7f6850dad4001b3e93e1573226f130a1d0372be006b549fcba9c754f5f38105a0e49b0238058f7acef2411e94f3f3416fd274c486fb002a2228296677759e225acaa14b42d9806e30b5bec23122806e0ed71582b170891e06c643a94f30bcd34c0e5e9792bd36faf9eab71201da34f842924d8adfbeddf5d4cb56ed20af5364761cef5123492cfde0ad72afe0fc313af0da7b44f030b8150a842e85ef42f05f6eb40a2cff453906bba06c922d8860a40b255074fba053581bafcb0e34a596833746374963c8a21b92acf2a04992c3158b04c65b4afaaa00ce29e9b1afd1b43ba66315d726abf87631607837a7f525721979e15fd7fa9847ecf5cb31ce3e9081b3b3e66c0fdbfd4af2bebe697718a4de730c7abf3145003430898f3b16596a0d20b7a6a6129db94c87af8a1ef993a78969a15007f64750771da8d6625e568c78422f3174a7a762cae19ed52cb54f3d206063ccee7ee8add6f9e847bc9d025f0b3b1c311b1d3af434cfb8fbd0efc9448fc29326e2ed837d5d6e7126ced5264cca1915786a2dc0f7369e29579ccf36d14e025012911b4a735c2220460ea3cb6ac4e546a0d64aedc8c97a47d007af529fefd8cb715a634c84a9031a88ff71c1f0c57b7c9c6e7627d2308d029cac9d70e12f4f0770325ff905361ea5a100f030fe67be8c5e8f4509b1b69676a80a8cb064769d953f57d8a8e7086b6660c2c6a99ce8191a04fd84e94ccad3e0a62173ada3482b03e654023efe95a5268d30bdd11f2deb175ccebba0ccd4c34068f827e741cab747b0e73ed4385764e0317249cc5ad34233b2b4f4096b789a5e85fa2e24fe801e22dc05fa5b4cd71685e67ce902ceed44b00c967f66117684535c7a1364f08fe5b7bed585fd00230b9509184dd6417bcc36ce3ab3cc6129682716682e7a081f22cf836b12caccabf2203b2164e909c778385c8a3e587f2df11b33cf7cc1dd14760e22e25211f41a61c952e7bc7a7a0df122db26cbba0663776572b929b5229540e1b4d161da81bf6b0b02ee2b8186329136fc4f26a19cb37c133170e912dced59a154f830492cc63088b8077637b71359365a799ac209f26489b01111a76453d67fdf7f1b10f160da543d6dd339141c666b894141c19ab4965c5511827106fbb75839e51391b80cdc0bc609a38a0eea5c385603f51d7bbdc316f193f1e186df769934e6102f369d437e176221a7dd9f5383c55dc7ce79629173c166a001228f2f3a6fd47e18de8e5c387f4ff88e523f1892163bb42744d280a45a13a396fc4883c684ab1f00fbe7dd6a2e920c9b2d3c81d0dc22fd4847f1b00c428ea6256788cb12633afc60cc6e4d96c2385b7197b0e4b3c87d285b1ef2614c02adfa7fd9ec4f22af4e4c50aca0ff08272b66f2aac9c1a31ff33f3de80ffa596bf38a3ce893e1fc1df20bd81e49efe62186664098498b0145ab16a9b72f9a64b43466acec5f5b26499a2aad81bfad3a3b2d9b4727e597d59f1e79d9cd8ea7cfdbdec3b6265082d00f1c2cefa797d94219eabf614e51087296e9ede06e41fd35fb989e123d505fb933575fd491032e82bfbaa6439bdf6d193202a8bea0056f021a85d9043a4ac13f96fdcffb537746e892f2517b35e1b9413f1e4ab82c0cb5863b0984b8b1ffb1eb3e645893b765579233117c1e9ac69e17708e6a25f65398cb9a49778e2e9a73aa42d5bcc4d7cb1725cb724d7bae220540ba14a5ade23d2e7e2d1ba6795e22dbde1ed948ac72f34329cc365e3ae22f8898a772dcf834e53b07ef48a5d38af041ec269d887d280e3a3847fb63d864f86adf39a3af85a1ea0da04d98bdfa791416584dbccef5c9d14ee044b967310ced340a7188b45c6687ee0e7ef1f5d900ba23031d8b53b37283c72e01e24abd5d94e85fe73379f7c285e25343b5fdffb4686f693855c32f43324e527f7588fafc0bcb58790872031f3f159c98d3e678479fc260a1770d67512cf25ab60d20ca54502493117832e842d3c5005f42f1cd2fb984fa76be131cc3a2c60e75c4d39274512c287c531898f51d1b19453a4bdfc348d0aed8e682b430454d6c06a1be52b596cdb95860711e036510429af771c87435b1e118b68faf9a58da43cc96752205bf1b8eed73342466eb6c3f9d7af68811241f1bfd06a2c97036edf516f0a562c0086b758d1b775221a9f43bf5ba4d0540909d679678359c93d2418f296594482d6fc6dc75b57713ab40e20ca221236669e392ab2b07adff7303ed4f14cf0e529a649df201be7a3debb769fd26cf40c7e67bdeb48c8fd6ce38450fcf13d41af6fc3511ec1b4ef0fb8c22600d1b7ff91c61b9cc39ba7588b8a73f266bcc3a63a3f888f043b10d8d4fe65c4e65b2916724eee5b65365f788c8dd921cee5932cada183b94557036ccd7f75c041cca08043e85a637520d5a25e009ef429341cf6ae9e359db2c4f7279b383efdc6ffdc550632782e9f6c470081c75018a47a30364dc88f108cbeee1a0f793dd83a46b2faeb1539fbe0efb87ad83513b4321a44ea31775e4eb5210899662d61a62f146eee7ec108ff8542c17e1c676d116f53d90c0c8016e557c397bc4899197b7eed1f54454664f6f98c1679450ce3eac3438015827833aef26328e5ca3487f5219322ea4bba39348cdfa2bf44008be56571c967ccb735f28cf0b14629e7637225141cb5206659f9f2f71d9495cbd859774c7545a59aec64d6d85dec2795857a0c6375866323fb4bb27ca0a4b15b8ef42af76d974e628c3ddddd2ee9c617849811956798165da63aa1463cddd7481ef06bb7998c0821b5a344fc7e41a3c18e14a2d28d68b174e2ff674458f2f7005b6727c343d7e5da5fe4d2a788fd3d512a3a588e9060f9c06355edc008343dd0cea69220bb7b755251364bac829a58d6b57cf6cb5c5baf1e9b17956e1fb0b6eb4ae5ee20c7a38f5b7cd5b70b59c5f5e7bf2c018688935fec75b75910b621f8119072fd9e5b372cf7104d16798ca2ef7fca3a508ad45a9707310a28351c7a8c7598145656c713f239e0dfd1130819ea12ff10b308368c6777f0f69c82fa5cf2c08adf5478a2a3e9fbdb377b26048af217fe5c75dd739cbaab5ed1c7361c9d96651b0ef4e7e96522f81810b3da953e58adc796dfd69f3872f6b6641ac24d81e9d179bff9ca41c5b6b035b51f4f05fd7e5855723fa5b966d67a43290e735db74371f4b851b5bbcd1a0ed99da4ae4b404ba6aa02d8d53950061e2d318922d6cd6f1f78f3e6dd3c7cb27322055d06d2b2da513116a828d6a8ec490fd12fb32d1e5a20198b0ff61fc583d7e6fc88f78e5ccce2f6165e3d32d1a6ba36fb98b8dab6f3f9fc835d5c3a0b9aeb385cce78a26012a9e598f4ec69eb7521d76f0b4271cc1fde025cbaadfa25142647b1ff70ad0e0c6c7b90f0b60101df7712701532fc0ce1f75f08c7fb65fae28ef12619125bd1ebad630d8452473619bbc080db36b7bc782e1f788cb03446e2e53b1d84e3e621fbb06c0460e61da3dc1b58e012c6bb937b5497d3beae12c5a878c2a4ac2f4c6d9de7b7b814a4affdce3cf9fb9da4ebd758c564ccdbe3b256f499db9a0d56c577c67a9b5e28a40719f7aaf5276af401da26a13f0c98b108d7fe2078a33cb170f07a731242ed91187903312a89df70b316de81f857ff327695f2b4f7d36481a27b6596fb6e8265508ae3b59f8de2c1ba4facd27f72a1de90649a3dd08db76a23d7dd39badd101f62bfccd95e216c3aab66fa71892c17b2ecfa2f1da51c148f1bfa40064e0d35f0589a90b3a6e6ae51d07e8f430934665ef2a80df1204702b211440f62b5d35f4ecf186c6c19ed3b8bc53d10c8b5accbf48b78be25b5e8169fc4cdf6ec11f665f903411b161dcb95ea1925135adfd16a92fb37d2f3f9b6e2805e2ad0d375505efe27436e060471370eaf0d3fed3a13ff8684adb0adba9fca01d6e76ef0b440544b7b8570b5cdc326d05dbd3eb5d2c8f2e3a3f6c316ead0255d19fb52d2740b4d77cec9fd7fba044d6c2a7665e2a1a5825963c5f4548be8f33c08cc056e7429e8823952a6d63358cbae0af1ee1878b1ea1acb591bd1c678fb37fc1c078c4120eaec13664b76a22bdb782123663f64ae53d0a21cb83e345509e0d45e52211a13c5b5bc09f7c5a1bc00ceeb0f08f9ea30af74e44cc0e0d64c95c759a87a112301aeea965f33f8c9f2a10ed1834f2e860088f965e9a22830f33a27eaafbcef29340446a3af50f1e08a916b47b3778e77c8d40e751f6d40353d5f979c51753a97d86542c975ad10cb36f01592b39d802b4acd0b60e43e5332d970db75e085d3483ff298afad77cb70bf9911e6c7dbc1bcbe3c533f261bfc80a15634ce720d91ddb8463607acd9d0f4ce986d595f45c8bb9a37d8bbfd5037a30a13e59a2b877a9bf84b350e94cfaca6dc2382cb74b327d3b1b34405f55a45cfc5bf007e2cb0a94b021ef746d29e8115e774ab3ee0dadcbdd974f31518c9d0e3375ebb285fc29bf85f2e12dfcf1c651f8fc5e39a0602cbdb031861db858213a2b90467b44a96cef847c1e3f7d0358f92fe4664424e792c2895235ba40245d72f73f7641ff9c17d0242dab2006ec6a2fc1d9614340fbf199f9d72eea6ea94c57ccdde66eb4d10edefeb35a8a6f54b7002050580f4eb865132df3866693129cb5d07a77d89638926761f105070eaf08ee5963d0e24ec2e856d92269cdd291db7dadfb9de72fdab0ee90c01d8aacb4280a1a62040ec0f4dfa70ff91ae47e7f6724bb35708ed8e6c6de20e7b45eeab55aa9f7afb06e5679bc1a8e36516f904859586db487609e9afd5fb5f97670c069863e40038bddfdc3448e89b7ffb46491c5530b6b7130b6e7e71c4e8f6fdb5cb7866597abceff875f6994d9adb3e3c0fcccd5f7eda414cf0e3fde22ca8d5a17e69883e8a7608b0ccf8186621ee28e1b7bfe64b1599d65f719f7af2d980a0554f65aef8437a3e19b0833dcab44e6f59e258553b55b66b09089e79629522fd580e4ab3af3b29a8e02b11a795d5341051f03c6154d2c5fe4cc52801e89968b959c1c760a62797f442f6ac2944f85b807c392f8d644cfb45b818f57082d079d887d13fb3b291226d899de505d97b3a85948b4f2bb920729a0b8f12d800ca445f1163d92c8e8e309cb456cc6b08db85105f3f8f00472ee15a1bb8b019487736227f74726a03a2aec97a446b1d781ee38bfb53d44305e495dddafdab556f3d44aa4d271e2efc34c3923f5efe7db048a81c1c6d5661b6ff663bf41404392bf28c46c5806fcf6ecc3a174c0912c55a77fe817ca06ef29996ede3800c774818ce4f0c2acbbd2ecd95084fd2f7581d348f794a1ad41678340f193c44b9611b59d11aab5b99ad0ba0eee4b226f2590d6ad7e6207711f056e6c62c82593a234afa60574c4224f19d298155f12f6bc96b58dbb817558417bb698a5f3d5dc6d25e819f855c8e7df5800eb8626241eb2a46a3aa0eb5b48649a241f7aa00aa612eb5a5ab0208c1b0acfb8c9fe9ef9d3a54ccc668ca8c10cc344489638a6f040b5f73e361fd30c7545d4eb19666f70b8ea282e1fb35b613f6196d6a4efd7ee9120f318627dae394d315e5e1472802d725ded1f77982bb8d28f8f8ed4146f440bb7f350a3c85c12df5898c232a50975b459e1a0e9085cb9e80ff9c2850ad0e721d8158654aba53ba7db12105fdf946517374bb6eb6365d0a3a9329f2d710cccca89d2f15cbae746a1303d49ab7a4494934390afc3b7c4d268b310432b4c698447dd441fca433e501ec67b4061e8711d4fe60aa6dbb305d00d9b0bc2d5ca46fcda147cb4063e7588fc6893e092bff8352b35b42cae3757b20e5d3f886ad2ef2581b7599e483b8274ec7105c4ddf9045970e4cf9165690bc3dfb9a1509bbd4fdc495f233992f8b61135eb3b4da89f045e86d404112927ed711ed729b088441d96ba039ff8f5a724afc6e7b2e4df26b0735c2281ef2f69ef560be8c7c0fb68829902e7343cb80df1e7794ef047d4f5cd17ce2ac1af221733378991ff7e69ca6da23f66515c01c4336460c1172627fc74b9732b53081e8634ef88f671a19508daf3e9ac080106bad40a803742ed00635e547500d13330aee3c70d9a37d2eac8839e10059c34ea857f48a08ffd86145c2a1f216058cd1afcc97393877f5edac0d7a2d56e71b4d676b8ec572f6841d5feed82ea34e8d72050e8581e3b45186d0c1a188d3ab687e23283a6395043f253715e76f066f7c82ebcd42a27db541219449e562e1365a0352c8a8b7a6c3a543adbee55ae43c756506b44aebd1b74f330fa737386034427193996e2099e24eb56a062de6e967627a2a895bae2b79724481b81a013c19774b60365ffd65b625fc4f30e0109b76ea83613b54805710e786137ba47a0f4ff292eaaea0cbf8324f3df695bfce4bfa5c429c33a851055e57e01df886c8256f4437dad5160c057427720555b0a28e1ba5ebd5695267bbf30c5de0a690f13430f681c1503cd90170290b65e05ae0125c04b37f57131b363cd0b97f9d1c76d655b552e39f0b439a8758c35204927132df12c9200f3ecaee3b02c130c3a74d997c7142f1fe8d35fb62412eda0cee9b6e42f30d72f7898c0dc192d238a7f132a504ca3ba93c927a93238e41f5b983d65e2a2b6c0675027b196377efda9f5c7d5ad07bb749dc60fe7347a5cc7807576eb8fd99b440cf5e51999dca1336b17888b056c8a8d35e10ad5bf406c1fecd5afa4649e80595eada7a4db47c49243f2490f23c36977634dae07d83acc71a5be18efd494a6ea314c3a5ba542c57a0eb24fe2cd7dfca2a23a276336792e16f52b72dd098b4fd88e2499fb3a801030701dca8478e831997b1baf56cd8ff9d61b8fe61be250b1ac9124b96ce30d6a2ed6f60526623f71cc25fef347f7c20db2918505e158f9e31e3a2c3efc43535b695f4d1c53b42e7f96c29e89363e8b67be527be06554f48895a4a96d5d6d833e29060b05823db0f33f5e85e16b91a5a0eba935e59376c4dcc45ba60689a1703fcb5f4c47f227b2cb2eadb84a3f191d0f4e5d81727eb8ca980bd32856b129bf3df0e0cd3d4107f5a90a923142e67f45610a353b7443afd73027832b88a5e464954041c7138bb2df890625d9f178127e7ec965a838e71c761066c0be58920a0e6bb1797c2bca945ac8aa15a38aac975d1bf7b5102e32ed7f64462f989401a090c1e4d261f0a921074f8b46c1d5fd081f596eae7112ebb84b4ac908251e7db766ded7a89ddf3c6e863ae3b20349cf2521d0fef41e0c38523b0fc39407704528b3742eb9f0adad0a32db062223f5ddf3c09e1d01e8efa464766804b1fd804d2ce53c7b61e4389ef4115a89a1cf3423d21745db7d10f0fb218f95bf2feb5048b808a29a604eda4ff6a5e07423c1b7c7cbeaae5f3897b10182d1eca134651796f2ffa0b9a3af5364ba72fb64e79d6bd2bf941930a27fb2b1bad6859c9df3b31f734d5c83678f18239039c6d4ab2acab25a626f9174abc6d22b573b2c0765fab1a6df7b2abacb9bb7d8b9b7658bd9ce6571f101cea8225443e9d6beed9092be4e854887c00444077ea21d8109a1b09ecf5860ae8ad9fe70243a780b695f119086c450a53b1e53dff1a02226b6193adf76ae57cafc69df210982c01cce0e47e2c9f133b3629fedf5dae066f30dd613007d22b6162147502545c213372e14b062d62aaa7132f670f8c7d2ba8e5fbff0cb47387b88f4eea92a5702ded222478704a474218045c47db94fc53266474848df0a3e301c259c4628d66f4ad1882f2c97f0487f99057e5cd0d5df0c40f2e6f458f97cded4e422290ce730a2ff2e821942074fb272d603fc7656df9b19b2f571bf34c156c5e72b4fca941d8f7a7fa9c8f3c7c9fd96698eb059c5c687c030d34cc38de60d23fc27c543e512d27c46b7aaff5a4254b8d98019324bd0d2841450875bff9827c3863ca11484fbadd3c2252d2268a25126fc60fdb2dd0d83973bd1bd191ca9021e21b0d9df61aab39e5b09d0a9b86d6b3a724ff607a538d0c7aff992f0e6e7e1f87da68f9f398bd41d6755aa9877d4b78276851f371b2191d582a9d99db700adbdb59db77d955c9ef02a9a7fc71275aade6aa4adf31829d8a0cf9ab8c4186ac36af6154c6c284301918ec52bbd479f3c4b9c8c00d1392aa0bcfce44da4a2914f8bf06830285691a381fe8e4b2050a523912ae905040b67366540a2ba27e95c881958f2d55ab46c8fa3575bb2d5558f8d9b7d22317f3d14b6c34a10b278a8eecef5660d415a2f57c4f0f8642a834e49d7cf144401dc53e843248414992a7b035209322bb6e773d5f41e35805a344ab9a8644429e3a652ca69245126c0d241d973b6bd22c6cfb5293449ddd3d0b6bc9df9525a1b67f8fd0af1aac10528b09898f90b9dc18abc3c4ba05ccc42dec0dfc06c091d8d85053bf2fec365418428e23825c2bcefff295dcffeac4af946e6b8bc5b7fbabad38082d8ace84af216ef82458dbc99224868eebe1a03e2ea35a04d17fa7d7381cc91fe79b659af3fd9ac4cef1dc12a1c9f78011533f38ac550a2459e095382df2f24c5a377f6d2fd9f5a758651020e1f732ff04413f36fb253b70458717a34a42ef43ebd0525c0776cc28e4d2b9f9b0655cb1ce4732cc69ea0d44f935a81de0bca345b56f06a818f42a9a7a2534008b242b3c7d8c8a233112a2345d5bc9ab36eeccb83bd21704e5f97eca410737af3b9b18c5115c11ee9941949833d7db99d8898e64504094e01586240458990171e7a79b436a1ee72deedb928b9afddabc6bf8f27f077c12cd2585809d7302bbbe4c7af69bc3ff4a2042f75b86c595b5d7bebec26ef05ec370161b939492c4c2bb9ea73cb4e0ffceea3d03ffad90c84b60ffa1d042423ca7ae924d9f523b434068dfc2a36c45377ab5503b86826fb548ca096050d332b64830d7047d4a1568d1c939b5baa0f1ea1721cad6b1130404a2b4548195591950b0f0d5a00b92dbc8691237cde3010f7a5ae8183249d70710c11fb07ebeb6d3dce6145978910293fa674bd674d8b388232b1dd2b24d3d41d7f86d4a2d60123d622289c479a0578486221c3f3b45e266509609b4bd3be3edcd7fc25cf59a3dba9a7954dd7b22c8c57656bad10889bad0e5497e0d3addff97b332acd52f20b4075951481f8758fb3535e7cb50c6e04140647235032e68a4b60ef70f008119cf63278e08d3aaf213131276b01505e69aa8e234fc34f06745c099e46c66eebfbbc80d62a1f1e4d587979514c07dd58e5c20d1078167f9f0c41514f30b0006bb1e65cc010bac87412b2c86226f69e9f5082dfc8ad24ca512ce9aea9cba7f3fa091346678884f8d5db0f8ac017524eb5dec99fb00ea62f9e519bcb5f095c19b556399e56a2444d976b51753f806d84d47941101f696f42c6f44c76604ab603b64b329cfc3d02622ceef1f032e6bb743c70de0aef76b3e4a0f7eec677aeb4306a32f76f7627f69b7f5862fbd73dd0d50f40c4c87987d2af7a1ea8ec0a622dee309424afeb70dde49cd69b7ed481ee95c77a268f3c5ababa2d819ec7f5cd9506977dc3f747e09ea63a0f0b4c213fd018449291242c02ba16be4077d075e35384584163d0cf7205d3ae647ca62e845bf0545d3f69ab4f197d673b610ae1dcb01a6d6acd3ac8da835b549ddb8ce5a92df358e897889db5a41974351ed23e93924a5f8eb88c1a9a96e0877c45e432535cebe4ed06bcfe63787ef9e8ccfa6805ecf7154547aaa7c13ac0edbb46f24bbcdb1472b05834f0dacafc1f3c34b52e434fb011f4dd19d972611b452263f8ec017d97b2bdf415169a724f8c1393e9dd7ca843e8d684ccc7578f5fb5f1642f9488fbb7a9f9623f7920669470bdbc98fb3abe37a2a7621d52f0a8c5def450b3453bf123b4a9bc774af5bbc6973ae1050d1ddbcbac3a6e21f6a67c568c09594ca9b1862c22145fc84d0ead2b4517ef61bb728407457bcbf9c558ed200855ac16635b75e9f97a7e26a87be7920ce0a5f271c42b2867b8003d62bab4ac85814c8cf36ef087575c8e1b4934b1d2bdea8bf0d4772fc15a6b0570b75b7438b7700c46454aedf9b8345516b1710ff55017bc535f913d1baa6dd568ebc9cb7de9ed14908175986f69b45e1e313f607602eec245b61d609eab18be6d9d5bcba6d72b01f4c2ac35733aabd73a193492c3d099916e9ef32e00b17520607ab75e12b0602024763d17a5ab0cb9314cf0299233fedf92ad240c902a7f18803bd73d3b47752429912cd2760ed4edcf43af2ed476a2efae8981c0480eecb77a44794df1ab0789d454d2bdc1dcc2bcef45180999c702bcd4e4e818d7aac28718aa60329c5ef6a54c9d9c75152da23d838dafb0fc51d43c1d4f195f7cec431b2058fcf450d38c96ba31b2b8c91e3cdb3a7d279710dcb6c08eeab88e5d030071623710d94da647453a0c459b37f66277f54ad9305b7347207e54ec0381ef02189a2277e37ab489861143ef61ded78e0d78da7fc65e1b250c4b12338262e8491787da4f1be881e2714754f0da0c2e814d3db3d66a474488a5f47ab264dfd74d7a974aa7f150a5e7d5b645b9f212017156c7841aadfda7206c82380b489c38092a77c531b9f79aae62234edc5edd86b1bc02533aa8544f75a1a0f162f38d963ace5a40c33a29b5964bf597f4761ee6d8689f01cd689fc4fbe6aa5c4ccaee8127a651c29e1648c6c0736911ef8932ad7a56f8dddbee0e458d05f9a117d7a922616070ff9204bd1adc50a72aae34dabbac4ad8a0f74f0f9d78d96d0e471c1ad30eb854c3dd8c8d97db113eea0d21087e8d17a4eee668eb8d1abf144b981994f852d57c05ffd0ed12c6247e95aec82f2391327c0b1752ace9429973a65937e6cd3111aa29a90301dbdc25c95bee983a4e16ad1c8cba124a862da4c015afaa5d928b8fbb04d9a34555177cb4a1ad1c87c7ff98ec32b0cb1e17c1553c420796823ab3fc96d21ea4b99a3b5c9d2a3300e1a7adfab918de3b93ec46932d87009b0aa27169576beb22b24abe82d0ddb2b7564958cc7662cb0fa358b6d435017c77fde5345333e07dec29fc514b8b63467e22a4bd9b6a62e24728a2c28866530c0f8261d483e7dbbe46c848fe34b7908c9849543547bd3f1b3238ad3b6a92e80862621fd75497723c25ee325bd16a87d94124c87416ca6815f9f0823560d577f2d064ddf5ab6c070079a92ec162ef7a0236de344b7fd61c613bda5646888eb6db243b6f1dbfa6a370cf72fcdf2578b3c73672e98a19b7e6239bfd2bef01725edceba2a555c3c814eab9a69ff7e5a6dd8dcc83c5f32e659b363a4efa0bafcc51194341e2df9046f6187c761961e95528b3d821fde864d6d447644157fcb37017efa34d3d06d5b2971afe286c91256a170b8f854ec48dd66ec88fd077af308fe9522b455cb0de39387d5fa6d6e73ac9c1690c0950781a9aa455dd09ed70863afadb00126f342fe02dab2e3e5d85d24099b1b92ed136db693e274543d7a34cd279045815e30b873c87e6cbaf2b7b8b927bf8dcdef58476833dae6d133ae8a618c805d97b175cd75a6af127caea5f4e067b7214b24fb4e515be36a3d5e841a2775237f98126933b569ec35fffc2229e439e9c2e40878850b0d27da29ba2ad8ba9fcf37276d10ab7f7b3647c82c1397b1ebeec05790a427480f905b40e0ef1ff7abd5262599697a1d269ba6d5f69d5d8f595dc4d4c1aaa7a2b662073c373bd138e5be8ccb887ab3398ee64eb4dbc94cb94fbd3337389eb1d50ae1ae4b4ce2f51d9daac689a71c2e469b8297e82748e1e6b26f4a0a2cbe46c2c315fe360fe0ae2fa2fe11bd0bd27c1c5126f35d96a82c9b93ecc6c3419d23a630f4537046bd9bd0111964f44bc9383d2ecf9f653666082182901d379c2ed08c95fd4a68c9c0cd205e01e663d0fe5f93d7b032ebb76b2368dbef876a74ae491b135ee02440c5a7bd2a9a08820f678d08f80c4d2a7b643047f39b28e90450b30e3cfbcd839193f67c209363ba5afe6b375f98616fe5ec0ccec296a199daee25707d29566e9fba79e50861d3bd36bd1e1b95725c8e7f056c525c626a47251631c5baf3eeb8b2f59c49540bde8228cda36c2e78cc129b28fa6554120795dd110fc4c796e0ce9b53f7946f20cb71225bd09c2bbd910c227e24ccd20cddc50f70f8b02470987fc021a089ef8802dbb2245aec77a81ac6f69485b133bfb72db131764409abc8ffd3aa52850b5f0c948540dffe53119356589123a9cc73d389fc995606731882ea3a764e5f9ab75b64be1b1340bb61dc2048e0ed4690f891b7d786c019641548216b31429b555bd1364ddd1f610ddb8f8440a328647844fadeda780ab313993c3827c291173ca15802159ba0c8101ccbf84ad9d18143b511044dbcd6f3470d56ab0b3676d8ae0c65927e4aa51218b17b7859cc6e2d2b43ab1d53cd8462785dec5007b3031b3f87e5b7152a84900d8385b8e159b5e2eb7734aca8246cac23cfb9e41e0431924ceb035393c689ba8048027681f418c2fe9d7c40e4fa6f88f6e9bab2e845383b461deb3c580743c26bd728dbb2a62e5033759157c54bf6ce371dd0444255e3585fe2547dd8cf0e0b62f86586a18b473e47bc069b86b95310d7d08d3e53caea286d32eba4aae8179572d4fc3a05119887e6d2e08859508399a65d46c685bf0852b8046b8c2154bd76f8b448174fb49b049f6cdfd2d58bef06f47daae06036e689b6e55b252d432c8477e76c9daa27515764d9c62f8bdaee919c3ca94a2b3ac5dd4fdf1dc174603ea4b85e76744f3a234599a61b2238ee254bf128ef2c9c4e562dc9bdd1aae1b61b4f6b279660221e8f88a44371a3d8aa965007b37ae8ff95370ce9fe0b04a62e7105eb25d4376528ba934a2007cdcc69104ee69f316385c26a61f0441190147c4abf3d9b83128b9a9817c255521048b9461f6ea33247470c5fd82a4b52bc88ac6df88d42156415c8fd5b76adb3a6f5f989d24f9a2577fffa13003fd869944b7a4f2aad31ff6a98e507d5dd5f8712973e093b4fe62ef13e6413e0b3b12df78b662ae45b36ce34a1b270476ba8e3bb4df1c320909658fca7d50c93bfe064735ca402a0f520e6d89e661cccb07f2dd4b4f3f314c38b6993cdbb24281bb645a049af4be97c5a32c94d0749a7e5755582d8f797d3b0054fe586000452b597d3cb5dd91f0cd14f4ae7d34562dad1b6b496c65e88a5bcd35f2a82ca75a0a1a7e4c188325b7a2cae1886066c419722ebe4c505457b022df0c6f94a447254e5ac5e5ef3fb59723396e0bc02f5e8d7d80c2d78f3f1f0d4aa1890c4ce2dfe15393f5b1afd655f30f4a30f7c2d9c7b3856e29b4873aa18ceba5aee45c0751ca454fc40de35d1c9f6ea9ac47ea7efe7379f39471a519442ab993539a2b709624793b82a1f0f6d2094a2b3b6f41dea8aa0da3808ad847c3f092e7a882f62ac4235d422c0e78dd08d496fd73bf42965e18966001493091b6f68751f2db69f029d5e6bce81165b6200512e2c1f4c32f9fbfe47b6ca9c6041a9ca9afa871eb7795c1058b14768f5e48054e7815a361d4e5fa4ac699eeda44fed7d80356ab547f8d7f0b448cce420ef6d5153f16563911213ab54550c10e043ab1646026e5c941450691cd60ca80a985ca4fc11f117a8e1887f8b491d52e573654703ee5c7a27c7bf2ec70bdf19c59381021d8c2ca4c3decc4b23dfb6501f58db4177268d334ba28464ba87d62381d39c5f2bac9c8b6f5b017a257cc950fc0487ce650c5f2cfa1bbf59d93e12ee51a43009390d8dc2af6a27ef41beced544dacf5539288c75e331a76f10687529f3432d0b57c44fd80054acc7099c701b49c3eddec043a82b40ba9c2af5a46515684a83eba9a4a379adc7bce4b16a8ff12e80d4d5190e8eac7933923e7d544a87edf14337fe5be7d80fa606085e823ed5a1b903aaa30ed63d5e741731b356439bf15770cab2c662ec4f2f56b9385427319fdf7d112762f03f44f6fa29cbd584293a82b584b4dab21178593e450a846d0be8e9052873c9cbddeee92e51cdc842b22e41c3b3777979bedd61f61b0a8a4459b09f3f6684ada67b40818b0f41dfb7be4bb327e51e0f5974826bd807a221d68603d4dc429bc3ef8ec9b480e8817c5163ed8a4707cd7d06e1509b613fa931be8436f844fe00a85870f54a9f8aa7886ea2d381da2b125ec861dd0e54338fd6a44c4d8848d875f8a6323f5f22ac2c49583cd7b92a6d42e76f6f53cb5d29a19d52ca5ea0773105ad6451472e41961182d019470e5f5047bf3fae6bb63ccbae3d696c2876288dc308247a3b4610719e04a58a8ccf6c8780a465bb2dd9c45e047f0aeb83d0e8fd210939879c35aae653b7d09bacded06bb022d6f45542fc7d99cdd022cfc3a956ea13e322c3dc1be3192efcf6533b222eb84823fee4c34c8ca32050f9ef6fe9028253cf76c6968e34c2f7caed2e170f949a65502736634db5f47649db7995c937e0a2378a5545cc510c756b9eab090e23d1aeddd036d303d12ba7fd43756c81d764ffffecdc4622e5abb6fadd703792feec49c6cf62cfc5f774e5f17876f61292b150b47a3e921d4fa6ec1ccc19e7808351e26b94dd3c8edc21ce6d77e84c82ba27ff4eddf74fca9de9ca7848211caed17d65708970b21806b78b95d0c595b17b40f5fda2b795253bfdca8428d61a200a68b1a2e4d95becb853460602265b9c35766e72b23d9f45cd49eb01a58d7af94ac63d911df7c3ca77ab82c86bbc60bfaea2df5e7a92a376038f406cabf75bbadba2119389e3752692edd11aec5932a2b215a745a7a49177bbde80d320def3ca0982f279b2ebd666f9aafc6123686962240665b12912914777f872aec5e754271520c0afad0d0e166528b50545d9e12c3fe4e4f3805d7251dafba0eef81b11301e9e4c106dc2902fd554490a5532c73c047db6c99e524ad07749f029498c104aaa998d0277f6ed3dd3b6f67ef5f3d06fd692efc7c54567017315469451eafbb2a37605b395e6777e6340a97dd5e8497679d6a502af941fa7f9d6b8f99ce915ce4a9bc415caede343a90b03b625b03661ad94c2e6de865fdd7b760a5f5939d77e9490cb10b1cbb0e96971e7b0bed13db5a4cebca90f94b306df91a204e98f649eb4be49cc6b11dca07429aec2d6bcea06209b0c839de01ed8a4fce34e4a3fed2b948366eed8a42d7edef17044276f388c8ffcec77855afc972c0f35ff0a8a8ac2d7ba7a7a0cd5504a203453de906cc49ab4d061ab9eb1a79d54f75d241f41a1422c8c5dbffc68004cfd5591da2010c9277341a0ac99bd26e0aca6abdc2eaa51a23388dd344cdef55ff0cd1c4c2bb0dbc1cfa86cc6d0b084a83c8477fdaa6436fbd74887719b689d80c04a1e7976363dfef9212b891ea1f3c601c46c63843eb95475faab14f564db6e248ae8719adfc132baab90bdfc0585d0d498aec0c9cb3987d97390c930cf0aa278fbe50ed6b2a7257976321c1d731e471b1cae2c15657acd36d4e067c1e678c05372b17a3981560381c42bb56fc608c7c0f686ea7844aa09b35d16c5c95db77ce3dee696c38675bab70d66e8caed31448baadb373d4adac9c7bccb4377118637c2b9badfd747552829bb21afaf35fbefdfaa47f14ae4f635051998597de700d69a765ac8817964cf0afac45787a9591a74d096e4d9045f96af4ad30dfe4b3f60318891db67983e184eaa8f9425f3c5c0d06b3abd04be049e03cd7db0ae1c8f4732d1140e1776acd61109e93f426bd749df283d3acb04186d8316fab916675b3bc4e4748ef05ec3a65cd6a61add2cac3efe9bec0869212d6fff564c304273d1032f62cb52d44d45ff5b738b1ab523096e4629b077a16bda63af530afe46149d9c969816358459dc58042f0fcc6b9b4958dc6e861843ad94dc2f162ed183241b5777ae681cf24de56388391356f9dbd10745b22e444a617d8f3392adfc293f8125acfcf95a59b7ddc60355575f606b0a970894fd532b7649d613e2d390471b4d805364350bd90ac38ea3a89301cbf269dab749c119c3c0f5062530234a139618df41cd97e91fa7a572e33a38f981ebb047ae1e2397b303b151a6e023d9d54026f87bea6b99ab2aca246d4c7feb0ce4b3443bb37d23dcaedffb44572f6039b5ea4ddf33bbd7f53c941b1f2dbd2bf841418d977d50d8893126478fbd32ee95921c94f48e40a543f3a901a5a46785bf148d1a4c2ba4b94309383c046b24cd94c2bebb363b74b1e8f4d227a0d95443cc6a289ae095a0fbf6591201ea7ee54bf6f3d72248e12fd6768ca5ef5438eed200abbd753755795423579195f7b8cff0c6fac916c2a5cc4a6a0534a4e870dd6da94fb8e0001919de7bacaf0da8954074e0665f7ec3615c40057897d1bfd676d6702fd120d4d8aa56cba2780815cc7fe299136731684c671fdcd86521c8a2fd1d0d7b603220c77046772bfd5e4919021e89f677c3a2b530d5cfef2d87074a31b38642a5422778f8cd032a33bb2968826da0e65439e512f2dc9ba14f0f0bf4f75277c1524c32fb99c99a606a60e615c7d9d48949a8dc1671e7ae7ad5b3f5477cdc456f82007ab2756950c4528b4a6a1c45ad181d127e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"5aebcfa0f058bd6f390be9c12d1a370c"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
