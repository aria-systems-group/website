<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"062f6b8563d32a8840df07799368e114e6efbc6e8a8cb1db83bc4a030b27caff483408b8b73e4c711ca5cd2e75214e42c5fcf7494f1607f781a54a471eaf74e84cff0c7fff477808d350e127dc78858efa99cf681bdf6517e009202b987baedb812dddb0c1f73759b050928239b10cfd3f43158d9f5876ebdc3918f63b5be4f68a86c3c18023809e8a2035b0bfcf55db440be9413d84256880c595fd41e10175c06f9ab5037f8dd93ca881177136e871c7c3bbcd7920363fd7157bab14a47a8df04151a25a1246c0c182fe1be5ad39fe0080f14589cf0474fccbf72db86a44965d722ce6fd8bd4dbefdcf663ccde88a46ed88195da7b83db1460c783ee617e96cefd1d148fa71d27213031c7f43dd1c242c5c176670972c684a5ab82eb01da04928ebd837cc0287279d66b4c7bda7e6cfc7a0566cc6da3b3e7c012e897382215eab1862ff256a1f4809355896502ca3d5878aca432874aab31d792cb59e734526414ece1ecbcb988788e4a329271566997c06c8ac5c075d0c3ec19da501bce8b05945b1f6a23eb436d8eb258d088e6a6f9090d1836beaf14a1d4fb2ffb1249f88c4b3624c5eb0f243a3ee61242f7afcbea72fe221259b46da1107604550cbfa1112b6a5af1cb9c19e8bb952ee118845da363cbdfd7f0e151c8c71296c0650002b168ffbfde11a801cd6cd1ff011fae7fcf96aa80522d49dd78fba58c18effc19e00c1ba88e09a492bc7366dfdb95551d91829db5bbb0c7472bb38d7cfacd8e082186e18770150747ad1ff48fdd22b9616db1803ea6979e088687054436aaebb4cf0edea39389f2eebf282acefeb96661bfcce197685573675d95809597349f154145fb9a0b3b691ef6eaf6c4b7d42a3e4a0f2f5188547e730ff1166aedcb39a93fe43643457255727ea15a3f0bb5a34caaa9fb5e1702becfa0b58d0dbccc8c99befaa3c339602cfec597b5b5bf07bf24d3cf5effaf035f99712072f95073a024c5ea2955c686ccf4bd8ad5aeb75d4ab080833d45789831f9b9c2c4e5fd6b277e7af01b443287fbe75d600faf6ad04cfe1f1482653bae77b5e31a1b41bd34616a0bd53a546023bd5290b970b0015d97231e7b3ff28e16b1fd6efc62e316965f6297cd467025f191985811b3b59d0c9d4e2cd4df5ca66102431cb11eabec00b3a5bc4babc740740448b7bf9b9b6e35d7ed1e698a7fea80131ca629a81ebdca97f2a9e0a0a4841a6610017132d95c4e1611fa5e4adf3a4c542721a8aeb3f3e2e518b352cf3e468cda7b703b14bc138f0cfbc4895f4b6174c57e8428fdd2dd2d0971e6acd12c29a19217437f6f7616424ef2f83dd4080e16622040f4acf0c29c26f465034d09c81cb44e8108d687db37aae4f6a3252f4cad9fcf9e1a5e0d6ef5ab1765f7a423a625663625473290b0470bf698edef36625f0f5329a77e30498ae39b1805a61cf975871536c919b72a64f19e47f91db83e1b792689ba8ce43c93bbc17711ba599570447396b7a74c7c3bf8ae0bb3d39f8462fec390f146b05742bb242e66d5974a7b541c1f7619cb526a0045cacd021ba728a04fc20cc100e5bb6b71b417038589ab4c27964454e8d8d4e1c92d29a51a374525324de3f01457335b21440df8007058c6f58055ad3fb8271d3063020b5119ed4e4ac35beeec8b8a1f86314d4972224fe2b1a3a0afac8e2c3de10b4ec249c25ff6643aae4db6771df62f7a3de3979446bb0152a5595fd3ca49e977178ff7e1eca738aca6f0294fbc935e85c3a0b5bc30f9835e43e90bc30ea84467b23f7b645640d100a55b0cb44244721e676d3b4446cd38ad0151f8699c1129ae1a7cbcadcbaf53ac4a5230d94c33b1bba8b617cb81ce0de2d78509fe7919603ab0dd6a1ea120007ddc18d6a7178b52486933f0a3edc4d1b41f5f8507348d08100ccaaa19370ef746c0d7a5e33be2b74466854975206ad618666fe100c198fb7b188e4a0ad6be113ccfae38e729e4e79d0e2228fe64bff983d5be6813597e6243aa76d9f6aee9c3c82af326c9ae759ba93941cb034d9b2812d4364717ca867bc5a1869163f08e574d2c0c099f0f88c8ca371ef368e0a35cfd8f94b6a635693afd7fcadc3d9b71ef1c8ad79a6f2d152a776725e87a27e9329bd35e7d1a465d56ccd93f22df80459412b3812298fbd4730fd8e459afcb85c37596e0808333c41c1b5b2de2fdfa3f42344a072997c773d86a6c87f3b58e21b14758b9af86d73efbb52574d392bbe9cb9e9f40b7b7e4cc2c3785d83e2a55616b23e506d34e22b0fa07eda0532c4b939bfb4842056092619d4d26b6cf53d8960af42f118257fee58f98389b938145e2dd0d467ef64d225751b7367c120ef4e13d1f8427db31f43d73c658b95a57468762a1a1bf5107ed5e81d5df78843efcc74283ec93fcdef82649a15c67b0291e5306344dfafb47aa7f40003f645679d261a48c82fcd4f1fbb5dfef9469965b38ed4f8832292a9b8236e83c8ce90e1593df332096f61f5542b2c7822a1b8420e3cc54bf671a9080aea830a3838673179883a914cc3f346dc6a15ddd3adff67db64e5993efbf89267003fa845161982d230540f463b21b05566f9f429d83f614231bc38a4516842a60c5e15140edcfb3be54cfed6190f6cd475cd23ee3a441fa240280c1fad61f3f625939e4ebff16471464ea59be725c0fc66f70f152808d5cd788fb5b1203b71042b9b4b8b4d17c1b9a4359983c5adcbe88951cf3914b40b982b327cc41b2fc36c37a07b7562d9b1386eb741e348f0bd485c5bd55681faad0c1662bee77ddddb33673c932f485966f133a51b4f1765124136d3317ab1a7635f04bb7566cad3f2b7594335f677d86c68f388eef31cc87574d471c4bb8b749dd665d2cf3cb5fab4b551a08e786d85f5bc7fb3d819f78d1c7ca900e82aef78da2210ef2839f591f6840cf7a381db390b3ffba22f04a25099dd98afbdc3b93296c5e1a040673919cc978feee50132aad92e71f3cd53c70f27a10fdef0cf0e56a218d0af4941132deaa6e96034a2b965c63635da1682d97e5b11b90d93de78a9f78814f7ca3be970ea4708884e95c742cfe9c3ee7c1c1ecc4a99e67406adec8a8824798ceb14849a906a4443e71a500f21c679e0693afb4d5682623122ed6de584da22207f39c7db960657119953abb0587e66fbf49b0fad41ee27f54d70c7d86e69d7c8fa06bbd9bb969ebe0be0930320379d04ba9e67b54d91d06d7f0dd5658727188807621a686b4968999ebe223def29663625340911a9135898755cce657d84ee1b29e71bfa57c28abf7bc8289326c8a83c73fba18be024090f9957fdca286f5ff91ba4f4a4c3212e3be97b41bd5aea45f312fe7a285483cec2777c4a920f377e9dbbcbde136b546a1138b34a99e71e383739c7343f64c693a2e1d62c8b41139dc7ccfd70e1107fdfd791046ce59f24339929fc8807be6c9c3daf3c93df0c058b1b7a6f377c3b823b03469cacc15f8cb8389661049ddc69156809749dc111914c85e64503c031ae43a43cc44ff7839143de1fd27be8985b79eeefc6811380bd49b77912b5134d61977f15076fb6b3904f24397fde3ca39e4923a8d94b9991d070220a1dcfd2b1b1a48ab338cbf985e8f4f7028ecf7550d2b1ebce5e5aa89776087240127bfc07320646121b8eb942441c93c62d2dbc456bca344c92e2dab47a72153b36b91126f910f1d75056e00d4b27bab68e89df28db96e94d828ed26fdd5565b68b0e74ff1a2fcec2eec753010e608fe843ed2b9feaaf1e7130a379bab7c94fcfe7f19a38529d94ae5ca66322b8604524631cba60c77875ccfb2e2a4787c2daf7bc8db2631177bcce1efcf51912bfd4cc804189c6f3af426ef1e46c26d01e9d27d392aeb22f08a4d2fc245d1941bc5a0deec3473386e34921c72b14683e01cd156e9b8866e7f745d8ad015c072a20e356076fcf36d018c4e404acbe0788d10191449b1a907dab078cb3efd5afe461234567bb9bceca5ed15337f6caa73616f09ce7bf6ce3649268a45b7a5b871d4e8f4df26b190c8c06009d5557afdf46fa310e6bc45e17cfaba953736b494715b225e33dc54520b438961f34412f27bd8c713940f1752779a3f121585996534e2f653578bd595fb9e32b210118002eb298c25507aa1057583975a2aa2721f6c7569720b287ee4b724308238348fa8a2da542aaa424c702f1a08da0612e0ee51408059d2e5300424004eaacb5cc8d6a84cb29e2fa5f85aa96d450c888c1e6888a90303442809daf2b7545e8b5b33fcd539f64a8d85deff99a57077dbe553b14b2a8eed7af3097b7684df8a659932aefbc32063e86b79e8fe24d1587780a07cd23baeff48657023fc8ffaab1d738317c8a326180589357e518b44a490dd62a1095060a1fe84392cda1ab3910e847c50914f15375a3ce39b49d12a91bcd861454b29a803bdbb634067285f260233a74053fd3a89e0c402fb7975afd2ec44c7a7fa6c4cea6cacb2f559c512c9436e0b297543a150f7d7584fd56af5906a48bef91358ec34c446c3e52cbcef2a96f1724f99e57944d4b136bc42ebcdd0833d2f5f822d6bdd074c3f935ba5137ac06279950f77ec36ddfa678bff6d18eafa896ab9941973ef97e6d9ab3e4586d0f16d0032b7802db5db11e02b631de2aa0b3b0c9b569b5c9043991fdf3d8a3fd1cf8fcce1c9e12cb043958fb724ffa66d3a56b454949cc3b269e3670d0103d337d2c66fba7dde832725d183e6c353577b6ae213fbfa6d2401892572fd14ae984c96c24099a713e95cb68e7e551afaf7ba61c69210b7e8f94cf1e911f00942bc194693cf70bf99f7aa7d0bc084aa4b98027396915ffff17b6c8e9315cf5a1822f500198aabde7651be007274a92f63ac96325335ba2807212b495487cd97e12f22d7ea61a1519828fd979fe2f5a630602a25b9389c81d5ff8d630a4d5b1660839e65613c5983d4420fbb0cda58acfd29f5247dad304c9fb07b336839103ad05f966dfd9052fc741bae19be4c1277f600b5032411534b11b03d997e2547bcc6bb898dc3bf3de58bdc18967182053b664cee7f2c9c359b0427f46e74e27baf4de3328ba83707a39762c84ded37a2b43942f23845ef5c4e7659fce3a52304c8ca210b78fd71cef13280f3fe63b6c6e6813eba87e30ded177c440a74c0fa0edf096522aaad923a80b868119118ba0381ddef05a809a684615ede7f8ce1fdac5cead194cfac9f414d59e7104d6b653a677e339bb5b526bc0f230fe7cb59f59f02faf496c2c2e6853c55cf1e4b68d7dae5925b063d182b34d7b50f65982291997c743d19680bf22c6ef27408c3b343644a6c87ad24c953893b6534324c82041e1843bfad92aa1e3a35e84cec10d3b9f346fff218d72cb4a61bb917052de71f8ad22fb3ef6bb88856a3ddfb6a0570139c74f73ec51dcdb8ff83bbd4d4b9618ac72fe7a7d4d049a168b878d969bb0052da1151549de52805a35fa767f43cfe958a16cdfc46ded1761ab1f8ff916703189e362048a7e4ddb04e1d4f7dd8023a778966ece0e587d7317d586d2e30ee1d7901380bb2419ec1af5f6c953d2657f2dc59ed72685b249c399681b2dc8e7f5d4e159b2c23084dafdc9582f9e46969489b20b7de498dc97720afdf0189a838c7c68e698c575f367fde245b83b183b4360e20733692e1a0691aea66682600ba239af27126766e4d147ac118ee1f7daf5d37653c89eac0672415e49f5f9afeff206d93e4a1fe5cc83500c4b2b9758327e76fbb81dcb45459ab3fce4a1ae1f845c4adb0a7515fc36fa2e53954713805e0d17623b226e1412e3d4c5b3c8d2698f5c53186bbf64be4565b5ccc9f86e29e5ac2ad8045d3b8ecd7f727b9769a6217a856c557590af073358c4b2aea73a5cdc70c2f5b0b13a2b57530ffc6fb2a0f96727cb10db3422feb1cf299ddfdb312dc625474b83d9507e3b4141ef8dbba630ef00b8220d65769caa0e55f9157849efaa79c9cecf652ff2b30972f2dc28a292c98ec40f0d3266761d502acbc92b45b2a04e6f5a814819c86992b1b8c46477e0c0d899fc2710a9c0ebb079e464ae211b7bceb4b7c7468cbdb11c617978f8d8fe9d1d53e3c9acbaaa9a771c966749d892ffd29f77822daf604ef4e219e6fd7d741d3388964f477bd251e1e9a9288d881cd32a2d6d10f9ec1b5e680105113bf9f98dac7580db4faeee13cb91214b5d98ea64a981e53d195bf63c20ed753ae2976ecd94fbbd36b221c0e48458d11d63677582bf576953f8bfb9d3c11936fadda29ffdc171bf3a74c628cf51f252f9f84c1d6c1744f797a060f518ceb645ea1552c28c5251a1dde17d51759ec648952f1b0f61c214de4caddacc6e3c084bd94c3902e6eee78e73a3eb29c9a427f9a34dcc3d2a01c616a0180eca4ce78bff7e5c119d5473f30e610716642c38d4dd2d7dbf2b496f4bc9011ec0f41f92f89471b108af7b6f529636da19e84861e3e6b51cfcd5e196bc598ce643b328bb8ae3ef97e31cc6368b5ad6f5d3b5c26dc62d6c5e84ed843ff59f7e0fac7940802994cbd91202320c5c0a84ad136442cf334c299f02c54dc67e9c6df615bc5f2b9d416f8d1b0ec07d63dca7842a923e4d56dff67f045f22dcf257dc2b86d3a8c3e20f1170fac7f8c5bfef8b32b267686368d3b318aee6d4ced607f02d17eab7c506c6931215fbbf22094a191711bd95962b4878ddcc5c80c7a93b30079aac0fda36f288fe6d98ec8eccd60c0f260d07524cf7813369d4ed4afc33bcfb915ac33a5e452814563f9b6a82436332f1179b10c75f056604e39c57282eb04d5d622c229a59b9c7cabbd5a17d5235d0bcb0f1287a6256d03a40804f5b42d95df70761613d9345aa84722b0809a6e04f5ce5841a904ce368083ed8ec4ef24839fce88c12cee2cb871d353fa70a7b86c5f1d2f37ca77247c577df3c260b848a4daeb142706790e2f22416e18c34174daf6ca7b501339246afcbd7f1c1d95220c30a6c2bc406e8215122f85bd20ad59fe31148ee3136c97bbae6d9964bd58113e4a83fb60b22a83fb119616ec25cb72faaa5bdaf78fea642e29efaa01b46dd40576b93c4e4d0d31167289dea6ccb18be398f600ccb25850a3a978f13c65c7bafe72adaa984c34e9860cbf387ad601a77173b6c884d655e495a4d0b0a88c1bacf7add1f7fb2e9a7aef264a3c4f3153b3b33247ae9fa3cdb7bd2835b5b99e709efbcc1e9e68a9d44166b95a1153d9dfba3821771f065e3443974d0ca64f96e6c533877b9ed311bb4076e89663acb30e4b6b59a2bf5d7eddb1862f5d95f6168c29029b37a2c1cfdc4c6fb31ad2ca24d8c8e70379e0c21e4076590b601119cfe9454912cf0cb0bfc38b675e5225e451acb34ef533de05a7487a6dffa140124449c9a268eb6cbceb03ee22ef18de73f297efe4a8b32a9736facd9ba9aad37eeabd260e6484c81649cfb1359e68160229cbef77b2393be61684af9dc9c981f552fa3b18a083a0f2f3a29839fba65f9f7ac584bfc94f53889c158f677aed17933c11b87c904a395f7e0c6d6490356d88a8cd9d73d815bdf78ac3d1d9994d65d9803df1503b82f8372a56f693117d41086322298b98d267363b54dc1592f38e2c746eca9937777809e19588db33e0222d6421e9f83687547bcac3f517badb48ff1aa0412397f5a8c08185103fed9e328004e4f4a10a5e7bfcbca078909b688a0cf241b30615c771d5011f24951ff29e87edae7a9b31929f68a3a747d53c9b8a3cf1b742c7659f2aa1bfc061264d369a6bb7ca92a9080d80192c513592cc88a8eb6076a8aeb539ce5a1e752a10994de778ec9e55679653b27d2d5340df3f6ddb7975a23390e1f3f1bfd5cb1ca0f4e7e3d43ec23d3bd04811b91abda99951437753704397397639972c37a871685d0757f13c000eda764a65d9e61dec7b78bc6b4a1bf3545ddf68653ef5eafa01034624f3e0c99cb29e8dc7e7391fb7db676d694a6dff467eb5683f02645a65747300bf9b53f9d2fd8199509ed52bd900806b3ed24d7bae82894a39a29d403370350c97dd77d64eaf83f84a1f5f542dbee2e81dc6b6a9573dde82de1c4aab40cd2f8789236bbca5f4529d743512beaca4459c824eccd5bd05edb8c063cc3bd9f6295dc7660502d1b4741d6c25c8fb33731e02ac4e04ed58c9998fa4a3094de86607b32864283faf5995df33db397e58842156bfcb2826c93fad9d0f5c297d24490594156d026f563887bc785076dbae65d5574dcd0e9dab2bc0a42f329738dccae9e69010dbd0ca496a193b195c1f24a5fa7cb0c23230b7fa40b1cdde4ef630ee98fff8c242dce3cf9bb304db2ded1d1d4ece3165b0f5251bc13455ba76546c65c6e605eefa24a2c41ae9967b5c03621cfcf9b31011fc3a5e764e64c946a81aa420c0e794bc74815a2739272f0b27b71319be8f850fab7aa33df72e70de67af9dfb0d55735b8c122b831307100a0f21b5ed761b6921cf12aecae78d6f4bbee491fc5841fa289edaf366ff0f311075dd45f0adb213466cbceaa451c9a0fd7896dda6398621fef33fb862f4370a542949191f866118d1f0c07917d3afb1f79192eecbc2c089193b3770d0badc511616b0ee7768bf5719e60e662642e201b74c62f383e4469aee371a4fcfa388577fca0e9093829edf753a0c33ae6768ad652ffd5a1504e8663c00a64ecb935e41f2d367d68cfb4023561663b078825922c9ca4a243ffdfd4ae2dee448f1cef90abb88f6c06504990e686d0e9f55ed7a84ce1498d64aa76ce344a993417c564f395e82da33f16f61194899b4cfc0b6edd3d9cac0a15017b9046006ca5f829045b3575a0ca6f51f594c02917001b0dbd766a48f369c903552a885cb915226c3686798c68ef2fe4df6f794cb945b4b570c00bf2ecd7d65e171711a624583c4f05b483f2a482578e683e7e2e3806198eed64121829ad8d3e95cd367ca2e2e90af76d6e5c8fd9bd2f262a6a02fa307f7ffa9f8fd62146b5b181c183b90a64a562b23655045590d0df1a11e78a5dc0856eb2762d49359c472058df6891d63d9f272b224526dada06f6f21147a1feba69845d31de4bf73308f83f2c7a30358f324d3dc9f0bddfd613444b147b0f33de92cf6c2aa706d2fe8cff6a9c792aa7d3763de22459f33f6dadaf0e0930481cad921c11348575bda2051537e325a198ec93f1cfa6a3e67098ca7f15f2a3e10584a540058a4a67ecc0067902d3743461d96c8f14da0c3ffe27d1c87792c11598410ec794dcae777a11bcf5611c8b2119ac388494bb0b139e29acbf520c1b3df370cbd3a6aed6c5ad1d708894c11c5b14e198651d089415d2adf6e15dab3ceb44c9ce7dd9dba17d2c7b5c234f737090e50116109ba01d218caccd3b023eaf7918290467a8d97075d70c8a9b72d0428aad32aa7cc37254e88b5cdfa00b924177ff95fcf2f5fe35b224e297c990f3379ee0d7b1f74a856fa0e92b43d1ca748d9d4130b1da7a8f6dcf0f5b5b258b5aaf5c2d6d7b646a6bdf2a6c92cb7987b1cede53abfe324d4baaa34683b0219d13818f37df409c613c68171dbdf05fc63cbd52cf4de64d815e31c365b05ad0989f89a47e7ea37f93cae0323e586ef3a3c56decc2fe166d8e35cd3d63944ed65425334c12e8522f3b2e605d568188ff63b95aba14ad68a292f7f5dc3a487573433f957e6e027a15a7304ee87490f3c5fc50d7302b1068ac7398713c6cbf9eefb2e5b7ab77ddf49aa5c256db38f87ea275668c0052071a7952a5156a11a296970b511116171917f529b86ccd2467d2be101ba2bc738cd1267c33b730d518188267bb81ca5700ff5df1f8dc1d22fc365f883817f3c28eaa58582a5d1a11536229a304b1ccb17f509cb9686e64fa96ef31d79ec6fe91bdbc36d08f53b2dca15490a203e7c322dd0bcb77228d97db6b170b3d43d50e6380c3a70177b44e4bc473c9e27ec8e0f2c3dcf41be8753f6cd6a26b44f8a3b93f56a5de88e2e9f226be6e2485c9bdcd8959d3cc27a84840cc29406c54a245515ba0a9e6bab04b009b7cc436612d1fd5586000e6bec0e4b730ac76ffe952fc5aa81a08c34dc5bbb646b57a711c8701e52a17016e6120807f8eeee35704abbd5e3f5e026569b506576ce7daa83d5e5e451e39a70655cba9400ea062a99ae2e09258ab67b46917263a95d31a8c327f21ef7c24f8aad2bbc4c8218c70acbe0fc91a195cb446572baad715c38ca77d44455416e7d539ea3637b93ec9377f52b4ccf068e6c6e85336c64cd68c53a8911b8416faa7ce7bbe13c5986f795b98d3432306c4de53aa6e52c4e1beca4288b35a3b940bb1c6f82793e827a5fbc3a78394ab43f806dcbfe2fb3e91d55fd7ba5193d88c33f8c859329b4cca626c577ac51d244a68d2f55030a9bf196b022c05bb2d5bc06707f155bcbc08cc75a3d6be0d254813e54029cd1f3a897fb57c50f21e807b95bc97c5bb352c97203cbee58db8bb65589e5fb119ecbe99a3130f98f9ccb417f9b9d03447018731149b71275f368596e694f9739117fdcb543f2ca2bdae11911f026d1ed872444e0b3ab5006f4baa01bc67582418b2d0ab66073e8447c1a54f33d05aae2f25f8ed13bb814611f1c2e3e34894b22ee899fcca6c7cd5a5e72744198d50b09da455f64807d996e80c6fa6b3fb15984501a07609b33fc0614ceebd496e4d09bd4038eeb655ea26a906417ee5490b86a2e3eba7c2f5d1883d7284e3c072e5ea4355b77a938ae4343f4fef821a08ad8b61a16a5b4040bfa864e44f9ca3c79bc1fdebf7d01a758bb9e2c2293e0cd6a28b9406f115e1f2f8797ed3376a3be642fa026306bbbfa121f6eef687d060751b848b573d01af297f110b7aa88e384f3fbd483fe1a9a6704d9cbca5af59825a725415c6b71a28ddef0758972a48a27dd4d6005db70361a18c41998c9fe6a593cb2dc96fe943f6db9a037563cb6bfa9400e734166574083ba3c9694865f67459131a5f9b1476ec0ef6b3df478a108f9b07a473c64515dcc6f5698d56bd2b0d7137b267004c2c453820495eb57bfd74a0efde8f19430fdba58863f31e2f6f98cc18e508bb04ce8ab23176b05b86f3e06896441d3ddb43c61ea6e7a69c38fe93a41ec5ad8194c945e6f9213cd94ab13e73f7c85d49870ee91ad55bb14b321c110d00b7889b187574d3da952c81a7e9469c554757f5b144317574b94858b0f91eb0fd75b2167ad87c8858673c2e9cbfcd3505654f2ed92524c5abf1e203cc0872cda1d88638d4863d46b0e2f17649178159e7e5aa9e7801a21f69099b1f41d2780f893b16004df4b8351555b87e5fa11a73ad31de59e20f48fc9618cc1b3bee7a89903a03da90b564de89981e310f693f42c3531e6d8b53942286e8afb543d2fa3e2e98efff9b2def9d924aac1960258296bc102741d633b961de5ced838a0ff87a8a3f57480051e243a092103c5c5df5799d7b63a5cc84206981bacdfe299b4652d3f6e15a0c34ca9cbf4d5785b68faeed7beec764c53a9a550d36f88324de5c18a0c8e40f797697477c1f6abae73cbb546bc4a6febf2c6ccffd7fc9076e08755d58bfaaf0356893c793cfc6f745c55155e56dbbfa5632534c66f11a97111c1c6414577377a8df366d590377d285e64d22b1ed904bf944d7506b651760816443c7d7611eac07341b6680c3c35d83fc26703b4bfa6ec672b1e63395ac62aee16cdf8ca3aaf548bb8dd7e1fd7da5f5e4a9f17f27208425a2d9aa76c2fd7325074e55e0a268e416ae2e806a7fa7108d4cbc02bea9be397236846a06fd5d620135876aff628035cf96f7e032391f231e18ef73e8a0ed3f2fdd68c0c05d8ebbad935047cf145e3ec5d0fddf2d73f53103964381690d30da95e9b1254cda9a4dec727e58be9119fc61925e3b6ffb82275a8156369efd4ad73f35d399ac0c6b55ddd12f49c6f961a4ff50c62868e8eefe3b959cf44cfa2b62474a961368f33a3533f576b8ef2594ce2d5fdae0736ae2fddc2f7b7721c8f13ffb28c278522ebd34c1aeb1a8dfd0b2398f86c2e84302307a11183d426468f9aa88795743219b6068ed99bc0b5a77f5e8c13ba4b25914fca76ba0bc5a2a2290dd7d3a4aadc7b23f63cf68fc5bcd3513797786ca858dcb236e9541f2b95f7067f5d21f6331c894953f430410e6f7e67cf4768f44682a970394f4e66bc439f6b2ef96f11997bf2b2d1d7188071bc60187bf7de281d06ed30729eee50899962834a6ffbffd61042c6d9c70dce8f919937a842f7ae07e4e83ebe0eac12148f5ac1b6fe9bf34e47cf49d77bff9c06ceb929db30701e2e63bd547abc7b284f3d59104b350cc2b746bf39216e69f5c736e460622c273f4f9b2049e62eefb32cd99f82eae5e161f4cf8a38124d36607ba26f16f9359cf3c47e1824955b39c3641aedf357ebeda2efb55cfb5a32c3ddf90b4c26ce777246845a0aaab1810404772b26c7512a9a3b69a851edc9f6d3c2bd7e6b0f6d470b056bc02260f656a5a0b36587d292698589df5ff1b11c10e27ea38728fdc291f12b3f1fd4f630a85b96057d5b4ec770f46e1961f3be5b934d62b2af73ad1cef12c6b270217b92096261b3be118bb9a23dbefdd16b6e0faf978ac01c4620a80b66ff6c9a3ddf4da9840b4ee569c35e28fe7726c860e96548ac677708322284d81d60ed9c1131693388c7b1393d4602d2f0d2cce5fa9c2e17975ab4b0d6da9950980219c1a5cfe41747aea1e1b0e227c451c9192cb54844fe77c2ab227d0d50753b483f063ac8c7f44cda3ddb4e785b47a55c514c4afee83eb92e0d8afb81d5cfcbc3dd521439d9671ecca5e9633140d67f7f5cf5c57b0ce56768280b02e06b61bca48cb04c7730b701d156a140a34e499abe0513983df6344a14870353b0cc2d275c99173289143ac195a88272102054a95514bd928d58aa50205669d9f2ef89f43b3fbbea745cc3567bc0e51ec8b64347e3f96e582feced3f5859f433471b33467b677e814a3ccbe0807cc621f9358f8557c53924c7bce956eedf910ababd74503eb059ec09c63e5cc178b1b355f00c40a80f405f8c05dfd14afafbbc5e7bed89908db7f394e8cd820fc3ec3ab9108fc5259be5c9258a46ebed74a11aac69f83b36d1ff7eee1a1dc5319826746cc2b385715a82fef312a940edec8e0c980b900f52bb53d89268102db34eed086392375a0a74f22754f31cccde72dac57518ac5edd2501f83e959a46766f5f1fac46478cdd2f5a02ffc2a9e3d83bb1453105854a14cdb8b1a4a36b9564a6e594ac33a674696ea9b4f5757759e0fef4a2b8b28bd85546de2c6e73cda63c54833604f96c2c153aee523acaef5b79eca6882ce78a87c5cdba01b4a2725302293fcd13a895584b57c6528638012dc3105ea647bdbabb83905098df21d7af7b4668af9d10f06a99df911dacfbb23f0a2487edb8a784646205d388ba11189c2d685f2119663405a24019115eea6135323672ffd39dba455293703ca89df9cade74ae7bb99ab2c5c6c30e2b85234de1f01c0e120dee1d0335cba6cd114a21a15639e98eeb2a7f24dc0dd234c5168359256c420bc50a2e861393b5a7ae9b0c5ecadda6b44d1dc899a16117143d0f46efb77dd65723a6deaee17abcc2cdc5ac1ab35a1702218d19d72496ab1db0a696e18275b72161e3cf1041817a5026fff6225381a7bf366aa589bd39e05613128d23df0973d338ac25ed3cd7bb56873929d9cf2e07e73f33fe1d5997c717207d36bb6cee9d80b4cce5d1583ed5d63697aa5a9d7a30eddfae6a9799e273f86fe66d244047490e385b089fbd23a83aab0e3a4cf9e75e09d5f13b12f72bbe2a63ef2e22a664c71da9a50fdf2f4bf78bdea805d289fdf662cec63311861d7be0050467e221834439662ef285ef778a47b47b7350da767e0a9485eddfa93b2581ab1c670e6b0173399ed112132fdf07471bc8d4e1e424b8e8af6cd19a247b6716b61546ca0373ae18f0f3902e06860d1fd7aa11236fcd64990a7c4c662b13838b96e7a9d23b01c556e57b85ad9ad16664428855898637b22428a86d8b8d23d45ca985f67fc8d8ac0cb3df1935c75f528e282181132da34fc5ebeca7f51489a0c7ba9d4e03238faa385dc7b54541be30b3097bf4544e3fed79ce2524e6cb59e0f1fea3c2b4ea8f7adc6fdeec8f096fa001e3e688303537c879b56d0c293133aa6ad7841784ed96ed4b719d6e64a8a9821ebb6082ee3578b97c23ecd32d86920c99b31740b9a5e6180b6cf0bf62c5334d75a1ac6e63a212a6c113d01b0e024ed6fa17e1369ed744a3ea64e2a38598ed8d932475986ceb2b425d5a6fed1b748f107c96baf55e6d6c3e3957222776ef2b603497feedf00561489ec4278453a2c75e1fe81840fe4675a8c5417613dde573cd92a7c6b67a8ee9d0387d65916239b207ce539173d89e2155fd432fb300e746c7a092c8f77b0599514807e58277719afbc1fd3e26d3e64f7da029a8ac0c53f0a20ccf8775e96e519b58e98f9eebae8773c7940b4707bff081eb9a203b401ae412673a28dfc23971ba00cf7b05ef31d302ba2f98b473b982555e79c45054652b48765f70704255486652dcda4adba31c8a66c813aa794668ca34e50fba9574a469f986561fdaf50256ad8547febeb1e9c8f64beeca9316c5bddf76eb5fb0d4d968986b3dc831603dc173aebe0f72e1adcb79c9b391738f129c76b9b2f061f257b9fc56e5a5cf4c199252cee3a63cf3e251c56cb0deba1fc4dca8f66b7e84b9f051f086463108badc0e1ce1a2e10627a2e5ceb78ee45fb1e4f5eff34ca25c5c3a74d2c728b7d208a970121b568dc0adcbf28999e501b4fdb9cba40371f1d66242154f49b4e7d4cb7ed0f500b50195de9eeafe8d63508b5e86fe141ea3f1af206b08e158853ffccbf5e2083806115f6291e4a0daacdc8c9b921c24df1169ea156c1ef4c7dab8ab528dbbac08d3edf44b87ab927b173fb366cc34e538c135b91823f80b5fc3e8ed95e5377854f84f97856392d2dc852e8b3968ec7cd5be4641e7f7973d691574c8e40cdb55731780ea820171efa98ec7abcca3c87e0d114886987f4a8187df982df6d46413aa2873edb6005e8a75573e78df5bcd4965bcb28c1cfc9d3669b2de919b2a84482cf0062ead5a05d44ddbaac2c8986156cf476c489ffd8ef8adae70653ec52bebfedda5f89824d7ec5ef2385d9311017b52988b9fd12591943591e69c14d20d24c3b61e7ecfd108db60c9afdf397d79bb6f786b3e6096ac28b1f5ffbfb258532b561f325afb2b38496f99823f956de0729191c3c986c06a2483b17117c63e3ba35af7c771a57cc37370420c65035c521af0a9b8578c533432f9f052b605474cae19c1b8ff913d327a46a7f160e8714983b383b59f2ed960763271e5827521e08be4cc92c32754501d5c7f721492e06e41c5e9802100c91fe60d1fa51478c60101a3e7c2581b16194d875e35027a62a96ad08324f3b98fb2c7867ef1cf451bcad207b861d4b5c4ecf7c1249156df34867d1a26bc378bdc277544b8014ab3b25efb4c4c26c2841275e2fed7da30d11056b1454843e4cf9e49298e124f5057a973a12ba4b21f9a1ae6caec17b12d03ad1de2a975685b91623fd91d83567abd49f47aa543218a69f55a4c965e6ac24ccc49053f31c542642b7d1df89a8e4871e8062c28abb002649e8f8e62036e91f2b88215ede3872575ed1b4d5766f92409cb64f47caa195bd40979ac70fa7077807dccf44942ca301deedd09dd794894a7f9a893bf3c943bf7682149edc3cddce6cd9ecb9da7c0efe76a645cb83fba798c9b5b9b1832926721e047400b06c45e6c3e28656b3f4252441aaf86b8e7d972f583258558dd180be68eb68574a2a95a7b22a4eae2f7c69eaae077bed8ebd59e8d8ec79aeaecee71e255a39e27c321b8e5db8f4b360a251447a5b7f35a1a9ca0533e42d46ddd8a846a67c499e8494e965bb69f2d7be1daeb9e68f4bbb5f790e3712f0aee7762b5d025da00c863459f57d446abd950e7cfd330c1d6adb49685bc11e4bbc3a21670895ec41dc165c8a7f82c6e36acd3672b783a59f0f8e998fcf49c5ffaf0c27bfe4b1c0664a92c56477575a13e0f9971c263b41ff355906b47a4c65e9f3bf601b7adcaae5d375d2ff99cf5b867c07575be56e32494876b3459adb2646430cbd94d79ec06f62202c06aaccdd157988c19086d86691b8854b32a3046af3ddc4a8bf2d2a36dcedb0d8cbd63c7d1e4ec4121555da31c617a4d473e051c768a1a9ae3290c1945cff96c64abcc038d65e19b0895071940937a088571b873610074dd9f95d26b1bd6411efcae2ae00805a82fe95b7933c7d3acb2b14f55ca62b46233be8ced5583ff9b40124d1d4f24515862bf0440d42e41b0c74328a9fec51a845623583f0ac18cfafb4072f8d82c3dd6980406fcf51d1923390ad57ece18542dfce7d493614b1009afb2f3b2e752ff51debcfe162d2f87f860b588b83e522488bf1fe5f58b6c93d146f15195e7f21670be4948c9ade112bb0e8c6616d436ae8c0cf61937c0ac22b118c72abc05b64d74dfb9cf4dee13f2ca8d902512887850bb5b5242e41dfd0cccbcdcdc93817a1b297149600108eb8628a8c4d73b2d0410cf6a10d700d05354ff6b382d8338de8538a800c55f034e88301633411d6abe733dfec465828f6bfadaafaf272cd6ee1f2da374801e89429ce776b82662bdb6d4a43c903e44929b1027bc811ae91f0c1ddd369f02053d44cf97a1c56ed4e49b749364b5c36627a120712121227077c0b30152eef9b585b616ff56ffa4078fff98b69ed30ac4cc4a7bfd580edbdb17e7fc4367f6be154b37e78897de99500dd8a622f99eccc2d364d208f3f46f6e4e622d589cd503bc4ad095c865273789e23a3d35b8c8615b624d656bc3006cd4bd72f8da6d862fafe5d0cd3d790769725489e7d05a2fe9360bdb3b26f0ab286115d9d9991004bc75e465d8b0e33a62ac0499e93f92afa94c37e4be92b7d857de609a784d5b9d5e7516f18f0a5bc4348b19029ac574ac8f721fc5199d7f0bb6ebe7659045d8c9fc466d2af8d19c54f28c646abd70f93e1ace923a41eda863e0b0c4ad75523e61bce398435efd2854e179e2fdb87d5d5824ad0bceb4541d5c95b73a3e63fdf8a9d7f2f6d76a610517af063127a35873cb6cfdbba05433ac1d4068afb26cbd01c8275d05e5fc4b9edaeaa3023276412c68e2cd1c285f481e1084a3dedf7a8a0f5a0972e93183495dc7bdb1eebe0a8d9968312d40418a59be7e2e4431e41699fc55db95c291454231783799f5a1bf2fcb44088fd48bcb948d0c6ae7395070b84a9c6dfcfb258af119d2c893a6a0c99999e6a54885c2d2dc2a8fe29bb09b64cb520db74ac504f4a05b11e34977ffd16e7ca95fd54a8461329429df48f10ffdc48c20faa5ad75934acd06304a7116f433f9d98cd15cbf69fda58442c18defe0f4c3ab32df0a0c2432b9db404a6d6b2a583f34350557d987e630f27f72d87117760b9b8becc774d9a343b835917f32298bbbea53fddd827dd5206f4a3d4d290ea97170873aa4df572328ad7f2971d66d3d0f438d954ab69e4a3adc0ec756c6bf13746b49d61193c06556cdadac4364fd60f49a1cdd0552101a98d9e61a425e2df1d33c7fdcafaff384a3c9c9c74110fd534281aad06dff1de8390bbdd06679c40177ccca741351fb3f23754e1221eb40f7a0ff07caf0cc07dd4c169ce7d5f49711525e69ae5dcd9dcd8ae697a7d5b604288da3cb713a172cb170ef24c72c40976aa6c17ed751239b4a256b35d5e5525164de3f08a3db2d3d1669b7ea9396fb6c42b81fe5a2f21640794ecc4c0622d8a491b54922b96a23f4066dfa2bc9bab3d070a91dfde8b71fe5fb9b42bba78032ffaed2fed4b33c1099e6579aa3d6750196435f325b32d8effc74ea069894e715560138aa2c523dc2b7f9df3b1e872d078907e20bc25b9a31bb3ce4b1c3adf87d589fd2f271a9df3b1239f2b325d4f9a85d6c5180d8612eeb8663fe71a046d52f36e5fcedcc4cb0db0c3d106018c7ad2db95e1d30046f88378b1012f27e2834ef4dc81f31571beb3e316eb09e483dc519541ac974f3fb4cc5c7f7b9567ab0a4e50d3db8fa32186db5418a3644df4d8b0f469dadb8f1b2cfd164e9fb860fac6968b236d49c29c611ebdfe7a06ed58ac3629394932102d48bedc7699d6076844e26144d40a21104ad53a3d137cbba8f339b5fe004d1886ae64b539fa24d66ed9b1f04425393c5b5fc51a292806aab3e5ea47ccddce7fb9175ff2574a219bb5db2ac5fd3dafc116815b00e4be836c4c7adf2d686db87b94e8e6304efb8a1f09e4ca8363c1f327aeb357384c02af98be604beffb5b63274b0d93bb3568078e1d3f03fe4abf15017ee1d8a2855ccee208b5d048d4fe4dc636b7c3dc3f1bf8950dd110ef76c079875f9ffd9cfb034e32a7ed9631c432c6fe433cbb041da079c2be9469fca0070ef985cb4d03573059623f664c6cc72f3a46a9ac63a54e012a7c0bdf862ca655f6399f16c48abac272845319032d8954a0026acedf5316d6ff8e3f55db7e07b89cbebb95a576df14d81d88aa72d5715ec2b8e42856f0afea4d9318ce66dc9623c60836757b873dbb84b66436e38e394bc37da7bba38915b448e46560c91771078ad41fa4f854d5c6f10fea860d0cc5d53cb60cdf93a28829942778fff0dc5251dd65e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"02a2fff8bbd22161f78d714b5c126e9f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
