<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"b0a166ac6656d8546ab30125eb294e6f4d246a4ef62a740d4806c5e96bded4ed1a6b8804d4cb2cc381b4689daf1220fbc1030030651b5cf3e5cb5ec9d62ac077f2187d2b2c56ea42ca28df328d0cd0db4eb3c0d1e5d97587f61c5c6c52b2214c9f9c6a9634a2c4d934586d9b08d9e599607d3729c071b1919a992f986989709bdaef37fe647516af1006a51d8bae084e38ae7a618a1b7c6460a4b5d455ca0f1dbd7059d4f8a731065dbe0bac959dacc6d31048c007976aa7afdd23798e05ad89ff267c6202df11c435f03518a4d7aa65080f7947b8a0072fd750cc1aba9f983b4f5bc99b80cb82993d56736bdc26647d02bf42263e421785944471fe87276e8c95306e1d81a5171c88f35d231d7bd0bcb8a386fda93d8ba0ae97294862732d0ae8a074e7376032f234c3ae65240e0607e8aa5cf8f3f1169e200bb4816b4d8ac637a0d4dca5e69a91059beee9fdb9c59b08f7854aac6a6a64c711f964bfa9135f1a34487b72206a43b93b24016ca5036f2e1e4bccdc625680d247051cd6e46c0ec5b8ff11a6abde4830b85d550d7f2a7e842739d703942c6620080d1a041906f6b7f78bbe637d06a9b384ce8c4a81f9719a0001bfa362e4ee657028ed3110fc37374acaa634de78798740d3f7704f27ac7eb1676d803c66315b0c999429a24a46d3e1094d7c9f3d246260987354cdf83ac066e753107b4d4cc63576d45921eb199ca4d5270fa6781c7c3143bab23930d9cf5221f4efa0a73be6724d1cb2499ad4c65b3b716226bf287df2e7db31d288cc9d16edb7b9f57c41053f4d384000505a0203924bb0f1a5bacaeeb478302c8bbcc6d5446cd97309703a03280acbe4fcb98bd1ecb23ee6681a949ef46a9f2eb6646f543f714d6f3be2e516a0e4333026234300b52448b5750a1228110de7437f1b96cef26e3b789c254b80195c87e02ac605fe4e7590fa8ba047098b2982aa18e1a3a0d38456a9312917b597571f76f5a8aa6d8d0f95f2427d6a08340baf24bb0bcf00f184bc57f9e3c4347997a611cbe6115f1d5871693938599a75e8c5cc4312a72e828764db1bb3392a9de08c7cc485cd30daf77965071524cba1a457000e165753382bb5369ec517559bf532857cb34cfee9388862ecdb2ebf2df08cde897b81d24f5ffa2284d426e94b38d48d72db520228ebf6f7395c74b575668a8ef324d0365796f2ddbd75da4e93f96d1386ce824d730b56b975a7a9626b72b872c2f1133db0e036b50c28da3d3d65081a31f0fcb855d06fead882fab3155ccf07fef1e2cf7c49977eb6354c5bcbbfa1a47a4b8636ab19d1533dba4c6710e574684ceca1db062e6fefbb2983205931238be5ee626b185feec7512051db9bf8384e0f101a8e717b20652930d14b0532e9316e042c15b4fe13446affa42b14b1de3fc870e2fa86cac288196295fda3d62d8825292aa52934c0031cd49ab6238eae792c7b14437edcf03c81b14a267d196d663206226aa1103de74e03fc9d9d3974783a68f42e6a3a2850a70c6cac5c4518a05383ae1768352695e78de82aa88740172b9306cd290088d952e0d7d0c62c2d49a23d11bcb0b16f50db7469f56ad4b0815d9e3dec184215219e1ca63cbafeb4f7167aa4f4cb6996fb81fb3c151507facee93c952bbf4dc3f7904672d7a38485410496a08f8eb532ebb41761c1bfa218180bc6073403df43f8a7214c50248a67ae0f3b6fbf448d6cc6bb73ccce57e2cbc340b2594d72e0818bc9342a7979052362839cb7e542821e71b26619963d1914f64e2ce15f11af38b3cd0418f55156415b15266f4cca73ffec653b3dc6e276ae7d2352b195040a8891bdffd3c9e93358a7ba43232a538d9ea9716345c52849242549b6004e95dbe6cfab3a495075096d89b0ca813cf69447d8c454a93b8bb293de4f3308db6d808c182455efcebb686f5789841d92d020ca5782db5519f0beb931a48a627dc4e314e7e4fbf264bb927cc178500467d6b18c215e71e75d31abf4dce1f1ad2e4bfdbed4cffe3692e8eaddbf1d35ca85742b3015500e2efc1d754234947da19e912bc89512518643166f7cb8f95238f90fd675cedd6ee20b0e56c402c2b2dd8a2798ee9f983d1e299610e69e741e1286055db7be9628f12ba70fee5672929cf6855cc4381450d9bf4ba4893eb12a0205fd497cd4d2f00d287050e039f0889a969c05491075f7f191101bb3fa60121a3fbfdee61c70dec776998535c36de0f0dba01d3a97c6ea25417a7787074dc740b797cfd9863e4e3a6d035eccd115d1b513132b714826c56d054d6f37cda9e80b0f0288c1fc48dcba753e0c4b9d120cea761b87f20d246211166881d3c7ed491c4b7116609f479e9cc8021332db0ad25a6731fc3751671a7531a14da0113f9c4f9ef1233f30478d8988f0b5fdc32a06f350703213f0753fe865f3569522b5e3bfb8592e412c9f45ddc93e54742afe4afd0154411d8ce6e0426ebd1a5568dffe153fdd5438f0ab654826e4b086fb90a64bc4aa98da41083467823854e363e53f1ded8ae3fe788922ce697202f05ba059062067935dd2b1c63569e990df43b583e0787e6892e1ccf13ad841bd1d9c6ca948687672ce116714ff3dbc6c89db0c52fc70b164ddd004a1b64af887cccb733352f774593cf6f211f0bbd944f11f5e9ae6aabd0cde9c528ac1da5c71eca79a8d94e4786de7791675e84386d45a5590ea397de4acb98debc63554301d40104ccb5b4db974b4b4a2a496973ad5486ad42d262a464860a255d6d638c653223ceff7426e06b7b11e939cc34ac139b66b431edc18d476901416407ba40199f0aff64f2738bc968ce3fd8e3adcdb4e2c99c4bd1d10caeb47f4c6b437752b71e1ef73c317579087cd045fab7835552eab855f02f53a025762b8744f25593b2cf1ccdf53d6daf1cc3699f537f63df26c66fdccc1fc68065594370bc1367dedfbd2bd07349d79eec95c2ece9eb27b7bfe245c90badb547e8220dd20c076d04b932cda430143c9e9fad802c64c57a62647377d137a373ac8a33289e3e3396824d8fa9b64fa842879b0779f22d8ec158a56c337fd13f9e3ae9e0d637965a3f7bb7ea7ba6423b4ac86ee5b1aeb5b4a25943e5baba25b529ee0b36a991fa30996331303d9cc6d8a22be5068d5d27c4f2b3ff531024430f529757709c0d64ffa1d39b38c26ae26312fb0231139542c306c18f83a6ccdf34638199fd22a4ecce4a498f011d12e0da15f121b41bb7d6a07e0c793f3eb63ad08a5082ab0b4a59bae3ff2d519b811264af1ec1d6c126751d4b47ee3784dac0d9af4e28b8c4a15ebe7de640b6ae0f2c17d1e8becc8cac91b7b12611f387ad38a9599aa32e46ed97e7fd197c565689b6629da23f40adfdf64e1c98243a0935f9cfb95f04c5bc25a61c6adf75e6f9b42e3b61cfc778f2d3a28150ade7aa0e39dc6d8cce6ada5be93835cea3546a2ad893a824f98e53b88b15520c146a0be3b488fa61237934aa4c6f3473f5bc8c63644377fe5d3ed1f72afc72a30c63a72ddc1647eb3877df68549312b2138624e2a1d09ad625fa68c236df7c10325c763b1a6334b050057da3bb4680279fee2003d88b9438406c6497b67e06013bb524117f34982cdd62f869237fbbcf3bbcd47188013b8b13440964a5c0f170010bbea10b00846c74442656caaadf00a3c986874a095dd6f3bc1b72ac1d9f8200d64a39e87a0bc512000df2211cdd0c4c93ca0eac5cfe0725beeef8a03be40aa618ab43bf572c8b6c3c3ef2ae2bef57cdfb9c6a5fa067486b555ecc4bfce401910d3cc7ee010b67ade6bcda9eb5d4205ea338f33fea6ad597b649bf8d63bb6331a91c4846f2278cb16704bef87ab759425782e27871b88b9e0e0bdac472dbb859b0977bd1e38a3c0cee30d96fd1fa658535c39b5dc97f9c36a18c194b226e25462be27be7a84a95a39d2fe8a7960510cab146fbd8a7b0c3a5d803088d883a3e7760138e7a4d05385506d1b6c1095c2c68412be5ee9505114ecea62ba908b29514a8e3df05be587423582b6d084b7ba8c35047730f453f8a5ac7d2e3644e2ef6afa54f26264db74e40b6d26aa87dff05b99cf4c927276afa75ef04d68f49cf3ddfcc1b70ff02ce26d13fda31bba4844330ea52099a61be760673972e8806dd7de0f6bbbbf1dcd07eae0c4aae98728ac98f4cf18a521517cd495c42ee7185d252a7434791f7780336f8f8cdd008e2084030cb97cbac6bf71d8cdaf3352e26b990b56b315bb70780ab012f016de6d160909e540afdb06a18e98888eae787c0a9e7fd505f59ba99b8dc0e87ac395cd80a0cf98b5ba4d58d6accb3cee7f3e12b5052bfd24ca7137a96cb3771586ebd9f734659931bbc63e2c4a696ed2124ac30cdabee0e8b37adb4f6f407cd8f9045117632b40a15c67ebc0d9b20376a1f067a691ac45e34efa5f727b33c369ee7d9e3c94fa041f8739f4ffb8badceb43663ad4612201b832751b7b94d694c9346c46202b86a837d97784ea34dbbc267bf3e32222a568ad97c06c14d4229c0dd32c037db7302959bb0850bcc35e1cfb67c2425abe2c8eb59744a7379c5fcfae14219cc5425764707dbe0f77f16e6ebf7e18dec37ff317a5ecfa7e0dafed95c5928b60481d1c7d1158629d1e629971a1afdc70c9140e0cde616b8c8b8672c50db2bb9642bedb640bb6c3e17e43ddc768f4ad49c71503e88cfc059385829c059938f513467bfafecacf6bb354071859174986cb736d525a740f26d10dc679b0e8359b69adcd951e85fe5d788f950ec71556bf8650c7f1317cd5383abba637fe3e56eeacdb3f286cec22ff6b5884f797fbe7cb7c925fcc963dccbe8f9666bc197dc7365a5dfc382089f519e03503644a9950ce1bf0a9d71c7db9f8340a2d4dafe9dfce759b3537ca4911af0e8105ec86a2104c7df52eddff9f45d8f5d724d80faf05ceaecfbfbcdbdc8ebad5fae37269b8f1f00ae55a06eaff5369a0caf21648a89959755d57d1207bb0763419c82c2d46e768e40bbb2e201982d0dc4b9410a3c235fd712ce6760127b3a30143b994de3566d1c8f5f5e79d6151dbaaf023acd99b849391308fe22ed8a0832202293cf5eb5d990acbdd7720a1361686063df418e18525966f993493fb6ad424a8ffb7ba80c6d5ab6e3de3feba8ff8ba1d5e8be42a49e53d7062d7ded60c520ba9a56e5f2fb44d7ba21b6890e806ccc9ec5ca7a59f1ad3412a2515476a830279e7c7d5bc0797dc35e6dd0e475b26f2d15b8ec1bef4b0ffbbe7fe9a0f493759f4806dfdbc839a5c911418a24fa6c7cf6467306645527a192084cbb8b3b76090301813bbc17612528986c0da8e12d3d5c991d45d5c5f7ebefa8209cf4e849c98b1570b21aa06c27a2679dc6c589a6efd93b73c4507bad2bca46f13fca4a01a3ca801d07aeaf2e6c4b2291e96da9d5d6421be1a0ed16c0874979cad98af5c3d5afd8137ee5716db7d44fbc37219103cdd79e868e43ea0061ee840d101ad7b367a0a3b3173dbaf26aa81b22646027b213bca3ce00516fbd1e02a600e7c205dd1eb01c76c082e0dfc67d9ffc9b2a4c8030c6852e22782a7748a936d726f0f357ea6a70283b6278012480f9addc854b0b204cca8270957114fa50234b45bfc610b81c9f0b9d5aa1be89a44e6312a04ddba92b2b1ff848fb49a0140696ec82fc95526dd1a8bf81bfb6c0e7a852657ab1e0672300b747faaf10ae0807f8fcdb42449ca4490e1853f55a2e17dba0f10b7094086c1ab3a5344523e561737cae4658c6fcc002f81283a6c7b9b5f3c850ca4e0216711f54a91cb70564311c92c7af9ae78394a283d8988dad1388bd1fced3739684d8317aa7c38dcb47d6cea13bdff063b09e0ce7f3472338c02a3625e46c13b3ea9fa448b78c79734d63f12794944f2c2e795b1da5c2675f46c2d83723552903e152a476d6545a98eb4ba062b6dc342feed0c20d5921916810683ac02d28262f8d94235613e8bf8383101102a88c877c4e76c949c2aa195bbc09d521dfb638594c19b3ecdaccf5197ffa910bf8e2a8624cc52d47a3d4bb70e48647d6a50f69514419e6f90ee5ca9e5e3f7baff10a2afc5f2813d345abd200871378509b13a7a9270949e7afc7c319a1530ebb15e6c0c4f11577ca75d09a416eb00d631ff84d2f5857f56f7d9cda110dee3ad2535f208ebabb345c12c50ac0921664bd84f31f94d134dd6a9e8be8229e95e355313b831e000c0bc3a0e97db0e0e6e8a32df116f4c7e4079e64a826181201b3af96c7d54132df20a09cd7a3865500ce8a6ea74b41ff7c668035b2d8e8d805954b4ac7c5a98efe45bbc38a77cc5eafe2bf07debddce4326920ba629a334fe8f028c5dbc53fb275efbaa299c65f9afe60af2e6083f26025dc003f3eba57614ad3558cb3538d825341a3801a56ef489b7dfac39ee9864cfb83c669d3ca5218e11c6e2488083e9e943834f046d208eccb6e5f1d9df0b4abb48157b0438206e39c531e09343a4f0a46bd69df162245f93131f013cf08d8013fdceaf61cad929ee3d60b2525498df6895acf7e01c4580462048bf0ed584087f9e2c332e71ef6f982c9df1e5e6fca1ee2f98a4c0620a724a10a04c042b52c91ccdd8b1197bfa85500990c54a5172f0affb682224fdaa25dc3c0c06175f01448322ad88b97d9d59c4ff10f05be1e301d0a97dfd9e80f8f73429e45c8728a39e37e75dbb94858d990b24ca7b7a0d8635bcf109bcce44aeeb0864c4fbf270b90defcbfa991c407211ab22847ceb183e2d3f2d8ec12913ae377ad1143ff00cbb54848a12beeb92c1fc8f08d93d96fa15f60e61d18d4c07cfb5ab5b29bc317a3f4fb4773d75ac5371cc501503ffba9319d4bdadefc2e7747ad2fcb3aff38cec496e09fbff02c2cc2d757aaae6b2ad99864cf5c6476f45a8deda83013b6b45c810696fcb667d933cef9f84e92cc0c7463995991d057672526c8ad099020a821de69e80f80e331f5f0f615a4aa68ea464303d01055c045ec49549a4505d9121da5d3a4c23203f8c678b482fbb252285f930bab952067f0e1fa68696adb35ba4654896fafe2bb6aa7b065da80e33e17cfea3331d2c774324b7706802680eac65df77267d1a22b73ff6c1290c2b0061629300dcfe394147a160664fba49ce5938056e00efd5fd4df5d6f8f6a107d8e75215e31ffe61771eb778d4ef8a19eecd4510e0815425aedd2f69461ed3cdb55267aee0c1bb0c30dbc55628e06e895a175d67af12d3f5624865002f606dfc8d6cfe00fb868be1ae942220ef077783583d66090e2bb459be02c0ef3bc6c7817a42eeafeb8ce3f03a2d1bd5c610a26bb10401529b00866e2ffa43d8a0cfb5c62d6907987a67994278b320a92588faf062b7770f40eb50821223206294aac0f7659630bae592ccfd190878e3eb4eaa07c7c0f666289e3cfc6157ea25788fd87f93bfbed1fe9458f3db7c5333cf4d353750695682e65ca1b0d2bb6f0af07356ed1be1bcb5da556755a80f0089240f45c2b4a895d41c819cd81d0c4507609297131552e2009c021443914b653173d27f9209ffdefdc2db5bfca727890e62947bd2e293bca1944e4e95b3a4ff9d224cec66add39062554333a974c67618ae62898355ecdea9c4719aa9017c95fce192587c3a56383c0d36d86e9510087a83a04d0b6aa0d289f0ca6b73a7fa5490a5bea0945898cfb84a5c0521ae6647511f89cba258f9b73d2ca675d3b23ef002270890c21de07cb7a64714ff8335a098820ce29226bca17163819793a865ae892b1ca3d9f0ae19835ab3b9a0115d0f04dd0b2c4334884a13898090968be9171024a3fece683a3c06cb65592b0123cc801b08f8b605e2199318cd176601c89be2eb4fc7dd1b961ff49b42d24b298c9e6d5a167d7466953694fbbf7b3c497dc2ac65a014584b36563e1135705593afa53025d052009a278971c2358993e7c9f62d7927752bfe8b756127026be09d1404272ef441d57cd5c48f0e1058a56759c26a8a890971dc46714381b5b105de157b275391a91f4641287c13bf2de2625703a984fbb54faf47c30d9ac1ce4e719a3564c1105570b5e566cb1c561729d931bb1dbccf3a46881303d826c73573548373a0273d885138ca547e9694f73137f6a55424b3a51290fba991777c8ca25fdab5c6f9ef2159f8ea91711a1d5306f931ec08184b4360c1b42e1174792135ef5e745d5cda6bb47efdf878be213604207ea1139e0d40228306d7fd8c7918409650c4e3845b83472076c47ec7a218d4467f171d8e9c06af8683bdbe94e14c4df55489c8fbf1e5aa1746c15c55659388c68665f3f0b60dfa254b764e0dd0eb49689b015b53247e4659f52516a272ba5e5f4ea64688bf7a9861bbba5ada0db54f05b5f1ec7358720cefe4b99bfa364acbcc49ab0423e5e57e443df49cf8c50e17a4d71cc7e478d97c33db191599c255e7331556df9bd4a4c0a4d6fe9b2f3731f88c6d122ad93467587f84ad0441bd87c81c9ba2b1af287739e5d5dc813bd17b86ec32a79a965edd9299fa4069a3966d1e63d0b7bc0f586af91c8ae96600d38c172d1ac7c374602109366301822abeb35589330d6fdb9e041b440756fa4da8d81b5de2823d6be7b7a3fb7b6407de43c06cb9e47b32f140f5baa6889d6822cb73e3eb52f5629447df0e1545f6bf8dcbbaad13514121b65ca8abef1d15722a704bdfc044bbbb52f9b219c803f68595c6697b8dc43ad047f5ccb61c6adfe9484f0f532a625d8897081fc7702d908874254a19782dacbd79bb7f56b1c03878eba5ed33541556b07319fba937ee6222f2c434d5e48b012e684dc09aab192ee5db1fbdf432731ebcb4d088e4f32b0a4313b815efb9ae4a4b96fd47a8788258d643247c9842e92fa6accc4ecd2ad2889012303c49b09797f2c020969af90876f8f159baea07ab72dee73944e40dc73dfabfa4fde9c8a1794b1657a3a147cd4ff652f0f9a419d1bdf8ca6660136e75d601e1b2623ab0c20c522a775516a8082de360d40a2ef98a36aa409f3f6b398fa70cf08182372048229b768419d254e2b9d54f2162e205d7cecbe475f36ebede6d8e550305f0fd854d5ca7acce9a068e57c3580e4baef325c4b6595b66c98949e2cceb4c8f3117773738092887048a5a04b56b9df27d2c9f554c25b98a33025f12aa1e19ed6b0396268d2a01fd69913ed255a72ff239f5ac392fdea4fd96dd34fc37641541c53466df4083a093814f733156f82d2e0fe15aacc8854e6eefd251cb17556a72cee0a7ac1524bca051bda86cd8c3f89440ae7365cc4bdd3ea18dc6eb1b9e24165441788b1c689b3f0405a19ad50a292f0003fe50c387858b7dbf137da30fafc0170830a3b4fcee00b6a3edf648f57b703292f6c04b30e09f95c689a9eb3a6e02e8d3a007fbc1ccae3dee41e732449a71ac5fb7e46f035bdb1cd964d2ea6079a826a95d4402d72a31b69d0264b9dba4a67ecbbf1f298c92497d51752962e15b6a448c274c6291c96f78cae5a090ac12e4517d78df4606a96fad1e17b2f197d69aa4cbfb418c3e7f2217a17b7a048eafc8440615d669cd0379dafc296fb2ddac1c7ee7a7e4cf54ed2f9db376a5d92327cbe89d00734e47cd58a868654a94f246d0eb95f6335bb977f8ce427c3f291bab2af6dcb02aefc3c7f37175df833efd02fef33a5aa8f6c812b756101d5faa6860ba90454cba06ce6ea0ac1db44416636baf8710628339b728c25879c92863351b8315c5b1dc478b132393d99f50266a44c50e78cefe8c904e9541125fac76613eec7f8b95a5a54dd51fa55f2995a16b0b9d1026f6708541447df7cddb946fb9a970cfb76c542252e6cabba4a4c74a0e23712eefe0dd37656807954d01d8d0af15d62675509c6c26277a4cb35aa873740f0c38c20f5c83be18337b122eda653f67765422bdcad2786069a081f248c791912ed02d6456b2613f291aa056d6c983cfaba73648e29ac23702a8a26d2d302725efa13bdfc2d2c5dcf24d8980eafc82c7f3f1b7a27fe2d5af655c231146b54ed4bd0e4b0024df34d514e0bdcc88af5fc4051a826c6a7ee1bdbe56e6fc61487d27d71f7db5d03e9ae2be37e9d69f3641505eb334afda77b465d3d71809e970bcd44ebafdbb2533bbde05495b4eb2094904fee67b67187c25382911709dfbca49044bb8e1d52b856bafdd2fb1f29f59f07e049e4d631d5c0d45fbca00687a36378a6aded6327d732447db1a4401ec8e66e049d0385b967baf4407649a6a4cc580a19ef0668591de9ce408a80425e55874a483bea0aa2ba19ec618b310f2c6e56133490b93632619e49ac36b3505cbec9fae68a4e6bea865bfca401536841156056819b8b352d628d3edcddea6bb16b7a6a5f50889cfa9747227630554cf2f757db0a9097caa27199422e8e3a3725e849eb0106b19b3340a7da6906b5fcda778b300690bcd69b50fd3a02482b71f6d45b58e614e4f91e4c2710f031612dbc40d87db2e0ed70165fb6ffac6ad0409e47c38396d042b45c4c03823e5b18319db3e04aaa0bce126f7f08f12063f33a69f2d05192fe88e82c4c8e99f3f698a529f6aa337efc42fb84f31486e9ffd28787efa956a0a22ab9f9a1687f4b3cd2cdb14b9aea79666dd9bad1e6f3ff07fd8e0e43af3a68ede93a0260936cb5888078a20dbea850e3838618ffafc9e6258295e24636c504bea160345fa847f84b6a5e6dd1c7ebe6ea71dfe329cd1617f89be44d2686724e8489c32982c88b6e403780c8a2ad345b53c255702e4073417d41344d6e0f56d6efa9f3f26713633dfce770bc17fb6966465c29d7474266a34fe68a2cc353931c24a97bdbb59a7756ed536248eddfb645fbddc4fec41691d8fe2e414517eff506f474c3b019e454d39de7fee2828924bde56fd3c19f26ea98c83986ba43e066183a47540f9c8b60c0a36b95415578adcc4e2d194232b34fbc2d710963e941e7996a523258d9fbf0b59c6084678f3fbff4b44572ac403c62f307757e3445d1acbca7275393dfd3a5e5acf90dc94377e02311f06d49b2cf4ce09eb432ddc89fdd4685b76e5ea4a7479406607bb344632716588d6de4b2beeb68e66b7038544b2a926056a90647bf90af2acec90c71d41f1409d2f7a85b2801ad226dffd32666630af996580f50d5765b71e32342b2f92559771882c6e51ddb34b331e23a08a830d5bc82e2973a2a016ae820a579d9f403ccbb9b7c911f4f40829fc1e5fcf22db632bb4e531bf87ea03772d7c757f5667b8dfd8ac46d9efff3ce6293799215bbfa62875cc40d17eb3b5b244d9982a7db5814ec903e7bf3b1644d2615cd0cd9cb6202f92aaa0e7c277eafa7227e9be1ffcee3c06bd13b27dca98b633c5e15ff56886b0c0c18a5c1ac65e7ba19286c1adcd1945a377ca3de67e636abea6f6f0dd3bf90759af3319f502f60ebd11f20b658b8d00e7dda77cc3161e85cf8d462ff2216582e6b97bd720039c67c82d1bdbd1771cb832f774d6620c4d9b94ffde908eee0a4c0e6bff58e5a0050b7a430ddffe4738160ab5f2bb5d57f194e3ebec2827c34ce2d92f28d0b95f32f81d4cea1b5c0cb09db333df7c10f4268df660ea5bd3c2fe2b414c54f7a65cc746242e653c46cbba48c3c8c00d4c53443dc90a7f95834a00fad3fc90ce16920c19b1deda57ed1121353bab514ff6ee77d253f5b53fc05a4ff2181d470e249656cb6919d76eca34c97fc40d9f402705520e89e12c59e87af8d9df4cd381bcb815bc34dc408383001847924d51785dda135b25268e304b7541a4115e3afcaed7d6d57001efebcea38497cb08c8cbf085294b11a2ac4d5e6e9c34043b4bafc85c121bac988f5e3adaeb601921686408ab63491dae335ad8d8d8b9a68dfddb4329a47eb78db89faa029a49cc8158791799f12bca442c718f88cd7f0a3a23d8316eacc76c8feabb1da91aa6df1bdb934b2d9d009e7e40f01a75875e7423f39f53526fcdd3e38411ba63ac99f5c11021987d4de2bc23f235c7b26f77953413778d915903ea6f737587c7a1b57ae81ec8e685c94c5a1a3611f153ae48e9409df883c6439d8ce579db841abcee58f36c415ceb4e0d4fd7274e3a3bc722d1d577b80593d80c03ba920486c33d80f4625c2d6149535d88dbf77fe6474b108d27ccd756e374861199c6a677c08e07bd7b7fbee2c0790d732b778d3dc69717486a3228111103a32cc56d2dc35adab185093ccc89013b1d3d6757eec13949b1434c52c78b87b87b559fb37667b65ce31fe254e7c7a988adc2f98ed36ed6b3d5aa6e8ff005d3445d95d8e19d05862fc42f99b061aedeb3e68451178fdb739029c8bd3f9c2b7c777c92f5d422e5df09d820248970f48133d5e1abfa4e9c3d511d30793d2a138ee8b51d4a40a9e761a8bcce3342990a01d429e29a9028eb5c0137e287a4214fe72555f90ae0da505f6cac5958288c12de9306d7d9df3d59ca205ec7b689ccb71ebf0ca6372db8f247aa2051f7764c8fb697bcd1e9dc8dd39c9a53510a782c22210751e446bccbf57b9449c6757bb4d0f8fb1977c1764921748047482b535b2bc37493501510eb7e1e6b93ace3977ac674428e9eb7f3c9c22597958db86e7a71ca8134d6fdb91be72d59ef84f8df82d92d849e67c1986de2285ba93f82619b4e6934f7f444cc943015207e36cf4d97de1ceab0ca8d681c2799596bf8228bb949808bbc833ff17335dc805bfc670607d031f3f4ef09a406d9b97e07894214d93365533c07a0d666ce5e952026abf439c0c898739fc9a96a0264a0f8779b7fbec175fe2ab4470d3a3841309a57e9f011de167ea3a6b4c7ae90cd9a565519a7f7a9d39fb0b61c8f52d8366bf541faa064f706328c1b881fccb409d5e3787439b493c47a43dd6c9d1b5612e9e553403f3a8edab05af0d320a94fb321df1f03542ed8eb5e77cbff69880f4b33a381b04734389d551e0990306a409489c7be7e1a6d38120aa94ad799b0a9b085f7969b9f3ecb189309c2f8bb3a893f25acbb954aad9cbc84af4c5d9ec6f701f29725c41359f53f9e5b96179a8fb3caa6752478fa08c27fdb4449801cb1a0292dbf49b7b11864247f400fca8972be914f9299c889735e2ebb95707aadd851c5b270aaf606a4d664d0f201e7ec8276150cbae9baee9a8a250b59df44ca549ccb8637f2462b6881e8037ab4ec4aa2e89548ea842d3f8078de484c0502f760e23c5c08b17034bd8923142f4d54fbc24dfaff5cd70ed565e2c7b7ff5b08b4d3bfd0da66f8aedf67f12deea0c721b1fe31338a010b52fa13c9d21445f4a1511d0110b03cf6ef34030f327c11baac6c4b53787e348974cd510387ff54f2bb3bcc4680afbcf85274311186bfd8983219de00a781f14be76955e339d3de55cea608826b990deae1211b60a45a106d295cc433f5f1587dbe2995458cc88d90c49a34833893f91437b1b5d48bbfbde61e93f9039804864c3672ac1027b58bfbed7d2942b1514bfc3fce3d6ebce13915725500b349d6c4542bd7070d898bf8c314cb27920627987e1131130891c1c105e17c7373b8494b1e57eff65523b4ef8dda7536a7724eea2069fe78dcdf37734f34833df5827887f0e3c6463aa0ddb1af90633900b101986c67d12802789ab2e367f78af9cf52be8e94a08810ceaa5b144011350545b6c57862f9766fc89fcf5b8fd52221cadef1e0e1b3d12a8288e527257cedc14adef87d4d1cd537178609c02e651259eeecaa2ab9888c7023df6b4b21d9608a8c0a490a1d724bc24667a7de11ff7526f341d0849ad0bff1ef0eeb5be121b9c8f4ef0470c600873378fdb77c42f25fb5520603e7945c6b69902a1084e4bc11e8a13928cfa49b82756a8e4c5cf2a34294f65e8941d41fa4c14c1e91ceb823e867b3f954a46a47b8e529cb0733de04900f2eb58556292d03b7e413bd43c668fa239f03b76134f5dc8f49096037ed3f7d36c60ff54a8bac7dcd94f047f10386fa11c54863d52c414d6aed1c2f2b7c60626e0c025ad77d0f472bed4c5982d8c83e9c76b322d62152c709fce8f792588532fbdce0eb20bd159acf737613dbe9ff0960100a5bcd607f664f0e9b37c06e24673fd2a5af1b915062e4d09d6e8c1e00c6df0beb203ce7d3cb1e22df2008992460ae30491662a9943def0b896be7be4e489a056234f3b45072f95aa4ca0a8ae572a3d622a95bc87cc5c8da27af9345709c2d1c9c42c15e1cdc0ac4114402ec5a4715bb5fa640c851d54fefb506426042f4497c153cecf157032ed6e6d79289194561d40f44f2b5490f16b5596221aa1231f7ca95dd44d35b64320f32a8df1fd6a1628b8a358cb36a87967b966c3747125868028255b7ca500bbf6f73748d6b58a20de2d5f4dd72e599d71d8ebe7dc9d71126e1a68f6d9f5f1022f56eb01058d34d4170934857b15e1d4491f7e6024fd6f82cb1fb8b62fe9fc8c08cc9eed0afa3f8d21e59d10154ac5794648d4b45b6e389db79c4b0041c4ffa811f2d7b53efe4278821b173d5ec34909e376ca500961fe3ccc1fead856b023c7c25bd2a34e0d0fe710e9cb77868cc707cadc90eb9a7866626179943fc9f28633a427dc155d584b4c055b1b044b8c1a2b1366bc4ef8c8087f4a651b5f586fd7b8eb9aa9bb17587d66a7cce2ec71569430ca96eb9b0b3cc9ed8ef848e56780138f0f9f30335cb46d1bcddca7482badcd813faa70fdba7da4b648fa09940b5d81d813bd2071b16d639bdcf9156567ee0abdb05ae34addb85a7ce642c448c2e2997d64f0b44786e1cef66d07509be20bd09e3afbd322bd8cc883659ac93233700f0f4f6b1e85d34acd0db94781d73d711a482689577bf2831de0be94f303fdc217f51536bd62241960863419829b6932dc86bf498a8f3fbb7e0e6604baa74ad43e30476b2f3656f8bd01d17899c35722b54355c1c5602ff577f0e5f77ff836eb6ea769c9479e51c5bd2ebe5359905d2050e0360d0eaaa50109345490453305a82fe1c6002b0b9fea64812631b78a0eebb085423c3dbbc3e4257f90df61a91d65c48f03a3e2b542dd2a8095e6d3141f39cea49abd04efa217fc47af68f6f8c803d9b99c21ba6914d15ff32919704781cf53a12b97474c17b533f033687558b6e1cf2cd31d18f19e87c9188ea243616b4bc8f27ff22d21f6b4c6617e08dfca03c30918f2d449cc9f363078346ff312c1611690a72e0ea028cdac50d6fa0cc4dd36074ba311468a89ff973d84b9b417257210c06d879df2643194601f868f5c51c182be1b8991e6772d4c4ce9ed642756a38b3eece2044620896a4011fbc1234bab4c8baaafa2193953b3c048e313f01f6a6b0ee2642ec5bfb0dfea6cf10616d737a0bf3d807ec6e5b1640f68379b9d0ea80ee8a8f7a7982ea385aba105f4566d2db750c1cefaf77dbd634f3da20bd06e1dc6797815dc0756d223082dd7017373f6b072aef9e1171a49a9d7f51b972990dc6f2093a4f8d4d9307b70158295b75ada1b392c94875deb4a9c01f9c42d809d4f683c1febf713026830c2ab75d2928ca719920a5dd68df696d871101545299c50bdce87f16194f795e3e8d16748b765b634c6354375894357491781bfb01dde5828aabacc6f33adecae39fdba2075dda483d34b317a76699195b08e4e86eabd0aa7ff649016c7502f01845349337ec0b82f5bc7eaa7f59c1c552c4ea1186043ec80c9a9e3ba1bf57fb5091cfb24403dbd5317b96079c884e2e5e2950ce8679b267309d686be75a1d1f2dc03df1ee0b2b28e9d9dcf4c06b2a1fff4352b45e247dd053bcd31b6eda22753b98f3310b3881ebb012cfe272824f60ebd04b041c4fba67935ef11438a9e97e3ac576220fc614838ba2025db62d40ca7b2fa31bd84b68d63aeaaf4a4680a5e5c72ba6216ef3b308b608fa213c5b2787b61bb630bce7b77c9936dd610da3493959538fb1857eabdde553a2d2bd3e5f4a83306bb10f79dbc48866ba01350bb8d997b82fd4637656206fcecc8963b4f4684662c44e1897792ea20646923c76d028bbfcc3ccf8e28c2fc3e893ac927614dc915fbe58da36918d6b018e9347ea3813f26f8c9d8545c4b1ec3bec27896aa1942ecb5ac52aff557688e39d27028452c4034092ab1d3d94fbf7b75e177cb08eb376d8d60140f2f954403fb6641c2ecac21c2135e3a29c4eee140fb23f1613355ec945ae6ad8f22ace65c2e324eda15724cbb66d1afac0cd957bcae13581378d045747993d29ddf14aad0306904c929ffa7fa191394889b1b14fd71e644a13e603ed81feb48950c790324f496ed807afa0adc1dddae64c0d8cd572916e18511ba6c2190846d026500ff50780371844d11f17b4caf8e95746a4898fc4051a0616cdabdb5b3e9ad2ee9a39ba2da8d6bf3b223b7eb5f9e08b3e5c8d6fd30b41de6e8abd7a0f9a7b7fbd800e8938cb2726ca26b5e9a71cdccb90b6c4711adedb89a24f863f72544fda9b8749a5f2db24f6e5f277cb12ce26641a1edc661328ec086fb472d3365059ee5cdf034baebe08e736fd1976f3954b28ebe21cb89fd97354f21496d5d38cd01e8c5385f62a791209ef9255895c35bbcff923cff1bff8b680934475a254845fafd9bd797707ed68829ca62dff72a5b62db182caa874bf329da39eea6f70dcf1867ef6df4caa7b0bd90ce528e6548ff3edfb94c2bdc6637d0b8cd18125d3bb4760093ebcaaf3767af5e0b799120d46e92f2011afaec796ce8a50dec9829f596089d4e5b4877985b643d4f3b6f3c494f5b3a25b77cbe73c4eaf7b916fa2c3a2a7d0ac5c48f0b3914c5c7458968e2430e011b6b6915731f1c3a298a9247fe2028f06c7c95e9f9bbea3a98d6daf5d829313b4deb3ab711bd075cd189be262f2c26fdd817f7c285f7cbea5f4c04edd1bb61a5047562ff4147938a73b94957609cf0cbd3e1ffb80f20ee9618f9486b7e5bd5e7952f4c638c96c86e8e0fc47852cd21de1421d1439988e5d51863e689c323f8b4621405f07af0dcd59eb3badcb59edda84ad37de123230df40c037ea93ba80cb9085544cf8b0219777daab7b5f0d76861c869346734a0e21db55bc45130ea0d781d907c43df57b4aadd350a86f89de67c6bca2310a2e9f8649c899d0b702fa7e5ce0a2698bf8c68030ff1b4e1b0b3f6b1dacfd1d694bc5c08186411aeb95f7f372b06493cdab24dfaea9fc60789e88b1c9eabecc55fb3576ba6e7ff263d4f8b1079667263d38de6cdfd940117a49619df3103ae466b1ad37316b4562df5e102358bab1aeb9464dec72c5f220fbaa8d993dbf760a34492f41fcb2733ee023f96e4dd0dfadf3af5bf681e5cbd8f2756c3780a9d6c9af0f18bd382177fe41ba6079ed1e4f613d8ec9962a5517435e5a1128205c48164954ca1b9a32ecc31f04e0665a14a769c5a36e55f22298b05068031eb8d467b4c0e1cb53f2aacf0b58dbcb7f29fd2be448d785e7e28b2c1ba141c73b965893d54451964b887de7007bed2dc0fd910d22fec1e91d3b73178c456320a38ef169d8daee0e8729db2cc8cb406eed81d13d4ce34654148e6beedf2837e758d52066e01053d14f06f03b1c79e5c15f427cf61dd1aa4c7112b57b23080ae66d77fdc3b496f83c4ce01a52bcdf32c2270c611466fc81b99103f054c22de46ff26a49af60e7f852871cc27a0145ea8dfa442d664b51a1aaa37d2cb8471b1759f9e1960047364b53291eb897ff84fad8e516239fc509127fdce1beda7f8b318134b516aab2e701468841e17ceb771fbb23d49ef84645a0ae8263f1ebb333bad26fbe37ec9f3371c10cca12e4988d2d6575c3b8dcec84080bcccd5dfc4960338036605ce36e835fe0e62b5c5fe1e78e922bd20f3fd91bcbb29b8b65c81688c9a2543f350497c6026fa8b3a23447caec4550e433d6897521f7d631a3427c07b80bc7d5bdf3d7f9d6b211e6e814431d958aaa4d1cf1f541c0d2bc56f4a3eacedb4c27fea04b9f8a0860897b07f6a9a1061f9d488339ddb299c6951437cb2a5f24054a6fffb7c370b983e49ef28b284aee44f3c710a0a5ce8f77202eaa165875a7981d0d9beffad1f5b74937ca5d93edeb835fa51879d7f8a5d71e867d58dc97971cfcb6184c8872f187cca0fd428afee4dc8a8307b279cf37306540e1d200d79d77d426f83731010b42f75c6fab3b3699f71e1f8a66bde6784ca669a37f5351a11061e347059258298d2c865895571fede65868b1ba1d064de3bfc0109f0b2723140c3d444ae9ca09298e0430ff2a6c41ed7727daca4f2569ae78049aa781b0dc7a4667344d7acf2f1aac527eddbefb97cbc9af839d15c1e1ba0f177ce35d48d19016d5a4ed278fc765bac18e42d6589a790fee904cb3855f93a948542c2ed3957019cea656e8918694ab6190d5e1ae2b40199532d70157a6dbbb8315e19b42e3d11e1a55077f7eca61b7a8673b670c696c445e628b3fcb3bc4850991326bc8978998f20c769c2efcf64d3652ba1ebbae9f5cf74361a24c08ffc5177e9675b9296b8d9e662ae2756a36405896b3106561c2e88c6f20a44a5071c44606db7c146df7f7050f1df2749e74ec9ea46a851e0ebff56645aa8ac174c4030e3a4c727fb10b25cc83b0674e167c7aee6dfbaa05fba28205726e968d50d0f548ae49f451c58bd939806635141485ed34812dd9b1649242b134354c81b7dbadf8d517723d756968bc3bb9a4d5b0887917142070967e34f4abfeb2e1e83b7bb85855cc7cf472f6cb98ba","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"71ac2fe763b4ffbdb5faa19ac5fafd0b"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
