<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"8a4f3e2deda19bdb84379934e1f68cf07c5553aec575b638387c3977bdd833a2c41ce57ecb34c2bd5f5ca6fce17a98bfb5e8181cc7ec5c8cd590a3b35dcb0796e0206ff3201644a86d6d6fed3eb0c435450551089102409f04b5350625b549444cec1643bb67ac753d0bb4d02b6c33bc86120313a7afe636f47b3022c6dda910131cf8c28aa81541ab80111343018c2e8a1bfe37a271d7c20f9bf1c666572ba270df7296fffb2d3f11f245357277c0636c56fb1534d11b73de8a9f6283afdbce2f355ed069f6e5f45eeaf5d9b326a7e4e9ef97c66568fc0dea52d24a603aa32875111b2d60b608b52ac8bc10fb83431f0857ed95d42d56406679c4bb6cdeb423ea7902e573fcb92e8c2d4731e3958eb11dd6b1235ca58b835bbe2cbe712275ccebf821073286bee316979501180ee12510e87a111d96dc16972d1adac6cb51532454b9e236bf293497b612afa63c814555cdbb435d6234651dbfd808d3387284988ba7f66eec1b367b752a8fb0445728bfafed6224a5340b302dd0eea265fe5e945a9397454a7187ddf5bd8fc58b4db50b6fc95d44aae36caadc91ae3e9a0c5e02f1474537dec67066e1eba000fe29a1a6cf1dfba3c8b6bb4844997bb780f4875f409bf8e8af153734b4f9753694d86309a5f77c93c0cf009f3108901e0bbbf60e0aa790e1f6944b139e3ba6731b8402d4741c0c39a0d7ea75fa3ce47e7d2f47a3075389ef6a0cb28c8c3d93cc37b5192cf71a43ed610f6c76c5472d5535cb2cc3b4028321874ad886b52c27fd9cd71710ffedcfdf10bef3b17ee5f49927cc577d4e9a9aba2d987d8e5395a23acf2fd9ddd404123683eacebb788c417da1214e16345aa9538ab307007c0f60200e443c93fae2ee9e61fba9ebdc1431f401459c66f19888a6794583ab5e08228efe09dbe4cb53237a87328b964faccd7c901a44644652ebfeba0f0e02d6f73acaf6438d59fa64ae3846a49676fd47766aaf7ffbe7ee06e5414628311ef74cda695ec9d188d9c83e697b7fc5fb452435422ac6e209b54962b9f78cf3de1052e413ccb69416e5e3ad23477f05de04b768b9b283f1acf83ef119f8453dd855851b75eae9744cfcf2c7c363e0a94fc90ce58e2c20f852e8567a70aacdb39299308835fcf2f80896e3dc537dd0a15f9f5260a39ded45e2bd115b8e829c86664efbd12287afc1ab3b7b851de4795f0c1c2beff6176b9d824c55fd8860f9fbc1739c00300a8e8db9ed91370ed57b206ed14cd4c67803f4a6d68f7b9b97b428e4c20c5adf77ce2155850a90132c37c30bc2d9ca0b6bb23bbd0beb3cd407bbeab5e2c8e73c92cff00e0daa603648f07f537768d6cec36f12f96f5dc306b60806597bfc46b1e845c53d71b5824a6c23808e2ba743f8cc82fad9cbd661e0de9cfb9263d25c500a665e013bdc3478ea8e7513d98344fab079b96eb01dd363645add3b33f8074d93d77e7c06a2df35af4766a36d3d129fa104bc6f36301c001fca932a4c7ed235f957a55aed1bea0c6ce6f2bb0a0198fdfeb20f9d66ae38129fd69d48d75c2797e77ba981af7f495fb5772b3048df7d391002b7da0a31d3f4f1e503d699d9cea1d9a9ea85bdf272eb0d8fbb2c5e6563926ee79c4c7f30e742a35699ccf9da2a23275e45e9849a05665bdcb2185c50c262b026fdaf6f0bced9e1589ae2cc0381fc30c1697ad4f36c7140c22817b7cdccd24c24090be828885775391468b07cf99ac3ae6e664743b0cb771e338c7716e029b6f3f1a5daa3d01b7dce7368e4205e91e83562275bdc36935591ea4655da5b4fdfe7ec84ff3eecdba8607a73f90de2fb9397dcbc9d718fa1823afdc2fec22467f593b9d931c7e4f683b3f7f37c7c45d0feb6fe7403fdaf9ed6aa4c1e12210f2eea86c81bed97cee9c6adca84488e4899ef2883895d1860310a9b83c2f7cac6c8a21c9cdc704d833ef4402fbd044ac43ebd056eb9e4edd6ed30016a3f705addea27f9b33df8a682e2b337843a60e30b86a2db08c2b60fa8c8752ad3a6c8c5febea36a3715ac52a36ed3739cf16ff3621f3eef51063191e76b3be18a17775d24e7b86477ce9835f20bbeb7dd6984f178527dbb5dd4792797eaa07ceba3c7f7f29bd1045c90e0de1a512570cb66d0e4988d9675e1b5681f2b89aace686e0f8944c82fb8669a5d54bc38a7bc8d75a548c8ae4e8b68d5cecd3f2c18941978bc27ea829467c1d1594c345f5211eee1e42fbeef1ced5dc2329722ba2a1e4210483c49d1e363f211e8f31500aefbd18e7979b9c40fc5817095113c5c55401b64a9a57ae09d0bd60f36079b746b8b43915950c5ab549e003e5ad15a2c83756edba5792198bac10f4c4dd6cdf9fee706beed81f4df2fa993801714d8a4717e29d382286a90f0ba048a1500eb514aa1db9ecf0b2cb187cc83a541a082f7f3135d3f6abff9a1eaafd212d15f1f809f79837afc49ff46c45e6eeee486ba7c073ea4e767368ba79e7e5b5d2c01c2ef9dc93565a94bc46f2b6b91744fbd4e75fb9487112e0ab557d4a700c779b8486c56cf77d3675ce0b01fa17cfcbecb6b24f4f9629a5b536d6d3f45951a7c47fb7c8569c158ebb9f3a4c36ee1c3ef7d3641f31526b22ff2dd14e9b27af840dce925665f511b77ca95d77cd1af77c4665de61e03a6aa9c057faed41eba139b81b018287e3f175b1ae36366f5e5390aff8b450133376a0ea67bcb9a39789c378b0fb87f94cc1775912573bb9ce5772f6770f20ab972b91cabdf6844ad13abcb705920f9472c69e75ea9c7661dd6049ac2f957602afa8bef5a255cd070ed95a2cfba6b2ce152d10ca6cb12d9ee6e011999a827da8b7c2b4ff19a5f6436c2ffce0b1d5a3e886df63047f6ed9432ed9e31082d76465fa807d40d20299b14adaa6b3e22eab97ef7812b0c05286f4fe4c5425a4f4bb21b01c9e38c42a013a84c7c96631cce2f4cf0eb6fb437a6b85b3f078f73ea62a30893140d2ec44b6fff1c9d4c4a97fc300696ebda10ff331da6f1c0b2e981f9c84009b86cc1c49444a82b005ef01bf06bf483136992c3007a1e0b9cc4ad00b0482d7be33a6ab4b37c45b423bf82e98bfa202122f3b365f2a2dc40fb1d2747beebd1a373db9c058384c34a480d47b76658fcc41bfd0aa7882f6bb774a545bf4cf8312725f6db2685e373355affee07e9535a0c3f5fd67a4d98b10bca989db85641d583b0a1d33eca96b9ecb63df57aac5a147a3596111fa47903aa65dd56e53f03485024e321161f1f77e96b0bb2b2c65312b3d80026ce83e2f933cc712a65521bf6227cd20f15e71584cc1684aef811d84213e1d5c9a3269a81e00bffb154d5a543d9f9ce34fd1008cb82d5e3f13986419c578b2062fbcc757dd62b4c8af80f9c2d6ef1db885c3ef0b689cc7a1e7e4175cc5d1dfea7689863a680a55b1b48811b02de003619a276659860995d45798ce715260021452e0d9639dde1b5712f13b9bbe6a66821a71f0ab768dcf0266bcc82bdb20eae8d846b11f0fcf881e51bf295d1905f628d31d285d4f16ce657054d652aaed0ce4db5aa48de322987561b55856053a6c85ef95a2ee102fc85ee84c4e131e428c14ac4dccf59d0937f197bab2843fcb759b3b8f769f29c52fd356d1365eeabafd2825b5220e3f89bbbabb5fb8713bb3a142ddca25a281b60f54abdf3e3a9154e2539b171274b1947300b88766a7d162a0b3b971ee7e5345e8c039de499d643f557bec64651ebae9debe23bf84fb82be078fd397ac343e53dece85d9603ed16fe0689e37496d7da4f12a17c35b8c7178346aafcea7ebd0e327cb95487854944471f61c85e64959d6b6aec1eab4cff27e81cbf329140c31f21755b4f92b6fe91cf4346c11d693f899449d93e523dd7fdc259437727e3697613c429d175cffc864241d3ec5687609bb36954fc770e2ff4db7c8f969dfa5ed4b7c41548c6e5560fe98f8122c139be9589a88c0e05282cc5f00ae3178841a89725ab33ae0cfacf4dca3453b6e172a5bf634f92c164c66fcd030c42523145b769e9f27a0e9bc5052a0476d5b40c192acd5aba1c5f53e79f7b1a787157435ec895d1555d4f52b0072528ece22392e09f14749b87d292273414c503107632e2a931541bd7b470f5b131fb8af57ac9549224c465e5a8b9f0895cafe8eb413c2bf997af3013c6b80a30d95fddb7c8906c99ab87993e882dd3ef56187b6498c3080f104ba52da58c4e56cbcea19619f1e27fce663ff199cc4624aaff686a494204c965200101c6bbe3e27635aeb4e9c5cb89555f4d8019c23b48504e832b25b73983c91a0ce3e31d92834ec2b3db73942a117fbeefe62f842b48eb8890f71b31e768aaffcb521ed469b1a3a7d89615e4d60f9bfab62a3e12921b0dbecebb42c9c32e8436f6ae59ddb8ff0698fa5c047c3a1225fcacabbcd6eb10bcd0002c1492aecac472821c3e8ce5280a6830ace1c34394a25f74e974281952276b3a4f2065e24597a4a9766c9ca491fdc6af0e806e45daeeae6037c10aa94ac16ffa35c5dbda0e629319a73a6c9ccfdd4e7765b9b02ff75b003999ce679fcece1d7ef29f6ceefe0c61893eda3ea591fc6e38334718eaf03abd91d5856d47f375a47c45c2a07213ef9df4b6174d869e6ae44b985ee06b297b2dfb1d6a67aed32b3b1ba8a62504735c5ac1e6d20aee71f30a3ed6be3633794547d506d25a7cd0944055a5deb87e8207811e80a05c420e879b8b56e6b457dce56a07f09ab060c229511205bdbf04a3bb78f96cf33f257b3e4d8dc922e1ef1bf7aa4b1fe3f506b99638eb8052c3ba35d81c58e44f7c7b3c8887416bbf1759c87de4266e67ddeef498ac363f3509067610250fc418b5796ee3353cc238950a2f95182ee944f9e914c6e421e5b01576c4cd7e405423595469d51eef456bdad5d5ef317cf31f1e07a80e43af23a6c8141662e3a8555a6a0ce79d390463aba673f6a07fcbd511fb0e3eced53f2e879710dbfa6dc7e35e6eab4b4b189295c18728c9cec266e6201fc659736d5858a25a475ba512fc9d602b3a9ce4023c479d6672166b1a378b727230acaa1b461245c68195f19284d59e57deba745f410bebd0ce7974afbcc7814c208deb3662a77fc7fa755c0f954e4ae89c2ec95cc5d8fb51469a2957c0b4a965e06a32f7b312d98e27132fb7056cf00b76301d132abc3a9882f096b4f6453ebf91e38f4deb060e7bba564c517a16c9af2471595e409760b36309e8c70983a890cbacaae93a994a9bba3c65fcbef1ec079a19fc3faa6d86b78da8cf2f3e0e5f61bc9c1e23ed8d892a974dd49fbc65cc0ed6b546dea94f077ede980fbbf912d88661b99e4564babebd4b843c5ad29ef8665e8485e170d0e8cecf91f9f7e3cf82e457171b20874d5f581bde51cf8057a4ae89ea9daa3d17480dac884daf8cb2ab44d9977bd24f6efa1e0db46e14b19efbfdd1d902817641fadf81128258b0504d3a82b1f7e060e56176382f7073c8c6049284ed6963e726fc039492cd8b9de5c49fdb21bde0c3053e2d457b783126ce898cfc47ea91b3be6da29184bb067a5a5a92297ba2c85b36b985207ed26fe2be9e9b61e5039b04cd36d314e3ac7395a68680b3e3fe1417a3fc12764cb1523e972f7986c8b7bc78a2b1e9dfcc209ad3f00d2af06b7090cbb2e12dc93c979dbb0e951af393911abdafa2531190123cf9d8b5043a2940dce14301473f91b79e6691f83d4898f5c2568c10d421dc16006b0fb2e66bb45d85c7aa4f47334e304066f596e25328211912f83c7118efaef05384fe4bf5b79e47ded1dfa7e005f19ddb54b3875a49c7d5327bca71f984b9e6ec489a5987ee5e68c6d40a73b539fd795597e5aad8c4db2a661bd2286845eb3c652e682c0f7d16c92e1d962158f244ae4b4508bd105f42abfc6332bde724ee09ca764c4ab63fc4a8462fbcc11bfd46f08e919e56dfb641491e9b2dc51c9b58232561cdb6168078f8a81c645d1026ab73b04d5c1078c2534f7afe7d6b5ed431a2eef60ead25c6a12514230778c533a0538476f06cb062850f8bfa6b1d1b4019eae4f70c36f61d876bd98472b8b539d3aa8f996b40b9cddc820ddce5247fd31b431ab0533f059140e0bfd4ebc307ca2480d981680c30f66e7c757976002101160dadd03fc22555e1d15dfd56e15f8361e811d2b7831c9e4d9cded15b38bc83ded9cea1126d9db9d5c2419ad6767e2ff3865844f76b40b727bd9dd68bc01518bfbb3088f58eeda5a678bc7953496e10612cfe25ae50ce89a224420f024761ccde02297b39a6adfbcc65886368cdc17ab4ffb7debd741a5d88f68f698c21ce48ec676f0e6bdde41929f3fd9d6d589b9a170cc7a05cdaabe5ccd1571bdcb6a853c161b62f987f0a747307820d1c08f9c7de73042023917c8631211353cd3ff7aa5cfee660f8095d1ae79fd76a115b5779761c9abaa0334a71eb6fd914d387177b1e22a519ce8a046a4893445f3ae5172f92903c0e563a2d399922c366dc21b9346a28e3ecd8de79c74d559ad11d57cdfdf62424f5329e965d00b8b9a6280c0c34e12d6bbf9794fa7f62aa613080864cb6ee5272b6913a14b998409a233fc4143b00d19417ae84270fdecab4589f51cfa967a59bb8dea7446934264ded170cb0c37c8fad0f8130006f6a1f0b9c5524d08433f2adcb240a9c1c647f2fbba5d0ef9c563462fe4619f91f48197c7d9d1bd580282060aa50ec5b523b5009a8861e4196d10867d414d68dd6e1dde8c4f7c405a29c65fc0082a03f04d0b204eee315e4e52d1320e60a0d1765b3ae4f7f2dd08f1d5c598e4e7089d7fe16f4d4b9ae73ded241c3512367a1327102e25091435e246ada5f80c33d61c3592be35efcdefd258564857a42905787b76302dc8337ae7b01506a9771f599abadfff38c82175e38ed0c551bbca809baf1ce1fa3db45f69b1abf89e8769f57a59e166c8d68918e94e96dce8a421b532eb665333e312bb7b1d8071c57f3b42d11657994768915ae496adc148131cfc4e9521d624bedde4baca017d00da8db7393cd6886bd64b23a33661160ba690fb279c562372b5846f229a4bb4dba1f3e194206b9762cde9f2ccfe837cb35c294a47eb2cb2bb8a6598515b49a1e6f42d42793a63a37fbba5046f1dcfa29cef72a01bb14e0c59ec595a18665d7270e2eb2219036d464a8d04d14f02467ba6c2f809211faca881ab3e98a21dfdc148d0de0ec9a404c93548dbfc7b179c0f2871d1404751ba846ab3df81250c22f18050678380305d1b02174436bc19bbb70d323465ab4a6f3f597f742f68be198cea7df55354e3e351a71ec5d47699ad182789371db5472ac934b68cea1f5aec94932d740fd4883b86fbca49339d70f0235887de0fe2d0fa6f04875040d95e8246bacba8ee830c4d30c1f1c76ab7d630ef7fff19d70898d136fd11cb8273e3560ece63a79f1ed7c572e152b1e2e30f213e2347d581c1e3c3306d2badf4bf3db294c4f685719d48b57d04da48c716e780e9b4ca5a12f208a358ba4588cbef973f209e62b08664bd2d8bd225b5480da3b462175e166af8f91bea6568531e3a60b257f47eb4349b6004266ebb2f33eabf2aefdeea407d8ce0a57c9083a1c3df71942a338e4253d1714b56932106928a7f61c4ac013e218f0fdc1e84acf1818d2b667c35fabf504fae4ec90c091c55d39ece0e8cdc201e0065fd14048918fbe5e7f6b4b1a3c79fb8ba31ebd084fcfca46a054c325a36d3120d7831abc9516b8cada1c0637c67dc08af537e3b72f0039f5cd134b14eafc6d1fae01dd1a875108d7ba483f2ffef1f4182bfc9cf237c853a61147cdced30482294c13be1d6f827fbbfc3ed7f1081afc9557f4586c122a625dd716d46bf4b9992179e452a6cc69d8cf2db270d9a91ead70358788e1630cd2c7a22d09f83c2998159581aa522a3c89d150fc82617483f592e55fd00ffbf85cbdfbbe7dd3385114464b7c812a1dbe7844c8291ede92861ff44874ab9de45a0aafaf0433a21dbb1b8cd69c518c267aaab3b45cb7860165fd378b9c63c6e8d87b48c621ad9d57228624fa428fa7e9e786fa2bd1ff909c0539de911feda84fec4dc21aa81109756665def68bfaa39142b0a41024c4f52621ca7035ea7a12d56cabb5c1dc921c33346ac6b67eb888ba83b2378f7b4ba4543c147acbc8dedbad4a9f3baf60cc75711314cab1e9276fcb7ac9be007bb1d0a67d1d5f5669d4ea8fe45bd4ab6b58d21c43ae69935dc75bfa0db946319c254682c13fe83d0124767f5f13acae39997157a1c4b83606b158d5f839fdd830ebb48204979d8069f6be7a3fdd9b834037c77b679a2da563750a476d0605a857bea86cc466e1ce546f50c87563e33bb54ec444bbc174497ce43995d107d78f68833ce3321e56371f20591be783b20de54d4e23dc71631ee9ce0c028416c2ada07745fe8d084340184c16d3fbee8ce75daa76abd1b450546de4c8ad13d9cb1ccc0f287390caaee3af50c9ce182ada67fa879f0492c651f8183890340a708dc65af47d4ebc11fe1e274cd07d399847b5e00524723d1daac8f477cecc384bde0dd5b28334516f0bd619a5dcee6e201361aeda414b9f9e0d1edd2a86daba60816e52f54bd9e175fd78379a5824b9368abd49504fe4037ba9e1a7864c695b67ee3a899b7298382bb8d68f544416b38f49466a8676ae7ae67dce79e4b1d96222e3faee48a89a699bbf6c2d96c69969462106bb231c39ab1c37c19afb45639a84429d0b1be0050db9ff8bf5452be016429105ebcb6be01c9bfbfea77e09ede312397458f639f8cc9fc6d7a1eb49252c4868c57bfde3c065b00d49f2f6bc61f29dd81e1069eef82c4a4c329f5dc75e6898b139d55e58f3ff73f602d5bd03335d76fc5748549f8657c90d4d6b1907fd0e22522cde004ee1c58c0a4332643320c9da352876d9cbbb8a74fd9fefd5514fcc5c40c64cff95175717faab03565776f55de8c17a0ea06d7a98788ae37c51ffe03597add8e70ae9f1cfc1c5dde92577cd9cf2ef6906d1613b0a76fecdfe9aa2f8e5e1e8aa8b148ae6d4c1d12eb2790849876000e7758c2abe70a05a926f594ebe04952ab732e15e992fecf46c753939f39d0f713664137a819db9e13d0781914879e7904ca2286a9ca1068b98ea318adf6a44cf15112c0f7aaa67208b606f3d07642bf7c41cd9a62da14f5441e07a35279566474f511452ec049c21e7dbe1e2e1e6ad0d97845436b79e5b6bd1db25b1478a8c2ea97df24ff7090ca2cf04d0ec02dd8ee06c210a6eaef2cdc45631c6ecc34d41abdd7dfd02e4a5ab9f04a535adb82df3d7092acb4d3acea494ba0b3794c862c07882d564cb9364dc5f538c7621c3978d6b4a13bf1520dab9d3ec2df31b98c8ec5d3cb5c86b83e30f8e31a5e06e7f0708fb6c54b4bb4164ce3bc01e4d81dc80e9b05986488ab47337889865699c58637b93a0e54447c92cb63a75942f3329199adbc1c3a1706a045183a722ad94af9e93c6a706bb781992df3053c4f0878c99507c5d8f7205f271a1bf462f1d5006518d1677f1e0a0aed71d824c7356cbfa036af06b9584e6716f866ba83cbc166f12413b7db2d0d38278fcce0ba4a4eb3d266194251ef977badc5f393046cc981aeada82c180828775245256be4f50f8dc94bed8c72af70543412de43178d3ea97b83db758c331f447a61b52ec6f86ab3772e562a4e8185bcd4c338c231f31d9108420f9ee4fe145a6823a38c8f7afe34c891c7a8022df48b6d17d4b7d48157dc2e89eb770f62297f371b95a8dd81e5991ec765c07938d655974a1567af0e500ac047596ac0198a20e6e586356658c2d0d5c975d31b746ab92097908ac930cc111305e505c2e55e4c2d843497bd0327e0dc7bf546fe25556b7b8e7bbf196035d475eaced97a40820dca0eb4cba6e7f33fbb7ae011dadeedfa1ce21251857b2cfb7e736e6aef0f590e346b186a7114ee5f57c86cad50ac4cfde0f983118e4e00ac10a873258f1557b3c18b562ef5b3d8fb8f59c035bc3de24bca16e26c28e376767050d78baa8c6ff82f86c759fae88d4a523b7f8ad41df0a464736590805c7ba0d78aa909bad0ae5d2928e7c0e60864710cd194c855402020fe1babdcd4cd4dbba8aca8f8afa06bcafbe18e2aa3ddcdca638732d318e8055e1d319b4ec2dfffcb25dcdc16e4fdb888935654b1748b0cf129edd80fe41fda290b876c875e9f885884e3962193fafc5195726991843333b35be595e49bc403f8c3d2405261c6516273a976220abab80a6154f30f572b81a7bcd7bb4b198a61d79e37c579417011636214a59f811b5ff0e2ebaafadebb4d444f88af0c60f985b32a0d1f43cd5558bc30e23eb674a20f6e34a30ac86eca76b2c5d4489cd1e6d67a08e224a90cb456f4b4f746573b387c6ebffc9ae08cb851e6e7e215c0d8c45a722ab3a7eeb492b177e2d7b8ec7ceebe36410b113209d5ae8e27d671f4be9033967b2a3cfe1de70ac733ee28bfbbf9705fe39998d8254f5c27c94e992d7dcafe8e49d40eff22a6ed39becffb0070cbeeb9aa37299c2eed50e88c4255d3ab6cd5dcaff8a86a1cc14d3c923355a8fc1bac2ab8a0b740f20b485828f7a42e204bb02f850a3c7f1967bc5e08778034f1a3e0c7b8ad38fe1443d54b866be9aaaeeb55629c01803eae690d1b17ee8ee40ac0af19aab62a52fd319afe908dd57a007179c534a972eb5c8b21a2343e5e92b7c399a058c336be1e8145606dcddb63089dfaec2fdc1a589b5ee10a9f26fbc37553a0008732b54a609acaedaaab67f8c95bd6949ab14d35ab30d80212195a6fd7c3f98b925fcc73c53fac345bca3b4fba7f331af2599eca48b394d0ef8ad438b92f6e2ad2544247437eb95325428f461288640d7b6cc6b698e8daf904e6c724cb5dd432189bdf79abd723c181ad006bf408ac606199504cb1c75b11f12a1269a4a44f67450a3ccfb03e4b7771c579128a36159219fd461ae362942b91cffebb928705f93a80d391fd069d1f4d3dfb73829af7908cd62757b09f7036338f583028473830c93c39076280f46bcf37b9b6ee2d9f201422d7de90c5a955cc5592046f98516ca94641761e229b0db50b6038327b6b6888f7862729c0c069abc7594ef335e23ae56e0ca7f9d3e204e776e79af16710314f80767fe17256da4118fc1c03e4f0a2f2a984ea781099ce766682a1e108632c2aa3ea0e342bbcc604007c640a520f3ce7cdcd4723ff708c1dc8164c41e0a85b5f57366c367b9616efaaa8968e5fa10108b754a464883a924047e1dee417d3341543d5ed8b9f0eadc9406eaf1fdeb6322f57b0aabc592cb62622be43d1c55cecac9405d407ff9d175675d98852a06613da3be2735b6011a441ca7c0b96e6dd7bea46e0fe9f308d19e6a14c474be921ba651946e980ac9428bfa1460876bbaba8d0e9ffb9dd84f209c1b4e84bb52f8a4303b9c986375c2e549753f9c30eca91dafa118d5de2921726c21a1297c73b51a7a0cbcee3391e502f788f3356ff2b6424b685af3fd6d092bc2e131df1f6f831006f1228fcb5e97de63ed73695ff86c43cdc93d128b0f25966b69968ea31600e8f1745421bde3e15087c27fccc5bdc62ec6f9400777f3b30be145716625164e329df155ffa133d9971820b2cbd4146a7683ac709633ffd911deae3c45753834bebebf3b60d0f00579b8942bbd9557f27408cb2ae85dd1fb10605f76b9e35c160f731161dab674cbcdad5ad0a8f9ff7bf542220bde6fbfb254d2f1f0f96b9093030418e2e7d7d694a9214e1c9393b236413612f400b0de935ad6e212371580f591540094f61445d02dfaaad859ac770f6a6365183536f351a439e43390405b8b71d9d32e41c1e608ca03ef19a39287cead7dbee3cd8f7952ca9ddc7fea80a6507ac905e2897a9f44dee5b78e8abe47c7c1312759605adb14d2a28945940c522a1dfa0db2c3792ec179f4b63ac77551de08c25a80324b7099a6aa2fd770518aa20b2d2d74744d8b4e84c762fbd9785e4dd533069c9a3da41afd39f3505459f61ef0c167ddf5a9fa1ec2780cfd90e34c84163b20c168083616ed7baab7d9a6cce12b63a4e6c3eb2b5108366943854e9a7c70aa0ce8a52df4abf9dfc8a98c822fa809aac3d7c26927787e8b2b6adce35adb2737fce7f51faf3b8fd9740380e7799066bc3dda0f81d9fa2a1c4f852b8ec5570cf0d1d94f76b977e2652a1dc243333eaf607570e577f4d9ae1402e1b0ef7c7f75fc6e2d7ecec792f6a1debc25e0255eae69e5d990c1c1e501d525d3a9e174ee29099817b24ba9cd9ce9654f58fb39d85850b97b6b6a1ff1144df537102fb455b3dde87b6efbf8294afa714f3330215f4f0ba3baa2c505fc59cea63cb3054b4f20fd6c47469d4b2708167382e852e27c1a686db5190cfe35d2aa2a30db5b376c6b15db6fc55d349e22066db2619130886bd0097eef1eaccde31dd4dd5955d746550116472ce812ad30a811925b91c49c46322a76966a51fe13c7d54ce98f28b6d8372b364f6519171cacd0e6f1aa1265251c993d2888537146babec50a317b47d46c49a5681de28c996e3d0f770022b2ea9cb2bba18ed1387d1f09d6d04683b68744dbbce6f9717bf9adf9127bd5da5d318621fb18329e88833d77c1fbfc1d6570a998e4d93a4cc58b40b9bf798eca021af3e953e1df05df4d1f3f54cf6be7a5e4effea6bb6509dc704455c5360e880bc2bb2d42a15a88664eb0e124beaef77b5118868b41e8643314096816a24daac25aede1aea20e48997fca3665500d8c4a76fe0c08c3072607cc230afd20f13d61ba239cf52f44e5924e4b781e0065c579569c66e8cba409c5cd43153c5f809b4284d8d0b6dd49f2f8b734e2f4522b005dde7e9d7e4dcccfcbea9373b588f37e4adb238b1534318eab77f4c7df4848b0316876da104a545cdc9fb9a5fd86f041929facc5d50e845dd64170f73ed1df76625ce96b95d76ad94492a1e59633a606cc11459bb86c7fcdaa3d2280b664f042e93ade409347501865020127d90f129e0d54a4ddf2bec77a31c4bb8d422017ef84d972f7154f7b3de50c2b2edccb87b56827824227500bc2bdd2c45b4a7659851619a22318fed8944e1af97da5836ae1e26cf9aa5ea11fef365b7c5c592d2a5a816db2ed06a2d193d88e6be68a875f0afa8e7a9dae533b250c9727eae1ca83c00d70f76daa76ccdcf5520b31335c34fda746a650fa62ac1625fd472b0222e14267b3bc5ce8e757c03c6753c092f59910ed6272d9b00e04e4ba1747bf2f8518020f9d83495ab483e7f053a12dcc40e795ed5e9880708748d5ccbe078a222070a651b7fa1cd38f179792add7616b8b6376183f6aa439b81201682485a54259db22c10062ae55b7e4450c9f97d822e38b786b379f34dde57e057e839734a1c7cc11818d32dd673175d6957a0d84d85275588b096b017b42bac1aaa735e3f0703a580e217d824c76231ad39e1907e5c33f599b6348cad10ec1daa05bef2bc62c2619506f2176777dba72be1500dd1b7dc6727e2cd7c50bd4201e3488253976c5a786623294ce491972d24494b40c8d3f1fbda101b5854c7ff5e37f4ef7faee5f1f11df4e8b834320bb451e47b7f3f7f86190a5614a5df84d95d8c75297f7fcc0b80940de007ccd742b25a94ffaaaa18d5c69ffb3f3ad1546aa752b54822fcf55cad0c92e121bfd74c422db074a84a3093bbe1df21c1bc2ad9417123db43fee48b8e5f4d48a5eb5caa0bcd6939b3c889bb42d39c36766e48f6e94c79fa69b5dcd7d46ed535eed3970489b6be4f3814ccff3b448384c9212964f6ef68945a18c0461548f97a580e3fab6051356a47b8f9563ba6992bc77c8f6e616aed4e07c96499ecd353d43990c5c4b59f60f958e0f61847a576c90d96070d213dda7d36e137b74168254471221b671c373039f272a1641f2267467be12a2cbbd98d2f8c47d2ccb25a7deccc1350eaef5c562228611f4e59909f8639b176e80c7d3a8d8f406140e4f2817e56a8623d0f39c07b33ea1b322fe08ee2a55d0266c4568e76de67fa65d298acd3d6ca3f131589b5587bf0795e7aeab757c2d62d9104b4b9f6eae091a8d26d836192cc3e9d358a651d73051ebaa26d6856a666a98ee343f6bbf8a260d9eb5a7560417ab32fd704763bc2b1b056b27b791da07e364caf3bd60fb5824f3d44b92c17718e366dd79e6c91f76cdb3f6389aba13fafa45fe506aa4fde5ae5989594ffbebe045bba557b07625d3a055d7599d787f0294d49ea1fb292724c6bec39dae3adef784c8864b63dea1ed06cd17936d3771c680b1fb79c799ca4f5077d236014de992826630c5cb015ab56ac99629513f90a34bac5384503c63a9e2a848727ec5a55329eb74a210353e1d72669d9964acfc4da3793f1e5d70e779f8578e068f2c60e8948d92af37abf5ca45a45c72a0146caff9f42906b587443118c642887e86bc77174322740c626e8d38d568234e1a719de9050437f2ad4740e3707468b6129b61a0de1db3c18ba4ee24ff2c432003aba17a3859ca89c82a60d936717887ff18fff538ff9ee654b11c15879b9cc4fbb20a4b016ae06dcf1ed68b21bff4e6bc9c2c9337f377702b577ba1c5086e9dcb8d573fb5b0eb4cfa06612ff5d59098e3a4661cf7f07d47f412d957eb4ff04af23695b83b49d7ec7603c0df26909b196e85375affe045b2428e2db2d8406268f63e09edb10acfd4c6be2f9a620088313ed7fbc4abf08f836a1a0c87c2b8c88d222ab395987d027d3417883b231d4a91e46a3eaed0d1ae23c057fbdcb194dbbcc04e68d7df788f89dff3f73079235b1440979886a164228602883d6e3c6bfe9dfdf2cf10d18e59cb85f03e932f7b86cc323019eef63197cda7e40229e9d94e8a5829578ba03e5255ddf1268fdd5a0ca7d183bbede4e8e54c133e9e919bdbf80d78264adb4a0d13441c3d36a435d5ba7e2d14c2feed01fa699498f1d53bba4c2b12f9d3ee555fb2865fe5e7c427767df3ce87c77a09ab560130180779dac0033d9c8708ea362105479d5ae1e539536fb4f6d889277b1fc21268fdb3445363fe625f441db0454db76fe868c6a855b485157cb0687d6ea83bb4b0dc73b7dc033f3cc2bbe1e6e9b550673423cdbebb02bfbd69f8e60f4aec6918c4c392b348c9668642eb76612f10be62cb16f139afa24c366275048cd8c4c8ff5c63683f5b9c0cbeb1edc2241522450a9b6680c5da94ec9145cfc87e4cdf09ab4c8a43d28473d88ade3f76727a97e692bd4aecb24f4a0e9e69e4eb4e49cf4b260a8c1cbceac7017a68e3e3677e08888fe3b882b017f1460f80ee945f9fa8200d7cfd2215c34dfd0565e833779f7c257f035b2f5ebaebef2c81b6bee1c5994dee239161015c712862245bec42deafd1223b95bdcc0d39915b6c0dff79f4c4793bb847462546023727f115045364242545e936bcaea64564f6218b213444987554bf7883ef1b52761d40440b18ce0d65f53dab7fd799f2d17a7b89b0d8f4762930fac8207366519422063277688906960006f0e172f664a5679b77bb8a1fdacdc462d451cf7cc2c793cd397a6c1b1f39996a604a9d2b788242c8c0e5eb7b208719a148796fbcc7b5ec75a36c9d1db4ebffceb3cbc21f61fafc290b6873b4ec4d8c31f3c4a8cc6adc42e13d4319a59c2ef4816625cbf133e09298e7fac14c3400d83f1967254a7980ddf95d0db290af6d2b7b614c1aab7674aa4068117c27bb82dfad220f99ad4b93611f5c8e5c49afb10898b75501b47663cc3aa4e6b44d75ed161cda7a3ba23db0ffda7be87aa5297c9e1ca3689363c70b299a887f1e9fb8b3ac57cdbdf9133dd5cb284892936e9635047c68c3ab912e72de154fe2e12d88e0ebd30e7eb4af2f43a230d9a851c98d8d2e723bd101892a014e8d8d8ec3aa0ccac01a36c30656d623b5076b6f28bd78fa40ff4b184d25e6c81e35915aa979c9f454cb2a58bcb97366b6ca3d113fb0fc01b8f9ab3e90f6722aab02b6b9cfdc0298334a9562db7c2de947d0b0f3d5082f2ee8047fd39e307b62b1fdcb7cd74a4088effca80db5e8697121ed98b7b903acf22f126ba3b10fdf7cbb3042323d7a5d20dbc4217984cabcaab0f5cc604e192ab81918aa86f3ea2e9cff47b512dfde9e3258b5e49bfd635cc09b40462f45d1ea798b31ef032bea073eba3815b7f4106e681500ac832f39b6d67c82c31711b703352093634254a01a8be521bf5d5e4e44ce7b91c3b4698f78d79da4e6223f60fad7e6505ba45f5eabc2bcf2fee5652f67891fc739cf402409d89356f7ea3cf589070c7f9c335b2ccf6d1739bdb7a9f43dd9a594c39300e92da5ab9956c3691b8082a082081e5770ca1b71b780d69f0b6c6b484b26ff96dc1f46166228de92f3b148ece7a3a4e405edde7b935aba8c548cf10adae4950fc55b26d2caafbc2050ad71208fd6a03019007a5284a8bd9426db095f1885e7e3c844f1649d942220dad70ca37cec6699bc59f4c5740a78a68597e324ce582cc0de13bde0fd0220fb1ddbcbdc9f4636a9011bbd3e53b5d43d80059fd58aaad751152b42eef9dbf72fde1b6127fdbdfa87aaa3ed7006614941508bc3c3f296a5ca5b01d6444c825a63e754b5ac9875867b7e9545bc50c308349f2f772e24e830f748199b4224e69c03ae504410e72826062e3ed362a3e3a705c65eb3720275993a0600b64586378cd099e4edefd61892c4b7e5a8daf34f12417e1460e0e95f516ab4defe9ca42e3ef67a152be3340349044c84a089e46caae3c2550a764a513b0acfc14792a31bd25d455623242647cb0fbe56b78eb80b28fbd86d6e96619576d396fba4c6f1195867dff0c92a9151ea4633684defbc5acdc35f6e81da55964457458c3820ce427e0861a82e10b51d34b5cff67e92a4e3dff44c8eacee5968bbd3e3921ddf5e0f58f623201676e221382cbb6d936450265c02cc7413b90d40ca2d875c22a710209e45522a6a4574813d755edd1ec18ceafa621c475c32a5a30965c659fee8f4ebdf37510c9e6608aa8be281c48c304df4fc5c355631f94163ee3fabe95b2d80ef2ad906d9559f5f21056f51a0c2264deaa7e9509ecc17b838040ab62bb9b8e2416ffff0bbb681bbf728a3f0a8a9b1b52437d4efe2d418179fd81b310cb6d65ffb7222bc08d476bc7de92722a852658955425acdd501b97b5b094ea01c8ebd9303d13a2eadc459b2d2580860eff97f6755008717b966f76d45309d1fea892735d29642bb245b298e537963a23ff1dd435c91703ce99daa7ba3bcc0633e2cb0f60fe07a41b945100da0d063f844c7a209bc5be0c4247d683324a8f3ec6160295c6ecf5b21eb0b3503ff082c1d46a406e08b7f0a8ff6c21d24dd6affd693d2d1c49d252440c0ba7b73a60e66fea0579235ba4390cee3dc4881525e6a869c06c4930ca0a960ecd502d34a4c47d2b76c7292dc70152fa63865ac2e1cbbc59db056cec9ec14301e62c3ed42a958ea5d82ff3cf842626a9167070d15baecb3c2406b9a44990a9c8eac8cc25d17b316b64ed602d45de41903332dde06a8b885967d5b8ea3c1c5c6f996e348607628429e0269a3e5bd46f5eeec091c7054b2d6e3030780f466e5f4bec1562b7cee8620cf9f9fff395111e5246813d04178da6d7b83fe8a29e75dbe34c436ef6cbb7526c9cde3aa33ca2099a2023e8c9d5567cb8ca01df70a9ca80c8b5d078f9253d6272a1ec91a3b20419a8360d9c55a7aad9a2bb5c4a73f84ea755318043bc3980f2fcca69092bdecaa5d1ad281b63ac840742645020a4a922d5ad3c0bfc5c368d5b8cd35c00032c010033fbd33fb35fc82eb852ae6843790b829a78a5600bc200cd7eced4ef180176020162b624042e1e661db5bbd005bdc4473465145201cc641fa8df41b30d2a0aa111561de029df6be3b1102a11c46b5cd6a7178643a7041862c704cf9a2906ef8fc711e4e7fe5d888678e20cf285a6793bfd6282a63e862377e40805422efc52fb981028ce1c2fd716cd44fbe6582629ddfd7c1a8d6af6d603f8aef04aaade57c50f16ab81ead2f76d8338a02af88aadc1905f6d627f0118a8a55801935391b98a84f84719725bc4afedfa54023d5bec185cfadb3680057c184b488f924ca6c63d6b0b0b348e851a94418093926b95f74ea64963570016d1b8cb06ba08614725c37eefa609367ab5cd7d68b1e26c7252ca94c92e54502e5c761ec78a9290e46140554af8ee745c8f4e0640b952b5ad67036126c7e06ad438913fe06a643172b880f1f3285a6c10fe1434804524645be1fb8600643ffa958d9fc3a0a052f53474a2f3f00623d1b912cea23a1e3ea260d3fa0f0c4eedcf0ebd3c612e873b42a3f94ba730298bade6bcaa3dd3d016f2032bb6e41b3f5862719cad34527f84512a8b03d6b63088d523d75edc9dc4dcb2721253d5c463a7ed6bfbfb797dbb30db04ed2eddf2cb98e43fea6d6c092934d6db0257561048dc48b60b901909fce6e2968d9b30fdb728586d0346a32ea2b5558f3c4b404aff9180da585fff85d2b4adbff2f8784935b276234fccdd509ef99a057692617b6aaf12c5fb5fa6c37f1ba482a9d827d464964eda8d29e128ca8160aab02c8e7f9e9fc197dbc002761aaa7b023e7d22ecaa7114d32b7b79b2f74cab911d43d95cb9153ffd1922b78cf762d317a6499e38e6c000c2135153257d0816738dd65700eff284c1c9852a567cc57c1e4e40a5364cfad1b25de5fe32da01e997b620e40eda2677a7706a7b4c8c569451ded924e4e159854fa173ca7b8ac036ab02b7059a7b561efd244ad060a4e405608ea0320ddc59de906ee834146dd66a627132d3dc7a1866d27837ea1b6788a9a232b4b9ac6c6bd4616bf4c505d7b1ea1dd3ea3de9bcc61b414521e721ba1c0f1f0d120acd352f68ac151e7da3dfdc6812d5f4006a4f9fa162695fb9a2c995173a14ae665c2cec3ae1b6153d083e453a2a47a0e7c71dbb0d0526aa1c0be10c87d1c903fefd1a55ebb99569fcfce9bea318b87ef082d0ffa463ba6dc1f594f917afdf942cb53505d5d29dfec276e8c2062ad26c521aababb6f4f55722baef0b79b8444224681cb431898f89c307896f92e8042097c17f987ff867de08d7ce9b25285a3f27bee0f6746581dcdff8054e0a23558c658a08ebaec52fcc0394f18ac4c103b062b5ca936b4518f19d8dd57f111cd1c992282ec82bb5c6855fb992c7d1166b83889870520274084ec8919830d4677eb6af4b2bbf804781e52ba3dd1e459a27b42d725ad20884aaf6c19","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"037a33992977c4da73eea942c46b0a0e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
