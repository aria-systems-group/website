<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"6fec67a28753426d23ace08efe230635b8f58decb2cd0af42f22bcbb73367f4c49d60d2161c80266c42498cbc86334f926d0325c3ff825c0a763594dcfb076d60ab6c0ec0386293c03da99d51d6d826c726dd6d74a3e7a8fe79bf60e9a929b5fd80040d90a1750345e8f591453337d9f3db53c2543b6c1924200515c0e681f11cc04bfcb90bb93d5ae23b0f8d58d00f06bd75a0e47e33f0332001be1268028b9aa0bbba21f46973b2102767e2af06d1934f075200784d7dd314b4799a09fb53d25d49a4c435da7bd278aeb29348fd15ab5f895c8d8446e03cea97cb765843b3ec7ace3a3a4cee46107dcf23c9d444cc8d0c8457c41562569f2c3d4258e39308336b69eb496381e49eb828d470a855e7353dd0d2e93deacb3827af75e621217b68c6278e7ddf301e66ad61f7e3993057a4093ffa7886ad25415459d99f76a477a393dc9ff6aa8d8fb8e28be429b0be0fa564eb903f9bc82265107cc1a541dcaab3200a1263c7e38affef424c30b7f97ef4bc9e91dd527adf881015218d2e384520a6895ba696b43e2d8114e469f9d6972457bac41a24ced62f85d070515bb182cbca7d4c484b15ed4c8d94c18dc8b9a0e964976d70b506dbc6ca7162773e34258771c0dc4377c1c0e19ceb8a3d849f454f36990b2e98ef9ce1a1f4d4e3c94a217fb6970d1bdba29491de355a20357dd4919efd38d6f3da9af0396ab1eae4be3255f6391c5a7913f0c98882081b1f0d47976aba7b91ddfaf4384225143c99b274be12a62143d77d98b6d1707686c3971170437924163c786dc7197601d88107012a194a3e20e16fb2e839ca296febcbf75379e44fb13daaaf1557066fe85b9f716cb9fb00801806b3aff64336eab4fab98a95c2cb4fbe13d9aaa010162f4d001201108e686a0fe0075112c3709e0ff726e7f94c55a0ec0ad732919790c4dab190925d5864bdd77fab7aab362da409830e5ba85e3b11d4ef3505ace039667e647e5753526848b96476fe52ec0fd1ced8b9e1fdeb26211174d1b2e5b21c9a0ed476cfbdd7e3eaf411db42c522839e6d3c9f2f1bcbd61061d2362191abd1f3616262031fb6145b9f8b36f874e42ee1e79069756d04c3756a8b361a32c5d3634a9d20fac24516a988efb3f20f92383ba1b6887d830e538b2bc4d9784073286e209629be02e0a5602673a4fa89256ddea7617b7a9d2516635d6bd02e21a562596fb0ebfd0c5e92df1a919e72d505f394ff562a5da5d044029fcf3497ef5f2025fc933776cec263d31dba6a71106db664017723be43ba7253a4248d034d1d5db1c68fc89d52a5afa0d294fd825e9cc0c7de62ba0aab24050755e96ec112814039f4ba1b3c516b3ac795c8f542e7eb845c8183744e6695a002d4c6903c37fe8091946b27c41caeab480bfd84d62a2cd48a6ad74ffeae39702a04b20e3aa3952b107df39d635feb7446b8cad1b4170c0eed923b276664b1d786daf4158fbed686fc59ddd6a9a24fbe80b74d4d4711dd66066da948490a47aa9279773c3e53dfe5ed1e74a8226a7f092ddd367f102fb4e230322260d08c5cd85a77d77386cc69db501c358afdc5b19a7c64f4d8b6ca78f9daa98b1932c70dde585068a13264f79d53b20cb920d7d426fc8c5236a873332056c7cf2ba9d3fdf4d6cb6c9d5de3201138693d6e7a4438f742ec906d1695f8c4703c7128908e44c8306530eba0ab0cb49f4cc2ba1db2177fa63826ed62d93df289d6eac4744cfd771518438cf6c28b27ac18ce6b8013ecf55e6df1f00b2327f323dd6e1cfa52e1dc2cef0efc05ec5b5cef72505770a13a6511125b5094a713ac1b4e30e4615dd541129cfd0053763a345e4d239d1aeaaa1ca461bc9ea5acad2c40b17e78cf87778523f2abe91d45c3968e50f7679a147dcc0461e71dfe11bb4e5e3847af2694a90cfa816ca2dcf634ac818bd834225d69b7806a79b57d3ac56e0e2682609904431d9ce41a1de41c13a81dcb8cb48070a4d494f70c0149c68bcb06b5523db5fdc849242c39794d6ba414f17fbab7c4b52822af960ef47bce12a75ce3a5a666e1859a1ce091f2b9ac612d5aec0c8da4b9e4272ba6ca4145840b0c233bd988f8e0c27f5345097c019be27af1b3190f74a6f34bc0edaa09facd80d3d533dd9e32f9553917a825b988aefcf5330ed1e7d5267c031c54bcac477a0b5a83cec8455123d6c1e358af28ed14f93101066e0cc87e68f48872677aab55dba54ba6bde7ae622a720902f41de2664a448aa48e1a8ad6a87cb9ed3aa415583d24b60391691f3cc35f28991f9987a1de059425bf4ad2e4e9ff152c7bbcbda462c464c0fb18b1d9000b04183812a4b130b70b54502b56d29d4db8c7384d114e37e92dfa7c58abf55b47b889f765edae191fd0b062e7e0dbb843058e1e8c37cd3ca56884d27030c36367b422bca287d3e893a28ebeea4ef93965ba0632537695ad54a3ff5d1307d118703a5a7d8a3e2ccf407f277212cca19827151df83dd42db48f039ad2755ffa87ff1c0aa5e0d32054f9efe8277d59f8d022fb733501f4a7599ac7dbf64478be5f4012b9f89d1ca36a6f6d4d303ffb7f78ba53b1c61ecc63511fac553f6507d95fa9605fa23cafc0a4d8050e99c46b81c3ced8bd6315b8d0540a321054769fe55931b324f3121bf84df55726bff50b11c494d4abd088480dd5e7d20798658bbf56e5ad885df4cfd0fa1001a0a790519f980b62707f0a74bc813d9e63f290d3d3e66a57e960d9db0f9a26857bb39ed839faf5361910f4db54b17c9c6360e86e3a459b4fe3dc6a1eac97cd021a07147f8b448bea97fcff2602693f6c5f5b5a7a93c5c0fa6530d18e55dc5e774188f12c99129a4592f5145473ee238d61a3c3e54fae3b6461a1704dd46cb88b7a95726fc99fd12e2877bb8faa46a1d320040f391b6a60f2a90f06938502f08c5adf48645017205c1346f6479bd2dccacb519e01cde9fb06dcee4817393836a0074f47ebc08c5d6fe0917a7d8139c800e31c843b7ead6f562f8ec1b878309900aa019b48d6416e180c14e3480a5adfaf7a883b8e4d029df11154db16614f4f8883a3fe7d87fd738212d63485993c3448abcdcf5ae3709066a698ee71a5bd2392dbbd7f9a019057da4d1cc3de1c195b52b83e01504361f3dc9e1278acc89b1f39325c37f9ff29261fe3f661d787626b50ea1afdeab743570a670c85c8b899a731145960628b3d1150f67977cf5bc505d1d790b981d875a26291e6ed875d37dc068b71302f4c4289135cda3943bab507b1bd62116de6e64616d3b9c6238ff88a98a6f58a3225ccbfde67d8c0068fecad978cde85899b671534263e6dc152afa8726b1bb91a7bb311e14f79ba34574aae6e8f7d87741b904bf294aad9f5db58d151dbe3a07a90a0e14ed6e63ca554a5c03c8f5a1404c1ec558a4ab65d40040b04a9b28978afb5d6e94deac6d80aec9ba4747339adeb4bc2bb6e479827456fab219d8c3fe1029b2b22020f069b528deef55b466dab93faef353ce6c0eaf7d94a451e0158590834d1ab1c6c51c62739ba0dbc1e56f61c3b2c7a23ca14b45ab53cb25a89e8f86d1b03d37202a4191bbc8b36933fb9fcd004f660d08c6cf5f8ac275160a48d1e4ae03e34c4b062bb5545a595339f5f02bff1a165ef6afffb937b16307c847ea4b411f58e69ebfac8d60851dc67c28b6c0d60cf37daf60d13e23dc87639a234c94c86f8e9c4048d64d3a398b5613b7f9b6321ced3d591ac9d0138ea1a0234cd4cf78b0026986a603d022bceab1c57269461972b81395ca9a42356e65eaa20b40390039b0f3ac55315cc47c65eb6e488052d0873c4c1ad5c37588264b8511778c28d8009f31ceaf8d3e74bc63906600a4d14e1f827c2666410f0949589e5300c5198bb3812e0199532700da2d75e62e3c050885f6ecc7a6d50a4b9a170468c656d6166c68c05afaec31119fb7d70e397a03bb4e38f029f684cd8bf2330e293c3014205489f656234076ee91149b6425217173e37bf9e916f261282d31984d811d4310002dab3e37fa9c470b926dc6c4240a3f3ab2c73373cc5a3fd6e5e7dde935f4d345bf88ea36f4f0882193cc6ba67351e5075fe071f5de3217e1d9384065ecc9cfa943541a992cd98ef36f529e4cb66518af6ae85161b55f9366bd68ca6b8eba8e4d0316a3999f5b5dc1f50b9d75779e5af749c773ad2f812f1d1195e0ad7fa8e0b38de56efba6a6090f921faae5d6481ec5b27501fc2b74a1656ceb3fb0f903ac8b431c6ec2966bdcb67d24a2d14617c323881af6f369731f451a6792e40fd5188756c4cf67081ac200d7da22d5a7e2a0265406b38bbde68e860760d700f641c7df752a97b5e19e8ce6715051bf22e77305f59f7bb6cf3c5d546380705246e712eb06789b115bf3f6b9a780c2f06196fa00426cef157261f9debefcf52f457ef52b7817f00eecb3490e8c5fb8e5b221e02791535c42f0701367ef6a9cb26ab50b848272e7b58e5fb1c406a7252850289cb326a4ef2b26e28df0d50e827596698f1086afaa37ba3bb47b0df010c6e1fc6459b237801e8efcafdb9399aed3717649b32b6890639cbac9dddbe759a4701d2769fbdcae920e9f8ee14ba7c5011540f7a3e8c9ca0cab53d6a7264fd898683807509224468144a48a152efe39d2d35481c3d7c2c753508e9426cfeea8f6c0e9370fe04f6ecb78bc7e44d494c5a19050e3cea5ca4e14decc7ac549f592c30c78b10644ded93ca6a0eef3fb943577d053a715a3f103af8ad4464b1cd0419c895ae5b69e391a411d4a564af1ff18a9ce3b4f5860710dc74accf89d42dee6d0579260cf62dd355663f4ac84ad3d930d7c0a96f44525106f5a97b71b0f36c9cd540ceaded70b9be76872aedc949920555d86ab7f0dc6232aecb0b920505f9686e0ee524952bcf517f6f1d5e9f3ca037328d274bbe31e204638fdd8d349e3ba5d73afa3ef2a589a8a613d00d6a6e7c092895952e6f8df16dba11d731584aacdda6c511781a863e768bbbab9f1c1ee788aa49962bd789db92cb9afea92709bc7969d3d953e3e8b608da493edf00052ffffe0e844c12aac39bfb51c86c7e0903fc206b3892b0fe0c1590e34db66054eff7ddaf02c0040a9296a9bbaf36309a6841fc3061e44fab57e3ea86f8dccd53a01218e5e045206ae6c9e8125b500e954dc11a0c77678a5627944d6a24fe613711c4fe12d6cb41633e399b9ae1bb1e06811689136a3a6bc0c82bd40ae6ee1908ea0a7adf7f931bcf5636784287df11f71f6748a4dedcdbe94decff14f357258ada4411ec3eebfdbb2f855bc27130134bf8e98c9de8df0f58de960b8a07d49d9ed3528a8ed5f51d1507897b5349feb4b3ac9ee0d8152cf0c2935f177aba36d01ca97f17fdc421f32c3077bc753ae6540677fa912792e69cdb342c891620bb1a004b2b591e28708e2952ca17ca5cf25d7724cd400a017987fd66681f6c296d83898c8f581fa91a8f57fc9d1d8ad665dfd1f60e4d1fc4bb93fc80cc45414edef8b4eb129bd6d98d35ead7f1b35971324353237a1147f92abe73121e894c712c6ec6c1ecb97ae53dfc233cb655bc61801b9497c3bb8e4285e219f5f8cb48a1c7d80cce185404eb10d02b06e02c71edfa65a0c0b27d972b948e547eced3da2c0c61ea55d60fbe13fd24a392bdfbd3865bf162a4052e5b0cd584eea40e26398816fa64b84ce69a44ff1bf8c2ec8580a7459eb9637422e704f7386d262e82ddc613e960ed34a52397b45df4dd15b6749cf2e5da1edd340c37fa905fa429eb8badcec41bbaaa5610dd6fae7f3c894b77dae706ab12fd1a2dd2e1628c8184ecc3501bf6e3d7fbe075ad2cf2264a83db3c0f09c8d82199dbd117c6d663be4f4a88a7a2c22932138057858dea691571f896336d213595f04d8608a2e9d4d7a1a3bdc03550498cd3a46bac412a8e1dc5b880cee3dff28e015a868b45b110760d6c899bea3aca90db428bbd11ddfe69ddd03be1335fff63660e9ed3c1479a81a65fd732980da57e9ca2a3b4788bd176a0e1d5c3458abcc6262ddb284451a19fa1ea32237a63f3c80dccee037fc1787b1f118e5d62a64b97e6d9be015f811ae74283a8f4f2fc38e56062e33583a22dec52e4774b204ca4567f1badd9f8e97bd9267bf40495a180ef2a08561dcdd88dd2dcbe8cc9e82d19ccbaaee35a00daab3a668f6f5228acc4d055f50a213ba8655a1b4dcb9471498d14a739f5f63dc9b785943fab3cb9c6abc15111b5976540975a1aede4acc6dcc4ded5167ce1176637ff2f154b7fdd4672cad2a91e45dc137411e848e52723138f72e556be433ba80c5d50d620026024cf7700b9fa12aacfda42afe1bb5c7d501fdf6767c267f583d1ce3c61a75315bc7adf3b19289567390320ab8815e35839981bba91d4c86001a15976540269e880efefadc3886e21d728e7c11f7dc9b2a85fd555a6f62af8ccdbda4d537f158758064505c86b8640dc04c08554a5eb012a0c22f6dc65aff9c2d0df1a98d33cc107320b47f3cbaf92deb427d891aa4ef1286849884fc0be53de46e37aa737c3cf95ed26509399eda287563defdb369d187a79e3d1f4656cdcb065f485b865394511d8053307390282da8f36c6a098a0f73bb1e3c29d098229672725c7f75fea99a652d1edcb0e5672e6ac9c6d5eb36f12832f196f6c4601bebd19477de604a231d5fdfb68d03050f405ba03cb66b499815c689a5a55ecc4b271460e82c92a6eab6712de60fe9d8d6b658558857a6f8965406cde17ed17157f8097634f0e95736c21f336425a30fa9f5ba78622c07d3417de2b651971ad4458b06b3fe798956c30ae174f64daca08b82a656bd7f43be15d10aafa57d34c1ca857ea724363f32ceb6afe4217f096e32bb28c0245d46c99136264865b844fcbf863a8773c4ff2425874d23c3870371209f1e499381915c634a187465bf41a12de6c638b9a8bc214e45d8f6a28d79f9de378191d9a93b6ea5e6321bb356c6d472d2831eeef3b929cbea52f684d06715c838abb6f5dec8e78f7e1393811ffeb6920df0dfa48258bffd473b4a3460bbed3ad974d02e8ed48ceed8f8b70ad956ef9d7529d86d0558fa5bd7f78c240805d0c355db34acbfa5f08f05853f6a9f394e26da1e1952c121139578dc0362525214d230c28aac367cee6c1c0d2f35e2d3c7ccafd20a69dbb8a4b476cbe1d1ea8a856788a81d78d07b3fc22f211cc3585eb5b6563ed27aaf02c3c08b42baeb927b779d8de13ccd1d70887e0c9d595c461949d717667f8c97dfe49059ed6479b0f090c0f516b5957e726747c046ddaa9c1f764ef03474d88010aa82f25f9bf23b421fc0cefbf9df53069ea4c928a7e96c3cf285d2289e03e9c65ffdd29e39aa579e3c85880633587ee0a09b15cdfaa3ec6b6a523585eecda234bf2a6838e6622761e75ef43b0eeba73571720e1d2f5ef92625bcc39fd0b55b6d4d1d583b4edf7b6d9919e569d73710f03ef2116cf013bea4bf27844ecbd513d9c5da38448c50a9effdf7e0f7ce886e9be6650bc2da94699a034407d0380223e32b1f7d5a5ffb0add19f9b41845de57390e5f2b2c01fd26a78131daf8e697f202b200154c3cdf4485fb1232c988d822a0b3f9d164ce4b83f76cf5c9767c2cf81935e6d3f46f17cb1f4f985d68e5a3ef321fd7874063c2b5fc80b22ddf01a098b516497b21f46a30de8baf861e5026051da4b8f37c73307907d87d2e06d27d89556e8ba8dacf439c00a512946f57fcf1bcfb57d46d2f5d2a3ef18dfa49f135979e43557a39b35dd61b08a0e59f5355429fbfa5eadbac0280fd8e674aa0283d0b8f97b90555f92d7d3b91a9090bfcab5f1fb4044eb2a6db31b93a0a9488148149856d65fb8f0eb34e5a0691c04a629f6e03dcdad28eec560f436762487673c0ceddb0b1d4db15262b73b9844c602c1895364e1d8ab5db0e41eba411bf33012f0459f77afa11ea68dde78275f5de9e7a8f883d7f36ee2f1153db18c8ff7e1e056028e55c5ac9374a74ead9df174448226607f92cd1c61a96c2dbeb7ca0c9a3c092524d22ae80a9bee103c84b25f21ff9a20598da7e29979801804f2b62f0203ef5540d27d70d23a94c6b7a052d70e3ca68985cd9ae4710597d243ccf9981fd57a54058e48372222e67a5f1bfe287d67349135846e88336307033b581e9f59e53740ca2af5ae96a524798f94756d1be57968c55c5e14db6a0c37a14137f0a9b710a54851df597861e95b8abec30fb46ad2f1dffe82287bb929e97e9b2eab0dcf03a8dc548da00c0905d1622f590849dc61d91168e5aa1dd3248a6c92d21a2ea5b16401ffdf66435b112d6845631777d9b5b344b411d1a75ad8afaa1ad0db552abfe74eb5a4bbb864bfa01f059682bd4b59ed5cc88cb4212147ae69a74bae81667d1ca09918ca35cb7c54135787e8376c3c6abcdb401bf8f987c57d19c886b2e475cc738c4ebc6ab9fdb6e335f81b9e9e94eaaaa018f497525adc5390ccf545d65fd3cf9a7969f648c5835f506221a14c3f23239d51cf3cc813612e437cceb12927bb7fe1dde5ffead5525962403b324297fb97045f3b57dcb6b06ed5cf79bd3471f974db01afb95a7af08d2be483435dffff4d2efff47f8cc8a35fce12e949fbffac148caff6545545f81da94c9d1b011c6a7923287106a86a0d4c26e1e8dec95521e4ec36f9d4b8841430243403905461470875488de564a4c542d5aa3838458a6e72325b977695eab2ecf7cab0d6288d508bfd375d6e6ab4d354f43f394eac399f389b07fa0dfb1c77b5de26fb51f99f46969b980c99a4a4dc8871ced6c7a83c4ccdd0d4b8f968928f0a9fd58fbf8af53ce19c2d32e8a55047aadd61a8726e4b505b0a949458bbf5c5590619a8f49a817f8dbdde4b072f9714064f7a8367de5e4f4e87b8d2fe427c1ac4044182af5789429a63b0bc41c0ff786ffbc02163db39645862fea08716551bc216106b359631698f006da2b458280cb383266c26fb221efe1754abe8a95d1e2e896728298d335f951a015f4503661062dcf18a0ffcd600783fdfb100567aaf95e0d6c164e8d364441d59cf853dae8c292a2d4e0563ac59f14c26c13ad61646b0760e5a3735a57124b4815bae364c9a6fd87e4fff5e4d09eb0f0ee24a2af69db547bbdfbaa22402bbd90a67aab4312233ce7ea6c25cd52ee0c44b7b29db4f6ee5c21d5e992415953982958ec57c73519f5cd08fa0a6e27edf875c10f303b95ba29a0689858682d7c339291970e0c1b3c434ca15c915c1a2da5c6d3ff6a6e9eac06d2fcb9ebd2c05137cd3041797470b34daf772fbbc52e4f368cbc277a466a30f0e9bee433e33344f34de535be66d435d030c97ea14905bed57ec42c465c4cfedcddcfae5506edbcfbdd1bf2c8f007deaa4b0c7ea6e50e1e8b620b93eedc376e58d160787c32b427b5b556d3047a779900a23a908b05de8ebf31e2e9f234eff2942e64349547b7925ce69ac883fc0e1f0982e9e31e45e74734fd0572deb8b5827ef952e65c40a2ead845d80ffb0ef9a4fb23900da13b9fa87306ec91062b7c226327548982f613ee0107b8dafbe58c06948faf9618fa1d268ed3d004bb769df8865de8dfea7e673201a9c1b4b5008e56dad3f08f009f9c9d3e61678859ef8b210775158709e263fe7345ce41a2df1ebfb5d3a71305964b7c8ec4d6ee772f03b11d23a784e6fcaee52d2d32f99e884a02f338d8b103cad4151a79aa6cdfb4d96309922e49ddf8c4ca225ab5fe5b953c44f60c7107bd450f8a3cbf875ce25b046e3663ab23d742ad2a96442a552c8f95fe0af031c4b75981ab5bb494d098adfaf369076db6aedf44337f81eaa4e0c0f57c7c0dcb42b64afc34519fa299dddd3d9ae385ef7810c875325ad6cec2a99805487e775d517ce3b5e43de01f07a92ba35aa78908bd386b66069817b9c0e0f5685876c5e53860f38f37afbb420498c6f7e682c4efabfdc54707b54257c35c3c65d61ececc6f6c64ad54ce4ebc83d7b937ed92b23e538f0e90f145855d8bc4b3b05fa7ad8e65c650066c65d48ddb9417ed2a11ca311a1c4f4383e51f9808ad0fc8030f697b0036a5b6465cd8852214e4edf2a40a0a65ec87eeff77422d53ab3df379370b0b9194b7deced55b6ffcd7311a9ba0ab5d92f6bb6bce0d8f362715daacc5b751ba16a6c18fad678e6b3c82cdda48a76b32633962d0a9bae2ba1d852a9bb466f9031d654ae782653983ee0b7104066e13d992e0b67c38c0dc4a33d4d409289d90178e9864850ed46b87d1f04092dc7ea80fb7c2edc7fe3807b47b0e09fdfb7bcc7120c719f3266d9df17195f3286ef1a8709399c6b553bec53342996cc6aa6646235978a43be9dd25691585535b62c34a0eaaa9dd210c39cae6b52764390e1855d64790e079933a6a06ba3cdc3ca0fdfe1a6ac91d8374c0833ecebead812d2f035ad304b78c57231b090fec68c738746f20ce11cfa9f85967ccfde76e25f62fa9996b743b3757151688de681f68ff5fb542ec80d7b2eed6cadf46c183983a8e5f0ed667b923ca6c2e4c46ec74a7099c49b4c69db021e4bc5d5c89a97e76bb177ecff417cc4937d84c85d49501c6099fad31d50694c6817b5108c25710f2b35219ba4980e5a4596937f8071bdb2ef4a1b55a594e81dfc05f964dff432d683e13c4c1a17d92462f89c27c9f573d105308a0968d6e075d72d791c863058e9b8cb96f0615dd0669d86082cee092f58fc2c921becdfdb71be5c799c3588e587ef8d4ba13d50e3dcfcbc891088992ef5cc2629eb98c200f64ba32dca69d4dfd7d64dcf933680e13bdfb1df7ea4e0030d3c3bdc1fbef53f4531ef0596c37be4543a1e6e45ee350f155c632b6ee9cda77c4be500a2af7a15b8970d19a0e4e794a629f9c7947f59714112e659e8ab0c11049ec0fabf97375193e89034863ea0e545c613daec2f959af19231353ec668adc1335851479d8ec07b373de3426d01b75ad31a6bf30338c83f1f1641743a3eb0d7b04da648ff44b55da646c31ffd6cfd46a27bbe841d4ee152058b19ffd75f1373ab95a4fa85968de3089416fcb53f4f0cfa1fc5f4b0e87b59699a96fc223067d0c6f830caa3ce9c4db0f92510d3d5b1422e924e5b2b6635a711ec3ad6e6b6c70176e4a9db558f6b7aa994a7521182d8fc103f65a86623de23459576ac1b1f96c251b0913c42d09b44c0d0947cab0aedf1e8f969d250a4e706e511b2fbd06d15c9fa7d76d81a6a211c66932834c4cc04a6d7132a094e4bed8f05c16514ab6de9f9f9c2f7ddf182c7e781b2154f5d794ef96295f2f9b703fdc6cc41e8f2def51704dcd9dccc00a6fa3ee6334df5467d77f255e40af3b76ba54c9f8f93711125e8b11d5ca37b803e05b58ecec83b09714818db7b65257ebb67910d6efcb3794356c856049ba67cd4befda7ff1ca089084b1cf5b88dbf2e04081aa01f1f9739409a11d6fed73ac93ef51c89afaafaf3e4f8e41d709f400cd9bd27760a96e04a84235e967a6d107ff9d1823afc58edd5296f9b501024f681683a886aea79a8cd9dc854c5471d3a8a575cfba75e3c4774bbb1b4adde4dd0cb108f2c0768e7416b90968212d4e5629c137486cf2ec75bcefeaafcae07959d88124b3a6dcff614d404613a306ba1d10a8289fbeaf95bcaa77bd207b3d564d299637604e966fc85e70ec8a10e29b0ae286c7978cfb43d059f82bd9002aa2fd09d0ee2b6143556f616d439c08eb197fc6abb6271ebd30cb0755dfae3f23b6e9a8a8ac1f2101739807020ae76666ebdaf6fa99c8de02066d16dd701685b7a2a921debc66191ffabee38914a64a305030f13369cc107e273a1e138cad41d1420a6c39df6bbad1efae4e191489973b5e52663c3ac7482757a582ad20066e1a902f8bc8130f3c1dd3446592c203624e52c310c85c59a0282ee6ad21ffbcd9f9256f61319043de6a3d73de85dc745745bf981117791380929f2640db91910cc4ae5628db76d6f3215bfed44cb9dbec032c8bc1795057465597d1aa91a1b5099ec5372b8e05f0b1eff83788feaa7ddfe62c8e42168a80b555c02935d7a6a382643a3483c07877e306011775a03f4ccb3c59ecb904b78905138e27580b8c0a7f97ed572d01be37aa32d3840ee1e389d4e0193bbc572dc27884048c5fc596ad3b7df8e1676fe3d574dcda6233e839edaa1dfa16bb4fd1ce790566dbbd1d58d34b0ced270c65d3fed9fe5f8991c1f79241407dc18c16f8d819be2422c81385db65a913f8361b6ecc4b3de0b3cca65777c2db2e5090cf77bbaa29802157dd7960d4608e298d829faa0d43bc67129d5c4692cacb6578ec9354897a4d5448a61a4cd5930396e46725323a4113f0ec65f2a0481709df8dc1c88a4db3bd5b0e0dcad96b8da299d1bdd14a6aeac753fae505a3eeb3e0df1e749092616a535c1cd9a401d4daaedc5c71eee24933f5f1cf0379f6324e36249ab3d4a65048cf4308db09fffa2e94ce231cbe68a8aa4edd43c8b938da0704ac64e594c2e3021495edd7d620ad12c7980b21a44ed77aae75bdf45bd4539ed3216bb9977d6a576c44c8f07c16f8e797fd9833162120275e89ac341313a43485d1e6fdafb9860272f93101b116750cb8f68fa43c94e2d3eee1a439febaa8bc79cd1388963c4cc6250aaf5ff4aa0f584b953999c67a2eab86bd72b862a24d5226a979609f414e519af083da16f16b82bb1da6c80c1db278874a71df696bb9a63195b0617b3411933ce6050c9b4b8b8641a688ca3d74954f8780b18c6d5d1099055bf971f0054ce12df97c29e4d9d02e3410e16dc063bb4424d000caae147e75d90c714543826b570ee4ce7d61e842bfe1140a6dd19c935da94743603e83c0925227473f77498bd096b2993bbfa587d99e7b2d375a616558adf2162ba8ad0d0788c9a24e050500f1146fabb8888b0a0e6fb6b4a4056555cb217ad1ab39d0119eeef10f2cca7b3bbc4525fb28e52e0a29395a057b5f9b4894c1345315a693573be49e2a474f6ab144109e88dd4498d7f10364a0483c44a66f1a4078a21ea4fad46bb039f7e46f7df7b863198b72c51a55533a9cdeda401f2bcc5380e6026fec0a26a61cf5aa6b746e1df4cca788f2dbec46bd1290d48c5a7abc1a1956388d849cebc8d9ec4c824aa66d6dcd400fc4976afac7ede213175ed2030330abf4926f78892d8a7e306bdd96280a7f05be5491b3ddb04aeff82f7f73e06dfcab643391ffe00f222ee9e36795dbe689f2e8feb046cb161d1f03e186b79663c4e127cf8c5050547b6185ca0b40b941af6488f40087bb072786d413e9e7a1fcfe1b87facaf09339e9a5d516f6214a6c82b4d92663c00ea34f0f5909542ab4e5b9dbe576216e8571ebb6f8bfece658848f51d3157b8165e6839b42d0507fac684a57962420cf7f24dd4a34ebca28eee95d2f617b65c95472577af14d26429a174b9b94e4aa25de8fe667d4d77267b0e6f03f478fce9aa1db5cc720589e65bf45cd236e8307667297c02de8d11cd56602c4a1f7012f4896dbc3a496586003e2d1603cdf29432f19d8dd66b011a68d7cc8de50d0cada78419895298ca78e5658eb358a62aecaad44d1594c491a9bef54b450e372f0a881e31a257c76d30c30f2d7546582e42b2379ccdba8a1b1b550a21b0da4a1004ae9a6568b1880ef105dbb2f598041ad01a8e8c8e53a2b0a3ee9a7a38d136342ace8dc9e7246b1cdda1ebe1de7e84a9ad9c0a6322e69ce2e73cdfcc89ff885cab553f191510b34ae629c0de737b38ff5e9621fdc816035f5ed6635c23320ce2c425f0c02f45990cd74d8f82e0dc599f46ff0e261902b244e9f051222710254f1974250fd7a6ccb22625414afda302034aa0ee155ae2bec9fa2da8b75524b29258c1ddcce98e104d0b8ea815a42836b13e874de8f7d645e74a487b2b59baf165e00f91a0f9f30799d45904fc39a834d9cfadbab95ac6db254e93c440eedfa0d2b61a59a2ef7b3e106d95aac7055168fca66bbbe42aa96a128cda85aa6c866c68c4b8243698297470c3aa3a4c9d7d3d79b2ec86d09e95812bb1d7d87ab0dab2bbdd7bad502fe66d18105002ee4793c1344e75ee5678c07c50a4d29c5225910436071fc25cf5d4ffdaa5832d328a5e32eb5a88d9b45e8f4fe19e2810c60d8bef6c0a0ab55622e9f83d7eedcda11190b6df14e8cb32db513b980ecd9d44e8cd9bc0935c23d787fcb408b32c40d674638cbba615c9ee8d14c1ac954b9861d3ff2f38783e639da195241153fe7cfd5c2dbdd01d102a3dedf16dc18e946e01a81855689aadc18033025d99ac2808d14b24284be4ee73bffd2fea4c3ea7a3c3d704a104c7803c806793a13b520936aafb92bf7a32a1a79371ec678851a1ef3c69ccedcd785c8bb3a5591a58dd69d7952a764b51e19d2423082ba150ed70bd885508d9acd8e4a31af86a1ba02ce9fb65f7f66e05bf81901578e0cd1d72d5c034186584cfc2bdf19a1a80ff28409ef0d9ec35ccf4fc953be5bde39ac5f91c1404cdeb1af57a2cea2160912ce23dda34812ee767cdcb87ab5849e74e78e1ade6c693758e4c2d81448f07e82c5bc7fc708238f703d0ff3a3a76692c8db02605193de1a3122526e48827a11ef8b10a4035c07ad01ead4d28ddcfca9b2221db7c8434e9c2433fecfcb3cb5e4db99e0105edc0881952bebaae66c92cb41205c80a4d42f692a53671093511909106f2e12e6cae09f04786dbe2642f630395149cf27d929bce4bc4320051023a86f6c3181da6564c1d4c7558b38126d4c3b2565d314c7901f4ce748fb508927819c2b7207608096d1c86df6a1dc290812ca12e897322b615a636360d5810e2e8a9ee16d7672610d85eff2203d1398569a079b630569f58b86e93bfda8eac7b1eca3b66a42164e41c1a6a6ca6a32b02607f33ff7a207f1c6583da9cc583c8071c4479250bf7cf2045b1b50b015d77b377345b78d3a57daf80bd645d61604558cf646e7de60ce98f918a7fec5b6fe1661b8eb127a22498c7dd9c76e3c63efabb8bc5eb4d9f1279678dada99eb31b0e0b0f7997df58b2640fb5cef3c619d0afe8c7453e3174d78587c4c75c0cc4fb4513c83a4f87eb32126c003b4b84215573b973937528a8a0368a9f7a11a37b2de356df8f0c14d0d67c404ba4656deb62dcad0bcf068e01d2f8a88d0f2399921e5abd45aa8fb4542168754369b0241ebd4f779a03d125fde591895fb8b481f294b019db30d3150fc45044362115f3954ea9d4d0a934cd66fb9d9e9455db18a77a50e88fa9584e7413554e67dc64a5142df14209668ab1318a3b5717cc31b79019a9f9641a5a7cf20c31520fd93a0586149d537097894c67667d7e9ee8ba84597f5b0124fde7d81d6f86b7d1eabd7226cb1a544bf4859472526c18967f4180f6f1dc67c7614a6c0b12571e1ca0d19263d18981854a42a9e2a50cb4e5fe9cf9072edf9bbe06226e788ac2a546413fb8b75e385c8b7805b34234e58c3a76dfd8d2bcfb2b192a09f2f7bc09065ba1ebf5538d0381418955b4fa453d9f2993c94dced327456bf45716c6376fda6e839c319202dd244d4cb97aefeae29ce80e76f58feae6e323a462f77c66f9cb3c1d7356dd3b9667bf034c6bebf5d5076ad5b1d76c7a50670b7ddc80e9c1c7ab8423c2010d442b634969f58e4abd45ee7c20560fef38b0bf753039a824cd5b3d0456d7332376aea8ce4aac614d4dcf911e2eb7c443a205191f348352f463c6fe73e2a9656fa6db6da0dab219254a5fc1d814000564d70b6d5a62e6875e14f45f31b1452f8202aeba7e0ddf795f3ebeb2f9c14e6d27646b25544a142f76f6578d1772f09129a7413c6c154cebdf16b0a741c747002a0547d8f305f241965109670993f8034d80b6fee39ee130e610afee60157c0e8acd348a9fd36c9322640d5dea0f47b5ef0ea1394d90a6a0d78b744633c5bacb1e0107f42b798378c23ec253283e48c1ff82c8c19cbedc50f80061a87a4fe07349b353f7c38977b5555cbed9612ff797a09d2cb4794d33221c964b0997328fc75696027c8037402232ce1be716f1f823c7b1a8a1b312eb22295837f844aad9c6cf67834c62716d3c1e89807682517643593f94497029502b97c31b9ada8c9a1e7ba5be61dc0c7ef2ec96305740ab11bfadeb9d8680c4e5e41a1fbf42ad42592e25cac2eabd6819755e6c84faba40c5ad5bd1d671fc68d0c60d9553c048c4f26faae638b6506c3f0fdfa4c9a8c97b83d47ff7669bd2b196286fe96ab0320a0271bf67a32f8e04bd1034713fa2452ca6ad34bb1ef4fcd91b371c0aecee29e4f017c026b34f94404c308a3d006663ab32277ac2a0aa038749777d4c3b8e9487c18731e0e24c1cf097048708c4de0ff78b28b998976f928f0f790949efd19c8de9f63e19c8f267a548b0a6042e63c56f3fa1572467e2bdbc6f7c0ded66aa9e55290c84884b39c112e95981665c9bd5645db5ce32c2b2be4631e3d3ab51cd944e9fd46239e623c56accfca198840b4d8b55fa451b9cd4bb005d1e3e8d024e6883c03774f71f49c9b19bc5f926be15b6a30fae00ee0283417eda27fe9253f1345ee631705d0403d3b83119e2c266349b1b730248a5aa4b74f97316a97204f324db8a536a5197a53ef44e6ecf08a082798c7209debed809c3cf0e913f3df13e1d59e9551ad1b5384fb9aed91bd2f2d26d1c54ef1608bbb807c336e4a28fd99d6e8a7a59d5d7b08bcc6d01c5abb6d4033929ec213915054bb59721520ddc43457403b40546890881e3ff5e0e503a57626d51a326c07f9b54e4378a9d61a8784d3ed4b4d1b374294ccdea6787178e3029f55f2c639e0cc1c4a8f3a74f1c22a4519b1a5ab2856a6c1cce5a320414bce8779fabf187ad9632bc497655177c653dbd428c434047b0209e70f34f78efb2755996ec5ae4a877c35f624dc4068ccf448955e6ef5887a0aefe78d58d916961fee047aa88aeddb004d6769332a2f5f1aab8f7c313299b0d1a7ec2974961a2a295e8d55979dcad7068a540cf00409a1801b7e2381f25ec869690bfb9d7fe8dd1426dd067f8002bc5cd5f3ff9e9205578f38b6f3633bdd31e144d9b8dd66112aba72cd90c0dcdc64995dd51beab50c19e4666d7b2eb721d4350122835f69bb2beb5661c13cec3d056a395b82fac614a8aa0ecca0522718191376f8e044b26a7ada9b1f5f2aeb1fce40cdc9b9439649daee6523445804e8abd188b138c8c54edf477b986cdabac6bd2a4fd703c70a3b19ecfeeb67a3fc7747d67820b98586a809aa6972bd84dad5ec236d3ecb38da02ec69d09d1c5989f6831a9b6d3e36e5e0c4bd42a5da20a3685317cd00abb8c978240d17931dc31bda99c77c115b0b23cb2bc82fef2b033dcc2403a0661f1d7bbf73006ca1fbfbb42fb86eeeb7e0c0088e03af083369a76c917145fb5999dbce9c1e338db97982f85006d32a4820caa94bb035b023bf5c86b7336ad71b98c71fca50bfb93005ddc97298710c8d5c8fe411ce31116c75f62043e217ac1127299158f7b6f80f742621719a133acbfb39c227ae33f1a935c476eeadaefae6fec7f26c81de7942b571e652f14d385f80828f9b2cd122dde2b20404b3b3b0d1cf70880bf962acd4ab10b2ce26af8bd37c77c7d78c871703636a020630753cdfbb18673722ac3b3abac5cae09c97bc8677ad70b9f74d17aa1985757e7f0b73e2bdcde678ab94a209d83e64210188d2ca1f77910d5c77da02f02cdc5815e44650c76856403523839fd798266d57fa3d9b6bcbbe48e2772bd07a1be5784e25dd2e3d9f4ea06142b77107dffca8620c29e6a01b7c30df00e38af3be78e18df72ab422d19515f65022574f14a1d3d4e9eddb7fe8b3a7fbf9b1cb18f3f35deb5c220fa9653dda9eef41738998e9f4f192d6cb9aa58004748d5a49823e2c8cfe134918dafb00bf95b7d6f19fca9c74076b767776e6fb49c46da53f46db3dfb3c94c27704770e836759e82e8e0dc10228496e242bae1db6d6955dcc5ae9ec339ee98927a97bb7b9a2d3cc179c409398c3d2518406c0ba1cbd74eaed194e49fc95f4e69c2924129f3a902bd6d4af559f07c14b49354cdaefb59e69f2b9c0e2aeafb3359075c9dcc3845d3a03483e93e3af876518f5109eeed955d8a45348a155181c29a00055ed86aa56cefbda30e64a0bfc9acefc12e5aa18d5b42d6d8035b0ca734f78ac90990a493b005b6431e4ccbf955f545f47b45f38a2ac571e0d6dad2cdfbb37de85cd94ec69a3cd947814ca761471284f6a12ddcdff11fea633726939d8db32a55b3e3a24de89b94234c76d6d9014881325f462a3d038a437fab11505039e04da69efca890b67fec306f3c394ce5dc5fd81e750f9bc34cc6bc5f97e86754a19a42bdbee1abba0d5e394963f3b915f5bfc7e21825b8de350dfd4828c98af691a5b7328cd541efbf1a5668d04332fa2d4dbb1f334f66f4d588368c40f1d059150196c90b437beea6213cfb91cc656f807e1bc77b8e17a1aadcac20a0a40674d28b2515748946ec98ae327d6fa172ab8222372b24f552b640f4217d887fb29af10ad7b639f284144eb8846dfc86d5ae65d1186698df64b2f5cd4dc5116d3bf9565fe4bf08f188cb7e5e8157c0282e215b9aed09d308595bbf6472584234b517b2fc0bc0ae5c95c8a47bfeb61baf05854c314cd50fab05d30d3c5f87c5dcd5e409f9dc5f3c6b0c4aeb6ad6b7f8b3ece56","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"fa8832615c5e6e34de7fc57b292e45a7"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
