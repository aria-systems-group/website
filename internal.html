<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"6e2fee811ef591b874d78a7e1272eef468caa139080bd0bf385f3209e6d8a572f3adf64534dbf3bcfeac0ee208c02b6b3eebcd2e97f96595b1162eb4f453392077489d58665785ada2fd0ee8ff4df276b8363ba92d3f413b70919d8629ca384aeb885c1c9ce6db6117b5e775d2071a3321574cd7f0a4f8645bd5a567d37c451eee72e724fc32f237b17de444d1e843cf570100adb2374e181c8f2f37d112daf9aa69600df3ff4f1301a73744834c2d81bf533fde47990518e12d68df24dc926f084d359a0485cf48d80266c1ebc4a0f1bffb3b33dde0ddc9b69da12d59c58e2df6f5c69d1aff473b2a098880ff630d7686d61869e971230df1813fa3bcb493cb24d5ce993e080b2ea2df848b48da256fd2c714fecf8633715b87ca7e50bfd7c042c62125bbcc8c7a041bbc36e534751bfa3621c09bd3315804544c7ebc4930575ff19578fd3287f54920660abcf2c0e6e68bc2a7b45e271342d22fc3c5a2b5111166f94763345e458db37b1581c46e8d9ba4436626315d24da189339283823b163c59cbc73919eac3fc2e1124035c1519fd6f03c8600613df5ac8e1165054a8607736660f90eea8eefd3fab1f396538a7a7736d57507969e4fc1c295be93a5b7dca5cc0931969590bcaf7a3b85ff56c1ffb43b3e7acd2c4b85079f5db91716ad022a812351efe70513bd69b5d29b396bd6ae29050229a74ffdb4ec5fc4ba6ee6077408001d010f535e537c3e9d10c6a89ccbdb8f3117ae5bf38982587021b4cce996d306413d51351e94e719161bc21f8a0ffe2c5be3f352823c836122d876ea23ef3f9816373353768492cdafb7f0333759e7400e11c833194608ab75d255a470c921d522f6bdbfb52e93c0775aefeab91df32e31a2c8dd597ed992d919df7e164820b4cb8099f475d1fa770c9959361734533faa0babf349c07b91dfba10330dc99c231b8ec0bc076cdb46087f5a1732774a07dc2bcb9e612aa16f964d7c93eafa10c34318917a86be36fab8785270bb11534ddc88bb0ea9139cfa8924508cb5f94fe958bf378f116051194bbe07b0e389890678341d942483bb6424e892062a5ce61600c3e40eecf9f83fca3f00f6ba6b092a315206f0b86f5e428e4b77d8ea4c25af32b4bff22668c1b22ae7fee777da524a296a3890d7c84392f5a165d4c7f979620e22b437706ad27a21e66347d1dbfcf0b61a3d5855225eef15d118c674fca1de0258c4af00c801ee8c799c707737c7f611af9bfda1e4714009e7dd2da45c831ad899dce574150a872ccb19f721a6139df871b452abbb2ce7d519420fdc8d892fe2e40e260186ac4114412dcb2e1937910403f77aa552768d13c93c29a3845061cce35806e538062dfcfb366823814b6290fef65034f0eb3932593c4b5e69ede970825f8152babbc227d9bbeb9f31b03f734325c1aed442a42fd5d76211ec9e69c3687705799cdadc0637917ac40b4fe866186916ccd4ba5f426b102f47f155f0ecfdfe2e5f269dbe124951ba7976436d1d731de4c73acdd4d31b216bcf84389792e64f31ce32aa76e2facc483e6acbb55e914b961f2eaa4472a7b459025bee0069028b3a9970d0ec65e37cef07e738b38ebcb3356b224eacf51ac3ca5ec0dd888a5c88d19c826231c30594572d494ab41e879a96bb6f9a447fcb0e51a4473410f239b68334bdd726a89bf999d1462022d95f77a5fc8bf755dccc93d78efef97a91f008f91c5fa4e07f84b15e52ec53dbc1fa9463dd11a8838de7a3b6e39790d99a5bcad70647086fc06666be5a5e84dc4e5275f34b1cb5e61ff7228c84c6be76804867585c2f55fe98c0ba9bbe4b5ba68a4712b02c2964501839ea54a4b33e32e5805d36fe0a5c9f64c982cded69b30c348033d273ba7594b1ee1ee07f86244e4ccfee17f1e04004b596396955cdc3bd92e48ecae578531439c9f948453caed38d77f7cf9095b64e5766dec1010e302e74f624fb3fe661f07c8803291c58bd9f0560b755cd15f82e164f7122f8fae1709c32bf24f0019f04552a0d1681f1682f0022848b77f0604c94c15d64b66cae6ee4eb8f773790cdd7179ca8b1f3fd49cca8efaaad297f1613722c4fcc2706140ed644d78af1745dfbadf896fa2acef298ab9e489e8efd8f01106f80760f352ce0d23eef7c4c3550cf30c9646b21f3c0691edecdc32163bf0e162a15f9e87842b3933f89654bee2099044fbcbf0cf0af65cbcc81e23ac01a55c697d723344eab47172e0159045dca13cbed8acc7b988a071552f1f82c5c77670fbfebf4803a9e97f622290058110662eceaeec0ec5022a9ffd81982ca5cd965e2b9a378697aef99c05f2d794e597a634f976494d1c8216a31df0db1964506b92990de656def7af1a5051a0c6acc76df238f0baafc3c4f9ed48089716c8aaa9e6ca9f0d65c7610b5e4b2d51798bf107b570dc12bf90f4a57ba9b18df3f903de162e18787093dfb12186868b7c1a061941147b8c6961a97535b8a1521000913158b70eced2be1dbce7f70244ba572ddfece96258dd4f277e32d276226faceab7cf24ca40cefc5d6427c7d49e8f338f103d4ff501c3887e17a84fa207711e62db9c0c302b2da0bc6f6674057683027d0dd3fa7e141baa20fc4cec8ec2ab5df5be038fd2f276db7e5c717a134f9b3f69a8a985f6e9ef96be18b169da3d3a34852be60a91f696c9266195c6fa36e6cdca56e96c75217afbac356c5c40783c910dfd8639484c9d15dde7bd191465d3d83e461f5351e578680fa7bc2d9452415fc43040fea7dbad72bc9d54d80843db754247120724584246617508ad8f30ca79c3ee504ad8cd079ddb867972182b8fab0af9f377e205d4954d27ce252e17bafc1676914027cd5598c24e7f462cf7ad43242a24a1b695f0c94cc95e99ac8ea91ff0d9b6a501bd8106ab2565220d9a652eb46b9b7e281fddf501e7cea264a2580c33e2ffba5f88265d750c96fb7e0d6642f4d49ed4122035580042dc3cdf6541d7d30d60ead95a9923b988d60ed5550cf8cfd7056aeffc2f9a29c6a62f5cf81de4c7e56b2d16532297b868cda1c15d024b7a288d8af0697f29ad0d9282e0452f3179137bb05c15e4e5044c2449bed780e432968da41176d0384f942740eb2d1f58d0c176cd15c62a13210587542356d09f847d26ad67b3d8d85d4f2428cac98d98a5b50f58c1e9f521306b5a02e505a7b38fe82c60cd61cf1548f81ccb118213fa35dd510460e50679dc8ceade2885307682d360b37962eae068f4441223672c84c4923fb9695e6d4528e35f2279b7db44951dee2311057144656b21d59bee72e7fcc34a6ffbdc4b1d14930b8ef7e5ace98d9efcca36a492faf117ba2153c835170e7a1cd7a66907f1c280e99d7ae245be851b18a6e5385bbba03c881f914d0d08e78d455aba58020b756c568114cde9bb2c6492a75c35131ee1dceac5c0f20a77eea13f90002f093e6818dd618a53c7d92b0493ae55a67b3905e60e9190e46f87baa20dd09b2102046f6611e4093dacbd9aa7e6819b549f3c9a8f6865bb9fa01d12f1b21e8fcba0ad8e4748f3d9b4fec6e6da36439289bbccd242bd79267fc68e6b46b88db98cffe9af9775623f967af6930da1b9458e646d4d512eacdeb220272aff69aaeab2fa9b2543c6c6d262f5d8f52c967f188fa965091d43780106667f3cdb18a27838a22e341bc6e96d600dc9043fac7f645b2f3bbcd78bc4cf1f073440b96beda1514c28f5ae06a3d087db8fdb2bb8ecb130b7d75805da082287d3151bde755112f832767a70010c4fc1e7230e4413c189ccfa04d985bfda0eebc874968bc82aa076c28078d6b96e63e89ca3a742dc2562fd70322b75e5ac607a47bc519121b77a403966f3964c8c4b9da577c160edae13f0137324330ab5a3f3fecf52008be7119ea501028c0ab7295b2bc7010e2dcfb383216407a94318a1df9f84707f58e481d640789ceca01ee3516a38e7c3662d18b763fb48c3172364a729d33777cfad8044e26400f9f2c8b423675bc0a046284d5c7efb8e5e912a8a5634ba8064dbc9174a9ea9f377d793d0a8a0eebaa3bfcceacad221da5a3b1fa4def2aa6dd73d7960a677c3341566b23783d9d5f1c462930512b5c52cb0505180e583ef9a66bd2868dcaab04a5129d9aaccf92e39cb5f6ec2de60ccb19d9ba9bbac2982d1a17e41eae0edfca14285bcd1a7628716426b38b6f4dc1839924371e35751865f964a4ad8bb5640e843e9b45e791f2a7741288c80023e285e5eeeb126b289013d22772ddc928f60a6dfdfc817e2e757befd38871f3492533204a095818c009ae26cf2659000d7b87f0ba5587fe1dc2b5544f314cc748227226c918c46054e749c8eeb079e779114c458eb786a8393ffccfa7cdf695954fa2dddbe3c33fc8205405549cc2e9b7a4a383e28d146d22d6ad9190d7407b4de3271ff9106855e91a7af877509778f75f04e4b2eeaecd2e44a9cb67737738e307c4b7a4654013e9fac19beffcc4528f32461f75856ecfc7eb22aff67f13d3d6cd55b7d09ab8c0a0af832daafd6ad0d33bbfe280bbaa07cd1be0db0964f910e1c2ba936dedccea9305df4f1f53dd4d86cb95b519345103a9afa07d65efb6f81e0694288dc49034110b9cf217bda4a8629b78bae6eebcf6f9ed7c9a2bcb6fead1b26d5ad531e081f538f78bf3619c2ec84f20d65bd2f341fc6a0017973962655e5cdafe24ee506a2736706d872baccb4bc03714119d532927a6db4f420d472d3642c86c402fd5397bc9a1141363b6b7efe42c694c3a44527bc94f5a32e538f04895b48fc56e80648b16fb1a5d8b10d9cca63f36d8634fd04ce4dc5fb0d667761ed2481004bbd80b6d2235dc87a72c1baf744a5ee95628110d3050db2c6a4cef443f76c5f1dc144d5969dff959ca3747b3a066f86b331ab78d62f4bde4dd4343b7742702788aaafb23a10c59ea5814bc15c2118ab40bc811205465bed151e8ec2d4b5bf2619a5061f2a81383b6f32a10f18821399bacb163c19b5fcd5bbf0f3a86d58c9e6e73a4008297292d789aed6b78b03b8fcfee6b46063b8c6fb44d4dcb8539a891516f4de02338f7aec705abac217bd9f78026661dddb3bf8db373f24ca58627101631e81d770c53bc97f5ad24de521c091cd28d3733c0c3b943132948d483624aba1a6df881eb21c2e8ec5e75d4b32e5e53869aa63a76e34a7baecf388aba9048caa9ff5c59a3191d4f298fb802679c5bc695333e4d8e1c2cd13f8010f23d77ea854dfdcafcc6cfe9169b00c8eee89ff549d91b507ff03974d192b9bbe9cd3ba90aaefebe1287c66db06238c1202160561773ac27be67264d8bedf5ae789e44da91002cba6b1ff2289ea2b56a3b28329f3e101366294bbb9a20393cdc09bdcf0aab69aafd264b59e9820c692b382f5b1832ee363b40a63fae911c90060d80542d912fcfad417d0cba7581f8879c4443dc2117e6f81976487fe233f4f5b4627a1db6e1d6d4d666a51765f19a61e7770069321fff530e7fbd2158cc58c743769cb670e6e67706721ff21e0437bb864f250d7ed52d42b2e738117ae82ce0b1e942cf94232f0a250b9ea3732801b508170bc335d484e6634011bdbd9e337774abc982b82358352449af0a8a494f49d27e3d62688f96138c909db8907da627dacd396b3b95587b6aa9d10695dd792e8c539446dda30db0db8f21a4ad24bc3b43a9436c1c46073b1e7a4760b54e81c21db67c17b7088a6e37c6e0c22bd8ab1680c74800ddd59aee801f570f0cb5e03c19ce59ba3f094fb17bb47bd841c6ed57b0865544d9e8c7969c4bc99d5f65efd60925b3908e01dec436b6edbdf12220ffe0787401cd6edcfd6666d93582e618273a03829b3bea9de697b7dfbffa71e6ff361eefd6f56b618006ef34cddf693dc26cf5c9cf4dd672bfb3389ae876e315dfeeb7de917b6e2836645d8046933a96e03e9b0a10b2521b11730942acd3e7f76f051ba3a95476c4683456ce92eab04dbd9a9f3ebbcfc717ca76b723fed2118517c386dc2961b26037612b9fac4bb6a339dd2084a7faa8f8088a2843a4ec0bf7d36cc4a1a7b7ba10d12c4f745798b8df2f10d4de18679e1c1c7e2362371b72eddfe6d8b238f95c1e0df2052ad0ffb59210c8eb32857931ca872602594e57568bac604b10841b8ddfaa6645c0ac4a4819fd8abfe65df404594df6c3171ee9543d1c66f3618f18e24e37674d8ce926403d8a645a298219fa80a3c03be396b6d16ebc2fe5431dbaf688cab547c2f73baa60ebd60e0ffdad21c256ea1d2bd71832c7687348aed75e7e40a2f04d8d9f851ae167187b02f2b0ae8ce40f79f43a5cf1b5aa20a507179fc72643ab9719802bc5e0041c4d2aec9b7fa1b2b1bbb97a9eb98dec65d5d220bd1555e43c451eec1c0a398c175ed1892334e900c48794ba375f1423e800e98deb64ef067d1f23880e2b1bf612c8327163b52797828457cba750e16a5b23139fb38ed6e609249741bbb2af0d76a69e71ae1dad606221c0211c52085db12fbf44f644a7d8b9da572a48df6a369f06cb958e70c71c6991a51534770dafb5cc1ac90fdbc936c0805d04e78e078c09822fe45f4ea10ddb47de1e32de5153ccb2aa98e20d3f4590b1606ea79c04a0308820744cd9b59fa4da70e7b81f28fec3a264ad827a99a858a6e120c03ea7345955bf0a30daf51bca8a2ccb4c896c55c8ce2e08478d7c4290d24eb73359e6bd931634070a173a8699677adb012b3f30f04c0976b042291c38025c39f6eda4b9fec0d6897446256be27769f44d5633e0f707bf04ddf609bbe3efa4b2fece4e022fe2107f9d55edef9544991dd89a56de77d2bfa90bea13da71a292b46d78bd7d3e8eb663fec0ed13841c9876be61529989bba3f7177d3a7b0a5da123cbaf867095251f74e329234ede4904881f34826161f95ebd15c4537390179bcbf721b4e00164d293d5fa526b7be70f70ffa27bee9fec608c5090b6951565a1c2b7edae6493bb85119ab29d2638ad998b9b8f5398af96cb279c1a7e35c439a75e7b09e774e54e76652f2b85da83462d48df663ebfce74148d251bcb344ec87fe976b526fe1c46a04c7af3c5ed31f7d07c0d6ec109de65b9a56a41090d18e2d9c90c1a29e5172619cd2525e8c8c201c5c8abc5b273f54431a75decae2405b1bde8398e5bffa23ce52ac00e2920f73796c62ea800f39c8fbc381c7e57b032d43ef717e92e970f1b511e045860d533b96cfe8a0092425d575c4ec06983c9e4f77174af56ee7ec29c2279ddd47fe657c25af8554a189c66fc388787afd6fdc1f4c30b9bb35d7191dfe6337a2f69b547ff7219ded5e627a437d51fa3fcf8dd008fbdd07e911a6bded7c66d121f53f390e7b3e5047a471a33275d7a27a6dbab032fd779afab66cd91076adf8f4a04984330aae9d74aa41c3e5b8ef7c0e30653727da66135aff7ad79bc120f0a382c57a642ff54d76f0db33cd4d57de657128aa8f87485e7b5cb15361bad1d7f5e4c563c2d0df0017c2dfed144275afcb09ae42fa34b2cd71b6d1c3b37031c32f4571b1baafbcc4dc5ca340d5e4aaa6dc87956978ae270b189462f4a3dedbf2481aabd00b807a06071556fd3d7dba40f5690ef370d7b73178817fe143698e9128bc7a3d022869a44da8e4f128142bba74f56d33a4a1d685b11fafc1e8b34e6d8500831ddd43d0e815d5d50c0de8c4e056b2998b7862fd7a833c83efa9fc411939b9f2264b700ddcc99fb9dc6aee64b9c18a376cd60b8477c0718c879d5e55c55c91531180d4f5001c1a45e780c44301a5ef16c44180a0b50108d8ad5c39af50664c4721f188f8907b82d53cf8d1974fb315d5055d3e7f9bde5931745bf654223eaad5f2ddac6237428a6bfb2b0d1aa8fd570db50aabe427db27aa068e43baef97d3a844aa770a5ad3a9d928c33b611117f547fe1eae508e15ff85c09132b1616606bc9cbea50e6c3421480805a36c3631611469bbbba7decd140cb29aa44b2059da4c9cd0e96d5f758a4221100c2a5976457b66da4171e0240de144e2c6912f6783b205b0955147e82cc129c7949f12b86eadfb2f3c3e8e27c087ec1172134aebc85b55f21cff85a8bbef3122312017da3bbbe4809dbc6024fb47a5982acd2ca85cea3a349fb537232cba4013583fc755cb188b829f5829b2583c4ffc152249c7dd21949040f9e70982947c5c5500f2303040ecef434ba8689624603dd7c019a3e20039a55857ac457a9c1cc6dc9d201a273faa7223c3d1613cf3e715c6232eb052292b657cd962253396ad447f9077fc1691a4d4ef1ef9ad5334801cd95ab0ee63da06351ee2addb43f3e997c2613371e1d94fd03c6ada8c98215f7d7978571904703eb6776b57e1be756f487e7c16003df5e449085319c4488655a92dbe071644ad51d4a7796a5c381c3213b18917f89656fe1b3462e19dd95e14c3f0c062a6dddc304654152731f97138fc71eee4271083f63ddc6711f0b643b413d8dd76cc83cd589ba434de5b3b82e36820ca2508d5bc835df56092eec43d58f5241d4eea2bd5f9f5afd5beea0000bf8e4396075d4491bc65f7b37a3178915ea78af6a67a2495ad88e0ba6aad340d189fe291536b81122d72b9f3cb7fe0671c8d603dd87840a87f5d62a869b21a5e94b53feb12c0ad68bd3b9a983db47a4cf0cf014effcc532809acb225b4d0772cb1375263ea8e5bcb404317665276428c2f6bb2e3379927f6881b71ed73a54a22e69497c7fd149ff2ecd02e66681624ea76ad6d9248fb9335f2ad01798021e473d866e53de509d786716934e2003e654ab9bef37d511de98f758fa5f9b477fa760a5d67d73c485d4ffd60b93aabace9cfeffb87f4b82c8c6b4eaba4d66f054ec59f2ded17d38e4b6ca709ba1843c4faeb9bbc8d8f94f1e87e1870bd00db77daa084dfe1e13dc9dc99fc6f073cfe461d174050bc36c3e5007f6ad134b50767d1e78ac984fa41e9bb32042434996c3ff029d7e96cb46b722da6f967a9c824c41e0a4a720ff442d535d6905d03e790df676b79f816bd52963525cd75352b6fdafa8064095b3b12006595736eab58ae1aeafc6d45725af8bf1b34e3713b8d98c034df2f8f415e15dd3c1a52529db479713e9c68d821bda9af13fe7c1eae79370834b0fd3776bdb1c6fa0fda2408539bae47cf2ba2f83010a712e18f645eff2ec5e3eb8db0a5603b4eb26e2f51c15738c4dec887367ca9c877d79a28872d1d9bb261fcbda24327fca4429207cb852622c980c2c024ea28b5c09f26b45cbc7ab6f45f6fb251cb0db29e1eb6430889d677c782e23fc51a449d87f9db13edd54bcb4c62a0072f1d5fba6fc34123f350070b9febed3ca6f9d6e62312d3ec414ac845ae2c512c388c00211b3aa81a88665c62548e367c3d6e3f0926b0912eee6cb0723b59bbf98f8c9348f4bf02f9385f3385f947d17fdcdc1761dd9692a0a6ff87b39e2730ca4fe13ad0abc52b2613f0bdced72073b35834e312e106e297e75828346f5f4e5b536ae2504cea72db1bd131ee38e9545194369a0d1462444e852a80d7b48d944094a3c6c4b138cdaececd74ffa2512a61a6941767c1c32a5be377ad9adc7b57b56131e4b316bc7a3da29131eb8a6e43677dcd0edb2da970365dd02a679c1cb4cd68613fe62d2decb5f12b5eeb4ff9ba3dea85e6633e5591a73b13332fbbbf2ca4cf7ffa765ddddafb6cb0aaa7bebc32358a1b6724f3db4df47d1d3f90295f53f2d365dd75e25cc6589399fd8575273341c78ea7604bae1f5a049d3b482dfc2fa4144510747919b9b1d91da46dc3e35c819eed6aa5402e5831e85947e8cd417124519e0e65f19fda8c633c14b6c72e86f53dcf9304b0830bf837cba5d512b8fa1bbd67b51e7bf39e2d4e6f44d4ad40e16c74531b41ea22b43ad0e0be12b7da3121c511a0946cda71ed2993578ac66258aae76903ada54e5689b2db075c8daff2d39d573bbc7044f8421e5f5208ca7d3f3d9b7e28d95612b7feaa308a8b4069a2225595909c5eb626d60fb88e97210e780550c4f3b3f6a9d191288d9db61cbdffb5f8ab7addc38489b0642414317e414092bc97a67d091eddf4f8f40ddce05b63cd1ab3c2ef762674c6acfd88249fa25474ed208200c6eb94e6246a05acb71037153992c3766a9a4d10a4b020be078a1b3646c05d2dff031c7ec7929f8335445a47c1222f60acf15e44c60007dcc8b4129968ef30e44f970998347136e9c0f1afa89680c980f9311235df23f23f5bddd322e244bad5e0f93ef2cc160a2683364006c51250dc4f3557db6cc43155c28d3e723a8230651490e1270fc734f8aa2ee651988a353a88781088a0a67d6158a17a32f310eb5d4580be58e68396e77ba0bda36008ce3cf5990e7753ec234a053a3f17fe91dfada058e6281f54dfe914ea5154b5bcf02aed98af92835caf29e77e24d4dd18cd20699ec6e0ec892a202729d4f089f9c733af32cb21b7d4f4be022fa4587edfdfcbef43cc0ec029a440905392118c794ac0e41342285276b1eb6e1d747cec5c9dbc3abc46be40bd51d154a3e65ef485735bdd79ae80c6b3d444c0077136c05d3218642ac8881115a2c46643d3cd4dcc2c75e8f9efcdc2fd5015ccc70935041295bd8e8dd1332a41ddd1837cd966d6bb090ccb5b905612e9c79d4e0b9c5c13a54c3b3a42534cfa93e598dfe52d04a41a595e7a6c330d34d69e03a216cb895390d790d03a7ea2869fa572b793bdae255f4dd6c2673a9fabcfcf8836231bcfd08ea3d50e334e840c125749a16f34b13ab1b33ceac39b4314e9026e60b34afa6e1c934f829e1f1be824eccb27c9feb1ac267c0536fce08dee7a0216983b29a3edbdbfbd6c5e73543b4a9ac0a83cc1babe5685920a6830c37a76bf3bf13608a7ea49be7ecab8aedc2a811e987a32db0a625b260a081d67694b2f4c96e7d3ddfc41a9246a0d92b370df4e78132597cdffaeeb83aca2ebc5b89f4c2430b729fd2afd405aaa707683296520d8f9051c7f41dff35cbc611f85d08880bebd53ed765a53096f9a440544e6a5ff963a94156750866c868d51a91a6523636526c8c8fb3fbdb1c85482cb743f4945d842186ffc5c548818b39da1aeaec2ec7e4f861e35b44601ea463b8fd3311f539f4f7a0222fa82645e7afa2dcc99eb3aa8838f388a3e043de9c24ca87146a33353449014172db29170c7641e0e399df597bbf6fc9d79ecdf5362b0b05537e3ad6a6c55fd98e830295b3bc96d40dac587456ad6debcf4f945b37b725f9274d8d41e7e3cf4b4824e80108eedc8d17877b6464b9f8dad110838da7cee03eeeb49725d7f9987cb2c5867b43a777ff0d98e4cc90e4dd7325b4482dcd1c81fc9d75a89c5ade1ebebf636f3e38e5a0439e7419e37886b01f858f66ab034af7a52cdd6c36cef6f2c945a136fe1487cd2f14f720cdc2fb019e16a82c69eda7bbd811fbf27cbf4e5aea42bca14d61038dd30a9a2749a5cbfd90e3f63e99fd2a6fa396e8e5843453147c5d00ecd56c6e853b9759f35704c88c798eb0861d70ea3e0ed6d9491e40b87554b006e12e928bd0f6c1135e7c1a97eb6548d5902bf2959a0e7ca501872e709ce7b7c131627b8557c70c4878db637e7226ecc7fa962b5919aee8739b94091df1374a6b1bde95599fe8ab34394cce23ad3cd8c7625b63b9651049c7da3dd26573f3072ef00515236c76e796af4be1aabee17fdbfb1766721f3bacf44139bd2488745e656cf033af8efd71c00dcb31711ca3d2ade447925576412840315bbc6dbe499515c62ef3c3e7ef8194e580a905a6ce3344f8d0f2530835183ff261cb9302450845646a4739eca1efb7d5dfa87004fd3679a6493ca525ad6203272bc6834f53b116ec64ab9fd1c94423bdaf98c884bf1df37611ca065831fb00447025b9c455a0f3c3778f0081dd841a6a5631ba147ddac43202de0dc95a2f4c1ece9cf8d78524b6770488a168e2c4521e3d92c207a96289de40d49820702bd28b2ebc31f0a5c7a88f47fc1b33e0259a3768bd16cc976b241aba1b814aa51c1709ad3280659f788e02e40aca7452869445345b5f17b8579551d5e4c50bc37c9e43fdd03664745e81f6aec5ad70ffc8d1bcdef28d5af7e4b486e1dddd2258e8fcc2d40daae8b9ba76d66215610442d799fb6e9131a0711f43f0ad7b3e18e6eb1bee518a1057ab9bb7a8187253f9aae514b93c200c6070cc579bb41bd792b27827bc6e439069846f871f61804df4aa93fe37647f431b43f4a4d041662c17152db94ac36fad0af668662e1546735084fff68eea0c205d3e23969055af3e429bba213db62e6332b29154d15659680f0ff075c6e3330bfbdf8ecad7a4ae3fbd7d0a55af0ca8ef31ad04cb6fe40fd8629dd427786e083121efdcf287c719deb41e404ca8cf85fadcd6acb45f52d8d38f0013cdd215b6ba878dbcf094fa33fdeb7455ae4c405fc4cdee9d55f9a1860f316662934c1e5d7117d20ed4d9ee0c71c97bdcaa1e971e81548a451cd314d4dc998caf04c52bee8db499885b72d9ccdfeda945dfc7fb2743f802513d78fdc36fca2eabb08730165555894c731e1bdb716768755bcea8d747d9dedd3440070d05ae3a1b171cdd1a1f608ac08f478f8bf4067eb230d40f65d647788cffa325e2df661cdb7f815613729f5831e660a2aa6c5e0b475d4261980fbad351fc5568c12f4ea8523d84cc70898f3b27a7c4e6a2bdbd72060283b4b4b3b7d8186100662d3d01b6ed1b4ba7e35d1b249c750c21ba239eac631a1a5a467f81714ce1aa140866c34ed84f5965b7e847b295251e149bcf9fe85f9ae578fca0e3a0b5f96577f17bbbdfe9981da9c1c81f3f1512dbe46dd46fc75f5dec0e230535ca8392444ba70cd45364c232569600a69ec729e00894825a2f9c71e9011b0dbe019aee49e12549f5ea210efe085eaee24dbd60227b80896a3bbb8ffef6276a8b73cfa84a3a7541e1ac7f5511c2b4f4237fb473e6a81ead608e3fd6cf4fd8323c9d33bf5a3facc504c5652dab9d4d9c12902db9f8faabc0bcc637fa30c9a1421da01762e11234dfb8e291f7e7ce621311e5e18a67b879825dc0f90272a674b302cfd52d3af5f3e8d44854658137f46611e7b12e957f96eae29b8a40925d75303206dabccbcd49680c8d4c8e2c9b5469b9c6b3dbf3acdfc3e620b5fce1c486c105a45b36528d70aec43ea4978c2b3acf831a6c06017128e72cfb584f9fd81186b5f3eda59b33100642a45a0b03bf2ea3f50f2f4f70654fb853641ffaf09188829ad6df0c80cac9db9eb411d4b65c09130809e784b4fda387a37068a47e2079bf0d27f5ef2ecda181aa3cefa911fcc97726c6d75ca67138f86a6deb8d1b0a3f100983099cc145466075feda080cc2a9f105f79cf34518cab1f9063a153d518708a19c323078ea1b6da6bf40ece9e1dba849d2c29e7fb3b2a9fb3bb9ece85a9e8b5e3d8ee7b141216510584aa88d285397fb3521a72f0fc7c301c7c4f6481704bb396f8449061a236ea862af67967d77a098c4ed868ba1b7483df9dc7694997c0e5d54f85926a0af54af2bc8c5691ee7374ec11bf0abd9017eb353ad525f104bcbca1869db8fd47028edabd4640c44553197e79a696f43dfba6553bf8d3a835156499068e5e71bbd3ce40dc8806b0b01eaac8dea349676978f712a83c11d628624df7b5a483c6bc0775c0f0e44d33a93df1ca9ae58edaeaf24027bfcfe8bfab8e598831752425077720e5334e89cec8a29a284518b8e37d65fb5ac6f82a3a25b9fac3b8442a06e3090c81fa2b96ea17ef7a0b5e5df6a2c47a4b6ce82629d2bb1b36b8cd0922c0036e44fa5cb141ae132bedd70132333aab7b9eb274f363e1bef3d25000a87c26934f752a7fc91b18cdc68a9795c944dccb6550e8fd16357f5b84039f734c8002c08101313c394317b9f295fc4d3da4ce45ca2f64babc160f9de3062aa7ec579b9c2f6a0ecf6c9c70d2ec827cbda2fcd29dc70f8d12867e0822a66671250ac5967c405c5955be05054dd45500ef536d5bd68484bc9900e6037b1a770a3e87ca5535c6c8dd91ee5121ebd7a1aa046207d4e507988c10d9bc810d0392533ab7b0c4426c3a903026d4444f0a24b8cacebea4ce38a90f42e8e83e7e983770932d0c7d6f4798d4e323f1d562dba1f32b4c29076f949abe866093260eb2c456febeda64c2e5a49c36157ce1000d48e2aafa97d5b70caffdd26f8680eb6f11014f7110951dc627237b4642737f130a4bf908381a0532648f4210efcfc19587f9eed40be14bfe2ef588981020af3e05784eb774ae7cb79735924cbe03dce032d51b9349a6f1056a8e25f879504f7cd7895e1aae4db871bc2d288054a4aaf467ec0e14c2703d2a134288b4637bc219434b518f0e3c57d4ef313e3020d32137b646b18298d9f3bfe97ff732bf1a65350cfeb198adac287e54cb2fe954d569e8f66033cad212ac7edda56025f14d229c20ead57a4612b72baea1ec1f31c74c35855e43757bcd2bd3d805c5ed13fd50b37b58385d9c057309594e28bf452e63f9537d2d8ca97b2120302a3ac494305eb508423e3b9d151e45cc8cfdc8195c7c722d47eeae3bd03869420d4e591f5a9998299f8833ab837692fa68c80326d13f7b01fbb1d63093e4c720856ea08d325f1403559364da479522f06704d4efb7b87be20b5908132acd4bdf90b15ce3523261750050674b5f01b259d84085068fa732e5835c8269b70ac4ca35b1e08b7ffcd5e8935943823a1e7fc0784d4844881133460812791eb51f5c43c21e2c2cead2095c479a45d65b05ceab84ef34a38ce344eee6394ec213045cb7404730034991920fcc55ca7d3c11811dc9a522c384495ccb57d4ad28339a5c0de6bd9c01158a99d40ef527381f2a32775cc47533a1e9bea54c42051b594433f04fbcf774b7034069d40ad85b5048d687ac040095444f3947eb9acb1d014ea3404eef14834e01503b5547a647383f3ff74faad59eed6ca98495a371ff34a627ca5f9b78077f92fa952bb3eb38aee3a4930494bd27000383f7330d459041c1fd4ad354ada5aee10739470c752398fa165b01023b769e1016368f4cefef8127b3f77e80b00925415def7470be7348aa8512ac8c87db26bbbcac84228ef18c8798fa4499369a3d3e3b5959fdbb977d18544985de1424c2eb66dd30dc9a28384505dd4326e7757bbb9ae82b7f693c0f69a08a8fa42fd9eefd9f739850950df65a177ef07f5ea1cc098bd203f2645dae17f82de51c174cfcd80ac07e2840c180dea526320d6cb931ce8b2e597d967593ac766828f13e8630971faf58d3f23393ba77094f0c9784648ea2a6ca62aac34d197436b0d3005c1021f8b253a73c6b60878d22e5dcefab44494179923bbb07b2a8e3a1a2101a942f26fbafec4e79d39b5390e7b8b2f1b3d1258604e10fc5ab70b817ba5d26e42baf8c3ac1e09b854426b71901cf4babc8baae3ef7f46c322842cabfae592ea2c1f75ec217a17e9d865e2bd4f9dce9cb75d7d82fee85f215b4fd304ba0c97e591468d714d6a6b3a2e8f4895ae250510fbd9968272f0a9538bac09dfa881d3c4cdb2dc57e1c27e375b8cb78a9dd758d7d962a7b7b74046d7af4648a1a9d4b775212e0c9b614673ecb59766587fa6c4888d3f5e2657e0ad489dac50ee7bdbb1ccb9ecd10c84ecf5c8c8cabb6b69b3e7f01c3828b0506064bfe8dc660c3cb75404c55fe09df25b05eeb93505d2a7d088430f2598802dbf892daddd2f6c2a4118405174bce2da6625e42704ea8873c0f28077f261046da66d74d36c87227cf84a4d399a3d71aadcf29325c8c539546734cd55a335815e602d05eceeccaea9086503d2a6f9c408b0da42acbe7104e03801abfd2c61fca172ef6bef8e1a297000adbc5c6da9ac98582c5368956b8c6149fac472c47c9d256489d9ca45751585efecba928c5a55a21538ac5e563af0b7615b50eb905c856bc01ba6db134158bd77c9e9aae13dbfa72036c98c14db0116b8eca4fc2003370adfd32226996eeef5145337c6e93d667f3c286212bc39793869b354f4741506ac64bc11aadb4c6184bcf5fdd624ae6936eb7fdadc19948c9bf1fa235e500dfbab6625a605e75195636827c1e011b9510984da83c3196880393b6db5afb4516e347ae8d0fd5a979251b4221af2ece59fdd4fabc0ba5c02e71d1a2e090281cebf6fc49bdf5c99aa9517590e0bc036b035f5fb8cd980d8a447ef70b0fafd9d23a9ddc94a59a47e65643bf8cec9ba196834bf29c81223060ee8ba7fc4f34bce4235a544ed8c54f1fb4e5e446a605a81d96076ea63e346e98a9931aaa40fe3e4a7e9a1d9f966da466f36bd4fdb6ac6891ce8193fc72364897e1cecdc287177e37d8ad7d785580ec822a98899273b1c9e30ce86b1f5a97b10999c8266b746ca485283e39bc4a999c7fc777dad00b3c3bd2c2340544aa0f36dcd1b78b57d1d62192f0170bab1be97d23577b7bf3ac95f7179acd93f25ad62acfef5a04fe9d4e857097bbe7f7aa668f3163ff8cabb44d131fb6a380c2a9b36b6a8d0b4320bb2c5617067b91088da5dbdab40fbe7fe98adb599de1ec75dd792be917391ee880b37424706b8083764638739b9a95af6fce3e15346d261aa71cae8b684b75dda19690d255ea891f46c194ea3c2580e3f1b86546795b3fbc632e39495f71674cdce14cc5dbbddf674e28fa3abb50bbd0827c584e788a16947d8b52fcf9479d2c80612b849dab4a62d496cc5e670537dcf41d674323590bd36a684e82e4404aa268491de664b7211241d812cbb1b25a455f524d649ca8afea908607133c94fe20d47d1caec8226ebce52a02cb779f9d8cad8fe1f4389286c9b779b149056bd924e9b85aa5cc8bf7ef8eb7b89407811053c9435e15c23426bb6fa49c2c2a76d2843346432aa2230bf6b5682c33738a6c2b569e140997b03db87a3f3cfcb73c24c01ca3cf67ec5066ba197dcf61cd83bd8ae0f112f80545ebe07e3663475313084bc2064c122b4edc3a2b6997d31a78e94db2255b373af01c74c3dcb1296828c9c155497594f9eb5238edb1356b0c16641040d3277d1e897f693bfb53d40b53f9deacc9944b2f4b42e00cadc1385105f53b8dd573b7a5e5abbcf93183aa68942a0bd4bc2bc87897693d81d1ed1bb46540ca0a6d07b36cf4110c1d73d89b04f7c67b8ded9a9a4528895c2e565abbdf1f58669b86a4e9f53ad75e3aacc39db62ea5101f85038d2942977eeac162771e623d85afba4b4aecdab8c8909c0caa1e9b085c47f7f514aafd08bdf68893f50d2045aef11e8f61f322d35138d2a9c1414c7c2418a8b352b4358430b08b40a47de9078f2d22e02712a8b098f27e2a7db62f6acac4d2b6321ee988007f3e9469f944472427d4089be92e621bbab206200fa4abbf346924ba6b44c3a9418fbeac93921bfb4fed6c3e153a78073e24e1bbb50345429acb759db5502f5b2cd57cfd5a83ad94a3a9e25fb4545058e9406b2ef3d93f289bc8ed7431190c781ca3d6dce23e926a45c5a4911505e05c58ad7d3066e5822e910781ffa29dad090b9cbc339158dbbc23379b81bba932918b3a3fb9bc200a6db7069b88e05b5e12d9b48dd65c00670965defb717c511446a1b9132100767feae5faad21884572f8d35974ec6b1782f691cb8d8fdc336994e336d3e8ecf348c7459d75b58b98a039171a3ba8ee205cbf0d94b3e0f69573c1dd50903c39336b900c2f0d647707eeb2b9f793906006a87e89d3e6ceee45b62018a82da8192fc16199b260ad62450c8693da1f73bc2911250c8504c1ac8979d9c7af62021499bd01b11cee6b7e71f0660baa8626e6ff2b7ddb435eeb5fd7425640850653eb46254aa70f915b40a284a80d3d1e076ffb4390bf70a3801fd65b9eb0d550102e0d9ece173df0e339952b512fa20008adb7d675dfd22b47b82bfc011f678ef45293cee4939c5437f51a4f1e847f5ff9735e02a4d70cfd29658ef35f94164b09d90193e0bef9a85844b688bca4d440be8f787660ad3d6182a541ea162e008427b978c90f4f75582a6ef943cecf6e14ad74e846dd32517f178bfba62771b5e4585ab9ffb1c04118095d3c2e7608e31c4200876332a2ec2eb1e0d5ad529d09f96c04f26291993e3869537fb25994071524b37c8032486f801c27a3464be5c94cd3b6fbafc96f4078ed1c2c39e76b72fa3e917909fc069cc8096db0c456bd8033b3f8ec126d412d284eb55a15fd05b2b80927384716761c355fee3c7ee001e54be68c268890fbb99110d375161e4b193a8b2d1a77cfe42456fedafc10e195a3ead49bf280b5e986474896ac3c1bcb5af7e267cda3ce104ea54e967188f91cdb17fadb04d6b5873a405bcc9e2e7330c7433bbc68f9e7b77a14b49eb24d5e32145c9fe5ba8ced7b6cfba27cc998c5d0bc07dd2ba5c64eb2fe906c4e14aee5bebe12a18e1dfd110fbda3b43f0d72675abec2a2367277ab2b300313edbf4fcb6f9db5568492471f8ac24756a8574d58d8d19b748239d986339a99234bec26a7e09592d5d9a264801780747f591a825283a5a36728fdb91a4a2f9ced5204a04f4ecdbf7b75a41847269893dee751a6bd0772c391ca8df5b517e00ea5f4b89854bab96e4ad865bd616a5052f4217c0b85daa7360dde538368a50bcde319ad580e4f0e1da467172917243c71b170fb071dcd6eda5268204f23c22f465289de5646d623e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"feac1037bf957644afa925d8d742db9d"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
