<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"9e629a23a66ef2b1e9e10f2c3fe175f4b028c7e3c7d7a4a6bbc68ddb93711b497840b1eaad83df77af5e94736e0b916525dd94f797823214e18b17669a05ddb57d489664c2b92f826ed20a53466c9ff7afc249b3cdb0961a0d9d85f0e6ae8d7268e1aa0c7e829dd2f3cca0b41dd84dfbe960b04bdc9c6cdb1675bddc833fecee9a685108f2c4298b5051bbc32ef7339137f314cf103c363a10cfe28f62d7ecd58f3707981957eb8fe5e466826e8cad33aa5c789bcaca6ef9224e959f6b1da3da3a8a4b1096fad8ce747e5dd608b9dd14b18a09bc95ea00d5c73e5b0c3e351db2bf67e361a5218487e4203ec839a257b2cfe1c7cd9a3f16ebb3079159bfd657f33a4d2561a701be4642dd2f9ce30a8705bf16dbd0e29dea9afca7cba7e8453e9820d83baaedd21e820ad52357e27c44e4e13630d458ffdd99926f58f920e3218ef9d5a085fe249c23902ef6514f4d91e836488992a0b1e7916c896f81c3fab6bb9f227033b4f551f91e020887aa9a47184cee2b346f5d3041c6dafdee34193da7244bc5a0561d267870ce59eb893e8b71f63c1029a17dabcdcbb05ecf3fd61a539ef26f1dbe614bef1261c42014971a1cb8318ac4c7d6d0e5385d6abdb5832bb17e4641ee48a02b6ac6528e88a6cfaa93a72968d64e346df77d4578e31907330b1cbfd742f379c29226098d74e04717c0807d9914a48a3d0e0dc49b6c01b557ab48b8987f37b8346910abbfa3c39529c3c07c0de373eac56d9c4f3da5e97f7d5bbff1723f287b9a3fe2cccfe0130cca0ad90f447a427ce2a245e99686e95b143845f180d8872c180de8d1964e5af4a1f603a9099acf418e602fd27eb6f9095283494c853c238ccf5463a55fb917c1546420e04e57aea8c29c37517c737ee9fd3465130caebd81225ab82601e54b541603395fcbd1817527a9c92822526f47d3113ac031ca78fceee60a53f2fddba33f321fb46bc7c4f737cc86c74dc29838c37e19c00685f1d4323baf06819eb575fd985a1f3fca6b5a71775b5cb02b6fc9f3ff931d5ddf6cc19d24f1886ac78a4d309e9097d47d04367b2ef832b0988e3845af76ea63ad2b6105345294d759e4f500addd0b801c2aa38668f4d948f9196b084175238920aaabe1a708aff58c28a5dc279c98f86b70d91d0687f03cf6c6f1163703e42a5cef94ff4ef0628b05ae0395d6b5bfac41fc413acef5d2ed318e6a9d66b3895316852481ca9e69491eeb0eaa5a9df1b39286e3cb145dcb68e27414635e6c5e8a65a2c5f9e6b8cc5929580bec2eda41c203969ef31e948c7d08d940513b3355144bba24206f624562f10dd36a37f4369175e315094d1855ba7c60868d9bd463b50fd22c6d0910bfb106230005aed6e9a36852174dddf472b20ed6925670833e8e29264600e54bad37bdaec8beaf7f42c58f487276025341a7d1a81a531d9c83a5572059b72a2adac64b5c6384687324106daec64f9b28a530b13b0023c3bb9f01a5bc1b4575e34cad9db1139c9696352df6927ce7d93e9a1df8262a92a03d05859b8511b1e112af73dcb80b31998c739b5895180475eb69413282ccedf2f494f7da9234253ed47f735588fa04ca967fd7c0d643c3f18e9fe2dac044ddd6ab0a94609e45f626bf0969d1460fec241e6a99852183a75be7884c7529192952bb2d87d29804899c12b734e12f89498cbd6eab966ec4d292bc2fa77ee755e86105fbf7ba6f41be41489095b48e9665e2a27fefc0e81b1c708f78966af52f0e62720c1d377572d2382ad840a602b8566de3e7831b301f52210e40d3ba0c50d33337a378fef259d03c34885c1b3e9e150de2b641df0dadb9ca882eee20bf5b526175481cd1a0fa46e835bf6da71dc0f14b5377da7e7f168aca5eb07f8357d5d0a6c798dd89a1dfefacac19862b662c35896fb5613537c50e4ccdf76b542d1055d79118bf89597001e16d1f4019cac7cf9aa3610c17d1b280a7cedfa605ab8163be2c14a271165422f5456638ede4ec7f835ef7d18ca0c91e2e8b63b5fe3bc349e5bb4706e92ba273860d140093d653c161592512c9344cefb836b08a512a754c9ecbb26d421a7a0115e28bf1d680753bee8e59119021a376f1bc8001f7f319bd5bce1f0050e3f13a520b7904fe9f305e960fd2424d63f2364906410dbc6b0baec2221aaedc2fb19246fee6409b71701a788a504dd3c4f2b73f39314426482930e544cb98a2c76af606ea92f4b9d1b8fa51bd6f16092a989a48c8cae4953c531d3e078c921c0be288c1d32333a2d935be837635a1b694333702e71cd5703fa475e8c128059861e42991c78f89d7ce1360154dd01d73d8a83e773253537f85e1264245650cdf5251115f47bfd10f710e9dee898763d817372bd0044b8c83d84fd15f0c3859e59fbaa75b68de4e33441c3df7810c8ee4719be4a1f54bcf057c1d481d9f4ccda425eecf7ae5f373029b7a857630cf8ad06161abfe22897e3c0eb693ec85545155b4de7d05919066bd0cbe8cc9809bb2e7b9e8927f0bbea46c72fa86fb2c04f032535a3c271855e626d868f1ebc84c958ec623b3dc8c1ab1c5827cb0a6d9288c4760b91c70e6bf21b5f952f7ebe488a76f71a2eb436357ed955b974e5bc37404f69bd974e265c07d0b9b98bcc3658dc4ed66a7468cd2ec4a8a5ef9cc503e51acccc777e17881be9946480620654be66e67fb590c289373fe88df295d4ff2fea28f3c8fabb754e2f85bf67c8e84641068dcd26652f272ca646ee8faee9669c7e091fcf295ea9f60bfa3c8e4d11da0a3334d0261a6f6c78b43c269fd633f3b861b2954b34297a6ef23a8e2ba49b48bf05bac0688d10a1972550809ed30ac21fb5cef86cdb7ed078188bb91383ed6f377fb2668b60fde6470baaf2dc8c7983727249336e036c33e5f023889afd603990f0e2f4b103fa7eb47696c3d90b68aa55ee0747e3a8393cad35344ac30f3c1003c961b7b0e2154795425c5117681141c5fde1b0a4b9f691124cf8c5c95f0d2bc5c678f107eda7c200ca9d6cc8d95739814ea54a0eb43e287654635c16ff30ba9259e7155359a9f8bc265594977091dfa5d98cd57853ab0562c46c011d3540483cd09f8ad982f5d457c073311df2a0eeb239429f7a17306d430da373d9780018193a0ae9a0e790b0277ab587e87df8b9afa03e066ef39ea1dd0c1178e0985453706720222dce75cfbd263f24763670be912cf9abe4db438dabb01b5b0b93c170dd56c4b11163e8b0af9d2420b9e2e77e2929856c9e685f139d6a2e4b786d31955391ac6d62f8dcf11647600b79cc29b9942608a3a6328c9f8c60be1384ef57c0578998190a2f842ee091fb1042e3aa32c40e5a8c170b8979e488ceeba379cbe2a3162f7f39fb6479c6c463b4a44b081dc9bd401457f2cca72c6e7a27d4df8f5c7a20823d07878059c8e9a083a8aef5eb09a34b258696b7df75e6449f123309793566771cb34abf66e352aed8651391ab5d37748e3e243347d2f14151ec6f4c42a22275791c38ccbbdab63e66ee1b5d4f25d858a02d489c53d51592ebb1c397bc7650fbfb2e823996165c53c4e62b82efb02525ffb62e95390dff5c6051535716c40a865a246d0aadcdf49fdf8095ec0762a699d12dffc4cb838cbf456d1c11713cd127d620503e9e020c6e8186d812d273d5b2a9632ce6d46c58f5f30eb706b1221668d65036ad570b9b32de04b372cec34d3e08b3fbfc28221af7c8846543436401a138b9149af6016771f2ab5f951776b0bdd8147151a1a75a56ac63a98ab207beb53243bff583f607f5e547e949ae3be27b603b1d5e523297bc6d1f2fd6599b212d357ff824be60c9f47a6903f1a4bc7585d50cb2fc5b5c3363a209e7fe154c0c87103522157b207cf9347e4ef6b27d22f9676e764798461df30332d2439317e7674a93104c40419a3a080609b9070bcee7b64090149f4a91bcb883401c8deb02fd49ec00f80a04733e53cfe1467904b73cde54eb2cc70565bfdaf52f2d3dd492451bc918408561d694432514d188a79c25255d7d331e093ad1291315a53416b36d4b19dc9e70fb5911c79956448a2f7161a74284524d20be14d82aaa9ecb37d5248324fb849cf76c4fa9d7e5a9a04c44e2f77790bb111dde8966dab2684c01b2ce3a7a04d6046cb1623b4fd38f74fbb45c0a7e2e456cff0d28fd488ac038bfe528ba4af4eaca62a521208b0424c6fbc5b71dec8a49d775eca8029f02ac2a413906aef85dabdbe67910c3e40847bb8589f4bebe8e6a84b1f2e61b4cc189bad028b0a8736ba669b7d9f3a6f2d159d2a34684766cc7d9ba2cbc3835094492a8f689cd949687e86fcffa4c3cc26d05a1e6e1bfb4ac513578e92d06670cfffa9d2fd4e4c3730b0ca07e7352c3efe09832bfd46a4252e609601e8f69a74aa62d368fffb5dd114cc1f49635fa4dfe617546b2c590e7e186977606db34c2675dd68c3120142999745d3f4eed4c307cc2a7ab4ba3cf182dfb150bb3af9f5b04d9341f9a3958128f061bed0e2dcb3eebcf223d0d11b996d86582311b82646569666038c3a70a60f024ae814b0f4768676403f7478075a8cccc19b7adb155a4fda7839c7bedaa31fca2ab6788a4e98fb3e98ba9ca44ede5465a1453c4be3b8775d508918008a0f7d6d709d9e62d710af30615a70ba89e783b91555372d9b1861f61f444a36199ee232aa32b354e501c58eaf0fe39467ccc48d3c25e8436c9a1d53e4273a268158d087cc2566a0be1062aecbe8cf8ae3b409a7ec1ae035be49dd8510ea4d6be0647eac95da33dcbc53e6ad6ab293df1117c91c434bd72aaea0ba2fa1e7770875da682d20db7bf58eba14ba86a495023651d561d819cbb9d1448822312c0972ceacd2470777e3376547f822bd8142143269d5f7bc5fdd14a3e232aed7df18703ddb2e10a186b8a4fe453257dff541a0cfffb07cc609e564178c8279c52f5f6f2bca32a202bbc9ed2bd90986d4e46bf3def47ba9b7a831c9a9dc61fb587c8a2d86eb4dd6f73a3070aeb8b8708f69ef3a8e9f332b79069a54e622f75effd4d30455ef79a18205bab1a4a581f2a803c694b43bd2991a634f207c40c7f91425615cdcd656bfc10c67c2fef6f50f40d8f16131b2b4fe4c87242ab053efab8ffcad020cb37e288e286c6d93585290de1656548ad99c4964313ff05e8908ab13d942b51c46eb241bdd3694eaccce1977ce3e8f695d06961b66486c4a9a0a2e4147ee248f79846e49977efe1cd820cce0fb992534b6b97c8caa3793053b70a0bb1dfb3d3434ff020f7287d1efec7b07f0cfdcbeca13c60c84b8770e0f94c0d4c4fa1ce8145a6ba5d62c5b8d09bfc31f7129ea05195b1154f45784679e99e8dd901e79db95ce3b652564d570ed279e09abc652ac97e91973467e77eb86cecd68e1945155ee3706a5b25684fa4e919d7854327a0c411cfad22a0a027c58cb51b2c00e8f41389df1415eb14ea3caa2d7d47c6f4546d844a2575d71f6cafb8b8ca1d64c69614c2cd6e907d8b00dbb8e02f06161490865482be2089b55dc590c6237fa1a75f6b6f00d78ce2876d595821af7db40d8f7bd9e387c8c9ae34e1f042dc63224549dbbcd02d9a735607c2ef85851f6f076716f0dc6b13ba250618842b202aa202873264f4a25eff6156c1883fbd7368fadd45df367383ac5cac6f9ccdea9b9958fc569e1bcefff510b68cd4f380f9b3c27afbe139f46914852938cd6969f382036c82f477a0d96b91ff6c9473f54dee37ad17a03866bb5b8a35e19030436cab60e3cb78f0a02bac165720b9c0c78a8af71660938f8e571dd7181bb432a9076749284fd9f75dc038b5000fcceac241c10a9ee97a4dad869a2305988c2c4f18f5308a5c0eea1ffd066e8a654799f4325585aa57f5dae7f7c2b51f7586059dd0c859c362d434ea4c6408689c23cd4e8a8c0508f8aa51979084a560627c1e73b6ba08de087af979c253faab6040222b72985927337aff6d20e0f3abf016487712cac4e5699c0a4da2df79f432c5d95ee352959b633dd0cb908f5662c99054ab16235360d488b9de8e3191f30062a641b6151736af3af132bdbb0ce78378dc456b5e2130af0d27ea80a35dd9c1ade0cb98ca93b1a65acb99fa61ba4bc0cac1cfef7c2a44bc144866427e862f0cc35d07d807a7aed9c0fb620afce72a59097f7ea5cab57377c22a86002c9533d649b75c49f58f2d9ccea0d730d298f94a886702a72414639c270520338142e84f731804b74fd57e112d947497d8300ecb96f44dfcc63f47846817c7431163bb9428cc50957a348eecc26c0f6cba0c334925efc4ab9b552a289c3bb21c32e745b1acf93ae4b060c4011720c89ffffafd54115a832615abec9254d2bbfdd991fa945ce154b3a52f7e1acecca115c91fd86f92f5e8ebe643b85517527e5e5b1c31703699b937765123546872402c6470da28882f7b95e1cc87a9af64b18e7fe232d47297c5005ca2dca9e7f27730e1725811d7e93ab7735612e23578d47cd3b01115ddfc1fddad0383d77c23553f77e81d71a5b9a9c937f95502e8fb75ea56cfecdf85147c2f96fc7de464d94cc9913a4e25f3df9f6b5ee64cf4fe0566c723c2c307da1e545ac6817f4f9d39e7e32d46adda8d0ca2cd422a6087eaaa9cec8baa69c142cd5fe2c2780c89318b1e260fc957e58a292cacddb901bc22f641b53eae439c78c4ea335d32e7c319a749160b4bf1642dc30a5240aff8d0ad11b65e7d13d83e5d2b2f6c335e317306fde3130b7430e36d2a0ed8110736e8becc8d3cf21d24a033fb273f8cf93633629c5adb3c95b5433b464b2fe30db4e4b396f55baaec6b5a8eb64767578bf21106e59c27e04dd19cd7203ab73142091ce267812eaa2ac8eb41594b0cf3d4927c6e0850ebec7064d75cc4baee9619e848ae79e52e43ce43385951ef67687f9f889e49250462f3c1fa3cd9570d2c205d2e7507c38cb783b194cc077326c2bbd26b0e2956858e53fd53413702146e29cfb78f9e0db46fb5f1b319b8b101fc0a25d1d92701722959676a4aaf58962090fd099c8983cd5e0fd9dcab4ae19431e635949dc7d75be9a4efde4f396a6ab036b036bdafcdfdb4d7a09dd4b2c89ae90730c8465b35d5902d8c2b1db98b049efdf15499e02d8dc8709cc62788c871baaa8bca016ba4547e3a9f40abda0b9c4dd1777622173aceb688f0f21b59e4779572361ba39e4e96ab61ae8cf00824e370731a102161a3d8658eac7f89811acb22b2f06b66503346fa9066cd5c8ee0bdcfcbf3d4f9a09f78f9f300e3390a8d6307d3c97fa21cefd5ffb82d7c0e9dc92c0bad97b13244ffb2048ebd467d64518e954f9a009cad29e40ce5325e2739984ed5db763081c8c16b5e8cb5e79d988ef53704accec38f6da2a92fe7942b8e2a479f3b327a07ec8ba52be9185f81d842e7db513517d820eefb75339b625e6c8cfe8af50023b53ec6e9c5a514a4c838c4687847828b4c3cd1020311086d28d803c1cf2e8a17388b24e551b2b83e2e33ef99adcf3d44a65432554e2313041757434603d3c001c8a50df92186253ac230a8caad9f26f7951ae86d107698ccd4b7ad1e7ae20e24f7a344d13f9338845f387e72c79575b08db84e806ab9df40e0a117fc6eebf61b1af0915c95899eb5a4b9bab09c36f411ba97fe37d50efd4a38125891364685e9f590dab62a176238864c65ec80f929161b89710c7637e4949884db366ae849ac3a7940c9a0633accc72127555132de0dbe9c3a37c6da19232bc70bebaae177fe6345ff30f17e91ebb15c8a5acf970a6d3d5d52d30790ef1ec2fc9097bf19a4e9f0e99f2bbdab24570fbd68900a3848254a0e302aa4ac17a049aa4c7fbad2dee9d00d87ddc4f4f17e30576ca334b31cd4742d0796c67f84fea69821e372818242f020ae7f6d45b79e86b955d612983ddc0eb5db3ffe8944f763ffac7b9d8a284abfec522d9962b04ae7ac78dabb85c0bd40ccfc1e9c227ad374cadbeac779d07850da49c6d707fcedae88be042f1b5897fdd43bd57525b822e343828d3f4248733e85bccb74677a7270cdec5905b52673508681312a37223adb148451c80d9071e38c31af7448feabff348dbfed2ec685c91a0a5c3de8f5d6982fba66ad62512025befe7efc810b4003fdd445fb660e66da0706a6afa989812dedac64eb4cc826788f42804090b90c3b93099f33de3854aad61422d9a1f950518d8f0ebd9bca91bfeb3df56a22b1c7a8e34af47931f3af182c25edf50c365f0afb738caa4fa67ef8faf5400c43e3ba3f72540f8abc5ec39a45f72ed76a4aaa36a099f7cbf6a6457f43a51f9f954f299213dfaff610c0775715726f3394e9ad3e3a1e7a6954fc550087271a471bc61a8bd78db6887fc087a58053b9ca3e9de959e09e8a0a139058aeca5602a959a1fac84aea31580ecd24f0103987ccdbabcb0b8f7c9c6d8be26246a981c5608c08e97af6ebc5b94a601176db18325555f7c662185066f2999c3469d030904a83e78ca1a421d2ae735be4799c8eefb8dc2bb18a219ce18b21032796c59cdcd6324fa08b912fd61a294aa919d768441ce2b39e464bd0fbab70d74e3c37ea00f0df24aa9b82bcc0540a445baf99197dd89ef1c36ad397a13fc33651e53a243d7bf037f17f68780e934d816a4fef21b4714b914437050242fdaaef49ddf1729f625e97dc74bdb64161a298b78481f5628f7ed6c7c3ab354e13f6c6f81ca58158e0cf5f00e440b2e08c0b6131c19749f4da384f33d220440e1ca1ff2e99ac00094f18134c83389692a84d5d6bc9865d4f4fce44f83db6e87bbc46abc83a3776a07c3cee91ba7760446e6c30a5280ff41855cb6ead54c239524566475e18110670249dd691c4b4351fa1c39ec737015d73894a9bf659e3bc2125fac3ff9584326f1377a66777ab9f33245fd7840fb4d36cf48e38b299e300ae6a74f274fac36ad0ac85e1c10eca9e841daae8bdffb4e35b021d1fac52e087ad63a621f84aa32fc40ed4183b6a60f653c2f784b34af3b6685ca6411c1f86dad9914ec7e6c37de42d5a89c1a4f07ebb14036c3f251e93c3282d580a67098df2f5fcde5d679f48045d59796cf70404b63a953ec13281c1649777dec5c7710533eeef7bc4a6e719df39a060ea02e674e307eae46b3325f9f591561a407aa04a1344d587af5662bda75e9ec4f2d0a866be069fba18dfe8988a76ef817a02929a66343a8ba436f6b113335065352d2848227d273acca13eedd0b639da38ba4e42c35a7f67b77ac0c2008efeed4f0739bf006bd6339e90d11e300201f51347bf5d9c5a124dd13301205352840ee9a83fab9c4f1b90a2db84066edc9f5da9cff7869db72031dda17bafefa383a83476e2dc6c326e4f68694bde47d851667dac0a1f73278c5afe4d7ca9c60ac8dbc6552bde826f3489c21ea3760689de0203f2f60709141126a7aad62d59a7322c2bfc7142bb27c8464deebf0d9242d698dcc892ce41902ddbe2d8b73c07caab3d7284015ba3696099f5c4f0bc45ffc163b5ddf40bdbaf6d35a14f855301d5ef1bd47f7bfd195ba4f0fd95b03249cb14150b2677089f9bd2076f54cc91a0f4c16b17e3be3a1577cf911ad7db0dc32a0b18413d92bf1dcb598a54a3b80bc0901e946c9cd2c6d6891707583e32a238c1f788a870e6a4acc1e0cb6f6bde92cd52e37820afc29d78e9d8471f149f4370278c3730498d451e79b3e94777f3887a492055a76d970103d9fe17a5c379c42b7a7fb276fa7ee6de3cea35809cd79757baa1200fd19c84c54651dac7f457b36aaabf21fce5bd5143d43f42bc9d63624320e2350b9b86c7b62742c47fa4ac1d8e09f2d64a0ec2ca84aae9bc765d8743127af2becba58fc8b6101fbc0a9d19840784635c013497507b9929153bdf723891778e8551ecf2776918816d405bec1032896fa43692f5aa128ed1b3a5a1fae21b3d441074a14fcfbd7d41d020a1abe9a0203ce298bff06aa083af6634a1cbf5242ec087b23cbae20732ad3dff037b14a35a0ebcf610a11f2823e8f95f95f2ca2ec34a5aa13428ff240789c9fc7ce5964e68622f613126331b025a88b7aada928769db83533af7cc10085598211c371236eee708d923c447b79cc127190d7dc33c9f80f8843631f86c8d8cdb0749b07894f9e0da39b61b52cfad4fc9e62627596404a1cbea336940420dfa48d0cd2f4ad6ee95f2ef252e17a17042c02242e81dd04e0f742b8180a057ee146d7df49c06cb8a29be418bd3a19edb48f62cddd6dd1f8aa946ba6bf8536fa141babfb27c06fb1467447895db00696b800faf7a8974afc840793c8eb9b381ad5fa9569a4d89fac9584def0cec932d60374b29e55a71c39e5380b58d01270765d63ceea56baa28567fae97778be6d6f46e25f06953ca844e1d1f3b8266055278d2087818f840eff0b9ac344404b682b6662b0c2570d0c34af7823e16677f7e3438a9a98b8b0ca7cc4920b68f08524b33160c5ef198e7247f95c1af1ecf7f805409eeaefa4b9254001aa10b3eb090878ab543d467f257fae7e187959ed7316e62cf61e5f1cc6c5281409dfc742a12c69766fe567b5e5f1d3fb167142b1df1a920393971f116c94109b6c3ac6a2a2f5315e623dde1d581e3a5f7ee6e0c432409b4b5530d5e65140fd31af85f6083ff681fed82b7d37e1ea3079195d909dbf7c5a7faee8db226ce7f62554bfde7eaa3a0eca6a1b6482bc4b5cbb6c0d5da3f0ca9293097619d58cf6a8c0e54eecd5d5f391bde46599f4e1db0a263fc204930fb28c6081e930b645e4b955a10123390d10e6a73516c68f6e0416893c700b39205a617a62c7040453a91686e30d392e49a62ab352586a2250a3a16a8ce07b5a2c72fa17ab450e5af53f037d19d53149c0c1f9795051f753da39b725a27e616cd3933b8d80f5fd9a850afc35efb886b1b90d55e6086ed7e124490904063afde89d684e7fb069b1c7a785083d7ca7f0b56ea693c3afdeae332448c335007aa19c475fb722c7d8d93a2953582f9e19e21400eda1c70954da464231a83dbd3de56bb0acb6408b9779d89dbdab66ffb808c268367c9abf2ce1654d324af18204460658a2e93581c3f28658b0c84e8ace6bcdf72fbfeba5f4ab9cfb329959720d93130f986b8340cab667c962e0624b77549d9ac8577a508b0a9b4c6af0d401708dda426f9ae583cd74749dc9e0043ff26b96008527d846b84ce39a66a3f2a40b71a617541db9a06e5385c5dcd957a3246d13ed591a3c4a7189db3b876185c188c247c6e55b9ddefb812e5b3777e0fad71258db4715c9233aae8e7aa2989b12aa57c1b5ebfc178b531cf6466971cdfa8c4bd3695230434837c2e75887e287815987cceeca920b9334e1d6fde445b03be8edae15fae72b09b34153ce4245ce9531592e56f2eaadc76b4354b9f820720c4184b7737f82816ef3d23d2ee4ad8aecd0483675fd8aed7d9c5a2e92e383286f4ee6a51ddfc8fb5e52efb952de53a527cfae4a0e9f5e625a62c60c99c1b3ebb14d058cd0b5c4e21f3e510e1b7f2730a4359b6082c6ffd8c12f6aa6d5b5faf053c1ca49267e0f3cf124b3262261139899db29bf03437adc7f71765ce66f69879c3dc2bdccf0bd91d5ef3cb59652fe26445e7cb8e162a53ffe2021da8315eb84fc923988923ac0a61c30ae63551c2b1a48fc8dd01550528833e567c2dbb38873933e93bdb9a9febefe124385c43f2deedb49cfe15f70ac410ecb2d4686f3b9c5cd4ccb2a98773c9686094a6c25f9c825210bdd9a4ffee7e04349478eaf4dbb94d4a37aa79a5d44056416480f9816cbe23584b4506e4be4b3f8882ab4f8f7f220e451954601a56e668b133835fe92a055ff9a5c16d72fdb69c4908e269f799b22a23b59b6dee115882d400feb5ea7b73b43642158c2bdc34117483465e6b43e1278384fe149527a6ff70fd92289b4a3a89712572202f21e817d188a53a22fa6fd5b2c25a4afbefb8822e15ea74af899c948432f58e8a6481f83b91035ea53187417fed4a05751c63805252f93f62ffab708d56c36fd82e0aad28dbec7c337a5dbf8257931062e8314a4039e6e56f7cb092c39fb341c1b56eabe8646ac1773dfe31e82510bb667e45d0664259fadf86c6a13ee8bf3e00d365b7fc8eecadec8ac81f922756dcef0ed157af045ee8400ac064939f06fbc452cf110c13aea89777cb40628b028c84293341b2b7e379bd20e2be9bc73ecc7adde9d22d35a0f3e7043af9d6d2cc47292c0028671a6ee34c2896da1fccf926aa00fa6d954ab332b3f235ab4118d8f2e17b5209f9670226d5a0777966069afaf7db71a3bd704cd7148a290b56ae4a550028651e90282222c41f362c35e66dd5ac638acfdccc1af25ab73348faa9c499fce9a35f21c2db030ddd017d63ce9e589ff0daa7800204c9d681979addd47fead4f15227a955131891c89e3b22c8c574553c6cbfb0263356a9745d0869f6ae449e86fbad5cf94a6ee7272562f1d6d83eb98933b70f35b24fbec8189a591d32f234047f54930e20a0b2fcf7828ed270e4bd9037b55f7d7f67ed75fe59ab63eeeab5248b9551b5db42235504d749458c277235639c403d9b2a41029c9f89e264172b8b8f7a516e22c98e214e39a6c488d00a61f88c1d708b7bece8db338fbe465ecf8885444338cff62213c42becf86f44d61b27db6a5bad90c3621fd80b0a7d75b986374c1ee97669de8becce53fa418256d74568e9fce77084166fdde483fad483ff8dec8ec6342f4e5ac12f22c83df877a80f0465c185bcb65fed018c126a03275eb8c5ea3ccef0cbf6647e19f46b5231f6cf58b8f17530eba061e31d945c9e74f96c89982156a6517fc9e1b8bc1e67486b13f2f5d8fce1478b9d8d1f148e1b7a7aebbb7b6042e0f236265da7e8a9c9ecf8e4aa7e57e95e8cebb310cef7238b42c4b0764b7f4b027a23da1a14decb3bee8cd2db2823659ed57020ccebb1a967e51cb8abd0a13efb186dff3a17c32b911d84b8d4e65728c44d7d33402c56b7dbbee2757cd77054fb1f223fac599040609d46f69018ff681e4b4a0bb5e34473cd332fd6ab5213e94b11311f8414e2e682b7d37ecaec65b76a8e6d6d3033625ceb82822d4dbb1d9c439e6587a89b3bb84d6dd2c0a764a93960d94d8ca9b7b9700fe6e9c67b36e736b0a81a489e16e230149e871aaf0dbec3fd51901feab4a1a0af6b960913bec19e0085dece7518f2695213969b8ad0f0d5d4fc53efd38a2785ca8b5921bad49643a279384a45ad43c307bbf7770215967b5a4ab9723f6774af9ac17e9127c528a48da075d3521cf3aa9084bf04248e12037b1398fc78c2472f09f7b441106263583e65c829f3adda276b19b97a53ee605b6fbdedb3c615df834119e8b4fa179d2ea82ddeb26a450b3b3e3ad144ad6dab951a6828671e2e0706907d9ed71be1946faa14ebd0edaea7639b08116b9465f3e51dfdf9a5ac71e0aa8d69847a7cdf6f14afd5284379f553f2ba476ee28fde0bba61860d3739f575ac6a3c585706ca2a7c62c547f9a95e829de4e4b7eae776a2a6e5c3e4f099fa90095fc4e7a035eb7bc5a342f64155e4261d2c010c946f27dcd5e8ac14a275c9ee283ae7fca1c7afb6f0ac1d79c827a43e7c64c787214d5d1d7e1cc51384bc108d3bb52f71d98e5c92762fd67908acd0db08e25583f3b926a5aabbac32cf057b19749fd10b28c8578bbfe2b33d4a2e3b9fc08e4ab0593fc7d982cbc68d855c2b5a6d96c7e2bd840d7203c1e4e00cca9eb5e25f6422a3b5c98bad0dc254320c6abb6ad1aa4f61d2fc6c97575ff8db62ab3b00d432a16263dfc168b116f3464b3115528445e29e13410eeaeb8fb917f64b57d16c3d6ee267f8eaeea099c8db8e7fcc3c7adedc1ba2c42e7242796b7c08949ac6695b09e5d0563e46bf8780002d85768b6ad7bf0851a99e3d3371fbdabe261672c6926f4c7cf54e3096b5358cf1080f19444815bf62e16fd3efa277121141a8acee91704584ab949fa06ced421140eb7a2e786207ee8e7cd9d0ea37211d368e3a2ead6233189c7cf3103bae8e9d2d81a97763e40df655e7b28ef661d10e2e14cae7c7cd246cc4b5bb79002caad5caf92faf33afad473cd731ea1a7b38a93e85827a5bc43cc959e269c205dcc7dbc4e462df4938e9ad63ebe0583a605614ca1d5fda4581596634f94b918f57087c13d42b64791fd545c6d93c9883cdaaf89cdcc500bf6a85755d0a929f1381916ba9916e07fc0d657f5101b42a5a129a10daf1eb285d409a298fcd6ef1f348c3584471149906a309bf04e107aadd55d801518cd7c5d0b1adb6f4a73f349191a0e6e277226f9b1725fc87d60cfa72193a1d1ac30a356efe7e67d0c332a863b179fa851be9a1c260555505271b892f0b74e6157ab07b94f7d4ca5c180997b80fb10ff09481fe468ac0ee6153a51f5cb15136b3e49884a48547fc56122bc6d91f60d4a91820374c6a4eb9881d0258fc4c77a4a7a17ca296ee2f51427a1340afa9e3c57e699bb8b10782a1fd31d8ba44abd5eefb732facd30437317a7c68c326ee5597f68ce41a90be9877b22de71e059a8c22cf7acf1d2d853963350395d5b03b3a1e7f4a10205a6c277143927fcfac077ca0f5ed2b50cfb6020453a0f6494b6c19adba702a0e0e1fd00da49dee361410d5cf817f75382c4fcf4b4ffe7de668b18da7f64bb0cb9f35fec50727c451a973082683d91bd0bcdd346dd46300a5d9a70f81ecab326a0400fb08e8ce523299d4fd5e1f59fa7fdaf94703fb5890d3dc4e7b6c390f4be2f7a52f9a57c09220a038e481711b1f203f119900d151014fce733847b05691812e57c4614690ad916fcc9e33d3e4508024b9dc861440d05520a40cc277142d3b2e2caad80116d0c8a607449abfde6974f1d14a3c55648993ec579a3d243b6ae4f65cff968a4cc21ec31e9115aa1167cbdbdd465de461f05e76019d4d046b2f62265870138fc98752e2402862dda624417ac3adb3439b38ff79e60b78e1ba9112f2a90b9c6c5e5c622e2c04d4e521d427e8d966a7cfb755626183f1551b5cc45bb08fc87f395d8d0f84699786a08fc0d2acb3cd6d1e2318f364b6c1b15ff2b245143e994460e797a3a3e5f70f34279da57e0cc8aefbe2a0d8772bbcaafe9ff09ca33b92254da68e51b623128ebaf8f82b97e9eea824c325fd9554f6d586a29c400de036e74c6536dbcb3f0b72db956e429af820f961df3aa76812fdf3dc08c7e4a163321dd4bc46d305daff92c8e93553ae93e043a0ad398969f67de7e71167adf0a46cd0cd4ff01c2023e72e1d2f238416f9a63dd45e8b2d5ff829b2a9da80ecde4bcec4252d85ee319dcc3495282e70dd1a4628f7ceb77d319dffbf698871f21466b5eb662532fcb0c493601d1a46aa3875e1f606ccd4f66242d0e4be6d0a6c37bf5a1e31706a812af02598dd8353ee9b0f6853e3950fd2cb2eb807203018de587d333bc2206fd718e3d8d75d23e664de88827b84dcfc52c019b11fd8b565a6472f2442a6c00a67775cde2a8ae8ee0e59e910cf8f3c033933224893c8702101e32c0d0b667dfb2efaf4ac648549a79a4801de61a5e30cab150fc194f4b53f40856a0acd99cf4895ee6fe20713d4a657d4963fe3fc099c6077dea02d2add330a4e6f2a2d428a060c67b5dd08b99aca75e9fbe0d44c6e416f77095f98899549e27594d6b623791b15bcd044b833fc4e05115c3c19a9b1ec024a7d34d674abe1da582dace1c1dcafbecedce154c59e334a097460ec5adc5b1816a1ca8d1c98ba49ef932723f832f401e80b593c7125d07f8fe8bdfccab5ab1d53df9929215bcc5267a421522acc20ef961566b7786280f2efb376147f1c712517d9fbce0b3aba88d1ad5cd272bc2f59804f2863d1a4a96c88fa1d7cd1252cee30d0dfdcf1c8cfb17a090b785761cbc758385d15bef977a733d4e8eedc07293a82ec8bfaa7ac0c6756162c02187ef623ab5ef633c7a5fa25831a21581056372c8e2b3ae2bf00a6588f3be13c1e3fc4d9f07dd44d9d7bfcad3979bae3cbb188834a8c71fd027da38cf148feebef837443f18171497934ae5a955de718eb91de1f55c540e2e68abbed601610f48e8b0fe1d9715e6f85cfe3c96e8bf311f4133e8f805e0b566ed8c5d312c9a016bef0dc89af19b32e8a18efa4810b92de4a874146b456f1ece6cb50b35d1310910cf00bde0d3f0e4cbd972e0ff37c8442eb390aca99ec536c4a55b32130967ab370d67b184bc12ab84929ba3115a8007cec5ce7b7f5b4b5a4c80e9c1c188ebed563b966aa8d4c86eda01356b1f2c78233d7a888478b99fac5cf7b912d42513c20eff175233ee18bcad7a711a0c8d3bd3b7efce8cbfc57064808e6fdd02636cda481de679a9ba167a7dbd9293394de619532cc81bb567a84cf8e24b072ce7bb41aa67a5c7ce9b34d8d913acfcdb5c6e7bda6102d07042a6b539ecbceac1880775a36e01b425237f4e33ad5839fc255f463571b9434a89a9c1570625a7dcd19cb215e13aa67bb4754753f30216dbc32f107e56d12f156b4ac0403e356e9807e638a711ce2e6c77ab678cd4c7c6107fb09d0c4bccc918f5a0e0c3a4c4bb07b1017e204717eedf7a28c319a1d458d4987d77720130471fd6c3098500093c80c2cb8c14d5db6b4ae61c69a0dbb18eaca860a2d8744a70a36eca03c5f2e599f2eb11215cb2ce7f789199e3b11c21ff24d9a28112850cd1d6dc69965a88f657de23b47797d7f32b001afa65220161509577b7e9c718232f8789fd1d38b19be71efdcec4a5a5abe76cd02e0da7285b5142bdf1638ac75d9b65fd64204bfd8a43ffc2e6bac991833d7902f89069b810596915951d08df9572990d0a383b94b8b9370f56aa0df47d49e402c344304ef18f798d375a4a5b120eef324c63402dc5f1800e24c2c5165dfaf70be5ae2b9214bf132c63ca2509bd00cb0bbf05143bee3995628785dfb04b5f9b551b0c22a7be39f6683a36005fc43df85cad5b6ae0715748b7bae3b6bb912f476307da9890186968cd1994d27479f9526b5f22895fbd3516e143ffe0e084bc8c56724a42fd91ffb120b106be8abdb2489279c2804fad68bcda0ee6b41c280743ea9d32f1ca9f408847ea0992af26ff76840ecee7dec8775a9b6e109edd1d7173960f65a50fd0b772818459fe49a6b341c7f02ccd222b6d0c756093ff30ba876b311b2dec9a13f3e828ca3322759641cddd82e3cfc229b5ff6c1639604ce0d352e354e43e2abb408e5169e5c972d7421da17f4ed6eb5b75a7e6386c026e42f636e8464fd7ea0757f273ec9e156c803757fd455bdaccc9b943d07de58e6951c417b6ec3c9720c2a0782e8da6d64e1be901a718aa1daf2f986a66028dd4bd503eddc4076d4b3c07e33252023a5f2dcc660b495b3b889812160f8f300e33806fa6189560235208c09bbfb657c0973442fecc4051d028226bba1f646de09d73af4e442b1e76fc7da8907ed8b360a5cd282d1061b51f99ff053c21f81d66fed505c93859b8dccf8aff04446b2deeba4352147bd3b530b9c3880eeee37447ad2bdfa0caea1a1ed6e8bada2307d3e8953a7c9fc1b0a07557c01d5786082a957b3e8d71adc9c2356bc55db7d71dd3ae403a560c09c71ba1fa5c3d81b51b158620470653d5b9ed41d70aa32fff3d17caefb30aa14b4dc9b05d338dd75523260fa325e2e7f916616572cb78c80aba53c741f6a105fe44a558d9aa352b59f053dcc04bfe94fb4d1782ea673aecd431d62c663e11e1d0b9be5c7a8d7152fc65e2900cba642a129f7b7072f87a42a92ea44960fa321aece6bde46b18d7c1a85a4b8e6698737143e742de7efafa9f494ce3f1b00564aa3f84c66b7e8a67c9238487cc6e78dea91adf2aa9bc4f3c87447ad8a458ba6a5e59218d7d17864dd2b29b983ff5d2d4b7e82be208cd2511b327edd6150cb5ef880bee9375576f5988e0465a5e7d729cddcdc96a338d3c45a33af12a38a76b8080c7c4dd84cd15c17f515bb4f2f5b65d2816e96c9a4998a60e7f2b0b3cddb30d7a632dbc6ee77cd51d27839e28e11d8bdf129ea3dda37e8e882518d6dd920efb0dfced1c2a8bd0d0b9443c326725749ef093753609d618e9ec871f11e33bda6a34dfbe6f5374dfa7418d46179bbbcd34ac72787f2c535fe711ca7ce7dc355ab660bbe40f0fb7ed29bdb3138abec425f6216a249339f233cf5bd222983ab3b8dd18c1e46830e4caecb4626416d295641e27f52d2537548b892dd9fbe26c23edd3e0b36bbcdfffb38847e61bf020e19bd12cc8b55b15edb39b6ea5a76a3da31fdfe8d350ecf21371a4ddb0d5a3ef1efd863c5986d28dc19797759c12ae7cb49d2e9689c9431333bc7150196dbfb195a9dab48f968c84aef17dfe3f9221905b8bb1d837a7ae1b9184a2b98f0d39af44b02371b583ae20819ea65f98e4b8deb698939e25f5de1df130988d4e448b1f74e891019350b138acdac3ece0364194d10ac0d2c33f5d585c808065e14a1d1cf447f81401ccfdcf7003564ced61adfdce6cbdc428d6244ea589c2c7e7f4c0462d83cbecc447f7915215b0a55b2c24c5419d9c41207b5d1effa2d14877e77664de9ed8c01d20bb5c79d9a0ae958b599069a2b34db30b79d680a247ab5b45b28c7699840faecd504c6b276301b1c6af91e5ad04aa335f8a236db287d74215914c443adaf548704562c5d6d40ed563a03113","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"f650e966306eda28c66d2a7057cdc082"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
