<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"fbc14e633929dc0b6a1c5ed904f2636422dd140f977feb9af11fb90ce739aed50f78b534db3ea767855aa192e050828f678ee4a6a3d559271f1a5a1908ca0eedc3fd61ed47a53d34d25c89cbe5d33d2c6dc59fea2d64e9d372215d9175ed9138aebe392344638ebb3bb39a91b021f38b3c278766ec1c685a293f3b297e72c568450519249984b7bcb9468fa95e8f5995ea07ed3fef3fc6c51311da703be099868cd6be7ce5d040a0b5a16f7af1f3149c10137dba34d6c16e50ab798fb8eb7e7342dd7cb5e4d15c7dedf63101a155e22219895d32357fca76afc1b90d8d1e06b93e9e1d860b7ca6920b1e388f796226d9fde9f2d873d079c1189167df1d74cb097a49c5d21fef74e4e149c5199916cb9ab9722bc2021f041b33ae4c01ffef530c6ebfa4308ff486ba49fb16f2675339a3a047b9c49c2a6519ca89cfa91e7d79a1871b44a0ef6f3b96e4d5be3637c392025f2838da62980ae5398445b499c4ef0d091914c57ca74617552fedd0a3b635b67e5e73f39fdf7a753e29fcacd7117973b5ff203b047af51ebed3a3c6a1f827d98eca9d0c7f99c43bdde2b333f3a34aee849c2b53b6cb62937ea8b1241c7dfac19e225f8f5b2e0a67a03fb9fe052bdcc6c96a09e6d42525fe72ad4fa788d9059117eed0ae423fd08d6398b7c19f087410c32470410b872cf5a88fb5780cdc17cb4314c6da9b1e998a74e625f1a586421e532d47a3030d23dbec3aa9ad46c4cc18b9ff1b53000176d2df19bca3d352069d272206c805d3cfab34b776f1bedcf2e5a0ee2cba24246e5132e011ecca14ca0398f8eef95b3408bf6ae76b142ec931f9ed013545c543e5f115aa34615e17d118a5e6af923417250ff6c8ccb7522475a4f6b82b18215d6953bd879635f8511ac97c77d091ee3ed00abf97bb41c756bc46722e9db9129ecf33cbd8a7ccd5794580ba6dbac76e5b6bdbbe25d83c4d66b94301e7a544a767eb2c0d3ecd5bc55d394f147e11dd56b384b2f3568a2d17a3c042c8c0bb3afbf28f39703d0d388272597c47455b66d07b980e046e2e945ea4244380ab69d27d6ed2c423083c78d7c54c7f7b07dd1886ca377f53ec39dbd37f0349e39a9749fe99acab0e75dd17e0660ebb991389c04fa8e179660e2fe7edbd8804588bac5e94d75fde5e0e750e12568e51f592c8e89a0c5da7768bc651e82df0943f31a679792bfe3345133a3af22ad3175d859d8c5993815d8b76b74c1a7c4a97b87461bca0d277835eea13fe6dee2cb395dd18fe3cfba24ee897cb5a1641f8a7b4b2dd8e6ff32ee64ef4cd8293562f25aa71329d6a9cc5c1c3576d0025b07cf1e5803299baa2ec1f698062cb0b9cec9feed7ca91662efc7f4a15e919f9746e3791440cd177d70ee6457d7c12ffa10782d9face7cd22250b401bf071985645b47cabab4ee80c0e68d8b1a5bf97c2fc865d504be8cbd65259b3e279eef67dfbfa28aadcb5d70ee512e673585fdbec71b29234358b9a650fb85fe417e830ea5649baf04d55e2213f3081e95ae6e0fdfb44fb37dfa1a94b4b639cdcc96d5ecdf63b83e4742f1b001a2efa778290c1a1e8909448fc562960c2ca2a2f126ed8b75f6cb8a59215ec1280e1a819f27e38da3330d23f2a1c282a024ade2e4ce196c70524d0ddd619f4432a1aef3f7579f59cb1ff8e94b3e76f4f45774888870c4cc499f3dc9f5f0e0b66b950f01bce04eafa3d3bf0225cff0af75571dd1f1d24d5dcadd0ebaacf40065dcab993dc82b3f3e4305640e651c9214a16f26c67987680ee10ef437553ad6e9124ee2f946f30248aa8ccf847ad09b1edeb1cae4de99eab6bbb0009e675915a4acb40956db568b774c6fd13288a326d221d24f111dde8dab7a951a8361fc4437a5ca74de04ab8f2653caeaea18e8294bd7f93d773bedeed84afb76373766f4fdbe1a5194670dc1f1138775bf750ca829891903c0004448e53990b3bde6d58b3099f318f38e1c134fd20cf3a5d98fc85d71dcc803e90a377016c57060ab83520fe0f0f3ba8d3808a085837d8948626c0031a55b7efcc564f9bb398251c142e913da05ddcdb08f62acb3bece957e54200b5955a4b95819e054437bb31b7e03640356a7fd1d99589a0a6d3f714e175183cd99760a687055600a2aa203cfd700153a5a1e863b12f8c125effa193091023c4c6b75108190bc5fd3edeff73d819fd9c8a7d735d569388adf78891fe25378746e64eb5e52117b771e77f695c9f7734538f3c0c4093a2d0763805ddbbe6099b2b386405a76a9e57321826ddecdaab83fbd93e15ef72b9c14e2c69891bdbbe053e6b48e31a11eaacdfedcfa5920d973268185eb1ae7d9e1865e4e9f415b6d3d25b32dbe3d35d3a161bb770fd6f50b8eff376927ba29aa651371ff83a0d14ce0321064c513ff64e91bd4fc98a16147d233da2fd5362731365c23f8dfb0900b332fdf50d64571975080b6cdb5fee08fad8a8b5b7837ceeefc5e7fed0d15191cbe6da2043788f1d5bd687da834a16d94a1bc091a834327ad505e768f9c52c78c8c1d4f34a9f35e65ae1d91fddafccb995966caaa740e202e78c4cb0b237288a16f9e3e753dff7a3d9bdfd81c59353e462da3dbd8050bdf9855f849de45e4229ca471c4cc2cff213bfac4044afe4c5c5b35e21913f1c06350b798e33ac92ab92793d72795da03e1f7d9517e6554be96e991782515e7285aeb95bb25be38f11b15d03d10048515d6e05449692ba590f0f32d2404952e00153d0f126edd5fb582e9326dd51adbbc39c5a8f789dcb0ebf6c40c768cfee5151e38c316932269ed41e1f0ecdbb739e7948e1679bcc20150f2ddc38f082a190ca9f7276aab15ae6a60060350313b71b2bc72a4a439ba6b5d419fb3faf1aa9771cdd002b19adb33875b86732c742c3678d07bc0982af43b6310c43cbccf6c2d0d4cfc7f3f32a3dfa3fbd0ef99f15db7e8499cf3c90444db82579a8eb5b16a05f9e6cde4f8328c84d4fb73a085eb4b5f8e45d6d119e64f1acd3e30dd9b12a505fa23f15366f5cb3117b9babb85449bcc1533f0282484bddcc8f6fb1a43e832ee70bf57cdebfb7ff928066c548749ebbf33c682ea69d3b1c8bbb3795a3cc9f8d974b0311c2b6aea3e4c355584eaf429eaea1d365e38cd4389bb787a2d6061d70c42e4eb2eaf06e7b0a90f811a115021713845fa828b251dbc9d94622c45fae10f759aeadef407c71e7c85091b85763b61452c417760bad550f09a2905c6438c3f7c22130e260afa171ba5f6cd0243753083a4c7d3c0a5f4b1d61590280f07cd4d1fb10e37372afdc1ccd0cb109edc181df6b3cd06c839d29842ed1160933ddc80f7683ef9a3a66ecdd64a1892145a05a947346d8480eee2c83d1eb8002f2c0cb861f8722e2faec05b7ebb4951092f498b5e6825c6c34c660169c5ee68c9d80ca787133e89239ee751f60d7bf648adec27765efecb7e95d5198e0455a9e6c14075ff1294236d872b3bea61e8fa01e5174bfa38fba664d535ef79ef55d52c6ec0097b97e09340182eba1cd3c6a9d60c3d88de15fe0a9d5993a62e9d06e456df42c4e202f1b04216ebee46979e219c867718c7774b1648849f784af972d1058f39f19eb92df3bbf5d4d0e7c98e98c693bd093b6625698eb24523f1c8cc807f9a05a717797552b42f048ed167bbac256550e362987c6a516672d9070ff51af686fcb62d8a6f960996b843e34dd9d7d9f75050e8b0e7409469f60a0a46b1f98604ce7a49962b03b53d8847344ac29eabcdadea77e151a6d9d8657095e356e0021ddf584be10fb08150c4104ba20e024af96d9afa66d63aa0ab56d46f602e4a9da496418c560d4646c9a4724979d61994cfc0c453a81161135c6a78ec4e28a566e94a731d7dd4e72882f4caf22ad94270d807943624d9527a93c3a0646da9f0410097e41a2d6b8d347f3ffafcd14dbc30ff16348dd0d12b58e55871f714d7392b31ff834b12339e10d47b843d41f41ad47e15a990dd104ef6c372c0f08d520dcb7fd5924ce484f55b9c727b26099fc61eaa6dc9abd685e83ddf086d8cdbd91189c8defa820b2209613e54e09f8086c8a50ddf51d62ba152fcc9cb9ac19ef1e946121929fe6fa06455cb9092b2fc4ae85761bf0706281e28bb6aad58070908fbd51495d4f2b792411c2c9bd36c955a3755a49a60b2c6fad4328360113fa2a15b5a993d422946dc126a6efa62caecadcdfffe690096a2f7eb6125039c4e33940984e6d9e69209ce13e0c5a69863950dcdf8f8ea2621d374d06b1fcc49d1ccd382a6069c5967425ebfea4624d8f08799b3b2c324f9419efb4dfe6880c9cd885979fa7a61ccc25f76e4db36c7c27425452bf3c6752c619db37b9a3c5da18c1cfa7ec747ec9646a117d5d2af7738c2a83ee517e2be7af334d26b879fb9f1fc7cc896017cd3c7bfd27cc502a33215cef8972f340f996275111369a22c733e7e6a1c703985de3faafa42b1f3589ac666d69419dc757602c6eceaf90398436a8f2e66e3e8802f33ee864adefbcf1c3c0d4c01330dfa4e4e919ca29d39bc97a630c47b1a6bda19d49476316746a6133460ece861cca194b659889ba1d57689d7454b332a1210b6a3525ccf714325353f367abad254916018344e0ea2283335d30783d8109dc68a974c0ae5c7ba527a75fdc763bf40aea475edb22c5f2500aae2847db633edb10d6342cf56a66379c0fc8bc5734596bda657da17fe29fdeca7ae09cf2dc1ead0141d6fbb29a93d8944f5839bdd47775b423682ca07888ee51aa4e240e6dd7b7d36e5639f7e9f56563ca4fd2c5356f1241f76d5b8de0c30116afc07ecac91bf846d6661c70c02051b95a5574a8865001bf177d2b5f6144a16fd98f000dd33bc359be4793de1a5b2b42c13d8ae4356b248226d074d8d9d00e4d99e2f511611fdc60dcd974e0b3ab006642485e6480e56ad922e4517483b5cd4a3211ce77529fc9b42a0e4ffa8949900616b2d88b4ccfc327b437d681c106582b4b40f6fd006f59f88762ff5d898dfcaf3220612587cd1ae479e56ea13ec3ba0299df1f801d1222b74d17713e933fead33ae91d92c659df4cd903305badaf9dda7b7f3adbac82f307b3f4698650fabb2ec75b86114e8289813c060158b6ceddc6841cf664c205fd3db308ef4ac0d49b2881d96e19f5cf445a5a92f42ed63b5348acefa9eb68b345e85cf29bc7dae59443f711263902f99b4961d86bf577fb3ae47df0847141aeb6df9327cccde5d13a92700663a756cc9cad9a9adfe66bd13eae3a0b7dbafc40ae191ecc56352d1800a18ca607f96a2d34fc27f81543a56d483349f7c926764ceaafb3371da342a5f9d261d59fb7d0dbadd236b2f45f8c8df36ed6533c5e493426169d3fe70849d5662c2af3768b01abab2b396738b085426bbf7628dc9f7efed2cc798ffa54e00c6b8dd5acd300f98de99ef8c15173155b0615dd4fd911b6975eeb196667eab8e09db7cc6783a902d519ffe555c2da259b0663ca270367bc8a0f65b2945dc194b304161de24aa1726450160f62cd4b5349e0bcefc15c4267a8bbb6d54068b66cf19f9b3e63b7e720b6d5e61c023722bf67eae9663479578a4492a15f06c1b3c08516ed3be7148ac63e92c01de09f6fa62498d60cc91be6f68283d015d696e4f88a788f3eb7fb87e58364476037205b074d68f2b0022366cb3bbacf81acfdd41e41cd7909e42d23e1c384f51f2159c936b33500011f3003492d62ef7dfc8897129cfd499e165915a520a0b59805a47becb831139bc17a45246277506b0ccb07e28d0ebf585fc6cd726f7d3edc4a2a37ea8115676bd3f976615f6bbc75eebfa9f8f2ed9d7cd396a2047e5fd22ad688641cd817e176afb9aa29d3af0bc10884fe9478088482e7251b5eb3309a57bfe7d99682c826b6b6db150c31e08283f791b28cbcc0881618aeaca22962e296f95e7aada396fcdb52137f8645acbeaffafe7d796477cc1e2974080b79542feb571a6cf0c1e0edd5393dd7887f1be79dd864d5008c7076fd2caef85b696c325b0c45f9d0ed8b17f721838795e8cacc2cc8f54c959808e31e2b971ef55f4bc8b3c9621e9fe0dd05c8212dbb85bff44a470c6e401be9266076c6f0f2fdfa038f2e874e0e4d43c2705bccfe2c122498d812b03becd6cad64bc7fdd910b5a70da0c1b747dbe3bc5694059d2b7edb1d3b15c1558af691ca75bf4e76462474ffcd743033c65a1bf934d61cb1d4c6d484e5ebd0c74022d575f3a2b808f16fc16bcd4a413d8193860bbb878905229014b7d32fae22209f44a105d7f61569479b7be0a0b3719f4057e7122cc68e9c7898565431df8fca03e56485097700d6292d879a4e342bf7d0904cc4e1c77ae246c6df97089ff6badad4c448fdac6aeedebfb9dca56bf0352e68c6e2970f634519316632e42955309111172a47d00d0fef129c265a2319465c31c0da1e05bb68f24526a4cda48cc52b97c5d3a8d9b43edd1f72378bc7141bf74c4904e8fa42d62cddb0ff48a9c617684b6c2a0f00a76ae25cd3e534a94b194eff90aaa87651d84c54bd7aae7cd30ab28191435809754d8c74a4b6f9da82c030107c34226d1323291e46352c7ad97ce98da9454689b2661cfbc57466645da0ad8e88646c0b7d6bf39adc6eb818d38caf8e40a96620f2ed38c6f52c5067427f7d023bddc8c8115ff90f28ae63f75ac12d9cfde11b17379a17713cd2946b94ca3c93a9df360df09da9c847ee22ae85d0b431bdf3504349140bec64e453e3040eef7662966f007035397a84e17ff9a856c067dd081d5dc9cd69024ae7698fa480241ebe8e8fbb78879d63c61a515e8eab4d56041612f47f18160c26483fdcc765018c3fad613768d6f0f0fb341ab3f4ad798fa7d99071aca5c3875859ab99d6eefec2708aa2ed70a56ef75b9983b0de0110383ee8cd12b24b86ab087f82af912ba7627644d30b6ef1579eb49342ee04849fb3958e4451daa4e303a2d10c10100bed260ff9ec52658556c3e205f04cb902707ff84d67995fb50cb9297c83cfea805bd55b5f5444c8515299b58b8bee74b898330989931e13dba9ae0d0ba7c9659567e45d8a197a4d5c055ddb9257a4651b9602f98fcb22f1846f2689647e70c7c9e4c432b7c2b449a35144335e375c950d27ead36c879d73768638634b354b03e972729264fda1dd061bd041e41e32d61dd656b48f4dcd9e4fbe4c5fad9b250bddec6affcc7c284c2e83a69f1845da7585324ccde35e660512a1c508362c446b3a47704e0ec1a2eb0c3f2c6eb6fd6f84432d20105da11a685f8c3b8c22a1579b6bb6fb88b6a396b81bc5bc4782fbfc0d7b1101cefb0c306212cb7c0e78d1558b5f66c1f438de52ced99a3f1c76dc74423bdba535bdc58261d763ed7e67830990af5b6202c79d9d75eed8115e27be5f1c319104c2a2a4625e51f63fe29f14b15298e85fd38ffcb15a71cb52b7f77c2e1b7c320f80b25fb23f74d6de99e811371c268b420820f68dcc6f21437b2fac74b1fbbece9b5d196ee27593f754669ac35597c099604c7e43a6dc24dcafecd14c8867ba6b5f967e5de2eb4bb112bb07fe20f8772039fe73269adb959fa49a619d6528e86618c139555016ca696483d94b00a7ac2fb98e094306fb49f4bcfbc1decb803209dc8cb4a3922a6b067aa21f09e3d809c39d6ea8bbaf1e03d448298c1a7d56d766b634b7e4f7433cb3e2dfa845379260086970cd48c34cf8cc65a2be9a072608db386119ec790f7f5d5a183adcb92e5b30dde493006a78a288e3eb0b4830dccbd1ba3fd562c07911be21f90a9245b55bf11df44746dc362577efa6984d0b2ed948ffdf9641641d84625535bcb152c07138deacf2f5d72c0e46293f4f78397af3e61e03b50d3e97f5e546cc93209c853aece1fe13487c61c3fb2aef9accadd50ebdd319d6b6a8bca8957e035db27e249cfc378f8d7225af69561a58485d7343745250f740a1a0df9b53b627b40066aa7cb66d899fbb6e599a86a6d60a7efa89fac7656526d1b3f6ccfb0e168b975903d733c8e5a2f4d600a8c032290601688969cee909869207dfbdad2e24cc3b7e89d4e4ed6a962f3e7dab6ac8bd73a6f080e4feb9eac6faecfe19a278b022a2baafd600586e43bdb56bf30e60c52af884c242cf95bf41867d7360dfd2acd021657396a49de251ae49e8e8b6a87e9554458d767fc2ad53761bb12c84ae8294cfdc27a5aad56be375233f4d54feee46a5b4c58dc4f4a5ddbb9c18eb836b33a476a4427a7d1027bacc947166ea57781f6d19002c65e15cf469f8242ba0c99ff41dcb25b552566fecd8ed8c2c02aaf7d45a176b35e88d306ad399d051931c132a931ae36edb3fc83e1c65bb111be033d63642e03cea2ee311b6439491a57ab52692938ca112b6e201b22bbacb680d2a058b3dbd6ae3da2aeadaedbacda04db35f89fa99051d7be65f530bcf7fce77afb96066a332a09503dd980dd46c42c8e662d491373b28dc3c54af1f54edaa758618c33e9ab24e0be495291c5a73d50d56c1b08dbdad496ccbc3ec2c18848775d40d7c68e170c4a44ecf9a4557fce70f0e18545b95cc1f70d74591c482fbd4be5c9ec00d17ca1a0ada4e278d4a104011b57e8a9878043fc03ba93ce9e92f0c292ca2339605c0006ab828d47b74cb4e4cd4dba24b43a5567aab7fb112dc9383541445ec605f7e9c6050b5c998e45c49769cce65dfabaf7acaf0faf20c5d956951bc39d37e10de02d69b9a7f6628de82650e70b4b45124a7178cd855356046efdab09ca0ff804b8f7ba2b78737fad329ee0c25d334c63c129c577374756c682b7e66659b8ea4b2b5733ee75a1eafacf2d20a609e7f05a143d94efa472ea66f04e94e48ea3c26b8028ae4625ccaf9faba5f3b9d782854c01e3a617c68da2d1ef992e50d94c1e5e5b2e6795c2c769c638f6f53a5d31e5568fe16f9de520966dbe00e100935a6286f8f9134b61f471a2897600a572a4fccbce526e97dff8d544da83bcaca47eaa6dcfa4a21e8d5a7f5d8dcf3f7937f373ccaf286f58d0a8f85dd6c61e26195682a8979ef960a6d32af05005c69ef86e5870949d3db2eee3c21413caa4a67f226dc24499633bffce772e32e1642abaf4117ff28e54a1470bfc6cf65395c92aff1a65ac8a20f6e81cb6966ae19f3d1b7531aa686042194bca135cfc9f22cd1760b8a1594e58088cbaf112a47fcb1911d3b23aa8b19de257bd25ea30bc256fffc3dc427b79e7596d9eb7da387aa5668de851e14c312540adf482851cbd9157270fe81ec818f04803290ba3cec6c5f48f34b11d08756ad35d21ccf7e575a004ec5fc2052e3b1593f1e89e32370e955520a5d6d1443c98d9c5e451f232af4e138ce65e3a36cc533cde0c321018e027e05c7edcf63dd9d5976fbcab3ae31ac8320636283e525dbca7f0a17928b6e7da5c0bab476af91a2999926ecb48e34216299316b267cab8af25a0e90569a549e1a92b3d0710b9785d1554d814efde6dc53f0e867ab970914d410b2ba5c4f4267bc8f1d6972ee7a8f9ec7bf9fee6040a084b87221f00a211b5d4d13a09a5bf4676aa3b752c1cb49c4717ecdad139a3fd677ec53ac101fd20f5b58d00893149356c2e42f480b02c99300d4fe8127f55a8b612a355e0e99730879b3cad071d1e971e5f655a9034eb93f23f3f5b6b5b367cca65c71947d06f92c691df3770d55342e2c171c6e2c81f818e65edcbe4daeacb5282b9a0015e3e5f42f9e2a1b468b613389d5577f77e9398c8206dad1c116061c47dca0de6864f0835e77d3770e9814c3ca0e4c1ce1f7456976e42e25bfc77e5c63e99ceea2da72a74ce734ca786ff51e1dcbc844fc951da22f064c820be87217d6c29f72db8cf6d32bf8a772d4bd3da16781f1b3055cee28cf85dc01486b27ef229ac067569b4eb977c652378c99f1005756f3c1d5509fb3e09a0da19241f3bcd0ccfc6f087ab677d791d0a99440c65a8c5885d5287d5ee0eee32e4cca5cc98be8ce98bcfde0a4bce17062f7887c4fd622f2fa9967f2c284519842291e34cdd3f16b454d1b0018a0b9d0fb83cac318099c73804b26274a6a20de639d7e54ab872b482803f76db661924814944e404ecb4929271e0b03e53e2dde9252d510626f59d353e0832f94cc74196dcdbd66e2bc56b700cce9b8b73374fa5c358ef8c15855f006fea7f6556b8072b2b1712b8178e8ccb3f7e429448ca4a9900890cbc3e363f2dcac908f9e6d34e5f01c5bba5c98183560bd5ccfc309f815b762552febd07d8042a0d0c6fb6f604f7e7ce090af95ed6613bbf74ad2673df73b99fa5f12fcb58cf957ab519848a81e897d0b2592db64dd91432611a8d436d727e7cb8a0fb91aa88c76e5f0bee54edbce91e5d1faa8348c3bb06f591843c3039dacc1df8f1bdf2da039055c9a7b74761b1f4b9454653cd5e9669bc5e6e26dc86359ed7e8e013b1dda7d48b30e409078de1e54e6c77a0c2156570c760962572f424d820e56da32988ebbeaaf8a4a1bb3d5ff3c34fc40c73e2fafaa3fbae3c953950f8c228e9b13062bbf9fb00079c9a082314d76265f2d685f3b3e8b3244c51f2273163833c76daa453a0cf3f60f11b1402a32c0f2ede11dbed909f5d28f391c7b04103bb61430b217e52764c0f8dd98a61114f108278f28ae449f21faa2f1024e413be457fa186cb27047de2c75903177ab359a9407960638b0f1b40afa9aa9e091eeeb8d7a9fad3b36187a0014735b1ce7885b6719eded49017a725973926842fc4fbb037c3e87ae3a6480d2983fe93e78b2813cd94beba7b6a6582f535becf348451cf2433c1bf1642b5832d7ab5362a31ad446faa95f73f68d0bc6ba3cb75774134292e146b2bf5dcb41a5d38e90b1fb2ea56dcc3d6f2cabd0082ced6c90504823ecbb4b271b70c1dafc1446be08504112f2df80a1b20d2a50c827c337770cc4f0445db9746c4eb04575ad8d67a5a40efe2b15a90f676ae1c8db800366f2d43ca864c4fd2c993e24e71f7fc832f16dbd03126af66d4d5e8edd09114ab8b5bf4181512d07112a3726f2a47cffaf7b662072c81e1c9ffc83c221ec64da75ef524334006ab5261fb2c0a2996353956378c74027e670157b9821b0d72b117603ffd055ee0a5b92fdb7992c7ee5fd47f32666d46f394a538dd88bc8297a61e2f22ce5d18e0ed2ac923ff0d90cc917360ea0be16ee7835a28fea28f51eed74f97d25c34f23eb12dbc529f60c738ff1346a94e527744a6ca73ce6a47fbb318bff9652303ec43335283ab63ec1dcd37ef8dc61bbf071ddafadf8104d3dd7c526fcac0a6c645765a4049e099c42bdc5fb5faa390f3bab7c1e458d39c2ff885d3e63a4a84c3e2f25b1fae2c6f51f1ea403d9a406032ac8b92eca749f9d321aec51163b34005bb50615ab30ce0f60c60c1be34de13ce8d6c96646cce3b279386e22113f426f580f84982c0e40bc13c4c6dcf87bd6e5e29be03b1fa4fbfaf639725a0a8f25b90c511aae754bfc60c4c9fcce869d871716241792ff4b3d28f59d48d65c50c5e164f38cb1a0a2e43303e565e6dfa73ffaf716ef188e99f1e94a5ff165750564cd2be34a5b15863ed707591b2fd807e7b8d8f4158b9c713e68d227a76066bafc3b3305644968a34f9a4d464dcbebf4a650430dea73c52a5aee3ce5cfbf5ab521bef38b5ed6d110b9c9755239c2d24c5fa7b58d359e4d8b2ea1d0d9873a501c199c551d5149b94c2cd51dfcdcc6f068fcf34750f4f57ac876e765d9e3cba3ef056c8be6e058d853b146df05580412073507c3ee8049e00522d12dc5cce3abb09bfdc56bfc9d6e01e8997c428cf9ed1741111549c954afe414dc1401721d1811e38050bcd3414968ce1170a6884d691c974a2570464bf7c50d1ebd9ba0e66e593e93ec693a7dd71031068c9a520435d49421dc11ffb7cbb93872a5c1fb3f876ac758f0b440cd1b9debb75f989d6b283d2cfe2f70c80a5b0ffd7c19d4eac2f273e6e7f48a7bad0bbf44801f1cb2ac87fa8011a7f15854962141729e9ce3c2e97471aecb6ccdbda4157ffd9f90ac3a39244ef4bff74dc664693a9c4b2e41f092bdde2b248f7457869380cbc6555da3a1c7b857e7445a0ecb2ff71ccd56638afc1556c1fb0357e0de94d67f91a6c66adfba51fa223d4cd598aafca5c8bc6b95d5b74df4968eb325832a0c75029e9c931ea0be826641e582d57c9fc83517d506527d826a0f0606c2af5f90897a125ffc5894646a83116a4a2a222f7ab0cdd221dbea18339537174bf4ea7c34b3bfd3d76fe0ae37b3e108f3b0b96123fea93d936875da8a1333c86562c249d49672652bb3bea072f847d8360787e721eac9d30eda9508ce62756fb3d2f44ebe42a5290531b3c7b979d589b0eea2978ed387bd11e83da167b644698ebdd086e790c4d10c35789bb0babd75c087d28e1b4d2d15a1528190fe31487e2082a4bb84d1b477b6a3a8b6185d7bb5772ef85318e97c7ba2a7f1520550d8d4b717f660c65af25b45ad48d1c464606856cb251fd0e4319221b4d9c62002107f7f9fcebc64a0f67544c99d453edd0db7466aa3759c18a299abe0405030c444510a3b43a0ad8b88d8075f93fbf89fcb34020ca507898644ef75fa0cbca623661c9dbbdcb1bc4ba208794df6f80ab2461c6541e6175129ba1da413da973a6f6ae5a85f301afda8cb2494c903e6ac5464aec2610a67ff050b0277524cbbf70bb70aba932c5ba084266c51724036d757eaae34a95cd9fc5f4daaa44b6dfd8c720695689b9eed5a34dc0359034a764c4a75fa7bd547caec404f80bd634cc8dcd3e90370ca5a2fa541973b10ee7471d14197b1facd4d02b7a864db53eecd03f6bcb319d2d794bae54083a164fbc737e10a34c88509a259b60cbf0e7295a39a2ddd3bedd43bfde93651b59ae9cd0790f79df9f5fc39d53e8b75cc3b59f8d53adad575abfbb2ab5b88bdf6730143fe6fb1f4ec51ee2005bf15b126bc641d28abc351297aa5526bf467dd7831150e67388e875a21e2bad035ba09c9ccf89790698d00e2f29e1a52441bf72baa9eb25373fb24e1aa30bbee6f78e48c4d058075e4f052c66bd42de639a4953028f5344aac158be2693cfe0fd76b14f37873bedb742ce2b56930d729bb31ba2c90dd2a2d95a81239df07dadf9f5498eef0681b2201581939c98dfb4b9e68251b200a54a87d4c4083d5181a13731e1a0b9c2f672fcd431dd7745d8c961bbd19de82ac54a4c3d27f3ffd50dbe46066e8aed210c6d8f6e8c7cf38a3792af35a1878dfc90b7098886307593e0aedd4d0597a3a107ca5e296c04a3e7237852090cf55dd5a48fe1058fd3854ee9259ae446d197d00b604ef72b073d617ef4ac83b3182a3444ed192438e20f22c1cc83df0d82398fc94645358b87cd0e63f4dc1b6012d09c75562e5a4ede82c7754222c7799858a179facd420dc3c68b152857a40566c925443d07384645a693bc2431d4c4739a347576e23db8a2dc0c0c8a2b463643697b1ab8e63ea816f42f97361b0c902a0ad60995b8b910ea7dd82e0548869ce9ee1a8ca56ecee53d41d50c71d8902c829029b82827cf0513969136f0281b49ef583397b442df384d198c6ef6d21cc69073a9decd08d2883228a3b5c1e8b97ed318004d7898004504f15ebce4f1a3c6bd3b0bdf9b6605c3c01751921c7b21adeedc9a2d6346233442668bf950d06111c91e1db4e2397e7181d4a4976b58fac8b5c45d254f8dfdfc9d7b0702210a4a749278e39a2d4be80a558d6e45c2f71ade7050bd23bcc08fb6a42154db76b88b58a23abcd9e964f743a4e1dda53f42bc0068e1980b640ebc9fa2f296e7ee85f8a3dc5b23bf731d50fbde9d56f2fbb6403cd3b0754fb33075b51bba57254419e04ad906612838135e8529d4803b75cb5ee92a749fbee93218e990d45b55bdfb2b16239694caa7dd78bbc6b1caa1aacaf7eaade4cc35912a04ebd8d2f9d4d79ae8cefd2c408a3028cca7bb1d32eee89a395af1b25125a47d66eea217571a639499437feba9dd2ff5ecb08bf56851c5e2364c90a4bdb745a9e70fe74c9c94ffbd79e5821030b7cda262d2f82c9a9153e290298e8b093be1bd475f49718f66d4019d31493c0ad33a28e4827ca79c6f8332f4b5385c28628ac4e0739d0453c5ac65e6bc50960ccd7222ac6f455bf4d090375385e003f1ac4341196b950f4e71ab1cc09a926f5e75892b12a4339ded56a066cc777d2a42ff25037211d47d53dce83e7ca067c7154f5b584945bc6a6a9e9a344df587e99af71e646003461e9b875b67a93c6bd2e4354df30696d64a56ae439c68e6c01c7eb9724ffabc77566b9a6299a5d7c3253567542eaff631df41fceb509a0673c3414279de22cc86d64d3e41942340a49b70ebfcdbafbb477d76209f1c2639ce2c8f1d566aade89a25708052312fb4b70e9556d261b3324edc1da277f249c8f634f675b8858c866cd5956e12820596c862e3496f9d7e0d194444b04657d26439f8c19cc5183a6a1c01d9d6b35c82eaa31bdf88df38a8a45e9bd08766175ef85dedf29ab44b3ed752f80d49c81c353e7635bc4d75b41040ff801a1f9f971a9963264fcf279be3308b664791de8b2ddfda714a921a09f8067ae94f21a6b0e9da8f49a32de17e7aa3e981ed3b65ce92819db69442ba44eaf74d58be98a74698f7edf6fb3d26b9626989dde428f4f47d10130782b966776936c4fc36fae9611f64109723cfa03de88b954b308ed306b2f9ea4acab325f570c5ffb036a5aed59f74c40769f28aea5d8dd99a91790dcd042f618509306841739b3358ac0b8442672b190b035db119ffa8f83d8997a1f80e5152eb1d2bd89211640d997306db8839ad535bdf105ceaf5ac210da3279ca0097c18a70d891412a78ef1d848269472a5c1af7c1eef7e91e2828a952efa2511a7fcd1a4dd3158ebd900aad0c012c4f4607c341ab0b13131ef7f0b648bda8371e477b96a682380fcc3ad78d9c39ae0b16b9a0063b9c467d095ccdf8d991f1e824b6c9baad2f8b19b446c850718afb273a4d3a782f5a27de4b490232e8d723697110923fae2ec5a309cb09b051843494475df97ed3915291d2cb8224a72d0faa4fcc90d9bd56134ed41bd9d0619864960a4fc9760eb3fb226e4cc14f12a4d424aafc69b8d471ac8ca9e20ec0af6a5f0ab4a521a186f8ae4f87331e06f61d14297b0181468785687a75e5ca9cbe9b5d9aa08bd06e700c950029b3017d345a22fe405b7492758047f697a497509f821734c6b7e37808f83c4ac160d93dfc803cb495cb14ba056091ace87b6658e907c4e400fb601f5ef629149e30a4dc87a389771e023561e33ea66f14337ba8164ba78aebf7b176a7a20958050bc4ba3930dafa867fa987b13eaa5c618b4a9caab8ee41432d45f967106c69255fb855867c42d86e0d80c87b292a867f0f3985434b889fdfece1c1661604b2ed3054d5f07d85ac002edb72bcd006b75ccc1ffd879a96945a6e5ccc5e1fb967d98117a61d8c40809d5e3d1ae8fa9a3e7b15988d77ee16d2797c74394c52daeff58f58be631fc8679f474c7e05b2bf3fae3a3e83857273b93cc47242f3cd17db50876012cfec1be18a4c2b3e3f738fc3c5db5aa9b59c8c26ab0efc21e8bf77896605e343cde3a3376adefb15cda037335e8f30158a694a1cc98e08c73fa541fdc6f9232cbf2f01ec5858578f6b982e7500d79a7eecfa54c8c9ff2e2e0d28dfc59a9ab07d6a04abe9f3c9e9db627afdaeb3a06c91006767afe69663cfb7bc5a4f49b2c8fb723ff4b9d1d4f65733619e87bf3890d6a7303242c2f6afb20212fe2900238f275fd7864b4c51f703c5494b21c17d0ebc2409be10058f4517b26644e0710ea0db7311b16154954fdddfa9d78eb5dc3aa84664bd98f2617e63677c9ef8ee42c123d0c9367900994c894dac6455c775c93d51afc38d30ea431a76178a0e73e28b2586e508498398ff7ff82d659af1a9cfe1862579dc874af7ecae79d7345adebbcf1c216bbf3426908d24bf65378e72c9b58e864b48275811a2afae0eb3499273f088e749ea27235405c1401f836e499a4520ae74f54c814362b49fcd46b82570b99205d199e0961b4276e87ea704ce62a4b31dada0d767776403dabb8b23e370341e63e562b8aabfc04f8acf346da5a5635ede032fa97626d6a0db809fb7cf956c43ebdd8e3a3d336dba87646b5059883940b150bebe1ecc15036f86ac2bb79b5bc4e7dac4193413b1ce4d6690db03698cfb1518bc741e5093c72fbd99b057229fb061769f0db94cb3dbefc7430b266b102929aa1141435f85492c08ffa5d6db0e5e0b234db41ed3ad6898b6273c217bb92fe822b5c7c81aa2fab1f7bfb8617f8ed0af2ce4eb5bf3f97e17a16afa6aca71a91f3626e7fd86a370bb248ad24107114f0daf8884cccba682cebdde265109cd8bbe11c43389e0af2de4c738c085b68416b44bc77c90c95b12d9f5631e10b3f20f9a8026994eb7b9323922ac3890b68d5a18407b767a49ebafe2396c2c60622b075eacc4c9fecc0a803d43a97129c049d00e459813ef417546009b6ac403f39d8c0c98b9840c44474a34ecb1f142406efc7d7c8759269db7a8fd353747b84d2b618319bbbc0e703ba5509ab027a696ef5923ff135b9df806783f8195550d52b3208ba70bdc853cb53da79135cdf8e9adcd2cb227af9f26817498941d1e269e70e8c38fa81e4c18a745d8565953c70d494b5cf1f2383c3fb5f8be4877bf382381567fc66f7f18528b768faaa16dcc47c13f97767de2503f62a717d3cc7bfa4e5067787788ef2e5818cd9a0395282a3c0b0dac0af3b351b6017e6de77a38aac01d5c9555ed1908caef09f4b5804c3a0363ba26a3ee83bdf062354a071a03538bc4d3fd36d33961f9be96468d1b23b779f67d59fe2ede9894a0f8fd20fe4fb67de9c0353d7a5351dfd25b49441b224047344d3d76c7dddb03f5e01c202aacbabd09ab7bb0ed61eb20cd5886b84a62df2b6b0c8c3f1bfc2fde2c454ab834bcd8df095a4a037e48d30350fae63ea121b3e36a779d5bd50dee036a637c570d9033e43280f6bc4160eed728eb5474e5751a3640a01bd8ad2d00dceac1ab870654a6f92b0d62a9affcd54747be298fefba65f2199c3d69cff172bae030075d9028a3c006a2065bf7559f737be5f59ee09d70b5fd712d5b3348db13852020f074334ead303e683f94515a014aac6bafa0046c88dd4a5307ae2e42e63663cdae9896e4134b509e28ba2994f03fead8b4be825863a13e9d2312a56064cb50e59d685469a4a72f08a32370a1bfb52a82c20bd9600eb82987d75044faaedce92f9205638854f7ed92bcdc1c379e1a5e31488fc213f42b1753e669d4e0995eee741ff9abb116b223dfc5aed8c921a76cc2506c79a72b504907139c85bcb9a310e578254ce86c62b59929e3a75c46835045c2483f78b3485e5cc8a21ca171e423a318b2d3e76f4e75cd56333640ecaecf7fdd3f00dbb482f737ec8d2250b237f2a4a1ac2b9c33778c7fe54f0cf905aeb7c68410c292a383bb2e5b7e8f8f92df4a56655a394e05469608259a462bc31e26cac2d48132143449fece42fc045e5773f6ecfd396d6f20251506389a3f1a580958e3b3ecf58f775f50152e8c1d5693d3cae79c079b997311c8359348d4efd444ecf477ebd1c13a9077732f3e4976c4e2e993689151aef76aced6a40648e8c7a8ff5fa5e98dee00bc76b6e48f0623c0c15d5314773e2de073136d128586159e3856bcefc29cfd2521727985d0d4ecc27ec4dc76053c676ac3950a53679d4f236e622111d2e559d839e3d10e9a974e0f27b52102b38d564da10d8617bb5788da7101d434f57bad05863a172aa3c725771fe7b819d8ffa0c6821d545b9cbb0243e89e9a15d07923c4b553b61100c26f3ad3ac34621aa59d8b00ebd70a806e841a99a884ca6dd1cae2a115e8af305ce371c32ebe74a034161051a112330e90c052c96cc00409e5170f8fe418d5c0bc8e17e0da63bf0697b6f22462810c0a7da7fa5a427ba62319de6da1d2f31a5105b8e8bfcf4e6144d08d76cd592e20e56ce683be993f65b97e4ff4deade4d2ca8625b25434901fef27ec57416f88b212485aa6fae6e0b203af95cff877c0b2793ed4883250646332691a7ede420528c9f71f216115e719a1413bd51b6bd59096dd98348106ca9d7cf0210af3df9ccd250be97ad99c5e8b83bd69700dc57d45050769a689fc595ae0b7861d1d762d2295f4aa58005f391920b8172c9d83a530987e0464c2ec2573d241b472dd901a95053bf1fe1169ca06888fee6fa5193fa37151b4e4062218b63759f9e8dc277261b2cf34d8e9043a8e92a1fc2e00ba8bb2bca1c3587def37d7bf0bfd0545478160a616aaacc3a7c840bcd4a6e4f6c32b48b7f26cd336ec6122ef3637ba5377e2fda82348cc32e928f22c05529857a5fe996fc1d039376bfb4c82989a50a740fc79abd35663b1bef4dd20e45eb0928676f3d43b5765957f88e6f039989c29277ec58b4fe6d460d3392f050749db08f45dfc2463f3edfe0b65eeea6f74c0a08c66eae43ca2185da18c2ab12609f9a07773e6746541464088f3102ba6b09d7892292a4f1f295b25a54751906a1ccf3411b51af94b4bed8812fdc924f0eec65fe6a5225fa79ec9af8ab93f46cb7090cdfee7bbb241e0e412776dfd4bf71010c4008061def2fee0332e775e2ce5f","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"0de148e927381e13cafab46e97f94a3c"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
