<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"c30a823e21d9e34bf49813ce58f3271017087708cbf04f47c666ba9e16be19ceb0e8f2fa3b36053b69ed039eb991a3d0df4d06c27ed92d0929e34de631bc6f8dd992490beac00f76acfc70c4f7b358870091de06da6d6cf8867f564455a3b92ea57213a586b737eb2e414786c9d226a86d66e6c0c923ef5dc4f7029fb57d05292e38701b33aaa1eacfe602c72d9d82b49542510760949a1c7a2f1ffb208d45b993f66568f68bbc410a337461c3a37ff149ba74865f39df593f06d08c3ce6572df28910e7d27aa2c153ecf56df1d338872fb9dd419b2557aa15bc08963bcb4ec226ecdb3519676025d280fcb631b9a3bc9a7233ff6d843df201f40e4b46e4960eaeb75ae5015d14fc444352cb947ddaf4d4396f46372f14888729a042ba7cec54bb8698b24c012b8f4d80ea1db01811ea7994670984b6c6d67d80f4ea339fb08747e044e09bb35e933e64774739da526a4bb6e32c01ec2eb6928f415c4abd49c36b5dd7ed8380ff330cf4c4550ad6d7009cdd324d66b875ffa361b21f270d1122336115773c49bcd650d2d816fe1ba4a4843ef0f431a2c8ae7627f6d406486db96082851339af9b9063ce5bd4971f1c385861c2c303d322ad28aa6a7063a9a81c20104afc2f005cae60300b86c01e439b30dccea5b6eb1faccaf479695fd389a1b03043ee56eb528fb6335191e8eac1f7415814d4201c461661aca5caececd2d327468d802244362a9708d730f6183b583496f0264cf69c8f27d135a07be567306c1cda37f33e7716e3750df06b3c8143e9a776da434ebffd6010953808db6d6bc81accb2a2f78c7c58a176d74742265411d2f034e3fd426394454539c5dd8fdf6bf404e75b798d953b070e6d338f96fa92f5db0c7d6d8ff16b264c363627495064da01f5ea69b0d067626f144d5f9fd14646ebbdd0fdca231c63f4d1af00cdd7c94d0f6c57350d8228e543cda3f545663d833c06fcd1a5d6c987de0871b3eaa5d47b082f0b9197f611d2bcadfe8a9ce454c2e917288b216bff821e9ee32cc3e58825e9afe339630d1fed0dc0bcdff36abdce6d714ddf9bcf64de0429f6a546413ac278329a8e36fb1575875d11a2d360714245dd3dea999cf721fda1808dde6a63f969eaba0d2dbdd0c3ffad5cc8eb8aca6220ead55305e46588b9f11bd5366b3923d087bde5be45f2fdea8b42860c443136af9553ec23b29beb3760ecc900d4b31179c7734197231be00f9426c3dbada91939b3c1d87e33b191ac3342e9077e003af6c0c7d6ec57a6819745fc2ca0be61ee5f8d60917a80f2b3f13db2e14bf777bb40ac77c687a5b7bcbe64a6e7fe02a0392b9919bd7a1a9eb36500d476435d33a99c59b7007331855e65a4fa94176f31b5448ce3b359f8916db38e261baf87d86ce1cf80e7f41257a6761b1da1afc627f468a52eb96d4cf3afed7053aae0d38cc767a13c515cff0d6e695cbb08c7d93a0973588ce5cf13cefa388344fc877a57ab76f480c00623452f74e200c8197f6ab596ddc83f11962ccfbaf6960565092290a14ecff13808a99ed92e9d48a2c668448b100841fd15b8788c6a660fce55e0996a768615526c9fbbaa32ca193dd072584acec1fd1850e74e712733caa11f5a9d124f04493450928091ef09a26d54574f17bd90aa5364af40356f0f1643557c196b0dfbd878f897b890dbcd02bc4e101fbde1ac35b6c9b4dcca727d0e3008fc6669837e87d74b1d7223955f812d536eb59dfe65986fd37733de2fdc29e48bf983dfd39223f88ac18ed660472cd2359096909d7877ec3426ca705d8c718c8f42fb834244bc6807be9c21f2c96cb229c564b8c1375d42a611274ef2013050852094f1d0763d3ca54abed4a13892b8d44de4163ff7a79b643ab06faae09ba241e6df83e6a50ddb7795b8e15205ca70cac9362c2f8ef0bace4045ca4bf104e0feff6b2183042cfdec3b94aefc22d5d67bcf3fbf0a6b82dcea90d114129976e3fbe705bb8d78f4e185765c0b09bff1a96dd8f57925c20bb2ba0044b227f41d9458c690a3a610c129dc04be80e5f9623b0e5b8bb960c6c759da8acb8cb94d358758cd1d0d5af0118fb6bd3bd135f2a6e77a42e2d000f42659c36d4406590b3b1d79134ef40b128d3b431827a4fb3e857ff2c06f53d981e6b53ad80de95b46db95651dbd4f26c747b9992d84d34663a975f5571f6cdf0aa88f38103bf0352aeebd57a394af50ebae960ea847d276f707d048f6e9de1201d8a7b747b94749b82037a346936167550469f32274297870b0a9a2bf0d3dff204bd4f4d45187cd7783de70bc37b81ea57a386c9788f48577cc9263940785fcb26d3b3a05fd063da76bb3bd686e0e533e5d39ab69ff8e01daae63fc1ec28284e3398d285c298577f49445a6001733062a64540124e36844950d7417a45ff65d2a9d811d5943fb2906753d337e08114cf1defac4bc1a68f1e6cb21304a578178a0f47203bb18f5bf25262a033a36bd0f2ed8ed924e7e424980a774193477bd646051fdd74e6c5bb93e97b28ae625b83634ce470225b1ae6577b39c1ee5451ef6b77562e91a24cd2749dc75fac9f29e5c2fd46174c27603800bbb9a94bd7d9b3ccccc2a4f770cccfbd130cac75a3f214e042119912972cd3e1549a964ccd9c4edf2646f18eaf5c82b31e966c85e36503283119d3c722ceabe22d5c23fa835e7f57fce22e50ebf217cef2cda24bf579c2a0c68ac2a14ca6a3737ec184bddfa17d1c071583362d5f7c7c36d663b3e36525db5a1c4e45821b7d436e08377236d1ee514604cb79ee2d31af4dcdabc4c8dfe2edde4c808ed733d3095479b02059f58a3e381be7645e16d79a4f938a747cd3bbb9b56a7ede40060aeb42cf0ba13e63901b7a624f94a0a68bb8adb51f7b164ad6eb9fbf2982575a046ab758c2dc6cfaf2c089815aa138e44ce1ea872b05afa20af6bbb442b2043c58b0370acafff0600ca0c2ec78410c851be618925ed21295550d25fcf076b3be6cd0f08c3fde9eb99fc29a37ae721f27fd1e2f8c64e22cab74d7f5874d7812e5da3311d183147a4b583aed296df9e451b1ae58736247012c981ee0d379b39c23eed5cd4a6955bca8a65f02145e9873039e749a1e6eacc91ea9b4e9fc6eac76cbe4d317d7d908e95de98e81ec1e76d541eef12088ea3947913f2fa597a93bc868831db175af4c5247d704a86ce6e10c8348d080e829f8452c1a0de58e12ed119775898ea5d1d99b388564fa1abbd853eb7bde1e9c72ed76290b766f934095fadf3cba94da63e6375b3c89a183d52c6ae2fea16bab9b25210d95fd7b50dafe2336b110663f8c429a989cd6060618996ca28b3a19b55865f806aad01e7b663a757a603c02d57b8ca50bc134489c9ceb5aafe04753a25543497136d9f5d697d831e59dd5556c010085866ffb360a8278bb1d7a0b5b6741a50a0eea90dd0c897d5eaa063a5626c405be21232b0e60a6b7109a245749f7bfc3bad968126ef67a61f7876d97264230dfa24bed33ab9ac8628df53490f050038f96b2ca60bc197ebf1885de0d2308025478174980025011efcf6b938846cc067ae9c531d87f90f3e4e7f86151084f66ced510b96d61f7e07fdb3a00c6eb0785226cd86ae175ce41721f9c29df4e6b9222c3e1436701c9db1385354f63a00597098796a47fa4bb5129da33ee52b6b3075bd1cf6baea559ae15a1d83c68ce6c0a3bab88404d5d5a79b421fba545e4369c35cb4a5bb4598190bbc66e35533ea47e3d8875587f3d7e721128acb737f00cb1be213c64adc9abb55fbe28c3e01c0f7b8efd7cd06e6ffffa8e18ad1cc057db4ad3e3f5a1250dcd08e5fc8c21169062d067995c566b30a8f06b143eec3fbd0e282703b9ea2454d9c9b456b41329bd51952ea6269194f86449c612ae316edb4727852fda52f706c5f20321f6154d2ce783efc49a938d36de6f4c9ce8dead19fd5ac3cd6d631aa116e1d3718c72ad6a270ed046cc6856b5e502ffb493df721a6c52f006e3b4d104bf71aaaa90862001c21c8b30a6fc85d81c278169b2d8e13a918bb57845db33fc713ff4a5f5f29c0a78d8b97b17a21788928f3458cf6ad564a3ac80b97de12a75ec9dfe3a80e186ef918e2611c91849dc10ed113edb5f3ea18e8bd09b466e543df729cf53c2e7a88f6ade689955c0dc49e3c4a87463a8df1c7894d694d4681e29e745390de2b13f9bdbe885e2694df421251a3143a20c2cf3f09b79a85a44d9e63c038d0b9ad6680505fda870a0e0cdaccf599c74dedaa4426798c161f5692c745bf5aadbc18ed156f6eb26070efbd6c3f884d15d6812ce1c8e1b337650878ed3f40bb64408b1748c091257f98280055b367c356384abda8eb38ed676fa8ab63a9ac78da393494e8202f30f6af75948a45876f6c889c32f1ebe6bad12fc7c439cb077e20f7df7a0a4449e3eb507a931665edeafc4e0d55c24213acf16c1b17d69b328caa186052798f6e3723d424f24d513a16692318f8f762dc12741661d140eb820b723b834661533d00e285c1279c66ffd313811059f737abff11a3b2e5b6f7ef0584315ab5b33d90d3d4537db669d4a8641e1c6951125588680a83400c0fcacab33d5f3406cfdfabf748d3ab64760f71b67d08fa03868ef6985a0cdb785335f4c178d7677b8471a2462066b6925c5566668213ee9d6fb9c631ffba3d03439ef805fa6c6628ca11466ead4fff4c7ba7dcf4a487286e47e38084918c5900030ba362582eab7211fee5d86cef3873aa33155c5c8fe7d5a0a2068ef179d3174c38552b228aee8f02d3edad44dad89517c3fbec76b105111b3578c72fb44848f7a2ee3fd5f6403a41f883f7233e7dd1aacc0a6d4f852a34626ae0acf7277b8293b95e23281dd9fe45b90e8ba67e904de601eaad4e71976b66554103f2284d927baf60a12fc00dd9b3ba71c4826f34d85f51ded177f28b113501dca2c56eab49b37d8db52c910dff9d006cd888464a56b545a027af05876f5fcb45e47d6df27d5fa6f88352b364e256bc22cd2695b9dd8cc9e19643c1228f4e2c88f0793be2dd846942a0e28f7744dc8fd675b0df8baefe9a8fe03257fb856755b298832de761648d381d22bff553702cc0e8d85960d0b78721e96a5b2135f5d0ea680f96fec0d856672482add58d6e56b982e467537c9d6ec3a179508874b8bbd80086091ab7be9873e1020e019865c3432c5b44f375a1f26a146086e5378b327b68fa5778c84f5eff5e4d870f0b96a163b2a8ff3a278d4433a5d2e6a19f98657e7ae2d07310a5e0045dedc953a1ead66a02bc61dfe11405d82b04e3a66db6ebdf7079e1c439fa2f67a0093a5182a4bc261cd379fdf5422a325b19d25c0e025d4d77ab4e84d290816ea0f56572aaa71969a5a2cee60fda2f87cda9be4e8e37b39c2f42ec8c408ccdf5c058a36e65a4ceaa98aed2caeb19d7519724ab11f86deeedb96146bcdf6edaaaf732e79580ed181fdd77514b645227a09c73ab8be607fe13b6efc6ebb2b395faa41da10af637fba362d2089e1b516813c207f904a8ed31f82eb2de4289ed7202f5b495b6ce5caef8423cb6b69c5dac7d534529b5c4c61f27d36de15b794b096dc722ca10bdcbaec6964692802a75fa0c388daff89c092413da62cc624737b10dc90b2bed2a1898d823995b02506d7a8c0d3b3b8aa132ec052919103766cac8c6e3099bcc02fbb80e99189ef4c15c1ef8adba4c73ef412faba6706c2788a9fc84b6b84f06eaf3da2daef956b52eb00ec4fa8842999778c64cae320bbee73a2c1a251f0f6b5aa8260a17b5d76c0bff3bf07e7a955d12283b7f7e0b081d47cb8dfd9ed95732e1c095e02825657d9e4f991f0d6d00fe1b5cde2dabd9afd9931ad15186a0d486516f4521e88f7436a3773ed85576bfac36fab2e3ec10d142d85054ff4e7529ab0e6ddfc15846ee72536f605fb0da9301775530468cb3275626110e6d6f180de2cf9a007dce916e408fda3550952d2882f1676f8cf555421f81f0bc3f52969cb255ca812a5e819543c56794d68fd329fe6a014d0c2c9ffb11e42bf46feaeada39ec5d05ad88566895b43d74e479264a49602e0d59bee66ea9801ef1e62130c13902ba5a0b3e77e5ea52ecc976f85d545876761254e8e037add109c94cb5ac5be3a442f7002557e1c9382bfe227e4d5b396e27f7e33a453c561af89e0bcf0ded1a4b80857235d56766ae12ba2a195a7c5924d1687e945af4bf71a7b2dd1d8f0a211eaa9bd91a29cd26c64e80bc6bd516ebf2a7f1b3c7043412010fd71ed1544536e268be1f8242b5329f8fc9671bd0615cdee0a3a0d9c363e91f7e485daedd884a7b344cacda3943d226168690d0fd687e28df485a6b1c8694223942adfe1f075b45a8785dc01d2326a567786d2c3f2e9b2e4b55a1343ab3a3e17e6486e0d7df9d332917a9692734333bbb3c9b3ced35517c352792de88022413dacbaaf98c7443aedd8ce76279b22a871adf3c1027c0b9b7a93e6b00992dcf4b1aa600be94c7b7e0a19deee41b49c229678c4607f5d4cad2f0c6fee4a8dd0d13b6aeb95300a3de6e664485c34d232e4fdfca8ee01e9fc9c9724856af9d8cd972fec32476de62055a09463c9049416908461cd16aafd9d27a6956539f2e11ef7cecf7e8c7a4e6d990d8d3079dd3d355bcce511f02390bbbf03ce26813f66966f76242810064063a0a1d3015843bedc517f6d1a1ff8042accf787367ba2194c5211b0ea67d0cd7a3b0746470c71395f0c3142d6d91e564977ae98568fa58b0690af3bdf1a8d2efa2e06ba5f7ead853ef167bf69890da4c12787aecbd4f3132200907db914c8b94166c2ae6eb9dd3bee7afb598685abe85a9a24f43a839750a3561c50667f4d4f80b84c616f55f84526f45fd71b2422bc0da8078f56562824aa0d0ea68230aa2cf33199cfcd8ebc10094b5331a974cf24f33c61c61077d3379671a315d2db281af880790734c12b19920287f2b6e7ef76a28f1f949fba1b6abbc0de3e537b729984d0f12d6067ffdd2dbc0f41f83ab1e246a8734d847a1c3880d287863fa3373c62b0d9513900dfa2372769f7892aea8c8ae5825205c18c37231d28ae985aac7eb92633e6bffe2b4f23654f870e505b6fa46e6131d6cffa7386432aceb97eb4b1683e9f87ff846bd23990a39a0a290d827bb0495b298deaa4426af4f6aee19e76069a32565fdd8ac4e490e19a63bf228cf122079209fcafb29a2ebbc9a46d76e4b6be3ff5ed67f000ca07926973947f023ec25f91f8893766b65eac9a267f482c2c1834dc1267405e5f2debd1914717856f4b84c9ceeeb77402953753cf17f2e5d5dc9528c0260d29ea6090fefc1db0d516c53e473bec604f38e8271a04d3b77dd775978b7a5199c3ea4d2609dfdf4f13e2bf6eb5edcfd49db1481073b720ad955e780fff2172b2e1b246b7abb8b0bff555aea973ed09de25f5c8a4d85522e9aadea7c4dea2543b717dceca5028533230e1661d4b09c024702f5b09f1bbc52497e96c17e3e199b8947335c77cf95a3f19528407487f182824c8e22422de15f750fe656a8a5f671403ec4efe3611e086d52970cc77b90b8e044ad7bb60f699c0c2b3530344f29dc7383ec134e20821037505af4e505c5e3e648c42366e4b1c2de12c08674b62275c95a27eb6349252fbd8d599fdd818113f0d1486d5a2854c0f01788787d154568d821e842f896db06d11464d593cd7313bb64eafd7c2a609e42e65272c4438026d21fa52ea2e6dfc57687d45ba05214d1f165fb72039d42d36aaf1c89b6f1a6f21a20811435231e5a12260bb0d2a378f6ca7c25408b85afac174f945dc94d356fd7d0ba8b32f259a44c7e2d78b6d0e6df7c3d80825d7de1eeb3bb18a4cae1278e4010906df340e0941cdf9005d50d0681e9b8b902d5e89fb4fab3125ec0b780c51297bf9f217a759a735686eb5f7075769bfe7539f096db2c578b9a5ad0b85bf4c2a1aeddb6566a7a4dd3b0a419a87d24dd3b7ac2014c471c1bf204a4629d2751a4fe12d4f691902565b384a7ab3b573ad9283085feeaf7fde2eba77def1f72119b34dfdc1266fdf5de10a81205f34257f8ee3debd569e264d7ad94c840611c783b80cfc3be1de18f3bf3eeee64dffc7b96c83d6b7f936aa1ac34d07346350e4b606d5b0ff4e0c14dbec85ce1d35689af100821877fd7d149aeee2e93756da0a062d3b730d88b516f452d8b9e48bf9da422f28e61bea880fd0f0cfc1d40b483acff483327b7d4a2509464ab80cd1ce5e448f8d1e0982acab77038e7566bebc1e28e0c6d56829c6521e056a0c8639010e35a216ce184b07bcc8e9160a52bf17efade9102f0bd882311c9a4e4525f0f0a8370035dc94c7ab5a8fb8e9e376766b5a501a798348ca37165613b9c9592800e6e1e8ca005896dbd57cc2ee28fe1ee6dc0048d24e306c01447ed06585c0cb821ae0e92d1ffd9e5ec415df8b29a0f17e8d81afc58905319024a1e2c5a6183aaa85a2615990e9bebf7f1cbb38b8986f8ba3ea9f386bc32880d859e554ac038ca9ed878ed9f26b5ce192dacb37fe7fa2961766f99b51aef8191af7bdc4410227cf2ef6e6fe27662e13ced772434e588ddb044a9766808ea0d1c33b3efe028c25786d5c4b5dd6a66794cc5536f20614980bbd894abed08803a14df843e7e53730e2858716086593bb14fe611a9bf671da68766162a12741043a7f5c49bd9fe9f9837743c684b3be82aa35074ebb1bf3d294134fb43f8bb7d7e7fcfa0780e6c234632efa326bc50960e256b14015824be92c433651b8ea5436beb13c92704e90066fde4cb6d53cd64e71e7a70703e809fa10f87f2cac5d70b2243d8cffb095f11fdab9c65ca8c1ed4ef4acacb0395e082e4b05b2f9000eebab7ecf081d3e0706fb811082b2bb3b0541c38637e08e698f095021627850dbef6dcbee2f1f3ffc6fc8017e2673cffba9e1a29d14316458cd09744a303188c97fdb17aef0b68efd5f29180cc0f6db3c116388d89ca59af6d2af0f6bd5aded0479ef234621477cfa8aee1b58353673708a5b5b6980d52ff0ccb016ae4b92d366498bc41417d25eebb6432d74177077c8d7901e2a7f3a01f5c77191246714c33a9d37ecdcc1845dfab5a068ad45d79cb515bf94eb84808f7e717007b09ddfcb766c69779cdab738587573745eb9db6d5ad2045c1a86a6d6f7fdd44a3a92196b31aeeddf5780f32b1e637f29f6a6f6d987e11f2d3e54ca1311b44b1f17b21a4aff86cda4ea3871f2ff2393b3b0a33567dd5309d6b2d388097ccd529ca0049a96c48ed5a39412bf873fbab7a4f3b3285060609c0b9159e67ca536ce2a1bad4dac9009a090b5dbe39ce86a4fb151468ed36a627e912c375ef7caa0518bc85482168d250ceed9e76a21afc0a0e295041871e8d8838c826118891059725061d5c602e88fa4bdcaa5574318159fcb52ecdd99bc9a121e93685d244b3c4ea9b67d8ff334c4f799f8ed94eb4959d3548bf8b969b3070cc5372b194d8a450b3af2ef08bde8dbcb3c46dd01efce8320461cd3be8cfc168ae748d124beefd7e19cab242bbd944906cdcc5ce7784d1de26d6e5d60583f93d8efb66a6ef4f4f8bfeac584a16e68e9d296a2533286c73eb42efb3d6a0ece504b7a811acbd5b776656676b084ecbe191dd0a5836e8f0a57c111db76a8dbff368965717db0cd6e0534d7aab268300e47024bb8ac8cb05924df23f623a7095a9526fed446150618eedc044347f4764aeb892c716445b15156bd1e2818fc93d50cbea9ce3c5f7fcc5184808e878cd2c05130afedca46877765ea543be72cde69648e6a0b895c5dacd329b662814b22f13d9f65e86ffc3d6d012adc8d394f33490c37afd9eaa0ca5588ba98e3a5022c952df63bc9216b2bda0bd8e40d117aba5c5020b873316d3213535151a6b0ee9ba0a18df528d99be114f4ae24538478d4bf0a1776d42edb07e79c990406d2e4031b92893daf7973937acf74e714c96ae9c1a95d6c320b878df6f2f3c571af331317dd00906e9c3014634c05f5c01862e9ca0ce8568897b20a5a77a8e4dab988cb9506bc53a9881e49826fe86916afe2e2cb517640c9808a22bf65e6c740837a94a4567a86fdab2cbf363a1382308fd6c1086117f847c83b11632c82d7e44ef23ce218670e00ab667bcf38913fbb0afbb858a057946089dbe14a6675a6d78453a4441abf55cdb6d109cffd21b9a14bcc570c08de704ad705efb9aacf321f5608f52b4bb56f464ada2af750bb8a2a9efa053cc71dfdcec4807174deb92549fd3473b66dfed2a2d5a2bb62fac69d90dca84f8759fbcdb28ed391853f40be744523d6e2a9956ac30fc5c44c46710fc9514e74f01964298d0e0a61b95d2b193a84ae5cff7045ce0a3cf6e37f77e395a9b44b0c3999599c90140ce7ad45f891046866ccb011a6417b83305c25c626d017b689a0c707f714ba3bff5535028445a94063bcf2cc5ed8b5fca26095af74d123b496937ed394328699f0ef4d7e3e8b873a7d363cdbfe20148b036517a9ce984d61d0959bcd41541495dfebcda9a072ab9cbe8e7bfb624ae6b999dd6554f2f74fb76dd51006dc43b633556b269b13cc359f903eddd60a56e17fbff8a42bf0eaab8b82e40a9751b2168aebd6077a54e5f2b2d92e5d429096c167dbadc519fb5229ef533ca6a68fd49bb78fbfe43ed475d123ea19b878a84d82841bb7856d1d8c2852dcf31fc0caf294e35ab6c55736716e5790d198674d57fa446a35636c967c8207f5090a769b793c26ac6eb70a84d071eab85e2fe69b2f1e676737505f692a76d8ee0453f625477b1dcb5724f28a4b118ec4301290988b7c94c71c3a2a5bacbae6b3f6ef0ec2f260f556b921e5dfc7cd74a7b4ab15a052f759d352b84ae5d9d2fb0389da971d8eb49af0efec7bda3fcf90bf748f442445bca7b13e512e620377b907dcd8bf1dc46de9fad1c333c21ed806a03aeaacc7841df862d61da8080b70b53eb80fb81adeeb5e987166606e026e449e7ee6bea7cae02d75643f65c3cde0b3ffd059d06ab1dc402c81ca94d01867883d1d219194384ae17ec2228a3dc9bb12abe442e086d035c236190b7c3d176ceb6471c45a9d9fdbe3d2ed4a002a6564c237a59ed33baaa98f8ea4455678ae4a78ecb2b7056c4528393b8d9a1e05a82bceb3238ee07ea4694b6443326609a89faf195629695baf6f0cec86791372c14717ff1be7bc2a144d32ecb3d45ea565285146c395ce5f490cf23fc51de1c719788dd609d43f10bb7eb10f851cdeefa6181f89b7a9988b2496bc3d75fa9b251fc5b813d790cd59430f59e904e6e964dd2b41f538da3931c94c3fec144ff5b5c5f648b7848a541ee095b4fd490de2d0f2435e812822dcf7aea31f2c60fef0ab359bff91b059a0f768ebcee98ffac8aefc0fc1c16026feeeb612deabbb4db16c55c54232df9144bf2dd5e617c21db986d815d9374c3ee3602e4b6f9efee275523a86430922fc3fa421e241c2fe09bec960f3dee3d51695a826b76bebc53e567f3f586b2b4d143692e30752fc80c100c0cef7ea79e9d3d89ae98091a4c92faa8cb80ad218b8200fab552eaa2f198bb42fe9563cb0efba95df2ae2e2e4bad14a28320dc6e21712b3b34e2941b4f11f2ac7f1ddb6cda9cd84de551421b393510e84d827c277d99da066a20b270e7f58a4419c7207c46589cb800da79459b557fb37ac34070e7af9c84159faa25415790cde036e26b92dc56ce91b58a19289677fda3f12a549be494e9ba3239ab60f2c90c207a04bdcbbfd3ce90c834c5748708c9bc5528bef06bf6b6ce8c0339cd1f8ed455741ec4df3bb95e9b6e2f83a071edefec51bdea1c65615ed4245e165cc661a53f022280bec515882754609c17a15c9fafb6e27f94b43809f9bae841dfcbc3dc976b2702693055e550c2a3745ab7e0cb09516d29ef568610ee1b5e2539653526392e69ecbb365167d7d62c39e7fcce7dadf24bcfd195435fb9117967f080205009204bca9d2e604f94af4f1a3d9f0762758abf1c5743fa60306eed0002ac21a50afdb96ad565202eeece0cfb7d7b25b3733be6a92755a55be0b150c1edd7a2bfb62a890da7a6f061210a4bda933d4653f8d2fa2450df8759c9875b76ab2a37f5f720b6b43a0a4d96d3753a2939308524a56633c680c8673e70bdb6eea04bd18342c614ea8aab107a69b59ed271d0a491201bd62bec5491261676904e075893c9a2d2de1894356a947bcf2a189a55f49f02536b4e274cb42ba5b593397a38213550f6bafa89514ab59519ca375c7818f94cdcec6954d718ecf3a01564ceed737f13ac25ce33a35c0b7831ee7df550ff31adf1821de7470b97e98aa850041943d2787fecb0701e52aa12b85e1a6cfc414e585dc18a61370676d54b1e4754387c620d20459c5a2198472bf01d699052a568642ba99b50893a1ec825b56f44ecf4bf62569e556fc81ac4ae8338a50509ceb5680b2c1c9b2a42ac8f8e7d5f2f4432a8131cfa9d92b3b90a85191c7f389dbf53e8932c481d04e3779575d5bd443880b48ad4f2ca794a707a04c323c0acd5fdfef86236233e92f4c297532d5b36c67be01fb1ce75f63d6710c441e1077957f561f19de85038e10278e70c5ede812ff610e7ac9cbf5f6f915729426e541feae926e34334626c54d5b1b54525255f5a53662926832d1c0d2a0a222740da5caedd84ed88d4af78eb1fa9c53007e3526ac8ee4bdda50bf82ddf1deaedd9b5080d8e6b2e70ae4d9f5bd254dfb14a5c73f25bb0986e6c2dd9d266a55d2c47d7bc7279edff0b1bcf4f98ba4b16a08217846833c6320775e3afe223edf7b9a377f929b88c7124acac186f17f4763f25c19311b1e00ae4f61321bd1ecdd2f3cf5882a8cfceae94bc40ea4e384ed402be6e4c9b414b25046b92c1dfe665ebf872aa5ec6be6af2afef7b8b36da65491ccab7de7cbeef6047d9d12d57f93ee040cf535f3ceaf4bd6db94a0a32d98648095e71f26956a1f7564fc822d9a07085149f6fdc9d3c8f8e186996bf2385f626f633b78ede0183c926a8e9647f4ae2bdd33dcf4b332851fa5d2840e2663a0461bc58a2d8ef743cfa1c500fa7afdf137a047d93449be2c8d29db3840fc3a05f4b3abe1005a572cd2d5519c16f78d7c979f7fcd0825aac36ffaa70e29b830d64c4f5e060ebdf78ceac7fce89af6d443011c06e6ad115c660941888e6ce4be3a11a81f37f8c4066c3c5af0b9decc8bb17f9dc7107fb806abda6c217a7ea1cd24cac00cfa312c088f94c063a18f33eb94ea229f5201116976e5d3286e13a2c2aa8e3f21229bd4260f2714543d8e95431855b70cc10a7a82b1c650e6dd0c6600e4f96aa7e02f6066022f83749467d599b4db646cf0d79474e882e7b8cea3c747583e043673232dd409c4a43e8b0a542f8a48cb70e40ed109f796cab25dd8bcd6263704a0d8d73cb902bc33f2453f12b5b5b61e56c773f52f61da6169984858632c654c1d252b207cb7deb7be4d4cc699dd9d5e507d68c8d24edfe66d2734bd9592896b51790b94e8223200937845fb605e0640c1ab3dda643bef96bd68684b5a9ae8dcbfe084bc8554061619300b03f0bd029460220f5d464ed27d88616ffde54e8ac989b1aec0da1e4a89e93970836a2397c345f717c53d816693e52aa2687bd8bf5b05246c16e2a57fadde3ef16e3100ecb2d9382b6754fb6a3d8c17b4dd7c2d0da3098f5dffe965897300a78b179725ebb308d4e14a7c2e562808a40337bc9a6db104e88a6de5c4e74b643ce7830d1829b5c064f3823ddb1d957bdad2bae078a95412910f5941ebae3c837e9c8f11cf4cb86b2dfa27a45a1942a1608322a65db3698372216c6734e2c18c01c4a56b1fce4da5c61c06278fffebf54295bc4397645dabca54f114382996249913331a97da0166c14983661f5b9cbb8e84036b6598c9836791ee155a007a2d4b558f04c8befe75fa62f35a7f8765f8ffc4cc7778a2a6430c7291af912c71ebdcd090d71a296515a8550b94f9a67440cf2780946e0323352efcd8fad3c2cf9e5cc9e63a67ab5313704ff37fe760ae73209b2462c03a3faa7fd631ec967088f4ba0de80365405f10c597cc008c42d06d675a3177637d26e744f0892a7d2f5b010df005324527ae6691c6d8a54046d5e8a33394bce2e7314af5958673da0eb66014cc2aaee6d621fa77c81f34a8831a2130925eaae7cb63936303a40321a15bd391973fcda3c3771b5b77e8195bc7d94a89bd47e93b82b7da0c10c92316d6f1a0646ad302f6d3d3da6fb63d5e5b9f0f102ff8775ddfc77ee8205ab6a70c1bdd1b44c5761d37e6e6e454a0701dd2ec113e369623458599587c924597f1a7ecfdbcbee4133a643b06bf9e6a7b0073cfa210d5b905e6bba24c90a0fafefa857a3fa3b1ee97bb4171a54774902c2a9783adf4b432aba4fa57f1635e01750fc8b92aa7b4629d06c8bc9ace82c68b2a7478a9246f6dbdf6f3226fdd48bbe3f6242219882a3a52fd9a430aabde48519256766fb29bade5e4a8f422f3775fb0965064638f8e8b1cc1e439f4797a328ff35dc71ddf4b67180ec38a9dfd46fc1e65f239bae6021331b3e8b5882c3657052ef379aadd5004ae806a91877d62951592a13fa5bb97dc0eaa858c5f4d267bcfab4622e8f7f8e60d2ddfbb33650dff172844a2aea1618ab2b76c0e1edb39b73d6cdc2840b982f5f994d30a804ca58d564c8778759968c66af267c1151f6d0b39a4bc1f75f39bb96b74863fb58ff0965a28927b0aff04a7b5c6a7c8aadc1830c028645578282bfe8c95b0b81cdf86511f06ace30b7c95570a285d72de093fa0d73abb1cc8fa56712aa990657e64651ceb9da55e1423a96cf7b66942951f4b9dcbeb52803052b03aa54cd29c94abfaca88813dfe3e531bd0bdd4a7487312d9bacdaa675a1a385c49bf43f4011ed03e902b77b4b633bfdd3344738b948d03a366edac6047f36007a8aa4de7843b23bbde0c7a12b92224b990c6e3c814e0dfc0d514a6a5442212f7fce5dbee52101dd95b1a692395702930cf4d4abc28c09829365af4ee672de1cecf771943bd6ea73545b95f06f39642e33f4d61725fa8269d850dfdd275e959d9a6a22e716d8b1bfcf06f45bcbbfe6a358162e50cf69ca5e2aea0585d4e0036b628c9fbdc6524061d3c836a58703aea585366df53b1c0df1e9cbb82a65fd57270186a62784db7a2cda8e60c73e6e42a5d5d53a17d96678a5e2b6198b6878ad5ef31c31579be23f97fb61335d821c951acbbff998c5db5219d382914ff2138829c4a4738094029aea4d17cef7178ef21626be03398c03e19a8f1c244391c54a8410dadf5228ab28d13ae9b0d7b8ab3d63418d03edb2f6dfcc930e1564ee14b57b5549afb41af6c9e253a240239d68fef2d0eb0421cc72cce2f25cb9159af0ae88bc036044c9eb49ae035161ab68478a7f2cb0e7472208acc6ead39e9a17e50ae8f78fdbdd8f87a35a7b9d67b8308f3ba3108ab82a115063e91e38dc7aef87a64d8edf106147075bd26f53a283279d53f7e80aabba65732bde6d3ecadcf50329a27f164f0a88aade1f3ab565215698f63492fe86b89bc0ecaf3b3459c586e7ce2465e8c49ad44f367b9d5f1c997241a954c5c1fa299c2bd610bde691c2279a31f8d251cef2c10f7fe9fa513a62c4c48164fa7b55901fdc4c7e2b5a3e75ee728b1928922819e46e975585e6013228257f2d8c655a7374051f0dc8f5ec5f1ccf519e2135ed93a3b50084c1f7df73df3fa9eba094f333b951f23c0a0ff41350767d6e77bad325c26c9bae775f652ef2d73a3f3cac1ced714ffd0bc70ba54ae8c2c84abd12f1e46f62699416d62d205799ebbb413387cc892e4d63e857ded9603667e2f174f4d75c8ead49a3e05b00996784b532421d6739fc170ca4a9f39740136cda0d44cff73e5c04619dad574b0a26299c543f43d1d91a295394a7e819a21f3b01829d91506f0887d025c0e8ee4066fa90bf1092ee064326ba11010b9fef46e2eb8321205278eac2648b2a66dd54187543993a92b5eebbaf8ba5cb6eb747c8b39b8bd3d16826f59fbc9e04d89bcd5cc26e220264217d49a615e0d5c9d890f82884810a62f424176060f8b71d832d6a7d5acb4c72ce97e4a1602c4b567191350929a591e52dfa6f9b095b9eba53420429d690265efc044b37bab1d19cae4eb9084365477d9eb10cc258f5e16a0fec3db1c3f0e882f5ff762d320ad32cb89f3d6bd00e9656686e34278d8b81e7587cec17846ff515d89953d5671539fd37e013e71486c3494b16cabddefd684d25ee04afcc793fed489d7786051e32de8119cde63acb50b6a5e746330a4c013f600a7c964808bc3bd8e0ee500d19251183ba87bd43575ce48573b90f1f17edaf783e2a54d6ce61649920c71c60f57cbc26235a6e90f16e23fe7f565ede70f816fbfc7f6b4fac9a204caada60f9f774aa77d10b297622a62c53336ed3ae50401511a3d71b8f5831d3dc46d81affc3bd29c8f788b62bfdcc6e594b75642bc795485287abf54e7ac0a28b621b45161ced4ed6d7e6da2bc5e3aec67e8d29dd5004adeb1aeaae34a71f60717c4bcff00c0a43691156b52818ea3d8d6e2a3e9ea45b62be60212eb690e387b7a9245b38381c1ca71745c4e7f07fb1771005fb4540c98d6435e5dab81aadec083a675c9918fe913b724c58294e8b2cfa143bf5e198e59e47fb5ff6b00204cdd4c176510e8057c3946c77e25d44da65281ec56d337724ffdcf85221786b751bae2f1a8aef489d78485ae32ac0bfb1254991f8cb4716ff313c0fe5c8fdb63a8297dff974a7a4185b6778b663a233242be555e05feb2e277d49802aae9d4d3fe9ce61e6d950109ddb91caa4fde58fc93987a44d7778a8ef7ec3080e381096df6793a8a7e6a6e1d809dafb0ff4cd4ca5ab2e7dda6c3e314bdc8e20fef0cb41b309ae91530dd481da9c62d25da487a40c68a1bb4ed3a27a436b019a4137c661171afef553cc5ac40d078171bc64ea729dfbdfda92d9e683968a10ff86c3cfcbc0ceb14e819c150550c5d5c68bfc79cfb93173fb4663c1dd652ec39d3b8c15bf5b0c63ae19901d7b3af0cb74b0dfbbaca1c0b0cf784f44ddf335007a2a18af75d6a1888080028a2af9a8dd0d62b6d2d89a2ed0ff3e5aa3c25b64c8d6f2340d012ac967a299254db35b5d22a992399dd6a70079c2e629615b66f66959c51d8f2e86d1d53bfd9d2de12dcdfae13680ed45472c85aff6b8b36bd8d54721adedb884e0e22c0bb4fe3520cc038800c8acd11fabd2a3093dc8ef2d7525e8d95698fb8d4ce9ae6511c6f6265f03c8f4f2fc429d11d66a50c8ff0e9342a42f10dd7c037250f13731fa7736d77b37b8d4644d424e67156d4e8be7551448b7f46bbf2cde4574f7bbeb08e103c0f57689f1999ececc98f4fed5c1e053cc2d6f1fa97c67800b93a2fc9ec9caa1707953320bdc66b22ed6db1931e7ad4a37a9a5d90c89ddb7ebeb33f589c4704b2ac9d42020694c5851a78ed0d131f94b5037e4c00752aa3ed73f0b071af30663b56717a1f153dedd00a81bc1b10d3fc1830862618764e69c9ea254f71de668a752ee06736716361bde1a94bff84684bd69f401cafaff46d71337ba140781048a46efb7f6a12e5d2f11f12f0fcd1cae494b592a134a610e8f29d717ea84be5d63d588971955ac40a22b890c51eeb1f170a466e698b7f88eaadb63959c923ce17ede374df2f86de3a495a9bda856d237c819efb00a6c215c29be3c5cd9faf2a5c6b907826a174d11615e17adf731ad248e35e213edd5f699ee56ce04e4b9698bc161b899606971abca2abbc947e80946d7c1124293d99d40d2749f997a0c7c7a1ca293de217bf10ba032969f525f02889608c54e875b1f16457712a5e1d81cce6b1abfa88b28250f506209361dd36388e365e9ca787fe50c32a3431106a8260128c6d1cb9bf7536619b53d7aac646213d0d1e37fabdf6a52569b4ad210ee4f1ef45ce7ff7905dad422c7d4b729a2a2adef35644340cec5e49a984aaaeb9f71bae8dd70d8224e2059fb59d00d7a09032948f7cdc4b15ee87edca39a6d275329189535496f8dc09a03119830d8c7f84c5e3d73f5d051e543aac69535cb18e939714b433dcff8f25cb09deae64fbfa3184e64a4f6784d62fc565dab35063f95628fbfb2154f14fa5381bcc686bd1ff3730ebb7bb858bea6645ce777164f176239f27cdcbd5a1cbea3584e77575da335a235f80c14f7d52c6120fb108371010cf36c0c9305a63ab4022906aab05f01f4367bbf00262a1e25e67910264f8ea0e5a96a2c12109eb170a36aa647a4b67edacc96bd59ba681808da3582a72edbb8f47728c26d95ecd35d03e3e9489ff3d86435daa68d17424db6ce973ab2a72da4ee689ffba21eb4a870176be4819d07d4e084b3642243ba01e746ef169586f858a03589428d49284ddef4e03c72e836e26ff3839218073432fd9bfec56d73a65d3398c7381521f8b5524b35cb2a0d6ce65c863041b66db1fdea00ffeed34ce9303c312eec880fcbe8f3af48b5929f6e25074e608a9c0500bbf0d623b110abefaa07c3c599a4f4d65e5680e008742420c80129aa38ad109d137dbdbcc26deed7775a3d940969248e76a8d59c42b6dbe4721df11bbce65006e4eb7b1abf49a12e4b791df3670c0ecc3713748202fcf9afefe36b9ca3519295a7857003dd","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"363fa839b5e8db9a458ba8453004e13a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
