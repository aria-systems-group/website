<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"1213fbe6399a30cfb5a4ed1d89db8c23535545f2e94466419d61e11566618250d11e765d1fb3e112e6711c0bb8e7a0ab6443a088dab6fb7c11b7dc931e4a9f4327d021d58ab16b81f6bf148b194b2336393719a56235c5a76db205ef4f39e51854a65995611f6a6ab3c5ee3ab6ef4d138d7b122f3184fd7ac0329aa61707fab0f288b63a47985e7624ae1bb015b97834e94e25267893e88bf6d0d528bbcee50a04391d7f714ab3b3895679931546965e349bc7af6a45dcee41c17a39015baf4de2aa3c35d2a78e0580fe2bafad18087791bee0fef71ee33392f97d405397429a24e9cb2f04681f9ec66212930e70c9b66bd406ef8a38f2f6c77dcec76d9767e9b989799d482e86b8e1da9eba3947b95066b1b03573363aeb1e7aff3a66648d584c8e210155be700d76a1096b1190ff36436d42a688d4af4e09112e73a39328f48517510e71c14da7ffb6f56de15f53a3f2a429995bc92f0299f01034845172dff3f443070c94951883ae2770aad7bdf28590ab830cf3cb4ecaebf5261260aed80cff975130ff61039cbf06423c479d7b28dac0225ed613c51d51c3b2f6ae5c8c29e776a93db65eb7d559cc353100324c23e37ba6f646a170531b8982f2961c8d8816ea0867e117f57af86c9c44e7b38e8279ee9dd1d5469894ca7fbc0b85f06dadfcd9acc8a6b09379353379e3e8f24a6a3162e8b66d9abe6ca6533d78a760b52e86530710c0ca0598e485a0e71c3032a14142e13ff228597ad74027ff5e76b3e9ba23f99ec136e05ed7b2a69b087c75df9008edcebd3b84df6bdab6360cabd73f082b4db4ada04aee89d021405337d37db9d5cba1e8d67adff047d9369084fc5323b5013d429db1f1bf6a5516df58dc91c56501562aadd56e13e185dd457d19fd2ffae86431ac10f2005a7aba53a3b93c0d4ef6e091e64fcbfc930c4d2ee41cadf11e2d283fd8a7151fcec5682821caf178d6f4dca78a53d2d0f00fa1e4f98da9defb2ab039ff4e5e118bd6b3f44414d28f040aa8dff8972e182011e70017cba26b52ef6e5efbc60a9855a1c1b77f47299e6895aea2450228422b0486bac0f056acc3d1e14fb54e4f2b6f960c5391d2ee39c6bf2f650c6dd7035ef6bfe0243832d19db455a228a1f3087d2344c569cc8b99b3bbef01b35dde10e0d7b05bd1ea41e8895616f900240b932a464f6cbba9d23f1229a3a259fdebe59d0defd6bab8b381f747661661f9f4c5e13aa385d657aa063af54515549d547623352a001cab38114218050973b66c6234bacf62456c04cd9081ae38481f928923888ed0dd5db9482538222112a120cd257aabde1a5ed7fd04688b4fe22e67a8039017dad0ee18da2335787e13445680ed76917dd1cf06f99b071b503af60656859ecb93dbb890d76d86a6649d4c771ec83a029770dc49b12a51ecf821b08e82a8cb58bd9b31f72759199ecc1be470e4b49a7f3413a0cec8ea2c7fdab447fa153e4dd6bb1c43197a1514327034019871b952ea3e39b776c76127c9406e9771f65278e0efbe2c42775d3d09f74832390c5b25ddd01e728787dc0c25c2b4d62797d56f059d836a5dc17667bc84c8315ee15a5a716b0d004d56c44a6a83064062f4b9382d23e0c0edff0d8341fa08730d9d16b0408fb73f05b63d8d8989bc6a7534e92f3c90564e7c72177c1904fb94ac2a0b5e47db15c60a84060fe3517de299efcb977e0c2cc75adfef9319bae177fed8f92688967a4f66f65ea495958774f462c52d01c43bf76ef70216069f5723ecac1ec9343570f3fcb7a2d09408aa7a4027d83ca2506c8131f537142887612e0bf63dff5decf85615152a18a10b4d2b150c786a09cc60b42735b4a108daf87cfc960e715bd2171d71e2911544157fd809a8c0db033a1aa78074d8d970ed8fe2c214781c4673be280d28c0ec71b57f44171629b52ded3b8de9ad00e40e80f21889c50c416aa7b56d5bac0289313a18d3440f3743c5c399aba425f35b174b09f9993dc2a0a2167ff47b61fce76b62cae0d36eb95df0f2a02a2df9452f985f6790042034edb0927c98885f623087072651d6bef6082a1c237c6d05bfc4efdb1c77bfb048f065afc9a8290b4495bb407629e7d68b78edb52deb2dc0e07f54358e5ea747178990093e7c8c2b13284c06f8c428b85b38dae8a1ca9236b29cf3231dd39e1ac9e6a24ff7b49125f0362ec52de7d2d4db25af37969f0106a835260cc10255cb26ca1cadeef6194efb83b9f832a9459173a9a8a19275087c9e8d57eab60a00343f709ed25b028cc8f29b22575a921870ea90a8ecfd21a23619f816975e8967390c8705ec0ca265001cb7abec4e5ace17b09a91e1cbe0b9dfa1d66e3a397af877fbfba8f382a6cbc78fac54acb7e005f3c8ce1db6b153cbbf56c666e8947f435cf2cb768cec42fcde18d5c8e23d540056906466f5d3bbbd793037d66fa449ffb2422b29177287683ea437d038d708e3d870aec87415ab60c5b9770769851ed5aa72bd0a897e9ef3dfaa51e013f2c808c07653b67abb3e8ecc79eda2236890c8b6275f433e89830714c030332e8b5e5fc70a20c5e70c7ac32a52ed224c4de20e6d62e9b9c6805d0a24a25daa6d20eaeedbf3f802c8b2b1a08c4359b972551ae86a5b864603e4affe2580b14613f1ac7455a381f814b2c39868ea087483ef1971694404de5e43d2f79998191f6c7032b29ee455ce780e5adabe8541a997f75e45542a204aa347aee580bd1413bf7cdedd1b113ddb99287e8d86059e1adfc282bb93eaccd5172be2e98535953486fec5906778254343ab133b66e51646baaecec0b1f8ad2733eb555899d880372e7618a737cbb25653947cf02ee31d1ab9219a543fa7c26a165f91cb06691d829cf2623470602d0cb917c558ce53c9d7d573f31140bb3128d3cc4d9d864978a3304d5a966a9d694edf7df491a01f49f77114ab129b6d0e7bbdee9f8bb8a7165493fae1253e2ebb60435836f05dd7774666522fa55431589e81bdd94a262ff36fa7e2c0ff0af06a828b3159f1ee20ea3160fe8f4248e0fe4a5985efefc49d7ccc044daa2f16c5af21535520911cd714fa02fe9dd91bba58edff521f953d05b57086acc40055ec3c096ff38557879eccb0ffad8ad8ea09a3bde5d87bd5060b197f85986e8df2d08b97d94100b56be328c89e33e5ebed1476d7586b9d9b2a273547fb0214cc15981d0261066a540addc1b2c2f49fd86977523d8a8c3ecf820aec1940f43a710204d36dc5988c890af7802ca21286b63707563212f9d4ace857e6464ec99077a06e87c3bc86e5b3923a26bcb3233b841a304a655e6a6c91d20a2861191edbcead6be97accdc02bb1587ca8a93a624d8e60900e6a4b284a26f7955cd9a348b906d6bf5ab5f6b1d282de8098f3de585a17e77fad9559e29eeaaa074f933b4cce257076b8e32d7537061878203158a4b69446e20171193ac8f9f35970a7224bd76e0c59475d3361e18beed4fba5d9cd5504a4459eaf56ee046bbd10bf00b1f047a41c6384d11d7d0612bddd3a0bfb52ff1a8e029fcc6bcafc785b97ec91f11ca0c9e8c8c839c458b6f4ef1ac99424f7a498d84e726ad371a192f73add3e0cc67ed7c41abb95acf3b3a26fd881406cbc8b67256de309b825b66bb6452face684faad1bb4bca79a32780a5eb56f683738c5ad320c9bd69cd6cf3e5b4e5abb3667afff30a42bdb2621f787795ad6d4bf9358bebd2aa508060494e5553d12f67d26ec6debe16483fbfbf00db0279f9679c8e5e2b5bb584413d6466cfe3a09f3cbfde273ccf4725ccef98edf9001d08b430b542959920e06f39c595283a773150c37041671ca96bc6a25e66e7328c54ec6afe64f1d8c55e3846d09c1416863e8aaf9b9c5b03b1ea29597510f7c13c86d6dcdcf0cc332018c9228a9dbc5e34396d1b0ffd795394b6631056cc9d951feee8c1a5826219d0ba1e3674b4e11a86e6a9f99343d0d07aa02318a57bd90886078d05c42268ff886ba16e2cc67ce920be81725089b82ded9b268b5662967e70201d53264c4cb6bff2805f821027594f235d37c6dd33db603bdad745a9d4f94a93834a12159c80370175074a885cf5708762495cb847dc43e9569a501dbd80f05a036992a955313c73056404e79e6dddfc7c3c3b990e706c313a86e13cdf6cd70e5ff46eda1d734630f24a7d0d45a45d66bb8b6eee244abd34557703542fb361f5badc8916faa9f68bc66b9e32824f6da96c782c6113392e81ce13ad29f6d7efe22422aaa3f5e0d8dce3ef9ff8e345ef5b78c56796ebdd104cdd1488752377df17e13f6bff86559715b52e1c78002418bd506381095dcca583d58ac3adee48491b242d346eec68da2c3792566c1110d799ae49070cf2c4ce4ba46f75aff685796765db7ac313427fc67db67436185a4ce0dc7b2c47c21b07485d59a9fe980d6062d839529e6edadfd1c31e31f710584c637750a7503f0827e124c2d5b0bf5a8beafefcce46a56fc126e81f8a78f30c8b8252af37834f001e0c2fc1bbcd23092e00bd9e1738b429ea895dfec41990a815c6ed2e70f3928761bbf33e1d7eeb94b4b85e2a4d3f5cb3df63e674da907d3dfc3f37d125d1063e62d80b0a521a50017e71f56a9dd694eb54536dc8c2af55c2773d6a22c627982cedb7ff021945b19f60e663da67b4327e862708aefae9b1e7212e490908336aca702e1cb7085d0d0a2fad4829e046ec03a6ce8f4abaf3f3396f48e9240ca96ecb4fb66d6366936cfc27f43aec9a57a1341f4f52320d486482b63f47d3ab8bda21ed65b9ac3ab92f310412358dc388ccc5b965b49edde910a317c936417783d37e406dd5aeb0120b75f770b921151d7bc6eddbf49b61ec9067da895b1a9224003f437b5693c6ef10ce78081c552cb07d6334a4da6683965cfc2452efda88948e55cb5f3ddf7c28668fa4879fa6bf04e7db3a7a3a39fcf513e8d85910d7d2447cec8a10bf08c660a0b0c3694505ece948e657c55931a248e36c5c1d2b17e64a4162700e7a91596e459a18a3ddfb39f2cf72d9d68dcf2cce05f272e44e2f631762640ed81ff1ea29428e2b992fba930cd4b925987d823807d9ff3b7676a23ce797539f8fce1fc818c440b4721e21c18c2eea9cee3fe4a75fcddc6fb8bf1a65013d869ad86bda0c715f2fddbed629512ca4ec715413efc3acb90ef69e1a0ba093160c549bd73c0eaf662567d7ad3482a1a12995d13a4b0aaeb51be5359dcd872745d0431895cf753c1e987298cdae9a6dea31d1e767af88f8debd05b39bb9f45961f6e838c418cdb7a51efae89874a8abbc1e80b45bc16a13f986f60237631e3e45c83b56b86f50f91a799885a5c4c2a48cbfcbba7645457a5b46f1eac7f175662b3650b384c00dc5031d2a3c9102008a5410959a7d9709dc66af00409dc30d0807e755b524f8235e1631a7961b9b4971e9791ed2ebcad4fb3fa9deed124418590905ed910cf47930799ac2dc45b82159ed37a38640e7cad353d46dbe21585bf0fbb2ae159948cb62a43bb6e002a35d278c23a4b28203037d74665a52fc7eca3305b9a8724683aa27d26f2103f14d6e2401d36353d4c25add6fcc6e480a3aede5fd95d5d3a5bfb741218d9deb2ae784e98abae0ebe0be9b96f24fe6a6aad96a9ea7623e127f4902f98583f84df16a167f44f8075299370a7ed7ab006d35d5c182edc7c6fca8a39bc76dd8cda25f46f536832480349cbc6aa5550ae363eb6691c3569bb524abaf71e1e37089cc8784b2a7e6e6c68cfd374a1c72e03ff75b1a4c308acdacd8dcb52bb19c33510e24b4f5caeaabfb589034b9bffdc75f1c13de5bbadd611aa5345415ed7874a7764af7e7f3d761414000fd7f7286fc62322a40b17321eb6622f67d1893eca9cfbb11a36eb470f4a96fd95f30aaa42ba89c43e1f33d8b9ea17da7e53b6f792db285bb5d9e2441c0ab8b39857bf62ef73b7cf03154572cfeae15283952385b64786ef73b85d9b90eb58583612e694d2ecc41464bbb84aae8f84616c4789ed87d67a8063099d6f6c91ddd62116a1e55c6bc172bd771a341f5e0511085e49d9cd70e77553e75f4daf0f64b3bbf559c2f474f063956aa8eaafbe2a1a4915efc3a504915cc0125fb68467794f6748932a2787238eca288c5575f099d740a843f70542a4006a4b5d82f8eb64f070891fdf6f5050213dbf71a3cd19a43189a07a056b3ca6aa9bb80cb6926ebad0c3ecd419ecb297e702fff7a695eb0494476c5c178d4ef226fd38cb502dad92e4b086868337dcb209e8fa79f5c5c72ab5c6431a574185d28a066452a56f9c95303cf056f5ba76f8ca7ad0eba4201b004c5926f468adb7eecf3b30735e36349da04d60d3da843cf3f94bd28d00b6c0fe486a8c208a0554199c64d73edeb6423825e0310660163c810fc5779e7fd6c100e857f328688e4ecfe289275906ed0aa569597372707428b43bdc11fe7bfea12e1bea3e94086f4ce955bc7fd89e189bedbef31eac8781100b7773e0baf6d47586e273ed0ae2e62afb536ec9f7a1fc36783cc47fa2d3bd2a18ed7729c2e94ef9b8275adfe6b3828f5a193347b4301cd883bd3335e08e14e401a01bf9232fee72e7a3c2df07c1e6cbfb062d2e8eb31011e0f8b45d2a15dc024016780ed6f8a75e55668685984e9cfb8f6ca3840e9cebb12c4c9bfe5980055601bd1b5539434a3ebfff331689912c78fc465ef11936753424991466c56528bf84a18e9b721d2bf7ac1e326649bf384459c9550cc80c69861d884a7b5d460a2f791a5171f8f6bc015ed4896e614d5f9da42f7a6d4af4c7f15702353093f9d6993461e99ad97e6fee03076b6e5b473b01eebfb18e14201749539de7ef4788868f5fd2824fd381263e61411349590de643904bce0b530989b23339d4534896bd404221dbe016136bda0ece9ce1754e410b40992eb13a3cc9babcb3ac959d7eb3416428a8305c4c97d3b35f6e6520055b9c25ca179b4408b3fc195b47e60ebf131c82a108e352f84012f838a288abcaf996bd141b5f0adeba758ef7d2a3caabceb6ccd7d2a6cb9d89a522c8ab183bad2742238f145e0139c954f53e0b493f1a800b3ebf5cb6cb7a5707c1ba91906510a36b8cd69ef08bb6614c85a139bc3e39b6e1a4fccd2e473f0240d7f27a08360efd837ac10953fb9f1c3331563145d69558b52a0bb503b2cb9fcb055772ba156f74c129a15e1801175cdd80f479eb8ed754579d5f367b26544cb4a06c19fff8d432aa6000e951e89a9cff57781ccf8b6bbab24356b75255915adaf934f1a4491710f13dd0d01ed429f2b8c0d97d86a579ec92276a8f7c8f1ea94649e226aae27b2d13867b010c56731ad5f6f9656555f64d887daf5a5023d98d75ab1f60f83a2ca2e434972ffa4c93c8e663b121ccaf8a6a7d1fea1cc48f4f45eabf0da3456bb0ba4a4ac1ce255625df519f68ed0f84be103bb4bf607661cb71f809aaba3cfeaa236e264209146053f83167fe08a455306b10dfea66a73772b956ddf6d09700a43e95cda7b7acf7550bd8b95b5208b445918fd85c0eeb62bc275c5beff354d66d4d05ac7db90039b44f27ec2a5fc045f27ea8771e5c7b861f9bdfc42d7a3f17f6efd52a9d806369f97c2f22e2d4591a0ab8ddf825b204108a58885c1aa12fe0c64edc6c4880d44f109225a928e8105d46022f05b89c72e1c8c9631e5defc9cfcea36ce2f256caed074da9c57278fe092d9d9438b94b54f3466529366fa77f3ad29608cc993bcce0c7536ab02433549ccadf385d5647a96d75f4b6028b602e2beafd90c7b2c962d0ea2a74794bd1973f7784d87fdb60eaed53c0ac9e0d681e82bf4325603c2a3414eda6134bcad548998058f9e8ce03615f5e26d378da424b57a587d1b43625b51eb21c02234a6b199f06cfe3d146fc7e58c0833109830ec239c128c185d5f41cdbcddf6497952e5605ecfe73e0705dd9247cb44496ee062f85a822cc6ea91d250627ac3f44ff706ac3d7f3022ada84e5db770d4b42b1b9e41084291875cf25b5eb04c6a032d0cd346a8339c4c2e1cf4d42902236121cd85e8e6ab4dff79392c091115b9d57e87ef4f2dbfba39cd8ad209acbb493585c5715a3bbeaca59e682b3d4040e734f562c02acd911ce2f16165d4c0769a9fc5569c2eab09fb37e5e9ff645a8d4e5fa7751ee334a05504f29bbcf38d0dbb1e043b63f6b2bef6daa7737545c25157c4a14f3d8315f36eefbd6a79ff75e873d785b837016662846c86be64d82ca5ae7ac43dd5eb6925c238346d7bf97e110593b1fa9afaf38516d25f2c10ec5c0ada99dded536d60fde7ee8d8d4b0bb955e747c2e7940ed8a6db611af9b5954de34155890183618565eede0f12e1292a210b6d463cec4321ba5d22e94adb3042240e3cc1f3554f14bda1a28667c7ab2dfaeeb112e7af30cc21e83c0e2903627aa4c56c2e8eecbd26810155311751fe10808b4d87ff227c197c393714b4e3648b0c3e472f61825ce0b7d434e07bbb2c1bba8efdd5d0c1ba494c2726188d34058e6d0aba651727c51519f05dff7e2837d0808380a3e6cbf1b81f4e20c75bdf52a437c35d6958e73d55030d5e29e637457f85c9fb238979526eea9b8fb523c2ce73490f0f6cc575704df9c4c8b2341bd1271e6a22a956b1343c3e60ee77008a66e77c79da3dbdff963f8fd3885350da0b3fda264f16eab6eae9c1437fc04591e5a1e60e25a6c92106ddd4f28c0b5c58602779d89fbabb2735aad244dc2124c686c6a1ef1fb2c3c00e23d4fe975c31ebbde26135296c2265040a03fe9ac55142039efd40837ac7e2827f0f6cfb0cadc12760a162dea2e4acee15cb457452551e79f0f4f6e3fab7247788141ee5c4f8aa602e5a521d188f836611c57454c4a3537f0c4830af926409b4e3568d0fb0c4a4fe018e6c1267757181d925dec3c7052f5f755ece42ef2504cfbd0ea78a79a67deac30fdd97e5da6a1e20583044c301e79112e78c5994f5ef20f7b036bbdbadf39504d142492d918f3f7dc202f36ac3ee19a6430eb966883fd0331f6046ec52194a4a92a540d64ad8787063db50b9f8f292b48cd90be5796751b98b87370f9fe5faa38eba5fe7b2b3c5205c7f07f7e67036c4f101cf21fed14484748ccff9de00ba1903bf7ffaeb8d77fcb3cb863dc2a2577b47376d6eef92be64fee88197f1db2bf80318a549ced2c925d9e0c314ce951a08c31ff149cd1bd359cf673aed423014f4b8b8fc31bc9b1020bd67f5fb4f3014677df2750266c948ccf6b6296045e089f3e96de13f4defda094764c1df965069542896dad088a8499d425860995be5e394cc2ccca25d28b2f7faf9356080810e82a1949619c5e094fbd9c9bdf480b8fdf3dd93ea3a23ba29aca0138332a615d7100e9afb9c6fa3812233315a9002fd66e2a55ea07327bd0b381582070eff48bda5ca198ae78199f6a0ee617ee38d80c1c5be40849506a0bc8847b09593c22c2abc6b2ab558082852148352c1eab80d47d774215bf362809c969dbeba9d052940c062a82d966f7456b5d55248094c4968733c7e36379cfed10fc082674a7f3d3a8a76730b4b63bbbf997f1329e943d5c3ae05b9dee7283156b9cd2ad3317e7230e8f177d76ca8cf8662fb10923ae2079dac4520698e9aa7c8280dcdee39063b6f90c828143be41090f0dad62ff7e6294ab805321d4d05ab02415405f863cafe756ccc25811f46b868d2a8eb608c462e2dd66297edcd88cff8c956532b69aa56e227db2c5cdcb2a999d532c38c32da19f06ee7af69a8ff35a88ce549fef37aa6dccd47819682bd177e6e444814ec7df7cbfad110e79d200c458cf0e861e5832dcd04f7b58b267a63601989c0c5aebc67f24bec469e41ae5cfb1ce94f2a76dab02e62b684e124dbf487a6741b55db47d03070cc719d8102a9e1eedffaa02b80330ed184dad40ca4bd964c309072033768917aa03cca8f71ae5a9e41ab4b34c16c4faf6bd7821c92fc28c5534b93daec59918e555034a99f2a63d41c38c842f3879882886adffacff14b873f0deba025f6e0dda40dd9a92644bd00c797328bf16f7535415f6bbf7c95257f52b7242b5cb9623d4c5e8d3242c1a425787a6d0b004eb6591e2bad8259261602f3b88933467e288df0deeb1320791dc22ea2ea0b767f1b277191c6d61b6f36c0f77b3c417d82da4a0ec45c1e85b342c8e41d2ca0ae816887bc560aba4be344583e5e2ed470985335974757895fd0918fade3e59c727be5d90ac373fb571c094742fbbfa5095841e5516d8fadbddd6c8d7a259d96968b0ecf12d492ca08e41cc638e6ac0e59c11cc9ef1874c0e37fb7d3eb271f34c17dd21ae6ba54a981299829e8fde1fc983095c0c59c7349a62023f2dd1f674e95f4295d4f685ca153fc4de79c863ace7b2440ac707c69567defb81821e3618ac9fdad1b4b5d2574b49e34d94d3a532ba7e321df60e1565823a724097aab2fabe4869c56b9305c424454b0582b6cf090e6cd79921fdca8c92069bf506fd84754644aeee6955c2d0ebbdf64bd5de4df5a76f0217d35e3092cb6e9c996a8e4e55e20c4086f4f1a49e18fd809755abd78648a8114b616357b243bab603139c8d7162bb9baee8bd1688a742292a3f5a2859785e03337e3eb51801cd54ebe8fa73acb83f8c3d424f9bc0f864af6da439b4ff251e83c73d2910c9fb5e58cb491df21c9b7953e9bb30b0bb9b9eb42cb64491beae1b77ee8ce4bb5405314dec5bb36ba4f1d12657c175c56e911598378d9305fd6fa24a52959905657faba74f267956706af3d5d0d405f191032b6a5715e985a8d8e403a7df878a66dd641ecfe60c728b4b3d066907ea4e2aa9575be60c0693f578e507a411d292d3a8faee353ac3f42e63cb998598f02469d6f2ba1c5adcba34b3ef800b78ee8b853a0835838810598760d8b1528d26b97b8f9dc42c681c33e9b03d0d12af971ea9471f47d19641eccb6d28f3c1909bdfd59cbe2ad29f2c79b78e319012bc1f3b22b8bd2535ce1edf8f6826846af6b0dc37dd04b5632df49e0bfa5f42bc847d5fb2471202778d233d1eff676e48c8f1f73ce219f334fa6d12dd9fa902d1e7c01071c239368dbc0b61c0df4e66b1d43f43ac6257c6f7ba76886bca52451b9537a914e890689cd891cd15e63467b77286f90dbe801f3b473094da9068c4efdbbb6a172b46d2b69cf5ef92bf813a9113644b305d84d063cfef6d57828d18f60937fd85fddc4165a162d020b36542f75891596b60dbfd4656b46188bff1ed7982814705bd990b1a8616355f0b174e0dbbcaecc8dee489bc3270248c94ce3686289f8d3cc8ba2f94a89fb5e57ad6fc56bddf1b8b08c9fb8e5058af686ccc9a29c3b1b2807ad59720b2d0ba0f267c74e142b4ca8d68cb94daa0aac602050cf306b5d8141776ec712062fd501bbfda8c56a809f3943d93976ca63e1f3412584374ffba914e908c14528887eabbcdba7a9056fa7c74d33b3f171003772de061fda6f7d9612096413aaf84dd1816d03d85cb9803c18e28dabe0394d958f2cd126fe8156acf361e1522dc3acd970c8c06656f780b088c68fd8f7a23a3d786fa4adb01d96835c5e6b076deb37ea3664267f924007aac5c2b02d4e64664de475d524f09ec2df1bf7ee7ca7fb8201ca79110e65cd7812bddaa12ec7ede639ae7f11f04b16744033e4e301212acf8ac312ee270dd054eb3f71c624deed5a4dc05aa41ba481624d5a5c19856211097a5fe854d2da49c03bd24413b7a80a4af8de3ad19b62ce12d978e89d90e0c0b4c9a48f38abb23ae297e84fca6be4c150bed757d3da2e6caa30b885ba44563620cabacfd1c453060f5069e6d52ed2d8a8f86c93fd31aedeffbe196f860cd8b9fd5bc27bae48ecb2fcc812436ad51bdd2bef4d6c3349856b93442e96be06ebf0abf3bfaba25aa1ab2fe77ff837e1532f85333cad186b87c25a1528549c51a34e3358965ccfa1c9c5019e154f3a1fc48322c82cf6f2b4e9828b6291bcaec749494ad36a93a1317a22ee4dd46213ad178ce7039b8e2d63c837e36938923b62f7dcfa2a41169f63e1e59eb0ab6138f2324193e6172e074df6c0c57a0dc71dd112367fae6a57b2666a9702109b31072791e4b3745702ee6244ae98e4f41a32d0040531b0d7f3895f2c04cd94ddf488eb1ad608a43e52196b93f6ef83584f39eac68624e4845695cdd2b78f7412da972f414ddf73340a4bdad53f3099dfa6ebb688688feb50a3e4992eb4b9f9c8559a0e55d28c08617b553fbccbcc82cc5f83013b93c6f7203f993c17cfe31a3ae9789dc27cefc6db2bee4e6c35a451b99ffa204f3a4535e2613dda7c1dc1e0b71735012d4ca3bade761f8d91162079a21f642bc95cfd5291af5f910c670e6cb0bd7ddd323c4736479e085428b484cf91d7b174ce5fdd3bf5bfaaea899fa2a5810667fe9924423ae55758ea64ceff7989a9f4b4b6522a6c6f046181c0a45ace7ee8a31235a9fa56ac71e8ae8ae8cd81914afdd8a567f89953af00eb24414e23cdb714449e5360955a7d4849702355fb2f30a3709f3d6353b782ea66256f4746cee350e127fadf959b1fa5e45a1d08325ce230d9b858660415580b531e8bd2c1f7265b605e0bcb5f6a1004dbd8f23e27c7b3154de53f2f5efb74993e70c97b3f42227a2111d7b9b20eca236775d502185a8f901f3640be20f3da18919feafdd5f970811e7a568a4bbfc6eb0fe860f65631476e40df861397111e142e086f8ae34b735dade00f8c7948ec62c68e483891e5bf241cd774677a3b8cac5338c9b5045d5637ef8d246cc33a427fd175d4619be63cbfe941c590724c1e28668f1c1982c6a7be4cd44cd0bdf0e14043d18a95961d6826d31c4e006aadb35608e271bea80fa6552a026a3a218a08521a93d474990d7cebac470081819169e11ff2c1a35ada60e85ce4082f98dc7624f2135fc3b985418a3d8dbf4635ae8cc29f25c90a0985b87ba7a8d6a20986b26f1b746ef49d62bcc9dde27e18aacc22cd62c759d4a23b4f3b38ef7afbc993d5b56c22940f7b6b9ae642ce879e0560a988a98157f21c05ef95428bf804a33e640a21e3e6ecbb3880229efa6a811d0bd145ac17bce40d7036e4aeedcedab917fafe47ffc837bbda0a747cf9ced7eb146d7c91a3fb2866db37addd57d0cc4e65a2b7f61359032c30e12068f6d9224c0f0afca62996bb86e7cbdd7e1fbf38a1942f7f1a28c9ddbf9642d89ff55f94661b0556bb2e771b62afcd1d6c4015c4e1dab7fe421c245981ffcd68fbbfb3108e5b50d797fa92ec767538220ed4531a233f9fa3cf4bf331730cc39a530069c24a835e18c65306e457a3ae31caf28f3a71033efc139370f50c73cf75c829795fb40fcb3c10b3265f2c6a7f522ea15d66030c3943ee0124bb40eb929d4da510c81d3d67f93b8169f3ef3419465cf1d3564d733787b4536c3e5b986557f7e352016ac0c9a369c4211ca8376074318b655bb3a9627c853ccf2e8a06e166daeb15223248affe1c5e81994b5767e773b3017fb9cb81c63e9573d2737ea1d23a9ba6154700f4224a98cec435d387945bfe560ff1327a6894b7922778ade99b8342646fb0e803e2ceda6907d86bf512fb8bf696c449dee1985615a87b4e1795f824eddab19a61399c25a456357bd616309c637e260eb5f4f1803070827b6066ebb4159e992b74b062a351cfba8b594e0a70fb9e8ea546c2b4dd3a9612b5418d6f7dfb0384f39141a6de7913a6633c46422c701cbcc5c83b5a6361dc77e0fe1073b556cefbedb57eb5a44d7258eb28e827f3551316084c3a3b78ebcf5930d8b1b466db79247d112852d46883f3c3e91649143305f19a92c57a25a3d46f40f8ec6403af8e4fad761b99dd244a194419e9a9313293762e98d134056be000b4bf9723f528dcc9cddb0954d1c02ff22844fcc79c753abfb78ac22854be3df97d1b798963796132b9caf557529a5d57df663f12d993feb1c900bd2659e56ebfa6cb0706e5b7aaa53cd4b731182451f5c3bdceb45f1f7f0c58de168edf7536bf813e6f72972a84a39de77a47475df910b551fe4ea5b9c5facac4e8709ed4988a9c3ce89aa099f9eed69299b9b25a69c640af440c714b2207e42fe41443d36e1d0eef3a0a8e079397bf3e9c1c98cf5b991c65ee777b46fc141c298cc15bdf8aefa46475895e6121b272f8dc620b37be8bf3d52776d6eaa3366a9e21ea5429607a0ec3bdf0f916d04e76f6d9fc6a7e6206bb91d44084f701db8579dbc5a8a2abfe9be6605e3eb1e16a17341a8bcebc5483ed7370698f579b0395ee46069656a198ee1012baa37a0d1e7cebe1785ceaeb10db2bf9bb78434ed95e0c53b16941e99dc5bea8a79240c7760b5404ea3666c8fd79ea915ac4e2439de0ce1cf47c8b775c5e87ef9d485a993163b6f45efa684ff8608d6164f492e3bd2ac03c3dcc9b67d0e5f151056601a3b89dc77b4f1ffeac950701bb584ec667066c7701d908831268223d6230a8600b5e0d90ac54e524606a269ea125cf49c65fc505a8ec45056ab004e39135f10d7ebbbcf09339eccc475bbe545f3f046a74c3ee553ce6ae6385af9d0132e552bca3aa51dd593b5460935a5597fcf0f5d2be9e7322f5d3b72970ebad15f5d68ff508a24fb4980160547e66f3eade16ebc2408a4876d701147fd7203fd994f52fe2e8057a4cf05f8e4646a5af8cf9765ce5e8ae427d429a4541fa66f21db4551b9c14c5335d1d14abb782432d3c178a05ba43b5971f1ccd81114da3a2f2412c9fa9556c03859510f38fb499025c188c8c8367b6be1e8926ccb6483688345d96d819cc52191d5abaa1f6eb0ae6918e20d8390d25683b0fd19f41fa15b030f9738197e4d1874fbc7b2fbf3108ef6f59de1eeb0984628f6b6b7ff729d89240b4a15c8498f1baba46ebe8aa5cf47099fe5f030c44b8856b1e34caa2ec0ea405a068a28fb9bb3e0c1530b75b2ac4f88fee7932543e625b29dd4b0e787fd972a155db929b7a8a646f968d03ddc6a59f41e90ec6d16e4deafb535d05ceb69f9b055967e03180552641d18b039c95cc0341725ad2dc1bf36dbf0ff9209de5954c7c76e5abc2d2b37273033d7977f3cabfa54f3228671ce18ad929c6dee4aaeee4426f83030d9e18c452623dfacd4acdc1657e8785402156a04ca14431e409a68ec72bf62271a56e964bb1ec32bc4840f635f6dd3b762bfe625cc7d46b086cea480606a6d8e0adbbd1cb548064e92463b83ed2e982a272d086df74eafe5e2cfa8cfe77abd356d3bd3f81e541edf7b01117e346efc1d5408461f430f34d81eb5e41dc92957ee7faced2d0028342e5af12e8af55dadfca9e294a538b194431543a293b9151b2a915114d4a576346ef3b6701c52bbcf1d9fa7f4e46703ba6551fe149df79aa5f82a7c82edf31853063cf9e6db513d1f80a7d0cab622bd96ffa84b9716a8c3f043b8141c06582a297bfc17b1e169d5aa913eea132d5d8f206f762c6e6f0f7a171b5365ec19c3c474717cafbcc39b008b699842b601b8cdc3c4b7caec968fb8c129164383302a9d35f27da2c2346d279bd7f1e26e490fe78ef23fa296dc34b60c821370cf53bce557b412a08ccb88f758184dece8481fd6b188e17d03bcc140a569d3716eab53abb2748a137c24bf3b0d73604bd4fb067fc9a861333c5db745ef247fee994d872c517fd05b4b8507ebfca0b27fb0dd47659e8f81ed4e9064bd2cc09467867cfb9c09899c19cf26e137c22b84796876d4a62b9b79bb8d06e8351585818119af7a654b58a63c140d7949a9f03ca157da68e838a3297053dd8d892d2ea42b45311d5b880421a933d0300dc55d671884bf77a75ba545d3042fd418b1b93c95619ed37797dbea2f416fde822f0d8c9e516ba30e0638236a814102c94fb75dd7ae6687247db4f642ba350bea64217a6e2ed25a1c2850443c5653cd46158bf5fc946b39fb0eb0f2c5d48792352ec231b9960d13adee050b6c9af1a374918c379ef676c9b65a929d17ebbe103bd124859b6521cd9ac7773358e2792b87b4907a2f38916756d3948912f72d2794004ecc6f0b46806a27db0e6bd143d6a09a59e0d0a8848b2a4112ee0f92ba724413e87213f6f90f4f12fbac64b0db304f1fc840d68d903bc1480cb5d33ad61eceb05c66b9c6e428d977b4bc22c51ff692c55eb85bbdad595b2df4cc4c9696fbf9682c022772dbf65ef94fea894597ef92e6934f959c7209165a450dea57d9c90b981f2600258214a266f5e66f1c89befaebce73c3095fa5dd49a2d59e2e24681d965212e734395e53fb111c066ea982f0dbb67f7dd19962e8a1eae9aaaeefbfd70dc0df4fdee3ea6aad372ee8fd288fa08f798b2ac73a64268a77120cbae38d81bdbd1fc9767bb0b6dd4be048b5730c328c29535959500153fefbf3bec3b3e4dfd2319fbaefbd357deab824220d51c8764a96e65ad0ddfc610c608e119efbfebfb1eb6c4415371a1e4588459f89f7e0ea4319e3bf7323c7c0d22f7dd7f6aba45d1f8c9f75982a7ace0ba2b9a252fda513561bf4512e63a94ed4438d034ccb1b8e78c4716491f123f79b56e3213f874b48a42b423fa243ef2b8da0d8010f18d1d6b154b0128a2644b1b9c0ef3257696a5cab4a4af459c0938f848de241ab1dd293c478b18ae871c7e35bb966efe48924abfc792a87845769aa8c1233f90941af466135b3da6ea88d1a4b51043f96d5f7aa467abae91ee5ffbbd177fde8b4879764f3dde2702d0f314ee7528e65e1be913788f81524a7b2ed904359f1120d4d6b0b8221b9f997f9ed418a8cd9bd79c82f6450065a25629862843a783e4315e0395292046efc66325d1ca1d4e4d76e98eefe263767483386875e976d19ce126f2016a867a3b193875a9e47e0ba76d8d15fa07772e63790c0019b5582d819a3f96f1ada7b1f8d11da2908bc7316d7213d74bde2e75437a61d4edbb2bd4bc47b3fe9bb2bb0bb0b84005cd3444e92ea81802ef41a87a00a4e0154ab27f072a33c784838eed1b97ad41a240cb2541652329138d99b0b5b53028f282fbd1b1dc65fbe9cccc397d03d9f0b2a8b2042a5cf62564894b9bfe6bf24be138f77f41368130dc8e2216551c95283dff70136d42792a53000c4edbd1c8f5de46ed1376a923a4fc29c61af70e4a31150744093e8529a8c33c993665564c6f31fed0fb4126d771fa10da8357fa4dde0dea5ca94254696f652541183b05c32f9cbd4e05795cb8e2254c4fcacab3c324632fe73660045be2820c1c43745c76740d55a0369e087835501dd3a7786cebee2c86b43dcb474c69dd21d0e1aeec752be7300ca98b78fe1b7181d91568a566933c773d00eb4eb594ad93615470453e4cc0f02144e372ab19f6a2aaca9e2baa8c599c6da5ef3fa5ec9902aacc29785d4a595d48056bf4fd759ed09bf0340afbc5fdab65a0dd738aa8959eb262420fdbca72aa3eaf42d8978df81a320b1c6bcbdcc2c765b016a43a0277f1c9459901de9a11da09461bf64cf48d1f4d114c6b4de137adb2661b5c25c0770939fbd3d5450c5fc7aec998ed382b6b9d8e2eb8541ee4e8b3914522572f49e259f10c64380451dd1ecae29fde988ea00235a1d9d2b541f7d34f5323f711aa3604057144c68ba7e46e9df4bc64930f267ab21ef1a11d4e811dbf0250f84d4c0839e7bc5fb71d274fe24a9c5fa81e2eb8624a3a48d624bd5f0bb3d69fe4ffe4e804c4a82918ac00a5a31364f42edb6eff78f0ba8c78c54518f651006710b61fff78eafc1c162ac7b9a705ac6cba537a2e6f315119d3155d79a4fea4d996eb65ad82c1c52ad8708895ae36d4e91a8d8d8c1b481b3e40298501f21bdea19c029bc7fd9f70b771d5a700424171f5fb5d31599214eadc99d86164d31b6baaa71c1180c67457297576d12593b60473910c018a349b4a5dd3fee1ee75d7ff20ee056061e879ddbd44af8a03850fa6b715bce90f4487470ac7a8ea7496f3efde98c68b39e34070b4c9267a10f6cfb162c4bea73e2311af3cb0d48f7b4920102feae3bf16bf64f44597ae48bc8b9fab1959626abdaac760b90743dc0f8a315d26bbaf416590812c381578626cf9cdc54c204fc5049adf882276154faafe4d0c86401ce286634ab9cf4fb390d7df449e12f99a1803a5cba271e448e9db88f0241b69f7af216ba430e2e3d4b6da3262c9ee625b3f7140dfc515c1d04c1637f6b7bbda8834b94a7f6ee9e7a793ee26fa052999aab675632c973e90b4e01041c88e6e73e6157a29f8c794efdb3503120e02fce666d31a58e0c42612a6a4df182f5b913f9425f6cbbda8567c273826ba8097f4ac9849245e76c40c1b10806572f0b92270e4fc3ed07dd3e3e42d3beaf15c81a5673a90fe7777105d779fac2350da5509f6b8e4e9c0b9f4bb9a457209648839b2f258e1f88f2ec33ae7bbfdf554ffd13f195bef7a4ac2ec2aac1f91ba8df13555e26ea5dba4d7cf1305f6f377c4de79f6da794ba1c11d2d754aff5bd49e2689ba4c378da2ff1af0eb4da5468529f279cdb716b0881ec8356f52057c7cbb40d5d388cccf7f89e058927a4cd22e96ca79cb4f96e0c5afe9f61b2c49db5e36a3c508b62fcb56168190457f6c370061929f3877084832cb78ff4a365bd1686d1b4b2c5e123f14c501a5f9273f0ed820b2a21644c03dc0e2d3b3911985619197b8dc2c15b21e0ee03823a870a36f5bce8f94c17239e2966cad59","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"dc4d3ef6df862e0f00f40a3a4e1e0cb3"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
