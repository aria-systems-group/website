<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"b19e61fecb95625a2682f658bd19d584cfe5aeb8bbfa2ad6157f8c915d65a851f3ccecb3d1a08204ad3ab9a4db00c61b389eeff0bf87de2033ba97dd2892090a29b0d25125233418d7ffab39aa31655d3af9808101c0284a0b9777151e689068785bb5c6bc7b8c83cacb4bf411f18b5730631aa690411b78808f35f3393ca3c01accdc976494422f0c086d2f8eb568dcba4740ade836cbcffb399bbab5afccc6efa6dc3b99c846e40d473ebba647e9433477f2bd8eaee604fa8ab11e9b401db714b2caecd0e5cac777af29c101d76c5e972571ff8865694f60863bbd37f764672e75119cf7bf2af048efd6395fbfa3a95ae9f8f79de166c41989b9862527abfa6fe918edc054c90c029b91ee28febab5d6d43f6b2810d06e0eebc3703db6e37143731411aeef748df49c71cc7a1e7d4b9c996d2cd52cc32103198dce46fd5354335cf2f14d3ed55c588c8b753dc64fef2cd07200b17874f5aa91e31fade99a1788decfc2ee4349988275873fd245919c6ba57925b9a972199bebf94d125e27dec5e6e9a5ff3ffdf41cf262b10e1b486a547c7a1c6e890bb4af92cf10576e1702aefb5515988e5da5340c1b7a53ed7b24e411aa06c3e303278d94bc392fbd956775ca841d3cb89bf4385286dad501718e8d2bdd441514e1b0f03c6f2c85156b6495d60f7d4d0079208001a8bf4bb74dd2eb6afbdf684b8a9de7e6cd36f58cee44741015e4cb3f463775bf52a948750970a61ab87e02c061000c8f44d3cc1544695b3a55739e3bc059d3ea91018dbea4aaa736a17f868ebde98f7535041d3662a8479cf36f3b407d4f33ac85adb347061e7a46912467d47ef2850d957f7dd86259734f3ca2d8900fa194680093112a398305c7e535257a953d5f156f9f4f99a19740847519ab16e87a342009c1254a43dfa2fc2c3b868392bb8cb189cb76bf21ca0a670d99612282750eea79f689cdbad620c0a600bb746971f1be88d384d02866cd4fda250e77ba766d6db54d681359a9918d4ed2e5df25218d276ecda8c86d0b184e59432d5e1d2a4b0f4e357077547eb34151dec65c4f0c374fe7961b41d956ce6e0c977ce72f83e99e8a6e6730209c1ad5aba800f6c95159f82031d2f6e0eb6567ac06b312605f4ce88256bbcd8df589176f4ea906e7bdd8bfbc2e4e781c2182e331c71e1538df6797e95d20b927a160ca1f3d794518c373f0123c8f24b63b124c431a6092cde6186419456ead2fca1b2551015cb41d92b38f19480cd7f6911ea90f50dbcc401655ee9bd79701bd4d86032a87f55e4a75f2a9422bbed109272db9b87a88d75ecbccc8f60e762527803afa77e14b341a83ed895f7db57a8699d0079fd8cfe2b86eeef0736c417ca69de1519e744b9a9e530118262bc0461faad04ef976da370525e4a32e25d5d147e888ea0d6c34087511537d0bc15f25be50c43fa73018fb52e2b0ae04f43baf9c78fe44fafad85c294a1bee5217528f5e3465d0ef3c36302567ddeb7f2db40ca2d0ce861e30ba880e0ddbd401cf8f8bf99dc072500ad7d8886e3638a83242c3d161443d9e0b169c6d2735c1c76e53ea9e7cecded47f5c5a5f5761276b82bcece5116733ceb5b4e9159035d26772659c28434d4dbcf7512fa111b8fe36d75bceb825c5b8d7584b92a173bdb6a20bd1de8d9b25508d967ad01eedbfcb9171b64b57d0ae12fec00ecb724fedf88026ed6855c163b16a1ed71b288085283bde69d11336ee37bc0beea5858b031a3eea20d3619a9b6008e39bd0ddc077f7791997087c308736e8e779bde3ec939c8cb4c8ea6a3ffc2f1be990554a398ddcdb64219467cd05170b6de393e1df74a8138564f57bef835bf8f21caad90931472876552fddfd59a3bfa40db4ac2c257629f851d5115bf72d889ca020cd71362737a182a5ad36f55a174af342764e491bdcb5f228c77c675766483006303284630c3ad722e2f71b01b637188504d275e7eae8d1956f482cb62c4a34563a4619c0fd53e4dceaf0a75b419a4a0a700e5b79b5bfc0708eaae965d3e76754a4d0aabd730e412c296c2d687d412aa2e67c1540871b0967c5d3f7efdb5cae971948b369ef3c6d4d97d18767e1329a1f6d42cb5ca0c829674cd896a9a0395f2f1cb8fe6a1737f36ae2f3896bf1128ae54769b8509874126d1ca6e21f833c37b9fba577cc8d7b0e2679a33d1046c23ae72e7e273ef6aa9de089ca073ba34d5034fa029e6ae2d9eaa338ab0b125d65bd6bea43bf3edfa11b9886c08ac0f22da7b0dfd59842fbbce4d2c5ea7567d17b6cf1e137e3097f2fc998bedb21b236f2423d81d96a987c918f680df424a99656cd938280e7105dde9c3e224a135fcd2fb693c2d16a88cbe098488f64fc565b8b1c10c6a56bbbe6bd4b856d8d8953866d57a700daa4e617a8c080e1567bc460d2903d467fcb169f337ce68cf12d18c5081d601a49dbcd57ae85f3d2b6970da6877d4ac2f4892f772ae41a055adb80e2a99a191ba0afa88681e5b71f1092fc58055719149172b49c38aeec8cac569384ce40ba480f0a0abc6c63bb83f600065ec1b00075340b973f575b548615d5da6813322cf5fb07d81cce0f5b6f6a53f830bab335d3c1bc2d14042e179c68e42279a5a49a50798eb2935ac43c7f101ce61dfdfd6fcfad3d0875174640cd7e693e728b52e996c58f49244a6e9890ce82760ac339f974e91e8925dca95179d00575de48ed82588a3d9db6ba0d6c1510d0131abbf0f4173a4fc9d340b9e7b7c025d254c487b2ecbeecbb018b47feadd635b52a00cb84a2918646d9381831fe2870d56db70dd5c7e46f8ae54812c501b3653df03368f5c75dd97868b83aac9de9fc2329c6d8d1799fbb0fe3f90facc80e04b9fadad7a54e9719cfa2811add0a3c7f2cbbf2f09cb6d88bf3586ff6a5b199116251e1209fe0d187804292347357a3362ac2bfa036130fd3bc87f4915755198baed26dde96523d54590bded4b224123e72a81c93c953c65945eeffaa86c4540ed6193f37db4bb3c3b1b830eb9b1c3475a1afd078bd20715a481ff28537aa8844339ffe702283dc9865012c1b110edd466eb5025e74cca4c0bf01a9653d522a00a8106dbb66f4c201d8e721348ffa8f19ae19cc5abdf9d2b21f132c358045dbf6c7a43fccb1a0d4e98d8f19d13c390978c237c659b822baf2d98d3d8e4d34a0e4774d0316a13341b4ffbf40de8e562ec1a143c7c9d4b5d0706df1940033e3ede7482b830b8f7dc35c0e2e6c1e18f0cb0b73ad30f594cb93f1fbc38e6184c27fe55c7cf4ce396051950f95085c3f65458dc402c48ce514736353f278b1e675f4a7c03b8b7af48db93136e4efb4d03793aaf5fb49a36776d7ca769d0c04ed00f984e1823917976e54b250593c12e3fe1b8ed628f6a7df0232add087b86a614799887194c22c0790b5e31a2524542693126e5ea78fb811ca4356c4b8e47c9628cc842dfafc277a39d501e6636b57d84dc14d0eca22047f773fcf5089c97141099159ef02a8f1f2a39437e3f04b2ff043c930780b96e2dd61662683f763b1bfa160ef6b1a2a9b0efcdd8e525a823d0592d4c0615d8d50269362434f1d0e1c46b0f1c692ad7ba2bbac258e73a3d83072824d21ca3412c5137339eafd052bb60faaf9ca9cd2fc1f7509013009d0214003e969e32707d3d74b70e0d652d34bb059e6907a017d8fafddbea2a654bd27ae00d0fb9ff740e578bdeb2f645cac046f55f45ee8de0f9532ac6836a2d5403cd17e568b4491afd0b0ff1b2bba720c4e9ef802bc9ba911869c9f9e945702f33ee278cb80e8fcbbd1d11fd96e5d77fff1c975affe7f7c6383d7b3c8f819dbdec7fa003574c4d64e7613c67953204390b5521adc4e7c5ec9563c35edbbb9a4dd87ef6a52b832eff07d6d9f3b99a3358e7a0d91a9f79a57043ac3d7603e120e545a3d41a3c7130c536bc6d1c03d57f9762c30c8798e6c6fcb3b986e3367b20024eb67a023add22de4ebb2cb9571d42b5a429fdac79ec16f69af4edbc66fad598c39bc7b9f8af53307ff38632658f4b0e771699e04adc8be90c29521492e12b2581a57f8a28c02e286227c8f5963a464bb668c75976f48913a0bfd6a719b735152b5b9e39c177656962d6b7107e6d250a830838b647ebc06b0e76d27c12bdded4897c1953a7504c1c19fb70d3c019db8dd21fd11f0ddfb341057c499666389a6eb16a278176081ef43df6283247b69b2403e0ef70c2e916a17cc620e08380471f7b3a246ead51e4721ba7e0a2379ce88548dde2314c7d3258937f68f1acfee23c7381ee2b2dd306e270ae6da886c0924f8ef1432ee523bfa4bc3e054e912c70a17fb1abd9f0a3bf4fead1195fde9d3855584203142bada675e652751e20148f1211dad6b5a2c3c65e35d7a638da63583201f01e82877f138914e90b5c18e14af8a205e7a45f421a564a662aab3b052cfb6456db0752ff7376f164b23c146a7960767311e5808eda47db9b231fdf0f5f7274fd6de710b32fc118bdd83ef5b8b6df11903bc87486dc84f32f0f3bd1ba33685205bd5b6f9d756ec986e66725d32ac7fcfe92a9f09bd57848a06a3093a6dac4261bd2277c79b7f6626c521ee34468bbd1dbda54c3492404bb88106b102d63905532fcf24e9ec670a0dacea5dff3ab7b94aa96048c54e0cf62cabad0065c6e1d0b49b1ac1f99c090941956efc8e549bd5245c107e80901ff92b9cbaab9787ed882699be93761b15f0de0f5f6b0a074f39bed01c321fa67c7e60018161bb00f2e3c4cc89987d40898600c9a83eea12c0a0375ba2a778fbbabbe673ff9596a896bac5ae92f2910489eca3239f44f57e8db7ccc6751c864d3122c00dca2a4394470165cb394f74c8d7478dbccff437cc1b70d3a35f2b5a5dd7d19f9ee86ff4d34f079e85ad7f91cb63a50bd283c6ad39e81b268495bba4c7e45485fc2ff24bf64a6a0f5bdd8311043d6727f6d8d9a8862a03d0dddb0930051da5190a9432111117803ff9f55560cd100e770d717ce9e227a7f96620fafbb48afc864c45417221156ce7803dc4e8c5ffcac0de60ed2c2ee116f5b6fc944616a442748c3994d94d802600a6ba04f40eb6c25f76e25c93bde7e5e440230c05a1023179bc1b35fcffc3a9366e2b1dd56e448579d380b95e74f8c9a0b4d49722bb60cba925a1ac9a249baadcf1f4fe40e6fa9027692f899260651ae10bcef4ed16dd18e80af5d1f7206d91ac833cafe128d865d767232dedc9a46f878326269e9258905722865998aa55aa080725241dbd093aacb51b4449185225cfcb25a9c55c0c02e5131094445c5d3c48e1e2fde16561e5bea575447471fc7effa6f0e495310917462a6ff337d414c750e5df3da87bc4c1fa83b962766d81fca04ee94d37dc9bc0f7251f9958b33363fc0258445091aef67a58635840f578db1a93886650ac0af38760255a5e86b28c1881156625008b75b5aad9505bd88876f1d06c8871c6735cd036fdd6b41038438c7458c4f0488b51d6e9bd01f3337f2b0da3e79ddd3e9a50d99024b25956711ff44d27ec050eaaba9848b3d79d175b112f0516f98529b175aa7b7462a36e059af06912e7db3c58fec82544485f50e2a916eb4fee9abbd6b3d75a4326b63ed862c183c24487fe56aecea902b4b758e7dd876cd139f3f18624ab888e3805e4a3b3a57a1c007de8df49c87f1a4368d27edfe23054dee359274801f3586964149ae0d3b8c5986d4f88b6082c34103ff8f52937650e5fd853f877370a83633f2476ec6c6c50611ff61998ce17d12adf71bbc3e7e44e75b0b34ed1cf09579243e31bf79e8ce569c6fa789b523987544533e6c95311796be44d03db1b8513146ac4bfe12e7b1f752ce9bf35ba50d0367d29da8276b7a38c9ccfaca50f81fa60264ae82a6f0c7529fb96e124951e1b2f5ab6ec19475263797df74499d9638e3a7c74c7ad66dc772423be09487a9b499156ebbdb4d56debd5629dfc0d350ffb007e5fc243ba9052fcbd58636c0d3793f22ec1f2adc0583e6d001ff723a49542d5e551cb36ef81692371addb2e376d1d4408d13d0e3984d5980d9ec54835509946e0612e5470fd634ba3ea836a3209796f9d7d2091fb412ab8fe48efdde9ee8b4189e9151e3751dfc50d6ec428443f3e5d8491903bbc7493badb06b3b05d0ae3fa87ea274db77345595e87b5e23921e5c6d835cf6122b32bbd63048ff08513c951ea05aa0e04c77c13982165ae43d5767d30a5fd04359c500a6801ef6978346b345ef27381b76ea6abd7709b03b4839b928d5cb333a1bd2d3c5498626166540f90ae17f8cffe11c5b0f78758d12305cb1a4c0dc0fc04232d972872ec776832ae468c3e783098948ef3ce30fbee40e6c9220a01300a34de3de28f4fb36e50c63f24b192b24301a420bcf2affd0f1d175e13872b578c1d0264411f2c6ba2c301448b9cd049c788f5f60eb62f39bc07f811d1ca21fd8423f36d3b61750bd95b21cf973845bbf933febedd5c23f93328daf1953239232977d81d753af4dff4624151f1fbd9343043b570f4ce06bdec7763b08ac6093e0a25481584e185bdffa35387458e9551cb359b5532294152f53e88fdc830ab042b6936afe1b7dcb2b0d5799d511186591233d8d0d0a03d6ba21f23a4a75814fba46641e0a81f6dd1214fa9e85d7e43afdeb0d75722e18f65492748285525925a4ecd0bb144bca2bc7c653ecb4b02de5a7e56409223cddb0dded1bf8b6796836a57c5f0b75793d7f5258757fc8658f349938b8b1ce525e4fb816d70c799984ee6968ba216907598b5eb9d2b812f49e3bd65aaf3afd3759634f140c01b3510a903282222bdff5103dc167c6589bea1f242a0dd174cd582d59f51df4bbb35d15d8a8c05f4bd53438bd4161a58f1a57a694ff5b6b3c6e13e4be66adbea8fc226d453cb2993d7d0981d04a4291901502bb3c5fc1fde243d9b607137e7cb3ac3d3f0d4f4d3032513726fb9b7b2a39261ff5c348d7345f7ec31acd5c6858583427d89dfc6db8c99b8d0042b2ea4816336710f397456e87b6286c8f64d369004c99e23074f3ca87bcbdc483b4ca69e720c0c0b9a549b90d52780a9da8e3ec05c57fc5631e8f50e18a93d36d93e16608c01b4b5cb7782f9145748b976603b9c9e72476977d25ab162fd1317ef3db0042fed21ff0deec793b4e3ecc4106fc10d497a70d99f0beafd0f257d33c592fc7507e68bd312f4dceef2ef6e3cbe9b466acfa0bbb695c762a452a0cd30bf3d8a29a7276666456af70facb91d3bfb2b674c2b4d52e0b6cea0baa25a571c2ee40f893da329200150579be9e00084c7b9174aaac7b278711e59643797fc72833368a943204a21f99d45a6abe7febb462f281493015f98f05494de690f15f8fd0d89d3f7fbf75cafddbe8ce5d6b00dd52848c0da3f8ba667c4a3b78a3086541e5553a7d399055d1a279e945251c36e4822c2e335ab89e2bd32b5aecb1db1fdb309061d835fdad7a4b3863da08838820a1a909d58c9aaaeb5ed64a0dd7b234b98c48fb13ae1a2f62acb7bdab3757d35d3e1ece13788a3b4bb5fcbb01db69eeb0fecb47adcb4cd67aa972ae038288254beccb107b8b1edefd9c94d239c86471c7c3c59a23a5a71cfd71800548654b3c9a5dc12005cef548f493a4d44b4944ea64dead1c5bdaba791a5de74a2ef149e169f209ffcc555fe0f7a51750455662e9a51b12dec345a5888c94b21a04ee5d4ec7b72ec5eac5d87ab19a64c828a2b1ea1c98ec337c77d270efc4883d7fe5aeda384489c43354125ae0e80bdb8fd676c892f39d8370119e8569edc0548e21ea2e0c46d61279c4a111175b2e1b2020be5f82a11cfb0886fbdb2c4cc4b2b739a49669e448a1f055e90da6c0038a19ffa597990074cd20122b945c041fdac2af8dcf7f0c5a9dec32637c60e78a3ff5bd853095e20fde2330bb65ee9604a4ff7b85c33ab546aa32ceb60d831044461066cde8ef33b001c21bc555cff8c7d36d61f3684db9dda5c3e200425fbb2fde755eb720494915483e93ffa4330e1a865aa407b8ca1a75df5b30e35d13d0a1a5e8ae522a7c4456441d7e312732a9049c4f80d3d0d647377975e9bf4d04423bbc17c9c4a753fbbaf9cbc97371251c759eedad43c920fb1f7b29c85f855306216e696e5853a214ff9043ebfee35243beaf026c839a3dd7759f7c0ba216fe457d971f233d69d2abf3cc32346c30d90ac9a093103c09bd06df15e5864757dcef42c1b4728460dd46ce49830521344354600299ad1bf1f1c02090b719180356095c78d2948095df5d6c9adafaf881b24b3ad15a39e0ae5b8294a8a32a103060271654f91be389c88f23e6ebc4503483a4530ee81f684fd8783bb2310b98db905fbbc26b440bd12c4e602b3c81bd88c4211c3757ef916f1bf55c2156938dfb60c6da190fe91571032e0f6937a602581a5bcff645acabba2a737733ad13a3e6fe13c63edb752360f857759dc4bc673c456b254329cf4be910df3e8d92d3ee4f83d5bec11f4d9454f753fba217ecbb2dcc1ffc770747bf0625d1c3d916fe79245744e24f0c7f529eeeeaa7070329e508bb75ff170cf1d37bafed860cfb1a8e6bbfd4185945538b7b9f81ef52c17009e5599085147233a6940ea752827be8ec45e58190693993d032b88357e3026caec11a338edd63fb6e23a5c7e9ff1905d19769d8860bacdf01b1682d4ecf4e4f7d7ba89a54a5459214ba4f796f4e654e3f16ddcb1f96b0b829a8fc14b491c9cca5fe82ac5eab3a204d029d544787d7b55a4e93be8f85f6f1172715a9dee666475175ecafd3947a91ffd74d56e25d234fcf25506bcbd50636d5d2a6f3ce4acd28e3cc8baa9e599e070ab0a2e93e2bfebe88862ac401dedb35c40f9d36abe23f5036a52ded5a35d7a9047806a4bed41aea0736e7bcd6c7b892a6f60df2306fec8c2210d2148de3f9a3bc94a4063d701a9b16f571dc66212c3dd50363de45bc8cf1e6e7a2edc62565d047d004e1963dde7442ba6460b67a157b0d9b88909ef5879d031db94e3d03a21dad9423ca94064f82f9e79aa60894d07dd9357a327f9d8e08998e7f660f9d359e499865c84af40aa045939d8714a658d66170f3db91b8aaa3f6d4ef1978297a220166c4710ca97b37ce733569eb0ccc3c92e7b4073dd309f778a20ebb8f2890caaaf7166de9414597e8896ed5a616be4aad2ec0a149ddc16ea4789f4e624dc07b342dbe2bcb24bc92da4fb88299a2399ea68e79336979e116fcb44264eb90493ade1c0b59bbceb82db67b998a894440ee14bfd2da19e467adcb1f49980837de708c05b503edfcea198b7c0e5931357e9aa31c761e1119674512b96dddffbaf506b2a27c318ba362af8c0686bd0e9ea7fb7fe088a3bda0b6e79f367d1cc3615a9a787e0b00554babdb830cf217d1aa927a79961f6d77bab5d070a8001a6b64403419e18e95510d24ee64ec813217563440670c1b105f2b9112284e2dbd4b05e591eea24dfdd8181240ae208eedb12dd2991f1b7ed6e1cf4d6fe9f7e430d20b63709958a2db4c0ef963f3699828394a58795de7b24b2ffcc9624aaec5d95126ad8fd4f1adaf5236ace337509a87c8791e9f4fe1f2b4f1b36656160a1890cf5e2d9854dadfb147304790b3b9dde501978ada9dd0ba3bca7d9a981f0b3f71671319bb0e7b94271a46b2bad4d0d59c0d19fac73e6d0a83201736f35fb42e7680fc70fa8945fdba8c123572978eb8bd282d0cc1ce4d78891c908f33bec3aa050aef9a5ccf2f4c4aba546500bac8b3f5c491316acf7ea06a3a40fc60763d881fab84a6134a902ecf43e091d845ba2007e1e456e14bacbab4d014059f662f462da0a3e43f78a600554302c8435849c8e5dae7e26956be74d44b87545264ff47b01d4d53d0677c9143b2fc5de328ef4d64a77920ddcef9f9649aefff64c04a75b9a2ff4e94f493012408c6bed75dcb804a9a5b8f75dd8d4c00660a8256a68cd8cf95c8f79c33cdc1047fae17d3827c47be36799af12569892313c69d253a831163e189466fbf9962d76c0acb7665ab3025eee342938b757e355568970f62c55846dbaa39931ad7b9019e5f2c94ad3973260c9f6555d61aaa976e4a5a618a9ade5b3a9549ccf50ab182c07b7021dc71dd4d97a192afa464eb6009c6a10c4d37aab2e8545eb119788f76c43ce4346408c74449629599e4db2a2b9a4fa20d0d5628aa375153513c3a126627d369dd7ef54c06d0417dd0c4c990c4164fe019dd3345413183a334da6069d4ed228f1f582b011141941b201366c31339ede189a4a9845aa8db30ca2fa4f24c61bc783d8e97044da75a33fac789c1753692576d27fa6050579471b9a72755462d0de06682f12f439df9e773fce0be2b6221a7cc8f559dd33edd38d10f552602c1c58864b9c4abba544cb35386396988d96a01c2fa9413d4e4b3b6e9cb9f02abbf0400159b4ee20165e73bbdccdeca0481bb12a6673f2ea4c50dfcee2604d3cad2fcc2b036eb60891e64f1ebb986aa8e639cfa97356439ca9d7aab54f378ed6b5acc4f131182fb8a34ad39cb7ec26c54076be9ac4f980ec65274a5f00132e0212ce15d7de60966996cfdc8ee5f868b95a63fb2863d8e7882e0e7c8fb5f88ea4e0a840c5cadc49be04c1188e91bb236ea67b96f2e80e2186c220af1318da35b25c26e3dd12791d3f6e1780a273bf62d682ed9c1bc20aa15706ca4c1f2d7873d983650b889e5c721dcdab79448708db44272e317356b1cf990ca2dc53db711303cd8e966988e23519a4df3401f53ced56f970dfea79837db0e0a5a930a2ce84eb94d082b58cc2ccea78dc7ea142d2ac3a9d5bcfc9066bbe6f10005d5e08f227aed1350db6b9fb5e461e99cdb6f1cca73c16c2597fc836bfb4085a25b70d87f75c4fbc4f43ebcdefd7a2cb5afdbe7e52c44d052b1528672e7418c56626bf8fb25f4551aae5deb5facbaff7b5912902097d597c8c6f64aa6d376087574d34365a0186e93344b8f9f2f2f56d450cb7da7587c7d789e86c40583aaaf7d32a442aff8081e80419fb30ca38b4067f6716bace43eadcee01d03249fe0fcc59994ce49b29b213a47d6d3a9b32f5fe3e660752efa37b25f251bf63a3663a77b6e370edba6e14e7db67fcf9088b29423ca321ba5f5a94ffe78bc85f7e16b4cb12025e75f9eaa4579740be627fc0cc12415eb063b7ab22aadef26272117b3b960eeb240e28f941784200a9d740688c209fda7ceef22ad955640ed9d63bcd7095c72b4678f9c65963da07581e5c4c95971575c0abebecbd2384d5950dffcd60b04ccce95c032ab161da71f2f56b1fb3532d96c2dc5ae1a8c64dfb1a4abd38fcfc8fc62d0e8cd84d4b54878c81b092d2db7ca0c9ed38d8998f20bd8383e2dc12f6ecb6bfcf0a58b0e1a6e4602152de4316fb903b7a06e8b25a8ce364c3256df16d1c341c80b78a11d7b6d48e2cc84e447b03920fae04ecee0e12a969abf386127baff05818112e82bc8405b8c8c52f1c5064ff845e024c10628d58b68ef3b1446ea465c378c3931753eb266f49a487e33913ffda2a728dd54e44e2f4613de47c1be8c806a81910e679525e01357246b1546bc19ef4d379dd3df7d3ef7831bb503bffcc44dc3b8bb4ba0d91ef62f77c7c6d4f52ddca6c134d700b184c65bb495ab932f2ef3409256d9df098a6c63c78b55cb3ca0ee03f6ac0a03f23966ed3c41cf3e7ad9c21f3c90361d6e2860e495d5d8d8d2495d03a3e7d2499670ce14414677cf873a5fc3a524514be0a437ac6a4bc624a11971816bc6bc04f817f44e8a87828849d27977ca63a906d6e93ff3f68af96b4af56c28dffd7db3adbf00493fe858f54f03791fc69de23e4c69aeb5f4b5037f15ffd823fcef7017e82c9481c3d229d083914836b7511eff5080f14cbc7fd1b5677497cfbef23db694cc1ce8cca3bf47ef3a754b5a670c934d7213f08df99ab19ace8f6fde6939816c398edd5cb21c3ee1e9178488e5a9a85b1af0b35c358b6595b12fb1b933bee0d5b7cda21f88a500c56a58ab9256711f71467c9dd9a5f6e204fa4a477ab4ec2a8e79b4c569a206d44ca5cc88d8bd49b8138503689e69439552dbcfec702590c9417f85e8a816739353e599c7d5970ab8c56108b5cb01b5f24f1494ac1f5048dfa85e0ebeb44f7c7b9be45b8dd95c4fede3a3c003a67b8817b4ad99188cd515d9a5cb01536d463e3b154cd1aa44adae3716f1ae8f3bdb1111b1ac0a04f35ec8e4baae0630f71522cc5c275503b9789e2467dad22328fda3bb60b0e6299468f289d37dd6105a98d5f504ebebef2ea82544fe4944562455ad3fd5744053e642bce83eb2a691a97fa0442566c509de262d4a941c51e428deea1531ffcacb5ada7b96fe76233689898b1647ffc80ee76fa520aa3e4e893148f8a3680a30fb5557ad83a03b5d0124871673ba1d2addb6a6dab699e0f9cec1764c7db1fb3400f4aa2c8b5eb35e516576987a47900b3c421608665c86e46bd358642a8c8fd440976c1b09c20abb9f6b58469db8d45bae2bd69b865c4dfbb158a8e1ac15a847a47570c355c2fe5121bab8b76b4f244f51ae092be85d1c7fa5fe9becdff4336a20e340bad47174c99ddd9c3ca4b5de2089dc5a7c015942e873c3ae2d1754839127fefdd6dd3139a8ec016d1e155d0f291645f0c13e921c02d923682190fd959aea452f04227ccd1b8e2e87976b0f4dd5fc0dff2bc0d40cd21daae6519c225715ceb60c063e6949dbb99ec32a3935eacaf07fa77b676f2ffa6b2a74bd4774dd8559122e601a94ce1296bc8fd4e283b3377258fe78ad10728ab12e4218fe0e7c841cad0e24643dd0b7822759533455c90069cce2cfbb5972cdd1b43248b217fcd55c8dfb729173b4a27fbf171a05c2436071035ac551e1ecb77c0734e0be89ce7f1a787472f8e2f9fc6b74e34c0c4e9c723422cba96bde5f9b4065e584ee4955c4a2654ef64d986d8ae97aa61dc11dc165732a508d546d85cee19a09cf0cb58816270d1e52bf149fc5c5022c9e11ea1862a9ff581295c5da08fecaa91144a78c4b3506b26980364fb370eaee925ffca1751a8d3beed08ec23762582c73a6b93360b6d05adac1dc5bb625f840e818ca71d8b486ba6d136e54d5756723714848cea52eaee1d1f5fabba6d8e971142f29a73181c6675c99014457a13ef515d9e8c3e5027df27b3ddbabb9d5ea82a800d4948361e7719696f24b8445a782f4af8eb514c7a7c99c66fbe097dac5d3516ffac68f01e9ddc0e444f7ac5512ca2ab8195da5495fd88c31b6f503e7290ddda69e3d44d6b4652bbfaafdfed1c0b081bf75ee224bd4be5f52865175d3330f6776c30f9c43ad1ee730731e8ad4aa69065976b7f3b8b917f50316d8ea4ae7862e02f4b5a50df366aadecb98d1432495d6ea0d4afdce6b2d10ba38ef769e98f59836f73e073dde880b0e0c3d1e46cbce291fb8e639a5a57f39558ffaf93e8a2fb0b0f72abc3d8ad12b153d60d9d0c28b175c2cc66299bda8d736edcee373a385c9d47836d16e92e93081b8ab5f7480f6436f316df13224bccad2ab92d1ad10f789e412dee10f5b3dc6770adeb8d65c0331efd13a5ae4794d74fe82bed3c2b9a068c3452935eeedf331e4c24ae5125ed0d3946c7a77e0faaa1210d24962954e5b783f14716e510be85edcf5fc0d62c952e4c777799a33eaa7f908360dbeadfd65f4c6bd82b2dfba0d0229309e9e3813df7cead8b39222f3a4c189b8dbb731fd9bac9efbdd97ba9451693630a82ec476c1fa9d8ab638a85aff6c672fb2b6a18262d00f6b607050c7d754ae02ca1f3d48b5ad2e8fa4b7e91e37d1c40325252a6e8f486bd91748c9e06eeb9b1eccf80c81a5bfddc85faa38dc2e2f9b0162455d1700dc166e62250fa4625e2409ca5486f36b87205e7c3e73653bb407250a3800aa4e529b351d152d348d7bf7bf5e1d07c72d1073a4b0e9fcb73f58b5b74e121403fae66955a20df089bbd661507aa11ee931e0391c1dabfa463e2924da371b7c13431e28d99af57852efe78bf0b94c71d2e570e297acb9e952b68022d2f91aaf8e4dc3c913aa8668d9a7c34aac4b50902d007a7cfd1a86e8e6edf1611c625407ae0b7138bdb1eafbb1f33de5d4a725010e42ef0137f7a33e014225e57da2ecdb117a93aa1f48ed191625d01aa8cae947591ce951da3dc9fbaf4b9eea876033bcab55fba62c627b621577f131b6174f02079012c5bd643cf2a8943bed9d63a140ed089b9c00f7f3b6476d986f3111d2d4caa8216791683decba684540fde77d27cfac42d709716a73f0ea1ef85c94213dc50bac4e9926a897c0fd873b6997f64f4dfa05737fc4ff8270af2c2fdd5c95a524de329523ad82e8025cf5c551e292ae8e3fa24af3cd8ca0fd55fcdf99ca9d127495c3a3c1ef8926242d9a1f8dbecae6267e3f05827bb1f21485b35fb09d1019a3c7caf0f321da3552cc6835abf526c99b36e4b282b2aa898bca7645ec7ba1c3c7a41d436929396406811281b9b3e816c3212650089d7c78d720a6adeb7f99feb8b2b45563c3fb2983f987cb2ee1df2d3b8af334f6128fed76e5a0df0b8255d68b2c42686d35c038759baa9752fc7f9a7104331ad260a3059df6a6d5827d193346bb196912e9763893bcda4bd1126b90f74ed5a4cff25c45ff47d3cf97d3a4133320d07fb3ece85fc67dcf81ec0c6a1b8f96363f5c498f3f66f15d9985096e96cbdc330ca321e082a44c7e3154d9ca1283cdf9d2c05b06145281bfd4892e15d0059629d01082aa785e9888bcdb446dead56b9707d9e7fa8ced8f79de20026d6d11757cf3f92922f008fe21661487c0296c4aaf1d46fb233e3cf4d9b94453f43dd810ffd5b90168c8b60f0e71b57d531b82ead6367ff64f0677485264b58892cce460b7faf59904337de4274e069c1062a2fec579f560cc3b7b1ff3bad271bf4fd3f0afdc814cad377f292da94cc59574e851fbaa1fe63e9810f2e6108caa89f711897d1ef6f4676c0f99e458434eda22e6f7feb902ae1a5afff55fa5cc844dec1d223d8455726ad87a3f8f4e19fd9a9cb02610344c6b7cd53554d6478f79d8ff1c7c6baf521345df7a8614a39ef039aa7b3e7361201db3225af70f0733da9351647cda75a66ef6c4cfc985ce9557ce734a1976c2c85051f02940234a4679e63055268d4a9a005d737ae3f251f0d5d4e0d057eed5442652d89cf023ad07ddc21ac238af484083146c0216b96728894be3f66533f9a371d1b4ca5aa0b439347f03447acc0617a72a38983c3c8b75272ee5dd86e1813815ca5195947f487984f270ac93804c2ea5c7dda3d20677dfd0392204d417192b18c4f7a0d743d85548bdc96cea5724ffabf8f238ce316b25fa90ea2f89063c00b2dad4131360087006f6e8b1b8b4d83237c9e042e323dae740f578142818af9f53b0bc792277f9ebd7b00e734a7127f16e7a5c9214d9979cfb046c76ea253b89495719e0d79beb79dbea7a868d97e2b08c277befe0e9681053c8d213909442fb50b4224de0301b546958cd15b779b6a670e753bc59106438097123d95815812cd5dea5c09c21e3d5529dae4db00e23e0029476088f12d82fcfcd4d481361a981cbedcd09dae43efc4239407fa23b16876865640bb707131c51d55e36fda4ac73eecbdb78fb27648b7d50addd27629f4965e527f392818cd35901bb036423ad3ce62c56db0c529e101dd070738a9f577c39f3ab8f1fed6c9dede2cb06ca09e589edd743c778f8767ed9d758ef42960a44635eec81662fe4ed968f7ccf5730a97aa7a5497359a3c6e6cb5234a4539b736118e45fae51714c552a7717f7a37598630e7df2082f3f1faa4ab2fe39e5e80674b2d1af021b1713790b1684a5ddcb976a0941601bee6c5fcb38fce35cc57de56fdbd56a7c65a205438946378b621a647f621a4df6b80483d6c7820d698fc4e46620b74e51edd65d2f83f822bced143d6e7db6df56465b7c28832a419e78d5047064b88f9cba0bdddff7079b86c29028ce37f46806c7e91783c3ae0dbfab174cc9f2575c0925f6b8eb6c1314f1c1ff9e9b36cbb043119016f58a93e000fe491f176bb454f771f2d3dcfb6e5ffd424e25cdabeaf2b00bba8e996ff1eb4bd147e20c17e5a57913367c786002a5ccd4e9611250fb657e9ea27c71b625387f0fe86ad8cb301af98a91eaf2d3dc398084b42718aff4d7ceaa013d94f0b614d7b468d5a1df73a00ab568a97e536648fc9a7e617cade280c8af21b79a1ed9a51c1a41ad6db038188b17a243f9d91bba0373f149c3811fd47d425d42f2b0a0c2f018d9a80b93e1085636629cad17517e6b0bd21c3d28fd932f37051dc0b6484656c9cc4fac19e8b214077f822ba38990b50b2d4fb5bdc396e4b3552a2c1960572a4873809fe08a8205fe434f25f1844053db44c550380c738fccd17986caf790cda1f4a165eaafe5d2ca179e51ef5b0ad21ff648ee580d077a016c56e1122c83b60cec5b6beb2dde13da0af2570842bacf8822043065c8124da10e96f4a50d74214947d4cad3f17428120e563ce5907f8bd3e72deff26a6198198fdd663c91e1951ed66633a080472f7dba2072c436ae81458aee103143dc1d0c9c26ec21c141d48bc38821cbe194d766713608cd78d89263b394bb42b5126604950b86b2024b851fb9abf83d6c974e24aafec06902da9c6fdff8a96cc4e9afe7ffbb13e9303717b38fdded747a7e8a10fae19711471575bf48c3f445d0184e89b66d04b0d8fff484ffca46d8e2753e603b9cef502bd7f359abd7a7bc395e3dbbfae6aacd997cc98e27cfcd6a9caa8edbdef618963fb2438c54236b7439a197d5833e24fd93a5b5f701cd8eccf1ae25ee3b4d03700671d26e0fefe38b85a580d05675d76ebc302a57dc9a6b30849bf2aec4f7771c1ce45861d0b8d22992e2ef71ade005085061284d2b6bb820c9ff7849c50bba43a5529c5f98d4ac75e043e153f494ded5ff6afb3a23300fa91e9a04ae5996ef31fc062e082e4b8aa13b7cf61e48f090bc3532d4c001175ebb6ecc4f0b3bb9454b551e045dcb642e58270a60f4110d7eb02150b8770d46416c6b333031f1d15b31e1751f1b46072b4f832f120510b0009e50bc4381ae9d53862ad6c0cf4b72a18fe4c3a65f0b23192e8bbb45734486835e8ffb6a23d499bd97cf79950f635db21ba255ca503727abc5471d7200d14d32d600890f6635b90f43acfeaf86454f72b99f1986a0812169bc6f54d62f7a7885fd8190c666638b2b544c5304db969d076eb29f7555aeb0cf3c0e38ed0eef490de8dfd87faf5d261e21558c72e84e41fd92d8daa313a89282087e7293ae24f0d48106aaac2a559e8921e2b09869e9c7148a70a2d23f8c41939f75e823cc184f0a950c5ade10d902c1f0a691b37005da88d10bdb0a0689e98cf66d517ce1207063887c2656cce6c664c5c9a7e9c2e420562dcc8381a4c871859af61e6452ba5c0eb7a19da68b190f575afa8b2bdc5dc509fbe7b90bed2336d0a7af2d48d33ac10c55701bbad6e44c6f0d23c92f21527ba878a6262137ac615cd22017fbaf8856146198e79295d4ea0056041bf3e8cc48cc06085028f1873a59698e76058b446c6be71121dff86e3ae6132e9babf38da53e3bacbb83d639de96cc5d66da1236b48b57d07793c1480cec80adf3d24952b52d297cebadd3c0a4d844003fd8ea3a0f9891c1ce60eb4becdf6ac49cff7fbfbceac88cf65db26588ff3c137566cb24e82e574708d80a0b7328e1db37f026e7210d243d20e91e5f54ccbc03cdbe137509d64a2b9b74a768699b895dd4b696e4c735de16f80947b38768bbb69f511366640dc6f603ddada979c71c3c5719b15c040cbafcac8f39a0d2dd5a22ebbb186c5297134f8031295536670ab23a765abc0551a2bda22b96d729314361afb01ac6a0fe2cb8cc70ec5538ebd623098ea7e8dc3487fcb0c1dfe27f5d4fca3332d927bd68212affc47129c552548fa7aab3d951a1354488528b6c83f91c90883ce72b5c7a2ae7113c80eb34dfd1f31b36aa6c232b5c1c0248b42d2640982c25103a5416bd1f3a020244d09ab38eff2f498a81d2991951c38e860bfb4a35c0c8b7185ab330135bad02f6671ef372790a78c87aff631300ee10e078a1b5dbbc2d9ab8d3bafeb1cb53a8b86d7390f52bed82f2707368c4d30cd7b10565a03bd9385a04ab0c4f2faed2fb570adf471dbb1755436d955d5d43ac5be0c9a65699912f95439325e3c4b7ab7bfcc81e022bef5fa364a641a5f24e8092e8fb54652bf934a49d02047596cb3212e76d8406b835360c6421b9ecedee07f2161f785af394b61d8d8c77d3abda106919f508cf9fabbf219e7d40c4b300fc5ac712e8b8dd347b72827248f187f29415eb9e086e1249e622a4c92e13d3bbd608fc51520f27b3b7bf04ed85385e3ac01a8161bdb57cf5b16ae69c5f401aed52d6e05375362d8946d49acf5c64b1ffffe9c04dee8128278bd0a27397213b0fd1503fe07bc445393b63dfd4dd020386bdd06e5ea20e8ed86d4ea82a6cedac30e513334365252e37ab026947482a9ce2adf3ab40178819acbc790699907159b13e80d1c2ed1b4d8f0097fb5360a9993de4f53b92a6759029651de3dbc8d70d0a3cb0e0ef8473b52634f231555bde17af69edd2b82c63d279b24f9f53f73dd6e9d5f57c7af8c5ddedc90d4d3df74fcf058a37f81dfbc4f8281954f86db691f8e75d945fdd3c4476e08c9bd6eccec3430a58b711bfef442bcae7e8c4aa2883186c6d023ecfee251c7aa7cb67809bc231b75d1b768e54991d6de48e13194db5c9bd9e9be30e46f73bdcaf2c08b57fd79fe3f320219bccb6cc95779a09d0be5fd41c2e3fbdba4a074fab01277a79d337004455981ac025509cd10dc0579de6b61f24d8f63823129b1b8a516de087eb1f3571dd7ddc4555e7921a1351c8c0ba92628eddfdee829ae63a6e73fd6ce175b6c1d8a1f09467a54ea002b93c6c5cc4488bb19d1d6f5228f5fe6d69ad6926989e47e937bd0427ebaae7866b920bdbeae65473b160e271366657e88538f5c1c0412cfea61ec33db16b6e13d5bd7ccfe4950bcd86ff49e7e94de64901e93cc33ff991538a9cda5b97c47ac31e39d8902682212e675036dfa2aede1da5d0fcae926e7f647e04603fae430777d1b60cd71a9c12f31c14b8cc52648da6f19d2b550352fcb7c67adeca503e6794c3b335155f2dfbd7125404a261b91cc139f59e613c83c57e984073ce5b783af70157651259817a3c8507c5b296136b446","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"d5848e9d66328ae6de40188a1f8fd3aa"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
