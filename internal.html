<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"a0c0854ccc3123d5cc84f6ada8ff7a2484fed9344668fd3c36fe9eb1be50e9ff46588761bd3b5ff14fba3385a0499ca16b7409c46042ad19068f8c5dbbd7c6385317f03190bb20c987ebf8c7ca21d7a9312f86fa31b40530766245ba04cef2bacd935bee980b0a15b2667641e3e0dddbe6483425b0d98e7ddee85ab7f88df9fbff42c68e0e4c58537466aa4771657f445c5629cf105a128f513ba72d66bb5c2ea3cc720936cfd3c4e38bb3ce53d3426e9f6dd267f77a6619514aad9e9cc64659553899c00cbfd3c15c0f07e82a74fb218898a4d82f058a62cc731253b3279cd83e58ff6544b7938c06addfd6f59d67cd836f04cc13333894d8118f0d3f71efc1f7888eb8c12f4a593b9c285173d847688190ef578fcfec195c02792cd64a6b4fb8bad224c904de6b3c64fcb52ebcbd7b4338d34b526b0832a9d6316ee794e5b45239087b1cdb51cd3b8896c9a9d595b57c91f769d7b4dcffd2f615d8c80808c1384620c9da817f22f8d1ea7690ff3279f89e91aa82626e695590d885a423549a8718b987f38ff005b6fd148d261038d6493c3f51b9481188da49ae4cf34034fa1b27761f0739598a671f47df427bffb664dcda0113152e4541a51635a329ac272a1454d7188ebf46f119a6d4446d75ee288d51bdac0df273062703d0ca877d3d97246b473714e0c7a8c586b9b28d61b36d702d7222f358386f14281e49f30ab4eb76bc3cdcb661df07e418a482a25b109310bdb9775ce7728bb0273db0d068d4a8c17b12082d172225f44aaf2ec9d02fcf9f70eb866027ceabc332d99cb00ae1cfbb669347c6f7500dbad080643e0388076e10c5ff145afe6f02525d8a174d65cd405146102ea6785e2107968ff58050bca3dd8a9c3d9e7297649dc517cb9aa9afd5a94acb84bd5b4b452d9aa44a771c05491587d4506c614e236f5a0262564d53b02aba9c2083cceeca8582eafc5dcd4ee5347c2df9617292d520233d72508d774ccf48be4b83bea1be29c3f1e94311bacae49da92ac7c39f1546d761086d761d69cb388f2de86969e89eab0a45930ec8cf95d7de631ea796e502217188c387fde6dcb13419e3d12320fb2a1b159733986faffdaa6a3b88bc509f663a20f50475ddfbcb408bd52a56fa1de616039a2cf9b13cf2b29126159c398c878dccb5e52769eb52f57c7b6e91b64226c08ad17c096f214335648a9ce2508319d845b8e3accc754556c5fce36c96d65c0bf2396a3da579ae80c1e498691c5edb2c5b153a6ae12bc3da3f0a78c85b87e37d7423a55915e1699d9aa6893bc36eccdfa607797c3161f88fb3dbea7c3ca39e7c17724a244088e70c81dee3acd11dfe8eb0b1be11a79ada9d5e82dbc338c8f536c9174be0738e33662f680ac730519fc49bc0e604349d98ee2af0e97eea8be57bb383fb670d2b2e635a07558616ec2d12f264dec82d625dd08c153c7e6170361fe16770a6ec08d55c64d9cfc2224d7d04f213a1ad6dae361d3b5f0d6830519ba26fda8e98d77dc419244e4881d06312b03a9be87656831f605dbe45efc3fd30469b4ffd5cf3d155d9f0febd052e457c24ec7b11a98fc37bfa64b096afe663ad827ca367a5e9cf326f8d91cec362b2d86862ba010a4b2dc4db21fb4de73d76dd6744e300c62105a58e3c5ff69d3d12efdc185a2c809fcba7449ee12a6ac13693abd27686e40ee12a3cd7b912a647610883e32e31aec2b4fd2237629a8888e0b67011f984e7e69f0b72bae0d6bd2b971a14ae68b9f51ca630009ce8b31476a136a14bcfe095eec85a1a773bbb3abf257346f8a7a1eba41bd5c6dcc3f0de5d87df6421d7da16dc9fc22319e8aa312baa308fc6df9accc2f210ac981be8e7cfeedfa9f1715a2dafe506b2002e809120ac370ded017be7e09625caab2bdd1a2cc69907f6af009bc8f869e99be78548c264835081d24495f7b8426b586ad35f1296c06b48660f3ba7883135e2654464ac8db05ebc167e9b0760db85db2ff03e286ebea72fbb4942e0c8e690dbf0bc9f9ebe2c5d071a917b2da90951f6ef3eb75f0c3e96dec41a782f070e4e8147c236232f59c88e85ec9c4311b2f38266b70cdbeacb77203b14dea3c82248a2083b4a3153354654dbfb132a007c9c26226dfce1b54889617e012407a45330a378a3a064b6a759a95d4f5c135fe6cdb7a867995f62330c0cd73c99ca4a86f1424b6c2b9eeff981dbd8a9efb3c69a843c9695cbcf9e1857f781d785908b444bba63d7b9cb00df30b11c57eeb0918325adff8e29c9788ffbe425e035ba1732d493cd5667078c8386419d804e6c3ac7e3eba8b38ec7d7150ec6c8349ec01d12232f5de89131810d91959393c4bcfca035feaaa29614a29f7b82360b6c2461ceb66fa238fe6a194a0ae621f2b1715fac39dd91a0b56e7d5515680fbc77650a60eb3bfe1b27608931c15e752c655b60d71db02135fbfeb0e5128296f3f1fd2c04cff3b7b00ce773623e8ecb1f41b57a67421dce6d109743b05f08bed5f8afd4ae18faf88b645bae695e8c91f393cdc1901c53ef8c7200a3c8387ff36aab5b1d9c1898c85d9494b22ea4cb255228d346f16286f99237167385c2265a388174cdcc01761cda185358bd29d48cb54b9dcb0a2e838d0036ef2061dd9d565971e556558af0bd6a9d12a282604f86ee33c207b065e800364dc9b3afb771d0a5731370d691afbe7b6ce9bbb11ff5b9d429a13816113fcba237baac4b5548aad2cac132dad5787fb281607293a1c16311574a4195636a2dd86d75bcaa9fdaf60b45ce6ac71d8bb61796084befa28dee3b30687cdd498bc56f549d8114ade86a6b1d24d9aa31660798e77f29a43c61693b446a4cba08d0f562605d154ec32ca224da9a22fbebb91fc0c4da3b48079837e7d3b0d79d20ca1fef97bc56150de924e71b03ae3e7f701ca0abbd84a23aa5908e4835b8084e343bc081a69390483fd1cad9c82c60711bee4d7376b0984f088a5d400ccd1def5e4e86d91450e788138dd5d68d708ea8c707229cf20f1146edb1e8a32e89ff0b210724fe427a3d58dca6ca05044eb36e41db2a54fdefa8b7d3dc9eeb5186dd2666270676618bd5e8c883c99e574b7501902bf1a90ed48a8a717e89f89e4f77b425468203b443b03d3210deb1f2b70a66b3187e175790ae130409088abb0a849f537c7202c842c8651ae1c57120c366362c332e82e20f7fb8fc01b16b466c83e04bea87d80bf74b8a6cb2bc852c105b634be666b2f79c04b0e8b203b7dd4ec0e5250df9ae10a0ef788b0e5008bccc6fb3215b23405ab3f8af9808174dabee422d32c946e7700e1b4f70504623c317fc91a8829a9d8b2131bbed2a8b43f3cd3d71270546eaf9bf54a8c6c9dc3f2d27c3c4dff7c9ed5bfd50a695e4ec47bbd917f2730df630aef268944cdff0ced32ab4e049b13f698b0e15913c6ed3c69fe5f257f900d604ca40ead7cd29b0378e7cdc055cc74af3f29c75374e74121a46802cfa69f31b37cf334926f6fd56f40fb224677e4728c676623b1b8aa0f0b305ad83b02146dd6d12be74c0f1a0718ba456843cb9e9ad8bda90fc723fecd5d017d0efc97918195e67642d98d0810bbffd3273fa6981a17b8a107a39601339311a9901c6b226075522524afc6ae51cf7e63c9d5760bfa93fad96c901a36e69dc3181d14af24264ea72aef2d4051356c99f09f9c4742905c73380c5850cd3d1a4fda1d27c1fc6646d6895ca0708bfe58e8c305d1dbae998acfd4d3cbc7713b7a29ed62e3aa89574208d88f50548dddbf340394a7f2b6dcf6b7efd65225a47e5f41d66704c0fd34042b6058f4e06ca4ce06f4e2724c3bf56a6993c038040fef52a29c36df0844d34a24ad6a0ba107e75d4fb17df9d30dc0ae6023481bde8a346080c302bf528d6f51d77eeed55cbf0c196138ba2263a4d1336073ea2fe19354da56ebbe64285d64bf9ed5dedfcbd71e12155e0330c4ae21d110dcc64337c4c2ea3c5e7a91d47c8f56515fcd166a357890d69b2019e1ef297fbdab632938b5f72bc47dbd45571fbeda3d23fc7c658b545f8cae97363351bccd1f1f414c5df1aee18159eb236ca80fc3d207c5d9600dc5ffef8a4dc63e214d45c03a6a275e8b47cfb0f91a872292ec91a004fee4d3c1935908d9d0d36e1f8daf241a233dccdb70b9eec2eacf0ee75edd208868d63dcdc0f001ac36d62930adbd823613fbc4d683002ce3e2de2842d0931c40f1ebf98a674b90319ed1b52bb9ebf9079e35525c283b9bd73ec690c68aca0d569ce53079ec0340ba066926bb0016c642f735234aadbb4a8528541057a890608d360fd925b5623f29fd1a5354253d6ce841f9633414541827471be73c9130298457bca91c8fdadd90556a5ef6c7c4c238a442f2e07118390ba507bcdfcc2a9537b83178c0ef2c0049fe467a81c9c4a237228a9bd5515ae4e77424d9bbdc0e063fb05219085d374629adbe72ed60ea8f39c0617f5a0f39cc16300fc3e534d77e293cf74d03dee69d9a16fc685d2b206da0574e98c16fd65d7aac7ebe8b0e6054fbaea09bdf39857580b45e251d8790767dd2fe3e1414a8fddf7b5795717159db91fa89ec52a95b871fc6e3c6861ab3fd9ccc7dfef0fc7f4ba3a3234455e6d4d2e73342995b01f38bdae3fad2e146e0ab786ae2485b998c95ace93229d8d4da032905eeffa87c77aec8a3a7397d9acfbd8a29bc294070edbb52d49e9d18303f8efff1562266d69ff518e1dbfc3c18c09f5ea2aecb537f765057fafa7ea4b3df1f79e4e00908d10b4dea55ba18a0081728276474d4a387479f7a80bffe268121a5c15c4f751fabb09165345f76301b24e797dcf327d23b671d12466a0aacc4a5005705a5499e55bba9a6af4007f9f80679470deb525dec689f1b8c570631410eab3f1ed460661eba80b1bc60446ae6f378cae45e13b326afc012f16fa3da21be02c12315b6a5b541369b8b3e4b4e0d8dda9dfc254e33c30e38f2f6600a9828c9df25334cfeabaf3af1bd5fb3ba06414bcbc455af828eb5e99ac25567ec80cee296c1fa51510c0d7095160ef144e81118b01fe81cf9c45151f648fe6403710c22f0d4ccbf124ecd6bf95e8b60b2db7dac78207e27060860a5a7c71696688d1f6ea7f9a0555ec43dd0b934e950e26fc0d620484909e248981c4e74605b6d6f4211997c47d8e8ef83dcc475f98cd3e68ab546e380d51e584d16470207592ef86dbf3159b8ef0bbeb74078b27ded0d3fd8a641398819dc6517d5240693e1f2a3efe020b1a97ba136a6c81520d04ab61885462d25875feec4023099e2808ff553377880214533f0665d14d70fd480c7595c8656252002f98e1ca1e082a157f337996cc9642d4441ec638cd69d2dd89ed251773349eab23cb5814dac9f76caf244e5f1dc1e4eae4902b5dea178f2a6985b250dfea3ae4443799c3db72180cca8fb7f09c5a5392aa79d25d308732ff4911d574853bca1083e24990d063094a978703c420c9236a5f8e26601f380e4075412f689d98d56a77bce451f02d9f23309508f9a2485eb5f98003ace11cde4c87c5691539d6fecebf939794330422217126fd3c1b136b99daba69236766bec9e01f0bb0e346a887d9e8cef0054eb14e631eaa846cab195529590f6cd4d21a4c2c1838d1f416888c79185689db86904693797b89ae86e7fad4e2a9d946d36214e83c18cb7f2b41661d9bc3f756fcfeb2713e1321d85a8af56f4a4856a3e3693ed561b80c40dd66d7693001932f1e120f798be99bd6c5bc1c134104fe610e7e5b0a0d7b18e9909dec26edde9e02a1e6e7f867306ef4d85538009ab1d00c0758d6751fb3c0ded0d0163e867e8475db3c8abbea3238f96c5f089d391cd6781c93d664e34dd304a6b343c69de9dd84bc4b96e445433c03defa10bd5b40a0f4913c2002a1b2ad59e080293ad5cc95a05d16fa2e765ab6bf2da0863e4a2c774abc6b38fb657c615822d49bca721740a85f805195f7e1f71317f7f4fd9101b86a67006626f712e00010097ab6dae500ee81aadf2ad96f1de5e9d6c0a60e0b44de8628ade5ef45b1c7b02f20d8bd5337a226502b65b24302d332445fcaa58f04ebe9963b58a6c48684ee7cf949bad4007347b51d4ee56772fe7341591ce2a21eabd56350e3bb409f43a77d25ca5718aac40503a2799840ddc52928ec84ecd8d939114a5b0f9a7bad4210bee0be45004ba2c1a3265436ef01992b1edec9db9060ca1894857f4ea2642d21b09c84ad91228b39180bfa3d2e2f3eca7221935df8c6ad3a11731a78e23f431918a0be9b8b38d5b7c57387b5cd0d7d09bb7d1c9e4eaa9a8b06a0eafa834f4adb4c678cfc89f685ea76b79d436f90a369b5298528f23b039c60554588fcb882276ba8c125576992502894a2467ca9047526551f404acd302652b525df09edbeda788efe97f5f7357f20ed3d4653a4a0750ea146f2e85abf9611dd6277e49e1bbf7d7d3154736a75ff1b0e72260da4e73f799479b86ed6b2536cf85370c22bbeed8d4b46146a21f0b091fa96a63583d793684c58cbeb2049e15f2e0bbe3a8807090226728e54b4cb9ec809f873d64049b9ac6f0e2ff6c674e26ac45974a87c702fd3fd7845d5961921400bad030484a09a5d738d86100c17897a4e54188cf2b54fcceaf34c296a9c50ffddbfd5fd5f329e704392e1c2f9e5c1e389edbeef8e5f35f70311225c6827a3503bfdec7852bc66eadf5a9868aab7c7136967b840752824d1442aae3a44661d6c42a90c01c867d3c55bdf3e41aa5da80feeac605641360cffefaac24b5af14a25b3f64fd60526ea676f0f061da9945efdeb0d8170fbe4947bd03fbe66a58c203facb4225252e0b2b161b9ea27929284e2c27cda185c563289350fa4c40ad5d56da128607bc03f1bb6b956dbd602f914187d209d9a8418abc1c6f86b07da2e5b1636459c17cc3f40d3981520c732b6499b868ffd8bd15417960c7e9294df610b01dbc886d2a46535e3fca46332c1d97aa62496f5050a34a85091938331864a3f5a6da86ba4883b9cdc1cc04a64638a086f4ef34d3ca0c697fcd119c11de332d3ea79fcc4f99c38fb0dc593c474f2816a81df957b3432fcc301c47db1e6421ffa2843b91daf669d1108342c20eca5f8c83e9f29b5349a60ea1bd5ea24789bc1d31ef27d6c2b8815b61140ece6b5fcf0595eb8f09d62a7e564c66dcc3b9fab805d08a82c57951258438b1e702ad7a72341ab7a2ae3237b3c0f73e876d022866a5f5b8c330496e5f44bf465b85ac1c3bb4954124e350f9dacb16e180e742efdb561ab6982b843b117994e41003dd271266006dfb880d45987814e01b639d7c190f00fd29af7d68d62e8bf789f8c203278f432fd2aa0ed07588d4a77d8dbf8b5927596a7fb8262edbed5f8f7b5c979de47bc970b892f7cf3fdfaaaef3487e8883f69771478bea5e7928a23467f027f950eb155a97dfc63a7a43f7336e8721b65e2cea76227d3144b7593465ffe909c5a96d240884cc03ad2d30244c22d5d295907e10c527a18bcaa1eab5aaa6fd298c096fcf294f933bef1d8fc4032a1a456c8c25e826dd3a47d45bd7732d4e006539458ff375c2a42e1ff4e16201c34c3d437e2387ceccab9a956e632e3a16ea0f0144a866d8d2cfa93566c03622ef8356240903b8ebd6f62a691415af8fa5068f8e163e7e89e47bfa3132ac7ba5498bd994bea1a38b6261c09cc36eeef1bc1027ce134d9968d6af8034eb20604bf03751523a243f2cce0ad15a8949113380bfdac4897d6a6de5469cf7257b3b430df5bb7729ce9f8c54eb530044f091965efb47c29016c08258e84fe98bb028524b5b93117508dfcdb4cd218a36619dc032f8ab8f43b0a3db4606d065758b93b80293632b585b78aef1f31bc9f9f5e6be287b1abf7fe681be13f5c174489f832f331539dceab4da9c94bd3c167b9a1be7e0bad3b1daa1ffe3ef09305ddd571eaec4820e0798621b38e1206d38d8827a36016f561ec51a65f7607f92ec997d96d8f86e2842b612fa7e919167485c3957a68cf41a0f64e8e64093d96a4446b95860610d6497885677ac90bd2481847ad47fe24952e9175e3076407c0b3d4e8b461c96f2242c4ce88a44260d780b1874f2d349fbfd4aa33266376eb8f7cbd1f911f652c75e55d91c64026e9af7ec0ae9f67d807b247a83371d501d4547fd73ccabcba6b5bd0d196fa2860e16f3ed51bfa648cabaacfdccdfcc0c09c66e34fa60a2d708fb68acbadda349e39f0bb2b4293c31da855496860f890624560018ace1b69cd9d188fdd90aba9856ef85b5f98aed27b516186ac8fef79c92ba34afab67c0af5ddc84cec97eef7f6dcd1ac8c68724aedc0451be38544c8dd822daba45f7743b39303391264636d08eba6971c44a1706122748a4b6ff1de83d839ac1ebe31d74f0d9d0b84665c4b88f804b3b5fff03aae7c78cab6d6bea61841cb20f16c0b13a497da966be1205746c71624780a44539c4b5b3425c83998b42f8629ade962aba2328870ed6fd206f623037532322a671d82491baf74dc406f9783c6ca93a68e3482639e2bf8fa0df57b53a6e09013b36ebdf2c34450a2aa333b390b2b4db8cf0cdf3df5258d69dc5e1195e7b7153f3637b3ce9cce31cd03e1316b83e1ff5786f1f9535599f8e76ab6ec362723295908850ea0fbc8f9730877aa3d7c4768a6195de49266938ea7c2f01772724aed58db354b09aeca064ff23d5c174999f0de496860990a196415dcd0b81b5a042fe6d829f3a12a4c642789bf8bb60c9f52b95be630bd321d2b2b5499c1f28cb4c8cdba5abf2bb4edbb8d92c922a7f94fb49ec5e0af4b497d5420903d1cbf6d816d3c2d42dc5f02025fd23aca5ada3c29dad99dc4fe42ffdeccc01fb3ffbc8812bb9eda9bf8b19c474a7e449d92732cd0b06017f6df1580c7391242bfb424cad05dbf29a89caca00ea8b2283454f08d3900c6cfe519422b735406d3cb3bbef5931d2450558bebd6e965f0b859e9d3eaa6d98d2b544ffc8ead64c94712a7e664d92b1671889db71e7b9d7a1bbe851388aefa258b9497a552ee37f49679262c1076e25fd2a5716b888e0af94ceb6bda4ad16aa0f560960970cd448577c6d784ff16d8b54d19663a56f296ee54676f747f34f04327076c146b429b4fbe4131d140f9480d43645acbee2b8ad2cf22db017ef0a478089c8a7eb44ba574ef0c278d8e52fb62ee8875bd3f2ed406e495a1208f533763b4df3a85f42ba55cbb6f89f38f44557fcaef9ad7a5f3bddd772058d335bf8043ea407368d25ac550f71c9f7498e05280a7be5f9bc4c54e53d541c68210015cd60bf3a624da98ec7dd410aeeae089819b7afe46743ae1ef4a0e979405427459b890b8244adeac420797c1f471be364497c2a7fbbbc49e4b340c565226c034fdd81b740ec76d269454c050eba3b935b3c5013e52716f63493c01fef3a1eb738724d7489cd6b5d5a5a0624081a22aa1e61483f66eda5e054eff22fb2b3312022df3d448748d8359d4ac65a2837dc4df4570301f4066001ac5f00040e610cbba5df139a21d9db4885117c54bc44f11fdeade362268e93800d89631a34106ca2ec44b9d381a75b78822c840fc2164ba5a1a3964aad57957ada24ee6c50419eb476ad9f6c35f6573b6f6fe6128b524280e26a2fa6d12926432e0576ce4f02723423c897500fe420be98166fe442f5024862f571427fd7a01d5222f3bf7d759b70145232861f9c520f78dfa951a3a008a9fd355e2bef14e291ca74609149dad2ae28985502c8e4409c27452092a6ae41b71259e293f8c7fb9e6daba52b3465e24adbad286453ee335b61bcdc1a7275c41fa9450fc52896a894a382c23469dc14c8754076757149e93bcabc08af6e6cb2fbcff2efcdb3df21918d08a6c6e867d537be2e400964ad7a7798f8c4a371aefe921e594b9ff06c0eb4a4fdd089960451abf65aa0ae4946663a670b1ed4b58c79ebf2c4585d99008e98363292aa81e936db864aff43575eed80e704369f7dafd3665b4000bfebe1024a6d172e1e2ab41e9e09805cf17c597dc8c3b8bed0be54352b971e6e0dda63c96ce3c333aaab67ce82042c13981749a8e74f8dd65cdbaa146965a0161a789c737d3f7e599e756f0e38d8b043912f0824dad49605fc804b82cff60bc7b8c6190e46c1f94f2d269ef21ad40837b19861456bdd2fc4261aa1e5d0d3758e2bd6648035be7430e2c66e7ca2b36708aa1de4dc38bac5e152fd1c16cb00dccdf1017f815e20449ae08c46b4bc9b94b904f8c2185722ecf51d15b6793ecf445444d63e956fdbf821ac18dc508174d67ca5f319ad679081991b76ade404eddfa942ea96ead57cbf40c3f89e6ae8e66a9aa1c142ab0ae2aad5bee058f25eeb143e0c10bd27432008fd70d56292487912d7a10bf3397e9b6b64ce875ef1d600a1362b2d788a5c772a458d3aaad272a662ef27f07df6517ee2b8a24c806accd72efcac6a583ee93a315502361f3ed98ede89450378e0cf45606d961f93cfbd0ecf4ff2a1357e7e579172ecbf3917653acffc70388d06e94e4f01f1b4cbb8d848232c99a13397df4358a1b07f5f128cc834c08809ae3b7871eaa2ef4d9577e5ee6147d6fa1e4397ac7c3c2880d4d8c64ce92d34514082a55f63d19eeb388fd99256a84112b462d6addfc54db14e0d6c6a4b1c5aca4708877d4b45e5cd279d29dd20c521d52b93318dd258e92ae330c6deefc7bf4631e077c14e7b9ad01ce8553e764ce99c21ea76667dfa72b2372636903d9199191e0ae8a263274dd62efeac899a784c2a8d5b5f83eff9e1b29e98ca1731abe7bcb0bb5a8ede803340e12119fc2c2858b7135831abfb20a4b940c5a159c0cc382c71cfcae96ebafe4e45a4a22ac23b94fccb6ed96b0eb575d3daa80ec153f5794ba0171920b21c43ebb58c6331e3e6bf33dd630f95e479640e6788159265f56d320c2969ed2e421dd21539c9836a1ca843579b790abdf9d2b5594f3bc2fc345856e0825226db09119955413e733033699d702d17dfa8996b6668baa90b0d02d00b954d142aaa0b048a93860e4ef64f2546cc5ea9c9640fcda5d34caaeb7be923c3630a13747a9cb9ea4357178eb3e7f271c9ae53bee0160527e4969d2ee15ad4dbb2eb540adfd1729a422c404ebedcc0a8bb602c03c7ada16c1025591e6ed73b8a06452adc1beeeeba89390a0493edaec4021a285507b58a0e422830f0b16972e5392e59838dc5c39abd3432e6de5def81e8ac7bb9d6bc43165236563c3429018cc266188d51d04dcd894f8eb91a3be72510853738bb63d70996ca8e13a1b2073958ce8f99a91df2c314047bfde3f02a6c5f7d458befef0e53bfe40916f2f79bae8768d4bdce48ba19725025a543f50bb80a3a327b65cf5669f15153efc124dfe99453f48cda767d35157b0a88286be816dce76026875ea9f29f68f0b0dee5fbc4fb9cddaa2ae6aedbe1a0535f6a8591656e68323606f5c646d6ce6759458fbfe6bc9d46c1b448efc8fa29939a9ccfa0934e0508b0624b961afb0f76fcac30cb15632cb61e8268fb108e60052af4101638651a6e3ba838ddca2fcac6b5e93356190e94e609774fc4715aa32e572da6907716681d6f8bf7ec615513388adc133985a9180d6d8fb42f98800539531ac97fc11b6929ca32fdc3d32509f15e6b1c74f1dfe8c57ba059d73612d6960f91b389e776b9d48c00a0886f369ee107d6833e04610b26b89817d8530ecd82cd605657d0a2b168a9a8d4fcdebca69e9e0b28f3ef43c1191e2430a1c881530dd39b4ebbd71bbac75da43ea8484c6b6ec2fefcc153a682ca09675411a8b2a24856936b98fe3841fc3444ff6654632519b52246cd44f4ec5560097fcd8146d114ad88d554d3f5e91e1cf514d23e9108f436dd569bda1f5b891987e4015dbb0590292700fff185f062e0ec978296cdcdddf5d098a3a53a2f58403bdf6e4377c176678435bbb838d93e359decd4e7996848d13c62a313b91b246bc843d59e890f2b480ec78ebfb05eac3d75dc1f32315560b22694a499f681d9efe58163807f3e9e52ff2a95b53b45161a4c4bee56ddf45ced9a1816efd0c7569731e10c6f192ed2b2f38b002c4157d01168e2511107190b51adcfb8a66bacc4cf7736fab801f1d08acbd00992f9b5cb54b5499c754cd3fa14cbfefe8f05fa265479cf2d282e56319ecb8b8c8edb90d827a8055dbfd36db005d167fcecccb86a813f93b29c7ce4b27111c26919869edab9f587f2750352215ee3d7fff66b3df3daee252f0ddad19f0d8ac22c17f77348bfe891bfd3dafbf5fe2fe9c8d1395879d83ff1a3876629a15550a733b70dd803bcfa92e13510632556f3d3ca7d69d41180958a3a36b18e9c31387fbb1338eb1fb418132e608f1cdb0bbd12133d84ed0e520e58b4f45e6178ba2bbbc4dc3b4d3fbf880847ac707aa5285520603331c996a4d60afdb3a2b1be2e1c2dc8cee94794b5b9864667f36f445e65a4ddaa948f913b5439acc3047d20bef02e16bae3e33466d221e642d4c116665a9ec6a1b51983bea2494e934bc67226127e9b0b3c92080df7b6be4e0b7c8d96730932ddeca4a2fb94b89add9f970425e5075d35ccb065d0dbf30fc0692dd43a9ad80ebda71479d8889a872b1b99d7a352432d0082259d01ac0f22b5ddfae8f60ae0c45fc23a7ff26774e27a63c8b52e1c626df387a842da86a957e72861fcfebd08dccd9768fb092881191f0738ea18b78d9eaed6af11f3e8bff3150ff8c4fbfb0e82c010f3af41ac6ac376b5667d32d41d668fe865ec5164ae702ad4b0b29335a6bd7895b1dd2027fa658405bd256c0ce3774ec3b931b5ecffb3b5aa1cfa9c3fa01145f648fc208bd95b0d9fe1bf7cd702d4e1fc33e8274f08955c0860703e31d6b32b6d4f6b7ad8129d15d56d406a8dd3e2a7538ef3446395cbb17354ce206c45f85c4abd4a4ec7c1bc60d194a4894f82bf72fe082e7c15393230f2c53a6a54477486f0947c7ddd6c6ec18d6c26340b929ef4b1b875effe2a6aaa20bd67eabfcdfc64dcb779883dd1aa6105435b6202afb26335e952a2bd2c0ea423efe6d5305416bd6936de3c928e3ea0aea7c846a9a08ae705338719715eb7570cf282c11b8c4da3b41dae92ab489823f6f8ac2dce960cedd4ea2f6447dc4ee81e9a75d079b9b954d3a28b2be5570c9b2acf5f75ba79cfda302c6be81c5d0b2c926c822e55102e6a5e292c4c77af711b0f685284cb97db080788616ab0e912185f14228f844671dafb9cfdd7bee21b53789fbf4251fcc4d30fd127d9d5dc0f5c675d0a5f84a92eb4cba3b744a8990ea910a849db18f21d7e73f39224429dbf26bbf5a850106381a53eccc1de4bed1e0c86a0c7e0dc02c035a5d58412f18bc9797e8bbf93ab6ff586f91757577e87ce6ebce3c3b7aa9112868437b02ca05f4023e02b483cab117762ea8d55db89dbcdbc2bf7bbf16d3c47d86014bc6e6618e89890b1a01acd1285bdbb74bb10783871cc1eddbe818c3c5ccf9db185157a9ba1e7622616317d6bb62930a5fe11ac2f85c78046ab4e5d2b09c86337e69a15ca7c0069a7cc0d49641d4e4fd47cbf4a5fbd17ce5a83613702bab753ec537d1c3476e968fcc64c4069f9dbf3d81766499fdeae7d37ff01e5742ac297486f7c3158f648e374c45d59b917caa7b836746a385c95937ead757d275fbc7f02f39cf86a77b4a8380026d54c80aa6b1b62fb0daf70d3ee8de82168c79d0786f24cc92cf97dd6c29a99c7237605bba5100b127adfbc371123926ed5721ae017a01f93f885a42b054a1411ebd4fb1e121bfc7db1262a77053ec34b38d08342e1e3989cdcf82002c43ef4a489f734b5559ca27659a6d5fb16ed76a9f8ba4d3ccd6fd45df91fba62c92a11b9482724e227bf963bf46356bcdec22e7f8fba548ea0feb080317ba50ffd32618c73d939727bcc53810803a36b67c543822bac634bb127330a9a11aa11d8ebcdb2d772898ce307f810216e18f7e3563ee0c97107da3188323732ec8424871cabfcf016bc6fe8e985164b67b567669d5edbe5fa8862e48a1a0635d0da41112b43124a0acbc97cc7f1dfdd62807ad9100b6d95b4c296b1840e0ce617b31baa5e46a0b3f76f05d83873a8f9883beb849341446ed9e809959f91cbb01a5206460c01a5c4c1d283a28d148fb5fed40a72b791405dc99d62b5ce83615c66c6473a1229ae812bc3575e5fdf029a1b8767fb03d9e0948d988137b47b1c2431073add7602e844be04096376b1bd6fccfe287c22ba1cba495aa2130da4c7eca0eedc986cfcfcfd576babc06af81c86963030dd409a255f05d7a4ffc91ed4efb99367f349a5550ce946c36b6612b250f6a9ebfe6a851193574a176c16c6106368c75e3feaeb41339434ff7e17e1c5dbf45c773f17269d86993285dd3d5dbccdaf2a3f4cb68505973717f885d4ee45f8ae7075f567d802d23569dacb14ac5c9fd1dfc996858a4b7fff81a712cc851c286ca4472ca081f1e3a793e665d596ebc75c54b70a4986b454c51140f199894f4303fdeb5dc527bf51affa0dbdd5b306acf28266b2ae921d2146d4b0c560f353f64bf1370870344161febdbd5d847f985ba68fb414cfabf1545006b1dddb679540aaa4b55c3864d7cc0c2f02a292f4704ffded28419f3157a9b0ea0567ae84c474a9fb2875fa560c685ae846ec307e1bcd7b84937b107db3574a7571cb19cc4b1bb249881ba0e5a18f923a3f9ce22ff965dd245222e760acae6efe8ccda4340928ae6d8eaa655baf0620ee1ec6e501f7046490fa239d6c833046a6b7b3452e9da8a381e5fc5906bef3d831ae689094bc5de8c4ed59a5fc001465032c3e087686a22cee627b7a08eb874dbb6e30db25cf99e221560a752445d37026e8d1b0632ccb2c7cb89c8ad3680758982cc4c83fb561a286581af65a856ab1bf0e0e4dacaf22745f0716b543b70bcbf434e4f7c0d1b9ac19b0cb249c0b59c27c0e9331565d85bdd37f82db90a4a967af29578583e4a03c6b9ae412e72d2af846cfd60e0fb45f23955c3c15a28a69de02077bb61587496093dade5e315fafc40e8f5b9b67fac3fc85f9f114b2d744683f12ec9d7a8134c022c80f6668e3f7886478a17a6327a447bbfb912a31c4282f6ecc9e97f8a235d6ce7d49f03623523426436eb4262f552dd2e0deda5022f9eb5f0b8c3c21a61d919dd0a32b439945f7669b8ddaf3cb538154d87efa320b38d5a410ffae93984248280ccf69a96fc5e73fdcead2670c1991d29855a7a636e5fc1900369b913c1911470e76434591197bd576da292901a772dd5886e1b15c72b96076f00b64180bf579d6f9f3072a04ffc14feda7c2da191c536b42406447bbe92cc1e41e5a3d1c300d5698a3b18985895fe964cc944016d286d2cad59d517ffa5715c452abdcc8ec2410e35c31af910b6781b3dcc2f18af12aa36b470c2a7acf86ad0dd234f01e99ed8a16d5854eaaa4130ccfab4382f80dae18efa19a1afdcd92fbffe69de356a97533675724c98cf112ca295d61402c52e36b5e6b20d6e4b05311d8b9d949f400f360a4ddb5012fc02fd968865a2349f173b0e70b8fabe467d43f10889958a9324d7dc8450424e11d35e740a0b158a236b67600f285bce3961f130f0beb4ad03653b377170a2ebe7bef920dc5067e20911aa52fbda5744b3a541d76c9ce912f058ad435e1ca0a02fc82ce3b355f843c533ad8172e3f42d3864caea93f4879be28cabd1459fc8fbd1756a32898aad2721a8e9e77f85e53cb517a990bf61ed36cbaa6855aa6257d02be10f6ae4df3a41d172b7d063c4ccffd592f27642db60b340b30306ccffe8932ab0dc25790620008a608185de517d317e677211a713a3a859a8f5b26404b2bd82cc20b88f8ee6b59a72cd18a9048941cc04f8b881fea9675af040901a1657d5394217ac77dfeac0b0f9d74985be49570bd0cb441635618dfd7bc71a7882890cb9ec212de2ff5084e6572415ce7f30bbace45d0f7385675f37b5f4d64fff38256a36a2de24fa31af6cc34ec9d712d6557c68e5fd207459aaa1d72ff31df9bc16d1147a90493b4871bbf54eac4ede3f4e6877355a5b49b14082b965505a2aea7ff7e56b502ecd2633c735c58bccf446cd0433e3346928f096ee412cb26b70eb3cf0fb5dfa94d1a8b1d4cc98b02e7dc5f08736b54fcb5927fbab38e7311c8ff03610efdadf1290da77c251514be33c7c96bae74dc3f21ae3ef8855ffcc4fe0ff17bd53059bd077d69727d3df6e7d2f0fb8665c259592017bd9c9e41e89fa2441730b44c8ec1b2a456b196842dfcdff7fbb610ea255d9a86d1109cd2bb27c282c65cc2a3633463876754f2a704d0a650235db466611737a0522ad019930412f2f7f24ec2f7f699d82d0ad78f412c41840b0e07a943e29f92dee37830a9467ec2b460bb44dccfe4273ddd37d9af116c2064f0e6e82f8d3f2912cf2ca300eb18bc7322d1d60d70226ca5e40910d3ccd9f78031ab32514366719e3d1b87069b9bb9a8330698ee40e5f82629743c7a1be7a2675c0d63ad9b99c9b7d630cbe67830a920e015d2518cfac7d77ef3dedf2d884a7a461abec0afe9a8848c5e8aebb075c2d4be530bd7b75eb74dcf0edc7f1cefad66208a91866497b8ab00f221534f2380e9506abdf6c78b5a29cf9ce662275b443d678213810e0ddae87dc69e03f0b2ed5c0f1dac5ba12520705b9f99b9ab265d78f5d88f6d64c6b609f418a4ddbee081787b56dc87fbb221774672b847093b3eb994663d012df13f85b75f07ee4de38592b4a5c8b02039a8410b98199859e6c98b08c080a488cf7307cb14e729fd9f01f60bfc9564cbfddf3e05abf8bf92e606dba10bea213b5602c3370a039c6c53bac9a90da72006e3d525b54bc769c16404a628f8d50782b51b9a56862c6f9546a9f53125d8a42b4f15b0f3f75f375470d934deccd796844b5d6d44031e64c0f637a2d3e5d1dedde6fd2007dd4dc94105bf6d2fc8e56352248f6a72c440f6b094826537a9f598b1b1f4af9956dc7c73ea8a3273e682a66f92e4872bf38cfbdf1ee15bcad6d245d113b7986c6482377df6be54e318cd79280e98f18a9146dc518d4c97915de95a0f46d9bfc8ad442af9a3d6311ccae97a31c467e77169efd2f85dd963f02ae9478d43904e907f71bc5d2e51357e8f611777bb59be78eb84783e0d1d81f34f6990ebd1fe5511aeb1ff43acdef14ee9496f41ca262797747b6f021a06ea86cdd5ae4a296e9fd7a5281fcf5d37d26eeef4a7cf3cf0adf680046959d768e05e6b4349ef380110d5f2a138fd84457afe83125308cdedb3ad8527289b14c4acfd2e9fe5fe1a1daa1b8f0f26b3703aeefbc4c2a1cc0f1f0e97eaf317f8b2b560e31cb0a56b9584b66a1f86a072623213a9f81561015c3169c47841880ebbb67a951d094549fbf2a62b4e477a3e518e497314bdbce961c23442a8f49aabab8e1647222a56fd34dedce3822cb3b89e89731e77f8e7100601b7f209610258bacd6cbb9b4d83047754aa848a673c663ebbceada54b3035390e1c1ae4852381469ae23a9266c3baaf0435f56380470af7ce1d90521fc4256af052890c2a34e2875de64af58e738c6e1d7eaa56a765348a0c47353e4bf733921680a24fca8d30ddc0da2f2c63fe57b49815f4f7f68c2e7505079f16f111ce6313292918c0cea82c20844835c1e6e130be8b45b0a8a00344c8d5a253159967a1350155482011a3a283570d54fc5951c7f2744b93ae0f9b588ecbdce26147bba380ff6f573b26c379829dba8c548d789e25da7c5cb089319795139dcab609c92de1d3ee03b76b94c66086a1fc74c06370e2d1719920615afe2cf552d6e927d2e8d22d19b4518df3c215aa30a448892b9b1bb1163125934f585e01f083905fb45354f1276a8ccc3f04c78204cfddb8649f134fda04459809f9fab0e96d49ed3707dce0e77b22b9304f248a97a39982077c58d1e4f4fe89449fec40c73fe2ad8466f95d3668b223d2387a9e3cb35439228e2d7adf60079adef2ef53401cd9e6109c6cc71e3c4412e7ae74bf3fa4f60e0f5200f7d93d6057866949b747ba8f07d5249a760b1b4a4ac23d4878160734111ebeaacb4e148cd95ef732358318741bc242e0c7768196d6cd11b064687589c40a9f3bfcb290e36f808c01901bbf4bfb61c6b79c22817d27ef0ac61ce403fabf66e040465f280bbce4da2fbd23c1eec7e5122034043f2d98031a3e32e016e357d82d0c40a7b761f7f2331b1582d5aa0fe8d62be386d251adceff2ac350a981fcca4112e59ce917d377e79b20df8e64136d96c455183c5f836be0ec0e846478fb10314f6796b04ac448f08370aa0a4819ecd1bd7394da15d9abb54e61474e79d86e7ca69d1a0b83cf35e4a23afab3f6a32ec543772b282dc92e8e227e4a19edea1596e1d404d284f743a6497283d417199128d928e8e8d70386681dd101da17b5d0b2ac9d05727950b26c4e10db65f899ed1dffddcd16681f0e9632b379ecd088974458f228f41fc51104355a620d6f1dff86998957b8566f48ee7e4836fd907316717da4deeb7f48e5c93a767e7b13d1fe3b7abc85c32143b3624f25e327e30d913731295f9b636a6932da7d9fa34e0cfc656664258afd7da57d108f02d6b86792535d3b22c3e00f0a46112a391c495d029911798115edb16062422de0584473deab6dd63109408845f2038420adaf787680c98007e7feda6297872c2ca443cdd748996f70197a0bc3580e2b4eeb737a5433051debab815555f015d84cd907daa1ace99d86bb6f3f16eecc23095ea7e29b2bea653431806b7be3532bfd73b9b5e84aec9a873066da262fe9d605f0422d1ea05b55522348a02476ea02ed959a94da1007dbf1ecc3f8849eeac2df136e8a059588c8036576315fe5fd6a38a15eba531bb5097d88d9b621fec7a4e8d5358abc1223ff6d2f6ec5c4f72a7a884b45f345204815117291a6470959b4861c81b5ecef483cf35d13e5fcafbd96ae7216a2987ea9a02a6dc19501112f35f56d023f4324814bb7a9f6656e304bdfde5fe4828c701b65573a605f79974ba3d9e6ff3dea55e738cd57e05a598aefe698de7cfb7ea03b1f89157d663c56c72fe24e5f0889702f29b0782f7618fde94a629d4d4597e4f71f9ab4a08d858c2cac05e9dcda47789261a75192016646d41a07fdf3ffc5d799cdf666226ad65ed2159bfa834166456bcb1c3bb5810cfd4b61aa9be252ae2a35f9f0fd0d5814673ccf62fe55157e4ec14","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"927aca8f4281da7a77ef43c512a3e197"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
