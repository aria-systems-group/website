<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0c31b28822cdf4ec46fd3188f787e2adc590f7919c4e35616f2ab3e6ee3bfed124de22e3c7c26561d6bcf45968cf31f143913565f20c062615020db4977c4ae6f77096e3f4de094bf5a40abed380163b9c97346a756df6ca2998ee0f6131b9714a6b845a78cb4a42900df0ad05086eeaaae6a322624bf7811c048ffc0540047fbd88e59e1ba15d26339f1c5773fe44525cf8e52a284af91a65b35b30b0c4bc856f489baf86473b1beccdf7347a21573ba2d4755fe55baeae5d2543b972c16f30daaddec071a9306a0d267b0deee81df9fee9e868f9440ac150f2a5fc515245855ee5a91c331334ef0c30a1791ad0ae55dd582cce889a48a645c90f3d98423ae8c29d969ab6a7290a6f11c4859112cb33fdcfb335f45c4ac73c8217c1a28432601c0ffb2792f13d3553ce62f8d85e4c59a7d3a7eb3ad83a703d818d751985f432a8764e70052bee202e56811e5cbaeadd9fc11f3894fe0651a834d2078e01d374fe45cb37a9db2099abc4241aa8a706b28794e89b08144aa94e3bb8e2b670da2495e5d4d13599fef2b7669b9b7a4b931e12e86cc180dfb85f8b7330e30fa05a29243daf55d7a165c62d1797b63f7a591c5a81f88eb65c749189ffee945a288d9596743425f83fbac8f6b8d1c5cd441752abb352d266ed0039953757c6e0cd3d50a9b6dad117e0eb9a86ce6131b2a1c224c75e5be9e99718d1bf0bedf81a411335c791eec47b08ef918e07d4cf5e1c5f01779a6d938cc3c5f5eaca920ac13ad777d595f6a138fd756f0a99c4b8d897e991f5d85e9fab8e21a70b3c535a6a8306adf88e3f13ff768d64e782a323065388946581ab8ec83ee9cff8273ba9f8f7ab92eb6dafa93fb7d7c76a20b60a32131b4050fc486a011aecb34e1208a58f9205d61181eb49a7f14b6f46932ec3ffcadba915caa848e78d8bda206741326bbb6a107cbdb1eb992de66e051dab72c974a99c838be1667b4f2723a73faf46250bc6c4190e0fa504d2cd393e04530b66290bf1b33573a7203e3bf816dd59fa614c494864482946e1ebe726528b94585e0b2c3857fda2b47a45b7288e88bb3739fb6b2a97b6c7c5e88bcd58f15e14324318e90248b3478cf057ea675b5f6c06867c8ee9c1e19bd1d6ef68a1a490ece0a1d3542ee46797a79f7892f0188b463ee28147b34e80351155f707d16095532dea5e855f8c72dd98c903297e1cd0a6ea1bb60da00bd4d9709f33247fb090dac8b9675409d34d0b9a302093622a9f9b255ce9d4628e940ed55136d1a9794745de94f91aeb11cb8810452cc72152d8287936efc9550e838cfc61441bb039d042d6ee401af7397f471cedb86d668307d0e59053dcb578d5df551bc51bda017db120507047bf6e9e0c85857dd9087d85b60153af6a540793367b6bb965612a324d3c7041956e97f25c287c655e17eff462a08fee611014d95af611445ff3b3a4b39baaafdbd3de260218e875194d7a7b069f143aca586e1a48873519dc276fc5e06f8074cc259aeadb0e8d9daf711b499473b9f827694efd7ac86f34e54e6f21b67b683f76336b4e024d6313d70f462e10d7b755a50bed0280ac512b70d2da9c1d207c2e226b14464aab1103a15623424a3f97666517a67e704ad41678303e895e967804625c95036ca1b40a4beed8b2c267cc6469545b1b92b14013fc6edd9fcc73ce865cbb7b1e04c4475662880f65767f55e19778e109a7c1e64bb9c091e61b4fbaf96fc8ab32b2727a69755341d15c89f70bb45e1fa33d59e52795e8156b35157c89f13cc97731d849420872ae2d2fb39eade2e178269e0b9bbf30e733607c97184429c59ce4ecf9c3c0ea0675a0fcb4f3763ed1f846cd38b8b8d36d8c9f2e41338004d99d00844475d04e5e871b0bbc7054e819e914379bda9def40cd8a1d46dd787bcd8d160b5c7fff31dd152fa1e8d4801b446ba3d6b41d7f4ca4d1245dfa011c27dbd56a3977d39be17214bdb7fef12f449df802ee65f94af47a886623e2d4c3d381b3fb98129807ca560acfd693edafc9039d8ff4f8ff52660ab5777a97d60696bc1c1b2e0252e23309697e8e242d587ca8194dfd0aa7a2350bbf25a365287923fac712a943778ab54fce4f9b548154bcc69b11f5e734409d5196fca96f3c876395cb7c41ae92edaa0eb35086454355f5717784cf7d5df1f04b9dab210fc5d8ea35fa06b3c982b935d74755a0b23fefe9fa20782026ec0a78a290b0e64d7ffc55cfd50e0aa16f0bc7158183028a18d02f7ad7ad6c8f3505536c6027aa6dadfa312a7c7a3345ecf4fe35cb6d3dfd83171fcbb1910025201c1a3b7aa666fb7a498e30d2db4b6f739ca6aae2c876d1d24539f3b4b16c6a048645d5e8f208fcbf64bf6a2d518de2493a76fa47c3afe842d9dd6207c516bd1a97222609608cc2872cf08be95a875c70c648b3dedb70490da6bfa413c930a36cb75037e9aff2e54b8fdf1797684389460dfc0544d94bd1be4b600324cf74728294b1a9ffa794179cb4b55189b84c401bbd59304112d9d13a28323c0def1d021d993588749df83817aa3e3b3cbf0e0553c08649b93e320ccb56b3a7cd02c00cc58d4608660d21085fce7f0b884324e060f3c7e69e7240d06c50d7e251369e0de1b0a9e114e25a7bc626a99af7eb26ffa00ce11bbba7e62c8413169357fe454e954aa9311f681de616e73fdaab81984185e4433fb627e74e30c8984cbc7e7f170c1d3861af3ea0da9ca9ba74523ef6ca13693135d67113e47c29cc2a314db766cc18b54ffdf5c97dda0131e8d37f3debded45b5dbff84740daafd31e74c0016e9237a7a894f54b2accb33ff121bfe85ea4d59fd62bfed814a6babf3b81d1239a5835084bc9e6a594cb72fe961d6ca172eca0cd77cdff630d27f7dddcde140a54d0e15f6891dc1fd8997fd9b170a62d0762f8621558a7b5785d7064680ba84ce0d40ed893352d2697c8febe801cee8b2b323cbc0835b18f21e53f5235a0a0f47e6286a275aac30ce50f2e3681f2cd71b2c6069b57786e5c9912afc2485b37d95aee19efcdc7157cf525d45a90b07b108988fd99a6d1a204ef69f036593e56b1066ead0e19689388f16c9fe54ee9013fe40a9c98b5e84cb7e8db08688edea21c74e5b3876c5032a961582b162a0daa6fdf7515b0210d8d56206a78014038ba9e058220e5608fac0a53b8ff1b321fd3e54a30b422240131fef4bbcaf39293286c99bbac9dcff2a0505cd10e572a3a89eb122e4497c9e53e4bb7f40183eefba6d9bd92096b71684173690697037aa682b2f06910a75e9e3b351534f5c4cf961c43dcf15a328d6686d8c2c5d98973f684e33e591fd56174d75c6d5d95de9f13346509575dc0e81861c05a646d29da6c2c88f5af144357fc7aa53de952b741442cde4f9ef969456852dbd40854dc51a5863d62fc1e5194106b6967ad7867ea1a8b6a8a4e979f40f44f4483d8280b368772a4a1658f9cca720863b73355db07be5a881afed07fed794c8f9276dc4821b952bfb32356dbe09c5a2fa2cfc17a2cd93f3db020789ee8d6da9011d8d4c0affa2de103a955b141535dfe4f2ec732315dafff9ebc269e69ec9e837b3b4a3c5628ab6f9e6832e3956d4f8a641dc3ea5d960b5f423207293299f7f3498e8d80466547d3aa0bc7b1dfb331bc66a1c5a0c2d07a1470063679deaefe200c786038f3b7d9e9d30a8d04e0f04702fabdec2987629ed37ef3c9a2dd1c22066cc36da976360a12096c3a011bc8847b881c2509b10dfc5b571cf7a230fa0aaac0f11e706620450ed62307087d3085167ba0ce3e2d81b9b474eee6779fcd4457aaf2585e39c8c0801617ff4eab68746afa8eba02823044bea8d66b81b5ae6dd9b16ea05896ef8240caf10dd65e9a30f9a6cb08c671ee09d81b6786cecae3563b97f3a3f417db9b1ca7fc20708313c0600c6fe43d4479c9836344c1680948dbd6fd9485a4efb3dc513d432c4c176647b922339f5defada5c2757c08c5c6707906f0fc899f841f642ba1ba7281dd891433a1828dcef4134f1414e237e79aa81af9970e3205a4dcf6de45b90466ee5bdc0ab1fd6636d3eec86f1710f6913f1c30a9b8f7da4734bbe98e331c0348d79eb2deb96129f5b0657f38b1ff4188e6590b190825757eac505efc212bd8b9f5f4adf4eb7cc66db5e4fe57847e0aedc601781cdd5e99cf0ea070df0598fa552342875f69eade556995331f31315c28d304f4e8e884a36fcbd68f82922be9a4c706dd4f93311fbeb7a4170631b09b3371203bb8bbf2edd594cb00d3fb78cb420471eea4566be0f42cd9481738ce777d890d28c261e9532f00407e4f5ec72e1adea35598acff09421137e6d19947cfe69a2c34736e382f9d32ac94fcc7c23f049198768ec9dcf77bf0a600005c60eed495176ed381a8f46f5da36dbe3783a49c30e3752c473623c42fd743ca7170d8580bb0f7dd1d5323eb9496a42766aef8087e7ec4a0eda08a4ed9150e40ad93f4558a187d75ecd018c0f5745d4d5d9ff862b7c29293c4a1ec95d407eb29872a5e426818b2bb5eb3fa384d682bfc3533f41e14a71bfda82cba1ff473f0ea3aaa6f27d8536039017b19e769674fdc728aab8803ee95d64528afb3200beec50f18033df7547c425d9c33bb09957eb40997ffa7223f304acddfff8af6caa66bdc5f8baa2f10b692eab8a529a42994d1a35721914c501dbeceea3379204d40e140e5e43f9cbe83c22d5e24d83271802424a0d031dce1db4811e3ebe80da788fdc77f615fe2176540b594712cb1244fc208f638b547a798c11ded7b956f887f96d5f38327e9e34304d54ba5f41518e4624248dd5527991c9d60e59cb84269df622f00f40d4ef4d2dac6eb848381a3706487d5ba81851a62c6127d176c34f27f6d50f41cfed8f1ab95f5cbf355a71c681c8c257a19dce173fe3b5c5837514fc6a12fba984e20b68df7ced70c330c15e44a9fdd78d34c7f6fd18d674dacf6f9df6c2529fde9f0bc8d5e11a33a1dc5cef3d2f9b8476aaaf3ccecdeeb5add847ff315c4cef988ac96b4896d2fb05498d6ff29d703700d35eab2ed83860795e4f124b8b6e2c103933a3dae4f68e3c121b311521026696b61c07d4f1cb357def2d4affc11104f6df1cf6edb80fb44b617e95a967eee64412254a2426a56b7aca0316ec2d7f8211337e86629492f20e88effc6a2d44dc79e529da8810e89fb884ea965108d849ecf967996f71f2bc3e13263a8ca8fdeb64b9ae37ef36deb32b605fc6fcbea782f8e6f3503920316b9c18ad3a0170bc705472579666d257945852d2c875022c4758a12817e3aeb9f9eb728c09ccfd0c6d05e5444adb175e416050cc9d0f86e85c7c6e4bb08e297dc9eb9ee875af059f2b4d8edfe57eeae5469443b20b5d65519af31c0636e21d337650d9fce3dfd0d4428e4017978c22b8a69001ebe8e05b702ad4f62abe0f48e68699f7f0521ae4bd722331da98e534e86e178896b24a916ce91c8276bbd50995e1c6d1ea244ae031e3d2de9117bf6d6a253f8a4563d7e2c3a917dd292034c6dd061f0be4a021e96936b09172f161667510b0ab8195971ce61e97685bc99011094cddf3fb7c2e32ce26daa2cd82485c39ec754c81a5bd1834a7c27a79a10fdb331c891d1afdc82e1b5db4bb96e493ffc0ec1b078d864faded78f878244fe388707542ebdf12005ad89331ed57d8772ed0f5ff8edfc9dd59bb18db6a15d2e12c54c2aa22c6912b1a74c8256ea6da71eee455140f260b0ef7b2b8be491f87d38885398f8e05be96ff426b93006e265a0d5cfb99f4328a26ee83a7817fb7d1f5d053ee9caa30d33d3ccb06e656d3c37a6c49630038c3a031f362161e21294b7753707969bc570c729bcc9d9ac7bf4d9ce196f20951f7e3242122f5f718f407f4f7186cf1a0c08977c043f287e2858a30242dea9df749669dc2343c9dd86ec5f460ef9b0cf84313fa84cc329dc0311cdc91c90614a7035a6b712590102a3019ebdd4943433017cee09a61480a51c904e754f649099d57ccb53cfaf1b3e28689b17fda831eb7c2d118936a2b67684792a338a117c2b7d596628a8404860e04bb9d0f78a6b5a7ede8cba4ff630d9a4e9826aa2c39caf9a29f6a064c91b5eba8e8b1fae34fcb3fc8a683fa5ab0e9473a5ea0f530df0ea14c33aad13c983d8392d5f006d743bdcea4b5944827138a7dc4568376938436437b9146ca89fb4b3a349a073a2372e547bcbad5b8a69104267a39312f67554eb7dbde3161746a18eba2bed9ca05763a2daeba41674909a90ff362266c65599ee260183dce5039ef0a72da15cbf0b921cb6e8330ca36432c34bc4e0a1ff3437c512eecfe721740908684e1f16933e8f4b4eb613f920daeb01e31fdc0edad8da320f9f2b245cc9785407cb49c64c3a1ddc8d5d04a4885433c44829e42fa6faff641ab3df6086c14368b16aebf5bbfd013f084f878f50aa71ccfe5713cb0cc801a3f3d3de81e60d0a87ccd844e11e28d662ad0c134b5b841c4ac479ca07b661b4913ddf0ff8bf8e6a1f876e7d4e30fc21aaa4e604cf767fb29ac24eb57c593cddf105f9f9739a7e30178c5f4a82b9e0602995f4215d01d77985e8c980c02b510464dfc98b87a84d7fe834cb466505c9434f929881b69d30bdd17a146836c1e3191b0ac706025567fe21a38b1b7b7618d3ed7bbe807c82bee6e17264dedcec1e4020d381febe8798fa8a691d4234e81b5bc57993fe4707f5bef1769132134caa7d31ef21daa51057ad4c1724f1683e89aba4d9e79c6deeff4bd8ac44034861d4d77f6d55e3c7591b7f1880031361e58041519f8df81d3fca50c92818720f3c1a61840790a45e473d9828bd91658c0ff5651e832a0183818dd02e0864e43ddbbb5a50f3b17d42f8089306bb693f9f23be89c49359f9fb03af93440daa166f358e78324361e385d54b729cd868e44bc670be80493ea08858a4a40ef406fb63ee53a47928350da9c51702a875447755e83fa9a1ad6da18aeead88de53e7ad69db87accd72c150ce1a87e3efac2e47a7fc91da40108f0bdc922fd57cf5fc268cc0ed8a09320bbf2652b69b279fbe35ea1d6eb9856643398554c12e455df0acbc4906a2cb244af56d14e1a8407c837ffb2c89068ec8ad617155305d7d41ffa3fc715a3dcdaba4f044f8fb8333dbb43b79ab110d5061238b29d75477db207db5ed8c4321e13d8a5f1e2429ce85b25fc33784d177ca1f1066dab6e4fa74526a77b470733a5fad03c758895adbd7b9180ac2fe2d154ecb24775176757c276bd5e4577b40d9d580d2a59a4a0b2588a6117a085cc35efb8542029258d379c67cecfafcc83c671b4729c31b270d746f7edd7331bd3a712297fd1bc21a78b3d21b725f7f7d08390f65bee85f588debe2fc4b7ab5b407995cb8c1b99a8761d0f74dd64117e074ecfb647f2eab3db298da8862edc41b1eb56abc4d1bad73fca1fde7030490cdc91d40c940d5b87d22ded20593c5f0230826509f8c15241425f1cf42e2bfe58a19429ce944a153f6f801a06cdcaf3a1dc801deaf5d7a3e153f61c98beda60faaca9f5455f8aaec2a221058ab0842d29d572d1da94f2d4f904263ae2a890dea3e58d8736f50e1fbbe2a3ba9a8c38deb038fd42a475c0d50495c8bc8d09ca0f65a0529331c0cd3d14dc741c61a67579541c2e20f14c4e72215e23509cbc82774842a6dd75beace7fea57259dcdcea19d8a3fc796cb08189b8a67266864f1870d9dce2ee66af9c3b541cfc97cde0e71d54f92cd2dd7ed0dc2a89506e0f5d6efd8915abf2bd2e0f1f87c54539952068a0d1f0afd9d05f899181bfacb26c416d498a721c0971be262d4404491957193c8170fd75398798421697a1281a2490f14131dbff9b5204abca7155c66c3d6b7a6ff2fe4dcdf323e55ea681008fbda2ea698964fd5e988c4e182f4b104db78d8aefac94dc34f0039d1e8b71899386ec5f61da02c3fd8783bcdf2fce7bb96cc33f50117f2f6d7ec3e60cfd20db44fb41b812e8bf5a49043edcb571b8a7800829f4d4d4a27d8b56f15891c91e3a6af1faf0940c1bdd2d10d1693f12a9cb6ddc7511d220603d67cafe17e186f3322462c52ca1d3ad37174536137474d6db1e12998baaf6dcbbd960a3248285ab707d7e4a835b72cc0b3ead350e4dd3d1e109c83425dd094d4e1788894c5c2cc37e2695851d11f17cec7b65bed73f227dc2772aa3f262bc22ced0b4dd14eeb0b3fd0d1d3433a811c5cf736eeae722cdd2ab3cedc720af1558285f8152f430fce8764287c9607c8f6f6cf37b4759107d674cab0c37c5e873bbbd65d8932f27c4ba80c9e64cb27bd6dc9828e98479e4fa827258e583c7061129fb89f713d205f4c174ab3d893ab32071cd531c20498fcf0afd873d110433b7414af9afa0ddc5adcc6c6c9cd2008c81dd487fecab5987e22cafc983eb55c4a0f333068d83b26b74c1fc238c06b8782130bd5f89737a1203d5b67396b600df5836858b2e9acbe2e779255dcc2111958be1be4a6b5ffa83b3e48a4a38394744128ed23a3ed3343ceb03931eec5ff055b21f44a47c09d8ab7bf4eb9873f72a69627968ad5fd9570e297f918ed4860ebd78f9568f6c16f307cb4d07febcaa8949182c370d59d5061f35426907c229cd69b92a64545225beede0b8bcdb78f919f018abf08244edbd9bdc2b3d9bb72e900537a9282cd0756b73dfae106476f0f981165a38ba76978e5b42fef5bef0df3cc06e56b291f507a1a11a873195bd54b09a81c76cbae5647028199898e558e3115bbdbe620ccbea612db2f81573b43da99154adf9c33b1e6f1097e114252ac3ca1062d3417346121ee505aea90abb9977b6e2671fc278094e9435b884601e4044092881f4119a5c6176a1bf704f5df7ce116b2274170572546bbc9727afc4138924c074df430d1b511072de2f9232befc974559b8835ca2bcfe0be466e91bec6bbf35537f8d4530d5f2c3ebe05cf1083f50863e52e8e2492b3f1afe58c1856bbe0aacb1282d8b1892ae23a0dcb6e93254d3b8299e8ac4576d77b4950fbcefdf3777a6ae7ad0bfe471fbc44f7e485a5cc160a0a302cabda876e130994ef7b610d9b8be22cd60218698f24722bf4ac9a1690246639c42cf57bcbb9692f627cf6a509c291dbcd1168218363195469221528869b5fbde164f021ec4712e581a3e10c53c1ea9f0262b5627803948837caeb9b03acc15b6ccdb9ac22199dd6f5848be4ccd702116006ae8ebf56f0fe17859e779f5c51fb3b7b19c7e1592bc0702dc6206a02f0b7011bab49b39fa3c39f7b2d0fd015bf9e0ae92e0cbe3b3b015be2341c8a96dda4cd558e01b8ec0853631d1b7ebb739df2bc25ed7d17854f4cc6b231965476add44fa561ce0173c7526da39ee060c8ff2c5ce430725b89e93cea182349d8e60ad01644285af6a100c3274a11e5d78abfc707a733221a6fcc306feabfa0250f8fa5d148c0daae383884a9ef64e7453affc16101f05f54f303ab1aa569d7533efecc69ab31086102e7ac32c4e5cc17466afbdeba5cf5c94edbce99a372df1d65e898c265939c87e687afd5ceebb615aced5b80e45885e4aba7743de73c3b238e4abe5652999b99c5db0830a661115629c242f5208edaf0952d53d0fbb31dfbbf99631e5fe993bbaa33d53acbe93b1e0894f8c9e0d880141177d05194abb9a91d53a749e95d0c013db94b2c5a679c7a5a750a9730b7d207e5b8fe295ca576b673288706fec7ce75fa5e0019dbb808ff05c70ceff69ba37df4e5d5bf34c72342890f2f389c6d647988c3b5cf6c870fb4c3a006091da88d44a0d5c6f8a7387bb52fb73385c06502080e61505814c058f028eba70c5d805a1daab796a8cc167e1269664085855fcc1338839367aa884f4bf165342ab57f6ad49129fc82fc43e1652102a7ce6754c59f6f1271ee3278697a2904765b72cfc70aa9e24f4436cd9701148fb38ff5031a054b03caa5135ff5cb54ec2916c3a11933e9d9d3ec494f846f0f239d0f0345d69afc4410540033510edad599bf2b7fa5fff63f8fa0cba57acb1601ae590218ccd453dd13b9fb12cafbe5b015b68decb729ea96bfaa3c498df126062e3933b1ddc1a1a2210ba1491a8700960a7a59f0a2cb912a4a87ed2b8961ab7f0483aaf320ac72c7571d88e03759791a8f637557544ee557035a544437b695a4602e86ad32fafc959243d5a4ca50347c0aaa27f9d28d97862d5e1c656400f3be687cd9b385390c3a64f735366410d23bb19024e3edbc8de043d25c905693c561c8db1829fae67628e2f81e12b7b45aa10545510e0e64e12ee8c9b01b254c6b6cf17c637d30ad6d6abdfcea95b896a538e2ce59a41f1d3aab446c61a81283a77939f16ca490b9e206587a3f8aeeaab5517b57a57a792a9f8784cff62a2a274ad066354ee2977ae14dc32ec69482fee89ffcef99bc354ddf101b3a7a8bac488914b75550f9c563d3d660a90fdc1ae5cacd98020c541184d71c27883f414d83f1cb7136bd6685029f664bb8c4f240a177e8f83eaeca51bf287a871f246c123753ca44d5739e6e9803629d2489dd65cba13bab3d67fa2fa84e8ba04b46a4aaeafca6139189d87d62aeec4a718870ca244b72618f72776c21dfb1ef53d34aad69f360552bc2bc32291afe7ef9ca0e6ec990cdcce104a4eda432adbb5fb96bf0b29be59277730ccac705400566d4efeba6d612c49c1b6de7371f3901818a69a7f32508a4b4f90d88eb3a0ee3443b6f38ea7117d04f4336631126c1c5473b56f7367b94a978741dfe2eb65248ce94b5bf2404274ec2c1b1684805f126e5eee201b76fe14a325b80399090f6a0407d8efbc40cc92505fcde099fe12e6d98c2c087e8c77da8c8f3bdbea8e8d50b7090e7573b59a01ac193c7e004b7874f591f59bbaa1d0b5804b322eac9daab17e3830ab8f8728e925b0a5c1ff9b48a9e8cb1b31823aa43fa3b317ec8e84421d7e3e87c8e17ef340dbfccdf686c77108a613f1a4afddfb9e5f4ea5bacedbe0bf80fd37d2ef64e1b6f0677d20520091b9fc7417eb2835a2e046d1c0d59072c96120686fedfb84826481a6ef0ea7b09888547f2a5066bdeef32ad99f035d84a21b99b3c01a5e74d0470d5c8cf6f421ae9339342eaa892e0544ce9f5a6d66fe6ce48d17ac4f8c551287c444001b9e7756fd535f09ace6e7e7233e0f030eb193a64812b00140675be686d95d3b3b3a88443b94bbf2a5f288e971c8091391d57d811f566b566e452a48fe13e77706c6ac3e85165e403eac5d8de4346f1d6bb9ec5899300f4e7319b69817b3a7f9b853b18ee67aa320fc465fde4c0d5a24b767aa3ee2273e86f585d608ae2c9018d20a2988a475a8058b5982a0197d510af8dd35e36ce5dfb26da6528cf19deb11e0caad8d672b6bd19eadc8ea6d170c0ab4b363d4ed65437429214be5d6b6c3e8e8ebbaed19d04f49a6e7af80f4ac9d299492e6cc5c6c690dfe3e15de56f1e0839d1d09cc99c66f8b6eafaeb623b02f0dce3692cd634db6a2a6180c99a4382386dcd526cd839cd6340a809f6b09ee7d93eea793dbd7f1f0af68929f3d2ec84567458fa8ea514ec95e2efb9fd389ae1e2da32d286968f42b229abe7f9b3592113a383b75d0ed1db62c31054850d1248d9b8dc01681143debafc8ed261409b100b278f0e172919e47a40104f2d036886ba12474cf8600db479de3f67a250bd23551d18eb402e6c971302295f1449b89ca6980ace666ea39fbbcffde877774ed7145fc8e15dfe37e281c63e4c9b1755fdd217992182b3747e25a6f05adff289de0e3bf054680fff97ede9a66d031635cdfdc20fc59b87265a3f91493b9b649ca661772bcb5c32e77135dc89b56ea8bb936e9e0655cfc9cb20d344d74372539e987ff9eb5fa9042dd2d320347861f233610acb9bb03997a161e3609b1bf0eaa4f8497dbc8ce0b248041fcd46f966c2e599e0fa9b8874253e60cb2879b54e1b08c00d058007e8f663608e36cd7b30eb798e625fe00cd6ae3e5d07c919a1fbe07bc3f0920b0a0ecdd56eb3b34ee1f1a17a70ef09edbe11d62e233c8f9ae5a15b27291ec70503c2f8e44cea6b7f8aa67499e8095c04f324ea0b0a8c9956296010b98ba0302aba17d4ff9640a511e97d25076dfc74fc4847cb662907d4f13d55a29e9147a53e87138505dc743cda6a52209e39c8d83b0c9aadc224e17810a2eb8c2041f4d419c88255e67edddc362bcc1128cb6ed0e3241493b192769aae9c00816e0345eb9d65a4558a5e71ebf43522113ac935f90b6fb15bbf0b27db37b53a7591e3af83cbbc6f8399484106970f0a204e30e4c6cdaf21b25cf7aeabafbf5b4faab7dd6bbe18d9ce0fc982e183e3a6d35486bfc6aa93ddb52f7c4fc3cb8a8fb7af2f3f06cb563661a64d6e0c1e420690f269661f3b994fb56e3a7c28185b810ac02d1e59ec7f74c139c25331f3c806a052f7402866617a0ccdcc7f4a3206cfbf4e327e2b3044b79131e13c2ee838219e3f147dc22b8f2b1fda1b94ccd8007b363c257e6d6c7457f5c473e8571532ed9afa16aafa41be04c4721bc193224e2c5e1ef7399000290125ed721ac84b2e9e67a70744d3d51240eb4e0ccfda5661da8d877e03f4f02b9788ac65b67dab408753b0764dd7c484e84f050645e831d05e1b7d39a683f98ec4c86447452d07ce404239f597b8565eebc074669e24603437258c5e14d77bb3a2826688e92ce4eb3b8664cd74955aba796e8d3dc2eac3945be99f2d0761dc00d474c76bb453d6f9c8b54bb45f76de08a1ce108c2d11ce3677355b316bac0ba0dde5a2353c1a1b75e325fc65d684afa1a59b4efee38d1b3714a425cee835cbcfe7c18583500839e377861fa8698ac84adf4781e00210603630cae625e538b180bea46cb33629a8c279561fe9e636c61f01adf0df3543b32d58edd2ca5042dc388ad9ef5efb86ca0ed71fd1b28eec525f1e098fd2e082c93f12a7ded204ed6885886e72d1e99f6bec3c6812d42690ff787975e5aa784c3103958642565a82ad6a9fc6a6a767ec4fce0e0bce9f18f0fd018c944f616b8663f09ef175e293da30809f6c2b25bd583b508847090ee3b6d1a3a13fb68aec289bb1894f9f756141e65da4486dd6dd6e9572a7dc6b925ff463dd7755386c1613a0d4a0fea5c35e06e57f2c1370f0a82ca57c6ffe96aa0974a8a77e3e11fb26a3d0d497b7d405442e3ecec57494a4f54c6b23aebd0d8d6188ca4baaed54a53387ea9360b57d42bf2b2230cb2b0adeb097ddadf89205361bd7f68cb9751cda0c65485123517a80c34da5f4684a2d36269439a8bd1ee76dafd5f07f720240c7935859b81e7913116d58e910ecf01736026fa4a83de9c52cce8f8712c7b8b46c926f910effee3fc0b9a5b49a851ab526775d4a276c4f7861ac2de68b2243b65f2a1128e42726b3a5b9d8c5efb12caec8b22d34bfe402d3298275c877d7f35a1f205b123af57baddb3ba1b3b866d6b38b7c5d8199d0d31f29514c63b9633be229367f7dbbe677b7b315371a6eca72ff156744a8e31979388f4e2948e32ea9c3143464eb6cba263589b7ca4fedf743777ea82d1a59e7a572ef2d5551b70ee64a72468ef171c04500cd0863e27bf7afb54146de1796cb6e93fdee5549c29ca7f44f29a2b2a5324b2e4a73a11863d899a1e5ec966a371011348515263c89921dab19f1a2e9e86df4b29dc23f24e3433e005ffe588d52cc615d8f395eed37f8197c4006a8123b9bb0a8378b3a5d1d6f0273afc2390104be046093fa12b503833046c7caed78a3dd7ea635ca3caf50f6f5ae7b81469ce8903018ddbe6d915ecffaa5f48a5dccb9d3f88fe0408db032484fbe9d64f04e17a30d215239f391ba268a018141534cb239863dd9bc02d06fd5553fd5344e54f8264f61046db57a5a748ae2228f47938782defa7dca375fb5c8655d59d723436ef46227be7954ab319cb4c2823e298d224799d3ed5cce6318391270b7844d30a512413967edc60e0a58a76e534c9cdb1f51161f9cee6126978da3830c710a9e74a310f0ef73b8dd31af10d3b880377f95adab4b4e828093a57c39906df597fa39ee5e5cd935c27cc4934c302bc13274a7a4bbfbdb4edaea2139fb0ef942e6186a62e514129cc7997bb980a3e4be0918df45ad6289142156de1c807d92828cada663533afc42a94ed57165a59fba4d4885174eb7a17c4c0176187fd8dc9b20bd2e1bf419685218f6a15a0208b5003ebceff8fa7ebdc0a7e5a312effd6e6210879fa5569ea9dedf606524c0ddc3cc8e16011198e0c86fb7a63fa60aac0c2694f6b29c73b89d375cd65daec3d234391473dd585ccbb1afd2e4e1804264f06a2ad8b7b79f71d6a4d9d4a686777864fc2d50feadfeaf659fb8ce3d0c25452fe39b528227e312a8537aaf29a80e5b16e15c1781cae6438ca90dd3f4b9a06028e437e11df598ef4a4701230e59d0b0553dceab27228db9ff52a0cf433ca898d2c2506142d4b214b0c5ebd69255f7dc31386a4f70e8b9607dac5c37ce0f5e49a1f6e1de3a3a3b01f7b43c6f99084fecf5fef4a27f953afd4a96261a72bc86b2b8d50e7a865dcdd7d701fd89246478d321a4b77e75162c3a1aadb722b6ae4c089b940383b926ee560fff8e9c02e6920d4f8b62fa47c62592a7c1a2ea842eab0d37af0ab90b3509910cddad0644ee313c68d337ad2b6b5a795ccd1af18e9b18bb5037eccb97afad6c6b5d4f78f4e4b6ab8899b9386a79a46e69c4ce7a3d3507d87d08538f5b2bb812f296a09ad943857b314aed226581fa2c2bf3d6d986db5a2f76e3ed200c365a9e23fbf8c738a5a7923cc407174a174786be3b86ae1b519a18b72de66d0ca483d86e93b8c77b4a3231553afd23aebea1ab88e50924b1930459742cd66df39df6f9d9c0571493e03c65d0da343ca206e0f6a6ea524e360243fa7e7ae754d5eddedded5ecdf517db3bc65896f65e30e9bc0c55db2cdf45a56c6f8ae6283155c7b5c2aa30e3dd0c6e52a79bd4bd9fe5da76efc9d5359ec83bf5a1345c113be25b65b5500ead0ad73a043bc433792ce9ad10d45be62b587055a55b096cc8a302aeffbb5edcb9952b26c4e6f5e11e8e0bbad8fd259669a56103d246d489a86285a641d54ae12b472398fcd01228e49c632d120e4adc2dae0d79c633b30767e0841004c246f23d7256561902815a72f7b57af7d28b8c29f735dfdba302f956a59e7d264e116ab52681e25cad34effc6049323243bb3a1e79a96ae4ddcc9966a35d298471d13f3a162c27d0a50832add47c435e90ac6c614de407f8c3abe1bf2166487bc5bb82decfa84c2b3a05a242f3d3f323add2c5af9ee245acee25d59366542c4ac0efd3d566dc62ad27550cd70133552911b0e3645e284733781e2a55ddba1f533449f4284893155e9b52a504f3fdb057307553ff0becfab4571843e0e9e4cce5da8963d186859d5696262f23896d19248f32d25e1ae5609d1f6d4d20940045a0747b07fa4b4c11873ac0cb97e71e72e47e0256c5f41ebdc29a1ec9d7a814e79cb63fccdbc1c67e1bc57bd51d72595b0f9147b3a410f7776c495a20b05ee8714f3bc919190c5e6a626c30e025f503287bbea531403c25d7da0c33a7dcdd00ea401ec61723393c5a4cd36f6b79c5ade7dfb5e150b28e300c4763506aaeb91d4906b07ff6128015929f39a724e0bebda1a53eae0c45109ffd6949439727531431d3bd7eda1726d55d70bebab3bf8af0d04faeb37d2fed3991eb3cf84d6bc50d5aa765ccb3c0a42dc9a089c66dc3073688aa3da99807b17b0fe7bee742a973ec0bee2925c63e4502e749ec4b0e478153e067b7d1a08abc63e5ffa6d62ca11732d00bad01b831764d428ae399cec85b57d64f44c0d38769e9c465e409659a66f58c358cb97b2a7094d83a02d265e8da31e448fa72ce4fa3a85a2708495897f7c3758618826e3acc2dd801715f0994edb439b4631dfee62a0e81204b3c118ccfc6d7cc3d64ebac49a354ec5acae67e230b4ebf7825958d4c6a7c6e2a6832fc32ab3acf9ddaecc67a0bf74ad8e9e294624947a28892ad2447a336a8d563b0275739ce2543c5a2e97ae01a61ff6eb233547a2eaaa6b0e3d13026b0fd453bddc8b53b276af86022002a3b82b2400b58525566a454baf30a6fa929ef4ae4eed76a1c4f59c8bd0e4169423e0010ae19ad32b497b582fb34c076734375d758a7e0f7b8935fdfe4a5704ecec9825234f6b60bb262534f7497cfc7c903a7e46ddc6d124958451ee0f1bc6385d0bd0c4d73cc0936fbef302ff9f95da686e6b89bc36caa19674d332db83a64d0de4b011cce43a5184eba43139dfc9c3f129ded0d73b620d0de40cbe9cc2d3e3176e341dd21575ba2a8a43ffda9cf2e11a4b0065c5f7198239c01d1f2068f63f502d09fb75c1363dcb3d991e9e094ebc8216fff5e5c61611ec7f43ec8645176152ccc3c3eb9822084e5cd25d79afe403071dc26f6b01d04126d59fbbf8d4fa94b17414709648d0df8bddd36cf6c08835e0b3f1621958f6b9d7d81023b70b7694c92094017029eabf5394c94b9fb36d253f5fd0b76074c0c98f8b2b3744082a2c51bd96bf44f4d4b5af8c36164377d158b4c00f788918b5717314875c028b7266e9bb126ed540173b1009e25d4e4319716da2bf3644f274eea4c3be39fbf8ef3f6506b8b1ce25d4aa89fbd8067ec1d1a46c7785655f0a9bdda5f335a717a75494778c6e0d1ad5d01d5e605f271173e2666f1a55dac9dc4a17be636058056daf0d31abf7522f61344458d53399b39b6939e0f623378a9c88fb77b0a797d45277a43f0c2cd1c95e663d5b6dedbc1b0cbd9a3801aea3c69396f214f4c93c2638f9bed3db70a5bfe6fd1a448b74a61c9bc46b2c35369d9fae7ab72f656c231fd32128032955e438093bb8287f11db92af9d9dce2d2b1bfa96df64ee5397b19ca70e1ab530ecaab1655360b2940a903f1b2b15818974f1c6c53e213aa75b299174f49165f810bf773a3cee4b5f6ffa359168810181b4901876469dd8e27f8673f1414c296e73d9e4a171278ed4695c061ca80a06d9b2981ffc0d0fb2ae3d0352df4a4c5e3756d0d9f6d702ad6bad3f4129f3a09df3117944a616563e60ef2c84da86c07472ae6aa78a8e8f35aec33747c5e9393952b0776ce6fdeb2a05801d365527892ab40338d7314ea67112191efbc36cecae3ae42b337644687094c52361c565b39a890774ef414eab768a10c26a9789ecc5f48eca97f2c687512d4b342831027f9665f18df88a42837ac67726534f354e6ad7820942f14ef7a54fc7152f5d7c7d3bcbecda4d24aff72209dc5db527d005afd46d1fded581fef6c58a988cb66f4e68b1afc0dfc194d6030ff4635b4c43ebec28dac359c8a4ad00f5fe4dabe2558a51c36f0fd850a2aeaef2859b2c885336b29dd4502b9262e806d4f177ea3ff72de4827c32cacfe6cc716066a8d88392d6db81931c8005f878b792458f826bd788a3cc337d1cced4a9e42a6a23228ff5ee602ac6998a374f197f17246e7e22dfe476426c7ceca165a48cd775a8e1a7c0e7f4f34859b75261cb02b50d13711a113bf3647372a608caa62690c4778c300cc976cb8bcd132567c4c1c6e8b2c4cff01b909374ed46b643001e9e2cdf4650f15830354149a1bd351403619ac65339e322151190d0968ce8169d39ce6296f2deca27b7d31bf0492380e58ae7465c564262607b106fbc764fef16d6e6ba338d3191af84c8ffb6c480309d4daf333274da7c34b2595fc6608b25b765a92c465920b468756a7732cb769dde95c691c89d62aad39f506ab0e6e0d1127e82470feeb72a95897d34c921ce9738b8c4e9bdb36f3013247ee8b9b10e40c39818ed5d5adea76479f559579cac30daff957a93db333bab8c54d87d9b5e8b72b1a3ae6606787a288ac8d09ac362bdf703e08436283f66f384f5a0ea7feec47ea38c490d4c4f98d9ae7db462f526312492287718e80ee642cf6d0863a7a5ad6e219d197f55eee51a45a24328c8a67e140be1eaaf8666735a0b5ce584b2b700f28f1d9c361dd7e19ac587ba08854dd2ffde0ca36e2003a01b61e8793268eace62a474da789befca4015483154fa177af7d85b0e40a10ae7693c69f0f55a8b4a21777c58cffe6d6b9c9783974d60ad6a8d18bfe551a6e35af25edbd84823492eeb985e09cbb27ca019f96314ffb308a30b14fd25eff92399bc1bd919eea3ec691fc4b9b558774ec3d8f4049a34979ef6f18e41056e0084a79a245015046b445d12b1db426f33951808ff01cde14ca289e3d899fb002df92393217a13274ee492cb3639b18b9f25faa6f3d0872c790575cbb453b671bc83f0d42676c5a5418b94f553a95b48535682913383a106d77fe453f411726f6b9a2ff7ba279a1d4ed2ae1c02117d10637e708da3ead92afe6639751dbfcc4b31e69de76017ce06dab10ce472170652fcf3759cdfa3a3ee002701a777aa2f1a49e41e186a0bac5480583a9ee2807acb4516c4717713d72bddcc38e4ba3f0b13a5e2a89c13218698295c6223185e7fd9058b180ed67ca2a73cc64f22244c62edcef414fe58ef7fb6389b617b561c0f6ab9b5282bd04ba1057dd567ca4b7e88b017de67d9aec8d77872b9832178eb5285dacf1bc6eb842314131c17db6029263091870ae100e47f6db866888c0ce3005b3dd3a0ed528140592e604c759e2f2bd565616","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"f4c5d59ffca690dacce51459d6f293bf"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
