<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"b1843a8f53d6a05edd780dca6dee2f32f128e2feebc438d4845789367965390eec82ac34569321033e39c85adb5269ba725dcb27ccc6f846ca7eeaecb5e206bb07ee9ccd01f2fd2ced464073c171ba84f1dd580e43b7d7e53ea626af439d83b7532199126aca5a310a6560fd4b145ae4f36535387f5b9dcdaea2f50b8e274ce043c9d3bcd4d5a64cc16e45c2a38659d61d3397154920779f7361d6043ea23140f9b98b61d823eda5e63ee5cfd5536edcde853d0fcc516cd1cb381825e7ca489acf27070b7c80df6671f9b1bd1cb383be5e16fc3e9f7b41ee20206bfb58d911dbb28ea0e31e1242584787fbe1bde07b6fc9ba6b2a95bb0eb07be1e08ca57f72fcc38f0ba90a65bc3e1b9f933024dd31df22769f300c36a05f73474899d2f322a49c40e5b0ff80ea10c52ad62b22dafd93d84886690bd6fe77ee1811c7c094511411272201ccc2ee661873efe12a6e02338b2abb4e6c84a470fc90de880fab26e09c6392c76eef67655e96a6d1b5661fb66ea353227ca1e7fef2332daa9cd1ddff7e0fda273c695fb2dbbeabc92ab38f435bbe2a2f4a05bfc2a76839a44a4e5f426625e59308642043ea22e98e378dda84c2b3e27b3ab52a10097f3f0b90f4999ee41106c7ea672ad6661c7e52aebad52b7b50d4c33c061147c6ab6dad71b813b211a1ca59d05bd06759fcdd1a1cdfb029805b79ab2f2985835c86e1be3e158eec5bef8cd93f992c5e32e35747e0c72826720884e5ba438a399e6d943bed744eb983a9e10ebcd11ae3c876fe3f42078dda051bcaa0e8cbbb6e7c78308879f2e67d04c96fa6dfd3b0cbf75692ab52775685a7ba9dfb46c31f2f458f83eb530520e96145b70594b19615ec31f030f8a3ddb1cb90ca56541f4e4587f228ee9a277f1b10b2ff8c14bcde8fffd1fe4ca427396cf64cbc4d84ef54dfc08bb97d312dfe7f1ca7e577edb5994fba700578ce759487ec784c79ea26ef6ef3d27d01b70f4987c434b260cb76dd5a273a18b87f50390e0c037e89c0535badfbcaa7b4e30027fec7f0abb98db181e823349fe854235620362a4ad67e48615dd977cb8787e8f86f4fb2489446729f86ce207e162cd7b68f9f8072e2d820be0a9d0d7628330980238039dbbcb5bd4960fc40896eebb5a3ec6013a70cc16a9604a4ce59a9833d6d27161ac521b5858ddf8627f7b349d901b765125958f1f4f2fef6e49827f7c63d137f05f4b18139a3e852d3dbcfbfc5a541dde72faaac2ba253b98b04bc57abb75c1728bdf4b40e415ed2829ab49e86d858ba4190e6b80f3730d7e41b754183cd4d7d0939b3fd6206d79f3d349351854025579e3c8c3a2fcb9df469605a2e04f44c697fca37494680a36c36c679291771b4409483a40e719f068ac1c9e1b355c7495c478dd4020448b4e2175368feae267bd940d9b173d305dd46d9035c5950f41917f834888b6fd2bc6d8871a275bb592d22c448d97fc66da01dce4e7b92cc790a4f63cf8f4c293007bad9c3c83fe4b31e1fac5af0a379ed30be4d72061ee7006ad2bd81c4aaf3ffac31195c68af934a26dc1fbb6515d0c9a91cafb7a93e70b54b6f28ef6f5bdb4aa22e76f654fba24ab578c9e9e9ebddf1dabbb005a66334f3d152e86150b2f66fb315df90746c753a615bce860161073b35bacd01ea73f96dc95a95150fdbeea1d2ac924f560eb3fdabd5ff9c62b926b2ac5c3259184e9ab3c5b8136078c8fd2f92ef7db67eb87f952ed2ab10aedd247750e002bd4e10761061a658e1997f864a0b00f005a3b96f8e6017cbe8128088188a5ab42cbc627e5826a29867b8632d59d0cf073a0fd4b77775b0ad9a3b53b326054923facbb5634291e7bc033055bb0ff424aa315a8fdd9bc396dbdf4b4cc66b6c151b724eb4a45188c24eb5289d8bf18fdcb1e61cb936175738c84fb54fef7ffeced2613f8f11d409727e10036837069f151dfa023607e78e92f1367b815e5d8ef50098ba377b15b3804caa91bed2bc2820dd00d1e4b6399bc2b84729697df7db39805b94f79226c7501d2554966e491a36cee42498c72cfd2e28f3cef5004e778a820d336db79d9329977059fc0cc8e5692fead6aa64a21add5d4077e2d92248333db273187b206f42a8d98729d9ad4f0018257f5e20e94ce4e2e5b39f8afc6d96a1ddb023d200b4208fef2a06574a443b270e6dcaa0f58e08f7690944569ad193e4ce51f14cdbfc04949110ee54d7d898d83a9ac3d164964f2d87ae24952633e0484f91afcf994280d70fa5e2041d93aef185fd068cacea9483a06bbca1b48b520328f95c741165bd4c71455751b222a4414cbd7faf7936267edfc73b481fd46a686d3b92d933940000417c7a4cafb87929136f4fa9a70bcd53e433f88f85a9ea7886bd5f50283ba63178c00985b18a48fe66639dfd1a47f89ee97284ba41165a526409459dd791750675d0857a27ca14f2f809a349de43bd4232e5f25510a88759726bb784ac502c0c9e22f3450c6a830d5bcf7a9a504b8e6a42d2bccd5837502e82d2f30bcc89f94ef278494ffba944341281aebdc6f022734d24ccadb3c3843f743bec1f55fb9fb566dd2bd90c9253a1a882aa2a1c210f19add2c3b6f6a35ad5f8541364c6201c75a5632c98d3d803d9ecdc22041d6129bbe03079b35d63b4e96d3317dc99bd8bd8f0db54e3d681d641799d87a0f4c06117d1672adde37f5158a66949c78d0166ca679c47abd66c1f9648e253b72672863133238a34bea964d12928755d265784142453d2f077f9324d9d3210f242d56e4db030f618a07bcbee8375aa16128392324c94e12f59d0b60b6c69b1a39db74f9f9dff2a2f43ccfb55d96c6cea9bdf89342f32778692dac0f66ae3ab5ff782c2cd6c1a25193d375127d2c5d04be0032afbd8422732ff6c028ae234eaf22a5a742e8e090af761e359c410e6f445c877a3b732adc7383007fa83f5441f6276b8c511fa275ed429676b03cdaebeba1e9acf7001c244f3567c954fe7e40feee324734fa64ba891bb286577aae10f9cd9198419b8091a1ca97313c932e00d8ee5369397ec39df3087c437d31a4703d944e8968c7ca5d9ea616be6226bd70af18d2a96439fb7ee858e12bef7d1af114f3c41e63df0932e2a2babedb6813c96618d7bd05ddc387e06b45b8d891020347fbe362dd3455518ff55c4e51317f7098d23d81edf14aa204e6ba5b333edda8b40e123493b981c2dc14ede0749b3183772432702ee951788deece39d6958f90793c43407d1ab28a26a8b43a803edebf7a8f91520e16b610a50618aa661f29d6b0db6f795dd9a69adce5db1064465d885132b9dce39d9c46edf140d301013cec5759fc4a80fece35f11d9cd82caf7427b494f06de29191a27eab2068eefb2940b2b5788af0034ff90c55c4c6341d4cef90885b4c480a22f4882ad2e0cbb5f81d9ed204bad6279ca7b47ecf4dff04941bc54001f1398f3c75ba6b3f86307efeb8307553ba8ebb51759bd0e11779f5fae4594e3081c29d3d70031eefcf64659f1896ec9e7e49b2c865dfa334455e8e12d5511b7120d88ac6e7ebf6a7a2acd9762fd9cfc81945173a587d488e67b29a2686832e500328d4330f9bc1db05d6b47b72142352ff020b22ed0d68032fd3278348fb93e3651bd0111c5d4519e664becb650a056c214c17145d89ea14db6f1079cba80b731f1adc59635b26912b45bab1a83ba25928a1534bdf2fe607842dc7d9c532febe3f75255e5d75b51eae70ad57962c3917d2ee892b4b58e7b48508f69aac927ef094ab567e281888433fd3b7a8a0d4e21bbcf805bd7f10941f16d1b91a34ad7c1e3e82235397019989bb55bdd75e530e08e2857be2f794962a38747eef0fe4e323a15a99424ea745a827a9ed895538fbd4e5507add663524a597f6dcae1c1e99c2504ea4e9365ca8b28648df608b689f0262cdd3e09f950cfb27ef4847d94377ef56f948b5735d7b1780b782c74749d2b2d6df3be31cb57f88b351496b7f2f91e93d415085ad0bd773e8d2a1471cd35abdc9abf9cfe8db989688937b64b1aa129cbe292db94f046512f76a87a9780c67a35d1f7030223c21125add51435cf11aab1069462bb9085cfad2bd4518014fc77810724de869d64ac4272277ecc5a1b28a2aba3cef49903891d1b748822c3256bdb00ac7f0537dbdd539abdf0b5baf998bd434e4f88c43b1504a17def8d45df3e0da4238ecd189a4dd09bffa32d4ff8329b2129a12c21afae2d0200a829acac5d51e22a0905b410209689de6082df44c65544fe32c101b4e36fd0635090f8646450749fd5a59a43f4b69ee0556e99610fa9d1443ccb215b6c8ac267350a17c0d9c3a54d6fb7a17f9d7a92b54e2e705d29aa700f14859c3e0b00b3bb1a8f84ee96ae67f65c85f946eaeec79aa4128744c00e1fd8385bee6ea527b4ebc21d95b9740ad55449a9841d3d203d7d6e86b135b1929a2e04acace8bbda1227a8f3092e888a8a90f33d6d13f862b7d6aef6ee49261d3128b0de54bd4ca48fdf40a328de359da11021b6806253a08066de8db8d9f9f2f066c1f24a5409e430e8e1eac47c71e1a6e391442105f7cdfc3fe9b3fbd7c1ea2b8ee46f88ec9f6b291e1c1f492327d4855c9bbcd9aacba610bbb51f6f4bfc8f65abc1c3c30a897f9ab63f3bf2768b9e8f241d6d35bf639272eae173200a1209197cc2eb092a84a6ad1cbde51ecb8a1bb1423355904b8c526ac246779ef24f0978f9dee06a53b983e0de4fa56506eeb0403505c3671973712a33bbac22acd2f5e8350d794ce23f480398e4fe8fe34c182a0c069ff200c57c00ef6e18f74ec1ef9e7c1c3c573c3702e711eb76a387991f2132d4f9fe97edcc0d1e260a2c050b59c56de6cb1b240f3e9a517944bf26264ddef40559037c8061c142c726945cf581f2c5d21f7c7659900d5f2493c5dbe9fcc894fa4a400ba19ee3a989e7b66df4d6df82c1efffe92696555bfa556d24d07c53db7034977428caf35481e3cf3250722eea63c3d155722d99e04887fb1cb4f074bf3f8ab25346acd869f06de88d05a01b0c452d96c18bafdcc8ac6eadec2bee8b64f3451ca4df5e312a3884867a5ba6e0c5c73b61466620b64d2068b5a0cc68b2486ab699d5348819e5525a3f624f590e66e0d1561c2c28d35cd2b55d2fda6d02b7eef70f0717b17c6a075e03e3c53d3adaf72a2baf7bb2595796bd75b08b135cbccc820e7bca5f5e3a835b72f768092505d73615a5648caba3f97b5b24dc50af1f96715ababd9ed6a7ab3af6818a88ea4e4904ce3b6de6f6113dfe0f6b0bcbf03806586ecd40476a941b8b6be67e600b1ea3145cb6618dd7203f1620f913d11fc474390f807e4fbef659f491d92bf1aab945963a50af348d457c6e15fee9991ab25235b7b6fe72ccd96ff1b89d4231c6520106f2c0f63bc313906d133058ea60268a7646afed192144edc85bb1bac8692754cae9d3b4f4f3cf232349eb0e9056b247009c1bb7a53b0cb1066cf25456098681af7bf51eacd508db6aff6872d3e115d53208258fc8d15afc415715e25d1337dd65231b752e10e358c95b88010f5c1eb7a444ba618d0b8a757546808fc372d047299ac06dbf418ed72cdcb54b3b2ac985593ea85f10b42ce793356ed8ee937a1bdddde334f15f46597034a17a98e7813cb591b385b6f792d0cd3d2c7e3340d48605a8d059f3e9693a83ca1600ba4382edf8af86c8fde7851d567c786a7098f815d48fd02c79e8a85aa0faeeeaebaed13d7ecaaaabc6955adc8a0000a146a973bf2e39619b8e432364e21cb4582d79f19ddf0097c3efdb72b17d7fd7c1761af412c0f9ea4d5764b17e79cb7ff33f692b8bf8faa806cbdeaabb2557429819b1458beace280fac68bf03323fa48742bffdd8ce73bdf43805a8f0a38f72cc97d3a0af26f01cb17196a3384b72efb9d752305bd71fdf9f942115da1d9f4c2c77dbe4f3a2c7c76e8e36c5617fec2cd2715b2c4fd49a100b79834a9b4765a54a23b853872078e22e29363f1e9a634f9c96f97733ccb26200bdc33fd6c543f0faeb40c515d41f15702da4ef0b510f6cb7c97da91770e4901b095d0bd716953330901b97fbcd1dc4fe3e555c7dcc5f2d1c53be0474e2067a4216b0df8862af0b7f76f238a1d7a071fc6f969b6cbe3d403efafc3b4a2a2daf2ee463665b73961df46751ce1f82a61460aea4b87fe7cb65e420c906ae1f7a17f15fed407bd0706d6d9b1a0027e1d543a7269815584e24ee2cabc52620c8f4d6279c7ea6c1b95a6e3d120cfab3ac3971a2e384f4dd1d67e8800170f1280ce12e50ebd25d60bed15efeb026fdf86b36c52db669f79930b17affe1194e8e6eb893e2500d4512a15705002f0fcb8a4a7ca485f4cd1d3bcd9b93097de4b80345ef9dddcf6fb79c81ccca5ed674bb977ec1773833946cdc4aa732fc89c7bf0dd017f4308b0c165f57062d8bc07bd260a389f761fe32df903dadf7f0c028e85f20507631a7c8bd8eea8dfa37a6e03034ef301d1ba12a0d3bd7bc7310278c6afab22b28ecaac614954cbda880511d1b6e1c6991eeec87f670e2ba327e41167a0ef0c45e6d9396318d80b24b5ee26dab2abcc3b4fce7d1bb06206c472102becb9decb872a4e6ada299be356ab7dc7967b8bd5cea81e977216df7d4baa6ff498d27cbb4a9e5fdec0aff74386db56de22cad531d152c33b451937eaf532c36eb115ffc497e4a41ea152a5921d875a4463c48bf36995ac0ca4bfcd51dc5fbaa920c0edb5c560108c1e4fbf5aae68700b7192a57a39b383b4ca2271e0c3ceee8e0016ab915abf6c5eef49cafe2471869cb6b55cf0d9385407e1d89c39e48506dafb96769cf5fa65c06f3e6bd6fb6d3ab193a3556e2f4e955d2dd3d67fba80eebb1c75f63c8b4c7ea48bae1aa78e4d769d46e43f91594cc57108133367f41d9647a62678ac146ff0462c205450f730f33a829ad416ef110a8196b5689000bb7013511404e69c7ecd031540cce28ea180f4e8c700b1765fb199fd6d498a338d5ac7f81780a81b3ab2d214f07faf0d961fcfad36b8905e5d8c337a7ad4611eec3d2c328966dea11b682620807ff866e95e8b9dcdfea1f85374b8f258355a90799b4068a062824f0ef9906c06487a7e8d5a722a6195ddfd77f86994fa2d24f346cac48b5ae9c108c4951f944d5599daee90e4ebc22ff1666197e107ecdfd86ec3f65a8f2fdb9cc192db6e69afa69970f30a8f3f994e49a641dde8d6cc6bd09cf110397dc15e6df284f424d35b02abe3b0275e4471499e046f5a0d6288ff7cb20a23627f5a05bf156ade8e0dcf0ae9dd8395e7eb875a4acaca19e977b5cc950f71bd01ef73371d103f8dfe4fc69ac60504a2394cf40f985adb43447d0d994cceb09a672244b5c7eab3222045b2067d4b76724cf02dfd2d8eecdff7453ff40cd981b3ca4a075eefec15a0dfb478c7b9ab2e2488823daba99496a764291922e4eddb94f6708cb1c976efa940cd32260932f532381c34ced1628e2e358d851350daac8f702b2f5d9af1a4255e29432a27de664852df86da2710511f632648b5e4f553dbce4c91dcda20c544e491e8a8aba8701a8c9eacdbef8f180f5d7eac8af3a3e993afa0eba67c54ff6860e9ee7b6f8ae20da8513ccb8f71898bd12ac5214bb81ab704b236886ec579d312d788fb9e11494818bebe43e27da6664d45bcaf7b11b93b23b406bbf97054974be6283fdad942dbf12ac0b07f08d39c6f6ab20275aa22bd8b4a74f5658a03ec0c834c5e25e9b4380f350fe32b10ea4954467b93db821e8b81b69d5625bf4ef86afba93c4ba44599f0c02c145f3ec0df32a753d31297b936ba4415e22035d8af0bbd5640cbc93765cef44d584bd3e8ca5ee9ab12f1d3ea148eb98eee131aa2d36dd023e50458253d6331f5789f2946e74de8f1085b1f168b35b56fb9bbc2cd9da4aaf6db3f9e6ed6445b8907677494c8a7d3983be81bb523937fd9b36107f052817e4352576d3404da27cab9ba7284df127430d4bb65718f00b7d17a680014b1ba374f72e7d1b19a85dafd13dae12400858e2fdbe35cda6a83d6eb30b3a475b4fcabd7de2b63d04b9e80f935fddefa6a4e19b3a8fb7314421de48dba5d4ae397811ff8b462fbeec4e43c671d3ebc363aab36e6b8b67d29c192b15445e73e08ba00a1a7ffbc3fb6ae421efd04d7296e1b6c5caa2d8bb34e878db1c944c997f3df88a98762395a03e795fbc95f85cff83a939666074c5a8e7ca8dfe9d2038f207dc610fa713c423ee811cc58805706a8c0bcde51c96df11f4c450865ff90fa7d7ffc47df5887f8fa72a98687b36f0db910422a4c54a3f0be4d991e21724e61a62201c4a61a9d0c44d371a83e79ea5d3b61d14e2079dcfecfa57a60ba4b7f41588430204881b2220c360f69676a6e017370dd1bb0688d19c427565f8d15d88342f18aa4a6545dc3af30721fe4774c6bc4748b266191737a407d50eca7421f6d02c551c667b641ada669cff750cb828a5d2910a28a8a828c713d9b16a560bb6c67136a22cb860bf675ef1358accad65a43203cf45128804ad00a9a6981987b6a8278f9768dfbabc22679a25700c2f707c357b45ba63f41b8540a408f49ff8111b96a9976fadcc744ec0daffd3a80ab9cfe69f0adc07a6c3a2eee93eb0ae775cd57d2e7c5e016e67cfcab91e888c0c24b8d73272bbf985df6708f67e10650fe66fe17463be9a306f06a69e75c53ac62f52c664255118751264c1a53ccb8351fccd888e4bf0f4f64548e89c0c9b189b787ba0f582396a98a78a31d7c8ef838b8aaf69639447e0c3f668993c3c10676196241a6fa12f6b0caa31d46edd2d79a278d7f0b4136565d598818e493f5c95f64920dcaa71d4d627e44941c616e75a3256fb615890a7edd3104986ddf836bd113bcff3d1c69902385677ce75ad961bef9905a9757a013217a358a7d63fc6532b23aef1db0b07c779ed095e75dea0936f30827a7d7c7511e2da7619be0fddd3c735a834b5d0668877e6d3beb81e19617efa964509bc2a09e4f495dcd5fdad6408fe903fbda96219c5d2ceefb85f3adb94a1c339f7abc3914b96a53ecd2bfbdf261c8c3e4607c2ae84a7aac3589a4c9dff1359ab3e408c1a9840c311622215dfde67a95535a86295a700e4eb58c97064892354867acfa82af0cef119c9020d94297fc40edd81f2e860561a10b7cff6080cb622b5e4a0aa564a11f1ea137a08cf513ef66b7b48c9287449942c310bb1031b726e513894ddf4d8255195a0ee52872aba9947194254aeb325b70531d101a332b373fd36b3f55080ec86830f7f850d6e232a97491f11296870e1c4a7fa56cd20553bd012a2fff6971f64f5e53bb730325d8d24594d7db928880086e564582949621928ebf9dafbeb8d9aade918e78f373f3351ceb0bdc4719e49fcecb1145d2179df6c66a08435721de53ee02df0f755a351e24e24b5ffc41f41a7e017d81daf1fb294d3c49e1c0aec226348288611ab6495d83b93ae7d096e237361afff9a6b498c43fbd71487607b513f50bed2dc1fc7ab9c5734dd62004a63348e78dbcce0ba7f35578c89ce64d8afce35991c2ba11dac1357c47ca701cb24864177d23789a0bac987c35f9584d3b6261877f01222e41c2a8b0f8165ea61db30a33f29798ca51f03b5e6a76941e58a406d791e80b949eabb4aa9014b29d6b6da0f86ac7617b99d764f9531e1df853a474c2c61b122ae08d93e0bd8af2737b4af2528d9a33473bbb05e9a2feb181bcf112b447b4d0023194231a8b204ec050475a29a0976b1cfc7a97cf910caff7669e2e91c17f89f7cf92952c111dcf8fd25d0e74b7590bdddf7afa2ba2c847ecdd130a2ec0f53229b6c68806cb7d82fde1d5e77beac02b3cf01785fe93e56a03e8e9ad5f93ae63a472734f0c11bce97b6d26fdb5063d93ee2d1cbcf0a8719bb14556d369fbe40f9ba9a91cd7797dc90011a048abd94b51a29e89e85d9386334932bb6311c5ae8c858981bec3fd5d6f1427647424e8c8826630cf1059165545c41d50d6acaa359ddf0b44221d421d8bf7736987ac3f83611219bc5a300ba5121d5520aded4ac248d8207369d84752c779fe05206624ce62ad555ba2333c1f19cc43f12ff4b298833a65615689b1708811983f9d3d0c9bff7c0d50bcd91d1d5b58efb4f0e566190a7cf79240c967313efcce947f7f5cd5c126951025a38f35ac8afdcc609b3d5af42fec550733bedd60eafd18769cb6b8bd7261f2e16c54cd08659399f9f08e8c34aab1af20d279f50588e58b90bce2c938af89732aa3e33dbbd0c4b815ec03f6aea86211755f302e9fdac8f08e09cf8aae150bed4f5867b57b35901d5aaa9902a0aec84fd871b3fe7afa5d64b6479889294278a01db0eb44ad0665ac478e2b010ce6cd5e381e7b0a3823f35669dc93cfa2009885c3f64586fcb352ae8dd63d958bbbd9d5518c6aa8b6a7eb9cb4076f5fe82a3452ad5755eb5e610c4d267890a3f63040e8cebff3efb284349fb48f5fb623436896083ca1f70360fef3bb4cc32a62f8e5911ff6b7afbc562f2f63d1e7473ad0ace0c635fb128da8edc47075141448dc0db89f1f6e80647f1a7259689ecc07cf81c5f4c6b38a1b297bb2fec8ae094434e53060b8d5e5f4c79668175d00f209d59906821c49d9cb4ce88db3f8b67a587dc41754e874a639bcb0552c57332d8159a07a2890b8e31b457a5010386521b1deb2af9d67b933428b4088c05b3032273d3d39d90c7216bb3bfa096c7d568830ed6a14123a26934edeff10dca92911f8d72ba9f00c7b109cf5cd79ff2330b90e5bd82e29e2786cf53719ea2292ed673fadecff63d3aa8b207c6518f744fcf131c27b74832310d43065e700398949f4474d8e974af4df2b8f770c04eb4f10936db0cc6773d01ec228d096a0fc9c2dbf8ccaef997f33472987d0f22cc54482487010f6bf485021cb2e31cc7643f4124a1bd819311175d09ced7a18e0dbd97f5cf75b17fb6f2e6d7b4d286f1e8731d48f1c700aab311c2e2549d612a70e947ae0370f3eae9887ed4ad1ee44b171a81fa9de48e46a6e94c8f2112953adab20289b661ded38d4b41311943b3216966a57bd60f79bc50a4d11d44058bbafed23576ebc250d26278b4a3764590aa02ac433acdbcd58fa40d4a78eacd0b8cd66916db8bb9f5cb253a9bb0219bf332d329b11002785b0fca63147a89c8bc34c7c45af4449e58525cb50ca139c271c7ef65e154fdcd8e2cd62df0b31cef18e6ff6a8ccb97c60b1d9170a5fb8c8bbd2affc427a992102bedec9ac9a2d22b204fc8e6cc20c7f8b22c86e97433641be81f84c3c5fc8c0f5d185bdafcf0473e37ebb75cacd15ab933223baefdf6a7bad33e0fb5c22eb55649678c3c58abde2bbbc9b92ebe216b0a16c936b1270aa8b352819ddba60911ebdb5c15661327c4ecf4757af4b29b5a0fa08ff7c493f89ce3b6d9239a9a1b64c20a2fb6a4b2c539559cb6d2d400eeb6c44f52510d299a2007b003ce5cb05c21174d6ca7c88b11a92b908fe7290dd7950cd0683dec64ca9f820fdea142b2cfe4e36085f4365573c3f8a1ef97a830276a2ed6e4798f914bd32e3135b10cf4fd8fabbca685d64b93532ca4aa47edde0994a388a55cc013b36551c6e8dce4179fc878987de449f83bfe3c6d2de9fe1f10db7eb9e55eaff605e7b478cb8cd354b6095107b874a7db3c2e4a72789401a5ebac4199aa8362a7538d193a111f9f9c429ec60f702039e0f4cc9237b4991643cef4cfb0279a22a326bf2918704487585697ac0ed029c61eb7fff6c4730043974b40685efa75da269f01cf0a53efe8414777b45332d529dc7abd9d8585170c9e603ad663e8f3d621bc3f9db3a42513694e062216beff8d44c020f384d2dc2acc8b223e0b74f30ac2b0d6a59efc24e8526dbbd429ae0dd11fccb86a8f012205347bfe34af048a492d2d4dcbb650d194e0fdb4ab0d44459c0072b0780bc06a0a43e67d6aeb89d2758b6b0b26010cc63031f50927aaf6c3826a4cd7d43b19086eb780955ae6f0a34b6a674d831bede4922d948c6cfecbb3c7b5cb6596d0b12db883bcbfbee39ffbf9206ca226915d3f1d8042c59ad1ba1fdd1c68275910ad60a2f5a2c5c9a0321dea7ba6e264a8e3486c2e4ad7277dc18012c7f9f3593651432d7f0fbdc3da97aef348bbee15c3c858b5fd7b74d9759b27f47524db0ed4e243cc0ff5c6bc314d7c278603b38d0d25a2fb83212e6feb629d40b0033b61a8a08b08983f351465e5c37593843882f50243ea2ee3ea379eeb24730a57493cda3ec9b9d695c072a80e4fe02f4ee14d9a8962142f96b73e2f42ab8ecbb95a2ffb6d0f1fbb8205fc76e4529611530b7e382b22acfd204e33403a6f3c64331cd42f7ce5de37261fc18a059a90816dc1bec0f4cb188c35230c61758b68d2b644702c28eff2624eabdad3387621dc4b22808039fb0380f56df30546b2ac4c9ab9790485afea66887cf0b7bf3040aa8ea21ca60b22d723de8f8c0fcc9bc1438bdeae37ce1bbdf6673915abe36c6cb7a0b4acadae1068fcb22cb0c07cf161989b449d6436c8ec7529eae21b138d2c8bd1fed7c7f8867b1e0fa2fc654461e19fa5da10f5e3f819858128286abf942ae3559b15a9256083b99575dd0207e413431ebd504b4c73f12fab5e458fcd6476806f38cb9fd5e9ed0f7a631e44523c6fd414b57ce01a892e5d647b26c4ebd736897a3c01afc393f5c734bb054b4ea0330d68e4d5d9da014d15049b1f2c48921b402e0abc739be94ad5b7e6df6fdb5fcc2d35ab0914373e6f3a1edcd8d36bf86850580bd61b8c304783ece2ca772d6014362328bbd08ccc8f3acf83e44a172c81c32b3a45b73ccaecbc8863bdf538a4507f76430ed82bdbeb51539e2666ce08530c8c53bd0b66a5cb6670e19c9e5a22e5a931dfd1d3cc8e62a6cb3576898808f222888bbf98043438d6783660d9668b804c4f3897a49317af988c116e938e9c0d92d8e5ec6114b2e4b39d28099cc7d96f1158171cf882128cf2664a834f67d028f2f49ef14228957700ad9ada9977a66197deb08b113bec92da8da81e4045f870a0132762445bee3b94e79422c41bf2cc305ba6e3395f756fc6a32a675b55d00551f4c31338f275123f508759ed403f7e51a7a7dfe53259dd45052143fca28091199076131b1527fdc2b7133b18ee1a98c4fce7a983017d08aa71f8f5a6e8c3717841d4cbe8ac9a27b98c8cfb473d481f023a09e42d0282f227b84862f1baa5ae59254c8566d7a5db219249728a6bd129a7f20859016615a445a66fa28f26b2a851879b48ce448b9a7892207192882930fbc28d6451631287839eaf9a3df9fb209bc52431d8a13891bcb32f2948a1b6a918152c590e22403ebb029e7640c80506adf5e8094705c557eaee3db053da2b78ff22496a30cfac037ea89d35377f8615ae137eff2b58970490c87e8493f723f56244d6b1190646bcf48f07541310e64678df586d8b83e69835832b48c1fe34d1c784c0856df4198b2e0fe2a0b8f378caf71a0afe158b6d6d9c41d36d621539cba315198ed90fec507a89be9a56c1abe1e2ae2ec6b3dd3d2bdb5ddd937a338739a893aeae76df6d292a3f63737e6d611a551f1c390100393c0e0f29e25baccc8436bcc51e77bb3ae9e5f606733a77c470dc52f54b62d57efa365320cc158feede30024858e840e154309b93360115fe1db89fc97ce4e0ec233cd763d12396fc25ab2a2d1866671d8ec8988418f082cd25ec53b4cd04c7a4607170a9962a5f6c69d2cc4f0a78f65de74a0153ae68c018bed26b84f5e5102cc97ab221f011c6f4930396faa2d68127650dab7745e36ef8f99abfcebccad82041e7628db4619703af2ccca913dd24a8b470889fa2568176115444026703f746542df9a1a9108156f7c6a6c6369d66e005f18cc464c7f0617bcfd405f93aec5af2c609c80fce574a08526625b28556efe302091411428a45f7d5ed796bff9dedd6a1238d09c7271ab5f23832910f9d4eaa8817fd6b6ae4302699802f2795b105d7945e7f71002424661c9f0e7cad146484111705fc845807da34ee86e9892de0194c2917927ab3b94f03c4c072f7d1cc5e5c497be726f0033548a7c5da349705f2a8264df0d3296a84037df89ef2be016afa2cab291e3010cefdc4ce86d44ac17c3be7d6af7e3af0eb40072834afa3d4fdf79a824f3c95364e35125bfdce1480e6daf4f20941c2c7a455af4d7c796e6dea8f5c706a366854f61965a61b958baee62d2ca8ce316dc846bb8b06a949d63ec3350357959f3997169c8a91517bc95d102fc764e7f569941b0020b1fcc6c0c7cd889f299ac73964112b2cf4ce01a16ecb324dab77ed7c007160a69effca5072cd45416233365ae86582bfe31e2633207b2a31d4e3e3569f01a8f5fd9090c571a32fa1f188f8fbe9f630a083d24fcb40caf813e0dee24cfa329580ce6f3ad6ac2b8b8268a2b4d1936cf828d9c30a2fe2ec9745940b934596f4ff0f93eb76d8ff009177711cf9d59f3614851de9525716e6d9ee8d7e905ad7423739845f3347ee85bd8d3c318e03249bba4b577bec6bf1a83d6d8ea0c1d2090f251d2372ceef095fc7da11583e9171102bff3f334e1d58895b5376224a9c572150c5ed42fce6c4f8ef24fcbbb857ea58a7337820ba3159f37e93c51127af4f0e365a7b861c1dd7bab987a2422af3fde481b7ca16478e24ade8ba0cb2d379cb715d965962e6553844ef6cf796408a9c7093868f79d7bcc0781ba5d3bd673a49e2014ae3f0549db61cc1c21ec1a09b80a4f04d60cc5acc7af1aa58eac83d6e251f8a9bfa0eb574a2cabd07ec40fc239cb056d6656d2b1fa6bed5220a749b61af5ec9ba5bb50d3c4d56f32ee8ef9208539eee3f9eab70f384547407e4b08467fe1721e126a3d003842a584d0e43a9278c65a26a2987dd8aa4a6ac7c1b3ce838db754919b13e6c3a42d03634bdacea244c4a586484f69e713ace9d577624d2ef89e74945a608efa0189436299c6a55d91383bbb5ecee8a8bec295df3a7c702586be86ab7ef05e40b106fbaeb510ad68510907bfee56f02b588e554f04e0c3360dce95eba75f8a0eeee60b51ecd315465164dcacd0c57633251c277c00eae56c12b7318b25481d6f6ca05f34ce781beb80d52a8f991320453450438cc974abea10b58aa8880e1c77fba752d3c813746e32644e6e941590316a2394c113ad708f3f5a29b025e6f1e6a6d4bdf229d7342685898018884351aad274eff7797391e60519402b90918f08bd9aec39ebace484fc16f072595c051f88c034233cf60391097fef07aef2b38b4a082170b0b0cda74069996f29029b4207f291b9cbd8739e294a8ff1cb37ea687e31f03631bca0ceaf241c4c9c21a00acc9f02dc33288a48d14fd62a03171a46dae5a864e5ccf71856eaffd7e909179bc8ea4a45c7f07456a2d0ca8aa34ba1511632b367234ac119fd9a723468d00ba817fa0231c9e0155bbae8b265da6298a5fa146471b659b1bf70cc903425b2050902e698d272fc1f40f59b46289fdd09231d5650f87d4f0aad9aedcc591c17c574ada1b3939b9bcde267de6ce7bcf6b3bbbd96b1797ced5add03579a5c8891b91f17ffe85b632458363c0fde9a3a17b47cbdd2acfb6c35f6ed545ff2dc5365ec5224c83bb371ef2176e5dd89e8ad8ae9e567fd780bc189dd9dc6dcba655a92e88bd858b818d654ed974cb27fc3c00a6c74096d63ff85e2152d8e7fa6f38ebe63359546bdc3cb4a6d6dc199160d6bcdf013dabb900c3449681651f23c81a21eba883ab27ca6eb7698e97febd2ed204485232008035af85c20a91d900115ec1d037f6c0ecb8bf9d8581788f4fb5a3fe67ed3a11e7bddba72c40e514eb1d5dba4a643f5fcc78b31fc752e053e44c94533feee1f3294491bd24603799aeac1c74f39085a58162728568f9259a3182acab3b6405ed86295395f190d935c78f8c8090da3dad7fdae1ac99f8c84c837f15d0af325d2b34dcd7e6fe4ee51633c8db2f89a9e449d75149b0d68a03c4e54d2fe3a097886fa152bc43a1dff2edb22edf5c758a1597235dc154c98f7efa821a9db782232625e7461dfc050752b6efcd182edb1385e80d9b29e619b6c76a306031350babd54bac8dab128d24352b809c8eb22cb38b894234b37ed9b1260ec8c8bf7ebee965957db106d0209852135128324f79e20a66af9968071d1f2e4282ceff3e619e289dde34cbb6675b60c5b624b90e448a73ad8e347eac5fec608387ac7261c50adf5bd9fa5f0d065186cbfb3d298698c86c43c7b88793bd4f28813e8dbd5e87b963f72393cdf8b035fb155368f3ead7a68089a068bdc5d5ef69cff1de2dc5152f324221c26ad9cb21cb223852fda4d77332e3d303f80cdc741019a060b3412d6250f8258423e45759880f7d4e67e43019f9a7c699e49e12c0fdb819b8db19dad8baa5842ac31ef1bb2d6f8548c54c27aa0def27c8599e5e9175c4bf75f23f8ed5ba53e96ee49898bc68e30967cc78c2a19264de78552612643b6c3e4d261897660052ab5e033bd2c4e29553ffddaa6903977b9a075aaf9397618d2a2319e79e3e0301f2c2ce68a390ca503305a55a0183fad1e4aac339ba343959ff2875249ddf4c249a9a41646322e835ba383612ee64145f3d8e442162bfdb1489aebb595c8e3fe7087e119856ebb738107fbfc0804a819f04c09dfa5c9091cf2ef17b4776b7b11f90a4a162edfc731c8f2f4e90cd54827f3c08460949bf1b236f0de631ba1ef7710e05a39fd05919a6bde6fb6a330f1ebaa3829f4e80e00402fb61445845922a5e8b942bbabce9191545052fe4be36df35a334a48bee54e1e467a507d48dd9cf4c80fdda418a4365f6f2f86bfa2f35dd0a2d4db9532ec6ceaf79959dcb06c392d9be5194ac1cf6322f51e391a9ac824cc2e2fe95002bcfda2269a314ce8a78f32f09cb94add0d7199e02eab250379fa58a33750e929fae169ee4b6a7ed48a42c768b1684ae1b8c6e278bc45379d5fbcf715a8b1e8731b600b91f6a64e607c735ebc317a54e09db205844151dcc06096e292868e1d48220e7af3d76efaebad8a97dc69f71e0450ac64e31dd5e6ccb42d57514e45456cd801f289685142e129e2dccf0ddce3da1e5f97234af7e16f5440bcc70ef365aa1f4bf6941ee92a6ab0222b6fc451afb09140285fd33f8d4b5eb4c578bbdc8798f68e7dd7b646931b93b00b5121eafce0b4bc2a031d1b8884844a4b17117d9d943d0253e6292cc2df9bd0d3d8a770b7618ec95052b92ad6f07740b37bbba0bc029a36a8f7cdd9b32d3b12b95305f58607844b2c73fcb2c81e801480723c2dc28a21b8cce9456905566c58a64734418339157898a9a439130f6063c4bec15c4d9dc62165563bb7ea786541822f34affaf1b57a0e0ae4181785041b5870c66dfe4400e0d9e3f6a632252f4c978c55920c38332e9c6fa6d8040175742784a3572c940a6af3fdde5de0e03151684671224ed7bb8c5b34ac25b9d4e9a6c9659f318f135df0d2ab09f9e99bc5bc18e159e74441fc36d865eca7f433270224f7ff15381cf64b40a07b455c058d45c641b4898184434d30c449133da7f3986769233a65e321ff217dadaa2b04f8c095de01628661c4f2bf69a5fe3e520aa00e712349e1d208f4d031ac3b76ff7ebd8eb6b07497278aaca9abf263d099a2f3bc7f7306b80e9272ac6388630a0aa2883583b5dae877698c192bde0549e8c255db32b968152e16ed44ab495d7083a1e1458f9a63cf879c5b99a75267189a66b9d644e46644053042caf2e7898f0dd723cb960a747b7e629407b523a706f231b4203dde10ff5ddb2c450de61da4a779cf7f90e730e7e8e11ff89929564c2b428fa76b2d87c16ddf275edbd85846d6e8e0de7001e500dca1eb642637ec348b0b43950fa41d0579a6bd7447967bf2990e7a36543e69eef07bad81d9956d63768f7de441c5d193954cc2de3f6849a78354b6040bb7360cd5ea547faf046a0d629d30e5a6dbdc371e5e1dbb837be18ffb6780eef9570295a1e7e5e7ace2244f1128d0bc08514c3e88d123f0a16376812375f97af662019b1e500c48a041ef0075ee81efe780ca9c5772f494c1b07b4cb59012e63b41e7eb242b4ed4d0dea106e1df07b55dc4fa0e20edddf24d96f8263b33674be442a5f129763ba822bb4e1aac9df8cb635f6d192ba80e0a781474d6dc341efb91681c36f88ac658c4a6daecfbfb996ede7e0c1fc9ef660079cf64bbe9d2fb93201467fcd5a7f1f28ae44b564251cfc0fb47f4e63bafb12c92f00aea093a15da62daff162bb0349270942680e8a51c32b77392c6f0f935177386981bab0d96e3ba309080f865bbb80f88ca1bb57a6a18ab05bd56a6a628021488f93c16a15a85b5f50f7e31ec22454671c05be3654e0dda28e066c5b76dc837e900b83fa6b4bcd002dac0d79fef2f7481cb96afc54ae984c111bbeaec34243ca3f28bd3680e9230f08a7d0b15710f9b6a10a569065ce2617be18b58b3d8905bf6369bab331d8b760ec8c5c07f9eac0c1ae34252ff4a2f41e6ef0b09d1b660c91b799e7cdecd9765ded0440a6ee609ef9413654b90ef523633fe2401eb36d345357d8cc43558fb1a652fb96dc8d3dbc9fa66b7685bc6a91966906c19da36b6d8d49d58fd2b81804aadeeae7f0280c63347f5716af5ddc259faf6d28ef9318b2e12a81f722cd87d302600619b8282888f645959dcea2568126b9c997edbae593405ee58a610479357539881b580fcf25f78a81ec6b86adcbaea41e99ea34e0de49b91b2081308c553ff3fec3f92c4d769a65023d957cc5264be99c9d9e16e7da74938846620f55221417468af453cdb68ba38ae8fff1580aeb49319d18982868cba1f4a2171feee5d7a4a07dfa3266a004050077f2f0fcd190ca735552c1a949225698c76f5cc296d11c8c6026e4430725b647abbd0f80cdb38fd69f311b598b83e93e9c91159ff431a68554c73d8f4b3f1f074570c9f3693aeaf5c8b9d74584418d9f09d3a98f1679d1d745d49422e30232baaa5d88436047d8338ceedabbe14cfb83e0c21a68b835fefd471d68f89a7539a178ffdd0244f6f468f9450d85b6d791297d19e53a67b538731f53e5fbc682ded9ab48f5ca1080680249c2d930fba328629d57a82fbbe1cf81af4a2c396c5c0d68c0ee0d903a74a42018ac9ea31f2cbe1a47fab63e8baa4f7dd0c62bf5660ee1075847d7dd17b75cf8920ba0f483036ef7f382bee771a8","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"5405f04d476da299eda0c6aeaeb6c7fe"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
