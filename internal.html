<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"7df4554ce0edefbdf88e98bdd99cf36fd2a3c3d8e5a8f0945e7468d99909676d8280966f17c951850aa8f201f30ad5eb4b1e2ac8e2bf744ba1e97496e6a7def9f2c67660cb0f893187f866fae5f3e937edd64770fe3817e1f3a94dc732166a462457cecd8b8e50796d89db63ed33615822a7a98501acf96702f20e770e0e9fe73bb4e785a7799b9a99d8e964149c68e12ce986a8e83a07d580284ff6c47cc4f98278f80b5f53b5b7f7e99c559da7669ee35afec23d912d949a48ae07aca090c32d6c9e183489fbdc85da6e9436284b6a04663b31665e1c54bdf28802b5bdc31f82eee3ad4b75b6de8ff04b257bb9effc7b42085b4f10fa7cde581e4dc33c0e33e3d61af59a8d69bb391817d00a5ff89d65714c26cf1d8a4016846b9dbe6d1134e2a3c7a40308596ad5856aeeba67201d2ce50ba3dda3c90414b66c28060aa1d7833d3be0c99dd7c73dbd2b48352148bc4eeca01303fe7c8f4a03279f61a02dd1484dae8f397409fe6c289abced4d6cb980416dd118b79b6881b2c2ce28d777918bcb0f88d9d7cc39bd60558d03d7377c977b2284f6997d22752af39cd7eb20fa223e020e4c04873672be6a4d90931443b9f45d0ed08bf2b683b1aadb9511dfb8c57aca487823a478d3eda5de0e22660240d08c351c961fbf370fd375b663db1c7a9bae30433996f776561b9e71ad1ed5ad893d168b0124508b5282d24cd5c94ad826a07492d51a7afdaa25772d11da5e4c8d0a0bfd93b3f1ee27ab03b83fdeb60cb74c6820015aaba15fce8a231456d7ce2728a3f8050f92fa67836b1d54bd5b54074f2cc4f5da426c7ff769863b18f0bdff35dd5eefcf2e06bec3ecd13889e4435d3259091111db56eed457879b7c1dd997ced1b9560d10b65abae11d5b7ea929548ccf8801c80e64bf8193ee474263e5192cf0afc404f0bb4e2d2fee6593a6471a795817df905899426dff0a78b392bbfce0ce86c8e25e9a0f0323360791c6c5706a581c9be5c3885e4d6d82f9c59f48bf96385498bd9570206c24e38c871fbdf30c812c3b0218b6f2be082ea12e6239bc4f2506a0e27e78cfbdd8036b7c16fbf29a6678ad1aa452ea4ca70fc7f6ebf089d1a8fe56f69641153133b8dce1ab0b4458f98980a1e028ecb524c2235048bb5ff3b987e01513965347ce49f7006ecf6ace80cfd443ce7b0934344594aaa664c8d5779860c253f8707f1e790b9c9864ff5805afa98c1493f2e662ba42c0e98059566d6812bf2cff8a7e1b16e5e96f44fbc2f8173d31ab174b90cb905627020448c4294dba82fac3fbb2da433812ec4ceb222b577ed9b79c1e57b3112a89663b336616df8c5c27f8ead66d8e5fdd070a68ce81f6c1dea23f36466394b103592eb08527c752d38a909f70563d4b88acae99b3fd509eace8d0e187457c3a8721b05f8088b1fccc02c3e0d1d3071ef3c56a1e577d101df2d1233cc74bc250d7be96b2113f1b5d7aafe9c43a095adc12e2e5dbbc800f4ab64fd605be1fcf627c1d2ea9f7a2eb88f88f4f36c50cbfc453db9d7a2d45fcb0e5484d23556214176c91d74d8598a381d8039346e1db9bceaa8c1d87d71812a820ba2465d5e3812001267c0058c7f4deff877b5c960f6d3d3ae6b0456594b4d630eafd6acc85e18aaa357e4d91ec470bd46893cbe3e306fe0ad258361bb556e20f6f817576a4118d3bbc44e1d9c271c39293d5b4b439b2addcc336f68710e6bc3438f57e49ba668affa6999efb0b172011d6e22c27cd637e5bbb5baf29c6c1f12e72819f0291b5d464d177a55a0617a8935d0749dca061083533202576f5b1a37d9832b28d42dc7adbe26c78b6ec47ee0fda3d511f8baf579bd5a1822ef2c28a51fa9c67fa2927bfd55073aae2075ee575d0981dc22df7963869fd98824524d479197bdfe27f06fdc43014220a6189e68b0d839f7565df1aa2d829020456fcee5246448be726593ac23404b414acd280552785c91630e5c1e2529bf23fb4d81a9d57c1ea2489e92957dd020e009c18d1064ce9d2e1b49ebed3ced88e798683074fe4fe6f14d485b5505204a1cef80a566cde7197604b1e6084940807cb59dcbbc0909114ab76a2454378c17846f92532f699e8f7fe2c360b065b4090ba2ea759fcc66d9f37cdf71abfaa47e5163be6e5d4f3b269711d6297e41f4959fcf9d379f52730fc96326fcb4db738481590d6ff7f635695e0d386d6aec70aaa97f62b74cd53fa7331a119f24b62076767acd945d580444726316d0f86f4da4227cbba1e91b0c02d246fb0a8018610cc97e3afb7851db46aebeeb2876583fd05b20009f8fd5c406e4f2bcfaa0029788d4d97eec9274db0ffd5ff0a2bed117cfdf3d1503bbe7b8cd2a131b136c6df7951ba1f889f1353851a9fd4659b9ed1542903dfcda8ff468887b815aebb118b56553bda835325cecd35ce6db4139691577e56d96ff8e84295d6e2d2d9fb386d7a1fa87dc8fa40d262ebea2269ee63bd7186e35d51b991260d3e4c5a38c01efd9f752f9ca93c4497837769e0ee104a682c2d2ef5318c3df3500defaf553ff47d5e50ac44b61cd6f77494e88af2e9486f05aa025dde840ccde2af2a4f68c6f899ae765a67bab5928a88d4a50dcaa4c5736ee2c6574a00068d7ef21faaa22140958cacaa739999f1d3d1332b9dd92af4603b96d61e79b090e131e737c8fa261632fcb60cc0e04304ea67a38510f7d0d1895651d15b7133bf2cd1cc321cc87c597f67f4bbfd917b50ce625bc94a4e16ab356bccf6a30dba4c8ab78ed203fdf453f25ae7050159d7fce053437d96d8ac1b381e876dcc7275290c1d0cb327608f95e74882d9e031c528c111056bc50362f38c7821061a0d8bfff5d27436f6ff15ef5eb6f917124528fa7bc120105740744dba45b94a971d912560df58f34eb9f8b5b01f09a224ddc25860ba47cb49bd733cae9db1d166f90fe634a41da0cd57e689cf7a5b65537e19e0f642dae745be486b1c324ba02269d0310c34db94160944ce966584eede0594becd6c0a68fbfe7664d3895e64e6ece08f8ebdd287c6b0b031f02ff992b044c5c3d769c7ec1d97f648542dca29eea1b37fe54dadbb348263df42c8df7ada440b9b09206c870c306719bc49b7010ffb60495cfd91696aab9157f0a1ace55e19d0b9b2df69e29b31f8568bc3a1e2b7331196de14b0da9c7be7d3336104e4c209329222b61c936b7b7168aad8e124f95b0a67257bb18a91c358fc0f3e44821b481e94fe0544dc80a5793cc9a42b54dbbfd7faff37966d55a684d9dc6d7118a41e6279f8a3d436ae0089470b5d2a939f46edc2b6f100a92f6655a8ed85950592dd63f2bb9383aaf66e3ccb38280f04bcaa0aabeb7717ca8dbeed6445c87112aef660423b1a9795d3e9f81077e57975d168909731efd6d98a5b617c56087ebd086c96c3dcfc736372932e44a2bec43cf0b852bb7c792f36618bd2a5488e7a19e5c00169490f35ff308f10065f0b624236dc043e4231fcb3d95b7aaa87898e541f38475a7da8bdd1f4ea540312a9a042190aada05663fd1f3558f1e3c50caaafec4cc473c4ffdf5ff8cb29f028f54cf891b5cdc1423c22b73e5ecd7fb25fda11eadab0d14c827173e8c3969e7cc5ed90bbf03ebea4ac871fcdf81dbf4dd13c2c24afd8962749a30a258c651bf62866f5faf65b1dd408497494e959bff3b05ecbf722a16df03f2012e39570aa60ec94dacf3730dd955527546aa29c9c1ca2e819a6e472961a62994dcbd904ec6256322e36be876e26b48906fc1da3236077fd3b03915548c06faf4b0a8c58fb17e1de3ac31d03f0229e95538c3519b32c49b4d8d73e410732dab1ee9476af2e215480f2e2c0481b862cd720b702ddc219e9adeb4fe45bf12657911e9614002ceee424f349e0ff14bb407aa08386a0dc65578665813eacb9a0d99812257910e989eb2cc2e5ebfc33af51927e999a3778cdc26df13be3589b7d302afda2157b86e5077aece7a7b57de61fd34b67ccc05a343fac96e9d7a4bda1a2e65d27e496d8fca455f44bf007ffec1f05aca2db643505eb8023147e46d8241316b99869433fcb12735fd0f6449242123480f50c969ca560c25fae3c01624d1a75ae7a03cb0d642c87069686e6022317a7e5faefd163e31d8a3d29db9779d6e86fa8ff3a9178832557e5b277a81ccde1953a3993b9e7a48914df2b1fef5360ff0920131e8eb4e0b99127a82b79c2f290d10705ee6d4bd1cc9d3ca0f6881375b526678246201c5b11f9d44808d30cf5681a2b2362236ad2a9095a8150fe9955626dd22444699854f4b4abdfe9d77be780be6485b032f0cd084e9703599ec77b5f01cf5f6b39bac27014d695c1ff51d5138f3524dfe128e5927fcaab03f6abef30d69c69b3a72eeda662f016031b12c1f87d0f0fc54eb3ecd22ecefa4bfd035858b67fb2a7348500679c3d6ba196bc603ec8a5587d0d446b469fc125569a09c65873bfaf077c4416ba154f5da71e0c5dd56eed2c8c297c51b96793a4da03ca4dd4a22ddbdeb51f5184507a279981575767b92956deb2b89371dd9126628c276886af3f21130976425f45018da9c3ae6dceca50fcec1d097083822435cf32bb8ffa1b8d116c80cebcbc7c418478f0a7e587b2ae37f4875a063cc689e71789e65ac7eebffc9b7466f85d830df6e99b7f4161aa5ff9d8665bc729241e1f521b9133c8dc5f7af698ea597b9609a1275bfe25baa3c9845ad58bf7ff3efe3eef886381353a522e0a3f9ef081d61afb23af0d4b395095238e7447919cafcd49857343af5c719ffccbb57d2b75e740517de9161175a7eded071d9a0f666ca0d34d4d181a2a8f9e54b65c027d1d6da7d244cf102f396fbf3b99627bb6bca3cbcfef9af87866dfa3f0ba597f144595386f2be5d3490c47dd4f5a1b1ae673c6cfa69212db5cb930cf143ef630a6bece4570acd4178d6b357c316f07a9ff9b9c23b26bb6b478265e9ef8fae3f5443fd3df11206f7a88a9994257e147b80ccba35866837435b66c865ce7ea85011b441f87b0dbde1545a763ab2f959317e7137e35f8665d16d3b7b261c69c517148037fd5283fd930e5db56d5e353ccb940407c30e6d35c7c39f57c14964c9b4898c7214f155c68f6e916940c5ce5af5ede582d5703be8f61af5c18211af245be9625c1cb9949a70913d0c9ff0d51ae33d515afa5c8d21202f50cc89d581f2fcc693fddb338f0086b3f44bc6260cae1b040d6d94e2a9da14659170a822e932aa44dccdb1ed6f02986f631ad7eadb353651d53c8fa03737557bbf80d0c64c4d6aeeb1da1a762b0ee8fa034d11195b9b939cf413e1b219857d81066e6c3e1547d3fb6b86b5d8c391364b96e67621ed83de5fbb5b859c1265671d11600b3be6de555e6a6d5583d3b49355012d142d0e49f0a2d9c3c4311c6907bd2328c5656659c298105df8c5ad7a65ad66a630ca4209f542ed9106e012161971f38ca11844d25d6da228a93b489d141f7cb3e4a6432d90d4ca11663c887e91220455a5dab915a51952dd32a10c95ce8fcbf2c7401c250f20ab45475ac1f4af1e5675b1954bbad86e93200f7dce7dde4dd33b57bb1af7d65432cf865390d04c97a7664d51297190ceaa6b78c601bc2a82cebe434a5888acc6d0757df5b70198b133c98c5de43ab606c53eb5832fe1b824ca7e0952c33acd9ba257779591f64942a20a44ecf1b72c05ade0c066fef85a5228b21745b5a68746c8dc96382aa192a007c57b6aef36ce00652d7ea121e34e327c79dd945e6f24c5f45ac5e2f5cbe45055e40c27db173e5478060a5e0466a455e55f1523bb7216a98c7fc4a0c93c9cfd680f5165abd057c97b252156c4474df12348f28a3ab907a89b666c4d2bb87b0fde5e9a43536b48bdd70c98ec887091a44596fdfc88a2380dbbf5da4b0447bc05a1c5e318c11138f4b3abdad4f757b4e4dc22c4a8a6155eee9a5318ba75bdb4a585945c3b148e62dcc58c67c8243ffc228c2046c60b70b171a7aaf881512854c35c0723401a6b29c36845957e40bb8f208044539b1947a761b606896a0109c62dad68ca6347d55b46361dca22c9044dc91be1e8b7484899c3303d7aec7ad4e387f3ed41db4371ec1a71e1bb42dd28bf764f7bbd6b1b0098591e564dff96b29a881a7cccd9abeb96606bbd1819c529f714cafe58b7a5335346a3a21e2a54b8772b7662e2d177c90ec0e2746e189b30a98deb4187e2573462c77ea326cd718d0551faeacd1ef0baad65103f4fce9b37c3b3fefc432adf67c6e9fff1e1eae36fd93f0494f5abccd5b4ee7292b2c12b7971520b9c5529a414c7379c578fbe90ac189c461beada99d5fb1b4c1483b4d94116dfe4ab875b28cc34947dd500ea6c1524d45feefd27930e6d224bbad0ff55e3379aaece5092de461076f7a8d49217c9aaa107480f12d15a1ebe7ae8a6d8e5c3cb8f887add1dceb9c10007fac3fa3283e37fad989f4619052de5cfeb7edd20f31d2c9599b9d677134260569d6fe20bf86e627ab277b76caef17d0efc39a99ca62a07d4d4067607238790f56f1f34c0668492d366900272d62077bef0318d1ad3a7311169fd7e6c45331dc520022ceaa0b47fc223173e05599e39bdcf6f643258732c2aedd824f50e1cf2ee0594f205a68601b2c0bd8e6a1cba829a52824ad2322a3c74ace27a941c30256d76cf285e0e0f22b0fa891f6968a37fc6c73140af8f2cdcf454b8d8d02d82000d367913acd68e54382f2c59074cab7355033e44c4be44e84fbda48a74a567bafe861d19dfc98af4e1ffdb564a85a1aebf5800ca4198600a24f65503b3cc7a117ef8cb746510c345e85767589c66b7929a82e56f11f4cbbb0ed3515922aa45607ce5eabd402e52c99f9667243774b9d31fdd166c758a1f0c81553d13cfdc6d5361e22214b12f68599bb6ebb43aefca4488dd3189f2b08af75cb9636980d7894b86a9cfac6bca518bb786bef4fdfae25a9fc4910904562fab513593d411041a4f6e04ea9bcaebb8cef5781843039308f8f5f9e1e74c2eedc1c2bd802c69ef0c42b95c8ac9e2b5b9ebd9bede0a40236ab382c8472c6b72c65cd4cb2b31b653046b58ae60f605ac802f1a2542651ddf34968f1ff4c26ad78a46cd6342c2c9dea6eb62a8978bda5daa77db33e9aa7d678c249ff29424e4f49d0c039242c25cd2056467851ef433affa8d5f7ee3a6cb5e6b63a913da6293df35d4415c45ef031940955c99fdf2f8eeff89ce2c6b78edd9a34ec03e7a4b1cdc9419cc64a4f8f9756cc25634dfb62dd32aaaf41b6e4daaa7d3adb57f7264af904654c7596d37403f81d6079d17d7aae939caec3958f8bb5edad3c24e2c090a1b7659e9e9685fc8118bc3712424152583b2e537fc30dcbf5cb14640f9d1858b339885845154237dcf9b154e56505c0cab54aca9bf6bb0f6f9f92b5ff0a8dbbe329e6d45771824ee578fbc00ecebfb953ae4ad52d5e23b886917ef538de89084820bb4e57886d775f8efe7cdea24a882cc7994f7093023a4157b8e86aa8f75ceac8ca8fd4b7567843be5f9cf3c94f7f2fd17c2ee58f65d4f8ee51a08fd2eb78931cb0038df7d6ef35899cbcdcd9ac45a6565555290b3efbe768634a894ecf43df486e19b6fd5e48de745dd430bcd9416fdcd54483cdcb6181c197a7b13d62092a52cd2ab95eb0b44d4e1eb6c1a45a78e3af15f96e1442717e986b2c70b92c8a844d3171b7a34a9086e4ae8921570e6257b80e4cdcca0ca839ee9972b4b04c2223a7177b6ccb63667130fa79be62557a4f7bcf801559ed28be6861c8218d88c58ee0f38fdb209abbee20145853cd5ffb263461f32c0af5cd0447b66cff0a562fc059fe438d564f306bf030e2fa03ebe1a25f009926b5eba6c7bc2541797fa1cc72c56d0c8ba4b1ea077e084f98f34c9e0eb0944f4164778e61b20757702be8966cccdfe6b90524e2f5e98a4975bda0be6b97e9421f2612154fd3e1b24105cf49e408854aedb3c012f9ac4b5dbc36562e3c0727e8b4f3375bc96593e7bcb7e3f5f9b47d7bdfd678d1e395d4ccef992b180d2e85bab00e1db476d5f599667b667e861087e49a0361eabaf28fc4bf1102db756bfe5640a181b1abb6b43642de32cbf31e2aa8ec25e20ca90e523f99e34626a6cd799eb8edfe30230fc81aae3994723cb03dc8283ac526a5a691fe3011fbc526a7a2bef27f67a82a950877abfac29db1e25dfa6dab43fae3a753b0b05bd300b38bac13a19661ff6811f13409d12afe81c3e36a95fcb3c11553fef93eefd83f1f64683839f95a0d8bf5fd266ccaf0bc19e76f057f4e6bbec3f366dae81cee4927978af6144bc93a41975b33b6adfb55c46a5c6938ce61d4aecaf2fdea4008f3d50c375b449db627c14e1169edae8c334542d4d2fd9e7d27958c79ec06ba4f3e0090f58c04ed7a32bb03e08c82fa421f73da5e7dfdc152aa76526a6bd317aebd4507db99f6aecedef6f0ec9335c2dead6ca3cc7580153d9ad085af581c9938978845281f57be0f00672e6d14b807d6e2836f40aa829729a869c5c318ea639b5124d3ce13004b283e8f514cdb497e4b3be58e43482c5f68776b007c933465af42c9512d93f4477ac49dc60ae60ecc193a997fb84d143c85a0be152fc7a14992a816d6ad2a0e7d231a4cf338aeb6229787072f08cbfdacd11d76d1c5753851439635d83f1f5676fcd28e2611f46b451994cb7432e7ba1f2bb8a8a9b09622344acd7f07f3007cadfb5d364999b28b44a757932169bc93034f5d4149ea02495236ba3a5b12b14b075fea5a69724b65cf74ccef4960b1da6bd117e5f5f870913325617c0bb1909232e0c18799a25a770bd66af1f440c2089604284759b5e6844c89fe743a6b4ae301bba0b30cf57d64617732196ab707f0b124b7501ac148281883c9ad29d8db958863982a6ed3ba3e16648c7054884793797f6d83c9117d51479ad4a8de067358ba026a748a16dd3186c91e1e9768e1a9d48528bc6f4f465fd41fe03b765d4728ca7c367debf3bb7da838642d491c903931f2acb54844d5f391a987247b7f4229e7988ee9fbb32b3b5fc0c5655c00f3ad47cd0fb9edb50303c1485411396b490740b29c881cece67154f13ec708ae9c9683147bc000a10dcebb7d8ad1b7a2ca38ca5623fc24d258c3b4335b2cd2b4c8703d3e3d60eb58502de292fb95a751fcc873884ebbfc2150d8c2ce194e26f0a87975f3ce5d8b45bda8365ef5bb323d2e0443d7f27fdc19b1e048f33be8f288c2131079346bedccdf19c857097111a82497b7efdf1c4028a1e546e145ea04a551742cb251b29fdb78331df4fc6dd25c732ba7f838831859972d60382bb6332a99f67d0fc9ff59aeff14242c108c8deb2272764ab02250a6170b9f68d61fe66d25e965777cb276f00a482cd6422bdb25a2174d571a2585decf4c7eb439a4b588ff9aca62000d4b4eceb1b8bb9a6a533a0ccc84e88dca8ace7a8010b6ae7a1d45896b034c446cb78c7614dc1c164474482e71fde526fd8bd7bdf3923f5c068e01325ac3598ee36bfdde0858777cd8a14ecf9219098874b702ad9e3bc3db27000f026c6655cbfbef5169dc4803f7208b693dfef091282032bf735935878649804c8aec69f95d2738b9eda8908e37f6b8f4af12d4ddacddc1912558fad0918051e1ae36bcd128cb64c47e44994cab24bd4e87763fc0ec5a7afef9da5c237ea519b308d2d75c24370922823ed8c4e9a956b8a3927485eee6c55cafc48cd119e443abf09e20d4e1c023703650a892bde31c5f2dcb8f065d2c6a00a195fea44d4ef1ef3af9512c74110cd69f047cdf09d8935c258c3c61163b3ca54c0b18f593890be257d4675c28717a88aa5d8953c57f176df353c65a3f5f044bee8f2fa46f607c4e1cdbb63139a3ee49006ef842176a96ad5ba8140a580ec95fc0fbf2af5e3603ca23c6c1065e0a1fde0f83e3996990228b6c9fa9068f667fad1e6488dfbb5b7a2e7e43d79a17c2d92f23d0279fe66b2e3972957f0f8bf73c720e54c64f53a576f2d3fed12315912039a316f2596e004b7900d7b9d8d9630de3da3e091b3fefb488f192d86237d69ac778c7d3f24892e2307cf2b92a5c7b81941dc5c0231f9a0e28a86b66cd2ae3c0650654d57c13871f3350943593b40b38866b21fbcdd4deca64ac4e6ce8a8bf44898d5c4230784dd8c5fdc982e88a22a80442dbaeb930e86b691baec5feecc9672ae91884313ee45b6058bc309dd9b4bd795f8a255aa619594f8ddda7224ea7bbc5bfbfbd36d2899fe9b7e63e48f4fc5b2540d45b15270d925f09415b92b26affda09b78564906932a29c9f4d3e2dcab8a6d9ebf9904a24254106ee602a91519490128c81722fd67dae0715d419107ebbfc30cef4d3726323c0e99076d1e7a1b431a2b08b236fbb76e6f4c6c2271e9f4603f66cbbe488d7bc22fd66fe96708706b87542c1ee0caefc344f1d2cac95c3e8e63403ec2749d490b2ab9afbe77b20ede17e298306de3f6ec81418bac2285e2be46147e970ae2db35389882680a6d9b0a2610ed04c15770fbad5d980d5e042f4b1d4f954ee0377e6ec4dcff2d67faace9b7ec72610706966482f3f3a39a4e3d183619276b47e23a8a4c4722a24c97426aac739d80bf103c1f14fd9715606bf1c968732b5a3cb3fa250655731819e4d247a1a505d4ef14e28a2c7c3e5816d786b3e21f4f56470aaba632446eba80a106816ad45bf02b0a99df72b7db22871e620d48c87c3d4ddae95338ea43cfb64e0d8b3dad1291991b266a9fc434bac6a6bd0b91254513bebaab85fdfe16898290990efd9d644973976e6ec581cf87bf8818a3b1f1627718db7df995d03be7585e4ea1d314c499e01c01ae461fbb15f0ce1806c79127b2fce97f9415e1479d0ed9fc00e0a84930903c40229f43f7930f76dca1dd8f1c51330a6518807439174fddf1fa9c3a62b6f20844b9a5214bceb83a59a1fa3f8a58e8aaee888a6b1f4af8bc7523a180ab700313118db38971d2d82f476f2e40718058b722641bfaa1b7b4f2da3e21f4f78fbd0c94c2118230808db0e8de93b3c97b9383d9778915a4d91ff0ce766e4a4e3347f75eb1ad1473286916fd4e8d6efb0d7f6713a03c354079d9176e0650127f78ca6c33f472367f19dabfaedca57aec75800405a5da55399d3b0c945282e9894fd06a2277a5f4bc85a5cec792f88f85e51ad5196fc6e59dc248524f3d35a8cdc98137c69f347f1736a9c02c8a9a1fbcec0db4776de1a28e5274733036ede40c178687ff8030d587d33ccdb313fbae5ca8489cf4d0ab3e64b006c2c89a796b02a5978b98097a007e82e245982c552e093acad7b90099915513822563faa83fa780216274df5071ac547cc9a42c951d1d740efedc8740b4eac5c0c30104dbaddc82a380e49e9f704fabc68b9ddf218967a824990264fda0b9e68332dfc39a6722847ae1ef04e6fe4346980f18d10ad1795884202c773ac800233bdbc944ef64f48127fe3a65395d8d04ddfd427d78134d2ca3ea15dd735949d339d70f38a13d8e289b274ece7a3a95bea66288cd3f332f878b96b621d8bee759c77546016440151315a6874ace02ba01958b765ba6ea2e77acea44d49657a103c98bba9c84e83b7c83a9994498b70ab5a6e52d5b8ec4a32c2540bb4c1b9335925e4c32085410fed57300f1a246df4d695e215c5df5c2cb6285718bad3467b31ece23dfafe82918f47f55048f16161580c6ca9a9ce4906fc5b99a70bc0e42e3bd2cee8590fa5475cffe81122a68779b6461c11318273ecb86d0c20206dda77b07db37292e1fe51eb720ba54c189d5083f19fb800a8530855f0b18751e84bb4eb89648f1473e40f53f0af671653023670bb2b401eb5cf6a02d17eed6ab339e1837dafbd0ac2eba20590d68261dbe37fae0d8afcb6e69f8b2302d2ee47547ab3186b916ee0e967be4522d27098cd8fce1ce931cd2f10d9135d080aca11a3fec5db403d465bc57cffeefba7172ba478f700f2b006be810453daf8f2dfc04bdcf301f6ad8e037cda96980ac85c3a9e056300b2837304456129d1a8bee35dd31e472b4a1f3118faf4830df196ba8d268f7120d4ac7db80406c889c12f3f066f96517fcd2fd3f1e2192e79ec241a85d86a21ff0bd64326fd81ce7a7530ba84db3420e6f96534011a05386504e813afcf8d4f16d49105e7285f200f035430e10d4556dacff87ea04a4c9ab6dd390f5ddd83a0658f4d56fa499657c156d7a419bd9fac540d4eb3d702bbff57a1f25b6c3d87066bd2a67ce80f549604dbebc0385c06ed25852015bf290227d2fef3d72f18fdacba38318c08c11a44d8d7b1b7bc6d2832cac3f6a19a3ade819ee3b82fe1256a940dec1455568f33c6f2a8481c6ffc9d38fde04efb536d80b835589ec8f6924900d1931c7db44d765bfe016576505b16ff39a312cafa9d1da107b239bfe7d53cfee0c0b9c93eb67365037088a577ab237e333811593e59507a57303f792711edfd738dfd4f6a370606ec72b2fb981a6eb961232b043f9624bbff1dc2393b71a56fd22b1bff524e7f7b64bcf456c7c9a4ecadd38d20cfe2a64dc532a3795e27989ec426a5928099681067d89de082a81d2fbf4bf40b204c31954440f90c1f33a0d89f07a04429d04c7a0db2c3a611089c0c65123b3709eae2462261eb3984e99b214bfc67e974483dd17797281985ca627cb584882b87eaded493697aa7d384f8ae7d305924ec2dbadce5d45a44af6389c7c208cc77d0d919113099401ed933bf3b82128a458e7606683d6240cf04fb57f3de81858cb0e35bfd171d4eeec71cdc4ff245409d22d54990a5d817ec57589c2b29ba2b8d5e81125e849cf7d7ece4e6b51c3b10364ea343b791387b9c6468d135162fa50ea17e94d5ac6c4fbfdad0f63a95688e98108a647e1e8d1b8b6707637405d08e90a17ac580d33fa468bc7b53bf8a6093ee1b8bfd7017952fdeacf3fbba500b826c713180643cfb133308345935c85b97a295ac7ddba09f8aef9f742f356160b6018aa240ea4daa8a7cb03ebca7fe14814813173fb9893d5a4adfc5326eaa46b43489d32364e688c890be7e3cc2306ff9d3fe73e122551c64162486f2bdf2d4c231f58b5943277ea6679acd71bb841e899a1ee7aae88d15c4168f696a5d53303772373666cc9ea458d4bf1287b4e11539b1fae6d5666cf9683ee76d44848451c89dfb3af8e7c5d80d2ce0be4128297096ee64fb1ba778667910254df31b175f22f1e85026124587530666008076e7c427cb028b63ed6bdac1bf366b5825b12efd1878b8d6dadc1f801840ada71297e85c3f92c3daa2e467181a16c1285213fea292d3caaab8b5578daf993dc6e569888366c9938440fe1c6342079ea3c0ddf6893a5a827945002b730e53b24f281e7239df485342267d35042d73b033dee80577f247d37d9334f4459cae899cd556a8de7b71012e4cf9545a317a5a72693c5ede45b84ad7e79036b7a3ad7eb380e92d91e1b4e40b19b20af549661e2006c83ba98ef8e15a5e3cb3de355b32c680d9af651624e91f459ce642abcccd5562207f44feba723de61897d30645e0e5adf574d6010c90e23a37669dd906be26a4cca7fd62f203d464528a15411c7167660172d8672c6271333ec192aaebe5f5a5a425e61f8d956cd20efde5f2af5e41ce84a7d8c1bb57c2f5a17d6ae79db90ddf4733bb16274db8272b935c864bd1a328456604e095dd654ea6fa7d3db558608f2c9389b858ab7f414d06130601a8e9b63a243f4779fd4b491daeaf3e40a7fa704f5a979fe31332909fd71e7f8938d6b6191900f2e73f5d35a3035066a393bcb280f72ec8cced128ee8e01271e2ae446a007d8715ba8f8bc93b1a5519363088480aaefb27342b9d1a43b424bd85445a9bef9a8b708c6cf485bff06a7ebf6331ca6c5615ec600bbb7fb1f895114ff8de41af7f49c857f1f364f71ac3bf50e665e16d4afc1c4a82253e06fa223798df21756b62a92b30a02f02ed87b6ab81a7a628c19cb956ea6dbb23b76dbddd124600645c6c78347cff6ae02b8f36826bd120c09ace960d13fd92b0d882e24b588d89ce3ecde25642c13306881008ca8f7bf179251ec25706bbd0d67ac808b734b282c4d3f79f039a818ff7d36e578ec07f61ab7ab0a4a98ab99d0774e2d03c7409e9662b60a6cf741f53e84f687a0a824b48e636f02c67d0d8e35924529061dd562f2a4ea3285d269eb448ffc10636c8d8655a70e7e0447ae9d90a41658be32d680abfa08c01541ecd27cfef280597c8dd40c6053b2fe8a4be549857712e81f0aa646e71ee2b895079e521cb11218a2d3835ad7bfff1128abfe4efc872feb1b78c3dbcb638638070574593df641ebf4ddcd6c7dc7dd6942692b262bf969a2bee95fb02e01592f95e0ef0d579448b5800cc8eff6e9912c67c792797416a045f346a8c2d4562fd52cc7bbbc6ec6dd6850c8604d390a2b1762ea832a31df904774cf55b08c5f0eed91059d99fb2b8bd6a16084a362b70c6ac4100222c057496d817232d7feff47850435540f651068d4ec8d2985e428f78adf9440aeb6151e820e0e5a3ecac08531a88d7b508785a5d13ba72ab00a5b102fb78edfd90e434053fec080ab319f0289e2ec86e9c3e15c35d0272e365855245c28cd82b1bf2789aaa3c743ce8da454249f4ae785fc33fc0610ce81bf5630599fce78424f7dd59607d2adabbdddcd213a722dcdf3a3178439abd0a6e3c8b2ae44019046277aec4a11ca2cef5c46414c8fa75a96543cbe8e06baf319a3407678213f5ceeaff92a7141e156f624c9035d9ee910f9e0983d0990b650a34e20f76300f6dd0c147aa301205d1637cddf00a681286f64e203058e999a59aa21077602cb4305965124bbcb5092f5203391631df9ecaa2676110535d4088c94ff7ab7d03613dfeedbbc303d4d998a39b5e701a49995e5c2089b00e1bfd4d9ca1b9d1b73fc1693c534222af3ccd11d5d42d5a91ac1fab3d0770872eb941ba26f139eafc5e89d7a62bc02235ccd7b217fdcc6971b69c3156b1914bd92a57fabbcf3ff507e81c6fb6f550a3b8dcf4f5286b73bf89600677168c7e79c278429cb169f0fade8bc29ee574ff4201a82783a421a896bece4c75636bb8b5a5bc5561dbaafa64e92e3a1ca2a25d59aada19a28002867c171d05e09d7cf8508860bae6e63f60ebf79a134d06871c770eec65f36fcffa6f50628da410ec664fd48294329f033a1c1fadbc5aa0e09a23fd152e48f23f0812aa3bd7488d4e799b324904ea55fe007e77c7532f81d4798b4bbe4a4fc3ee3a0d9b9658719edc447392ec4d2e176bcd7cc7373e9198a6070e5b232d7910f90de5ff2615c05cf2f8d3a13664e1aa8134efeb424a8b0e30a9485ad61e660781a85c2ed01a6372ba135ee8ef7f4a61827a25d63de7676aaa4b5a84079e89fb35b3282694e8021e69cedc63141f0d12874bf3928c6725c23d0172fd9869eaa5487dc738e0d2341b2ae60ab82f8ef128fc559fea6a4d64ab432b388bccd609af7a12c587fc93ea4d056d2e2e99dbca8e57770c5d7f4add389ef15bb8dac08ef7eb9e6f00a7d64f36163b1c24700279b74faf340b9ed2c093e768826c6865ab540f6186968ffd488989621fcd5c330cf385a168a73ac36bb41fb91f48701b8ebead97ea45bb363d4647a8fd679e104c5509475a123b288a2961fb0872da3b7dcc7b335e331bfc32b5c4c2102e7c8ce160e425bd0e6326717c248e5b9f64c9f9798a2c87e8f0d5c862b3858d37d40b990e3c63eb3d57df83c5f6c747a91625929b81def80575589db456b45475ea19a090f2ac6b7b9ef9bd379c21e7a988e7d5b39e4542287d4ff851e0492231f3d2a8141b901a59b7f87f80ee140cb50f1641edd97f7899974d408976e4cda4df73857ed6aed5f06207fafb9e7f6f261b14853a331f68bb8fbb62096dd5e3c9eb97896d7597042da93c106e2cb650c9e31aa7678d661af66c8a963b8d936f00647ec8eb8f65061fbc3a9dcabd265574c11fbd9f3c7e04a7aaa85cbc547b70883c4363b5368203633b0cf10212059d6f02892b36fa0d95996c85ad719a6a9b6fd07f40fd0dca85b9d0a9383e2e85fe655464a411f8c43e06cea66eace6ed5026c4b2837595582e0c821f60a3cccf5de5e6f082b6a794e08f3582419df806ec856467acf8a82d106e8abcb897e54b4db5df8abff96c404fcef48e24ed8d2d365c1fe8aac2a06ed61419b46b9d4cb77a70f0ef21be91d6f692b25fef6a3c167b488d225741868ad6a6b9b06990975e9eb49bd076427c8277fd9f4464c2ca51f39453bf013c16951bf752fd57be767d2c45948dc62bf149380f69f9757b834c5b87b0db787baf92c7b70f8fb69648f8cf00b17896f042607f91546da465b6d0404916be5c1ff1fb75478f27e66abd384003ba11a542231853f6989f97ef9389a92ca6690bc5438ee59ba22cd310f0e6bb4c6e77cc84ac913b1c9009b7dc3f46397c90ebc928049ae2caafa42d53d8ca4deee9033a50d0d9138d98a1240c192b5ec429c226ca2663a0fdaac082581c2419df3ea12db5bd1dbda04e30f9145a65d7da41cb41c5b8599406b968c1a6300af6d82fcd7f87436690d708ca80f39ca43a5e896f8df5920130328ccfa2888c6efae3f6a31335bdb89900bb64e1bb9126e5045f2c91d4883b7839841d82a30c1eb173d47b5bb4a2b3d15b95bd1651f5c409567222eea5aa9f33abca6a0ea17e8c073acaee03cea75adebf7ccb414b722a74bf89b35fa3ac09d45f66638187071d31b32aabe5a089f5a6e3db53ca99ccc1e74c609e2007c528f59cf7400f226966a7db238ff2c4c626ad41ca3694b1063f1f856469395b734ea313c5c1b4caeefb729314d40df9afee2f232a863c122fea7b71956d87309e00e7f4ef6bde7905b854c9dc502efd73b17c18c1f9dae914e4fabb623e960bc44485b101d177789d1e9c7e94e900ca20206511d41ae941e0fbde2946f036f0744342dad2d1e197d87a9029a19a2d0d6862bfee71aae9e9e51380d8cafa3d2ddb920bf3383186e07636402f0486ea64a1ca473e3c4beccc606593124c4842fda158996ac9a3d07b0e5416dddc37b8d7acec618941465fe1b2c1848713d4b7940622c821af925573d11d112d84ea7de4d48324e71ab9bc68c60aa24ca2c38b1c6711f11cf8ab7fe84d5044583712634beed4e8fe13811e2919ed9246770e15b8b5e70ed2409d268e6f7ce5e4d4409b799c5eced02b4b42d17009bd039a238b02de3f2d50bd8b0226eaa06086fde9888e75e13781f563021fb26aa77b522b7abb393e9d79aa472f33964453de87fd0cfa566632e7e8022890a9689f9f72389d03feff9f05c5f9e5ebd0967b2955450c1c1a5d7dde12eeec709a28c819c70fcb774c44b3efceb14e6b5c3392451845110f75611d3c222db5e1a57b6beed5fb7e8471b385ae14de0f717fd0f14c0fc4ad121d27f60618355ea8ddcf7092bbf5c8a45940e6cf67af851be595bb10f28591ddfa9417e689284b35b39d21d54432fb3c7acc426db128ad04b752db036455f7b1a77e62e0cb08f36fd395f4d92b4e52d6528e663cab1f3f38a22ba6e628cb1150746828f3f996c10834fdcb1418e2557e2f9adc1823eead041d968f2a94c1034aede1d08bb0fe329b2480f57e7dd08b64c18c011057d80f337f136c0ef2e28cb0ec7d6528c09eec902507ade4809c4a6ec83105ad44d90e26d0dc54c43a1f68e74cf5e0678de93298ea7d5cbcd28a3740de9b1a23df264ee72344c3369a8a845ff3aaf79e633c30238c7acad9ce11a6fcf321270278e96dc8a3544b200bacfd42d15f7369a4cbaab88a8464a6d4953f1ba9484f1a861ab3dce304a78a7ba923b195d13352b7eb759031cd33b6d99fbfe4aa38d70e7b4874ed713c8d21014867131ae31bef45bcb10a3f3c5a2f4f7ee33e8eaf8d9127a723fc566c5983bc52e087b732c71114f4e74cb4eee463756a9dd56af19f19e7d25d0ccc61e417f3832650d161546bea506e59296a2e3f75f8d4f2be99c709d1285377b74e792dd0c142b312f109b2fd1e92daf94b2c79f3298c9d7927c8c3ab550e081c028fb9a04f3ef36bf2f19fbebe5af37233a4cd9e858980f805bbfba9c8ec07327844f7e4c340fb0a523666d190751db34d085528ff6510b52fc441a5119297504f4449913dec4d70c309521363fa37b669de7e08d1d2dd8b402d8efb6ecaf3ae7efa11f85753c4fdc03f015f7f391a69eab3e86919d8085d9dbf274b2edad47737aa61bb8011d21adf959f62cd4e7cd2cb34105a1311e02ef14f9f28e385f8f65de1dad74f99deec72c8b4334a882a82a26815f8417c8efbdafa94286956cdd3a5179d3e11d67203aff73f0190a43afda25d39e522cfa9b325f33a8a64df46b604bf39a13bdbdc15cfabecd21d04b93b8db17fd1e3fecd749bac176d4964a80e91ebfdaeca55a84d419401850166e5e49611a44620fcad5b6d87f9b2d9b2882f2d90b1941f02dd86396acd4a6ddfd745eec911d579ee063cecba04366b266ec39b3f99769a7e0b01af68b3dcad5b079e37d4eb096074d21ed14cc9496d669e660e47d6df0596d56d8160d70134249e6a6a8d0898c3dd78c769eded44344051d9e003a6e5c05dbfca182d4fa8de1af31e8b7500da5d4b9d30d8edcd18e6a181cc530a6c203ff47cdfe0647277cb17e443","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"03553289708e427f26c463553ac340a4"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
